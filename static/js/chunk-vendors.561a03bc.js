(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"0030":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={rowNotice:{text:"",icon:"volume",mode:"",color:"#f9ae3d",bgColor:"#fdf6ec",fontSize:14,speed:80}}},"00ba":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("e062"),n("64aa");var o={numberBox:{name:"",value:0,min:1,max:Number.MAX_SAFE_INTEGER,step:1,integer:!1,disabled:!1,disabledInput:!1,asyncChange:!1,inputWidth:35,showMinus:!0,showPlus:!0,decimalLength:null,longPress:!0,color:"#323233",buttonSize:30,bgColor:"#EBECEE",cursorSpacing:100,disableMinus:!1,disablePlus:!1,iconStyle:""}};t.default=o},"00c2":function(e,t,n){"use strict";var o=n("bb80"),i=n("338c"),r=n("f660"),a=n("036b").indexOf,s=n("11bf"),c=o([].push);e.exports=function(e,t){var n,o=r(e),u=0,l=[];for(n in o)!i(s,n)&&i(o,n)&&c(l,n);while(t.length>u)i(o,n=t[u++])&&(~a(l,n)||c(l,n));return l}},"00ca":function(e,t,n){var o=n("56c8"),i=n("da1d"),r=i.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return o(e,r)}},"0103":function(e,t,n){"use strict";n.r(t);var o=n("6d22"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},"0173":function(e,t,n){"use strict";var o,i,r=n("85c1"),a=n("29d8"),s=r.process,c=r.Deno,u=s&&s.versions||c&&c.version,l=u&&u.v8;l&&(o=l.split("."),i=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!i&&a&&(o=a.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=a.match(/Chrome\/(\d+)/),o&&(i=+o[1]))),e.exports=i},"017d":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("9b1b"));n("bf0f"),n("2797");var r=o(n("8944")),a=o(n("8a52")),s=o(n("391d")),c=n("78ab"),u=function(e,t){var n={};return e.forEach((function(e){(0,c.isUndefined)(t[e])||(n[e]=t[e])})),n};t.default=function(e){return new Promise((function(t,n){var o,l=(0,r.default)((0,a.default)(e.baseURL,e.url),e.params),d={url:l,header:e.header,complete:function(o){e.fullPath=l,o.config=e;try{"string"===typeof o.data&&(o.data=JSON.parse(o.data))}catch(i){}(0,s.default)(t,n,o)}};if("UPLOAD"===e.method){delete d.header["content-type"],delete d.header["Content-Type"];var f={filePath:e.filePath,name:e.name};o=uni.uploadFile((0,i.default)((0,i.default)((0,i.default)({},d),f),u(["files","file","timeout","formData"],e)))}else if("DOWNLOAD"===e.method)(0,c.isUndefined)(e.timeout)||(d.timeout=e.timeout),o=uni.downloadFile(d);else{o=uni.request((0,i.default)((0,i.default)({},d),u(["data","method","timeout","dataType","responseType","withCredentials"],e)))}e.getTask&&e.getTask(o,e)}))}},"01a2":function(e,t,n){"use strict";n("223c"),n("e5d4"),n("0768"),n("d4b5"),n("6994")},"036b":function(e,t,n){"use strict";var o=n("f660"),i=n("e34c"),r=n("1fc1"),a=function(e){return function(t,n,a){var s=o(t),c=r(s);if(0===c)return!e&&-1;var u,l=i(a,c);if(e&&n!==n){while(c>l)if(u=s[l++],u!==u)return!0}else for(;c>l;l++)if((e||l in s)&&s[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},"0398":function(e,t,n){"use strict";(function(e){n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t){t=function(e){return e.replace(/<\?xml.*\?>\n/,"").replace(/<!doctype.*>\n/,"").replace(/<!DOCTYPE.*>\n/,"")}(t);var n=[],o={node:"root",children:[]};return(0,i.default)(t,{start:function(e,t,i){var r={name:e};if(0!==t.length&&(r.attrs=function(e){return e.reduce((function(e,t){var n=t.value,o=t.name;return n.match(/ /)&&-1===["style","src"].indexOf(o)&&(n=n.split(" ")),e[o]?Array.isArray(e[o])?e[o].push(n):e[o]=[e[o],n]:e[o]=n,e}),{})}(t)),i){var a=n[0]||o;a.children||(a.children=[]),a.children.push(r)}else n.unshift(r)},end:function(t){var i=n.shift();if(i.name!==t&&e.error("invalid state: mismatch end tag"),0===n.length)o.children.push(i);else{var r=n[0];r.children||(r.children=[]),r.children.push(i)}},chars:function(e){var t={type:"text",text:e};if(0===n.length)o.children.push(t);else{var i=n[0];i.children||(i.children=[]),i.children.push(t)}},comment:function(e){var t={node:"comment",text:e},o=n[0];o&&(o.children||(o.children=[]),o.children.push(t))}}),o.children},n("5c47"),n("a1c1"),n("473f"),n("bf0f"),n("2c10"),n("5ef2"),n("aa9c"),n("3efd");var i=o(n("a6a3"))}).call(this,n("ba7c")["default"])},"03a0":function(e,t,n){"use strict";var o=n("bb80"),i=n("497b"),r=n("9e70"),a=n("862c"),s=o("".charAt),c=o("".charCodeAt),u=o("".slice),l=function(e){return function(t,n){var o,l,d=r(a(t)),f=i(n),p=d.length;return f<0||f>=p?e?"":void 0:(o=c(d,f),o<55296||o>56319||f+1===p||(l=c(d,f+1))<56320||l>57343?e?s(d,f):o:e?u(d,f,f+2):l-56320+(o-55296<<10)+65536)}};e.exports={codeAt:l(!1),charAt:l(!0)}},"03dc":function(e,t,n){"use strict";var o=n("03a0").charAt;e.exports=function(e,t,n){return t+(n?o(e,t).length:1)}},"0468":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("64aa"),n("5ef2"),n("f7a5"),n("e966");var o=n("c47d"),i=n("1ffa"),r=["text","number","idcard","digit","password","tel"],a=["number","digit"],s=["off","one-time-code"],c=["none","text","decimal","numeric","tel","search","email","url"],u={name:"Input",mixins:[o.field],props:{name:{type:String,default:""},type:{type:String,default:"text"},password:{type:[Boolean,String],default:!1},placeholder:{type:String,default:""},placeholderStyle:{type:String,default:""},placeholderClass:{type:String,default:"input-placeholder"},disabled:{type:[Boolean,String],default:!1},maxlength:{type:[Number,String],default:140},confirmType:{type:String,default:"done"},textContentType:{type:String,default:""},step:{type:String,default:"0.000000000000000001"},inputmode:{type:String,default:void 0,validator:function(e){return!!~c.indexOf(e)}},cursorColor:{type:String,default:""}},data:function(){return{wrapperHeight:0,cachedValue:""}},computed:{inputType:function(){var e="";switch(this.type){case"text":"search"===this.confirmType&&(e="search");break;case"idcard":e="text";break;case"digit":e="number";break;default:e=~r.indexOf(this.type)?this.type:"text";break}return this.password?"password":e},_step:function(){return~a.indexOf(this.type)?this.step:""},autocomplete:function(){var e=s.indexOf(this.textContentType),t=s.indexOf((0,i.kebabCase)(this.textContentType)),n=-1!==e?e:-1!==t?t:0;return s[n]},showPlaceholder:function(){var e="digit"===this.type?this.cachedValue.indexOf("."):-1;return!(this.composing||this.valueSync.length||"-"===this.cachedValue||-1!==e&&e===this.cachedValue.length-1)}},watch:{maxlength:function(e){var t=this.valueSync.slice(0,parseInt(e,10));t!==this.valueSync&&(this.valueSync=t)},valueSync:function(e){"number"!==this.type||"-"===this.cachedValue&&""===e||(this.cachedValue=e)}},created:function(){this.$dispatch("Form","uni-form-group-update",{type:"add",vm:this})},mounted:function(){if("search"===this.confirmType){var e=document.createElement("form");e.action="",e.onsubmit=function(){return!1},e.className="uni-input-form",e.appendChild(this.$refs.input),this.$refs.wrapper.appendChild(e)}var t=this;while(t){var n=t.$options._scopeId;n&&this.$refs.placeholder.setAttribute(n,""),t=t.$parent}},beforeDestroy:function(){this.$dispatch("Form","uni-form-group-update",{type:"remove",vm:this})},methods:{_onKeyup:function(e){var t=e.target;this.$trigger("confirm",e,{value:t.value}),this.confirmHold||t.blur()},_onInput:function(e,t){var n=this,o=!1;if(!this.composing||!this.ignoreCompositionEvent){if("number"===this.inputType){var i=parseInt(this.maxlength,10);if(i>0&&e.target.value.length>i&&(this.cachedValue.length===i?(this.valueSync=this.cachedValue,o=!0):(e.target.value=e.target.value.slice(0,i),this.valueSync=e.target.value)),this.__clearCachedValue&&e.target.removeEventListener("blur",this.__clearCachedValue),e.target.validity&&!e.target.validity.valid){if((!this.cachedValue||!e.target.value)&&"-"===e.data||"-"===this.cachedValue[0]&&"deleteContentBackward"===e.inputType){this.cachedValue="-",this.valueSync="";var r=this.__clearCachedValue=function(){n.cachedValue=e.target.value=""};return void e.target.addEventListener("blur",r)}if(this.cachedValue)if(-1!==this.cachedValue.indexOf(".")){if("."!==e.data&&"deleteContentBackward"===e.inputType){var a=this.cachedValue.indexOf(".");return this.cachedValue=e.target.value=this.valueSync=this.cachedValue.slice(0,a),this.$triggerInput(e,{value:this.valueSync},t)}}else if("."===e.data)return this.cachedValue+=".",this.__clearCachedValue=function(){n.cachedValue=n.valueSync=e.target.value=n.cachedValue.slice(0,-1)},e.target.addEventListener("blur",this.__clearCachedValue),!1;return void(this.cachedValue=this.valueSync=e.target.value="-"===this.cachedValue?"":this.cachedValue)}this.cachedValue=this.valueSync}o||(this.valueSync=this.$refs.input.value,this.$triggerInput(e,{value:this.valueSync},t))}},_onComposition:function(e){switch(e.type){case"compositionstart":this.composing=!0;break;case"compositionend":this.composing&&(this.composing=!1,this._onInput(e));break}!this.ignoreCompositionEvent&&this.$trigger(e.type,e,{data:e.data})},_resetFormData:function(){this.valueSync=""},_getFormData:function(){return this.name?{value:this.valueSync,key:this.name}:{}}}};t.default=u},"0506":function(e,t,n){"use strict";n("5c47");var o=n("8bdb"),i=n("71e9"),r=n("474f"),a=n("e7e3"),s=n("9e70"),c=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),u=/./.test;o({target:"RegExp",proto:!0,forced:!c},{test:function(e){var t=a(this),n=s(e),o=t.exec;if(!r(o))return i(u,t,n);var c=i(o,t,n);return null!==c&&(a(c),!0)}})},"05c5":function(e,t,n){"use strict";(function(e){n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=!1,n=!1;e("onPageLoad",(function(e){c(e)})),e("onPageShow",(function(e){var r=e.$parent.$parent;e._isMounted&&c(e),n&&document.removeEventListener("touchmove",n,s),r.disableScroll&&(n=a.disableScroll,document.addEventListener("touchmove",n,s));var u=(0,i.hasLifecycleHook)(e.$options,"onPageScroll"),l=(0,i.hasLifecycleHook)(e.$options,"onReachBottom"),d=r.onReachBottomDistance,f=(0,o.isPlainObject)(r.titleNView)&&"transparent"===r.titleNView.type||(0,o.isPlainObject)(r.navigationBar)&&"transparent"===r.navigationBar.type;t&&document.removeEventListener("scroll",t),(f||u||l)&&(t=(0,a.createScrollListener)(e.$page.id,{enablePageScroll:u,enablePageReachBottom:l,onReachBottomDistance:d,enableTransparentTitleNView:f}),requestAnimationFrame((function(){document.addEventListener("scroll",t)})))}))},n("e838"),n("c223");var o=n("1ffa"),i=n("c9ac"),r=n("60bf"),a=n("6545"),s=!!o.supportsPassive&&{passive:!1};function c(t){if(uni.canIUse("css.var")){var n=parseFloat(__uniConfig.tabBar.height),o=t.$parent.$parent,i=o.navigationBar.type,a="default"===i||"float"===i?r.NAVBAR_HEIGHT:0,s=getApp().$children[0].showTabBar?isNaN(n)?r.TABBAR_HEIGHT:n:0,c=uni.canIUse("css.env")?"env":uni.canIUse("css.constant")?"constant":"",u=a&&c?"calc(".concat(a,"px + ").concat(c,"(safe-area-inset-top))"):"".concat(a,"px"),l=s&&c?"calc(".concat(s,"px + ").concat(c,"(safe-area-inset-bottom))"):"".concat(s,"px"),d=document.documentElement.style;d.setProperty("--window-top","calc(var(--top-window-height) + ".concat(u,")")),d.setProperty("--window-bottom",l),e.debug("".concat(t.$page.route,"[").concat(t.$page.id,"]：--window-top=").concat(u)),e.debug("".concat(t.$page.route,"[").concat(t.$page.id,"]：--window-bottom=").concat(l))}}}).call(this,n("ba7c")["default"])},"05e4":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={gap:{bgColor:"transparent",height:20,marginTop:0,marginBottom:0,customStyle:{}}}},"05f2":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.hideTabBar=function(e){return c("hideTabBar",e)},t.hideTabBarRedDot=function(e){return c("hideTabBarRedDot",e)},t.removeTabBarBadge=function(e){return c("removeTabBarBadge",e)},t.setTabBarBadge=function(e){return c("setTabBarBadge",e)},t.setTabBarItem=function(e){return c("setTabBarItem",e)},t.setTabBarStyle=function(e){return c("setTabBarStyle",e)},t.showTabBar=function(e){return c("showTabBar",e)},t.showTabBarRedDot=function(e){return c("showTabBarRedDot",e)},n("aa77"),n("bf0f"),n("9db6");var o=n("1ffa"),i=["text","iconPath","iconfont","selectedIconPath","visible"],r=["color","selectedColor","backgroundColor","borderStyle","midButton"],a=["badge","redDot"],s=["text","selectedText","fontSize","color","selectedColor"];function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=getApp();if(n){var c=!1,u=getCurrentPages();if(u.length?u[u.length-1].$page.meta.isTabBar&&(c=!0):n.$children[0].hasTabBar&&(c=!0),!c)return{errMsg:"".concat(e,":fail not TabBar page")};var l=t.index,d=__uniConfig.tabBar;if(l>=__uniConfig.tabBar.list.length)return{errMsg:"".concat(e,":fail tabbar item not found")};switch(e){case"showTabBar":n.$children[0].hideTabBar=!1;break;case"hideTabBar":n.$children[0].hideTabBar=!0;break;case"setTabBarItem":t.iconfont&&((0,o.setProperties)(d.list[l].iconfont,s,t.iconfont),t.iconfont=d.list[l].iconfont),(0,o.setProperties)(d.list[l],i,t);var f=t.pagePath,p=f&&__uniRoutes.find((function(e){var t=e.path;return t===f}));if(p){var h=p.meta;h.isTabBar=!0,h.tabBarIndex=l,h.isQuit=!0,h.isSet=!0,h.id=l+1;var g=__uniConfig.tabBar;g&&g.list&&g.list[l]&&(g.list[l].pagePath=f.startsWith("/")?f.substring(1):f)}break;case"setTabBarStyle":(0,o.setProperties)(d,r,t);break;case"showTabBarRedDot":(0,o.setProperties)(d.list[l],a,{badge:"",redDot:!0});break;case"setTabBarBadge":(0,o.setProperties)(d.list[l],a,{badge:t.text,redDot:!0});break;case"hideTabBarRedDot":case"removeTabBarBadge":(0,o.setProperties)(d.list[l],a,{badge:"",redDot:!1});break}}return{}}},"061b":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.callback=void 0,n("5c47"),n("0506"),n("23f4"),n("7d2f"),n("9c4e"),n("ab80");var o=0,i={};function r(e,t){var n=i[e]||{};delete i[e];var o=t.errMsg||"";new RegExp("\\:\\s*fail").test(o)?n.fail&&n.fail(t):n.success&&n.success(t),n.complete&&n.complete(t)}var a={warp:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=String(o++);i[n]={success:t.success,fail:t.fail,complete:t.complete};var a=Object.assign({},t),s=e.bind(this)(a,n);s&&r(n,s)}},invoke:r};t.callback=a},"0699":function(e,t,n){var o=n("d191"),i=n("d5ca"),r=n("c646"),a=n("29d5"),s=a("species");e.exports=function(e,t){var n,a=o(e).constructor;return void 0===a||r(n=o(a)[s])?t:i(n)}},"0745":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={divider:{dashed:!1,hairline:!0,dot:!1,textPosition:"center",text:"",textSize:14,textColor:"#909399",lineColor:"#dcdfe6"}}},"0768":function(e,t,n){"use strict";var o=n("8bdb"),i=n("338c"),r=n("ddd3"),a=n("52df"),s=n("8b3b"),c=n("5b2c"),u=s("symbol-to-string-registry");o({target:"Symbol",stat:!0,forced:!c},{keyFor:function(e){if(!r(e))throw new TypeError(a(e)+" is not a symbol");if(i(u,e))return u[e]}})},"07da":function(e,t,n){"use strict";var o=n("71e9"),i=n("e7e3"),r=n("474f"),a=n("ada5"),s=n("9ad8"),c=TypeError;e.exports=function(e,t){var n=e.exec;if(r(n)){var u=o(n,e,t);return null!==u&&i(u),u}if("RegExp"===a(e))return o(s,e,t);throw new c("RegExp#exec called on incompatible receiver")}},"0829":function(e,t,n){"use strict";var o=n("8bdb"),i=n("ea07").entries;o({target:"Object",stat:!0},{entries:function(e){return i(e)}})},"08d7":function(e,t,n){"use strict";var o=n("8bdb"),i=n("6ac9");o({target:"Reflect",stat:!0},{ownKeys:i})},"08eb":function(e,t,n){"use strict";var o=n("8bdb"),i=n("3d77"),r=n("29ba"),a=!r((function(e){Array.from(e)}));o({target:"Array",stat:!0,forced:a},{from:i})},"092b":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={v:"2.0.37",version:"2.0.37",type:["primary","success","info","error","warning"],color:{"u-primary":"#2979ff","u-warning":"#ff9900","u-success":"#19be6b","u-error":"#fa3534","u-info":"#909399","u-main-color":"#303133","u-content-color":"#606266","u-tips-color":"#909399","u-light-color":"#c0c4cc"},unit:"px"};t.default=o},"0931":function(e,t,n){"use strict";var o=n("8c08"),i=o("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,"/./"[e](t)}catch(o){}}return!1}},"093e":function(e,t,n){"use strict";(function(e){n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("64aa"),n("bd06"),n("5c47"),n("0506"),n("5ef2");var i=o(n("ccb8")),r=n("1696"),a={name:"CustomTabBar",props:{selected:{type:Number,default:0},showIcon:{type:Boolean,default:!0},direction:{type:String,default:"horizontal"}},data:function(){return{selectedIndex:this.selected}},computed:{tabBarOptions:function(){return r.tabBar},hasTabBar:function(){return r.tabBar.list&&r.tabBar.list.length},showTabBar:function(){var e=getApp();return!e||!e.$children[0].hideTabBar}},watch:{selected:function(e){this.selectedIndex=e;var t=getApp().$children[0].$refs.tabBar;t&&(t.selectedIndex=e)},$route:function(e,t){if(e.meta.isTabBar){var n=r.tabBar.list.findIndex((function(t){return e.meta.pagePath===t.pagePath}));n>-1&&(this.selectedIndex=n)}}},methods:{_getRealPath:function(e){return/^([a-z-]+:)?\/\//i.test(e)||/^data:.*,.*/.test(e)||0===e.indexOf("/")||(e="/"+e),(0,i.default)(e)},_switchTab:function(t,n){var o=t.text,i=t.pagePath;this.selectedIndex=n;var r="/"+i;r===__uniRoutes[0].alias&&(r="/");var a={index:n,text:o,pagePath:i};this.$emit("onTabItemTap",a),this.$route.path===r&&e.emit("onTabItemTap",a)}}};t.default=a}).call(this,n("ef66"))},"0976":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.upx2px=function(e,t){0===i&&function(){var e=uni.getSystemInfoSync(),t=e.platform,n=e.pixelRatio,a=e.windowWidth;i=a,r=n,o="ios"===t}();if(e=Number(e),0===e)return 0;var n=__uniConfig.globalStyle||__uniConfig.window||{},s=a(n.rpxCalcMaxDeviceWidth,960),c=a(n.rpxCalcBaseDeviceWidth,375),u=a(n.rpxCalcIncludeWidth,750),l=t||i;l=e===u||l<=s?l:c;var d=e/750*l;d<0&&(d=-d);d=Math.floor(d+1e-4),0===d&&(d=1!==r&&o?.5:1);return e<0?-d:d},n("64aa");var o=!1,i=0,r=0;function a(e,t){return e=Number(e),isNaN(e)?t:e}},"09a1":function(e,t,n){"use strict";(function(e){function o(){return window.location.protocol+"//"+window.location.host}n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.getImageInfo=function(t,n){var i=t.src,r=e,a=r.invokeCallbackHandler,s=new Image,c=i;s.onload=function(){a(n,{errMsg:"getImageInfo:ok",width:s.naturalWidth,height:s.naturalHeight,path:0===c.indexOf("/")?o()+c:c})},s.onerror=function(e){a(n,{errMsg:"getImageInfo:fail"})},s.src=i},n("5ef2")}).call(this,n("ef66"))},"0a02":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={countDown:{time:0,format:"HH:mm:ss",autoStart:!0,millisecond:!1}}},"0ae2":function(e,t,n){"use strict";n.r(t);var o=n("0468"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},"0b46":function(e,t,n){"use strict";var o=n("6a50");o("Int8",(function(e){return function(t,n,o){return e(this,t,n,o)}}))},"0b5a":function(e,t,n){"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"0bd5":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("64aa"),n("5ef2"),n("c223"),n("bf0f"),n("2797"),n("dc8a");n("1909");var o=n("c47d"),i={name:"Button",mixins:[o.hover,o.emitter,o.listeners],props:{hoverClass:{type:String,default:"button-hover"},disabled:{type:[Boolean,String],default:!1},id:{type:String,default:""},hoverStopPropagation:{type:Boolean,default:!1},hoverStartTime:{type:[Number,String],default:20},hoverStayTime:{type:[Number,String],default:70},formType:{type:String,default:"",validator:function(e){return~["","submit","reset"].indexOf(e)}},openType:{type:String,default:""}},data:function(){return{clickFunction:null}},methods:{_onClick:function(e,t){this.disabled||(t&&this.$el.click(),this.formType?this.$dispatch("Form","submit"===this.formType?"uni-form-submit":"uni-form-reset",{type:this.formType}):this.openType)},_bindObjectListeners:function(e,t){if(t)for(var n in t){var o=e.on[n],i=t[n];e.on[n]=o?[].concat(o,i):i}return e}},render:function(e){var t=this,n=Object.create(null);return this.$listeners&&Object.keys(this.$listeners).forEach((function(e){(!t.disabled||"click"!==e&&"tap"!==e)&&(n[e]=t.$listeners[e])})),this.hoverClass&&"none"!==this.hoverClass?e("uni-button",this._bindObjectListeners({class:[this.hovering?this.hoverClass:""],attrs:{disabled:this.disabled},on:{touchstart:this._hoverTouchStart,touchend:this._hoverTouchEnd,touchcancel:this._hoverTouchCancel,mousedown:this._hoverMousedown,mouseup:this._hoverMouseup,click:this._onClick}},n),this.$slots.default):e("uni-button",this._bindObjectListeners({class:[this.hovering?this.hoverClass:""],attrs:{disabled:this.disabled},on:{click:this._onClick}},n),this.$slots.default)},listeners:{"label-click":"_onClick","@label-click":"_onClick"}};t.default=i},"0c26":function(e,t,n){"use strict";var o=n("8bdb"),i=n("ee98").trim,r=n("8b27");o({target:"String",proto:!0,forced:r("trim")},{trim:function(){return i(this)}})},"0cc2":function(e,t,n){"use strict";var o=n("8bdb"),i=n("71e9"),r=n("a734"),a=n("8945"),s=n("474f"),c=n("4afb"),u=n("c337"),l=n("8c4f"),d=n("181d"),f=n("6aca"),p=n("81a9"),h=n("8c08"),g=n("799d"),_=n("5057"),v=a.PROPER,m=a.CONFIGURABLE,y=_.IteratorPrototype,M=_.BUGGY_SAFARI_ITERATORS,I=h("iterator"),C=function(){return this};e.exports=function(e,t,n,a,h,_,b){c(n,t,a);var T,S,E,k=function(e){if(e===h&&R)return R;if(!M&&e&&e in L)return L[e];switch(e){case"keys":return function(){return new n(this,e)};case"values":return function(){return new n(this,e)};case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},D=t+" Iterator",A=!1,L=e.prototype,O=L[I]||L["@@iterator"]||h&&L[h],R=!M&&O||k(h),w="Array"===t&&L.entries||O;if(w&&(T=u(w.call(new e)),T!==Object.prototype&&T.next&&(r||u(T)===y||(l?l(T,y):s(T[I])||p(T,I,C)),d(T,D,!0,!0),r&&(g[D]=C))),v&&"values"===h&&O&&"values"!==O.name&&(!r&&m?f(L,"name","values"):(A=!0,R=function(){return i(O,this)})),h)if(S={values:k("values"),keys:_?R:k("keys"),entries:k("entries")},b)for(E in S)(M||A||!(E in L))&&p(L,E,S[E]);else o({target:t,proto:!0,forced:M||A},S);return r&&!b||L[I]===R||p(L,I,R,{name:h}),g[t]=R,S}},"0d1b":function(e,t,n){var o,i,r=n("bdbb").default;n("f7a5"),n("bf0f");var a=n("d04f"),s={autoSetContainer:!1,appendToBody:!0},c={install:function(e){var t="3."===e.version.slice(0,2)?e.config.globalProperties:e.prototype;t.$clipboardConfig=s,t.$copyText=function(e,t){return new Promise((function(n,o){var i=document.createElement("button"),c=new a(i,{text:function(){return e},action:function(){return"copy"},container:"object"===r(t)?t:document.body});c.on("success",(function(e){c.destroy(),n(e)})),c.on("error",(function(e){c.destroy(),o(e)})),s.appendToBody&&document.body.appendChild(i),i.click(),s.appendToBody&&document.body.removeChild(i)}))},e.directive("clipboard",{bind:function(e,t,n){if("success"===t.arg)e._vClipboard_success=t.value;else if("error"===t.arg)e._vClipboard_error=t.value;else{var o=new a(e,{text:function(){return t.value},action:function(){return"cut"===t.arg?"cut":"copy"},container:s.autoSetContainer?e:void 0});o.on("success",(function(t){var n=e._vClipboard_success;n&&n(t)})),o.on("error",(function(t){var n=e._vClipboard_error;n&&n(t)})),e._vClipboard=o}},update:function(e,t){"success"===t.arg?e._vClipboard_success=t.value:"error"===t.arg?e._vClipboard_error=t.value:(e._vClipboard.text=function(){return t.value},e._vClipboard.action=function(){return"cut"===t.arg?"cut":"copy"})},unbind:function(e,t){e._vClipboard&&("success"===t.arg?delete e._vClipboard_success:"error"===t.arg?delete e._vClipboard_error:(e._vClipboard.destroy(),delete e._vClipboard))}})},config:s};"object"===r(t)?e.exports=c:(o=[],i=function(){return c}.apply(t,o),void 0===i||(e.exports=i))},"0e36":function(e,t,n){var o=n("d95b"),i=n("d970"),r=n("1e5d"),a=function(e){return function(t,n,a){var s,c=o(t),u=r(c),l=i(a,u);if(e&&n!=n){while(u>l)if(s=c[l++],s!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},"0e40":function(e,t,n){"use strict";var o=n("86ca");e.exports=Math.fround||function(e){return o(e,1.1920928955078125e-7,34028234663852886e22,11754943508222875e-54)}},"0e69":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={form:{model:function(){return{}},rules:function(){return{}},errorType:"message",borderBottom:!0,labelPosition:"left",labelWidth:45,labelAlign:"left",labelStyle:function(){return{}}}}},"0ee4":function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(o){"object"===typeof window&&(n=window)}e.exports=n},"0f31":function(e,t,n){var o,i,r,a=n("bdbb").default;n("f7a5"),function(s,c,u){"object"===a(t)?e.exports=t=c(n("5e74"),n("f794")):(i=[n("5e74"),n("f794")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))}(0,(function(e){
/** @preserve
   * Counter block mode compatible with  Dr Brian Gladman fileenc.c
   * derived from CryptoJS.mode.CTR
   * Jan Hruby jhruby.web@gmail.com
   */
return e.mode.CTRGladman=function(){var t=e.lib.BlockCipherMode.extend();function n(e){if(255===(e>>24&255)){var t=e>>16&255,n=e>>8&255,o=255&e;255===t?(t=0,255===n?(n=0,255===o?o=0:++o):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=o}else e+=1<<24;return e}var o=t.Encryptor=t.extend({processBlock:function(e,t){var o=this._cipher,i=o.blockSize,r=this._iv,a=this._counter;r&&(a=this._counter=r.slice(0),this._iv=void 0),function(e){0===(e[0]=n(e[0]))&&(e[1]=n(e[1]))}(a);var s=a.slice(0);o.encryptBlock(s,0);for(var c=0;c<i;c++)e[t+c]^=s[c]}});return t.Decryptor=o,t}(),e.mode.CTRGladman}))},"0faf":function(e,t,n){"use strict";n.r(t);var o=n("84a1"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},1001:function(e,t,n){"use strict";var o=n("bb80"),i=n("1099"),r=Math.floor,a=o("".charAt),s=o("".replace),c=o("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,o,d,f){var p=n+e.length,h=o.length,g=l;return void 0!==d&&(d=i(d),g=u),s(f,g,(function(i,s){var u;switch(a(s,0)){case"$":return"$";case"&":return e;case"`":return c(t,0,n);case"'":return c(t,p);case"<":u=d[c(s,1,-1)];break;default:var l=+s;if(0===l)return i;if(l>h){var f=r(l/10);return 0===f?i:f<=h?void 0===o[f-1]?a(s,1):o[f-1]+a(s,1):i}u=o[l-1]}return void 0===u?"":u}))}},1072:function(e,t,n){"use strict";(function(e){n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("5c47"),n("a1c1"),n("bf0f"),n("2797"),n("aa9c");var o={ensp:" ",emsp:" ",nbsp:" "},i={name:"Text",props:{selectable:{type:[Boolean,String],default:!1},space:{type:String,default:""},decode:{type:[Boolean,String],default:!1}},methods:{_decodeHtml:function(e){return this.space&&o[this.space]&&(e=e.replace(/ /g,o[this.space])),this.decode&&(e=e.replace(/&nbsp;/g,o.nbsp).replace(/&ensp;/g,o.ensp).replace(/&emsp;/g,o.emsp).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&apos;/g,"'")),e}},render:function(t){var n=this,o=[];return this.$slots.default&&this.$slots.default.forEach((function(i){if(i.text){var r=i.text.replace(/\\n/g,"\n"),a=r.split("\n");a.forEach((function(e,i){o.push(n._decodeHtml(e)),i!==a.length-1&&o.push(t("br"))}))}else i.componentOptions&&"v-uni-text"!==i.componentOptions.tag&&e.warn("Do not nest other components in the text component, as there may be display differences on different platforms."),o.push(i)})),t("uni-text",{on:this.$listeners,attrs:{selectable:!!this.selectable}},[t("span",{},o)])}};t.default=i}).call(this,n("ba7c")["default"])},1099:function(e,t,n){"use strict";var o=n("862c"),i=Object;e.exports=function(e){return i(o(e))}},"10ab":function(e,t,n){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],o=t[1];return 3*(n+o)/4-o},t.toByteArray=function(e){var t,n,o=u(e),a=o[0],s=o[1],c=new r(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),l=0,d=s>0?a-4:a;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[l++]=255&t);1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,r=[],a=0,s=n-i;a<s;a+=16383)r.push(d(e,a,a+16383>s?s:a+16383));1===i?(t=e[n-1],r.push(o[t>>2]+o[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],r.push(o[t>>10]+o[t>>4&63]+o[t<<2&63]+"="));return r.join("")};for(var o=[],i=[],r="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)o[s]=a[s],i[a.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var o=n===t?0:4-n%4;return[n,o]}function l(e){return o[e>>18&63]+o[e>>12&63]+o[e>>6&63]+o[63&e]}function d(e,t,n){for(var o,i=[],r=t;r<n;r+=3)o=(e[r]<<16&16711680)+(e[r+1]<<8&65280)+(255&e[r+2]),i.push(l(o));return i.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},"114e":function(e,t,n){"use strict";var o=n("85c1"),i=n("181d");i(o.JSON,"JSON",!0)},"118e":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={avatar:{src:"",shape:"circle",size:40,mode:"scaleToFill",text:"",bgColor:"#c0c4cc",color:"#ffffff",fontSize:18,icon:"",mpAvatar:!1,randomBgColor:!1,defaultUrl:"",colorIndex:"",name:""}}},"11bf":function(e,t,n){"use strict";e.exports={}},1221:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={noNetwork:{tips:"哎呀，网络信号丢失",zIndex:"",image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAABLKADAAQAAAABAAABLAAAAADYYILnAABAAElEQVR4Ae29CZhkV3kefNeq6m2W7tn3nl0aCbHIAgmQPGB+sLCNzSID9g9PYrAf57d/+4+DiW0cy8QBJ06c2In/PLFDHJ78+MGCGNsYgyxwIwktwEijAc1ohtmnZ+2Z7p5eq6vu9r/vuXWrq25VdVV1V3dXVX9Hmj73nv285963vvOd75yraeIEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQaD8E9PbrkvRopSMwMBBYRs+5O/yJS68cPnzYXel4tFP/jXbqjPRFEAiCQNe6Bw/6gdFn9Oy9Q90LLG2DgBBW2wyldIQIPPPCte2a5q3jtR+4ff/4wuBuXotrDwSEsNpjHKUXQODppy+udYJMEUEZgbd94DvnNwlA7YGAEFZ7jOOK78Xp06eTTkq7sxwQhmXuf/754VXl4iSstRAQwmqt8ZLWlkHg0UcD49qYfUjXfLtMtOZ7npExJu4iqZWLl7DWQUAIq3XGSlpaAYHD77q8xwuCOSUoXw8Sl0eMux977DGzQjES3AIICGG1wCBJEysj8PXnz230XXdr5RQFMYbRvWnv6w8UhMhliyGwYghr4Pjg3oEXL34ey9zyC9tiD2ml5h47dr1LN7S6CMjz/A3PvHh1Z6UyJby5EVgRhKUe7Kz/JU0LfvrJo5f+Y3MPibSuFgQGBgasYSd9l6GDsup0WS/T/9RTp9fXmU2SNwECdQ92E7S57iaMeJnPQLK6ixkDLfjlb7546RfrLkQyNBcC3dsP6oHWMd9G+V3JgwPHh7rnm1/yLQ8CbU9Y33zp0j+nZFUMb/DHmB7+SHGY3LUKAk8cObtD00xlHDrfNge+Z2ozU3c9dvx4Yr5lSL6lR6CtCWvg6OAPw9z538ZhhZRl6XrwhW8du1KX/iNejtwvPQIDR8+vSRqJ/obU7GupjdNdh2gW0ZDypJBFR6BtB2rg2OVtuub9JcmpHIpBoK1xfffLzx4f7C0XL2HNiYDp6bs9z23Ypn1fC1Y/9PCFDc3ZW2lVHIG2JKzTp4Ok7nv/G6Q054MIvda+bNb74pEgKGtwGAdL7pcfAa8vOKEZ2kyjWuLr7uDh+/qvN6o8KWdxEWhLwroyeek/g4zuqwU6kNrhyZcu/UktaSXN8iNwuL9/RuvVXtJ9PbPQ1vhmcP6t9+47u9ByJP/SIdB2hDVw9MJHQFYfrQdCph84evFX68kjaZcPAZJWwjMXRFpJ2zr91tfuvrh8vZCa54NA2xGWrunvmg8QWCJ/N4ir7fCYDxatkOeBB7an501agXbygVdvv9IK/ZQ2FiPQdi9osGbH+zRNf7y4m9Xu9Me7N9nv0HXdr5ZS4psHgXpJC9P/wDRTx0Vn1TxjWG9LGrbaUm/Fi5meSvcrkxf/Cg/ow9XqAUk91v3qHT97r6471dJKfHMi8Oyzgx1Z03t1YAQVT2MwgsC3u+yXHzi0faQ5eyGtqgWBtpOw2Ol9+/TM+sTOn8L08MtzgQCy+tOHXr3jA0JWc6HU/HF5Scssr4jXcYqfP6V/T8iq+ceyWgvbUsKKOn38eJAYyl56TAuCEr2WYei//9Crd/5GlFb81kdASVopSFrerKRlaoZj9HR+700H10+0fg+lB21NWBxe2lhNHsUpDZr27mi4dV379R9+za4/iO7Fbx8ECknLCPTsTDJ17O33bJpqnx6u7J60PWFxeAcCbMV56dJfQKf1bkMLfuGh1+76zMoe9vbuPUnLsb2DtmOe5HSxvXsrvWtLBEhaTx29+Ma27Jx0ShAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQaEsEVoQdVluO3BJ06ptHL34b1XRjp4Ch6Rq24+kmjG4Nwwg+9uA9u/73EjRBqhAEihAoe3xwUQq5WTYEzp0b3ZnV/Ncf6O/9AvY9wlh/6dy3X7ncN512Zw9BVLXjuAP4np44vnQtkZoEgVkEhLBmsWiKqwsXpjbPBOn3gRfenwnc+7GBe+zsjclvonFDS9nA9Iy/u3x9+vAP3735VPk4CRUEFhcBIazFxbfm0k9fHD7k+v4nQFaPQIrx8Gmyx/GJ0J/t7ez7mw0b9MmaC2pQQgh0/ZSm4g5TwueWWtqLt0HuVy4CQljLPPYnB0depTn+b3t+8B4t0AdBUv93h2H9xc6da0aXs2m+r1WQsLRnl7NdUvfKRkAIa5nG//r1oGtsZvjTgev/kqYHF/TA+AXoqv4npJemOEiQU1Eo2l+G0movBK1UBBPU7s9E1+ILAkuNgKwSLjXiqO/khVtvARH8dxDBRkMzPrF/V+9/BlG5y9CUqlXinHv9mRPXtvuus88L9H3JPv2zD2yXExCqAicJBIFWRwAvv3Xqwq0/Pnn+lv/K+ZvfPH3p9p5W75O0fxaBp793ce3AwIDMWmYhafiVgNtwSMsXeHp4eNXJC8Nf0PAdRCiuf/XgrnWUqsqotcvnl9DmRkCdweX4b9N7+m/ih+mbMraLM14yJVwcXItKpT1VRve+ArC3Qqn+3gM7132jKEGZm6tXg86J7OhDfuA/iHwPUpfUZSfu2L59tXxEoQxeyxkEgjKeOnLxHb4RqC+NY5H3+2953d4XlrNN7Vq3ENYij+yZwbG9jpt9GkBPQ5H9zgP9607OVeWp87cOQtn9zwJf+xDMNFfj+jryPqXpxj8c2Nn7P+SXey70lidu4IXzb0DNB4tr9751+HV7zxSHyd1CERDCWiiCc+QPjUCnsaqmZ62O5IN7N/VUNP48ee7mAZDTf4Tt049iUG4Guv4ZfNLos9UIbo7qJWoJEHjy+bP7fNsoOcnW0A0/aacef8PdG28sQTNWTBVCWIs01OfPj66BpfqTmq732UnjgT1bei+Vq4pTv7HM8Ceg2/o1qLQug7T+FaaM3IqTLZdewpoHgYEjV9fphvOj+OShWa5V+CxvZtpzv/LwG/aNl4uXsPoRwI+4uEYjAJ2GmdG8L0FK2mYa+tsrkdXZy+P7x2ZuHdW14P+BLdank9q6Qwd3rf+ckFWjR6Tx5Q2cP58K9Jm3VCIr1ogt48lO237r3//96YofeG18y9q7RFklXITxPXV+5DchKb3ZDMy37Nu5tuxG4R9cHH6b42QfAzlds+3EPXu2rfrBIjRFilwkBIIR7SHoJDurFU89ZOd680Gke6JaWomvjoBIWNUxqivFD87fej0e0n8Fwvr0/t1rnyqX+QfnRz7g+8FX8Rv8vL3auF/IqhxKzR2WCPxXqKeq3krDTdj2ierpJEUtCIgOqxaUakwzNBR0D09yiqePHOjveyOkpxLr9VMXb73V97S/h3nDXx7Y2fdPkAYbncW1IgIDxy5vM7LZt/hgrnLtxyaBrJNxv/72N+6tuNhSLp+EVUZACKsyNnXHvHL+1qcgNf2KbSXu2bt9dcmS9qlzo/fARgcmCtpzB3b1/Vg5QiuslLowENyDWDn8cSjl98PgdBviu03N+rl9/WufLEwr18uDwLdevLTF1YK3xnVZ2HI1bUxrT7z5zTuXdRP78qCyeLUKYTUI25OXbm4JPO00TBj+6I7+db8ZL3ZwMOiYdG4dA1lN9HWte2iuI2NAVPapC8O/CGPR34Ip/AZIbIMo7yX8G9QMbcS09P+2b1vf5XgdrXaPfiYns9oeLLEd8D1/B7Dp0E1jGP042pXQj7RKf546cmGzp+tv1TRf6YQD35/QO3seP3xow5IfC9QqmM23naJ0ny9ysXwgq98BWc0kVhv/Nhalbqe8kd/Fr8MOSEr3zEVWrwyO3I29hl+E9LUHGf+nAXI6sGPdd8uV2YphIKnE5IyL6bLxk7cn3bdkHHefrpvJAExMZ1uBZmqeNzXtfzUzk/m/ens7LjV7Px+8d9e1579/44l0duZtge+Np5zEEw8c2pBu9na3YvtEwmrAqNE8IZvNHsep5//yjl3r/0O8yFOXbv0QCO05gP0JGIL+fjw+uj91YeRh/Dp/PtCDM7Zpfmjvjt6Xo7hW9ycmJjaYduf7Hdf/8HTGfa3rG9rYxLSWnsloPg7fijZV8oFM2Ja2a9t6EJd7bCztvHP7us4rrdD/r3/7ct9I99jEI4cOiQ3dIg2YEFYDgOUJDFj1e8TqX7cT4kImXuQr5279A4DeBEX8ayvprU4N3rovcALot/TH13T0fXDTJn0qXk4r3k9OTm4y7a6PzjjORzOOvn1kbEqbnEprPhRzwAKzwFLHk05hv6Yd6N+o3R6beG50aPSdr3qV6IJKkVp5ITIlXOCYn4Yexr0w/DO6YXymHFlR0e5r7tsM3fxgJbI6fW1ivTeT+SsYmr54cFff+5Cu5X+hb94Merp6/J/PusGvTE6724eGJ7RpSFOkKPCUZvBPBccoHBet3Rwe13rX9tw/PjXzZ5hKvr8SfhWKkeA2REAIa4GD6p0feRdWBnvxjv2PckVhVfBf4A29uG/X2i+Ui2eYn8n8NryuDr3jPfWSFV5k44UT137eshIP2K7/64cObbheqZ6lCp+Ydt8TBO7vTM5od1+/NR4SFVhoLpKKt410lnE8LTMzo3V2dLznxLkhYgQ9obiVjEDln7mVjEodfYcpw+MAsftg/7qSDbAnb97sCSb0Yei2fqOcbovVqKNnNO8HmAE9Cv3Wp+uoWjt27HpXNqH9WTKR+kBHKqEFbvo5y3N/avfu4g23R45f3WGa1k9ZicTd0zPTf/f6O7f8dT311Jp2fHzmgJlI/N70jPPe4bEZ6Kg4qw0lqlrLiNKBiLWerpTW25PUbkPXZViW62ecHz+4d8PXojTirzwEyhq8rTwYFtRjvpX/rlwJ+iSXugPbMuyKBOHo3geRJtuT7PujcmVUCuPJlhnL/9NUqvMD2eyM5sxMaIlE4n7XML907tyNjcxHQjty4sZv66Z1xEok/xNW5n4uZSf+8sT5m++vVO58wkEu5sR09pd9w/rWyET2vReujiqygrSopn/zKZN5qMeirotKeTyolm7p/+X06Wvr51ue5Gt9BISwFjiGsLl6N6SrvylXDNTK70D4mX071pwtF88w6Jd/DG/1E1u26NOV0pQL71y3/8PJVOcHMzPTWkcCH2YGOaTTaS2RTN6f1fQvvvDK1bdnbO2JZCr1SeRfn05Pa1PTU0gXJBKW+ecnzlxvCGndhFQ1NRP8bcY1/vjS9bF1V26MwHwsVKiXa3etYVw1TNhYJ3TDjQCO42jJVMcez7J+t9YyJF37ISCEtahjGjxkGDr2DJZ31D8h5vUQJL5RPkXlUMM07u3qSGidICvkzzuSlmlZb0olrK9hD9v9JCrPC196JoPMAolFg6CV+PPj54YeyWecx8Vk2v1Q0rSfhFT18LnBmzBRyNalp5qrSuq7kiAsh4SFa7oZ9M0wzI+cPHOjZPo9V1kS1z4ICGEt4lhiCvZrSa2jol7qzPXJPk6nIGbVbWfUvcr7hO9MP97ZVXpggOu6ajplYStj7l1XvbRMXbPAbp6HzSSBlkraNknrvfVCcPt2sHYi7f3pTDb47KUbYxuvKqkKpYBXKBnV869c3WgbDEixAck0FGFFfEzJzbIsO9C1TyrcymWWsLZGIHoW2rqTzdo5dXyykz0NC8l779i5vu4zwM+eHVntGP5jqVTq/6AkVc5NZ3wNH2lVxNWZNIukMSjiNd9z0+CHp5DXAdX4SAg203w8GB5IATtODHzdK8C15kEjhXvNS9rWA11dnfcMDY9prscss48RySakrOLWqODCoIKAgkuVgsS0urtD60haeV1YYVbbtjUn6/74HXvW/11huFy3PwKzT1r797Upe3jq4sib9u9Y+wxe+vh7W1N7jx49v6ZzbffnQD4/Cj1Pfjx54XiBls6GVuTUc9mQsOIO9mPQFdkIRlz4fy5JLm2ZMOqTcJaXIqpcqnixVe+rdbZ3dbc2OT0D0wZIibHSksmklslknvx+//q3PiKnXcTQae/b+LPQ3r1t0969cOL6G7o6E09qgZegdMJBpVQ1DbKCpyUt6oPKz/4NEJalCAuZFIuEVBJd+jgLh4rvAiFqUVGkhJZMWFp3Z0obGSu/d5gSnWmavuO6h+/cvYHSobgVgoAYjrb4QPMUiGtj1/79jBMkLBwiTlMASlYzTkhWCJyTrGAyMOFkst/BoYMmuIIyGJYcMXMMdNwHPhYN1qWS1t6ZLGaKZL8yzFXTr15BooLLMugHMBRNKgW+It8y9TEcJGt4rvcRFCCEVQbFdg0Swmrxkb0+cf2XOzq73kgdFieEXF2jdEUJKQH6SVWQrNjtZDKlpTPp38U58iUbthk/Ph7sN6zg/xudSGvD4xkq6otcnnjyF0XRRTflkyC0IIJE1JG0QbqGNpMNp5xFhRTcZDNoj66988SFm5vv3LX+WkGUXLYxAuXnCW3c4XbqGs9hwjv+a9lsuN+ahOJSCoLjNDAFvVUll0p1aNPp6adTweSflEszPO48oFn+4yOTmR+6enOshKyYhzWpf/jDuuf6x2aV/qNRaPG/1d0gUXWCA0uu7GhMmkqmerEc8KOVU0lMuyFQ+Ylut562YX9Sncmf7Ojo3BDZWbGLtMkiUVXSWTFNuMqWuYG530f7+/tnGFboxsfdd9mm8XdDo9O7rg6NFq0CFqZr5DWlK9qV0fZqGvZchSuPlevB2VmG/hOV4yWm3RAQwmrhEcW64qu4ykfJho52Vp3J8quBYQooqWDKADftBd6HD+5efyoKj/zR8ew/hWXY56/cnFh7a3RCTTGjuMX0SVB9qzu1qfQM+jO3dBW1g6uVSHv/qVNX10Vh4rc3AkJYLTy+WA/8ou9kJjo7bOh+DLVFZ64TEbCyBktxI5PJZj56R//Gx+NdH5vM4vuI+p8NXh9LjU1iw3EZhXc8TyPuuV9wDaaCfBjTM06N0hVWQmHBDzvSDZ5tvqYR7ZAymh8BIazmH6OKLbzv0KZvJEz3ZzEFnEolaEtV2XEaCLKadrIz//TQnk1/EU85NuH8th8Yf4j9gMZUOrNkZEVZCnsbtTU9KW18GqcKFyjh420sd2+j33pg3F8uTsLaDwEhrBYf04O7N/2t7/o/C2FoGnsIy/YGlvAwSfCvZzLOe+8oR1ZT3u/5uvHJC9dGtJlMrfqjslXVHwjpat2aLi2rjFFLjUSrFUjlO0juddXSSXx7ICCE1QbjiHO0/hofbPgwpnDTOR2V6hWNQqGUx34890noet5yaO+Gko3Y45PO7/uB/lvnrwxrWdha1absbgxo1FWtwplXqYSJY5Nn5lU3bLHQmGA/yko0plVSSjMjIITVzKNTR9sO7dv8RSeb/T9BWmMkKv4D+YzBXuljV7yxd+zfte6VeHGKrHTz4+cv38JWmyUmKzSGG5z7VndoE7kz3uPtq+Welvhwm39weVjOyaoFsBZPI4TV4gNY2Pw79mz8KyebeRIH+VEZTaX0sf27+v794TKmCxNTzr/2NOPj5wZBVjjdYSklq6jN69dyKuhqmWztivYob+RTSkPbe/xMdlMUJn77IiCE1W5jq+s4dYEO6mzsYAmvi/+CrH7LDYxPcBq4HGTFVcG1ULLT5orS1ULIkoSFI2cMHKG8obiXcteOCAhhtdmo6gaOh4EWWlkyYU9gvHswXfgV19d/7+LVkSWfBrItJJhObL/p7elQR8fUZnEV70XxPc01sM+xrzhU7toRgZIHuh07uZL6xA3LBaYB+Ar8rBsfz34YX1j+D5eu317QNGy2xPquSE4mDuXb2IujY2AgytNE67RiKFshzuwCR5s9ZSMlsK0QEMJqq+GkBKOF5yFzRoidK5BoFCeMjM/8mG+a//Xy0Li55KYLBRiTrGjwOQ1br4VMBQuKVJeQKVPxMLlvPwSEsNpsTEECmBLSgbHUpwD1YGwse59l2p+9fmuig4fiNZIowrqq/6Xeqm9Vh9JbjcOKvqFtACX7gV8kTVZvkaRoRQSEsFpx1OZoM2iKxxuHLtDcsZlgLzYZfv7m7XSv+r7fIm234XSP/8o5ktWqzqSyZr89PoXPYDTYkZvziw0NLluKayoEyq4iNVULpTF1IaDjHHZmoAW4aep9geN8fiLt998cGYdtVp7K6iqzXGJFUCAi7jdkuapsBJKcPBwgyP8YRyV7B04Q3dDbpY3jg6gupoMNla5U41BbUN9n0sr1ScKaHwEhrOYfo7paCAW0WiWknihhW/0Tabf/6tDtxpIVSIhGnz1dSXUkDL8fSHKi4/lWPId9Kp3Vxqegp8J/m9f14D6DQ/nmb281FwgkZ1Dj7bnSSFx7ICCE1R7jmO8FJJr8jCvjeNrIxFjDJBpKVaSlXhwDw384MyucBoLAGEfHI5ptO6n1YAq4FjorH9IWjUOnFlF3pj62aui3whbI33ZGQAir/UY3XCVEvzgdw/8NcSyGUhSlpVWQrFg2p39xp0JYLyIohaXxdZ2FGofG6yi85/QS32F0Asu8URgu1+2JgCjd22xcsVElPC85169Gaa1YTkRWJKpSqooBiQQzONvq9sRULKKxtzzAEJw1api2EFZjoW3K0oSwmnJY5tcoSD09HanEDztubnfO/IopyUWC6sUmZUpW5aSqkgwgK04DxxaZrFivacCaIdAuH9zaM1rSDgloOwSEsNpoSMenvU93dXb+EE5taFivKElRqd67qrNmsqIF+yjMF/i56MV2JqadYKxXMDXM6+4Wu04pf/kQEMJaPuwbWvPticwj4Il/NnTrdl7JrqaDC5wTUle1GmdWWVCw1+JotjA6PgnThsIdQrXknF8arkJi/+R355dbcrUaArU9ha3WqxXW3tHR9C5dN//T9eEJ3aGdUwP7T0V7F86Mr0VW4mF6o2NTS/ilaB2HDmb8wA2+08AuS1FNjIAQVhMPTi1NgwRkGKbxRxMz3uaJSRzVUkumOtLwo6Zc7aOkVdEhynN9NQ1cyuNqeEqD67mX9TXGyxXbJhFthYAQVosP58S0909czfqJqzdGODVqaG/IUbCWr2p0yukfp4FUtDfeir1yl8IPUGjPHFy/fqJyKolpJwSEsFp4NEfT6Z3YBvOp8MvMc0hAi9hHNQ1cBrJil5TUZxhfXsTuSdFNhoAQVpMNSD3NMTzzU1PZYAM/ProYkg3UV5rHT8lXmA7SwnwEq4FLLVkRI04HM+n0LdvzvlEPZpK2tREQwmrR8ZucCd7hePr7rw2N5PfxLUZXON1zHKz4kb0KnIttP6Njk8tyaimbwXPrsW/yq3v3bhoqaJZctjkCQlgtOMCYCnU4GedTI+NpQ32XbxH7QOmKG5nzdIWZJz8HNkKygqI9TmSL2JSiovGVn0A39c8WBcpN2yMghNWCQ4zPc0HRbr6GEs6chJFnmfl3knZO4/hmII1B6fiFG9br0s6qAeXPp2WUrhzHeXH/jr6n5pNf8rQuAkJYLTZ2kK7Wul7w6zeGx9DyUsZovOodOizosTg1TM9k1Wogpa7lIisOF+w48E/7E5B1Y/cgtdizsBKbK6c1tNioT6X9n3MDcyePOo7OoJqrC6S0+ZIYV+GSOHxvc18PJCxXG4ed13I727axqTp9yk9rX1jutkj9S4+ASFhLj/m8axwdDdbgELxfGsLpoZyqVXPVU1QugVJUV0dC27p+FaaBWWxknq6ceAljTNMiAf/BoUMbJpewWqmqSRAQCatJBqKWZpgJ731Zx9pJM4aK0hXe5vlKVFEbKFlxs3PvqpSSqpbzKztRm+gnEkktnU6/2GFMfa4wXK5XDgJCWC0y1iAR6/Z49iOjY7C5qkG6mk+3SFQGlEP8FFdnygrNFqBsn1OxP5+K5pGHbcBhqhT8fqu/v39mHkVIljZAQAirRQYx7Wj3Zj3tddQjVVJ4l50CMjHe8mqOTJCCvmoTyIrENXx7Uinbm4Gs2PZUqkObnp76i0N7N36tWl8kvn0RaGnCGhgILKPn3B3+xKVXDh8+nPseX3sOlpt13+P4uonv71WeDqLr1ampFB8S1JrulNaHc9rTMxltcpofOeWns0rTLkeIZUHRnpm5YibMf7kc9UudzYNAyyrd8ZLpWvfgQT8w+oyevXeo++bBtaEtQd9s1/ffRsV3I6eDJCp+nourgH04UZQnhIYfWm1o8xdUGCU8/E/bil89sH3dlQUVJplbHoGWJaxnXri2HTvd1nEEcCBS3z++MLi75UejQgcmJjL92ax/gNJPo6QekhVXAbdvXI3D+XQ1Bcxiu02zTAEjKFIdHTQS/S8Hd2/4YhQm/spFoCUJ6+mnL651gkwRQRmBt33gO+c3teNQYin/oG6aKX5rcKEukqqoWN+Ij5vy81v8UATDG0WGC21jlJ96K6wKPpWd8H8jChN/ZSPQcoR1+vTppJPS7iw3bIZl7n/++eFV5eJaOczX9Z2YvM1LPxWpocBHKv8qHHdMqSphGUqqahaThfj40ITBcbLnsDj6oXvu2bS4n96JVy73TYtASxHWo48GxrUx+5Cu+XY5RH3PMzLGxF0ktXLxrRoGNVPPfNtOolIrgElLGYH2wbZqcipdIFVFlDbfGhqfj9bskCaHHS/7gTt3r73Y+BqkxFZFoKUI6/C7Lu/Bl1jmlKB8PUhcHjHufuyxx/g5lbZw+BL7bX4EoiZqyS0T0uM0j1+82QSl+ua+bhxj7GjD2LicwWkLzaarigbKsmDJ7gcTmezMBw/t3ixntUfAiK8QaBmzhq8/f26j77pbaxo3w+jetPf1B5D2RE3pmzyR4/nH+Mti4Wx1dUrCHO0lSVGqskFUnakkpn6mhu086jgYHkWTW3Wbo4Tli6L5gqYHE47vfeDufVv+YflaIjU3KwItIWEdO3a9Szc0ElDNDqcLbHjmxas7a87QxAnX9ljfxcr+Mzs29ykpi1O8iJjoR/cm5o7dnUl89LRLW93dyWmVIip+Kp7pmlWqIvQ8Mga9Gslm3Efu3LX+K008HNK0ZUSgplnGMrZPGxgYsIKeXa/TA61jPu0w0+7xBx/cd3M+eZspD0wbDgWm+RXP13cODY/jWGKuGAb48jG+agNpilbqlKZoWDqDY2AyjtNUlupzYZlKpXgaxIVMNv0zd+/d+uxcaSVuZSPQ/IT13TN34QRvZW81n6HSDdMLUqmjh9tgd//Fi8OHEl3JL3Z2dh3MzGA7XU664llVWRz/QhLjNYmsmaWp/DjCjqIDdlaZTOZZ1/A+fGj7hjP5OLkQBMog0NSE9cSRszuswNhdpt31BRnazM3U9IuPHDrUuG+419eChqU+cvzqjp7u5P9KJpMPpqc51Zv9QntLkFQBEqZluVCw/7nhaP9i376+8YIouRQEyiLQtIQ1cPT8GjOw7vE8tyFtxBrb2MBXdh579FF99g0vC0nzB548ebNHT2l/aFmJj1BPBYyav9EFLaQ+jdPAVNL8/pZ13a8qiJLLOhAAjvrTRy/d0enbF+69d0tzHFhWR/vnk7Rple6mp+9uFFkRGF8LVj/08IUN8wGp2fIcPLh+4sCu9R+F3ucj0MLf4vaVVnChqYWmdaQS2jpY2vd0djh86Vqh7c3Yxm8dudTPxaW0lrn7yJEjZW0Tm7HdC2lT0xKW1xecgHE3FDWNcb7uDh6+r/96Y0prjlIO7ur7TOD5b3ayzt9ylY0Gl83qKFXZsCXrXdOlrV3djf2LBr556JOshLDmMWhPPXV6vav5O5jVxYLUhNl3iIbV8yiqpbI0bQcP85C2Xu0l3dczC0XUN4Pzb71339mFltOM+Q/0rzu5f2fvu1zH+QDOt3uZ0pbVRMRFouJK5qqeTkhVqyBdtdUmhGV5JI4cudrpd5kHiyp3tTU/8s6r+4rC2vCmaQmLWJO0Ep65INJK2tbpt75298U2HLuiLh3oX/95L+0/kHUyvwTieiUJHVEimVzy1UKeWMqv2pCoKEVFRNXT1aHawnBx80eAZj7TwcxdAc5Gi5fiaNnNT37nCk4xaV/X1IRF2B94YHt63qQVaCcfePX2K+07fMU9U7qtHev+xE/7r3cc70O+6w1gxuV0dHZiusgvJS/O7IskRXLs6KCxqj+B26t9a3uUREWi4plbQlTFYzXvu+7tB3EIUGel/L6e3TNw5NS8zYAqldss4YvzBC9C7559drAja3qvDoyg6pwCP+KBZaVOPPjazS1vMLpQKE9fuPnawDB+EqehPwzWuAuSl8LPg90WVxhJJPWQCUmPBAWTBEz1TFUGpqO3wYYvIPgr2az35a2b1/50V6f1e1NTlVcvEzB0xRekj67usu5FmS2/crvQcaol/zeeObfTSOj91dIq28PxiaOHDx9quy8LtQxhcZBqIS0Dhkl2l/3yA4e2j1Qb2JUUD1Iyz1waOQib0vsxKXsAFvH3wMB0JySwtZC+DBPTN5BOCEnhrI1BuKe9l6tIzsVCiD6E0DOabrwI2elZ09aP7N3aNxjheXvK+a1OENa0EFYEyYL9rz072Ju03ZpNQKj7Xd899cKhNrA9LASvZTY/s9GcHoK0XsrakLS8UklLxyl+/rj+/Qfu2367sJNyTS7SuZfneO7ffweBGScu3NwAqWgrTvTc5jjBZmw87tMCfRXYKQWOgula4OiBOQUZ7DZuhrAGdQXxV0zPuCaGnkv3VPGHOpPw7+QPR62OM5HhdNddGOeX2kmCbSnC4mDlSStVTFr4eLljdHV+702vWz9R66Cu5HS5h5hmHvz3QiOxwJTRo2BGgY06dm7OVhewYGAY6s75oD+ZDs4JPY9JyqSCQ7ABqftd5VFM3/j2Ja4mtsWpJQSq6ZXu5UZTKeJnsHpohiYPRqBn04nkS2+CQWW59BK2dAjwS0Y4IHDz2ERWG8Gnwm7iK9W3sFmbvrqGPzw6gW8eTmvTM07XmTPX28KYd7EQ3rjnvv1QFHbPt3zT9DcMPHd+13zzN1s+/hC2rKOo7NjeQdsxT5LEWrYjbdLw05eHtwWe9jl0542u62HZHZIVpalY/yIlP5X3MHYddLLZfy4fmYiBhNuB509vw+rG3tKY+kOwGHLi7W/cS91jS7v4s9TSnZHGLx8CICH9lXNDX+zpWfXuycnaBV2e3e567nAm4973qv0bzy1fD5qr5oEB7KXt0u7B3Loh7yhWVfypbOalh9+wr6U3mbfklLC5Hi1pDRE4ef7Wj+EEiZ+amqpvJT2bzWjJRLIPR3n9riA5i4DZg720DSIrlsrvHXSZ9p7ZGlrzSgirNcetqVp9/vz5FJTqj6JRejTdq6eBMzNpHP9s//QrF4bvrydfO6f1JrCX1mvcXlo98Kembjotr3wXwmrnp36J+pYNeh5JdqRem83O77gxkpxtW3bgOZ/g1HKJmt3U1Rw+3D+zrc89aunagnWzpq6PdxujLz388L4F78tdbtCEsJZ7BFq8/sHBoMPX/I9hyrGgnuDUUZzrnnz7yQu3HlxQQW2Ued++fZmJ1e5LoPB5k5ZpWCPXz+08du+99zrtAI0QVjuM4jL2YcIZeh+2+9wF49MFtYJSlgmHE0g/JlLWLJQPg7RmhtyXsJ18eja0tivsXhj6xy9ve/mRR5TRcG2ZmjyViN9NPkDN3Dz1FW5z9XM4i+s1ME1YcFNpUIrVLHzJzHnwjl0bn1twgW1UwPHjxxPXpztejR0HFTc+F3YXRwxdfdM9W08D0zrs4wtLaM5rkbCac1xaolWOvurhZIPIih0OdVm2haNTfqUlAFjCRnJP4HBn+iUqz6tVa2nGpTe/etsP2o2s2G8hrGqjL/FlEQC5GHghfplSUSMdvwaEA/9+4vjpa3c2stx2KIsfUek2dr+EuXNF2xEjSJx98w/tbFt7NiGsdniSl6EPp84O3W/Z1oPzXRms1GRKWdCJdeCIlJ+vlGYlh997r+70+EPH8NHJEtLCauCph+7bmj81ox1xEsJqx1Fdij4Zxi9AT2KSYBrtslgxhOD2gWOyz7AstFzx6zFHj1mGobYUYAgC9cHge3ddK5uhjQKFsNpoMJeqK6+8cm0X6noXiWUxHA8WxAdWNyQM45HFKL8dyiRpueM7jllmMGpnjO+1w9fNaxmXxiogaqlR0jQdAkeOBPjczrnOiQ6jw88ESSOA6KT7iQzOHEvavu1pZsLQg4QPP/DdZG9Xx/vWrOr+mfR03SvtNffdxleAQIgvTzjBT0w409Mpu2faufZy+vDhw5WPMa25dEnYqggIYbXqyNXY7i/jCyvdfmaVb5hdVsLp9LJGp43j1/1A7/RdvdMwPRzEboRnLVHe9vEvL3eXBOB4ZMta22H+TiqV2LJQ26u5u6Bju44Z3J7O/Lvp6cwPmBanOwQ4uNHRTWMK21bSvh1Mm642nTWCtKkH07rnTE72aOO0XZq7bIltVQSEsFp15HLthg5J/+aJE12m3tVjOPYq1/dW4cTjHnwMYhXOce8xDd3y/PJW6OpMdsTRVy4iK/rKMR/jwvz825VIHFzT3fkx13UW/dnhRy3GJyeeHEs7n1XNibUPFvY6vtGDw5vV9w0Vofn81qGhZfDhi3HX8SfQ/3HPMse9CWcCX0gel2OIFJIt+2fRH7qWRaYJG85NxldGzV4tGayFSLQ24+q9ULyu9gJfMU5ELTn6wUISTl03NHz1KzyiJLqmX657OLLdSJgoXTO7cBxyN172blier4YCvBsFdSNXV2dC35tKJrbzfPfFdjwvC/qs9MSMxxNRsSqmT6LhUDQHE+jUBE7UnATXTuLsrRn01K2l/x6+qItiR3TNG8V59KNB0DGSfNXGUXwJY2Gm+osNhpSvEBDCasIHgVLTt75/aQ0MnXpBNb2QgNYEntfr4wu/nBYpKQLtxtdwAh0SBX3VDe7nM/Ha5vf1Fb/CURS2bCTAWWuxR229qRsbQQQbUed61LfW14JVKKsTJ5sk8WUcHbtlNANyTOhgcmAGKH7p3m1FWpqtuZCu+LByVdKHVMjpKEQrBwIW9tnpXOIH+QTDSH/D9f0bmCLewDn1I4HmwtAypPDZ/oe9oXKf/aMPsWxSs/RR13FHrURiZE1gDR86tKHEdCDMKX+XCwEhrOVCvqBeHNaW6ui11/mWDtLQ1kEiWodXE4rwYgepAPssTPCMOjIdAk94TZ8pMZjch8HjDorGFUTUAwlkh64be0A9/ZCatiDZWtOyE7ClQmIdJICJFYhA+TRV4Fo5/QIHiUvrTEbkVRCxiJfsSBbfYk87OTExXxdazY5yUgiRKfpHQ1YSkONmAZY+gV4NIeVFfCXoLNA5h/Plb5LzWAyzF+IVXdNnvO/6GcsyhjC1vmWZ7s2pO3fdOqzriy9asnJxZREoerDLppDAhiIAEtCfO3F5rW0a6z1PX4/nf53nG5RqqrpieSnULEVh8cx4E7ugH78H8tG9eP/24oVezY+pkpA8b/abhPF8le75BqdsXUtaFeaTlTI2IByEoU1l8oq1mkokcZHElIRoWmpejMMCMyCvQXyy7JjjuUcgOl4tLCzCMpTHgFpcgkViX/dH/ax2Szf8m2Yqc/MN+1r7BM/C/rfCtRDWEozSkbMjq7NTY5t13dqE6dhG3wsSqlp+C9DDi0ifLrqmT1f6BgUaPjiHN0lJAGAfvpWcI4XjiHIMF6ocO/EjmMa9HeelQ1LT1PRpoce/sJwOTCQtc+kfGQp6Uxl+9JWtmL+jNEaJ0gKBgbsygR58B4sHfwV5aliVWg3vCHv6ymHcdG868IzrVsK6pnd71+/dsmXxbD3m3/W2ybn0T1/bQFe5I8euX+9ybuqbXMPbDA7ZCKV4uMOecyz+9OfmWvj9x9zEw6JW+JuOX298WhE6qtwLEV3TL1tb/AWj7sqwfqaro/sdmcyM+vBp2XzzDEzaBiQsNH+e+eeTjQ+ohwqnG0BYhfVzNYKrkOmpyauYYH8KvD8G6RPBszrC6Jq+ystl0ghzXEZjR5+O4+iZwTh+eG7Yqa5rq/3hGzzTSkXKn4YgIITVABjBP+ZzP7i8ydasrZCetuCHvIvFRs92SEdlpnCYE2LOQi12OA7RNf1yjrphHIyE9yOXPnfNMDg70DpdTf8DWDKs5rRvMVwChAWrUgh21HzllD0NrigqlxKVC7bKQuOOWeGiuI7OTkhb6T8C/Xw3xkel9cXxj6eIxiY3Hhx3X9dHsWJwDaa3l1+zd9Mt/F4tUk/ijWnP+/DBb8++LWqvnh0c7NDGta0pO7kl6zpb8AJzEUr91kYEFdeBRCt69Nm4+AsSl6jwjVGckY6VwPwUpLhLURx9xliWvxFHi/w+zB0SWCnLsVpxnoXesSI2ngp4zmRJXPgf/0IleGH51R6uwjeX5MR76qtITh7+8N9Cp4GF7Sm8Zl1s35pVXVomm/5c1vG+Wm284njHJeJq44/FjixUAld8w7uijW6+xo3MhW2S6+oIVHumqpewglJ87+LFtcFUcqur+1vxwPcZJqYPMOyhXw6GKI4+4/GwQpjCBhe+6XDIpFb06PM+np5hhS5eXzw9bLJ2pBLGv4Fe36BU4kA6IQGw8MUY6MJywVeqDs54Z69zrWdY7jI3G1ZtUiSV6zzDI3IqLLew/wu9jspl+yywrA1pEed5QceXPT3jBb/DLrA5ua5UHZ/4eMTbFx+fwvE3DJO8fANrjlctL7giJhRx9MrfR89R+VgJ1Y6currONuwd0FNsxwtV02mPlWGLy1TxlPHf6Hh8PH9xesvw9yRM+5PIRT2ZIgVKKZxWUY/PT8aTFPji0i3m4Ed1hDWV/7uY9bNGtiGqAyorJRWSqCgdkrQiR5KddrwPlsq8xfhG6efvx8dvtiQczDdmmPaldDBxSVYeZ3GJXxUMWzxq5d4fPz7Ym7X1HTAL2A7NqtJHEQ3qtCPjw3LoxB/v+OMZ5VVzR5aHWRuErYA+y4uu6fM+Xl9J/lh7bFvbY+vmv0bWos9tsXAWSLIiaSnyApHxJz6SbFSFuXTw8i86r5vVRW1m+6IHmUREAuI0lcREP5q2ztWPrO9/YK54xsXHI56+cePvj3qBfimZNS+J5FWMcrjptThsRd4dPX9+DcwEd5iQphwozfkCwJKaLv9ewHYKeicfSudwShcnJDBBOD3MTwGRO0cqLIj73jQTaejDBYaPHTBgJ/i5+HyYijd95sFhRzkzB7yL2IrCtGwezj9nOQVTUlfPwiicifnu5J0qHHd8mXHIG6ZD7JQqIk9kJK6QwAokMWRUhMaSeJ0vcfaiXNhs7PyuwpYV51Vh+EM/Pu2M9GckpyiOuZm2Wvtom+Y4me8xPbvIIujzPu6Wbvyt1ejL3U7Sv/v754ZHsORwaX3KGdwiJhO5pzY+Mivk/urVq52jTnIXlEc78LKu8qAMx/G8kHhyOicosz0ovM3IrIDKb15HSvDoOoqv+hMLYCOWI8ash0vmufryZVcqLz4u8fym3ov1xT/EVp4UDUTn4/iS0xW+sZTMojASmLqGp64iH4FRXJQ2TKj+lv7JVRTVxwQkm9APyaboGnGMzSVR6VR87ipsVT645ovOzi5tamb6zzB1/nqzjz+s9YetwLioZW5C8jq08K9+1IxS8yQsfF6ap1WL2BK8VOaJc6NbPcPrx7wJ++hmHQUPvOaQgMJ3ETtVlERDP0wVsQ19uPgcLQyt/Dc+p4jlL6k/1xa2qVyh5ApEzEoErm/DsPOTXV3de6anq36roFyRdYWVbVSshHJEMt98saIXfIu9koplYZL6m/hUz7kS/Jt0/PE8+Jj6X/Y6k+fv2tA1BKIvB/OC8WnGAmp5dpqx3XW36fjgYK/upXbhFd+BrRlqn16MfkrspkoC4hnirYjbUVWzs4rHx8uL3cerjwt0TA4RcBcsuX8Rn97q54okVsCKJJ9YkSvy1gJR4aOtnAr6OJP+L13d+BKBKMEzHhAfgDh6yzD+vqHjTDDvYpAxLqwEfVdbE9bpIEi6V27tdLP+LnzPrWS/XrRTnz5d4e79+LNY7r4kP+Z7Jv7z1LyPL0B4Tb+ci9cXLy+eJ54e8Rw//rqqcUR+HOrgYVprJbBl5E2w63oI64J7k8mUDZLGhmAXs19ucVkxP8gKQu4ptCxbMy2TW3KAGI4u1P207ztH3CDx/7bL+Cdse8h1Zy5ev7Dp8uHD7blJuy0J69TV8XW6l92Dl3cbLG6g98idbhDgdANcY1ZY9o2N4mpNr96GRf1Da3Wui0RW69F1bWslvp81LD2xDTOGu9DhQzBc7AcYfYlkAqo6A6ozqHNBYJTESGitTGShsp0qQSxT4AcoPJQw0LBlEPhBFakHDjoLvY+XgVIyg7WK77tG8n9pvpHXBbXL+OMBd7FN6KLu+uf27esbX9RHdIkLbxvCGhgYsDb3v2a7obt7YHakpKmYiqgE2ioqJbzIOszXcSov/DAzRRNehyJKvPx4+igv/ZLKEaCkoZxUFMYXE1I8f7Xyq/UHp9CkAlfbCF3NdlhS7IQguA0N2wiJYy1ktC5IISb1Okr5jSYruy2SGlYkIkKLSC3yy/WrUWGzSnjaTUX/QEhYQuNewLCdwBFKRkpOuAfr4sBnwwfDg6B0MHagORhBHNqHw5WxTwYav6lAt/42MBLfrYZXHO9w3Ftr/B0Hp0pY+tkD29ddAz5ln8NGjddSlNPyhHV8aKjbzAS7Dd3egRcvgRHJWyrHASw9Pyp+vlSxEluH0jWAGQF9VVZMpxHVRZ/xSKQU4PR5Xy0+/sLQZCFS9DN/XKtSeh5WrL2x+sMyZv+W67+vwz5eC7oDx12rm9pakNg639B68XL3Qh+2Bm94DySxHhg0daBHSQhiCbyyyMS9SDi8RhEHyYP1qD9qak0S4VGn5VYrSTRKEkKHWYYiHuQmCYb/YKYLqS+3H5LYckxJmz6qhSYJ5yNgzgtuclESpncBfN8Fj3lgJdCSGpHcGECoxrouMoHjzO+4evLLMB1VKxJV8Wyj8Q80Ix043jnTu32hlTdkh08Yn7UWcnio9Qs3pzZm0lN7LCOxIdIZxbuQ1+lAVFFxJB7aMeUIiPkiPRPjo2v6dPF4FVjHnxi/oQK0Az/bymf5uI7ayGLj6eM63nrbF5VNXzV7nv3HViQL3JAEaSV1z0iBNJIgJBCYkSKJYbdjEiSHw7a0BI5s6QBBbINUswMUsQ6E11UojZGccA9dcZDBdQY+TgyFTgkiEKYyIBvstAQzIRk8cBJ+A2j4gZFDFWAqjAp3V5IhQYYwwUJ57ByS0QINzMYK8FyrRxt3KNbXb2qG/UVNT5wDyCt6/A0boGbdqzPA4tD21SPquWihPy1FWHjQzYs3xnZkM95ePIZd8RccBx1xez/UPowp46I4+uVcLD9/8Plq0Gfy6Jp+uez5uqPyY+UtNN5DuVQc06drpv4bIDXsjtsMpdkOSC79QK4Xog3PzwF4IBNCBiIhpBSpoE8jioqWaM2KCRuOqwLXgIQItKIe0lCYD/lZjoqgGIo0+J++SsmMKA8eqQ21qHuUh2PfzQHN6vgG6vVK8GfmQhcbr3Yff+AEi3rtdCtNF8u/eIWD2ATXx4Mg0XH1Vr/hm7sDQw8PvyvTrriKWocEE0C6oM/kJRJHrAykgj6WGlq+JUifu6YfS6pu4/UVa6AgQcXKi78ApekhcWFBwMstEkTX9MvVHw+Lt2ex+4+Pg62CxgsHEwZbAdgWIJfA+ICkfDRYtyAwWWB7Ay8F8VT/KB0bOJ4Gx/CQfUKSwZGrJJs8iZHYgB0zMB+zk8hopQ8hEcEog2ERASIBAOL5fIrVIKLxXKtzKPZLgZUckvGf+/nH5HsK0+Uz3316zeAjj3D23Lwu90w0ZwNpiZ72UnvwfO/AXIFnXfLBxLOsHn6yiLqmr3oQ04LHX9hq6TFHI6txrlYWkHj98UT1lh8vryR/rIKq6aO204drdP8hRWF3itmLUw42QnW1CSTSA2IAIXkWOBYKLWw8wjVqNkEaFqjFwLQNJhWI4ZiFoiq6QX0SbsEo6HMoWVFCYprwjw6FP65BXCSoXJwiOwpnFK9A6yiWkQhRDwA9XAfpwLS/AqnqSKP7jwapquiznXFXMn6x8Yg/X/HySvLHKqiaPlZfvf0H6BloAM/v3tpzHkJwUx59Uxb4GE5Lfnt2ZGS16SX3+F5mq4llfegtwnaSR6J5EC8hPUV6IDaS6aDnoZ5DpYe6AtdgOr4pyhXLNPH0KKCo/DDP7N+S+mI6qHzbQr7AbdgW+iylWn0l5cf6E29ftfSN6L9lGl04x30tOtMHklmLhxpClW9BL4S1T+i2uNPRp+0FflD0AN9A9LHnmHGBBfJCE3QL9ALiguoJqiu+64gDzWGIIAlhzhaSDsMV/yjJi3BxyY9khP9BXBSzEMY/AFORGMmM1yyKZfmm+ZKuJf4uMHV1THEj+o+S864E7zYd/8Dliqp2MamvPbt9uw4dY/M4DnXTuMuXx/scK9iHLcbryzfKwvOJBSGNPl10Tb8WV0xYyMFymDdXXv46Kq+ueChJQI4WlSUqf8StOf5CNdXqr9afxe8/Gm6AoLAqGKyCGLSG350ACFzKM2FvaeOseEhFOsjItdQ2S6wYYmkOdl2+CfLBvmpIV55vYY2Qn6uAxAWC40zbhxSmWArcQj0TSIiSU37mx0kgVesgLereOSz8E5EWJa6Qzyh1hZEcO7xY4Ct9WLfNvwa+5xA2h6uGP6vMPxMsZ8WNf0Gf+cOCw9usq51a5+kNG9Sn1IjJsjoO0LI7EpVra/vxhPdFs7JyjYriohlbTAKGxO1C6oJEljseOLqmTxfPX66OucJK66OUNzuDjK7p05UIbGwX25I/vrj4BYrnD0uZ/Rtvfzz9fPsPIkgkbL0DZNMFRVEHFEY2ZCBTcwMLdfCsCCVN4SwpE9YG+ARNgD24IDHYSYB1yNCYDkLRFoC8oOUG40AKQx5IYyAmlQ6SF7dDoSof0hbJiApzqLs43aPc5UG+AvVQ/4T7nGQFQiJ5kdbAkmgH2Sz0FaWB4gLrad22v4nmuvPt/yzCc1+V4t0e4z93r8PYwDCvNANxLSthkai0jmCf5+jq6y6Y4SkjTfoKprgWufj9Dg3AozBmiK7pl3H8WDH3u0YfLY6u6c/HVS2vSvsxoygyTF2q/qNenEyjJ5NJPYGPRidME1M1/JYqwyoNq32Ihu4J0z5M+WA2DoqwEI9wfmEaEhQJzPNsKNOh0jJwrfRVJqbnNOrC6IGwQFzgHiKrpCuq2kE+FizrMXWE7IWCEKemg7hSiimOQchNIC3EchqpHlBO95TshQThkwF5TL9k+Mm/MZLGzVo3AlQdLzagDle1vCYd/wU9/5Z5ZcyZPnNow/J8ZHZZCGtsbKw3rdn7nIzTx42o0WfP1cPKuYJ6XPFs5q7p8zmKx5v8cdcxDeMPOR1fj+gh4X10TV/dukiC+nJPeLy8eH1hrtm/UVvpKxcrP2oL/dlcs1eQ9PCeo73wGcp+R2Xyvlp74vH19B9EkoA2CYKUlcQqJCQj6vkoyBjh/IurcJiy4Zxy2FMptRBO7sK3kClR0UYUZAX+wMqfC1ICiYHMYBsKSQsSFKaAUEqZLoiK00ASFsgpN0UEUWE6yOkiiArE6NmUb91OWwAAEuNJREFUszCNxA0c/uBoF04W86YOarWQAYjGmHBBEIkUiXEqib025hNmInWknv6zKo77Sh3/RvcfSx5Xl4O4yr5Y7NxiuEEQFT4uvs8yrF5VvosX28LLS185vsiRHkc9YPiJtrCbJIzHyx3gJdfpl80flZWPR6qIxJghus7xjSqj4E9UNn2VvN76Csqq6XIR+48OYEeGlcAaXhLfQwxNQcgQEI9IErOOxBUuCuDLz9Arm5iyOTaYy7Jty8hAb2VCm43ZmwnwQTbgFpAWyA4SGEKhaMdgYNpngKAcpeMCAfFjYGE4yAqco3RZ0LorUqOkxVkf6AgzvFBPFbISSsOUD+WRrWijpcwbmI4Gomj4yxAIv4bPVU+q9sfxk/EP36UlfP49N3vNWr/m9CZdX/zzjDDofAoW3XHVr9NPHdB8p2+uORl/mjFLUktMbBTtkSJbpLCRxYyD5OpJps/4+DJuvq5IIgoLqfi3pLzcRuloM7QSzKImsBSWG80LVKkxkSvOkFHaCjL5QvrPN9rwvaSVtEg2ICmQCNRQkGjwnlOpNktMxdds+GxcRFrIyCmhTQMEUJjl4qwtzPbAOVC8o0DUZroGiMmBpEUfRBZ4DvRUJC4/1GOpij1ML9XU0PJdFxIZGsOpJkkOQ0YdFh5CPodKl0WfRqQkVUhTIEf1iN4GkdJU4Rx/xsJfHkpfMv4cd+IAUJb1+YdkfSU7NXp6+/bti7qquKiEdfVq0Gl2TO2DonYzAcUTCv0slCB8FuGia/q8j7iAPl30aNIPHVKq55w+00MvjFLo05WmV8H5P9XLzydVF/H0xbGl9UGfjm226B98po2u6fO+0f3H9M7SbT1h+FoS00ybSmm+5/RZHxzbwWvVHtSvNuLRR4BKl0vPtHRhWh1SESUsNBkH0qjvNiAx4MA1JDBc4yBmTPmwJArJCFM+dA1SE5XsmFIqRTzKUrZYkMio78IUkauFoW6Mcbin1GWrOR8nqOEUEUQFmuK3ZdEw6NFg92s9j3XLp0CIsAuS8VdPkcKhCZ9/KAc81x/c3NdzFjy6KHZc0YPNh7VhDg9jYnh4co9n2dvx1nLalys7Rimx2xLGigfEJBQ0Xr149FkBVb04BQiTlPAFbTiDxRGKM1pJf5AgarPKG0sQu413N07hkCANO5m0fSebtCwziW5DqMISHTRMJCDF23inYbmsauNCHq+Vn1ta5dErzKN8psP/RiIXVpAegKJQ30Y06AQSEXdAIpdL0wbTNsLpoSIeCwRJHZYBpTusIFAIlPC0iqL5AxoCcmLPQkkLdITRCc0dSFqQD1A51g4pLOXmhZCwDMO2BpH9q6ZtDoU4oKQIy5yEynFnv+mzw+0+/q3Sf5yT4aYs89zq1alLIK7wYeQANcCpgW5AOaqIARzxcudrXrMTz+cuFAxBI1Rw06eLKz3xsnDikt+Mmr9mWBlXrbySeJAlTt8MXJImXHRNv0zx2GpWZ3r0KKqzXHlRHH26+fQf+mkbg56ADjppUuihMJl7BEhGtmnj+4Phj1lEUAzjaQcgJkzcqPPmlI/yjdJV8Trf/+hbeYyP0uMS0zSVF8SEaSELxkhR6a7IC1IVHkNMBWEkCljxYQ7YXgWKrDCHw2ohJDDKSkr5Tst3TANBp7DdgkTFKSOpxYMtV2i3hXQoJjwbBo3L4oibAajdXmSbCl01PEvi6x3PetMvwfi3cv+xHpPRk8GZvo6Oq5y5FvZlvtfqQZ5v5igfH7iRdHqrn/H24McyEb6ejCUxkCwqEATi8JDNKtWRIxI6wrLj+aOyQgIqLT/KTZ+OLYnCFGHE60PdSgzIgVmcfrbt5evjYkB97VeNyv8plx/UYoChElhYgB7KtD3PAUWRpejIVNzNAjNzyDuYRqnrMF5dIx4CkTrlAJQRps2FhZIX5lqYwfFLOygTBeSmkUhDEgNvIC7MR5ML6JhozoCpn+858G1utbH4j7BRT0Z9VlZzbTyOKJCKeCjkqYbkFBJh+DXCPVcKuXKIFURlm8WBoZSFOBCYmk6i33ioT+Kw1CegEMspcFfe+M8+rRySNum/YUwm9I7TPT04NWOBDg/nwtz16xMbEp3mPswIOuI6G7wBSlynz1pQWZEIP0smIcEEWN3QsfJDn+nj9FFSPh73wilgdE2f+eOumo4pPqWI2kI/LKu4RVXLq7H/kJopRUFhnkj4joNT9KC/BlZgAIVD1I+cwASVUBgCIsF1KEQxJLpGPKHGP5LYrAs5ikREnmJ61KF4K5cG1+REVS6HC1JauGroYYcOrLWUEp6MSF0UpoZgK5hV2dgEzeNLYbMBnRQZEUPnOwGMT6GOp57Kg/0WTCMYjnsQHpDmlJFTR5IcNt/alvV1PdF5NsKcLSpGG03L6QcjnWDpeIXqgFYb//A9wGi1+fMPDeqY7nae6uvT530KKp+JebkhHJyX6Fqz33X83tCgRr1d6gXBH+XnFtEwDmEVMBfAtbK7UvHxVTb1gGLQokbFVBZMDtUJHmT+dsPxmqSRU2nkrxkWxhfbOfEVwLov4sIaonSRr1qZy6vy8xliPbn+qPjYHxSm6mJwdB357DfaVtJ/BMLeW0/ayVQSR6TA5AB7h8kwmFeRrFBUSFYkJk7GsM+F5SuiCQmFBEriCskHYcxfEM9ozBjBS/yaKD//rBzndjD3BHswAcmqwFdhOWGugCw5owwpEt9sxMlVGWQEK4GlcAOi1XAcL6eLICfdcMFmNDnH7xdO/YTCHTkxM2B6EiSPbuXmHrZO5eJy4Iu6lfo2Gu8orFfA+PM9UMjnHpBIx9v+/Q9Wm8nMfcMTE1d7u7vP4Ec6fzy1wqOGP3xI63JHjgT2/rsy/boTbMP0pe78dVUWS5wjK0VUjIqNN3kA62ZYeIcfxofXDFNFUZBTT4W6m71mWBlXrb4yWSoEYWh0jVIUdJEmzA6o18mRDN7dCplCEkK8IiP4WRAU9OO8j5wimZB3SAhKYlJEphLkJCaSEP7PEdxsfVG5UWFxP6qPPngTlvBED6IWLN8dTPmg8ocFPPRXWBdlFWqqCEmLlhAgLRtKdLaAkpQNfRUM6DUQGOUiTimNEaT7FvRVw/F6K91XG4/mHf9KPaovvJ36jzfSS1mpc6mUdhnvhZL4a0GjZsKBKK+n0+kt0AHvztCAsIzjeeAeUKVPF1l101cBWCICxcGmcPalUeHRnyguIsJYej79fFnpKxdjrKhu+spVK69Ke+OW6SXlh7Xk/8b7D5umJKY6nUiQAEmp5ZKoD5Ay8kTFzcAsJIrL+ZREYCWAaU4ubXRNP8wfpuSuGubHMwCJhSuGPCiYJIMw5GV6xkfY0Wd+WoPiBAlEhvnzNluw3SKZYTkQHIQ5J1RQDg7Lw/QQGUIdFp4wcC9KgQ/7KkxjucEHROVmc3ZaCFfEjMxUvlPvBZ0WhT1Q1zG06hQKyGPA9qEh4bPRJuO/0p//WvoPyXpa77BPr9L1mn64QiJRT0vlP3jg1oyn0/th1dnN6VOkQyh8wVRuPpLUH9GHi+sckD4vLaj43NSHLwfv8cKjbGxdgc97JUpFpIRbpovKYHTUltkpHYkyEqNYf1gWfZU+Vn+JiMZERS4qKyTAMv1hmwoItLT/aL6OL9cn8A4mknhDkR5CUuh43ExhAXjnIQVxRQ9UwnU1JM73meHISINzlY/1Ir3jwNQBtui5IpU3K2mFZbEUEhgJiHlZhkqI8rws7hPFxBHlZ5romu1CGRSv2HyQEQiLPkwefJcSk2o0mU+F8Z46KswbKd8qvRUWiq7BsuoYlF/q+Jd839p4/KNnFHhw+Fbc819r/y3dHO7qsk9D2lLPBvEq59SLXC6CYSCq1OTk5F48g+FxLyQSvvyzhFK8taaYL1ACiYdkkSOg/HVO4irmAySLlR8+yHy5wnaWysTF7YmnRxdyecMXFDcxx3KjNCUEGUtb2r4Iixwh5qebxEG58v2Hkh0ERqlLp5kClNLkngLSyF8XExrZi089SYbFm9DRg1FCbEKyoxQE8sqFkTOgTwrDVIPCP/k8qpRcGrxMEXmxnpwjUeXbhjpgA2bBNsp0HPQWOiwNOnddw5YcNIdSFyzTlUKehEbrLDxDNn7osjCXPw5FO22qgPfKHn/pf8XxxxetvSvYlX8BxBVKCdGDmPPDhz0W+Oijjxof//jHt+Hh2oko/qKqFx4l0BJQmQIwS3RNn/fxZXqGFbq4nQzimI9tKFs+S1S1KJ9XoQkEfUQwtKg98fSzefMMwmx5F28/IqK2RLjM2b54/gX0H0v6+IiDZSVgHJogfYWNzDMUpCtsUkKg4pKIUJAsnNTlkjNWzfBCPMOhi8JAiCSqPBmyMFVQ1OdctQwLywNZ5cPCpDl80D6IhjzBASQF0sUeREpSJCyE4ceSpJXbEO2612AHepaTSRn/YrtEAD3n8xV/ntv4+S96nyGRO9gccQZmEPiBK3bRi5kPHcG+v2T32n2+53bxNY8oQyWIB0SR9OmqxMeTh5lm/8azx8srEbCQNSqTpUTX+eagwCiPqiWeQAXO/olHV2tPaYUFjWCxsQJjt7MV564K6iOB2Xj1adNGa3PqDMFl4XwSSnAQCUIibqFPlwtTwbiOkoSR+JvLx3KYv9BXaSrlLyifSegQBNMFTAWhiIeFArRZnoX+8Y2EzKhbnuNlYO9wFpZXkwoH5Kmj/6qOFTz+0n8+Y4Y/2pVIcJqY35+YJ6wjEN33ZzL9kPY3hWjx6Sv+RcByLIQAZZYQJSn2C944FRF/QkvjQ31XZDcV04GVPOGl+WdJEhVGbaNPV3d7Va7ZP83U/1ACgzTjkg4gjUFvHhGWkrPAPnnBLNeFSEKKfAbzOu9yBAUdVj6cZURpZuU3XOUILioD93x2IEnxxFGc9c6M+M93cHSNZVzHquBQDeMn4x898wQ2us7pgGvAbyU8/z5e5EupVEqtJirCgp4KHxVI7sbrQIYKHyKF3+yvIvEEX8FsQNk9qXwgBpgQwNo7p9OKrukzfdzF08+WTmYrV35YF+tU8bEpYImInGtLVH+8PkzZ8iQcVpjrawXCLOHH5uo/9JmWjbXHJMQcNhVW8bOklbsumnJw7Q+cgtVK2mJxAUNNKKncp54KHuzAwnjCE01B1UIHA1A80ik/IkdIfTj6mE8MXh2sSKZhdHUd+IcDykwFLj4eMv7Fv+il75c8/xEmeHaojD+jZ4LgbsPVVvO5iutg4oSAFCCiAqVp/jrUKRU8mzVexsube05ff3tiD0Q1wkP/ojrYgeiaftiheHsjLKL4GrudTxYvb0H9h94bpzeAwCD4cAqJf5SmlBjFH5D8ChVC1Q8KyIkrjtgbE64y4lqtINJHel5Hq4q4ZdsYzsWBWaU+rkFWtFzQbiNNnWciNbT/qD4+Hitq/FdE/3mWzmvQU+W4hZZPenQuRHRNfylcvfVjpUqz0Tj6dNE1/fm4euufTx1z5am3/hr6z6lj9A9ElneKwPJ3IYEVEpqKys0YFeUhoDBP4TV/+bjVIkfqKuu8/ixC/+tqR73111V4DYnrrb+G8a+h1tkk9dY/m7MxV7XUzwdP3ApBgCYG6Co+L6/+kcB4X0g0ERFFzwXjojBc5q8ZhqOKtWEoROmLEwSWBIHowVySyqSS5kIABEYhisRFEov8SgRWGD6K9OMgq8IwBIkTBBYXASGsxcW3pUoHgfF5iIiLPv9x+03kuLxMqaqsUj1KJL4gsFgICGEtFrJtUG6OwDhtJHHhqLOl+dBAG0AnXRAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBAFBQBAQBAQBQUAQEAQEAUFAEBAEBIGVhMD/D0fV/fpMMM+gAAAAAElFTkSuQmCC"}}},1261:function(e,t,n){"use strict";(function(e,o){var i=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.chooseVideo=function(e,t){var n=e.sourceType,i=e.extension;d&&(document.body.removeChild(d),d=null);d=(0,s.default)({sourceType:n,extension:i,type:"video"}),document.body.appendChild(d),d.addEventListener("change",(function(e){var n,o=e.target.files[0],i={errMsg:"chooseVideo:ok",tempFile:o,size:o.size,duration:0,width:0,height:0,name:o.name};Object.defineProperty(i,"tempFilePath",{get:function(){return n=n||(0,r.fileToUrl)(this.tempFile),n}});var a=document.createElement("video");if(void 0!==a.onloadedmetadata){var s=(0,r.fileToUrl)(o);a.onloadedmetadata=function(){(0,r.revokeObjectURL)(s),l(t,Object.assign(i,{duration:a.duration||0,width:a.videoWidth||0,height:a.videoHeight||0}))},setTimeout((function(){a.onloadedmetadata=null,(0,r.revokeObjectURL)(s),l(t,i)}),300),a.src=s}else l(t,i)})),d.click(),c.interact.getStatus()||o.warn("".concat((0,a.t)("uni.chooseFile.notUserActivation")))},n("6a54");var r=n("2c6f"),a=n("1909"),s=i(n("f5a2")),c=n("c47d"),u=e,l=u.invokeCallbackHandler,d=null}).call(this,n("ef66"),n("ba7c")["default"])},1269:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.getLocale=function(){var e=getApp({allowDefault:!0});if(e&&e.$vm)return e.$vm.$locale;return i.i18n.getLocale()},t.onLocaleChange=function(e){a.push(e)},t.setLocale=function(e){var t=getApp().$vm.$locale;if(t!==e){return getApp().$vm.$locale=e,navigator.cookieEnabled&&window.localStorage&&(localStorage[r.UNI_STORAGE_LOCALE]=e),a.forEach((function(t){(0,o.invoke)(t,{locale:e})})),!0}return!1},n("bf0f"),n("2797"),n("aa9c");var o=n("d2fd"),i=n("1909"),r=n("60bf");var a=[]},1297:function(e,t,n){"use strict";var o=n("bb80");e.exports=o({}.isPrototypeOf)},12973:function(e,t,n){"use strict";var o=n("7ddb"),i=o.aTypedArray,r=o.exportTypedArrayMethod,a=Math.floor;r("reverse",(function(){var e,t=i(this).length,n=a(t/2),o=0;while(o<n)e=this[o],this[o++]=this[--t],this[t]=e;return this}))},"12e3":function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var o=n("10ab"),i=n("ba37"),r=n("b0e4");function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=c.prototype):(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c))return new c(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return u(this,e,t,n)}function u(e,t,n,o){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,o){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(o||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===o?new Uint8Array(t):void 0===o?new Uint8Array(t,n):new Uint8Array(t,n,o);c.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=c.prototype):e=f(e,t);return e}(e,t,n,o):"string"===typeof t?function(e,t,n){"string"===typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var o=0|h(t,n);e=s(e,o);var i=e.write(t,n);i!==o&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|p(t.length);return e=s(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||function(e){return e!==e}(t.length)?s(e,0):f(e,t);if("Buffer"===t.type&&r(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(l(t),e=s(e,t<0?0:0|p(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|p(t.length);e=s(e,n);for(var o=0;o<n;o+=1)e[o]=255&t[o];return e}function p(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function h(e,t){if(c.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return B(e).length;default:if(o)return q(e).length;t=(""+t).toLowerCase(),o=!0}}function g(e,t,n){var o=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";e||(e="utf8");while(1)switch(e){case"hex":return A(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return k(this,t,n);case"latin1":case"binary":return D(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,n);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function _(e,t,n){var o=e[t];e[t]=e[n],e[n]=o}function v(e,t,n,o,i){if(0===e.length)return-1;if("string"===typeof n?(o=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=c.from(t,o)),c.isBuffer(t))return 0===t.length?-1:m(e,t,n,o,i);if("number"===typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,o,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,o,i){var r,a=1,s=e.length,c=t.length;if(void 0!==o&&(o=String(o).toLowerCase(),"ucs2"===o||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(r=n;r<s;r++)if(u(e,r)===u(t,-1===l?0:r-l)){if(-1===l&&(l=r),r-l+1===c)return l*a}else-1!==l&&(r-=r-l),l=-1}else for(n+c>s&&(n=s-c),r=n;r>=0;r--){for(var d=!0,f=0;f<c;f++)if(u(e,r+f)!==u(t,f)){d=!1;break}if(d)return r}return-1}function y(e,t,n,o){n=Number(n)||0;var i=e.length-n;o?(o=Number(o),o>i&&(o=i)):o=i;var r=t.length;if(r%2!==0)throw new TypeError("Invalid hex string");o>r/2&&(o=r/2);for(var a=0;a<o;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function M(e,t,n,o){return V(q(t,e.length-n),e,n,o)}function I(e,t,n,o){return V(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,o)}function C(e,t,n,o){return I(e,t,n,o)}function b(e,t,n,o){return V(B(t),e,n,o)}function T(e,t,n,o){return V(function(e,t){for(var n,o,i,r=[],a=0;a<e.length;++a){if((t-=2)<0)break;n=e.charCodeAt(a),o=n>>8,i=n%256,r.push(i),r.push(o)}return r}(t,e.length-n),e,n,o)}function S(e,t,n){return 0===t&&n===e.length?o.fromByteArray(e):o.fromByteArray(e.slice(t,n))}function E(e,t,n){n=Math.min(e.length,n);var o=[],i=t;while(i<n){var r,a,s,c,u=e[i],l=null,d=u>239?4:u>223?3:u>191?2:1;if(i+d<=n)switch(d){case 1:u<128&&(l=u);break;case 2:r=e[i+1],128===(192&r)&&(c=(31&u)<<6|63&r,c>127&&(l=c));break;case 3:r=e[i+1],a=e[i+2],128===(192&r)&&128===(192&a)&&(c=(15&u)<<12|(63&r)<<6|63&a,c>2047&&(c<55296||c>57343)&&(l=c));break;case 4:r=e[i+1],a=e[i+2],s=e[i+3],128===(192&r)&&128===(192&a)&&128===(192&s)&&(c=(15&u)<<18|(63&r)<<12|(63&a)<<6|63&s,c>65535&&c<1114112&&(l=c))}null===l?(l=65533,d=1):l>65535&&(l-=65536,o.push(l>>>10&1023|55296),l=56320|1023&l),o.push(l),i+=d}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",o=0;while(o<t)n+=String.fromCharCode.apply(String,e.slice(o,o+=4096));return n}(o)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=a(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return u(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,o){return l(t),t<=0?s(e,t):void 0!==n?"string"===typeof o?s(e,t).fill(n,o):s(e,t).fill(n):s(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return d(null,e)},c.allocUnsafeSlow=function(e){return d(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,o=t.length,i=0,r=Math.min(n,o);i<r;++i)if(e[i]!==t[i]){n=e[i],o=t[i];break}return n<o?-1:o<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!r(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var o=c.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(o,i),i+=a.length}return o},c.byteLength=h,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)_(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?E(this,0,e):g.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,o,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===o&&(o=0),void 0===i&&(i=this.length),t<0||n>e.length||o<0||i>this.length)throw new RangeError("out of range index");if(o>=i&&t>=n)return 0;if(o>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,o>>>=0,i>>>=0,this===e)return 0;for(var r=i-o,a=n-t,s=Math.min(r,a),u=this.slice(o,i),l=e.slice(t,n),d=0;d<s;++d)if(u[d]!==l[d]){r=u[d],a=l[d];break}return r<a?-1:a<r?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},c.prototype.write=function(e,t,n,o){if(void 0===t)o="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)o=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===o&&(o="utf8")):(o=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var r=!1;;)switch(o){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return M(this,e,t,n);case"ascii":return I(this,e,t,n);case"latin1":case"binary":return C(this,e,t,n);case"base64":return b(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,n);default:if(r)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),r=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function k(e,t,n){var o="";n=Math.min(e.length,n);for(var i=t;i<n;++i)o+=String.fromCharCode(127&e[i]);return o}function D(e,t,n){var o="";n=Math.min(e.length,n);for(var i=t;i<n;++i)o+=String.fromCharCode(e[i]);return o}function A(e,t,n){var o=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>o)&&(n=o);for(var i="",r=t;r<n;++r)i+=F(e[r]);return i}function L(e,t,n){for(var o=e.slice(t,n),i="",r=0;r<o.length;r+=2)i+=String.fromCharCode(o[r]+256*o[r+1]);return i}function O(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,o,i,r){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<r)throw new RangeError('"value" argument is out of bounds');if(n+o>e.length)throw new RangeError("Index out of range")}function w(e,t,n,o){t<0&&(t=65535+t+1);for(var i=0,r=Math.min(e.length-n,2);i<r;++i)e[n+i]=(t&255<<8*(o?i:1-i))>>>8*(o?i:1-i)}function N(e,t,n,o){t<0&&(t=4294967295+t+1);for(var i=0,r=Math.min(e.length-n,4);i<r;++i)e[n+i]=t>>>8*(o?i:3-i)&255}function P(e,t,n,o,i,r){if(n+o>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function G(e,t,n,o,r){return r||P(e,0,n,4),i.write(e,t,n,o,23,4),n+4}function U(e,t,n,o,r){return r||P(e,0,n,8),i.write(e,t,n,o,52,8),n+8}c.prototype.slice=function(e,t){var n,o=this.length;if(e=~~e,t=void 0===t?o:~~t,e<0?(e+=o,e<0&&(e=0)):e>o&&(e=o),t<0?(t+=o,t<0&&(t=0)):t>o&&(t=o),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=c.prototype;else{var i=t-e;n=new c(i,void 0);for(var r=0;r<i;++r)n[r]=this[r+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);var o=this[e],i=1,r=0;while(++r<t&&(i*=256))o+=this[e+r]*i;return o},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);var o=this[e+--t],i=1;while(t>0&&(i*=256))o+=this[e+--t]*i;return o},c.prototype.readUInt8=function(e,t){return t||O(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||O(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||O(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);var o=this[e],i=1,r=0;while(++r<t&&(i*=256))o+=this[e+r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);var o=t,i=1,r=this[e+--o];while(o>0&&(i*=256))r+=this[e+--o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},c.prototype.readInt8=function(e,t){return t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||O(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||O(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||O(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||O(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||O(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||O(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,o){if(e=+e,t|=0,n|=0,!o){var i=Math.pow(2,8*n)-1;R(this,e,t,n,i,0)}var r=1,a=0;this[t]=255&e;while(++a<n&&(r*=256))this[t+a]=e/r&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,o){if(e=+e,t|=0,n|=0,!o){var i=Math.pow(2,8*n)-1;R(this,e,t,n,i,0)}var r=n-1,a=1;this[t+r]=255&e;while(--r>=0&&(a*=256))this[t+r]=e/a&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):w(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):w(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,o){if(e=+e,t|=0,!o){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var r=0,a=1,s=0;this[t]=255&e;while(++r<n&&(a*=256))e<0&&0===s&&0!==this[t+r-1]&&(s=1),this[t+r]=(e/a>>0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,o){if(e=+e,t|=0,!o){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var r=n-1,a=1,s=0;this[t+r]=255&e;while(--r>=0&&(a*=256))e<0&&0===s&&0!==this[t+r+1]&&(s=1),this[t+r]=(e/a>>0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):w(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):w(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return G(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return G(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return U(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return U(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,o){if(n||(n=0),o||0===o||(o=this.length),t>=e.length&&(t=e.length),t||(t=0),o>0&&o<n&&(o=n),o===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-t<o-n&&(o=e.length-t+n);var i,r=o-n;if(this===e&&n<t&&t<o)for(i=r-1;i>=0;--i)e[i+t]=this[i+n];else if(r<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<r;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+r),t);return r},c.prototype.fill=function(e,t,n,o){if("string"===typeof e){if("string"===typeof t?(o=t,t=0,n=this.length):"string"===typeof n&&(o=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==o&&"string"!==typeof o)throw new TypeError("encoding must be a string");if("string"===typeof o&&!c.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var r;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(r=t;r<n;++r)this[r]=e;else{var a=c.isBuffer(e)?e:q(new c(e,o).toString()),s=a.length;for(r=0;r<n-t;++r)this[r+t]=a[r%s]}return this};var x=/[^+\/0-9A-Za-z-_]/g;function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function q(e,t){var n;t=t||1/0;for(var o=e.length,i=null,r=[],a=0;a<o;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&r.push(239,191,189);continue}if(a+1===o){(t-=3)>-1&&r.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&r.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&r.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;r.push(n)}else if(n<2048){if((t-=2)<0)break;r.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;r.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;r.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return r}function B(e){return o.toByteArray(function(e){if(e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(x,""),e.length<2)return"";while(e.length%4!==0)e+="=";return e}(e))}function V(e,t,n,o){for(var i=0;i<o;++i){if(i+n>=t.length||i>=e.length)break;t[i+n]=e[i]}return i}}).call(this,n("0ee4"))},"12e8":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.$once=t.$on=t.$off=t.$emit=void 0;var o=[{name:"event",type:[String,Array],required:!0},{name:"callback",type:Function,required:!0}];t.$on=o;var i=o;t.$once=i;var r=[{name:"event",type:[String,Array]},{name:"callback",type:Function}];t.$off=r;var a=[{name:"event",type:String,required:!0}];t.$emit=a},"130e":function(e,t,n){"use strict";(function(e){var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("fcf3"));n("c1a3"),n("bf0f"),n("18f7"),n("de6c"),n("f3f7"),n("23f4"),n("7d2f"),n("5c47"),n("9c4e"),n("ab80"),n("7a76"),n("c9b5"),n("926e"),n("5ef2"),n("aa9c"),n("2797"),n("9a2c"),n("01a2"),n("6a54"),n("7f48");var r=function(){function t(e,t){return null!=t&&e instanceof t}var n,o,r;try{n=Map}catch(u){n=function(){}}try{o=Set}catch(u){o=function(){}}try{r=Promise}catch(u){r=function(){}}function a(s,u,l,d,f){"object"===(0,i.default)(u)&&(l=u.depth,d=u.prototype,f=u.includeNonEnumerable,u=u.circular);var p=[],h=[],g="undefined"!=typeof e;return"undefined"==typeof u&&(u=!0),"undefined"==typeof l&&(l=1/0),function s(l,_){if(null===l)return null;if(0===_)return l;var v,m;if("object"!=(0,i.default)(l))return l;if(t(l,n))v=new n;else if(t(l,o))v=new o;else if(t(l,r))v=new r((function(e,t){l.then((function(t){e(s(t,_-1))}),(function(e){t(s(e,_-1))}))}));else if(a.__isArray(l))v=[];else if(a.__isRegExp(l))v=new RegExp(l.source,c(l)),l.lastIndex&&(v.lastIndex=l.lastIndex);else if(a.__isDate(l))v=new Date(l.getTime());else{if(g&&e.isBuffer(l))return e.from?v=e.from(l):(v=new e(l.length),l.copy(v)),v;t(l,Error)?v=Object.create(l):"undefined"==typeof d?(m=Object.getPrototypeOf(l),v=Object.create(m)):(v=Object.create(d),m=d)}if(u){var y=p.indexOf(l);if(-1!=y)return h[y];p.push(l),h.push(v)}for(var M in t(l,n)&&l.forEach((function(e,t){var n=s(t,_-1),o=s(e,_-1);v.set(n,o)})),t(l,o)&&l.forEach((function(e){var t=s(e,_-1);v.add(t)})),l){var I=Object.getOwnPropertyDescriptor(l,M);I&&(v[M]=s(l[M],_-1));try{var C=Object.getOwnPropertyDescriptor(l,M);if("undefined"===C.set)continue;v[M]=s(l[M],_-1)}catch(D){if(D instanceof TypeError)continue;if(D instanceof ReferenceError)continue}}if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(l);for(M=0;M<b.length;M++){var T=b[M],S=Object.getOwnPropertyDescriptor(l,T);(!S||S.enumerable||f)&&(v[T]=s(l[T],_-1),Object.defineProperty(v,T,S))}}if(f){var E=Object.getOwnPropertyNames(l);for(M=0;M<E.length;M++){var k=E[M];S=Object.getOwnPropertyDescriptor(l,k);S&&S.enumerable||(v[k]=s(l[k],_-1),Object.defineProperty(v,k,S))}}return v}(s,l)}function s(e){return Object.prototype.toString.call(e)}function c(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return a.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},a.__objToStr=s,a.__isDate=function(e){return"object"===(0,i.default)(e)&&"[object Date]"===s(e)},a.__isArray=function(e){return"object"===(0,i.default)(e)&&"[object Array]"===s(e)},a.__isRegExp=function(e){return"object"===(0,i.default)(e)&&"[object RegExp]"===s(e)},a.__getRegExpFlags=c,a}(),a=r;t.default=a}).call(this,n("12e3").Buffer)},1415:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.hasTabBar?n("uni-tabbar",{directives:[{name:"show",rawName:"v-show",value:e.showTabBar,expression:"showTabBar"}]},[n("div",{staticClass:"uni-tabbar",style:{"flex-direction":"vertical"===e.direction?"column":"row",backgroundColor:e.tabBarOptions.backgroundColor}},[e._l(e.tabBarOptions.list,(function(t,o){return[!1!==t.visible?n("div",{key:t.pagePath,staticClass:"uni-tabbar__item",on:{click:function(n){return e._switchTab(t,o)}}},[n("div",{staticClass:"uni-tabbar__bd"},[e.showIcon&&t.iconPath?n("div",{staticClass:"uni-tabbar__icon",class:{"uni-tabbar__icon__diff":!t.text}},[n("img",{attrs:{src:e._getRealPath(e.selectedIndex===o?t.selectedIconPath:t.iconPath)}}),t.redDot?n("div",{staticClass:"uni-tabbar__reddot",class:{"uni-tabbar__badge":!!t.badge}},[e._v("\n              "+e._s(t.badge)+"\n            ")]):e._e()]):e._e(),t.text?n("div",{staticClass:"uni-tabbar__label",style:{color:e.selectedIndex===o?e.tabBarOptions.selectedColor:e.tabBarOptions.color,fontSize:e.showIcon&&t.iconPath?"10px":"14px"}},[e._v("\n            "+e._s(t.text)+"\n            "),!t.redDot||e.showIcon&&t.iconPath?e._e():n("div",{staticClass:"uni-tabbar__reddot",class:{"uni-tabbar__badge":!!t.badge}},[e._v("\n              "+e._s(t.badge)+"\n            ")])]):e._e()])]):e._e()]}))],2)]):e._e()},i=[]},"141c":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(uni.canIUse("css.var")){var e=document.documentElement.style,t=parseInt((e.getPropertyValue("--window-top").match(/\d+/)||["0"])[0]),n=parseInt((e.getPropertyValue("--window-bottom").match(/\d+/)||["0"])[0]),o=parseInt((e.getPropertyValue("--window-left").match(/\d+/)||["0"])[0]),a=parseInt((e.getPropertyValue("--window-right").match(/\d+/)||["0"])[0]),s=parseInt((e.getPropertyValue("--top-window-height").match(/\d+/)||["0"])[0]);return{top:(t?t+r.default.top:0)+(s||0),bottom:n?n+r.default.bottom:0,left:o?o+r.default.left:0,right:a?a+r.default.right:0}}var c=0,u=0,l=getCurrentPages();if(l.length){var d=l[l.length-1].$parent.$parent,f=d.navigationBar.type;c="default"===f||"float"===f?i.NAVBAR_HEIGHT:0}var p=getApp();p&&(u=p.$children[0]&&p.$children[0].showTabBar?i.TABBAR_HEIGHT:0);return{top:c,bottom:u,left:0,right:0}},n("e966"),n("5c47"),n("2c10");var i=n("60bf"),r=o(n("f621"))},"144a":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default="h5"},1480:function(e,t,n){var o=n("508d"),i=n("e4a9");o({target:"Object",stat:!0,arity:2,forced:Object.assign!==i},{assign:i})},"14ac":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.getPageHolder=function(e){if(e)return e.$holder;var t=getCurrentPages(),n=t.length;if(n)return t[n-1].$holder},t.isCurrentPage=function(e){var t=getCurrentPages(),n=t.length;if(n)return t[n-1].$holder===e;return!1}},"14e3":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={checkboxGroup:{name:"",value:function(){return[]},shape:"square",disabled:!1,activeColor:"#2979ff",inactiveColor:"#c8c9cc",size:18,placement:"row",labelSize:14,labelColor:"#303133",labelDisabled:!1,iconColor:"#ffffff",iconSize:12,iconPlacement:"left",borderBottom:!1}}},"14f48":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-movable-area",{staticClass:"image-view-area",nativeOn:{touchstart:function(t){return e.onTouchStart(t)},touchmove:function(t){return e.checkDirection(t)},touchend:function(t){return e.onTouchEnd(t)}}},[n("v-uni-movable-view",{staticClass:"image-view-view",attrs:{direction:e.direction,inertia:!0,scale:!0,"scale-min":"1","scale-max":"4"},on:{scale:e.onScale}},[n("img",{staticClass:"image-view-img",attrs:{src:e.src},on:{load:e.onImgLoad}})])],1)},i=[]},1501:function(e,t,n){var o=n("66b1"),i=Math.min;e.exports=function(e){return e>0?i(o(e),9007199254740991):0}},"151e":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("b7c7"));n("8f71"),n("bf0f"),n("bd06"),n("2797"),n("fd3c"),n("5ef2"),n("aa9c");var r=n("1ffa"),a={name:"PickerView",props:{value:{type:Array,default:function(){return[]},validator:function(e){return Array.isArray(e)&&e.filter((function(e){return"number"===typeof e})).length===e.length}},indicatorStyle:{type:String,default:""},indicatorClass:{type:String,default:""},maskStyle:{type:String,default:""},maskClass:{type:String,default:""}},data:function(){return{valueSync:(0,i.default)(this.value),height:34,items:[],changeSource:""}},watch:{value:function(e,t){var n=this;this.valueSync.length=e.length,e.forEach((function(e,t){e!==n.valueSync[t]&&n.$set(n.valueSync,t,e)}))},valueSync:{deep:!0,handler:function(e,t){if(""===this.changeSource)this._valueChanged(e);else{this.changeSource="";var n=e.map((function(e){return e}));this.$emit("update:value",n),this.$trigger("change",{},{value:n})}}}},methods:{getItemIndex:function(e){return this.items.indexOf(e)},getItemValue:function(e){return this.valueSync[this.getItemIndex(e.$vnode)]||0},setItemValue:function(e,t){var n=this.getItemIndex(e.$vnode),o=this.valueSync[n];o!==t&&(this.changeSource="touch",this.$set(this.valueSync,n,t))},_valueChanged:function(e){this.items.forEach((function(t,n){t.componentInstance.setCurrent(e[n]||0)}))},_resize:function(e){var t=e.height;this.height=t}},render:function(e){var t=[];return this.$slots.default&&(0,r.deepClone)(this.$slots.default,e).forEach((function(e){e.componentOptions&&"v-uni-picker-view-column"===e.componentOptions.tag&&t.push(e)})),this.items=t,e("uni-picker-view",{on:this.$listeners},[e("v-uni-resize-sensor",{attrs:{initial:!0},on:{resize:this._resize}}),e("div",{ref:"wrapper",class:"uni-picker-view-wrapper"},t)])}};t.default=a},1535:function(e,t,n){var o=n("7aa6"),i=n("fdca"),r=/#|\.prototype\./,a=function(e,t){var n=c[s(e)];return n==l||n!=u&&(i(t)?o(t):!!t)},s=a.normalize=function(e){return String(e).replace(r,".").toLowerCase()},c=a.data={},u=a.NATIVE="N",l=a.POLYFILL="P";e.exports=a},1565:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.unPreloadPage=t.switchTab=t.redirectTo=t.reLaunch=t.preloadPage=t.navigateTo=t.navigateBack=void 0,n("5ef2"),n("5c47"),n("a1c1"),n("0c26"),n("bf0f"),n("2797"),n("aa9c"),n("aa77"),n("64aa"),n("e966");var i,r=o(n("b777"));function a(e){return function(t,n){t=(0,r.default)(t);var o=t.split("?")[0],a=__uniRoutes.find((function(e){var t=e.path,n=e.alias;return t===o||n===o}));if(!a)return"page `"+t+"` is not found";if("navigateTo"===e||"redirectTo"===e){if(a.meta.isTabBar)return"can not ".concat(e," a tabbar page")}else if("switchTab"===e&&!a.meta.isTabBar)return"can not switch to no-tabBar page";if("switchTab"!==e&&"preloadPage"!==e||!a.meta.isTabBar||"appLaunch"===n.openType||(t=o),a.meta.isEntry&&(t=t.replace(a.alias,"/")),n.url=function(e){if("string"!==typeof e)return e;var t=e.indexOf("?");if(-1===t)return e;var n=e.substr(t+1).trim().replace(/^(\?|#|&)/,"");if(!n)return e;e=e.substr(0,t);var o=[];return n.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),n=t.shift(),i=t.length>0?t.join("="):"";o.push(n+"="+encodeURIComponent(i))})),o.length?e+"?"+o.join("&"):e}(t),"unPreloadPage"!==e)if("preloadPage"!==e){if(i===t&&"appLaunch"!==n.openType)return"".concat(i," locked");__uniConfig.ready&&!1!==__uniConfig.enableNavigatorLock&&(i=t)}else if(a.meta.isTabBar){var s=getCurrentPages(!0),c=(a.alias||a.path).substr(1);if(s.find((function(e){return e.route===c})))return"tabBar page `"+c+"` already exists"}}}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({url:{type:String,required:!0,validator:a(e)},beforeAll:function(){i=""}},t)}function c(e){return{animationType:{type:String,validator:function(t){if(t&&-1===e.indexOf(t))return"`"+t+"` is not supported for `animationType` (supported values are: `"+e.join("`|`")+"`)"}},animationDuration:{type:Number}}}var u=s("redirectTo");t.redirectTo=u;var l=s("reLaunch");t.reLaunch=l;var d=s("navigateTo",c(["slide-in-right","slide-in-left","slide-in-top","slide-in-bottom","fade-in","zoom-out","zoom-fade-out","pop-in","none"]));t.navigateTo=d;var f=s("switchTab");t.switchTab=f;var p=Object.assign({delta:{type:Number,validator:function(e,t){e=parseInt(e)||1,t.delta=Math.min(getCurrentPages().length-1,e)}}},c(["slide-out-right","slide-out-left","slide-out-top","slide-out-bottom","fade-out","zoom-in","zoom-fade-in","pop-out","none"]));t.navigateBack=p;var h={url:{type:String,required:!0,validator:a("preloadPage")}};t.preloadPage=h;var g={url:{type:String,required:!0,validator:a("unPreloadPage")}};t.unPreloadPage=g},"15ab":function(e,t,n){"use strict";var o=n("7658"),i=n("57e7");o("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},"15d1":function(e,t,n){"use strict";var o=n("8bdb"),i=n("85c1"),r=n("6aa6"),a=n("bb80"),s=n("71e9"),c=n("af9e"),u=n("9e70"),l=n("7f28"),d=n("3b19").c2i,f=/[^\d+/a-z]/i,p=/[\t\n\f\r ]+/g,h=/[=]{1,2}$/,g=r("atob"),_=String.fromCharCode,v=a("".charAt),m=a("".replace),y=a(f.exec),M=!!g&&!c((function(){return"hi"!==g("aGk=")})),I=M&&c((function(){return""!==g(" ")})),C=M&&!c((function(){g("a")})),b=M&&!c((function(){g()})),T=M&&1!==g.length,S=!M||I||C||b||T;o({global:!0,bind:!0,enumerable:!0,forced:S},{atob:function(e){if(l(arguments.length,1),M&&!I&&!C)return s(g,i,e);var t,n,o,a=m(u(e),p,""),c="",b=0,T=0;if(a.length%4===0&&(a=m(a,h,"")),t=a.length,t%4===1||y(f,a))throw new(r("DOMException"))("The string is not correctly encoded","InvalidCharacterError");while(b<t)n=v(a,b++),o=T%4?64*o+d[n]:d[n],T++%4&&(c+=_(255&o>>(-2*T&6)));return c}})},"15ea":function(e,t,n){var o,i,r,a=n("bdbb").default;(function(s,c,u){"object"===a(t)?e.exports=t=c(n("5e74"),n("7f5d"),n("4f3e"),n("734e"),n("f794")):(i=[n("5e74"),n("7f5d"),n("4f3e"),n("734e"),n("f794")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))})(0,(function(e){return function(){var t=e,n=t.lib,o=n.StreamCipher,i=t.algo,r=[],a=[],s=[],c=i.RabbitLegacy=o.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var i=0;i<4;i++)u.call(this);for(i=0;i<8;i++)o[i]^=n[i+4&7];if(t){var r=t.words,a=r[0],s=r[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=c>>>16|4294901760&l,f=l<<16|65535&c;o[0]^=c,o[1]^=d,o[2]^=l,o[3]^=f,o[4]^=c,o[5]^=d,o[6]^=l,o[7]^=f;for(i=0;i<4;i++)u.call(this)}},_doProcessBlock:function(e,t){var n=this._X;u.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var o=0;o<4;o++)r[o]=16711935&(r[o]<<8|r[o]>>>24)|4278255360&(r[o]<<24|r[o]>>>8),e[t+o]^=r[o]},blockSize:4,ivSize:2});function u(){for(var e=this._X,t=this._C,n=0;n<8;n++)a[n]=t[n];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0;for(n=0;n<8;n++){var o=e[n]+t[n],i=65535&o,r=o>>>16,c=((i*i>>>17)+i*r>>>15)+r*r,u=((4294901760&o)*o|0)+((65535&o)*o|0);s[n]=c^u}e[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,e[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,e[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,e[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,e[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,e[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,e[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,e[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}t.RabbitLegacy=o._createHelper(c)}(),e.RabbitLegacy}))},"15f4":function(e,t,n){"use strict";(function(e){function o(e,t,n){var o=Array.prototype.slice.call(e.changedTouches).filter((function(e){return e.identifier===t}))[0];return!!o&&(e.deltaY=o.pageY-n,!0)}n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("8f71"),n("bf0f"),n("f7a5"),n("5ef2");var i="aborting",r="refreshing",a="restoring",s={mounted:function(){var t=this;this.enablePullDownRefresh&&(this.refreshContainerElem=this.$refs.refresh.$el,this.refreshControllerElem=this.refreshContainerElem.querySelector(".uni-page-refresh"),this.refreshInnerElemStyle=this.refreshControllerElem.querySelector(".uni-page-refresh-inner").style,e.on(this.$route.params.__id__+".startPullDownRefresh",(function(){t.state||(t.state=r,t._addClass(),setTimeout((function(){t._refreshing()}),50))})),e.on(this.$route.params.__id__+".stopPullDownRefresh",(function(){t.state===r&&(t._removeClass(),t.state=a,t._addClass(),t._restoring((function(){t._removeClass(),t.state=t.distance=t.offset=null})))})))},methods:{_touchstart:function(e){var t=e.changedTouches[0];this.touchId=t.identifier,this.startY=t.pageY,[i,r,a].indexOf(this.state)>=0?this.canRefresh=!1:this.canRefresh=!0},_touchmove:function(e){if(this.canRefresh&&o(e,this.touchId,this.startY)){var t=e.deltaY;if(0===(document.documentElement.scrollTop||document.body.scrollTop)){if(!(t<0)||this.state){e.preventDefault(),null==this.distance&&(this.offset=t,this.state="pulling",this._addClass()),t-=this.offset,t<0&&(t=0),this.distance=t;var n=t>=this.refreshOptions.range&&"reached"!==this.state,i=t<this.refreshOptions.range&&"pulling"!==this.state;(n||i)&&(this._removeClass(),this.state="reached"===this.state?"pulling":"reached",this._addClass()),this._pulling(t)}}else this.touchId=null}},_touchend:function(e){var t=this;o(e,this.touchId,this.startY)&&null!==this.state&&("pulling"===this.state?(this._removeClass(),this.state=i,this._addClass(),this._aborting((function(){t._removeClass(),t.state=t.distance=t.offset=null}))):"reached"===this.state&&(this._removeClass(),this.state=r,this._addClass(),this._refreshing()))},_toggleClass:function(e){if(this.state){var t=this.refreshContainerElem;t&&t.classList[e]("uni-page-refresh--"+this.state)}},_addClass:function(){this._toggleClass("add")},_removeClass:function(){this._toggleClass("remove")},_pulling:function(e){var t=this.refreshControllerElem;if(t){var n=t.style,o=e/this.refreshOptions.range;o>1?o=1:o*=o*o;var i=Math.round(e/(this.refreshOptions.range/this.refreshOptions.height)),r=i?"translate3d(-50%, "+i+"px, 0)":0;n.webkitTransform=r,n.clip="rect("+(45-i)+"px,45px,45px,-5px)",this.refreshInnerElemStyle.webkitTransform="rotate("+360*o+"deg)"}},_aborting:function(e){var t=this.refreshControllerElem;if(t){var n=t.style;if(n.webkitTransform){n.webkitTransition="-webkit-transform 0.3s",n.webkitTransform="translate3d(-50%, 0, 0)";var o=function o(){i&&clearTimeout(i),t.removeEventListener("webkitTransitionEnd",o),n.webkitTransition="",e()};t.addEventListener("webkitTransitionEnd",o);var i=setTimeout(o,350)}else e()}},_refreshing:function(){var t=this.refreshControllerElem;if(t){var n=t.style;n.webkitTransition="-webkit-transform 0.2s",n.webkitTransform="translate3d(-50%, "+this.refreshOptions.height+"px, 0)",e.emit("onPullDownRefresh",{},this.$route.params.__id__)}},_restoring:function(e){var t=this.refreshControllerElem;if(t){var n=t.style;n.webkitTransition="-webkit-transform 0.3s",n.webkitTransform+=" scale(0.01)";var o=function o(){i&&clearTimeout(i),t.removeEventListener("webkitTransitionEnd",o),n.webkitTransition="",n.webkitTransform="translate3d(-50%, 0, 0)",e()};t.addEventListener("webkitTransitionEnd",o);var i=setTimeout(o,350)}}}};t.default=s}).call(this,n("ef66"))},1638:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.visible?n("div",{staticClass:"uni-system-preview-image",on:{click:e._click}},[n("v-uni-swiper",{staticClass:"uni-system-preview-image-swiper",attrs:{navigation:"auto",current:e.index,"indicator-dots":!1,autoplay:!1},on:{"update:current":function(t){e.index=t}}},e._l(e.urls,(function(e,t){return n("v-uni-swiper-item",{key:t},[n("image-view",{attrs:{src:e}})],1)})),1),e._m(0)],1):e._e()},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"nav-btn-back"},[t("i",{staticClass:"uni-btn-icon"},[this._v("")])])}]},1665:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={loadingPage:{loadingText:"正在加载",image:"",loadingMode:"circle",loading:!1,bgColor:"#ffffff",color:"#C8C8C8",fontSize:19,iconSize:28,loadingColor:"#C8C8C8"}}},1692:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={tag:{type:"primary",disabled:!1,size:"medium",shape:"square",text:"",bgColor:"",color:"",borderColor:"",closeColor:"#C6C7CB",name:"",plainFill:!1,plain:!1,closable:!1,show:!0,icon:""}}},1696:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.tabBar=void 0,n("bf0f"),n("2797");var i=o(n("9b8e")),r=n("1909"),a=n("a301"),s=__uniConfig.tabBar||{};__uniConfig.tabBar=i.default.observable((0,a.parseTheme)((0,r.initTabBarI18n)(s))),(0,a.onThemeChange)((function(){var e=(0,a.parseTheme)((0,r.initTabBarI18n)(s));__uniConfig.tabBar.backgroundColor=e.backgroundColor,__uniConfig.tabBar.borderStyle=e.borderStyle,__uniConfig.tabBar.color=e.color,__uniConfig.tabBar.selectedColor=e.selectedColor,__uniConfig.tabBar.blurEffect=e.blurEffect,e.list&&e.list.length&&__uniConfig.tabBar.list.length&&e.list.forEach((function(e,t){__uniConfig.tabBar.list[t].iconPath=e.iconPath,__uniConfig.tabBar.list[t].selectedIconPath=e.selectedIconPath}))}));var c=__uniConfig.tabBar;t.tabBar=c},"175f":function(e,t,n){"use strict";var o=n("6aa6"),i=n("338c"),r=n("6aca"),a=n("1297"),s=n("8c4f"),c=n("3d8a"),u=n("e157"),l=n("dcda"),d=n("e7da"),f=n("5330"),p=n("8cb1"),h=n("ab4a"),g=n("a734");e.exports=function(e,t,n,_){var v=_?2:1,m=e.split("."),y=m[m.length-1],M=o.apply(null,m);if(M){var I=M.prototype;if(!g&&i(I,"cause")&&delete I.cause,!n)return M;var C=o("Error"),b=t((function(e,t){var n=d(_?t:e,void 0),o=_?new M(e):new M;return void 0!==n&&r(o,"message",n),p(o,b,o.stack,2),this&&a(I,this)&&l(o,this,b),arguments.length>v&&f(o,arguments[v]),o}));if(b.prototype=I,"Error"!==y?s?s(b,C):c(b,C,{name:!0}):h&&"stackTraceLimit"in M&&(u(b,M,"stackTraceLimit"),u(b,M,"prepareStackTrace")),c(b,M),!g)try{I.name!==y&&r(I,"name",y),I.constructor=b}catch(T){}return b}}},"177f":function(e,t,n){var o=n("85e5"),i=n("d10a");e.exports=function(e){if("Function"===o(e))return i(e)}},"17b5":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={search:{shape:"round",bgColor:"#f2f2f2",placeholder:"请输入关键字",clearabled:!0,focus:!1,showAction:!0,actionStyle:function(){return{}},actionText:"搜索",inputAlign:"left",inputStyle:function(){return{}},disabled:!1,borderColor:"transparent",searchIconColor:"#909399",searchIconSize:22,color:"#606266",placeholderColor:"#909399",searchIcon:"search",margin:"0",animation:!1,value:"",maxlength:"-1",height:32,label:null}}},"17cb":function(e,t,n){"use strict";n.r(t);var o=n("8f7d"),i=n("a1b9");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a=n("828b"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},"17fc":function(e,t,n){"use strict";var o=n("ac5f"),i=n("8ae2"),r=n("1c06"),a=n("8c08"),s=a("species"),c=Array;e.exports=function(e){var t;return o(e)&&(t=e.constructor,i(t)&&(t===c||o(t.prototype))?t=void 0:r(t)&&(t=t[s],null===t&&(t=void 0))),void 0===t?c:t}},"181d":function(e,t,n){"use strict";var o=n("d6b1").f,i=n("338c"),r=n("8c08"),a=r("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!i(e,a)&&o(e,a,{configurable:!0,value:t})}},1827:function(e,t,n){"use strict";(function(e){n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("64aa"),n("5ef2");var i=o(n("fcf3")),r=n("c9ac"),a=n("1909"),s=n("60bf"),c=n("1ffa"),u=n("7b61"),l=o(n("e3c8")),d=o(n("c4b8")),f=o(n("18fe")),p=o(n("15f4")),h=o(n("f621")),g=n("a301");function _(){var e={},t={none:"default",auto:"transparent",always:"float"},n=this.titleNView;n=!1===n||"false"===n||"custom"===this.navigationStyle&&!(0,c.isPlainObject)(n)||"always"===this.transparentTitle&&!(0,c.isPlainObject)(n)?{type:"none"}:Object.assign({},{type:"custom"===this.navigationStyle?"none":"default"},this.transparentTitle in t?{type:t[this.transparentTitle]}:null,"object"===(0,i.default)(n)?n:"boolean"===typeof n?{type:n?"default":"none"}:null);return e=(0,u.mergeTitleNView)({loading:!1,backButton:!this.isQuit&&!this.$route.meta.isQuit,backgroundColor:this.navigationBarBackgroundColor,textColor:"white"===(0,g.parseTheme)({testStyle:this.navigationBarTextStyle}).testStyle?"#fff":"#000",titleText:this.navigationBarTitleText,titleImage:this.titleImage,duration:"0",timingFunc:"",titlePenetrate:{YES:!0,NO:!1}[this.titlePenetrate]},n),e.shadow=this.navigationBarShadow,(0,a.initNavigationBarI18n)(e),{navigationBar:__uniConfig.darkmode?(0,g.parseTheme)(e):e,titleNView:n}}function v(e){var t=Object.assign({support:!0,color:"#2BD009",style:"circle",height:70,range:150,offset:0},this.pullToRefresh),n=(0,r.upx2px)(t.offset);return"none"!==e.type&&"transparent"!==e.type&&(n+=s.NAVBAR_HEIGHT+h.default.top),t.offset=n,t.height=(0,r.upx2px)(t.height),t.range=(0,r.upx2px)(t.range),t}var m={name:"Page",mpType:"page",components:{PageHead:l.default,PageBody:d.default,PageRefresh:f.default},mixins:[p.default],props:{isQuit:{type:Boolean,default:!1},isEntry:{type:Boolean,default:!1},isTabBar:{type:Boolean,default:!1},tabBarIndex:{type:Number,default:-1},navigationBarBackgroundColor:{type:String,default:"#f8f8f8"},navigationBarTextStyle:{default:"black",validator:function(e){return-1!==["white","black"].indexOf(e)||0===e.indexOf("@")}},navigationBarTitleText:{type:String,default:""},navigationStyle:{default:"default",validator:function(e){return-1!==["default","custom"].indexOf(e)}},backgroundColor:{type:String,default:"#ffffff"},backgroundTextStyle:{default:"dark",validator:function(e){return-1!==["dark","light"].indexOf(e)}},backgroundColorTop:{type:String,default:"#fff"},backgroundColorBottom:{type:String,default:"#fff"},enablePullDownRefresh:{type:Boolean,default:!1},onReachBottomDistance:{type:Number,default:50},disableScroll:{type:Boolean,default:!1},titleNView:{type:[Boolean,Object,String],default:""},pullToRefresh:{type:Object,default:function(){return{}}},titleImage:{type:String,default:""},transparentTitle:{type:String,default:""},titlePenetrate:{type:String,default:"NO"},navigationBarShadow:{type:Object,default:function(){return{}}},topWindow:{type:Boolean,default:!0}},data:function(){var e=_.call(this),t=e.navigationBar,n=e.titleNView;return{navigationBar:t,refreshOptions:v.call(this,n)}},created:function(){var t=this,n=this.navigationBar;document.title=n.titleText,e.emit("onNavigationBarChange",n),(0,g.onThemeChange)((function(){t.navigationBar=_.call(t).navigationBar}))}};t.default=m}).call(this,n("ef66"))},1851:function(e,t,n){"use strict";var o=n("8bdb"),i=n("84d6"),r=n("1cb5");o({target:"Array",proto:!0},{fill:i}),r("fill")},1854:function(e,t,n){var o,i,r,a=n("bdbb").default;n("f7a5"),function(s,c,u){"object"===a(t)?e.exports=t=c(n("5e74"),n("f794")):(i=[n("5e74"),n("f794")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))}(0,(function(e){return e.mode.CTR=function(){var t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,o=n.blockSize,i=this._iv,r=this._counter;i&&(r=this._counter=i.slice(0),this._iv=void 0);var a=r.slice(0);n.encryptBlock(a,0),r[o-1]=r[o-1]+1|0;for(var s=0;s<o;s++)e[t+s]^=a[s]}});return t.Decryptor=n,t}(),e.mode.CTR}))},"18cd":function(e,t,n){"use strict";(function(e){n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("1ffa"),i={data:function(){return{showModal:{visible:!1}}},created:function(){var t=this;e.on("onShowModal",(function(e,n){t.showModal=e,t.onModalCloseCallback=n})),e.on("onHidePopup",(function(e){t.showModal.visible=!1}))},methods:{_onModalClose:function(e){this.showModal.visible=!1,(0,o.isFn)(this.onModalCloseCallback)&&this.onModalCloseCallback(e)}}};t.default=i}).call(this,n("ef66"))},"18e4":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,i.default)(e,"string");return"symbol"===(0,o.default)(t)?t:String(t)};var o=r(n("fcf3")),i=r(n("fab0"));function r(e){return e&&e.__esModule?e:{default:e}}},"18f7":function(e,t,n){"use strict";var o=n("03a0").charAt,i=n("9e70"),r=n("235c"),a=n("0cc2"),s=n("97ed"),c=r.set,u=r.getterFor("String Iterator");a(String,"String",(function(e){c(this,{type:"String Iterator",string:i(e),index:0})}),(function(){var e,t=u(this),n=t.string,i=t.index;return i>=n.length?s(void 0,!0):(e=o(n,i),t.index+=e.length,s(e,!1))}))},"18fe":function(e,t,n){"use strict";n.r(t);var o=n("703c"),i=n("0faf");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a=n("828b"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},1909:function(e,t,n){"use strict";var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.LOCALE_ZH_HANT=t.LOCALE_ZH_HANS=t.LOCALE_FR=t.LOCALE_ES=t.LOCALE_EN=t.I18N_JSON_DELIMITERS=void 0,t.defineI18nProperties=b,t.defineI18nProperty=T,t.formatI18n=C,t.i18nMixin=t.i18n=t.getLocale=void 0,t.initAppLocale=function(e,t,n){var o=e.observable({locale:n||_.getLocale()}),i=[];t.$watchLocale=function(e){i.push(e)},Object.defineProperty(t,"$locale",{get:function(){return o.locale},set:function(e){o.locale=e,i.forEach((function(t){return t(e)}))}})},t.initNavigationBarI18n=function(e){if(S())return b(e,[["titleText"],["searchInput","placeholder"],["buttons","text"]])},t.initPullToRefreshI18n=function(e){if(S()){return b(e,[["contentdown","caption"],["contentover","caption"],["contentrefresh","caption"]])}},t.initTabBarI18n=function(e){S()&&e.list&&e.list.forEach((function(e){T(e,["text"])}));return e},t.normalizeLocale=function(e,t){if(!e)return;if(e=e.trim().replace(/_/g,"-"),t&&t[e])return e;if(e=e.toLowerCase(),"chinese"===e)return"zh-Hans";if(0===e.indexOf("zh"))return e.indexOf("-hans")>-1?"zh-Hans":e.indexOf("-hant")>-1||function(e,t){return!!t.find((function(t){return-1!==e.indexOf(t)}))}(e,["-tw","-hk","-mo","-cht"])?"zh-Hant":"zh-Hans";var n=function(e,t){return t.find((function(t){return 0===e.indexOf(t)}))}(e,["en","fr","es"]);if(n)return n},t.t=t.setLocale=void 0,n("dc8a"),n("bf0f"),n("2797"),n("aa9c"),n("6a54"),n("8f71"),n("fd3c"),n("aa77"),n("5ef2"),n("5c47"),n("a1c1"),n("0c26");o(n("fcf3"));var i=o(n("39d8")),r=n("d3b4"),a=n("1ffa"),s=n("60bf"),c=o(n("ce9f")),u=o(n("9f52")),l=o(n("f4c6")),d=o(n("febb")),f=o(n("74ad"));t.LOCALE_ZH_HANS="zh-Hans";t.LOCALE_ZH_HANT="zh-Hant";t.LOCALE_EN="en";t.LOCALE_FR="fr";t.LOCALE_ES="es";var p,h,g={};Object.assign(g,(p={},(0,i.default)(p,"en",c.default),(0,i.default)(p,"es",u.default),(0,i.default)(p,"fr",l.default),(0,i.default)(p,"zh-Hans",d.default),(0,i.default)(p,"zh-Hant",f.default),p)),h=navigator.cookieEnabled&&window.localStorage&&localStorage[s.UNI_STORAGE_LOCALE]||__uniConfig.locale||navigator.language,function(){if(S()){var e=Object.keys(__uniConfig.locales);e.length&&e.forEach((function(e){var t=g[e],n=__uniConfig.locales[e];t?Object.assign(t,n):g[e]=n}))}}();var _=(0,r.initVueI18n)(h,g);t.i18n=_;var v=_.t;t.t=v;var m=_.mixin={beforeCreate:function(){var e=this,t=_.i18n.watchLocale((function(){e.$forceUpdate()}));this.$once("hook:beforeDestroy",(function(){t()}))},methods:{$$t:function(e,t){return v(e,t)}}};t.i18nMixin=m;var y=_.setLocale;t.setLocale=y;var M=_.getLocale;t.getLocale=M;var I=["%","%"];function C(e){return(0,r.isI18nStr)(e,I)?_.f(e,function(){var e=uni.getLocale(),t=__uniConfig.locales;return t[e]||t[__uniConfig.fallbackLocale]||t["en"]||{}}(),I):e}function b(e,t){return t.map((function(t){return T(e,t)}))}function T(e,t){var n=function e(t,n){if(1!==n.length){var o=n.shift();return e(t&&t[o],n)}if(t){var i=function(e){return(0,a.isStr)(e)&&(0,r.isI18nStr)(e,I)},s=n[0],c=[];if(Array.isArray(t)&&(c=t.filter((function(e){return i(e[s])}))).length)return c;var u=t[s];if(i(u))return t}}(e,t);if(!n)return!1;var o=t[t.length-1];if(Array.isArray(n))n.forEach((function(e){return T(e,[o])}));else{var i=n[o];Object.defineProperty(n,o,{get:function(){return C(i)},set:function(e){i=e}})}return!0}function S(){return"undefined"!==typeof __uniConfig&&__uniConfig.locales&&!!Object.keys(__uniConfig.locales).length}t.I18N_JSON_DELIMITERS=I},1954:function(e,t,n){"use strict";var o=n("85c1"),i=n("9f9e"),r=n("7ddb"),a=n("af9e"),s=n("37ad"),c=o.Int8Array,u=r.aTypedArray,l=r.exportTypedArrayMethod,d=[].toLocaleString,f=!!c&&a((function(){d.call(new c(1))})),p=a((function(){return[1,2].toLocaleString()!==new c([1,2]).toLocaleString()}))||!a((function(){c.prototype.toLocaleString.call([1,2])}));l("toLocaleString",(function(){return i(d,f?s(u(this)):u(this),s(arguments))}),p)},1959:function(e,t,n){"use strict";var o=n("508d"),i=n("d7b8"),r=n("f0b5"),a=n("f439"),s=n("a5c6"),c=n("7c26"),u=n("59f8");o({target:"Promise",stat:!0,forced:u},{all:function(e){var t=this,n=a.f(t),o=n.resolve,u=n.reject,l=s((function(){var n=r(t.resolve),a=[],s=0,l=1;c(e,(function(e){var r=s++,c=!1;l++,i(n,t,e).then((function(e){c||(c=!0,a[r]=e,--l||o(a))}),u)})),--l||o(a)}));return l.error&&u(l.value),n.promise}})},1980:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.getClipboardData=function(){var e=document.getElementById("#clipboard"),t=e?e.value:void 0;return t?{data:t,errMsg:"getClipboardData:ok"}:{errMsg:"getClipboardData:fail"}},t.setClipboardData=function(e){var t=e.data,n=document.getElementById("#clipboard");n&&n.remove();var o=document.createElement("textarea");o.id="#clipboard",o.style.position="fixed",o.style.top="-9999px",o.style.zIndex="-9999",document.body.appendChild(o),o.value=t,o.select(),o.setSelectionRange(0,o.value.length);var i=document.execCommand("Copy",!1,null);return o.blur(),i?{errMsg:"setClipboardData:ok"}:{errMsg:"setClipboardData:fail"}}},"198e":function(e,t,n){"use strict";var o=n("7ddb"),i=n("323c"),r=n("af9e"),a=n("37ad"),s=o.aTypedArray,c=o.exportTypedArrayMethod,u=r((function(){new Int8Array(1).slice()}));c("slice",(function(e,t){var n=a(s(this),e,t),o=i(this),r=0,c=n.length,u=new o(c);while(c>r)u[r]=n[r++];return u}),u)},"1aad":function(e,t,n){"use strict";var o=Math.ceil,i=Math.floor;e.exports=Math.trunc||function(e){var t=+e;return(t>0?i:o)(t)}},"1ad7":function(e,t,n){var o=n("7aa6");e.exports=!o((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},"1ae3":function(e,t,n){var o=n("fdca"),i=n("c2d7"),r=i.all;e.exports=i.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:o(e)||e===r}:function(e){return"object"==typeof e?null!==e:o(e)}},"1b07":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("2d9b"),i=n("e3e4"),r={requestComponentInfo:o.requestComponentInfo,operateVideoPlayer:i.operateVideoPlayer};t.default=r},"1b8e":function(e,t,n){var o=n("720d"),i=n("218d"),r=n("c646"),a=n("d459"),s=n("29d5"),c=s("iterator");e.exports=function(e){if(!r(e))return i(e,c)||i(e,"@@iterator")||a[o(e)]}},"1c06":function(e,t,n){"use strict";var o=n("474f");e.exports=function(e){return"object"==typeof e?null!==e:o(e)}},"1c16":function(e,t,n){"use strict";var o=n("3c7a"),i=RangeError;e.exports=function(e,t){var n=o(e);if(n%t)throw new i("Wrong offset");return n}},"1c85":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={}},"1cb5":function(e,t,n){"use strict";var o=n("8c08"),i=n("e37c"),r=n("d6b1").f,a=o("unscopables"),s=Array.prototype;void 0===s[a]&&r(s,a,{configurable:!0,value:i(null)}),e.exports=function(e){s[a][e]=!0}},"1cbc":function(e,t,n){"use strict";n.r(t);var o=n("fc40"),i=n("0103");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a=n("828b"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},"1cf1":function(e,t,n){"use strict";var o=n("7ddb").exportTypedArrayMethod,i=n("af9e"),r=n("85c1"),a=n("bb80"),s=r.Uint8Array,c=s&&s.prototype||{},u=[].toString,l=a([].join);i((function(){u.call({})}))&&(u=function(){return l(this)});var d=c.toString!==u;o("toString",u,d)},"1d13":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this.$createElement,t=this._self._c||e;return t("uni-cover-view",this._g({attrs:{"scroll-top":this.scrollTop}},this.$listeners),[t("div",{ref:"content",staticClass:"uni-cover-view"},[this._t("default")],2)])},i=[]},"1d16":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.disableScrollBounce=function(e){e.disable},t.initScrollBounce=function(){}},"1d161":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={album:{urls:function(){return[]},keyName:"",singleSize:180,multipleSize:70,space:6,singleMode:"scaleToFill",multipleMode:"aspectFill",maxCount:9,previewFullImage:!0,rowCount:3,showMore:!0}}},"1d18":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,i,r,a,s=[],c=!0,u=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(o=r.call(n)).done)&&(s.push(o.value),s.length!==t);c=!0);}catch(l){u=!0,i=l}finally{try{if(!c&&null!=n["return"]&&(a=n["return"](),Object(a)!==a))return}finally{if(u)throw i}}return s}},n("01a2"),n("e39c"),n("bf0f"),n("844d"),n("18f7"),n("de6c"),n("aa9c")},"1d25":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={tooltip:{text:"",copyText:"",size:14,color:"#606266",bgColor:"transparent",direction:"top",zIndex:10071,showCopy:!0,buttons:function(){return[]},overlay:!0,showToast:!0}}},"1d57":function(e,t,n){"use strict";var o=n("af9e");e.exports=!o((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},"1ded":function(e,t,n){"use strict";var o=n("ab4a"),i=n("71e9"),r=n("346b"),a=n("0b5a"),s=n("f660"),c=n("f9ed"),u=n("338c"),l=n("2ba7"),d=Object.getOwnPropertyDescriptor;t.f=o?d:function(e,t){if(e=s(e),t=c(t),l)try{return d(e,t)}catch(n){}if(u(e,t))return a(!i(r.f,e,t),e[t])}},"1e3f":function(e,t,n){"use strict";n.r(t);var o=n("872c"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},"1e4f":function(e,t,n){var o=n("29d5"),i=n("d459"),r=o("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[r]===e)}},"1e5d":function(e,t,n){var o=n("1501");e.exports=function(e){return o(e.length)}},"1ea2":function(e,t,n){"use strict";var o=n("af9e"),i=n("1c06"),r=n("ada5"),a=n("5d6e"),s=Object.isExtensible,c=o((function(){s(1)}));e.exports=c||a?function(e){return!!i(e)&&((!a||"ArrayBuffer"!==r(e))&&(!s||s(e)))}:s},"1eb8":function(e,t,n){"use strict";e.exports=function(e){return null===e||void 0===e}},"1efa":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={}},"1f18":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("64aa"),n("5ef2"),n("e966"),n("e838");n("1ffa");var i=o(n("f709"));function r(){}var a={name:"Keyboard",mixins:[i.default],props:{cursorSpacing:{type:[Number,String],default:0},showConfirmBar:{type:[Boolean,String],default:"auto"},adjustPosition:{type:[Boolean,String],default:!0},autoBlur:{type:[Boolean,String],default:!1}},computed:{isApple:function(){return 0===String(navigator.vendor).indexOf("Apple")}},directives:{keyboard:{inserted:function(e,t,n){n.context.initKeyboard(e)}}},methods:{initKeyboard:function(e){var t=this;e.addEventListener("focus",(function(){!0,clearTimeout(void 0),document.addEventListener("click",r,!1)}));e.addEventListener("blur",(function(){t.isApple&&e.blur(),!1,function(){document.removeEventListener("click",r,!1),t.isApple&&document.documentElement.scrollTo(document.documentElement.scrollLeft,document.documentElement.scrollTop)}()}))}}};t.default=a},"1f5e":function(e,t,n){"use strict";(function(e){n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.createMediaQueryObserver=function(e,t){e._isVue||(t=e,e=null);if(e)return new l(e,t);return new l((0,s.getCurrentPageVm)("createMediaQueryObserver"),t)},n("aa9c");var i=o(n("80b1")),r=o(n("efe5")),a=o(n("cd07")),s=n("a745"),c=n("ed8a"),u=(0,a.default)("requestMediaQueryObserver"),l=function(){function t(e,n){(0,i.default)(this,t),this.pageId=e.$page&&e.$page.id,this.component=e._$id||e,this.options=n}return(0,r.default)(t,[{key:"observe",value:function(t,n){"function"===typeof n&&(this.options=t,this.reqId=u.push(n),e.publishHandler("requestMediaQueryObserver",{reqId:this.reqId,component:this.component,options:this.options},(0,c.checkInWindows)(this.component)?this.component:this.pageId))}},{key:"disconnect",value:function(){e.publishHandler("destroyMediaQueryObserver",{reqId:this.reqId},(0,c.checkInWindows)(this.component)?this.component:this.pageId)}}]),t}()}).call(this,n("ef66"))},"1faa":function(e,t,n){var o=n("7aa6");e.exports=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},"1fc1":function(e,t,n){"use strict";var o=n("c435");e.exports=function(e){return o(e.length)}},"1ffa":function(e,t,n){"use strict";n("6a54"),n("bf0f"),n("2797"),n("dc8a"),Object.defineProperty(t,"__esModule",{value:!0});var o=n("b185");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=n("2fd0");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var r=n("eec9");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var a=n("c238");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var s=n("8854");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var c=n("061b");Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var u=n("77a6");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}))},2022:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={tabbarItem:{name:null,icon:"",badge:null,dot:!1,text:"",badgeStyle:"top: 6px;right:2px;"}}},"20f3":function(e,t,n){"use strict";var o=n("8bdb"),i=n("5145");o({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},"218d":function(e,t,n){var o=n("f0b5"),i=n("c646");e.exports=function(e,t){var n=e[t];return i(n)?void 0:o(n)}},"21b8":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("64aa"),n("5c47"),n("0506"),n("d4b5"),n("4100"),n("5ef2"),n("c223"),n("dd2b");var o=n("c47d"),i=n("1ffa"),r=n("1909"),a=!!i.supportsPassive&&{passive:!1},s={NONE:"none",STOP:"stop",VOLUME:"volume",PROGRESS:"progress"},c={name:"Video",filters:{time:function(e){e=e>0&&e<1/0?e:0;var t=Math.floor(e/3600),n=Math.floor(e%3600/60),o=Math.floor(e%3600%60);t=(t<10?"0":"")+t,n=(n<10?"0":"")+n,o=(o<10?"0":"")+o;var i=n+":"+o;return"00"!==t&&(i=t+":"+i),i}},mixins:[r.i18nMixin,o.subscriber,o.interact],props:{id:{type:String,default:""},src:{type:String,default:""},duration:{type:[Number,String],default:""},controls:{type:[Boolean,String],default:!0},danmuList:{type:Array,default:function(){return[]}},danmuBtn:{type:[Boolean,String],default:!1},enableDanmu:{type:[Boolean,String],default:!1},autoplay:{type:[Boolean,String],default:!1},loop:{type:[Boolean,String],default:!1},muted:{type:[Boolean,String],default:!1},objectFit:{type:String,default:"contain"},poster:{type:String,default:""},direction:{type:[String,Number],default:""},showProgress:{type:Boolean,default:!0},initialTime:{type:[String,Number],default:0},showFullscreenBtn:{type:[Boolean,String],default:!0},pageGesture:{type:[Boolean,String],default:!1},enableProgressGesture:{type:[Boolean,String],default:!0},showPlayBtn:{type:[Boolean,String],default:!0},showCenterPlayBtn:{type:[Boolean,String],default:!0}},data:function(){return{start:!1,playing:!1,currentTime:0,durationTime:0,progress:0,touching:!1,enableDanmuSync:Boolean(this.enableDanmu),controlsVisible:!0,fullscreen:!1,controlsTouching:!1,touchStartOrigin:{x:0,y:0},gestureType:s.NONE,currentTimeOld:0,currentTimeNew:0,volumeOld:null,volumeNew:null,buffered:0,isSafari:/^Apple/.test(navigator.vendor)}},computed:{centerPlayBtnShow:function(){return this.showCenterPlayBtn&&!this.start},controlsShow:function(){return!this.centerPlayBtnShow&&this.controls&&this.controlsVisible},autoHideContorls:function(){return this.controlsShow&&this.playing&&!this.controlsTouching},srcSync:function(){return this.$getRealPath(this.src)}},watch:{enableDanmuSync:function(e){this.$emit("update:enableDanmu",e)},autoHideContorls:function(e){e?this.autoHideStart():this.autoHideEnd()},srcSync:function(e){this.playing=!1,this.currentTime=0},currentTime:function(){this.updateProgress()},duration:function(){this.updateProgress()},buffered:function(e){0!==e&&this.$trigger("progress",{},{buffered:e})}},created:function(){this.otherData={danmuList:[],danmuIndex:{time:0,index:-1},hideTiming:null};var e=this.otherData.danmuList=JSON.parse(JSON.stringify(this.danmuList||[]));e.sort((function(e,t){return(e.time||0)-(t.time||0)}))},mounted:function(){var e,t,n,o=this,i=this,r=!0,s=this.$refs.ball;function c(o){var a=o.targetTouches[0],s=a.pageX,c=a.pageY;if(r&&Math.abs(s-e)<Math.abs(c-t))u();else{r=!1;var l=i.$refs.progress.offsetWidth,d=n+(s-e)/l*100;d<0?d=0:d>100&&(d=100),i.progress=d,o.preventDefault(),o.stopPropagation()}}function u(e){i.controlsTouching=!1,i.touching&&(s.removeEventListener("touchmove",c,a),r||(e.preventDefault(),e.stopPropagation(),i.seek(i.$refs.video.duration*i.progress/100)),i.touching=!1)}s.addEventListener("touchstart",(function(i){o.controlsTouching=!0;var u=i.targetTouches[0];e=u.pageX,t=u.pageY,n=o.progress,r=!0,o.touching=!0,s.addEventListener("touchmove",c,a)})),s.addEventListener("touchend",u),s.addEventListener("touchcancel",u)},beforeDestroy:function(){this.triggerFullscreen(!1),clearTimeout(this.otherData.hideTiming)},methods:{_handleSubscribe:function(e){var t,n=e.type,o=e.data,i=void 0===o?{}:o;switch(n){case"seek":t=i.position;break;case"sendDanmu":t=i;break;case"playbackRate":t=i.rate;break}["play","pause","seek","sendDanmu","playbackRate","requestFullScreen","exitFullScreen"].indexOf(n)>=0&&this[n](t)},trigger:function(){this.playing?this.$refs.video.pause():this.$refs.video.play()},play:function(){this.start=!0,this.$refs.video.play()},pause:function(){this.$refs.video.pause()},seek:function(e){e=Number(e),"number"!==typeof e||isNaN(e)||(this.$refs.video.currentTime=e)},clickProgress:function(e){var t=this.$refs.progress,n=e.target,o=e.offsetX;while(n!==t)o+=n.offsetLeft,n=n.parentNode;var i=t.offsetWidth,r=0;o>=0&&o<=i&&(r=o/i,this.seek(this.$refs.video.duration*r))},triggerDanmu:function(){this.enableDanmuSync=!this.enableDanmuSync},playDanmu:function(e){var t=document.createElement("p");t.className="uni-video-danmu-item",t.innerText=e.text;var n="bottom: ".concat(100*Math.random(),"%;color: ").concat(e.color,";");t.setAttribute("style",n),this.$refs.danmu.appendChild(t),setTimeout((function(){n+="left: 0;-webkit-transform: translateX(-100%);transform: translateX(-100%);",t.setAttribute("style",n),setTimeout((function(){t.remove()}),4e3)}),17)},sendDanmu:function(e){var t=this.otherData;t.danmuList.splice(t.danmuIndex.index+1,0,{text:String(e.text),color:e.color,time:this.$refs.video.currentTime||0})},playbackRate:function(e){this.$refs.video.playbackRate=e},triggerFullscreen:function(e){var t,n=this.$refs.container,o=this.$refs.video;e?!document.fullscreenEnabled&&!document.webkitFullscreenEnabled||this.isSafari&&!this.userInteract?o.webkitEnterFullScreen?o.webkitEnterFullScreen():(t=!0,n.remove(),n.classList.add("uni-video-type-fullscreen"),document.body.appendChild(n)):n[document.fullscreenEnabled?"requestFullscreen":"webkitRequestFullscreen"]():document.fullscreenEnabled||document.webkitFullscreenEnabled?document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen():o.webkitExitFullScreen?o.webkitExitFullScreen():(t=!0,n.remove(),n.classList.remove("uni-video-type-fullscreen"),this.$el.appendChild(n)),t&&this.emitFullscreenChange(e)},onFullscreenChange:function(e,t){t&&document.fullscreenEnabled||this.emitFullscreenChange(!(!document.fullscreenElement&&!document.webkitFullscreenElement))},emitFullscreenChange:function(e){this.fullscreen=e,this.$trigger("fullscreenchange",{},{fullScreen:e,direction:"vertical"})},requestFullScreen:function(){this.triggerFullscreen(!0)},exitFullScreen:function(){this.triggerFullscreen(!1)},onDurationChange:function(e){var t=e.target;this.durationTime=t.duration},onLoadedMetadata:function(e){var t=Number(this.initialTime)||0,n=e.target;t>0&&(n.currentTime=t),this.$trigger("loadedmetadata",e,{width:n.videoWidth,height:n.videoHeight,duration:n.duration}),this.onProgress(e)},onProgress:function(e){var t=e.target,n=t.buffered;n.length&&(this.buffered=n.end(n.length-1)/t.duration*100)},onWaiting:function(e){this.$trigger("waiting",e,{})},onVideoError:function(e){this.playing=!1,this.$trigger("error",e,{})},onPlay:function(e){this.start=!0,this.playing=!0,this.$trigger("play",e,{})},onPause:function(e){this.playing=!1,this.$trigger("pause",e,{})},onEnded:function(e){this.playing=!1,this.$trigger("ended",e,{})},onTimeUpdate:function(e){var t=e.target,n=this.otherData,o=this.currentTime=t.currentTime,i=n.danmuIndex,r={time:o,index:i.index},a=n.danmuList;if(o>i.time)for(var s=i.index+1;s<a.length;s++){var c=a[s];if(!(o>=(c.time||0)))break;r.index=s,this.playing&&this.enableDanmuSync&&this.playDanmu(c)}else if(o<i.time)for(var u=i.index-1;u>-1;u--){var l=a[u];if(!(o<=(l.time||0)))break;r.index=u-1}n.danmuIndex=r,this.$trigger("timeupdate",e,{currentTime:o,duration:t.duration})},triggerControls:function(){this.controlsVisible=!this.controlsVisible},touchstart:function(e){var t=e.targetTouches[0];this.touchStartOrigin={x:t.pageX,y:t.pageY},this.gestureType=s.NONE,this.volumeOld=null,this.currentTimeOld=this.currentTimeNew=0},touchmove:function(e){function t(){e.stopPropagation(),e.preventDefault()}this.fullscreen&&t();var n=this.gestureType;if(n!==s.STOP){var o=e.targetTouches[0],i=o.pageX,r=o.pageY,a=this.touchStartOrigin;if(n===s.PROGRESS?this.changeProgress(i-a.x):n===s.VOLUME&&this.changeVolume(r-a.y),n===s.NONE)if(Math.abs(i-a.x)>Math.abs(r-a.y)){if(!this.enableProgressGesture)return void(this.gestureType=s.STOP);this.gestureType=s.PROGRESS,this.currentTimeOld=this.currentTimeNew=this.$refs.video.currentTime,this.fullscreen||t()}else{if(!this.pageGesture)return void(this.gestureType=s.STOP);this.gestureType=s.VOLUME,this.volumeOld=this.$refs.video.volume,this.fullscreen||t()}}},touchend:function(e){this.gestureType!==s.NONE&&this.gestureType!==s.STOP&&(e.stopPropagation(),e.preventDefault()),this.gestureType===s.PROGRESS&&this.currentTimeOld!==this.currentTimeNew&&(this.$refs.video.currentTime=this.currentTimeNew),this.gestureType=s.NONE},changeProgress:function(e){var t=this.$refs.video.duration,n=e/600*t+this.currentTimeOld;n<0?n=0:n>t&&(n=t),this.currentTimeNew=n},changeVolume:function(e){var t,n=this.volumeOld;"number"===typeof n&&(t=n-e/200,t<0?t=0:t>1&&(t=1),this.$refs.video.volume=t,this.volumeNew=t)},autoHideStart:function(){var e=this;this.otherData.hideTiming=setTimeout((function(){e.controlsVisible=!1}),3e3)},autoHideEnd:function(){var e=this.otherData;e.hideTiming&&(clearTimeout(e.hideTiming),e.hideTiming=null)},updateProgress:function(){this.touching||(this.progress=this.currentTime/this.durationTime*100)}}};t.default=c},"223c":function(e,t,n){"use strict";var o=n("8bdb"),i=n("85c1"),r=n("71e9"),a=n("bb80"),s=n("a734"),c=n("ab4a"),u=n("af71"),l=n("af9e"),d=n("338c"),f=n("1297"),p=n("e7e3"),h=n("f660"),g=n("f9ed"),_=n("9e70"),v=n("0b5a"),m=n("e37c"),y=n("ff4f"),M=n("80bb"),I=n("8449"),C=n("7d3c"),b=n("1ded"),T=n("d6b1"),S=n("a3fb"),E=n("346b"),k=n("81a9"),D=n("e4ca"),A=n("8b3b"),L=n("b223"),O=n("11bf"),R=n("d7b4"),w=n("8c08"),N=n("9917"),P=n("f259"),G=n("effb"),U=n("181d"),x=n("235c"),F=n("4d16").forEach,q=L("hidden"),B=x.set,V=x.getterFor("Symbol"),H=Object["prototype"],j=i.Symbol,K=j&&j["prototype"],W=i.RangeError,Y=i.TypeError,z=i.QObject,$=b.f,X=T.f,J=I.f,Q=E.f,Z=a([].push),ee=A("symbols"),te=A("op-symbols"),ne=A("wks"),oe=!z||!z["prototype"]||!z["prototype"].findChild,ie=function(e,t,n){var o=$(H,t);o&&delete H[t],X(e,t,n),o&&e!==H&&X(H,t,o)},re=c&&l((function(){return 7!==m(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a}))?ie:X,ae=function(e,t){var n=ee[e]=m(K);return B(n,{type:"Symbol",tag:e,description:t}),c||(n.description=t),n},se=function(e,t,n){e===H&&se(te,t,n),p(e);var o=g(t);return p(n),d(ee,o)?(n.enumerable?(d(e,q)&&e[q][o]&&(e[q][o]=!1),n=m(n,{enumerable:v(0,!1)})):(d(e,q)||X(e,q,v(1,m(null))),e[q][o]=!0),re(e,o,n)):X(e,o,n)},ce=function(e,t){p(e);var n=h(t),o=y(n).concat(fe(n));return F(o,(function(t){c&&!r(ue,n,t)||se(e,t,n[t])})),e},ue=function(e){var t=g(e),n=r(Q,this,t);return!(this===H&&d(ee,t)&&!d(te,t))&&(!(n||!d(this,t)||!d(ee,t)||d(this,q)&&this[q][t])||n)},le=function(e,t){var n=h(e),o=g(t);if(n!==H||!d(ee,o)||d(te,o)){var i=$(n,o);return!i||!d(ee,o)||d(n,q)&&n[q][o]||(i.enumerable=!0),i}},de=function(e){var t=J(h(e)),n=[];return F(t,(function(e){d(ee,e)||d(O,e)||Z(n,e)})),n},fe=function(e){var t=e===H,n=J(t?te:h(e)),o=[];return F(n,(function(e){!d(ee,e)||t&&!d(H,e)||Z(o,ee[e])})),o};u||(j=function(){if(f(K,this))throw new Y("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?_(arguments[0]):void 0,t=R(e),n=function(e){var o=void 0===this?i:this;o===H&&r(n,te,e),d(o,q)&&d(o[q],t)&&(o[q][t]=!1);var a=v(1,e);try{re(o,t,a)}catch(s){if(!(s instanceof W))throw s;ie(o,t,a)}};return c&&oe&&re(H,t,{configurable:!0,set:n}),ae(t,e)},K=j["prototype"],k(K,"toString",(function(){return V(this).tag})),k(j,"withoutSetter",(function(e){return ae(R(e),e)})),E.f=ue,T.f=se,S.f=ce,b.f=le,M.f=I.f=de,C.f=fe,N.f=function(e){return ae(w(e),e)},c&&(D(K,"description",{configurable:!0,get:function(){return V(this).description}}),s||k(H,"propertyIsEnumerable",ue,{unsafe:!0}))),o({global:!0,constructor:!0,wrap:!0,forced:!u,sham:!u},{Symbol:j}),F(y(ne),(function(e){P(e)})),o({target:"Symbol",stat:!0,forced:!u},{useSetter:function(){oe=!0},useSimple:function(){oe=!1}}),o({target:"Object",stat:!0,forced:!u,sham:!c},{create:function(e,t){return void 0===t?m(e):ce(m(e),t)},defineProperty:se,defineProperties:ce,getOwnPropertyDescriptor:le}),o({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:de}),G(),U(j,"Symbol"),O[q]=!0},"225c":function(e,t,n){"use strict";(function(e){n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.loadFontFace=function(t){var n=t.options,o=t.callbackId,r=n.family,a=n.source,s=n.desc,c=void 0===s?{}:s;a=a.startsWith('url("')||a.startsWith("url('")?"url('".concat((0,i.default)(a.substring(5,a.length-2)),"')"):a.startsWith("url(")?"url('".concat((0,i.default)(a.substring(4,a.length-1)),"')"):(0,i.default)(a);var u=document.fonts;if(u){var l=new FontFace(r,a,c);l.load().then((function(){u.add(l),e.publishHandler("onLoadFontFaceCallback",{callbackId:o,data:{errMsg:"loadFontFace:ok"}})})).catch((function(t){e.publishHandler("onLoadFontFaceCallback",{callbackId:o,data:{errMsg:"loadFontFace:fail ".concat(t)}})}))}else{var d=document.createElement("style");d.innerText='@font-face{font-family:"'.concat(r,'";src:').concat(a,";font-style:").concat(c.style,";font-weight:").concat(c.weight,";font-stretch:").concat(c.stretch,";unicode-range:").concat(c.unicodeRange,";font-variant:").concat(c.variant,";font-feature-settings:").concat(c.featureSettings,";}"),document.head.appendChild(d),e.publishHandler("onLoadFontFaceCallback",{callbackId:o,data:{errMsg:"loadFontFace:ok"}})}},n("9db6"),n("c223");var i=o(n("ccb8"))}).call(this,n("b8be"))},2276:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={alert:{title:"",type:"warning",description:"",closable:!1,showIcon:!1,effect:"light",center:!1,fontSize:14}}},"22b6":function(e,t,n){"use strict";var o=n("8bdb"),i=n("ea07").values;o({target:"Object",stat:!0},{values:function(e){return i(e)}})},2327:function(e,t,n){"use strict";(function(e){n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){a=t,a.$vm=t,a.globalData=a.$options.globalData||{},(0,i.initAppLocale)(e,a),(0,r.default)(a,n)},t.getApp=s,t.getCurrentPages=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=[],i=s();if(!i)return n&&e.error("app is not ready"),[];var r=i.$children[0];if(r&&r.$children.length){var a=r.$children.find((function(e){return"TabBar"===e.$options.name})),c=r.$children.find((function(e){return"Layout"===e.$options.name}));c&&(r=c),r.$children.forEach((function(e){if(a!==e&&e.$children.length&&"Page"===e.$children[0].$options.name&&e.$children[0].$slots.page){var n=e.$children[0].$children.find((function(e){return"PageBody"===e.$options.name})),r=n&&n.$children.find((function(e){return!!e.$page}));if(r){var s=!0;!t&&a&&r.$page&&r.$page.meta.isTabBar&&(i.$route.meta&&i.$route.meta.isTabBar?i.$route.path!==r.$page.path&&(s=!1):a.__path__!==r.$page.path&&(s=!1)),s&&o.push(r)}}}))}var u=o.length;if(u>1){var l=o[u-1];l.$page.path!==i.$route.path&&o.splice(u-1,1)}return o},n("aa77"),n("bf0f"),n("2797"),n("aa9c"),n("dd2b");var i=n("1909"),r=o(n("c182")),a=!1;function s(){return a}}).call(this,n("ba7c")["default"])},"235c":function(e,t,n){"use strict";var o,i,r,a=n("a20b"),s=n("85c1"),c=n("1c06"),u=n("6aca"),l=n("338c"),d=n("9b55"),f=n("b223"),p=n("11bf"),h=s.TypeError,g=s.WeakMap;if(a||d.state){var _=d.state||(d.state=new g);_.get=_.get,_.has=_.has,_.set=_.set,o=function(e,t){if(_.has(e))throw new h("Object already initialized");return t.facade=e,_.set(e,t),t},i=function(e){return _.get(e)||{}},r=function(e){return _.has(e)}}else{var v=f("state");p[v]=!0,o=function(e,t){if(l(e,v))throw new h("Object already initialized");return t.facade=e,u(e,v,t),t},i=function(e){return l(e,v)?e[v]:{}},r=function(e){return l(e,v)}}e.exports={set:o,get:i,has:r,enforce:function(e){return r(e)?i(e):o(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=i(t)).type!==e)throw new h("Incompatible receiver, "+e+" required");return n}}}},2378:function(e,t,n){"use strict";var o=n("7ddb"),i=n("4d16").find,r=o.aTypedArray,a=o.exportTypedArrayMethod;a("find",(function(e){return i(r(this),e,arguments.length>1?arguments[1]:void 0)}))},2388:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("1909"),i={name:"AsyncError",mixins:[o.i18nMixin],methods:{_onClick:function(){window.location.reload()}}};t.default=i},"23f4":function(e,t,n){"use strict";var o=n("ab4a"),i=n("85c1"),r=n("bb80"),a=n("8466"),s=n("dcda"),c=n("6aca"),u=n("e37c"),l=n("80bb").f,d=n("1297"),f=n("e629"),p=n("9e70"),h=n("52ac"),g=n("edb7"),_=n("e157"),v=n("81a9"),m=n("af9e"),y=n("338c"),M=n("235c").enforce,I=n("437f"),C=n("8c08"),b=n("b0a8"),T=n("cca9"),S=C("match"),E=i.RegExp,k=E.prototype,D=i.SyntaxError,A=r(k.exec),L=r("".charAt),O=r("".replace),R=r("".indexOf),w=r("".slice),N=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,P=/a/g,G=/a/g,U=new E(P)!==P,x=g.MISSED_STICKY,F=g.UNSUPPORTED_Y,q=o&&(!U||x||b||T||m((function(){return G[S]=!1,E(P)!==P||E(G)===G||"/a/i"!==String(E(P,"i"))})));if(a("RegExp",q)){for(var B=function(e,t){var n,o,i,r,a,l,g=d(k,this),_=f(e),v=void 0===t,m=[],I=e;if(!g&&_&&v&&e.constructor===B)return e;if((_||d(k,e))&&(e=e.source,v&&(t=h(I))),e=void 0===e?"":p(e),t=void 0===t?"":p(t),I=e,b&&"dotAll"in P&&(o=!!t&&R(t,"s")>-1,o&&(t=O(t,/s/g,""))),n=t,x&&"sticky"in P&&(i=!!t&&R(t,"y")>-1,i&&F&&(t=O(t,/y/g,""))),T&&(r=function(e){for(var t,n=e.length,o=0,i="",r=[],a=u(null),s=!1,c=!1,l=0,d="";o<=n;o++){if(t=L(e,o),"\\"===t)t+=L(e,++o);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:A(N,w(e,o+1))&&(o+=2,c=!0),i+=t,l++;continue;case">"===t&&c:if(""===d||y(a,d))throw new D("Invalid capture group name");a[d]=!0,r[r.length]=[d,l],c=!1,d="";continue}c?d+=t:i+=t}return[i,r]}(e),e=r[0],m=r[1]),a=s(E(e,t),g?this:k,B),(o||i||m.length)&&(l=M(a),o&&(l.dotAll=!0,l.raw=B(function(e){for(var t,n=e.length,o=0,i="",r=!1;o<=n;o++)t=L(e,o),"\\"!==t?r||"."!==t?("["===t?r=!0:"]"===t&&(r=!1),i+=t):i+="[\\s\\S]":i+=t+L(e,++o);return i}(e),n)),i&&(l.sticky=!0),m.length&&(l.groups=m)),e!==I)try{c(a,"source",""===I?"(?:)":I)}catch(C){}return a},V=l(E),H=0;V.length>H;)_(B,E,V[H++]);k.constructor=B,B.prototype=k,v(i,"RegExp",B,{constructor:!0})}I("RegExp")},"241b":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={primary:"#3c9cff",info:"#909399",default:"#909399",warning:"#f9ae3d",error:"#f56c6c",success:"#5ac725",mainColor:"#303133",contentColor:"#606266",tipsColor:"#909399",lightColor:"#c0c4cc",borderColor:"#e4e7ed"};t.default=o},2425:function(e,t,n){"use strict";n("e7d8")},2468:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.behaviors.forEach((function(n){var o=a[n];o&&o.init(e,t)}))},n("bf0f"),n("2797");var i=o(n("39d8")),r=o(n("3b66")),a=(0,i.default)({},r.default.name,r.default)},"247d":function(e,t,n){"use strict";var o=n("6a50");o("Uint16",(function(e){return function(t,n,o){return e(this,t,n,o)}}))},2634:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
t.default=function(){return e};var e={},n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(L){l=function(e,t,n){return e[t]=n}}function d(e,t,n,o){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),s=new k(o||[]);return r(a,"_invoke",{value:b(e,n,s)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(L){return{type:"throw",arg:L}}}e.wrap=d;var p={};function h(){}function g(){}function _(){}var v={};l(v,s,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(D([])));y&&y!==n&&i.call(y,s)&&(v=y);var M=_.prototype=h.prototype=Object.create(v);function I(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){var n;r(this,"_invoke",{value:function(r,a){function s(){return new t((function(n,s){(function n(r,a,s,c){var u=f(e[r],e,a);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==(0,o.default)(d)&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,c)}),(function(e){n("throw",e,s,c)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,c)}))}c(u.arg)})(r,a,n,s)}))}return n=n?n.then(s,s):s()}})}function b(e,t,n){var o="suspendedStart";return function(i,r){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===i)throw r;return A()}for(n.method=i,n.arg=r;;){var a=n.delegate;if(a){var s=T(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var c=f(e,t,n);if("normal"===c.type){if(o=n.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o="completed",n.method="throw",n.arg=c.arg)}}}function T(e,t){var n=t.method,o=e.iterator[n];if(void 0===o)return t.delegate=null,"throw"===n&&e.iterator["return"]&&(t.method="return",t.arg=void 0,T(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=f(o,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,p;var r=i.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function D(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return g.prototype=_,r(M,"constructor",{value:_,configurable:!0}),r(_,"constructor",{value:g,configurable:!0}),g.displayName=l(_,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,l(e,u,"GeneratorFunction")),e.prototype=Object.create(M),e},e.awrap=function(e){return{__await:e}},I(C.prototype),l(C.prototype,c,(function(){return this})),e.AsyncIterator=C,e.async=function(t,n,o,i,r){void 0===r&&(r=Promise);var a=new C(d(t,n,o,i),r);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},I(M),l(M,u,"Generator"),l(M,s,(function(){return this})),l(M,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var o in t)n.push(o);return n.reverse(),function e(){for(;n.length;){var o=n.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},e.values=D,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,o){return a.type="throw",a.arg=e,t.next=n,o&&(t.method="next",t.arg=void 0),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],a=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var s=i.call(r,"catchLoc"),c=i.call(r,"finallyLoc");if(s&&c){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:D(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e},n("6a54"),n("01a2"),n("e39c"),n("bf0f"),n("844d"),n("18f7"),n("de6c"),n("3872e"),n("4e9b"),n("114e"),n("c240"),n("926e"),n("7a76"),n("c9b5"),n("aa9c"),n("2797"),n("8a8d"),n("dc69"),n("f7a5");var o=function(e){return e&&e.__esModule?e:{default:e}}(n("fcf3"))},"266a":function(e,t,n){"use strict";var o=n("af9e"),i=n("8c08"),r=n("ab4a"),a=n("a734"),s=i("iterator");e.exports=!o((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n=new URLSearchParams("a=1&a=2&b=3"),o="";return e.pathname="c%20d",t.forEach((function(e,n){t["delete"]("b"),o+=n+e})),n["delete"]("a",2),n["delete"]("b",void 0),a&&(!e.toJSON||!n.has("a",1)||n.has("a",2)||!n.has("a",void 0)||n.has("b"))||!t.size&&(a||!r)||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[s]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==o||"x"!==new URL("http://x",void 0).host}))},2772:function(e,t,n){var o,i,r,a=n("bdbb").default;n("f7a5"),function(s,c,u){"object"===a(t)?e.exports=t=c(n("5e74"),n("f794")):(i=[n("5e74"),n("f794")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))}(0,(function(e){return e.mode.CFB=function(){var t=e.lib.BlockCipherMode.extend();function n(e,t,n,o){var i,r=this._iv;r?(i=r.slice(0),this._iv=void 0):i=this._prevBlock,o.encryptBlock(i,0);for(var a=0;a<n;a++)e[t+a]^=i[a]}return t.Encryptor=t.extend({processBlock:function(e,t){var o=this._cipher,i=o.blockSize;n.call(this,e,t,i,o),this._prevBlock=e.slice(t,t+i)}}),t.Decryptor=t.extend({processBlock:function(e,t){var o=this._cipher,i=o.blockSize,r=e.slice(t,t+i);n.call(this,e,t,i,o),this._prevBlock=r}}),t}(),e.mode.CFB}))},2779:function(e,t,n){"use strict";var o=n("508d"),i=n("c86b"),r=n("3a4b"),a=n("3c5d"),s=n("83b3").CONSTRUCTOR,c=n("7478"),u=i("Promise"),l=r&&!s;o({target:"Promise",stat:!0,forced:r||s},{resolve:function(e){return c(l&&this===u?a:this,e)}})},2797:function(e,t,n){"use strict";var o=n("85c1"),i=n("3de7"),r=n("fb6b"),a=n("f3f2"),s=n("6aca"),c=function(e){if(e&&e.forEach!==a)try{s(e,"forEach",a)}catch(t){e.forEach=a}};for(var u in i)i[u]&&c(o[u]&&o[u].prototype);c(r)},"27cc":function(e,t,n){var o=n("fdca"),i=n("415b"),r=n("472b"),a=n("a030");e.exports=function(e,t,n,s){s||(s={});var c=s.enumerable,u=void 0!==s.name?s.name:t;if(o(n)&&r(n,u,s),s.global)c?e[t]=n:a(t,n);else{try{s.unsafe?e[t]&&(c=!0):delete e[t]}catch(l){}c?e[t]=n:i.f(e,t,{value:n,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return e}},"28eb":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("9b1b"));n("64aa"),n("aa9c"),n("5c47"),n("0506"),n("a1c1"),n("e838"),n("5ef2"),n("bf0f"),n("2797");var r=o(n("8dac")),a=n("1ffa"),s={name:"Swiper",mixins:[r.default],props:{indicatorDots:{type:[Boolean,String],default:!1},vertical:{type:[Boolean,String],default:!1},autoplay:{type:[Boolean,String],default:!1},circular:{type:[Boolean,String],default:!1},interval:{type:[Number,String],default:5e3},duration:{type:[Number,String],default:500},current:{type:[Number,String],default:0},indicatorColor:{type:String,default:""},indicatorActiveColor:{type:String,default:""},previousMargin:{type:String,default:""},nextMargin:{type:String,default:""},currentItemId:{type:String,default:""},skipHiddenItemLayout:{type:[Boolean,String],default:!1},displayMultipleItems:{type:[Number,String],default:1},disableTouch:{type:[Boolean,String],default:!1},navigation:{type:[Boolean,String],default:!1},navigationColor:{type:String,default:"#fff"},navigationActiveColor:{type:String,default:"rgba(53, 53, 53, 0.6)"}},data:function(){return{currentSync:Math.round(this.current)||0,currentItemIdSync:this.currentItemId||"",userTracking:!1,currentChangeSource:"",items:[],isNavigationAuto:!1,hideNavigation:!1,prevDisabled:!1,nextDisabled:!1}},computed:{intervalNumber:function(){var e=Number(this.interval);return isNaN(e)?5e3:e},durationNumber:function(){var e=Number(this.duration);return isNaN(e)?500:e},displayMultipleItemsNumber:function(){var e=Math.round(this.displayMultipleItems);return isNaN(e)?1:e},slidesStyle:function(){var e={};return(this.nextMargin||this.previousMargin)&&(e=this.vertical?{left:0,right:0,top:this._upx2px(this.previousMargin),bottom:this._upx2px(this.nextMargin)}:{top:0,bottom:0,left:this._upx2px(this.previousMargin),right:this._upx2px(this.nextMargin)}),e},slideFrameStyle:function(){var e=Math.abs(100/this.displayMultipleItemsNumber)+"%";return{width:this.vertical?"100%":e,height:this.vertical?e:"100%"}},swiperEnabled:function(){return this.items.length>this.displayMultipleItemsNumber},circularEnabled:function(){return this.circular&&this.swiperEnabled}},watch:{vertical:function(){this._resetLayout()},circular:function(){this._resetLayout()},intervalNumber:function(e){this._timer&&(this._cancelSchedule(),this._scheduleAutoplay())},current:function(e){this._currentCheck()},currentSync:function(e,t){this._currentChanged(e,t),this.$emit("update:current",e),this._setNavigationState()},currentItemId:function(e){this._currentCheck()},currentItemIdSync:function(e){this.$emit("update:currentItemId",e)},displayMultipleItemsNumber:function(){this._resetLayout()},navigation:{immediate:!0,handler:function(e){this.isNavigationAuto="auto"===e,this.hideNavigation=!0!==e||this.isNavigationAuto,this._navigationSwiperAddMouseEvent()}},items:function(){this._setNavigationState()},swiperEnabled:function(e){e||(this.prevDisabled=!0,this.nextDisabled=!0,this.isNavigationAuto&&(this.hideNavigation=!0))}},created:function(){this._invalid=!0,this._viewportPosition=0,this._viewportMoveRatio=1,this._animating=null,this._requestedAnimation=!1,this._userDirectionChecked=!1,this._contentTrackViewport=0,this._contentTrackSpeed=0,this._contentTrackT=0},mounted:function(){var e=this;this._currentCheck(),this.touchtrack(this.$refs.slidesWrapper,"_handleContentTrack",!0),this._resetLayout(),this.$watch((function(){return e.autoplay&&!e.userTracking}),this._inintAutoplay),this._inintAutoplay(this.autoplay&&!this.userTracking),this.$watch("items.length",this._resetLayout),this._navigationSwiperAddMouseEvent()},beforeDestroy:function(){this._cancelSchedule(),cancelAnimationFrame(this._animationFrame)},methods:{_inintAutoplay:function(e){e?this._scheduleAutoplay():this._cancelSchedule()},_currentCheck:function(){var e=-1;if(this.currentItemId)for(var t=0,n=this.items;t<n.length;t++){var o=n[t].componentInstance;if(o&&o.itemId===this.currentItemId){e=t;break}}e<0&&(e=Math.round(this.current)||0),e=e<0?0:e,this.currentSync!==e&&(this.currentChangeSource="",this.currentSync=e)},_itemReady:function(e,t){e.componentInstance&&e.componentInstance._isMounted?t():(e._callbacks=e._callbacks||[],e._callbacks.push(t))},_currentChanged:function(e,t){var n=this,o=this.currentChangeSource;if(this.currentChangeSource="",!o){var i=this.items.length;this._animateViewport(e,"",this.circularEnabled&&t+(i-e)%i>i/2?1:0)}var r=this.items[e];r&&this._itemReady(r,(function(){var e=n.currentItemIdSync=r.componentInstance.itemId||"";n.$trigger("change",{},{current:n.currentSync,currentItemId:e,source:o})}))},_scheduleAutoplay:function(){var e=this;this._cancelSchedule(),!this._isMounted||this._invalid||this.items.length<=this.displayMultipleItemsNumber||(this._timer=setTimeout((function t(){e._timer=null,e.currentChangeSource="autoplay",e.circularEnabled?e.currentSync=e._normalizeCurrentValue(e.currentSync+1):e.currentSync=e.currentSync+e.displayMultipleItemsNumber<e.items.length?e.currentSync+1:0,e._animateViewport(e.currentSync,"autoplay",e.circularEnabled?1:0),e._timer=setTimeout(t,e.intervalNumber)}),this.intervalNumber))},_cancelSchedule:function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},_normalizeCurrentValue:function(e){var t=this.items.length;if(!t)return-1;var n=(Math.round(e)%t+t)%t;if(this.circularEnabled){if(t<=this.displayMultipleItemsNumber)return 0}else if(n>t-this.displayMultipleItemsNumber)return t-this.displayMultipleItemsNumber;return n},_upx2px:function(e){return/\d+[ur]px$/i.test(e)&&e.replace(/\d+[ur]px$/i,(function(e){return"".concat(uni.upx2px(parseFloat(e)),"px")})),e||""},_resetLayout:function(){if(this._isMounted){this._cancelSchedule(),this._endViewportAnimation();for(var e=this.items,t=0;t<e.length;t++)this._updateItemPos(t,t);if(this._viewportMoveRatio=1,1===this.displayMultipleItemsNumber&&e.length){var n=e[0].componentInstance.$el.getBoundingClientRect(),o=this.$refs.slideFrame.getBoundingClientRect();this._viewportMoveRatio=n.width/o.width,this._viewportMoveRatio>0&&this._viewportMoveRatio<1||(this._viewportMoveRatio=1)}var i=this._viewportPosition;this._viewportPosition=-2;var r=this.currentSync;r>=0?(this._invalid=!1,this.userTracking?(this._updateViewport(i+r-this._contentTrackViewport),this._contentTrackViewport=r):(this._updateViewport(r),this.autoplay&&this._scheduleAutoplay())):(this._invalid=!0,this._updateViewport(-this.displayMultipleItemsNumber-1))}},_checkCircularLayout:function(e){if(!this._invalid)for(var t=this.items,n=t.length,o=e+this.displayMultipleItemsNumber,i=0;i<n;i++){var r=t[i],a=r._position,s=Math.floor(e/n)*n+i,c=s+n,u=s-n,l=Math.max(e-(s+1),s-o,0),d=Math.max(e-(c+1),c-o,0),f=Math.max(e-(u+1),u-o,0),p=Math.min(l,d,f),h=[s,c,u][[l,d,f].indexOf(p)];a!==h&&this._updateItemPos(i,h)}},_updateItemPos:function(e,t){var n=this.vertical?"0":100*t+"%",o=this.vertical?100*t+"%":"0",i="translate("+n+", "+o+") translateZ(0)",r=this.items[e];this._itemReady(r,(function(){var e=r.componentInstance.$el;e.style["-webkit-transform"]=i,e.style.transform=i,e._position=t}))},_updateViewport:function(e){Math.floor(2*this._viewportPosition)===Math.floor(2*e)&&Math.ceil(2*this._viewportPosition)===Math.ceil(2*e)||this.circularEnabled&&this._checkCircularLayout(e);var t=this.vertical?"0":100*-e*this._viewportMoveRatio+"%",n=this.vertical?100*-e*this._viewportMoveRatio+"%":"0",o="translate("+t+", "+n+") translateZ(0)",i=this.$refs.slideFrame;if(i&&(i.style["-webkit-transform"]=o,i.style.transform=o),this._viewportPosition=e,!this._transitionStart){if(e%1===0)return;this._transitionStart=e}e-=Math.floor(this._transitionStart),e<=-(this.items.length-1)?e+=this.items.length:e>=this.items.length&&(e-=this.items.length),e=this._transitionStart%1>.5||this._transitionStart<0?e-1:e,this.$trigger("transition",{},{dx:this.vertical?0:e*i.offsetWidth,dy:this.vertical?e*i.offsetHeight:0})},_animateFrameFuncProto:function(){var e=this;if(this._animating){var t=this._animating,n=t.toPos,o=t.acc,i=t.endTime,r=t.source,a=i-Date.now();if(a<=0){this._updateViewport(n),this._animating=null,this._requestedAnimation=!1,this._transitionStart=null;var s=this.items[this.currentSync];s&&this._itemReady(s,(function(){var t=s.componentInstance.itemId||"";e.$trigger("animationfinish",{},{current:e.currentSync,currentItemId:t,source:r})}))}else{var c=o*a*a/2,u=n+c;this._updateViewport(u),this._animationFrame=requestAnimationFrame(this._animateFrameFuncProto.bind(this))}}else this._requestedAnimation=!1},_animateViewport:function(e,t,n){this._cancelViewportAnimation();var o=this.durationNumber,i=this.items.length,r=this._viewportPosition;if(this.circularEnabled)if(n<0){for(;r<e;)r+=i;for(;r-i>e;)r-=i}else if(n>0){for(;r>e;)r-=i;for(;r+i<e;)r+=i;r+i-e<e-r&&(r+=i)}else{for(;r+i<e;)r+=i;for(;r-i>e;)r-=i;r+i-e<e-r&&(r+=i)}else"click"===t&&(e=e+this.displayMultipleItemsNumber-1<i?e:0);this._animating={toPos:e,acc:2*(r-e)/(o*o),endTime:Date.now()+o,source:t},this._requestedAnimation||(this._requestedAnimation=!0,this._animationFrame=requestAnimationFrame(this._animateFrameFuncProto.bind(this)))},_cancelViewportAnimation:function(){this._animating=null},_endViewportAnimation:function(){this._animating&&(this._updateViewport(this._animating.toPos),this._animating=null)},_handleTrackStart:function(){this._cancelSchedule(),this._contentTrackViewport=this._viewportPosition,this._contentTrackSpeed=0,this._contentTrackT=Date.now(),this._cancelViewportAnimation()},_handleTrackMove:function(e){var t=this,n=this._contentTrackT;this._contentTrackT=Date.now();var o=this.items.length,i=o-this.displayMultipleItemsNumber;function r(e){return.5-.25/(e+.5)}function a(e,n){var o=t._contentTrackViewport+e;t._contentTrackSpeed=.6*t._contentTrackSpeed+.4*n,t.circularEnabled||(o<0||o>i)&&(o<0?o=-r(-o):o>i&&(o=i+r(o-i)),t._contentTrackSpeed=0),t._updateViewport(o)}var s=this._contentTrackT-n||1;this.vertical?a(-e.dy/this.$refs.slideFrame.offsetHeight,-e.ddy/s):a(-e.dx/this.$refs.slideFrame.offsetWidth,-e.ddx/s)},_handleTrackEnd:function(e){this.userTracking=!1;var t=this._contentTrackSpeed/Math.abs(this._contentTrackSpeed),n=0;!e&&Math.abs(this._contentTrackSpeed)>.2&&(n=.5*t);var o=this._normalizeCurrentValue(this._viewportPosition+n);e?this._updateViewport(this._contentTrackViewport):(this.currentChangeSource="touch",this.currentSync=o,this._animateViewport(o,"touch",0!==n?n:0===o&&this.circularEnabled&&this._viewportPosition>=1?1:0))},_handleContentTrack:function(e){if(!this.disableTouch&&this.items.length&&!this._invalid){if("start"===e.detail.state)return this.userTracking=!0,this._userDirectionChecked=!1,this._handleTrackStart();if("end"===e.detail.state)return this._handleTrackEnd(!1);if("cancel"===e.detail.state)return this._handleTrackEnd(!0);if(this.userTracking){if(!this._userDirectionChecked){this._userDirectionChecked=!0;var t=Math.abs(e.detail.dx),n=Math.abs(e.detail.dy);if((t>=n&&this.vertical||t<=n&&!this.vertical)&&(this.userTracking=!1),!this.userTracking)return void(this.autoplay&&this._scheduleAutoplay())}return this._handleTrackMove(e.detail),!1}}},_onSwiperDotClick:function(e){this._animateViewport(this.currentSync=e,this.currentChangeSource="click",this.circularEnabled?1:0)},_navigationClick:function(e,t,n){if(e.stopPropagation(),!n){var o=this.items.length,i=this.currentSync;switch(t){case"prev":i--,i<0&&this.circularEnabled&&(i=o-1);break;case"next":i++,i>=o&&this.circularEnabled&&(i=0);break}this._onSwiperDotClick(i)}},_navigationMouseMove:function(e){var t=this;clearTimeout(this.hideNavigationTimer);var n=e.clientX,o=e.clientY,i=this.$refs.slidesWrapper.getBoundingClientRect(),r=i.left,a=i.right,s=i.top,c=i.bottom,u=i.width,l=i.height,d=!1;d=this.vertical?!(o-s<l/3||c-o<l/3):!(n-r<u/3||a-n<u/3),d?this.hideNavigationTimer=setTimeout((function(){t.hideNavigation=d}),300):this.hideNavigation=d},_navigationMouseOut:function(){this.hideNavigation=!0},_navigationSwiperAddMouseEvent:function(){var e=this.$refs.slidesWrapper;e&&(e.removeEventListener("mousemove",this._navigationMouseMove),e.removeEventListener("mouseleave",this._navigationMouseOut),this.isNavigationAuto&&(e.addEventListener("mousemove",this._navigationMouseMove),e.addEventListener("mouseleave",this._navigationMouseOut)))},_navigationHover:function(e,t){var n=e.currentTarget;n&&(n.style.backgroundColor="over"===t?this.navigationActiveColor:"")},_setNavigationState:function(){var e=this.items.length,t=!this.circularEnabled;this.prevDisabled=0===this.currentSync&&t,this.nextDisabled=this.currentSync===e-1&&t||t&&this.currentSync+this.displayMultipleItemsNumber>=e}},render:function(e){var t=this,n=[],o=[];this.$slots.default&&(0,a.deepClone)(this.$slots.default,e).forEach((function(e){e.componentOptions&&"v-uni-swiper-item"===e.componentOptions.tag&&o.push(e)}));for(var r=function(o,i){var r=t.currentSync;n.push(e("div",{on:{click:function(){return t._onSwiperDotClick(o)}},class:{"uni-swiper-dot":!0,"uni-swiper-dot-active":o<r+t.displayMultipleItemsNumber&&o>=r||o<r+t.displayMultipleItemsNumber-i},style:{background:o===r?t.indicatorActiveColor:t.indicatorColor}}))},s=0,c=o.length;s<c;s++)r(s,c);this.items=o;var u=[e("div",{ref:"slides",style:this.slidesStyle,class:"uni-swiper-slides"},[e("div",{ref:"slideFrame",class:"uni-swiper-slide-frame",style:this.slideFrameStyle},o)])];if(this.indicatorDots&&u.push(e("div",{ref:"slidesDots",class:["uni-swiper-dots",this.vertical?"uni-swiper-dots-vertical":"uni-swiper-dots-horizontal"]},n)),this.navigation){var l={"uni-swiper-navigation-hide":this.hideNavigation,"uni-swiper-navigation-vertical":this.vertical},d=e("i",{domProps:{innerHTML:"&#xe601;"},class:"uni-btn-icon",style:{color:this.navigationColor,fontSize:"26px"}}),f={mouseover:function(e){return t._navigationHover(e,"over")},mouseout:function(e){return t._navigationHover(e,"out")}};u.push(e("div",{on:(0,i.default)({click:function(e){return t._navigationClick(e,"prev",t.prevDisabled)}},f),class:["uni-swiper-navigation","uni-swiper-navigation-prev",(0,i.default)({"uni-swiper-navigation-disabled":this.prevDisabled},l)]},[d]),e("div",{on:(0,i.default)({click:function(e){return t._navigationClick(e,"next",t.nextDisabled)}},f),class:["uni-swiper-navigation","uni-swiper-navigation-next",(0,i.default)({"uni-swiper-navigation-disabled":this.nextDisabled},l)]},[d]))}return e("uni-swiper",{on:this.$listeners},[e("div",{ref:"slidesWrapper",class:"uni-swiper-wrapper"},u)])}};t.default=s},"295e":function(e,t,n){"use strict";var o=n("6a50");o("Uint32",(function(e){return function(t,n,o){return e(this,t,n,o)}}))},"29ba":function(e,t,n){"use strict";var o=n("8c08"),i=o("iterator"),r=!1;try{var a=0,s={next:function(){return{done:!!a++}},return:function(){r=!0}};s[i]=function(){return this},Array.from(s,(function(){throw 2}))}catch(c){}e.exports=function(e,t){try{if(!t&&!r)return!1}catch(c){return!1}var n=!1;try{var o={};o[i]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(c){}return n}},"29d5":function(e,t,n){var o=n("8394"),i=n("c62a"),r=n("77cd"),a=n("8fa1"),s=n("d9a7"),c=n("344f"),u=i("wks"),l=o.Symbol,d=l&&l["for"],f=c?l:l&&l.withoutSetter||a;e.exports=function(e){if(!r(u,e)||!s&&"string"!=typeof u[e]){var t="Symbol."+e;s&&r(l,e)?u[e]=l[e]:u[e]=c&&d?d(t):f(t)}return u[e]}},"29d8":function(e,t,n){"use strict";e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},"2a12":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={col:{span:12,offset:0,justify:"start",align:"stretch",textAlign:"left"}}},"2a3b":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("uni-textarea",e._g({},e.$listeners),[n("div",{ref:"wrapper",staticClass:"uni-textarea-wrapper"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!(e.composing||e.valueSync.length),expression:"!(composing || valueSync.length)"}],ref:"placeholder",staticClass:"uni-textarea-placeholder",class:e.placeholderClass,style:e.placeholderStyle,domProps:{textContent:e._s(e.placeholder)}}),n("div",{ref:"line",staticClass:"uni-textarea-line",domProps:{textContent:e._s(" ")}}),n("div",{staticClass:"uni-textarea-compute"},[e._l(e.valueCompute,(function(t,o){return n("div",{key:o,domProps:{textContent:e._s(t.trim()?t:".")}})})),n("v-uni-resize-sensor",{ref:"sensor",on:{resize:e._resize}})],2),e.disabled&&e.fixColor?e._e():n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.valueSync,expression:"valueSync"},{name:"keyboard",rawName:"v-keyboard"},{name:"field",rawName:"v-field"}],ref:"textarea",staticClass:"uni-textarea-textarea",class:{"uni-textarea-textarea-fix-margin":e.fixMargin},style:Object.assign({},{"overflow-y":e.autoHeight?"hidden":"auto"},e.cursorColor&&{caretColor:e.cursorColor}),attrs:{disabled:e.disabled,maxlength:e.maxlengthNumber,enterkeyhint:e.confirmType,inputmode:e.inputmode},domProps:{value:e.valueSync},on:{change:function(e){e.stopPropagation()},compositionstart:function(t){return t.stopPropagation(),e._onComposition(t)},compositionend:function(t){return t.stopPropagation(),e._onComposition(t)},compositionupdate:function(t){return t.stopPropagation(),e._onComposition(t)},input:[function(t){t.target.composing||(e.valueSync=t.target.value)},function(t){return t.stopPropagation(),e._onInput(t)}],focus:e._onFocus,blur:e._onBlur,"&touchstart":function(t){return e._onTouchstart(t)},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e._onKeyUpEnter(t)},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e._onKeyDownEnter(t)}}}),e.disabled&&e.fixColor?n("textarea",{ref:"textarea",staticClass:"uni-textarea-textarea",class:{"uni-textarea-textarea-fix-margin":e.fixMargin},style:Object.assign({},{"overflow-y":e.autoHeight?"hidden":"auto"},e.cursorColor&&{caretColor:e.cursorColor}),attrs:{tabindex:"-1",readonly:e.disabled,maxlength:e.maxlengthNumber},domProps:{value:e.valueSync},on:{focus:function(e){return e.target.blur()}}}):e._e()])])},i=[]},"2b04":function(e,t,n){"use strict";var o=n("af9e");e.exports=function(e,t){var n=[][e];return!!n&&o((function(){n.call(null,t||function(){return 1},1)}))}},"2b9e":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.createVideoContext=t.createMapContext=t.createCanvasContext=t.createAudioContext=void 0;var o=[{name:"id",type:String,required:!0}],i=o;t.createAudioContext=i;var r=o;t.createVideoContext=r;var a=o;t.createMapContext=a;var s=[{name:"canvasId",type:String,required:!0},{name:"componentInstance",type:Object}];t.createCanvasContext=s},"2ba7":function(e,t,n){"use strict";var o=n("ab4a"),i=n("af9e"),r=n("3f57");e.exports=!o&&!i((function(){return 7!==Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}))},"2baf":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={indexList:{inactiveColor:"#606266",activeColor:"#5677fc",indexList:function(){return[]},sticky:!0,customNavHeight:0}}},"2bef":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("uni-audio",e._g({attrs:{id:e.id,controls:!!e.controls}},e.$listeners),[n("audio",{ref:"audio",staticStyle:{display:"none"},attrs:{loop:e.loop}}),n("div",{staticClass:"uni-audio-default"},[n("div",{staticClass:"uni-audio-left",style:"background-image: url("+e.$getRealPath(e.poster)+");"},[n("div",{staticClass:"uni-audio-button",class:{play:!e.playing,pause:e.playing},on:{click:e.trigger}})]),n("div",{staticClass:"uni-audio-right"},[n("div",{staticClass:"uni-audio-time"},[e._v("\n        "+e._s(e.currentTime)+"\n      ")]),n("div",{staticClass:"uni-audio-info"},[n("div",{staticClass:"uni-audio-name"},[e._v("\n          "+e._s(e.name)+"\n        ")]),n("div",{staticClass:"uni-audio-author"},[e._v("\n          "+e._s(e.author)+"\n        ")])])])])])},i=[]},"2c10":function(e,t,n){"use strict";var o=n("71e9"),i=n("7edc"),r=n("e7e3"),a=n("1eb8"),s=n("c435"),c=n("9e70"),u=n("862c"),l=n("60bc"),d=n("03dc"),f=n("07da");i("match",(function(e,t,n){return[function(t){var n=u(this),i=a(t)?void 0:l(t,e);return i?o(i,t,n):new RegExp(t)[e](c(n))},function(e){var o=r(this),i=c(e),a=n(t,o,i);if(a.done)return a.value;if(!o.global)return f(o,i);var u=o.unicode;o.lastIndex=0;var l,p=[],h=0;while(null!==(l=f(o,i))){var g=c(l[0]);p[h]=g,""===g&&(o.lastIndex=d(i,s(o.lastIndex),u)),h++}return 0===h?null:p}]}))},"2c35":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("aa77"),n("bf0f"),n("dc8a"),n("4626"),n("5ac7");var o={name:"Keypress",props:{disable:{type:Boolean,default:!1}},mounted:function(){var e=this,t={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]},n=function(n){if(!e.disable){var o=Object.keys(t).find((function(e){var o=n.key,i=t[e];return i===o||Array.isArray(i)&&i.includes(o)}));o&&setTimeout((function(){e.$emit(o,n)}),0)}};document.addEventListener("keyup",n),this.$once("hook:beforeDestroy",(function(){document.removeEventListener("keyup",n)}))},render:function(){return null}};t.default=o},"2c57":function(e,t,n){"use strict";var o=n("85c1"),i=n("af9e"),r=n("bb80"),a=n("9e70"),s=n("ee98").trim,c=n("f072"),u=o.parseInt,l=o.Symbol,d=l&&l.iterator,f=/^[+-]?0x/i,p=r(f.exec),h=8!==u(c+"08")||22!==u(c+"0x16")||d&&!i((function(){u(Object(d))}));e.exports=h?function(e,t){var n=s(a(e));return u(n,t>>>0||(p(f,n)?16:10))}:u},"2c6f":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.base64ToFile=a,t.blobToFile=s,t.fileToUrl=c,t.getFileName=function(e){e=e.split("#")[0].split("?")[0];var t=e.split("/");return t[t.length-1]},t.getSameOriginUrl=function(e){var t=document.createElement("a");if(t.href=e,t.origin===location.origin)return Promise.resolve(e);return r(e).then(c)},t.revokeObjectURL=function(e){(window.URL||window.webkitURL).revokeObjectURL(e),delete i[e]},t.urlToFile=r,n("bf0f"),n("5c47"),n("0506"),n("7a76"),n("c9b5"),n("2c10"),n("15d1"),n("d5c6"),n("5a56"),n("f074"),n("4db2"),n("c976"),n("4d8f"),n("7b97"),n("668a"),n("c5b7"),n("8ff5"),n("2378"),n("641a"),n("64e0"),n("cce3"),n("efba"),n("d009"),n("bd7d"),n("7edd"),n("d798"),n("f547"),n("5e54"),n("b60a"),n("8c18"),n("12973"),n("f991"),n("198e"),n("8557"),n("63b1"),n("1954"),n("1cf1"),n("c223"),n("18f7"),n("de6c"),n("dc89"),n("2425");var o=n("1ffa"),i={};function r(e,t){var n=i[e];return n?Promise.resolve(n):/^data:[a-z-]+\/[a-z-]+;base64,/.test(e)?Promise.resolve(a(e)):t?Promise.reject(new Error("not find")):new Promise((function(t,n){var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="blob",o.onload=function(){t(this.response)},o.onerror=n,o.send()}))}function a(e){e=e.split(",");var t=e[0].match(/:(.*?);/)[1],n=atob(e[1]),o=n.length,i=new Uint8Array(o);while(o--)i[o]=n.charCodeAt(o);return s(i,t)}function s(e,t){if(!(e instanceof File)){t=t||e.type||"";var n="".concat(Date.now()).concat(function(e){var t=e.split("/")[1];return t?".".concat(t):""}(t));try{e=new File([e],n,{type:t})}catch(o){e=e instanceof Blob?e:new Blob([e],{type:t}),e.name=e.name||n}}return e}function c(e){for(var t in i)if((0,o.hasOwn)(i,t)){var n=i[t];if(n===e)return t}var r=(window.URL||window.webkitURL).createObjectURL(e);return i[r]=e,r}},"2c75":function(e,t,n){"use strict";(function(e){n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.uploadFile=function(t,n){var o=t.url,i=t.file,r=t.filePath,a=t.name,u=t.files,l=t.header,d=t.formData,f=t.timeout,p=void 0===f?__uniConfig.networkTimeout&&__uniConfig.networkTimeout.uploadFile||6e4:f,h=e,g=h.invokeCallbackHandler,_=new c(null,n);Array.isArray(u)&&u.length||(u=[{name:a,file:i,uri:r}]);return Promise.all(u.map((function(e){var t=e.file,n=e.uri;return t instanceof Blob?Promise.resolve((0,s.blobToFile)(t)):(0,s.urlToFile)(n)}))).then((function(e){var t,i=new XMLHttpRequest,r=new FormData;Object.keys(d).forEach((function(e){r.append(e,d[e])})),Object.values(u).forEach((function(t,n){var o=t.name,i=e[n];r.append(o||"file",i,i.name||"file-".concat(Date.now()))})),i.open("POST",o),Object.keys(l).forEach((function(e){i.setRequestHeader(e,l[e])})),i.upload.onprogress=function(e){_._callbacks.forEach((function(t){var n=e.loaded,o=e.total,i=Math.round(n/o*100);t({progress:i,totalBytesSent:n,totalBytesExpectedToSend:o})}))},i.onerror=function(){clearTimeout(t),g(n,{errMsg:"uploadFile:fail"})},i.onabort=function(){clearTimeout(t),g(n,{errMsg:"uploadFile:fail abort"})},i.onload=function(){clearTimeout(t);var e=i.status;g(n,{errMsg:"uploadFile:ok",statusCode:e,data:i.responseText||i.response})},_._isAbort?g(n,{errMsg:"uploadFile:fail abort"}):(t=setTimeout((function(){i.upload.onprogress=i.onload=i.onabort=i.onerror=null,_.abort(),g(n,{errMsg:"uploadFile:fail timeout"})}),p),i.send(r),_._xhr=i)})).catch((function(){setTimeout((function(){g(n,{errMsg:"uploadFile:fail file error"})}),0)})),_},n("aa9c"),n("5ef2"),n("dd2b"),n("bf0f"),n("2797"),n("dc8a"),n("22b6"),n("18f7"),n("de6c"),n("fd3c");var i=o(n("80b1")),r=o(n("efe5")),a=o(n("39d8")),s=n("2c6f"),c=function(){function e(t,n){(0,i.default)(this,e),(0,a.default)(this,"_xhr",void 0),(0,a.default)(this,"_isAbort",void 0),(0,a.default)(this,"_callbacks",[]),this._xhr=t,this._callbackId=n}return(0,r.default)(e,[{key:"onProgressUpdate",value:function(e){"function"===typeof e&&this._callbacks.push(e)}},{key:"offProgressUpdate",value:function(e){var t=this._callbacks.indexOf(e);t>=0&&this._callbacks.splice(t,1)}},{key:"abort",value:function(){this._isAbort=!0,this._xhr&&(this._xhr.abort(),delete this._xhr)}}]),e}()}).call(this,n("ef66"))},"2d3a":function(e,t,n){"use strict";n.r(t);var o=n("c680"),i=n("d122");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a=n("828b"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},"2d48":function(e,t,n){"use strict";var o=n("6a50");o("Int16",(function(e){return function(t,n,o){return e(this,t,n,o)}}))},"2d93":function(e,t,n){var o,i,r,a=n("bdbb").default;n("c223"),function(s,c,u){"object"===a(t)?e.exports=t=c(n("5e74"),n("c209"),n("3fdf")):(i=[n("5e74"),n("c209"),n("3fdf")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))}(0,(function(e){return function(){var t=e,n=t.lib,o=n.Base,i=n.WordArray,r=t.algo,a=r.SHA256,s=r.HMAC,c=r.PBKDF2=o.extend({cfg:o.extend({keySize:4,hasher:a,iterations:25e4}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){var n=this.cfg,o=s.create(n.hasher,e),r=i.create(),a=i.create([1]),c=r.words,u=a.words,l=n.keySize,d=n.iterations;while(c.length<l){var f=o.update(t).finalize(a);o.reset();for(var p=f.words,h=p.length,g=f,_=1;_<d;_++){g=o.finalize(g),o.reset();for(var v=g.words,m=0;m<h;m++)p[m]^=v[m]}r.concat(f),u[0]++}return r.sigBytes=4*l,r}});t.PBKDF2=function(e,t,n){return c.create(n).compute(e,t)}}(),e.PBKDF2}))},"2d9b":function(e,t,n){"use strict";(function(e){n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.requestComponentInfo=function(t,n,o){e.publishHandler("requestComponentInfo",{reqId:a.push(o),reqs:n},(0,r.checkInWindows)(t)?t:t.$page.id)},n("aa9c");var i=o(n("cd07")),r=n("ed8a"),a=(0,i.default)("requestComponentInfo")}).call(this,n("ef66"))},"2dfe":function(e,t,n){"use strict";(function(e){n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t){t.config.errorHandler=function(n,o,i){var s=(0,a.toRawType)(n);t.util.warn("Error in ".concat(i,': "').concat("Error"===s?n.toString():n,'"'),o);var c="function"===typeof getApp&&getApp();c&&(0,r.hasLifecycleHook)(c.$options,"onError")?c.__call_hook("onError",n):e.error(n)};var n=t.config.isReservedTag;t.config.isReservedTag=function(e){return-1!==i.default.indexOf(e)||n(e)},t.config.ignoredElements=i.default;var o=t.config.getTagNamespace,s=["switch","image","text","view"];t.config.getTagNamespace=function(e){return!~s.indexOf(e)&&o(e)}},n("c223"),n("c9b5"),n("bf0f"),n("ab80"),n("5ef2");var i=o(n("aa31")),r=n("c9ac"),a=n("1ffa")}).call(this,n("ba7c")["default"])},"2e5e":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},n("5c47"),n("0506")},"2e66":function(e,t,n){var o=n("fdca"),i=String,r=TypeError;e.exports=function(e){if("object"==typeof e||o(e))return e;throw r("Can't set "+i(e)+" as a prototype")}},"2f31":function(e,t,n){"use strict";var o;n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];n?o||(o=!0,"function"===typeof e&&e(),setTimeout((function(){o=!1}),t)):o||(o=!0,setTimeout((function(){o=!1,"function"===typeof e&&e()}),t))};t.default=i},"2f47":function(e,t,n){"use strict";function o(e){if(0===e.indexOf("#")){var t=e.substr(1);return function(e){return!(!e.componentInstance||e.componentInstance.id!==t)||!(!e.data||!e.data.attrs||e.data.attrs.id!==t)}}if(0===e.indexOf(".")){var n=e.substr(1);return function(e){return e.data&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(t)return-1!==t.split(i).indexOf(e);if(n&&"string"===typeof n)return-1!==n.split(i).indexOf(e)}(n,e.data.staticClass,e.data.class)}}}n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.initPolyfill=function(e){e.prototype.createIntersectionObserver=function(e){return uni.createIntersectionObserver(this,e)},e.prototype.createMediaQueryObserver=function(e){return uni.createMediaQueryObserver(this,e)},e.prototype.selectComponent=function(e){return function e(t,n){if(n(t.$vnode||t._vnode))return t;for(var o=t.$children,i=0;i<o.length;i++){var r=e(o[i],n);if(r)return r}}(this,o(e))},e.prototype.selectAllComponents=function(e){return function e(t,n,o){n(t.$vnode||t._vnode)&&o.push(t);for(var i=t.$children,r=0;r<i.length;r++)e(i[r],n,o);return o}(this,o(e),[])}},n("5ef2"),n("5c47"),n("dfcf"),n("aa9c");var i=/\s+/},"2fbb":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.getWindowInfo=function(){var e=window.screen,t=window.devicePixelRatio,n=/^Apple/.test(navigator.vendor)&&"number"===typeof window.orientation,o=n&&90===Math.abs(window.orientation),a=n?Math[o?"max":"min"](e.width,e.height):e.width,s=n?Math[o?"min":"max"](e.height,e.width):e.height,c=Math.min(window.innerWidth,document.documentElement.clientWidth,a)||a,u=window.innerHeight,l=r.default.top,d={left:r.default.left,right:c-r.default.right,top:r.default.top,bottom:u-r.default.bottom,width:c-r.default.left-r.default.right,height:u-r.default.top-r.default.bottom},f=(0,i.default)(),p=f.top,h=f.bottom;return u-=p,u-=h,{windowTop:p,windowBottom:h,windowWidth:c,windowHeight:u,pixelRatio:t,screenWidth:a,screenHeight:s,statusBarHeight:l,safeArea:d,safeAreaInsets:{top:r.default.top,right:r.default.right,bottom:r.default.bottom,left:r.default.left},screenTop:s-u}},n("5c47"),n("0506");var i=o(n("141c")),r=o(n("f621"))},"2fd0":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0});var i={extend:!0,isFn:!0,isStr:!0,isString:!0,isObject:!0,isPlainObject:!0,hasOwn:!0,noop:!0,toRawType:!0,cached:!0,camelize:!0,capitalize:!0,setProperties:!0,getLen:!0,formatDateTime:!0,updateElementStyle:!0,guid:!0,debounce:!0,throttle:!0,kebabCase:!0,looseEqual:!0,deepClone:!0,sortObject:!0};t.cached=_,t.capitalize=t.camelize=void 0,t.debounce=function(e,t){var n,o=function(){var o=arguments,i=this;clearTimeout(n);var r=function(){return e.apply(i,o)};n=setTimeout(r,t)};return o.cancel=function(){clearTimeout(n)},o},t.deepClone=function(e,t){return e.map((function e(n){var o=n.children&&n.children.map(e),i=t(n.tag,n.data,o);return i.text=n.text,i.isComment=n.isComment,i.componentOptions=n.componentOptions,i.elm=n.elm,i.context=n.context,i.ns=n.ns,i.isStatic=n.isStatic,i.key=n.key,i}))},t.extend=void 0,t.formatDateTime=function(e){var t=e.date,n=void 0===t?new Date:t,o=e.mode,i=void 0===o?"date":o;return"time"===i?u(n.getHours())+":"+u(n.getMinutes()):n.getFullYear()+"-"+u(n.getMonth()+1)+"-"+u(n.getDate())},t.getLen=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(""+e).replace(/[^\x00-\xff]/g,"**").length},t.guid=function(){return Math.floor(4294967296*(1+Math.random())).toString(16).slice(1)},t.hasOwn=g,t.isFn=function(e){return"function"===typeof e},t.isObject=p,t.isPlainObject=h,t.isStr=d,t.isString=void 0,t.kebabCase=function(e){return e.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}))},t.looseEqual=function e(t,n){if(t===n)return!0;var o=p(t),i=p(n);if(!o||!i)return!o&&!i&&String(t)===String(n);try{var r=Array.isArray(t),a=Array.isArray(n);if(r&&a)return t.length===n.length&&t.every((function(t,o){return e(t,n[o])}));if(t instanceof Date&&n instanceof Date)return t.getTime()===n.getTime();if(r||a)return!1;var s=Object.keys(t),c=Object.keys(n);return s.length===c.length&&s.every((function(o){return e(t[o],n[o])}))}catch(u){return!1}},t.noop=function(){},t.setProperties=function(e,t,n){t.forEach((function(t){g(n,t)&&(e[t]=n[t])}))},t.sortObject=function(e){var t={};h(e)&&Object.keys(e).sort().forEach((function(n){t[n]=e[n]}));return Object.keys(t)?t:e},t.throttle=function(e,t){var n,o,i=0,r=function(){for(var r=this,a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];var u=Date.now();clearTimeout(n),o=function(){o=null,i=u,e.apply(r,s)},u-i<t?n=setTimeout(o,t-(u-i)):o()};return r.cancel=function(){clearTimeout(n),o=null},r.flush=function(){clearTimeout(n),o&&o()},r},t.toRawType=function(e){return s.call(e).slice(8,-1)},t.updateElementStyle=function(e,t){for(var n in t)e.style[n]=t[n]};var r=o(n("fcf3"));n("bf0f"),n("f7a5"),n("5c47"),n("a1c1"),n("2797"),n("c9b5"),n("ab80"),n("dc8a"),n("fd3c"),n("4100");var a=n("629a");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var s=Object.prototype.toString,c=Object.prototype.hasOwnProperty,u=function(e){return e>9?e:"0"+e},l=Object.assign;function d(e){return"string"===typeof e}t.extend=l;var f=d;function p(e){return null!==e&&"object"===(0,r.default)(e)}function h(e){return"[object Object]"===s.call(e)}function g(e,t){return c.call(e,t)}function _(e){var t=Object.create(null);return function(n){var o=t[n];return o||(t[n]=e(n))}}t.isString=f;var v=/-(\w)/g,m=_((function(e){return e.replace(v,(function(e,t){return t?t.toUpperCase():""}))}));t.camelize=m;var y=_((function(e){return e.charAt(0).toUpperCase()+e.slice(1)}));t.capitalize=y},"2fdc":function(e,t,n){"use strict";function o(e,t,n,o,i,r,a){try{var s=e[r](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(o,i)}n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){o(a,i,r,s,c,"next",e)}function c(e){o(a,i,r,s,c,"throw",e)}s(void 0)}))}},n("bf0f")},"30c9":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={toast:10090,noNetwork:10080,popup:10075,mask:10070,navbar:980,topTips:975,sticky:970,indexListSticky:965}},"30f7":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},n("7a76"),n("c9b5")},"31e3":function(e,t,n){"use strict";function o(e,t,n){return e>t-n&&e<t+n}function i(e,t){return o(e,0,t)}function r(e,t,n){this._m=e,this._k=t,this._c=n,this._solution=null,this._endPosition=0,this._startTime=0}n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.Spring=r,r.prototype._solve=function(e,t){var n=this._c,o=this._m,i=this._k,r=n*n-4*o*i;if(0===r){var a=-n/(2*o),s=e,c=t/(a*e);return{x:function(e){return(s+c*e)*Math.pow(Math.E,a*e)},dx:function(e){var t=Math.pow(Math.E,a*e);return a*(s+c*e)*t+c*t}}}if(r>0){var u=(-n-Math.sqrt(r))/(2*o),l=(-n+Math.sqrt(r))/(2*o),d=(t-u*e)/(l-u),f=e-d;return{x:function(e){var t,n;return e===this._t&&(t=this._powER1T,n=this._powER2T),this._t=e,t||(t=this._powER1T=Math.pow(Math.E,u*e)),n||(n=this._powER2T=Math.pow(Math.E,l*e)),f*t+d*n},dx:function(e){var t,n;return e===this._t&&(t=this._powER1T,n=this._powER2T),this._t=e,t||(t=this._powER1T=Math.pow(Math.E,u*e)),n||(n=this._powER2T=Math.pow(Math.E,l*e)),f*u*t+d*l*n}}}var p=Math.sqrt(4*o*i-n*n)/(2*o),h=-n/2*o,g=e,_=(t-h*e)/p;return{x:function(e){return Math.pow(Math.E,h*e)*(g*Math.cos(p*e)+_*Math.sin(p*e))},dx:function(e){var t=Math.pow(Math.E,h*e),n=Math.cos(p*e),o=Math.sin(p*e);return t*(_*p*n-g*p*o)+h*t*(_*o+g*n)}}},r.prototype.x=function(e){return void 0===e&&(e=((new Date).getTime()-this._startTime)/1e3),this._solution?this._endPosition+this._solution.x(e):0},r.prototype.dx=function(e){return void 0===e&&(e=((new Date).getTime()-this._startTime)/1e3),this._solution?this._solution.dx(e):0},r.prototype.setEnd=function(e,t,n){if(n||(n=(new Date).getTime()),e!==this._endPosition||!i(t,.4)){t=t||0;var o=this._endPosition;this._solution&&(i(t,.4)&&(t=this._solution.dx((n-this._startTime)/1e3)),o=this._solution.x((n-this._startTime)/1e3),i(t,.4)&&(t=0),i(o,.4)&&(o=0),o+=this._endPosition),this._solution&&i(o-e,.4)&&i(t,.4)||(this._endPosition=e,this._solution=this._solve(o-this._endPosition,t),this._startTime=n)}},r.prototype.snap=function(e){this._startTime=(new Date).getTime(),this._endPosition=e,this._solution={x:function(){return 0},dx:function(){return 0}}},r.prototype.done=function(e){return e||(e=(new Date).getTime()),o(this.x(),this._endPosition,.4)&&i(this.dx(),.4)},r.prototype.reconfigure=function(e,t,n){this._m=e,this._k=t,this._c=n,this.done()||(this._solution=this._solve(this.x()-this._endPosition,this.dx()),this._startTime=(new Date).getTime())},r.prototype.springConstant=function(){return this._k},r.prototype.damping=function(){return this._c},r.prototype.configuration=function(){return[{label:"Spring Constant",read:this.springConstant.bind(this),write:function(e,t){e.reconfigure(1,t,e.damping())}.bind(this,this),min:100,max:1e3},{label:"Damping",read:this.damping.bind(this),write:function(e,t){e.reconfigure(1,e.springConstant(),t)}.bind(this,this),min:1,max:500}]}},"323c":function(e,t,n){"use strict";var o=n("7ddb"),i=n("5dfa"),r=o.aTypedArrayConstructor,a=o.getTypedArrayConstructor;e.exports=function(e){return r(i(e,a(e)))}},3242:function(e,t,n){"use strict";var o=n("17fc");e.exports=function(e,t){return new(o(e))(0===t?0:t)}},"330d":function(e,t,n){var o=n("1ad7"),i=Function.prototype,r=i.apply,a=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(o?a.bind(r):function(){return a.apply(r,arguments)})},"335a":function(e,t,n){var o=n("d10a"),i=n("d191"),r=n("2e66");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=o(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),e(n,[]),t=n instanceof Array}catch(a){}return function(n,o){return i(n),r(o),t?e(n,o):n.__proto__=o,n}}():void 0)},"338c":function(e,t,n){"use strict";var o=n("bb80"),i=n("1099"),r=o({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return r(i(e),t)}},"33b6":function(e,t,n){"use strict";n.r(t);var o=n("f086"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},"33e9":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.$emit=function(){return a(r,"$emit",Array.prototype.slice.call(arguments))},t.$off=function(){return a(r,"$off",Array.prototype.slice.call(arguments))},t.$on=function(){return a(r,"$on",Array.prototype.slice.call(arguments))},t.$once=function(){return a(r,"$once",Array.prototype.slice.call(arguments))},n("f7a5");var i=o(n("9b8e")),r=new i.default;function a(e,t,n){return e[t].apply(e,n)}},"33f8":function(e,t,n){"use strict";n.r(t);var o=n("151e"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},"341e":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={tabbar:{value:null,safeAreaInsetBottom:!0,border:!0,zIndex:1,activeColor:"#1989fa",inactiveColor:"#7d7e80",fixed:!0,placeholder:!0}}},"344f":function(e,t,n){var o=n("d9a7");e.exports=o&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},"345a":function(e,t,n){var o,i,r,a=n("bdbb").default;n("7a76"),n("c9b5"),n("f7a5"),function(s,c,u){"object"===a(t)?e.exports=t=c(n("5e74"),n("7f5d"),n("4f3e"),n("734e"),n("f794")):(i=[n("5e74"),n("7f5d"),n("4f3e"),n("734e"),n("f794")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))}(0,(function(e){return function(){var t=e,n=t.lib,o=n.WordArray,i=n.BlockCipher,r=t.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=r.DES=i.extend({_doReset:function(){for(var e=this._key,t=e.words,n=[],o=0;o<56;o++){var i=a[o]-1;n[o]=t[i>>>5]>>>31-i%32&1}for(var r=this._subKeys=[],u=0;u<16;u++){var l=r[u]=[],d=c[u];for(o=0;o<24;o++)l[o/6|0]|=n[(s[o]-1+d)%28]<<31-o%6,l[4+(o/6|0)]|=n[28+(s[o+24]-1+d)%28]<<31-o%6;l[0]=l[0]<<1|l[0]>>>31;for(o=1;o<7;o++)l[o]=l[o]>>>4*(o-1)+3;l[7]=l[7]<<5|l[7]>>>27}var f=this._invSubKeys=[];for(o=0;o<16;o++)f[o]=r[15-o]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],f.call(this,4,252645135),f.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),f.call(this,1,1431655765);for(var o=0;o<16;o++){for(var i=n[o],r=this._lBlock,a=this._rBlock,s=0,c=0;c<8;c++)s|=u[c][((a^i[c])&l[c])>>>0];this._lBlock=a,this._rBlock=r^s}var d=this._lBlock;this._lBlock=this._rBlock,this._rBlock=d,f.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),f.call(this,16,65535),f.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function f(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function p(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}t.DES=i._createHelper(d);var h=r.TripleDES=i.extend({_doReset:function(){var e=this._key,t=e.words;if(2!==t.length&&4!==t.length&&t.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var n=t.slice(0,2),i=t.length<4?t.slice(0,2):t.slice(2,4),r=t.length<6?t.slice(0,2):t.slice(4,6);this._des1=d.createEncryptor(o.create(n)),this._des2=d.createEncryptor(o.create(i)),this._des3=d.createEncryptor(o.create(r))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=i._createHelper(h)}(),e.TripleDES}))},3462:function(e,t){var n=function(){this.head=null,this.tail=null};n.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}},e.exports=n},"346b":function(e,t,n){"use strict";var o={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!o.call({1:2},1);t.f=r?function(e){var t=i(this,e);return!!t&&t.enumerable}:o},3487:function(e,t,n){"use strict";var o=n("508d"),i=n("d7b8"),r=n("3a4b"),a=n("9360"),s=n("fdca"),c=n("9320"),u=n("8a29"),l=n("335a"),d=n("ebe8"),f=n("d1a8"),p=n("27cc"),h=n("29d5"),g=n("d459"),_=n("4c77"),v=a.PROPER,m=a.CONFIGURABLE,y=_.IteratorPrototype,M=_.BUGGY_SAFARI_ITERATORS,I=h("iterator"),C=function(){return this};e.exports=function(e,t,n,a,h,_,b){c(n,t,a);var T,S,E,k=function(e){if(e===h&&R)return R;if(!M&&e in L)return L[e];switch(e){case"keys":return function(){return new n(this,e)};case"values":return function(){return new n(this,e)};case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},D=t+" Iterator",A=!1,L=e.prototype,O=L[I]||L["@@iterator"]||h&&L[h],R=!M&&O||k(h),w="Array"==t&&L.entries||O;if(w&&(T=u(w.call(new e)),T!==Object.prototype&&T.next&&(r||u(T)===y||(l?l(T,y):s(T[I])||p(T,I,C)),d(T,D,!0,!0),r&&(g[D]=C))),v&&"values"==h&&O&&"values"!==O.name&&(!r&&m?f(L,"name","values"):(A=!0,R=function(){return i(O,this)})),h)if(S={values:k("values"),keys:_?R:k("keys"),entries:k("entries")},b)for(E in S)(M||A||!(E in L))&&p(L,E,S[E]);else o({target:t,proto:!0,forced:M||A},S);return r&&!b||L[I]===R||p(L,I,R,{name:h}),g[t]=R,S}},"3487a":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.$route;e.route=n.meta.pagePath,e.options||(e.options=t);var o=(0,i.hasOwn)(n.params,"__id__")?n.params.__id__:n.meta.id,a=n.fullPath;n.meta.isEntry&&-1===a.indexOf(n.meta.pagePath)&&(a="/"+n.meta.pagePath+a.replace("/",""));e.__page__={id:o,path:n.path,route:n.meta.pagePath,fullPath:a,options:t,meta:Object.assign({},n.meta)};var s=e.$router.$eventChannel||new r.default;e.getOpenerEventChannel=function(){return s},e.$vm=e,e.$root=e,e.$holder=e.$parent.$parent,e.$mp={mpType:"page",page:e,query:{},status:""}},n("5ef2"),n("5c47"),n("a1c1");var i=n("1ffa"),r=o(n("bf1b"))},"34cf":function(e,t,n){"use strict";(function(e){n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("64aa"),n("5c47"),n("0506");var i=o(n("da58")),r=n("1ffa"),a=n("1d16"),s=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return!!r.supportsPassive&&{passive:e}},c=s(),u={name:"ScrollView",mixins:[i.default],props:{scrollX:{type:[Boolean,String],default:!1},scrollY:{type:[Boolean,String],default:!1},upperThreshold:{type:[Number,String],default:50},lowerThreshold:{type:[Number,String],default:50},scrollTop:{type:[Number,String],default:0},scrollLeft:{type:[Number,String],default:0},scrollIntoView:{type:String,default:""},scrollWithAnimation:{type:[Boolean,String],default:!1},enableBackToTop:{type:[Boolean,String],default:!1},refresherEnabled:{type:[Boolean,String],default:!1},refresherThreshold:{type:Number,default:45},refresherDefaultStyle:{type:String,default:"back"},refresherBackground:{type:String,default:"#fff"},refresherTriggered:{type:[Boolean,String],default:!1}},data:function(){return{lastScrollTop:this.scrollTopNumber,lastScrollLeft:this.scrollLeftNumber,lastScrollToUpperTime:0,lastScrollToLowerTime:0,refresherHeight:0,refreshRotate:0,refreshState:""}},computed:{upperThresholdNumber:function(){var e=Number(this.upperThreshold);return isNaN(e)?50:e},lowerThresholdNumber:function(){var e=Number(this.lowerThreshold);return isNaN(e)?50:e},scrollTopNumber:function(){return Number(this.scrollTop)||0},scrollLeftNumber:function(){return Number(this.scrollLeft)||0}},watch:{scrollTopNumber:function(e){this._scrollTopChanged(e)},scrollLeftNumber:function(e){this._scrollLeftChanged(e)},scrollIntoView:function(e){this._scrollIntoViewChanged(e)},refresherTriggered:function(e){!0===e?this._setRefreshState("refreshing"):!1===e&&this._setRefreshState("restore")}},mounted:function(){var e=this,t=null,n=null;this._attached=!0,this.toUpperNumber=0,this.triggerAbort=!1,this.beforeRefreshing=!1,this._scrollTopChanged(this.scrollTopNumber),this._scrollLeftChanged(this.scrollLeftNumber),this._scrollIntoViewChanged(this.scrollIntoView),this.__handleScroll=function(t){t.preventDefault(),t.stopPropagation(),e._handleScroll.bind(e,t)()},this.__handleTouchMove=function(o){if(null!==t){var i=o.touches[0].pageX,r=o.touches[0].pageY,a=e.$refs.main;if(Math.abs(i-t.x)>Math.abs(r-t.y))if(e.scrollX){if(0===a.scrollLeft&&i>t.x)return void(n=!1);if(a.scrollWidth===a.offsetWidth+a.scrollLeft&&i<t.x)return void(n=!1);n=!0}else n=!1;else if(e.scrollY)if(0===a.scrollTop&&r>t.y)n=!1,e.refresherEnabled&&!1!==o.cancelable&&o.preventDefault();else{if(a.scrollHeight===a.offsetHeight+a.scrollTop&&r<t.y)return void(n=!1);n=!0}else n=!1;if(n&&o.stopPropagation(),0===a.scrollTop&&1===o.touches.length&&(e.refreshState="pulling"),e.refresherEnabled&&"pulling"===e.refreshState){var s=r-t.y;0===e.toUpperNumber&&(e.toUpperNumber=r),e.beforeRefreshing?(e.refresherHeight=s+e.refresherThreshold,e.triggerAbort=!1):(e.refresherHeight=r-e.toUpperNumber,e.refresherHeight>0&&(e.triggerAbort=!0,e.$trigger("refresherpulling",o,{deltaY:s})));var c=e.refresherHeight/e.refresherThreshold;e.refreshRotate=360*(c>1?1:c)}}},this.__handleTouchStart=function(e){1===e.touches.length&&((0,a.disableScrollBounce)({disable:!0}),t={x:e.touches[0].pageX,y:e.touches[0].pageY})},this.__handleTouchEnd=function(n){t=null,(0,a.disableScrollBounce)({disable:!1}),e.refresherHeight>=e.refresherThreshold?e._setRefreshState("refreshing"):e._setRefreshState("refresherabort")},this.$refs.main.addEventListener("touchstart",this.__handleTouchStart,c),this.$refs.main.addEventListener("touchmove",this.__handleTouchMove,s(!1)),this.$refs.main.addEventListener("scroll",this.__handleScroll,s(!1)),this.$refs.main.addEventListener("touchend",this.__handleTouchEnd,c),(0,a.initScrollBounce)()},activated:function(){this.scrollY&&(this.$refs.main.scrollTop=this.lastScrollTop),this.scrollX&&(this.$refs.main.scrollLeft=this.lastScrollLeft)},beforeDestroy:function(){this.$refs.main.removeEventListener("touchstart",this.__handleTouchStart,c),this.$refs.main.removeEventListener("touchmove",this.__handleTouchMove,c),this.$refs.main.removeEventListener("scroll",this.__handleScroll,s(!1)),this.$refs.main.removeEventListener("touchend",this.__handleTouchEnd,c)},methods:{scrollTo:function(e,t){var n=this.$refs.main;e<0?e=0:"x"===t&&e>n.scrollWidth-n.offsetWidth?e=n.scrollWidth-n.offsetWidth:"y"===t&&e>n.scrollHeight-n.offsetHeight&&(e=n.scrollHeight-n.offsetHeight);var o=0,i="";"x"===t?o=n.scrollLeft-e:"y"===t&&(o=n.scrollTop-e),0!==o&&(this.$refs.content.style.transition="transform .3s ease-out",this.$refs.content.style.webkitTransition="-webkit-transform .3s ease-out","x"===t?i="translateX("+o+"px) translateZ(0)":"y"===t&&(i="translateY("+o+"px) translateZ(0)"),this.$refs.content.removeEventListener("transitionend",this.__transitionEnd),this.$refs.content.removeEventListener("webkitTransitionEnd",this.__transitionEnd),this.__transitionEnd=this._transitionEnd.bind(this,e,t),this.$refs.content.addEventListener("transitionend",this.__transitionEnd),this.$refs.content.addEventListener("webkitTransitionEnd",this.__transitionEnd),"x"===t?n.style.overflowX="hidden":"y"===t&&(n.style.overflowY="hidden"),this.$refs.content.style.transform=i,this.$refs.content.style.webkitTransform=i)},_handleTrack:function(e){if("start"===e.detail.state)return this._x=e.detail.x,this._y=e.detail.y,void(this._noBubble=null);"end"===e.detail.state&&(this._noBubble=!1),null===this._noBubble&&this.scrollY&&(Math.abs(this._y-e.detail.y)/Math.abs(this._x-e.detail.x)>1?this._noBubble=!0:this._noBubble=!1),null===this._noBubble&&this.scrollX&&(Math.abs(this._x-e.detail.x)/Math.abs(this._y-e.detail.y)>1?this._noBubble=!0:this._noBubble=!1),this._x=e.detail.x,this._y=e.detail.y,this._noBubble&&e.stopPropagation()},_handleScroll:function(e){var t=e.target;this.$trigger("scroll",e,{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop,scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,deltaX:this.lastScrollLeft-t.scrollLeft,deltaY:this.lastScrollTop-t.scrollTop}),this.scrollY&&(t.scrollTop<=this.upperThresholdNumber&&this.lastScrollTop-t.scrollTop>0&&e.timeStamp-this.lastScrollToUpperTime>200&&(this.$trigger("scrolltoupper",e,{direction:"top"}),this.lastScrollToUpperTime=e.timeStamp),t.scrollTop+t.offsetHeight+this.lowerThresholdNumber>=t.scrollHeight&&this.lastScrollTop-t.scrollTop<0&&e.timeStamp-this.lastScrollToLowerTime>200&&(this.$trigger("scrolltolower",e,{direction:"bottom"}),this.lastScrollToLowerTime=e.timeStamp)),this.scrollX&&(t.scrollLeft<=this.upperThresholdNumber&&this.lastScrollLeft-t.scrollLeft>0&&e.timeStamp-this.lastScrollToUpperTime>200&&(this.$trigger("scrolltoupper",e,{direction:"left"}),this.lastScrollToUpperTime=e.timeStamp),t.scrollLeft+t.offsetWidth+this.lowerThresholdNumber>=t.scrollWidth&&this.lastScrollLeft-t.scrollLeft<0&&e.timeStamp-this.lastScrollToLowerTime>200&&(this.$trigger("scrolltolower",e,{direction:"right"}),this.lastScrollToLowerTime=e.timeStamp)),this.lastScrollTop=t.scrollTop,this.lastScrollLeft=t.scrollLeft},_scrollTopChanged:function(e){this.scrollY&&(this._innerSetScrollTop?this._innerSetScrollTop=!1:this.scrollWithAnimation?this.scrollTo(e,"y"):this.$refs.main.scrollTop=e)},_scrollLeftChanged:function(e){this.scrollX&&(this._innerSetScrollLeft?this._innerSetScrollLeft=!1:this.scrollWithAnimation?this.scrollTo(e,"x"):this.$refs.main.scrollLeft=e)},_scrollIntoViewChanged:function(t){if(t){if(!/^[_a-zA-Z][-_a-zA-Z0-9:]*$/.test(t))return void e.error("id error: scroll-into-view=".concat(t));var n=this.$el.querySelector("#"+t);if(n){var o=this.$refs.main.getBoundingClientRect(),i=n.getBoundingClientRect();if(this.scrollX){var r=i.left-o.left,a=this.$refs.main.scrollLeft,s=a+r;this.scrollWithAnimation?this.scrollTo(s,"x"):this.$refs.main.scrollLeft=s}if(this.scrollY){var c=i.top-o.top,u=this.$refs.main.scrollTop,l=u+c;this.scrollWithAnimation?this.scrollTo(l,"y"):this.$refs.main.scrollTop=l}}}},_transitionEnd:function(e,t){this.$refs.content.style.transition="",this.$refs.content.style.webkitTransition="",this.$refs.content.style.transform="",this.$refs.content.style.webkitTransform="";var n=this.$refs.main;"x"===t?(n.style.overflowX=this.scrollX?"auto":"hidden",n.scrollLeft=e):"y"===t&&(n.style.overflowY=this.scrollY?"auto":"hidden",n.scrollTop=e),this.$refs.content.removeEventListener("transitionend",this.__transitionEnd),this.$refs.content.removeEventListener("webkitTransitionEnd",this.__transitionEnd)},_setRefreshState:function(e){switch(e){case"refreshing":this.refresherHeight=this.refresherThreshold,this.beforeRefreshing||(this.beforeRefreshing=!0,this.$trigger("refresherrefresh",{},{}));break;case"restore":case"refresherabort":this.beforeRefreshing=!1,this.refresherHeight=this.toUpperNumber=0,"restore"===e&&(this.triggerAbort=!1,this.$trigger("refresherrestore",{},{})),"refresherabort"===e&&this.triggerAbort&&(this.triggerAbort=!1,this.$trigger("refresherabort",{},{}));break}this.refreshState=e},getScrollPosition:function(){var e=this.$refs.main;return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop,scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth}}}};t.default=u}).call(this,n("ba7c")["default"])},"35d5":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={name:"ImageView",props:{src:{type:String,default:""}},data:function(){return{direction:"none"}},created:function(){this.scale=1,this.imgWidth=0,this.imgHeight=0,this.width=0,this.height=0},methods:{onScale:function(e){var t=e.detail.scale;this.scale=t},onImgLoad:function(e){var t=e.target,n=t.getBoundingClientRect();this.imgWidth=n.width,this.imgHeight=n.height},onTouchStart:function(e){var t=this.$el,n=t.getBoundingClientRect();this.width=n.width,this.height=n.height,this.checkDirection(e)},onTouchEnd:function(e){var t=this.scale,n=t*this.imgWidth>this.width,o=t*this.imgHeight>this.height;this.direction=n&&o?"all":n?"horizontal":o?"vertical":"none",this.checkDirection(e)},checkDirection:function(e){var t=this.direction;"all"!==t&&"horizontal"!==t||e.stopPropagation()}}};t.default=o},3639:function(e,t,n){n("bf0f"),n("18f7"),n("d0af"),n("de6c"),n("6a54"),n("9a2c");var o=n("bdbb")["default"];function i(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}e.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!==typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=a?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(r,s,c):r[s]=e[s]}return r["default"]=e,n&&n.set(e,r),r},e.exports.__esModule=!0,e.exports["default"]=e.exports},3671:function(e,t,n){var o=n("c86b");e.exports=o("document","documentElement")},3725:function(e,t,n){"use strict";(function(e,o){var i=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.closeSocket=function(e,t){var n=f[0];n?n.close(Object.assign({},e,{complete:function(e){u(t,e)}})):u(t,{errMsg:"closeSocket:fail WebSocket is not connected"})},t.connectSocket=function(e,t){var n=e.url,o=e.protocols;return new p(n,o,(function(e,n){e||f.push(n),u(t,{errMsg:"connectSocket:"+(e?"fail ".concat(e):"ok")})}))},t.onSocketOpen=t.onSocketMessage=t.onSocketError=t.onSocketClose=void 0,t.sendSocketMessage=function(e,t){var n=f[0];n&&n.readyState===n.OPEN?n.send(Object.assign({},e,{complete:function(e){u(t,e)}})):u(t,{errMsg:"sendSocketMessage:fail WebSocket is not connected "})},n("bf0f"),n("2797"),n("c223"),n("5ef2"),n("dd2b"),n("6a54"),n("7a76"),n("c9b5"),n("aa9c"),n("5c47"),n("0506");var r=i(n("80b1")),a=i(n("efe5")),s=i(n("39d8")),c=e,u=c.invokeCallbackHandler,l=["open","close","error","message"],d={},f=[],p=function(){function e(t,n,i){var a,c=this;(0,r.default)(this,e),(0,s.default)(this,"_webSocket",void 0);try{var p=this._webSocket=new WebSocket(t,n);p.binaryType="arraybuffer",this._callbacks={},l.forEach((function(e){c._callbacks[e]=[],p.addEventListener(e,(function(t){var n=t.data,i=t.code,r=t.reason,a="message"===e?{data:n}:"close"===e?{code:i,reason:r}:{};if(c._callbacks[e].forEach((function(t){try{t(a)}catch(n){o.error("thirdScriptError\n".concat(n,";at socketTask.on").concat(e[0].toUpperCase()+e.substr(1)," callback function\n"),n)}})),c===f[0]&&d[e]&&u(d[e],a),"error"===e||"close"===e){var s=f.indexOf(c);s>=0&&f.splice(s,1)}}))}));["CLOSED","CLOSING","CONNECTING","OPEN","readyState"].forEach((function(e){Object.defineProperty(c,e,{get:function(){return p[e]}})}))}catch(h){a=h}i(a,this)}return(0,a.default)(e,[{key:"send",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=this._webSocket;try{if(n.readyState!==n.OPEN)throw new Error("SocketTask.readyState is not OPEN");n.send(t),this._callback(e,"sendSocketMessage:ok")}catch(o){this._callback(e,"sendSocketMessage:fail ".concat(o))}}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._webSocket,n=[];n.push(e.code||1e3),"string"===typeof e.reason&&n.push(e.reason);try{t.close.apply(t,n),this._callback(e,"closeSocket:ok")}catch(o){this._callback(e,"closeSocket:fail ".concat(o))}}},{key:"_callback",value:function(e,t){var n=e.success,o=e.fail,i=e.complete,r={errMsg:t};/:ok$/.test(t)?"function"===typeof n&&n(r):"function"===typeof o&&o(r),"function"===typeof i&&i(r)}}]),e}();function h(e){return function(t){d[e]=t}}l.forEach((function(e){var t=e[0].toUpperCase()+e.substr(1);p.prototype["on".concat(t)]=function(t){this._callbacks[e].push(t)}}));var g=h("open");t.onSocketOpen=g;var _=h("error");t.onSocketError=_;var v=h("message");t.onSocketMessage=v;var m=h("close");t.onSocketClose=m}).call(this,n("ef66"),n("ba7c")["default"])},3794:function(e,t,n){"use strict";var o=n("6aa6");e.exports=o("document","documentElement")},"37ad":function(e,t,n){"use strict";var o=n("bb80");e.exports=o([].slice)},3840:function(e,t,n){"use strict";var o,i,r,a=n("508d"),s=n("3a4b"),c=n("e8b8"),u=n("8394"),l=n("d7b8"),d=n("27cc"),f=n("335a"),p=n("ebe8"),h=n("f82c"),g=n("f0b5"),_=n("fdca"),v=n("1ae3"),m=n("9b8f"),y=n("0699"),M=n("fd1d").set,I=n("fac1"),C=n("4743"),b=n("a5c6"),T=n("3462"),S=n("7b05"),E=n("3c5d"),k=n("83b3"),D=n("f439"),A=k.CONSTRUCTOR,L=k.REJECTION_EVENT,O=k.SUBCLASSING,R=S.getterFor("Promise"),w=S.set,N=E&&E.prototype,P=E,G=N,U=u.TypeError,x=u.document,F=u.process,q=D.f,B=q,V=!!(x&&x.createEvent&&u.dispatchEvent),H=function(e){var t;return!(!v(e)||!_(t=e.then))&&t},j=function(e,t){var n,o,i,r=t.value,a=1==t.state,s=a?e.ok:e.fail,c=e.resolve,u=e.reject,d=e.domain;try{s?(a||(2===t.rejection&&$(t),t.rejection=1),!0===s?n=r:(d&&d.enter(),n=s(r),d&&(d.exit(),i=!0)),n===e.promise?u(U("Promise-chain cycle")):(o=H(n))?l(o,n,c,u):c(n)):u(r)}catch(f){d&&!i&&d.exit(),u(f)}},K=function(e,t){e.notified||(e.notified=!0,I((function(){var n,o=e.reactions;while(n=o.get())j(n,e);e.notified=!1,t&&!e.rejection&&Y(e)})))},W=function(e,t,n){var o,i;V?(o=x.createEvent("Event"),o.promise=t,o.reason=n,o.initEvent(e,!1,!0),u.dispatchEvent(o)):o={promise:t,reason:n},!L&&(i=u["on"+e])?i(o):"unhandledrejection"===e&&C("Unhandled promise rejection",n)},Y=function(e){l(M,u,(function(){var t,n=e.facade,o=e.value,i=z(e);if(i&&(t=b((function(){c?F.emit("unhandledRejection",o,n):W("unhandledrejection",n,o)})),e.rejection=c||z(e)?2:1,t.error))throw t.value}))},z=function(e){return 1!==e.rejection&&!e.parent},$=function(e){l(M,u,(function(){var t=e.facade;c?F.emit("rejectionHandled",t):W("rejectionhandled",t,e.value)}))},X=function(e,t,n){return function(o){e(t,o,n)}},J=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,K(e,!0))},Q=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw U("Promise can't be resolved itself");var o=H(t);o?I((function(){var n={done:!1};try{l(o,t,X(Q,n,e),X(J,n,e))}catch(i){J(n,i,e)}})):(e.value=t,e.state=1,K(e,!1))}catch(i){J({done:!1},i,e)}}};if(A&&(P=function(e){m(this,G),g(e),l(o,this);var t=R(this);try{e(X(Q,t),X(J,t))}catch(n){J(t,n)}},G=P.prototype,o=function(e){w(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new T,rejection:!1,state:0,value:void 0})},o.prototype=d(G,"then",(function(e,t){var n=R(this),o=q(y(this,P));return n.parent=!0,o.ok=!_(e)||e,o.fail=_(t)&&t,o.domain=c?F.domain:void 0,0==n.state?n.reactions.add(o):I((function(){j(o,n)})),o.promise})),i=function(){var e=new o,t=R(e);this.promise=e,this.resolve=X(Q,t),this.reject=X(J,t)},D.f=q=function(e){return e===P||void 0===e?new i(e):B(e)},!s&&_(E)&&N!==Object.prototype)){r=N.then,O||d(N,"then",(function(e,t){var n=this;return new P((function(e,t){l(r,n,e,t)})).then(e,t)}),{unsafe:!0});try{delete N.constructor}catch(Z){}f&&f(N,G)}a({global:!0,constructor:!0,wrap:!0,forced:A},{Promise:P}),p(P,"Promise",!1,!0),h("Promise")},3872:function(e,t,n){var o=n("c62a"),i=n("8fa1"),r=o("keys");e.exports=function(e){return r[e]||(r[e]=i(e))}},"3872e":function(e,t,n){"use strict";var o=n("f259");o("asyncIterator")},"391d":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var o=n.config.validateStatus,i=n.statusCode;!i||o&&!o(i)?t(n):e(n)}},3939:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e;return{args:function(t,n){e=s(t.events),t.url&&(t.url=t.url+(-1===t.url.indexOf("?")?"?":"&")+"__id__="+e.id)},returnValue:function(t,n){t.eventChannel=e}}},t.getEventChannel=function(e){var t=r[e];return delete r[e],t},t.initEventChannel=s,n("5ef2");var i=o(n("bf1b")),r={},a=0;function s(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];a++;var n=new i.default(a,e);return t&&(r[a]=n),n}},"39b6":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={badge:{isDot:!1,value:"",show:!0,max:999,type:"error",showZero:!1,bgColor:null,color:null,shape:"circle",numberType:"overflow",offset:function(){return[]},inverted:!1,absolute:!1}}},"39d8":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){t=(0,o.default)(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e},n("6a54");var o=function(e){return e&&e.__esModule?e:{default:e}}(n("18e4"))},"3a4b":function(e,t){e.exports=!1},"3a9a":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("a38a")),r=i.default;t.default=r},"3b19":function(e,t,n){"use strict";var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=o+"+/",r=o+"-_",a=function(e){for(var t={},n=0;n<64;n++)t[e.charAt(n)]=n;return t};e.exports={i2c:i,c2i:a(i),i2cUrl:r,c2iUrl:a(r)}},"3b66":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("c223");var o=n("1ffa"),i=n("c47d");function r(){this.$dispatch("Form","uni-form-group-update",{type:"add",vm:this})}function a(){this.$dispatch("Form","uni-form-group-update",{type:"remove",vm:this})}var s={name:"uni://form-field",init:function(e,t){t.constructor.options.props&&t.constructor.options.props.name&&t.constructor.options.props.value||(t.constructor.options.props||(t.constructor.options.props={}),t.constructor.options.props.name||(t.constructor.options.props.name=e.props.name={type:String}),t.constructor.options.props.value||(t.constructor.options.props.value=e.props.value={type:null})),e.propsData||(e.propsData={});var n=t.$vnode;if(n&&n.data&&n.data.attrs&&((0,o.hasOwn)(n.data.attrs,"name")&&(e.propsData.name=n.data.attrs.name),(0,o.hasOwn)(n.data.attrs,"value")&&(e.propsData.value=n.data.attrs.value)),!t.constructor.options.methods||!t.constructor.options.methods._getFormData){t.constructor.options.methods||(t.constructor.options.methods={}),e.methods||(e.methods={});var s={_getFormData:function(){return this.name?{key:this.name,value:this.value}:{}},_resetFormData:function(){this.value=""}};Object.assign(t.constructor.options.methods,s),Object.assign(e.methods,s),Object.assign(t.constructor.options.methods,i.emitter.methods),Object.assign(e.methods,i.emitter.methods);var c=e.created;t.constructor.options.created=e.created=c?[].concat(r,c):[r];var u=e.beforeDestroy;t.constructor.options.beforeDestroy=e.beforeDestroy=u?[].concat(a,u):[a]}}};t.default=s},"3b78":function(e,t,n){var o=n("8394"),i=n("1ae3"),r=o.document,a=i(r)&&i(r.createElement);e.exports=function(e){return a?r.createElement(e):{}}},"3bc7":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.TEMP_PATH=void 0;t.TEMP_PATH=""},"3c5d":function(e,t,n){var o=n("8394");e.exports=o.Promise},"3c7a":function(e,t,n){"use strict";var o=n("497b"),i=RangeError;e.exports=function(e){var t=o(e);if(t<0)throw new i("The argument can't be less than 0");return t}},"3ccd":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={name:"AsyncLoading"}},"3d77":function(e,t,n){"use strict";var o=n("ae5c"),i=n("71e9"),r=n("1099"),a=n("7f5f"),s=n("81a7"),c=n("8ae2"),u=n("1fc1"),l=n("85f7"),d=n("d67c"),f=n("5112"),p=Array;e.exports=function(e){var t=r(e),n=c(this),h=arguments.length,g=h>1?arguments[1]:void 0,_=void 0!==g;_&&(g=o(g,h>2?arguments[2]:void 0));var v,m,y,M,I,C,b=f(t),T=0;if(!b||this===p&&s(b))for(v=u(t),m=n?new this(v):p(v);v>T;T++)C=_?g(t[T],T):t[T],l(m,T,C);else for(m=n?new this:[],M=d(t,b),I=M.next;!(y=i(I,M)).done;T++)C=_?a(M,g,[y.value,T],!0):y.value,l(m,T,C);return m.length=T,m}},"3d8a":function(e,t,n){"use strict";var o=n("338c"),i=n("6ac9"),r=n("1ded"),a=n("d6b1");e.exports=function(e,t,n){for(var s=i(t),c=a.f,u=r.f,l=0;l<s.length;l++){var d=s[l];o(e,d)||n&&o(n,d)||c(e,d,u(t,d))}}},"3dde":function(e,t,n){"use strict";var o=n("d95b"),i=n("d9af"),r=n("d459"),a=n("7b05"),s=n("415b").f,c=n("3487"),u=n("b86d"),l=n("3a4b"),d=n("1faa"),f=a.set,p=a.getterFor("Array Iterator");e.exports=c(Array,"Array",(function(e,t){f(this,{type:"Array Iterator",target:o(e),index:0,kind:t})}),(function(){var e=p(this),t=e.target,n=e.kind,o=e.index++;return!t||o>=t.length?(e.target=void 0,u(void 0,!0)):u("keys"==n?o:"values"==n?t[o]:[o,t[o]],!1)}),"values");var h=r.Arguments=r.Array;if(i("keys"),i("values"),i("entries"),!l&&d&&"values"!==h.name)try{s(h,"name",{value:"values"})}catch(g){}},"3de7":function(e,t,n){"use strict";e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"3e2d":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={baseURL:"",header:{},method:"GET",dataType:"json",responseType:"text",custom:{},timeout:6e4,withCredentials:!1,validateStatus:function(e){return e>=200&&e<300}}},"3e46":function(e,t,n){"use strict";n.r(t);var o=n("8bb0"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},"3ed7":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={avatarGroup:{urls:function(){return[]},maxCount:5,shape:"circle",mode:"scaleToFill",showMore:!0,size:40,keyName:"",gap:.5,extraValue:0}}},"3efd":function(e,t,n){"use strict";var o=n("8bdb"),i=n("1099"),r=n("1fc1"),a=n("b2b1"),s=n("a830"),c=n("41c7"),u=1!==[].unshift(0),l=u||!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}}();o({target:"Array",proto:!0,arity:1,forced:l},{unshift:function(e){var t=i(this),n=r(t),o=arguments.length;if(o){c(n+o);var u=n;while(u--){var l=u+o;u in t?t[l]=t[u]:s(t,l)}for(var d=0;d<o;d++)t[d]=arguments[d]}return a(t,n+o)}})},"3f57":function(e,t,n){"use strict";var o=n("85c1"),i=n("1c06"),r=o.document,a=i(r)&&i(r.createElement);e.exports=function(e){return a?r.createElement(e):{}}},"3fce":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("092b")),r=i.default.color,a={loadingIcon:{show:!0,color:r["u-tips-color"],textColor:r["u-tips-color"],vertical:!1,mode:"spinner",size:24,textSize:15,text:"",timingFunction:"ease-in-out",duration:1200,inactiveColor:""}};t.default=a},"3fdf":function(e,t,n){var o,i,r,a=n("bdbb").default;n("c223"),function(s,c){"object"===a(t)?e.exports=t=c(n("5e74")):(i=[n("5e74")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))}(0,(function(e){(function(){var t=e,n=t.lib,o=n.Base,i=t.enc,r=i.Utf8,a=t.algo;a.HMAC=o.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=r.parse(t));var n=e.blockSize,o=4*n;t.sigBytes>o&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),a=this._iKey=t.clone(),s=i.words,c=a.words,u=0;u<n;u++)s[u]^=1549556828,c[u]^=909522486;i.sigBytes=a.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);t.reset();var o=t.finalize(this._oKey.clone().concat(n));return o}})})()}))},"3ffc":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("uni-tabbar",{class:["uni-tabbar-"+e.position]},[n("div",{staticClass:"uni-tabbar",style:{backgroundColor:e.tabbarBackgroundColor,"backdrop-filter":"none"!==e.blurEffect?"blur(10px)":e.blurEffect}},[n("div",{staticClass:"uni-tabbar-border",style:{backgroundColor:e.borderColor}}),e._l(e.visibleList,(function(t,o){return n("div",{key:t.isMidButton?o:t.pagePath,staticClass:"uni-tabbar__item",style:t.isMidButton?{flex:"0 0 "+t.width,position:"relative"}:{},on:{click:function(n){return e._switchTab(t,o)}}},[t.isMidButton?n("div",{staticClass:"uni-tabbar__mid",style:e._uniTabbarBdStyle(t)},[t.iconPath?n("img",{style:{width:t.iconWidth,height:t.iconWidth},attrs:{src:e._getRealPath(t.iconPath)}}):e._e()]):e._e(),n("div",{staticClass:"uni-tabbar__bd",style:{height:e.height}},[e.getIconPath(t,o)||t.iconfont||t.iconPath||t.isMidButton?n("div",{staticClass:"uni-tabbar__icon",class:{"uni-tabbar__icon__diff":!t.text},style:{width:e.iconWidth,height:e.iconWidth}},[t.iconfont?n("div",{staticClass:"uni-tabbar__iconfont",style:{color:e.selectedIndex===o?t.iconfont.selectedColor:t.iconfont.color,fontSize:t.iconfont.fontSize||e.iconWidth}},[e._v("\n            "+e._s(e.selectedIndex===o?t.iconfont.selectedText:t.iconfont.text)+"\n          ")]):t.isMidButton?e._e():n("img",{attrs:{src:e._getRealPath(e.getIconPath(t,o))}})]):e._e(),t.text?n("div",{staticClass:"uni-tabbar__label",style:{color:e.selectedIndex===o?e.selectedColor:e.color,fontSize:e.fontSize,lineHeight:t.iconPath?"normal":1.8,marginTop:t.iconPath?e.spacing:"inherit"}},[e._v("\n          "+e._s(t.text)+"\n        ")]):e._e(),t.redDot?n("div",{staticClass:"uni-tabbar__reddot",class:{"uni-tabbar__badge":!!t.badge}},[e._v("\n          "+e._s(t.badge)+"\n        ")]):e._e()])])}))],2),n("div",{staticClass:"uni-placeholder",style:{height:e.height}})])},i=[]},"400b":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.showTabBarRedDot=t.showTabBar=t.setTabBarStyle=t.setTabBarItem=t.setTabBarBadge=t.removeTabBarBadge=t.hideTabBarRedDot=t.hideTabBar=void 0,n("64aa"),n("5c47"),n("0506");var i=n("1ffa"),r=o(n("ccb8")),a={type:Number,required:!0},s={index:a,text:{type:String},iconPath:{type:String},selectedIconPath:{type:String},pagePath:{type:String}};t.setTabBarItem=s;var c={color:{type:String},selectedColor:{type:String},backgroundColor:{type:String},backgroundImage:{type:String,validator:function(e,t){e&&!/^(linear|radial)-gradient\(.+?\);?$/.test(e)&&(t.backgroundImage=(0,r.default)(e))}},backgroundRepeat:{type:String},borderStyle:{type:String,validator:function(e,t){e&&(t.borderStyle="black"===e?"black":"white")}}};t.setTabBarStyle=c;var u={animation:{type:Boolean,default:!1}};t.hideTabBar=u;var l={animation:{type:Boolean,default:!1}};t.showTabBar=l;var d={index:a};t.hideTabBarRedDot=d;var f={index:a};t.showTabBarRedDot=f;var p={index:a};t.removeTabBarBadge=p;var h={index:a,text:{type:String,required:!0,validator:function(e,t){(0,i.getLen)(e)>=4&&(t.text="...")}}};t.setTabBarBadge=h},4085:function(e,t,n){"use strict";var o=n("8bdb"),i=n("85c1");o({global:!0,forced:i.globalThis!==i},{globalThis:i})},4100:function(e,t,n){"use strict";var o=n("8bdb"),i=n("bb80"),r=n("7992"),a=n("1099"),s=n("1fc1"),c=n("a830"),u=n("9e70"),l=n("af9e"),d=n("b643"),f=n("2b04"),p=n("5fd9"),h=n("8d24"),g=n("0173"),_=n("a700"),v=[],m=i(v.sort),y=i(v.push),M=l((function(){v.sort(void 0)})),I=l((function(){v.sort(null)})),C=f("sort"),b=!l((function(){if(g)return g<70;if(!(p&&p>3)){if(h)return!0;if(_)return _<603;var e,t,n,o,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(o=0;o<47;o++)v.push({k:t+o,v:n})}for(v.sort((function(e,t){return t.v-e.v})),o=0;o<v.length;o++)t=v[o].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}})),T=M||!I||!C||!b;o({target:"Array",proto:!0,forced:T},{sort:function(e){void 0!==e&&r(e);var t=a(this);if(b)return void 0===e?m(t):m(t,e);var n,o,i=[],l=s(t);for(o=0;o<l;o++)o in t&&y(i,t[o]);d(i,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:u(t)>u(n)?1:-1}}(e)),n=s(i),o=0;while(o<n)t[o]=i[o++];while(o<l)c(t,o++);return t}})},"415b":function(e,t,n){var o=n("1faa"),i=n("a791"),r=n("632d"),a=n("d191"),s=n("b4b8"),c=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor;t.f=o?r?function(e,t,n){if(a(e),t=s(t),a(n),"function"===typeof e&&"prototype"===t&&"value"in n&&"writable"in n&&!n["writable"]){var o=l(e,t);o&&o["writable"]&&(e[t]=n.value,n={configurable:"configurable"in n?n["configurable"]:o["configurable"],enumerable:"enumerable"in n?n["enumerable"]:o["enumerable"],writable:!1})}return u(e,t,n)}:u:function(e,t,n){if(a(e),t=s(t),a(n),i)try{return u(e,t,n)}catch(o){}if("get"in n||"set"in n)throw c("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},"417a":function(e,t,n){"use strict";var o=n("af9e"),i=n("0b5a");e.exports=!o((function(){var e=new Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",i(1,7)),7!==e.stack)}))},"41c7":function(e,t,n){"use strict";var o=TypeError;e.exports=function(e){if(e>9007199254740991)throw o("Maximum allowed index exceeded");return e}},"41f8":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.initEvents=function(){window.addEventListener("touchstart",_,d),window.addEventListener("touchmove",v,d),window.addEventListener("touchend",p,d),window.addEventListener("touchcancel",p,d)},t.processEvent=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(t._processed)return t.type=n.type||e,t;if("click"===e){var r=(0,s.default)(),d=r.top;n={x:t.x,y:t.y-d},t.touches=t.changedTouches=[{force:1,identifier:0,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY}]}var f=(0,a.wrapperMPEvent)({type:n.type||e,timeStamp:t.timeStamp||0,detail:n,target:c(o,n),currentTarget:c(i,!1,!0),touches:t instanceof Event||t instanceof CustomEvent?u(t.touches):t.touches,changedTouches:t instanceof Event||t instanceof CustomEvent?u(t.changedTouches):t.changedTouches,preventDefault:function(){},stopPropagation:function(){}});if(l(e)){var p=(0,s.default)(),h=p.top;f.pageX=t.pageX,f.pageY=t.pageY-h,f.clientX=t.clientX,f.clientY=t.clientY-h}0;return f},n("aa9c"),n("9db6"),n("4626");var i=n("1ffa"),r=n("c9ac"),a=n("7b61"),s=o(n("141c"));function c(e,t){var n={id:e.id,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,dataset:(0,r.getTargetDataset)(e)};return t&&Object.assign(n,t),n}function u(e){if(e){for(var t=[],n=(0,s.default)(),o=n.top,i=0;i<e.length;i++){var r=e[i];t.push({identifier:r.identifier,pageX:r.pageX,pageY:r.pageY-o,clientX:r.clientX,clientY:r.clientY-o,force:r.force||0})}return t}return[]}function l(e){return e.startsWith("mouse")||["contextmenu"].includes(e)}var d=!!i.supportsPassive&&{passive:!0},f=!1;function p(){f&&(clearTimeout(f),f=!1)}var h=0,g=0;function _(e){if(p(),1===e.touches.length){var t=e.touches[0],n=t.pageX,o=t.pageY;h=n,g=o,f=setTimeout((function(){var t=new CustomEvent("longpress",{bubbles:!0,cancelable:!0,target:e.target,currentTarget:e.currentTarget});t.touches=e.touches,t.changedTouches=e.changedTouches,e.target.dispatchEvent(t)}),350)}}function v(e){if(f){if(1!==e.touches.length)return p();var t=e.touches[0],n=t.pageX,o=t.pageY;return Math.abs(n-h)>10||Math.abs(o-g)>10?p():void 0}}},"422b":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={collapseItem:{title:"",value:"",label:"",disabled:!1,isLink:!0,clickable:!0,border:!0,align:"left",name:"",icon:"",duration:300}}},"422c":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.getAppBaseInfo=f,t.getDeviceInfo=d,t.getSystemInfo=function(){return p()},t.getSystemInfoSync=p;var i=n("2fbb"),r=o(n("cdbd")),a=n("a3f7"),s=n("1ffa"),c={},u=!0;function l(){u&&(c=(0,a.getBrowserInfo)())}function d(){l();var e=c,t=e.deviceBrand,n=e.deviceModel,o=e.brand,i=e.model,a=e.platform,s=e.system,u=e.deviceOrientation,d=e.deviceType;return{brand:o,deviceBrand:t,deviceModel:n,devicePixelRatio:window.devicePixelRatio,deviceId:(0,r.default)(),deviceOrientation:u,deviceType:d,model:i,platform:a,system:s}}function f(){l();var e=c,t=e.theme,n=e.language,o=e.browserName,i=e.browserVersion,r=uni&&uni.getLocale?uni.getLocale():n;return{appId:__uniConfig.appId,appName:__uniConfig.appName,appVersion:__uniConfig.appVersion,appVersionCode:__uniConfig.appVersionCode,appLanguage:r,enableDebug:!1,hostSDKVersion:void 0,hostPackageName:void 0,hostFontSizeSetting:void 0,hostName:o,hostVersion:i,hostTheme:t,hostLanguage:n,language:n,SDKVersion:"",theme:t,version:""}}function p(){u=!0,l(),u=!1;var e=(0,i.getWindowInfo)(),t=d(),n=f();u=!0;var o=c,r=o.ua,a=o.browserName,p=o.browserVersion,h=o.osname,g=o.osversion,_=Object.assign({},e,t,n,{browserName:a,browserVersion:p,fontSizeSetting:n.hostFontSizeSetting,osName:h.toLocaleLowerCase(),osVersion:g,osLanguage:void 0,osTheme:void 0,uniPlatform:"web",uniCompileVersion:__uniConfig.compilerVersion,uniRuntimeVersion:__uniConfig.compilerVersion,ua:r});return delete _.screenTop,delete _.enableDebug,__uniConfig.darkmode||delete _.theme,(0,s.sortObject)(_)}},4259:function(e,t,n){"use strict";var o=n("8bdb");o({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991})},"42db":function(e,t,n){"use strict";(function(e,o){n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.publish=function(t,n){return e.emit("api."+t,n)},t.publishHandler=function(e,t,n){o.UniViewJSBridge.subscribeHandler(e,t,n)}}).call(this,n("ef66"),n("0ee4"))},4370:function(e,t,n){"use strict";n.r(t);var o=n("d386"),i=n("e24a");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a=n("828b"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},4379:function(e,t,n){"use strict";var o=n("ac38"),i=n("323c");e.exports=function(e,t){return o(i(e),t)}},"437f":function(e,t,n){"use strict";var o=n("6aa6"),i=n("e4ca"),r=n("8c08"),a=n("ab4a"),s=r("species");e.exports=function(e){var t=o(e);a&&t&&!t[s]&&i(t,s,{configurable:!0,get:function(){return this}})}},4380:function(e,t,n){"use strict";n.r(t);var o=n("3ffc"),i=n("bac6");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a=n("828b"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},4393:function(e,t,n){var o,i,r,a=n("bdbb").default;(function(s,c){"object"===a(t)?e.exports=t=c(n("5e74")):(i=[n("5e74")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))})(0,(function(e){return function(){var t=e,n=t.lib,o=n.WordArray,i=n.Hasher,r=t.algo,a=[],s=r.SHA1=i.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],i=n[1],r=n[2],s=n[3],c=n[4],u=0;u<80;u++){if(u<16)a[u]=0|e[t+u];else{var l=a[u-3]^a[u-8]^a[u-14]^a[u-16];a[u]=l<<1|l>>>31}var d=(o<<5|o>>>27)+c+a[u];d+=u<20?1518500249+(i&r|~i&s):u<40?1859775393+(i^r^s):u<60?(i&r|i&s|r&s)-1894007588:(i^r^s)-899497514,c=s,s=r,r=i<<30|i>>>2,i=o,o=d}n[0]=n[0]+o|0,n[1]=n[1]+i|0,n[2]=n[2]+r|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[14+(o+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(o+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA1=i._createHelper(s),t.HmacSHA1=i._createHmacHelper(s)}(),e.SHA1}))},"43e3":function(e,t,n){"use strict";(function(o,i){var r,a,s=n("bdbb").default;n("4085"),n("dc8a"),n("01a2"),n("8f71"),n("bf0f"),n("9a2c"),n("aa9c"),n("2797"),n("a644"),n("a03a"),n("6a54"),n("e39c"),n("844d"),n("18f7"),n("de6c"),n("7a76"),n("c9b5"),n("8a8d"),n("926e"),n("7996"),n("6a88"),n("c1a3"),n("5ef2"),n("ab80"),n("08eb"),n("f7a5"),n("5c47"),n("0506"),n("fd3c"),n("64aa"),n("e838"),n("2c10"),n("d4b5"),n("c223"),n("4626"),n("5ac7"),n("a1c1"),n("7f48"),n("aa77"),n("9db6"),n("e966"),n("dfcf"),n("dc89"),n("2425"),n("20f3"),n("22b6"),n("3efd"),n("dd2b"),n("4100"),n("bd06"),n("473f"),n("9979"),n("0c26"),n("4db2"),n("c976"),n("4d8f"),n("7b97"),n("668a"),n("c5b7"),n("8ff5"),n("2378"),n("641a"),n("64e0"),n("cce3"),n("efba"),n("d009"),n("bd7d"),n("7edd"),n("d798"),n("f547"),n("5e54"),n("b60a"),n("8c18"),n("12973"),n("f991"),n("198e"),n("8557"),n("63b1"),n("1954"),n("1cf1"),n("562d"),n("23f4"),n("7d2f"),n("9c4e"),n("247d"),n("c02e"),n("f555"),function(o,i){"object"==s(t)&&"undefined"!=typeof e?e.exports=i():(r=i,a="function"===typeof r?r.call(t,n,t,e):r,void 0===a||(e.exports=a))}(0,(function(){function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function t(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach((function(e){u(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function n(e){return(n="function"==typeof Symbol&&"symbol"==s(Symbol.iterator)?function(e){return s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":s(e)})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function h(e,t,n){return(h=p()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return n&&f(i,n.prototype),i}).apply(null,arguments)}function g(e){var t="function"==typeof Map?new Map:void 0;return(g=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return h(e,arguments,d(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),f(o,e)})(e)}function _(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){if(t&&("object"==s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function y(e){var t=p();return function(){var n,o=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return m(this,n)}}function M(e,t){return C(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,i,r=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(o=n.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(d){s=!0,i=d}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return r}}(e,t)||T(e,t)||E()}function I(e){return function(e){if(Array.isArray(e))return S(e)}(e)||b(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e){if(Array.isArray(e))return e}function b(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function T(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function E(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=T(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}var D={SDK_READY:"sdkStateReady",SDK_NOT_READY:"sdkStateNotReady",SDK_DESTROY:"sdkDestroy",MESSAGE_RECEIVED:"onMessageReceived",MESSAGE_MODIFIED:"onMessageModified",MESSAGE_REVOKED:"onMessageRevoked",MESSAGE_READ_BY_PEER:"onMessageReadByPeer",MESSAGE_READ_RECEIPT_RECEIVED:"onMessageReadReceiptReceived",MESSAGE_EXTENSIONS_UPDATED:"onMessageExtensionsUpdated",MESSAGE_EXTENSIONS_DELETED:"onMessageExtensionsDeleted",CONVERSATION_LIST_UPDATED:"onConversationListUpdated",TOTAL_UNREAD_MESSAGE_COUNT_UPDATED:"onTotalUnreadMessageCountUpdated",CONVERSATION_GROUP_LIST_UPDATED:"onConversationGroupListUpdated",CONVERSATION_IN_GROUP_UPDATED:"onConversationInGroupUpdated",GROUP_LIST_UPDATED:"onGroupListUpdated",GROUP_SYSTEM_NOTICE_RECEIVED:"receiveGroupSystemNotice",GROUP_ATTRIBUTES_UPDATED:"groupAttributesUpdated",GROUP_COUNTER_UPDATED:"onGroupCounterUpdated",TOPIC_CREATED:"onTopicCreated",TOPIC_DELETED:"onTopicDeleted",TOPIC_UPDATED:"onTopicUpdated",PROFILE_UPDATED:"onProfileUpdated",USER_STATUS_UPDATED:"onUserStatusUpdated",BLACKLIST_UPDATED:"blacklistUpdated",FRIEND_LIST_UPDATED:"onFriendListUpdated",FRIEND_GROUP_LIST_UPDATED:"onFriendGroupListUpdated",FRIEND_APPLICATION_LIST_UPDATED:"onFriendApplicationListUpdated",KICKED_OUT:"kickedOut",ERROR:"error",NET_STATE_CHANGE:"netStateChange",SDK_RELOAD:"sdkReload"},A={MSG_TEXT:"TIMTextElem",MSG_IMAGE:"TIMImageElem",MSG_SOUND:"TIMSoundElem",MSG_AUDIO:"TIMSoundElem",MSG_FILE:"TIMFileElem",MSG_FACE:"TIMFaceElem",MSG_VIDEO:"TIMVideoFileElem",MSG_GEO:"TIMLocationElem",MSG_LOCATION:"TIMLocationElem",MSG_GRP_TIP:"TIMGroupTipElem",MSG_GRP_SYS_NOTICE:"TIMGroupSystemNoticeElem",MSG_CUSTOM:"TIMCustomElem",MSG_MERGER:"TIMRelayElem",MSG_PRIORITY_HIGH:"High",MSG_PRIORITY_NORMAL:"Normal",MSG_PRIORITY_LOW:"Low",MSG_PRIORITY_LOWEST:"Lowest",CONV_C2C:"C2C",CONV_GROUP:"GROUP",CONV_TOPIC:"TOPIC",CONV_SYSTEM:"@TIM#SYSTEM",CONV_AT_ME:1,CONV_AT_ALL:2,CONV_AT_ALL_AT_ME:3,CONV_MARK_TYPE_STAR:1,CONV_MARK_TYPE_UNREAD:2,CONV_MARK_TYPE_FOLD:4,CONV_MARK_TYPE_HIDE:8,GRP_PRIVATE:"Private",GRP_WORK:"Private",GRP_PUBLIC:"Public",GRP_CHATROOM:"ChatRoom",GRP_MEETING:"ChatRoom",GRP_AVCHATROOM:"AVChatRoom",GRP_COMMUNITY:"Community",GRP_MBR_ROLE_OWNER:"Owner",GRP_MBR_ROLE_ADMIN:"Admin",GRP_MBR_ROLE_MEMBER:"Member",GRP_MBR_ROLE_CUSTOM:"Custom",GRP_TIP_MBR_JOIN:1,GRP_TIP_MBR_QUIT:2,GRP_TIP_MBR_KICKED_OUT:3,GRP_TIP_MBR_SET_ADMIN:4,GRP_TIP_MBR_CANCELED_ADMIN:5,GRP_TIP_GRP_PROFILE_UPDATED:6,GRP_TIP_MBR_PROFILE_UPDATED:7,GRP_TIP_BAN_AVCHATROOM_MEMBER:10,GRP_TIP_UNBAN_AVCHATROOM_MEMBER:11,MSG_REMIND_ACPT_AND_NOTE:"AcceptAndNotify",MSG_REMIND_ACPT_NOT_NOTE:"AcceptNotNotify",MSG_REMIND_DISCARD:"Discard",GENDER_UNKNOWN:"Gender_Type_Unknown",GENDER_FEMALE:"Gender_Type_Female",GENDER_MALE:"Gender_Type_Male",KICKED_OUT_MULT_ACCOUNT:"multipleAccount",KICKED_OUT_MULT_DEVICE:"multipleDevice",KICKED_OUT_USERSIG_EXPIRED:"userSigExpired",KICKED_OUT_REST_API:"REST_API_Kick",ALLOW_TYPE_ALLOW_ANY:"AllowType_Type_AllowAny",ALLOW_TYPE_NEED_CONFIRM:"AllowType_Type_NeedConfirm",ALLOW_TYPE_DENY_ANY:"AllowType_Type_DenyAny",FORBID_TYPE_NONE:"AdminForbid_Type_None",FORBID_TYPE_SEND_OUT:"AdminForbid_Type_SendOut",JOIN_OPTIONS_FREE_ACCESS:"FreeAccess",JOIN_OPTIONS_NEED_PERMISSION:"NeedPermission",JOIN_OPTIONS_DISABLE_APPLY:"DisableApply",JOIN_STATUS_SUCCESS:"JoinedSuccess",JOIN_STATUS_ALREADY_IN_GROUP:"AlreadyInGroup",JOIN_STATUS_WAIT_APPROVAL:"WaitAdminApproval",INVITE_OPTIONS_DISABLE_INVITE:"DisableInvite",INVITE_OPTIONS_NEED_PERMISSION:"NeedPermission",INVITE_OPTIONS_FREE_ACCESS:"FreeAccess",GRP_PROFILE_OWNER_ID:"ownerID",GRP_PROFILE_CREATE_TIME:"createTime",GRP_PROFILE_LAST_INFO_TIME:"lastInfoTime",GRP_PROFILE_MEMBER_NUM:"memberNum",GRP_PROFILE_MAX_MEMBER_NUM:"maxMemberNum",GRP_PROFILE_JOIN_OPTION:"joinOption",GRP_PROFILE_INVITE_OPTION:"inviteOption",GRP_PROFILE_INTRODUCTION:"introduction",GRP_PROFILE_NOTIFICATION:"notification",GRP_PROFILE_MUTE_ALL_MBRS:"muteAllMembers",SNS_ADD_TYPE_SINGLE:"Add_Type_Single",SNS_ADD_TYPE_BOTH:"Add_Type_Both",SNS_DELETE_TYPE_SINGLE:"Delete_Type_Single",SNS_DELETE_TYPE_BOTH:"Delete_Type_Both",SNS_APPLICATION_TYPE_BOTH:"Pendency_Type_Both",SNS_APPLICATION_SENT_TO_ME:"Pendency_Type_ComeIn",SNS_APPLICATION_SENT_BY_ME:"Pendency_Type_SendOut",SNS_APPLICATION_AGREE:"Response_Action_Agree",SNS_APPLICATION_AGREE_AND_ADD:"Response_Action_AgreeAndAdd",SNS_CHECK_TYPE_BOTH:"CheckResult_Type_Both",SNS_CHECK_TYPE_SINGLE:"CheckResult_Type_Single",SNS_TYPE_NO_RELATION:"CheckResult_Type_NoRelation",SNS_TYPE_A_WITH_B:"CheckResult_Type_AWithB",SNS_TYPE_B_WITH_A:"CheckResult_Type_BWithA",SNS_TYPE_BOTH_WAY:"CheckResult_Type_BothWay",NET_STATE_CONNECTED:"connected",NET_STATE_CONNECTING:"connecting",NET_STATE_DISCONNECTED:"disconnected",MSG_AT_ALL:"__kImSDK_MesssageAtALL__",READ_ALL_C2C_MSG:"readAllC2CMessage",READ_ALL_GROUP_MSG:"readAllGroupMessage",READ_ALL_MSG:"readAllMessage",USER_STATUS_UNKNOWN:0,USER_STATUS_ONLINE:1,USER_STATUS_OFFLINE:2,USER_STATUS_UNLOGINED:3},L=function(){function e(){r(this,e),this.cache=[],this.options=null}return c(e,[{key:"use",value:function(e){if("function"!=typeof e)throw"middleware must be a function";return this.cache.push(e),this}},{key:"next",value:function(e){if(this.middlewares&&this.middlewares.length>0)return this.middlewares.shift().call(this,this.options,this.next.bind(this))}},{key:"run",value:function(e){return this.middlewares=this.cache.map((function(e){return e})),this.options=e,this.next()}}]),e}(),O=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,e),this.high=t,this.low=n}return c(e,[{key:"equal",value:function(e){return null!==e&&this.low===e.low&&this.high===e.high}},{key:"toString",value:function(){var e=Number(this.high).toString(16),t=Number(this.low).toString(16);if(t.length<8)for(var n=8-t.length;n;)t="0"+t,n--;return e+t}}]),e}(),R={TEST:{CHINA:{DEFAULT:"wss://wss-dev.tim.qq.com"},OVERSEA:{DEFAULT:"wss://wss-dev.tim.qq.com"},SINGAPORE:{DEFAULT:"wss://wsssgp-dev.im.qcloud.com"},KOREA:{DEFAULT:"wss://wsskr-dev.im.qcloud.com"},GERMANY:{DEFAULT:"wss://wssger-dev.im.qcloud.com"},IND:{DEFAULT:"wss://wssind-dev.im.qcloud.com"},JPN:{DEFAULT:"wss://wssjpn-dev.im.qcloud.com"},USA:{DEFAULT:"wss://wssusa-dev.im.qcloud.com"}},PRODUCTION:{CHINA:{DEFAULT:"wss://wss.im.qcloud.com",BACKUP:"wss://wss.tim.qq.com",STAT:"https://events.im.qcloud.com",ANYCAST:"wss://162.14.13.203"},OVERSEA:{DEFAULT:"wss://wss.im.qcloud.com",BACKUP:"wss://wss.my-imcloud.com",STAT:"https://api.my-imcloud.com"},SINGAPORE:{DEFAULT:"wss://wsssgp.im.qcloud.com",BACKUP:"wss://wsssgp.my-imcloud.com",STAT:"https://apisgp.my-imcloud.com"},KOREA:{DEFAULT:"wss://wsskr.im.qcloud.com",BACKUP:"wss://wsskr.my-imcloud.com",STAT:"https://apikr.my-imcloud.com"},GERMANY:{DEFAULT:"wss://wssger.im.qcloud.com",BACKUP:"wss://wssger.my-imcloud.com",STAT:"https://apiger.my-imcloud.com"},IND:{DEFAULT:"wss://wssind.my-imcloud.com",BACKUP:"wss://wssind.im.qcloud.com",STAT:"https://apiind.my-imcloud.com"},JPN:{DEFAULT:"wss://wssjpn.im.qcloud.com",BACKUP:"wss://wssjpn.my-imcloud.com",STAT:"https://apijpn.my-imcloud.com"},USA:{DEFAULT:"wss://wssusa.im.qcloud.com",BACKUP:"wss://wssusa.my-imcloud.com",STAT:"https://apiusa.my-imcloud.com"}}},w={ANDROID:2,IOS:3,MAC:4,WEB:7,WX_MP:8,QQ_MP:9,TT_MP:10,BAIDU_MP:11,ALI_MP:12,IPAD:13,UNI_NATIVE_APP:15},N="1.7.3",P=537048168,G="CHINA",U={HOST:{CURRENT:{DEFAULT:"wss://wss.im.qcloud.com",STAT:"https://events.im.qcloud.com"},setCurrent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G;this.CURRENT=R.PRODUCTION[e]}},NAME:{OPEN_IM:"openim",OPEN_IM_MSG_EXT:"openim_msg_ext_http_svc",GROUP:"group_open_http_svc",GROUP_AVCHATROOM:"group_open_avchatroom_http_svc",GROUP_COMMUNITY:"million_group_open_http_svc",GROUP_ATTR:"group_open_attr_http_svc",FRIEND:"sns",PROFILE:"profile",RECENT_CONTACT:"recentcontact",PIC:"openpic",BIG_GROUP_NO_AUTH:"group_open_http_noauth_svc",BIG_GROUP_LONG_POLLING:"group_open_long_polling_http_svc",BIG_GROUP_LONG_POLLING_NO_AUTH:"group_open_long_polling_http_noauth_svc",IM_OPEN_STAT:"imopenstat",WEB_IM:"webim",IM_COS_SIGN:"im_cos_sign_svr",CUSTOM_UPLOAD:"im_cos_msg",HEARTBEAT:"heartbeat",IM_OPEN_PUSH:"im_open_push",IM_OPEN_STATUS:"im_open_status",IM_LONG_MESSAGE:"im_long_msg",IM_CONFIG_MANAGER:"im_sdk_config_mgr",STAT_SERVICE:"StatSvc",OVERLOAD_PUSH:"OverLoadPush",IM_MSG_AUDIT_MGR:"im_msg_audit_mgr",TUIROOM_SVR:"tui_room_svr",IM_OPEN_TRANSLATE:"im_open_translate"},CMD:{LOGIN:"wslogin",LOGOUT_LONG_POLL:"longpollinglogout",LOGOUT:"wslogout",HELLO:"wshello",STAT_BACKGROUND:"ws_stat_background",STAT_FOREGROUND:"ws_stat_foreground",SET_TOKEN:"ws_stat_settoken",PORTRAIT_GET:"portrait_get_all",PORTRAIT_SET:"portrait_set",GET_LONG_POLL_ID:"getlongpollingid",LONG_POLL:"longpolling",AVCHATROOM_LONG_POLL:"get_msg",ADD_FRIEND:"friend_add",UPDATE_FRIEND:"friend_update",GET_FRIEND_LIST:"friend_get",GET_FRIEND_PROFILE:"friend_get_specified",DELETE_FRIEND:"friend_delete",CHECK_FRIEND:"friend_check",GET_FRIEND_GROUP_LIST:"group_get",RESPOND_FRIEND_APPLICATION:"friend_response",GET_FRIEND_APPLICATION_LIST:"pendency_get",DELETE_FRIEND_APPLICATION:"pendency_delete",REPORT_FRIEND_APPLICATION:"pendency_report",GET_GROUP_APPLICATION:"get_pendency",CREATE_FRIEND_GROUP:"group_add",DELETE_FRIEND_GROUP:"group_delete",UPDATE_FRIEND_GROUP:"group_update",GET_BLACKLIST:"black_list_get",ADD_BLACKLIST:"black_list_add",DELETE_BLACKLIST:"black_list_delete",CREATE_GROUP:"create_group",GET_JOINED_GROUPS:"get_joined_group_list",SET_GROUP_ATTRIBUTES:"set_group_attr",MODIFY_GROUP_ATTRIBUTES:"modify_group_attr",DELETE_GROUP_ATTRIBUTES:"delete_group_attr",CLEAR_GROUP_ATTRIBUTES:"clear_group_attr",GET_GROUP_ATTRIBUTES:"get_group_attr",SEND_MESSAGE:"sendmsg",REVOKE_C2C_MESSAGE:"msgwithdraw",DELETE_C2C_MESSAGE:"delete_c2c_msg_ramble",MODIFY_C2C_MESSAGE:"modify_c2c_msg",MODIFY_C2C_MESSAGE_EXTENSIONS:"set_key_values",GET_C2C_MESSAGE_EXTENSIONS:"get_key_values",SEND_GROUP_MESSAGE:"send_group_msg",REVOKE_GROUP_MESSAGE:"group_msg_recall",DELETE_GROUP_MESSAGE:"delete_group_ramble_msg_by_seq",MODIFY_GROUP_MESSAGE:"modify_group_msg",MODIFY_GROUP_MESSAGE_EXTENSIONS:"group_set_key_values",GET_GROUP_MESSAGE_EXTENSIONS:"group_get_key_values",GET_GROUP_INFO:"get_group_self_member_info",GET_GROUP_MEMBER_INFO:"get_specified_group_member_info",GET_GROUP_MEMBER_LIST:"get_group_member_info",GET_AVCHATROOM_MEMBER_LIST:"get_members",MARK_AVCHATROOM_MEMBER_INFO:"modify_user_info",QUIT_GROUP:"quit_group",CHANGE_GROUP_OWNER:"change_group_owner",DESTROY_GROUP:"destroy_group",ADD_GROUP_MEMBER:"add_group_member",DELETE_GROUP_MEMBER:"delete_group_member",BAN_AVCHATROOM_MEMBER:"ban_group_member",SEARCH_GROUP_BY_ID:"get_group_public_info",APPLY_JOIN_GROUP:"apply_join_group",HANDLE_APPLY_JOIN_GROUP:"handle_apply_join_group",HANDLE_INVITE_JOIN_GROUP:"handle_invite_join_permission_group",HANDLE_GROUP_INVITATION:"handle_invite_join_group",MODIFY_GROUP_INFO:"modify_group_base_info",MODIFY_GROUP_MEMBER_INFO:"modify_group_member_info",DELETE_GROUP_SYSTEM_MESSAGE:"deletemsg",DELETE_GROUP_AT_TIPS:"deletemsg",GET_GROUP_NOTIFY:"get_group_notify",GET_CONVERSATION_LIST:"get",PAGING_GET_CONVERSATION_LIST:"page_get",DELETE_CONVERSATION:"batch_delete",CLEAR_HISTORY_MESSAGE:"clear_msg",PIN_CONVERSATION:"top",SET_CONVERSATION_CUSTOM_DATA:"mark_contact",MARK_CONVERSATION:"mark_contact",CREATE_CONVERSATION_GROUP:"create_contact_group",DELETE_CONVERSATION_GROUP:"del_contact_group",UPDATE_CONVERSATION_GROUP:"update_contact_group",GET_CONVERSATION_GROUP_LIST:"get_contact_group",GET_MESSAGES:"getmsg",GET_C2C_ROAM_MESSAGES:"getroammsg",SET_C2C_PEER_MUTE_NOTIFICATIONS:"set_c2c_peer_mute_notifications",GET_C2C_PEER_MUTE_NOTIFICATIONS:"get_c2c_peer_mute_notifications",GET_GROUP_ROAM_MESSAGES:"group_msg_get",GET_READ_RECEIPT:"get_group_msg_receipt",GET_READ_RECEIPT_DETAIL:"get_group_msg_receipt_detail",SEND_READ_RECEIPT:"group_msg_receipt",SEND_C2C_READ_RECEIPT:"c2c_msg_read_receipt",SET_C2C_MESSAGE_READ:"msgreaded",GET_PEER_READ_TIME:"get_peer_read_time",SET_GROUP_MESSAGE_READ:"msg_read_report",FILE_READ_AND_WRITE_AUTHKEY:"authkey",FILE_UPLOAD:"pic_up",COS_SIGN:"cos",COS_PRE_SIG:"pre_sig",VIDEO_COVER:"video_cover",TIM_WEB_REPORT_V2:"tim_web_report_v2",BIG_DATA_HALLWAY_AUTH_KEY:"authkey",GET_ONLINE_MEMBER_NUM:"get_online_member_num",ALIVE:"alive",MESSAGE_PUSH:"msg_push",MULTI_MESSAGE_PUSH:"multi_msg_push_ws",MESSAGE_PUSH_ACK:"ws_msg_push_ack",STATUS_FORCE_OFFLINE:"stat_forceoffline",DOWNLOAD_MERGER_MESSAGE:"get_relay_json_msg",UPLOAD_MERGER_MESSAGE:"save_relay_json_msg",FETCH_CLOUD_CONTROL_CONFIG:"fetch_config",PUSHED_CLOUD_CONTROL_CONFIG:"push_configv2",FETCH_COMMERCIAL_CONFIG:"fetch_imsdk_purchase_bitsv2",PUSHED_COMMERCIAL_CONFIG:"push_imsdk_purchase_bitsv2",KICK_OTHER:"KickOther",OVERLOAD_NOTIFY:"notify2",SET_ALL_MESSAGE_READ:"read_all_unread_msg",CREATE_TOPIC:"create_topic",DELETE_TOPIC:"destroy_topic",UPDATE_TOPIC_PROFILE:"modify_topic",GET_TOPIC_LIST:"get_topic",SET_SELF_STATUS:"ws_set_custom_status",GET_USER_STATUS:"ws_get_user_status",SUBSCRIBE_USER_STATUS:"ws_status_subscribe",UNSUBSCRIBE_USER_STATUS:"ws_status_unsubscribe",GET_RPOFANITY_LIST:"get_local_words",TRANSLATE_TEXT:"ws_batch_trans_text",UPDATE_GROUP_COUNTER:"update_group_counter",GET_GROUP_COUNTER:"get_group_counter"},CHANNEL:{SOCKET:1,XHR:2,AUTO:0},NAME_VERSION:{openim:"v4",group_open_http_svc:"v4",sns:"v4",profile:"v4",recentcontact:"v4",openpic:"v4",group_open_http_noauth_svc:"v4",group_open_long_polling_http_svc:"v4",group_open_long_polling_http_noauth_svc:"v4",imopenstat:"v4",im_cos_sign_svr:"v4",im_cos_msg:"v4",webim:"v4",im_open_push:"v4",im_open_status:"v4"}},x={SEARCH_MSG:new O(0,Math.pow(2,0)).toString(),SEARCH_GRP_SNS:new O(0,Math.pow(2,1)).toString(),AVCHATROOM_HISTORY_MSG:new O(0,Math.pow(2,2)).toString(),GRP_COMMUNITY:new O(0,Math.pow(2,3)).toString(),MSG_TO_SPECIFIED_GRP_MBR:new O(0,Math.pow(2,4)).toString(),AVCHATROOM_MBR_LIST:new O(0,Math.pow(2,6)).toString(),USER_STATUS:new O(0,Math.pow(2,7)).toString(),CONV_MARK:new O(0,Math.pow(2,9)).toString(),CONV_GROUP:new O(0,Math.pow(2,10)).toString(),AVCHATROOM_BAN_MBR:new O(0,Math.pow(2,11)).toString(),MSG_EXT:new O(0,Math.pow(2,13)).toString(),GRP_COUNTER:new O(0,Math.pow(2,15)).toString()},F="group_profile";U.HOST.setCurrent(G);var q="undefined"!=typeof wx&&"function"==typeof wx.getSystemInfoSync&&Boolean(wx.getSystemInfoSync().fontSizeSetting),B=q&&"function"==typeof wx.createGamePortal,V="undefined"!=typeof qq&&"function"==typeof qq.getSystemInfoSync&&Boolean(qq.getSystemInfoSync().fontSizeSetting),H="undefined"!=typeof tt&&"function"==typeof tt.getSystemInfoSync&&Boolean(tt.getSystemInfoSync().fontSizeSetting),j="undefined"!=typeof swan&&"function"==typeof swan.getSystemInfoSync&&Boolean(swan.getSystemInfoSync().fontSizeSetting),K="undefined"!=typeof my&&"function"==typeof my.getSystemInfoSync&&Boolean(my.getSystemInfoSync().fontSizeSetting),W="undefined"!=typeof jd&&"function"==typeof jd.getSystemInfoSync,Y="undefined"!=typeof uni&&"undefined"==typeof window&&"function"==typeof uni.requireNativePlugin,z="undefined"!=typeof uni,$=q||V||H||j||K||Y||W,X=("undefined"!=typeof uni||"undefined"!=typeof window)&&!$,J=V?qq:H?tt:j?swan:K?my:q?wx:Y?uni:W?jd:{},Q=X&&window&&window.navigator&&window.navigator.userAgent||"",Z=/(micromessenger|webbrowser)/i.test(Q),ee=/AppleWebKit\/([\d.]+)/i.exec(Q);ee&&parseFloat(ee.pop());var te,ne,oe=(te="WEB",Z?te="WEB":V?te="QQ_MP":H?te="TT_MP":j?te="BAIDU_MP":K?te="ALI_MP":q?te="WX_MP":Y&&(te="UNI_NATIVE_APP"),w[te]),ie=/iPad/i.test(Q),re=/iPhone/i.test(Q)&&!ie,ae=/iPod/i.test(Q),se=re||ie||ae,ce=(ne=Q.match(/OS (\d+)_/i))&&ne[1]?ne[1]:null,ue=/Android/i.test(Q),le=function(){var e=Q.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}();!function(){var e=Q.match(/Chrome\/(\d+)/);e&&e[1]&&parseFloat(e[1])}();var de=/MSIE/.test(Q)||Q.indexOf("Trident")>-1&&Q.indexOf("rv:11.0")>-1,fe=function(){var e=/MSIE\s(\d+)\.\d/.exec(Q),t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(Q)&&/rv:11.0/.test(Q)&&(t=11),t}();!function(){var e=Q.match(/TBS\/(\d+)/i);e&&e[1]&&e[1]}();var pe,he,ge=/Windows/i.test(Q),_e=/MAC OS X/i.test(Q),ve=X&&"undefined"!=typeof Worker&&!de,me=ue||se,ye=X&&void 0!==window.tencent_cloud_im_csig_flutter_for_web_25F_cy;pe="undefined"!=typeof o?o:"undefined"!=typeof i&&i.console?i.console:"undefined"!=typeof window&&window.console?window.console:{};for(var Me=function(){},Ie=["assert","clear","count","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],Ce=Ie.length;Ce--;)he=Ie[Ce],o[he]||(pe[he]=Me);var be=pe,Te=0,Se=function(){return(new Date).getTime()+Te},Ee=function(){Te=0},ke=function(){return Math.floor(Se()/1e3)},De=0;function Ae(){return wt()?"%c TIM %c":"TIM"}function Le(){var e,t=((e=new Date).setTime(Se()),e);return t.toLocaleTimeString("en-US",{hour12:!1})+"."+function(e){var t;switch(e.toString().length){case 1:t="00"+e;break;case 2:t="0"+e;break;default:t=e}return t}(t.getMilliseconds())}var Oe={arguments2String:function(e){var t="";if(1===e.length)t=e[0];else for(var n=0,o=e.length;n<o;n++)$e(e[n])?Je(e[n])?t+=nt(e[n]):t+=JSON.stringify(e[n]):t+=e[n],t+=" ";return t},_exec:function(e,t){wt()?be[e](Ae(),"background:#0abf5b; padding:1px; border-radius:3px; color: #fff","background:transparent",Le(),t):be[e]("".concat(Ae()," ").concat(Le()," ").concat(t))},d:function(){if(De<=-1){var e=this.arguments2String(arguments);this._exec("debug",e)}},l:function(){if(De<=0){var e=this.arguments2String(arguments);this._exec("log",e)}},log:function(){if(De<=0){var e=this.arguments2String(arguments);this._exec("log",e)}},i:function(){if(De<=1){var e=this.arguments2String(arguments);this._exec("info",e)}},w:function(){if(De<=2){var e=this.arguments2String(arguments);this._exec("warn",e)}},e:function(){if(De<=3){var e=this.arguments2String(arguments);this._exec("error",e)}},setLevel:function(e){e<4&&this._exec("log","set level from "+De+" to "+e),De=e},getLevel:function(){return De}},Re={JPG:1,JPEG:1,GIF:2,PNG:3,BMP:4,UNKNOWN:255},we={NICK:"Tag_Profile_IM_Nick",GENDER:"Tag_Profile_IM_Gender",BIRTHDAY:"Tag_Profile_IM_BirthDay",LOCATION:"Tag_Profile_IM_Location",SELFSIGNATURE:"Tag_Profile_IM_SelfSignature",ALLOWTYPE:"Tag_Profile_IM_AllowType",LANGUAGE:"Tag_Profile_IM_Language",AVATAR:"Tag_Profile_IM_Image",MESSAGESETTINGS:"Tag_Profile_IM_MsgSettings",ADMINFORBIDTYPE:"Tag_Profile_IM_AdminForbidType",LEVEL:"Tag_Profile_IM_Level",ROLE:"Tag_Profile_IM_Role"},Ne={UNKNOWN:"Gender_Type_Unknown",FEMALE:"Gender_Type_Female",MALE:"Gender_Type_Male"},Pe={NONE:"AdminForbid_Type_None",SEND_OUT:"AdminForbid_Type_SendOut"},Ge={NEED_CONFIRM:"AllowType_Type_NeedConfirm",ALLOW_ANY:"AllowType_Type_AllowAny",DENY_ANY:"AllowType_Type_DenyAny"},Ue="JoinedSuccess",xe="WaitAdminApproval",Fe="@TOPIC#_",qe=["url"],Be=function(e){return"map"===Qe(e)},Ve=function(e){return"file"===Qe(e)},He=function(e){return null!==e&&("number"==typeof e&&!isNaN(e-0)||"object"===n(e)&&e.constructor===Number)},je=function(e){return"string"==typeof e},Ke=function(e){return null!==e&&"object"===n(e)},We=function(e){if("object"!==n(e)||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var o=t;null!==Object.getPrototypeOf(o);)o=Object.getPrototypeOf(o);return t===o},Ye=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"array"===Qe(e)},ze=function(e){return void 0===e},$e=function(e){return Ye(e)||Ke(e)},Xe=function(e){return"function"==typeof e},Je=function(e){return e instanceof Error},Qe=function(e){return Object.prototype.toString.call(e).match(/^\[object (.*)\]$/)[1].toLowerCase()},Ze=function(e){if("string"!=typeof e)return!1;var t=e[0];return!/[^a-zA-Z0-9]/.test(t)};Date.now||(Date.now=function(){return(new Date).getTime()});var et=function e(t,n,o,i){if(!$e(t)||!$e(n))return 0;for(var r,a=0,s=Object.keys(n),c=0,u=s.length;c<u;c++)if(r=s[c],!(ze(n[r])||o&&o.includes(r)))if($e(t[r])&&$e(n[r]))a+=e(t[r],n[r],o,i);else{if(i&&i.includes(n[r]))continue;t[r]!==n[r]&&(t[r]=n[r],a+=1)}return a},nt=function(e){return JSON.stringify(e,["message","code"])},ot=function(e){if(0===e.length)return 0;for(var t=0,n=0,o="undefined"!=typeof document&&void 0!==document.characterSet?document.characterSet:"UTF-8";void 0!==e[t];)n+=e[t++].charCodeAt[t]<=255?1:!1===o?3:2;return n},it=function(e){var t=e||99999999;return Math.round(Math.random()*t)},rt="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",at=rt.length,st=function(e,t){for(var n in e)if(e[n]===t)return!0;return!1},ct={},ut=function(e){return-1===e.indexOf("http://")||-1===e.indexOf("https://")?"https://"+e:e.replace(/https|http/,"https")},lt=function e(t){if(0===Object.getOwnPropertyNames(t).length)return Object.create(null);var o=Array.isArray(t)?[]:Object.create(null),i="";for(var r in t)null!==t[r]?void 0!==t[r]?(i=n(t[r]),["string","number","function","boolean"].indexOf(i)>=0?o[r]=t[r]:o[r]=e(t[r])):o[r]=void 0:o[r]=null;return o};function dt(e,t){if(!Ye(e)||!Ye(t))return!1;var n=!1;return t.forEach((function(t){var o=t.key,i=t.value,r=e.find((function(e){return e.key===o}));r?r.value!==i&&(r.value=i,n=!0):(e.push({key:o,value:i}),n=!0)})),n}var ft=function(e){return e===A.GRP_AVCHATROOM},pt=function(e){var t=e.type,n=e.groupID;return t===A.GRP_COMMUNITY||"".concat(n).startsWith("@TGS#_")&&!"".concat(n).includes(Fe)},ht=function(e){return"".concat(e).startsWith("@TGS#_")&&"".concat(e).includes(Fe)},gt=function(e){return je(e)&&e.slice(0,3)===A.CONV_C2C},_t=function(e){return je(e)&&e.slice(0,5)===A.CONV_GROUP},vt=function(e){return je(e)&&e===A.CONV_SYSTEM};function mt(e,t){var n={};return Object.keys(e).forEach((function(o){n[o]=t(e[o],o)})),n}function yt(e){return $?new Promise((function(t,n){J.getImageInfo({src:e,success:function(e){t({width:e.width,height:e.height})},fail:function(){t({width:0,height:0})}})})):de&&9===fe?Promise.resolve({width:0,height:0}):new Promise((function(t,n){var o=new Image;o.onload=function(){t({width:this.width,height:this.height}),o=null},o.onerror=function(){t({width:0,height:0}),o=null},o.src=e}))}function Mt(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return"".concat(e()+e()).concat(e()).concat(e()).concat(e()).concat(e()).concat(e()).concat(e())}function It(){var e="unknown";if(_e&&(e="mac"),ge&&(e="windows"),se&&(e="ios"),ue&&(e="android"),$)try{var t=J.getSystemInfoSync().platform;void 0!==t&&(e=t)}catch(n){}return e}function Ct(e,t){e=e.split("."),t=t.split(".");for(var n=Math.max(e.length,t.length);e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(var o=0;o<n;o++){var i=parseInt(e[o]),r=parseInt(t[o]);if(i>r)return 1;if(i<r)return-1}return 0}function bt(e){var t=e.originUrl,n=void 0===t?void 0:t,o=e.originWidth,i=e.originHeight,r=e.min,a=void 0===r?198:r,s=parseInt(o),c=parseInt(i),u={url:void 0,width:0,height:0};if((s<=c?s:c)<=a)u.url=n,u.width=s,u.height=c;else{c<=s?(u.width=Math.ceil(s*a/c),u.height=a):(u.width=a,u.height=Math.ceil(c*a/s));var l=n&&n.indexOf("?")>-1?"".concat(n,"&"):"".concat(n,"?");u.url="".concat(l,198===a?"imageView2/3/w/198/h/198":"imageView2/3/w/720/h/720")}return ze(n)?(u.url,_(u,qe)):u}function Tt(e){var t=e[2];e[2]=e[1],e[1]=t;for(var n=0;n<e.length;n++)e[n].setType(n)}function St(e){var t=e.servcmd;return t.slice(t.indexOf(".")+1)}function Et(e,t){return Math.round(Number(e)*Math.pow(10,t))/Math.pow(10,t)}function kt(e,t){return e.includes(t)}function Dt(e,t){return e.includes(t)}function At(e){return e.split(Fe)[0]}var Lt=function(e,t,n){if(ze(t))return"";switch(e){case A.MSG_TEXT:return t.text;case A.MSG_IMAGE:return n?"[Image]":"[图片]";case A.MSG_LOCATION:return n?"[Location]":"[位置]";case A.MSG_AUDIO:return n?"[Voice]":"[语音]";case A.MSG_VIDEO:return n?"[Video]":"[视频]";case A.MSG_FILE:return n?"[File]":"[文件]";case A.MSG_CUSTOM:return n?"[Custom Messages]":"[自定义消息]";case A.MSG_GRP_TIP:return n?"[Group Notification]":"[群提示消息]";case A.MSG_GRP_SYS_NOTICE:return n?"[Group System Message]":"[群系统通知]";case A.MSG_FACE:return n?"[Animated Sticker]":"[动画表情]";case A.MSG_MERGER:return n?"[Chat Record]":"[聊天记录]";default:return""}};function Ot(e){return e===A.MSG_TEXT||e===A.MSG_CUSTOM||e===A.MSG_LOCATION||e===A.MSG_FACE}function Rt(e){var t=[];if(!je(e))return t;var n=e.length;if(0===n)return t;for(var o=n-1;o>=0;o--)"1"===e[o]&&t.push(Math.pow(2,n-o-1));return t}function wt(){return!de&&!$}function Nt(e){return"the length of userIDList cannot exceed ".concat(e)}function Pt(e,t){if(e){var n=e;return t&&(e.startsWith("http://")?n=e.replace(/^http:\/\/[^/]+/,t):e.startsWith("https://")&&(n=e.replace(/^https:\/\/[^/]+/,t))),n}}var Gt=Object.prototype.hasOwnProperty;function Ut(e){if(null==e)return!0;if("boolean"==typeof e)return!1;if("number"==typeof e)return 0===e;if("string"==typeof e)return 0===e.length;if("function"==typeof e)return 0===e.length;if(Array.isArray(e))return 0===e.length;if(e instanceof Error)return""===e.message;if(We(e)){for(var t in e)if(Gt.call(e,t))return!1;return!0}return!(!Be(e)&&(n=e,"set"!==Qe(n))&&!Ve(e))&&0===e.size;var n}function xt(e,t,n){if(void 0===t)return!0;var o=!0;if(We(t))Object.keys(t).forEach((function(i){var r=1===e.length?e[0][i]:void 0;o=!!Ft(r,t[i],n,i)&&o}));else if(Ye(t))for(var i=0;i<t.length;i++)o=!!Ft(e[i],t[i],n,t[i].name)&&o;if(o)return o;throw new Error("Params validate failed.")}function Ft(e,t,n,o){if(void 0===t)return!0;var i=!0;if(t.required&&Ut(e)&&(Oe.e("[".concat(n,'] Missing required params: "').concat(o,'".')),i=!1),!Ut(e)){var r=Qe(e),a=t.type.toLowerCase();r!==a&&("asyncfunction"===r&&"function"===a||(Oe.e("[".concat(n,'] Invalid params: type check failed for "').concat(o,'".Expected ').concat(t.type,".")),i=!1))}return t.validator&&!t.validator(e)&&(Oe.e("[".concat(n,"] Invalid params: custom validator check failed for params.")),i=!1),i}var qt,Bt={UNSEND:"unSend",SUCCESS:"success",FAIL:"fail"},Vt={NOT_START:"notStart",PENDING:"pending",RESOLVED:"resolved",REJECTED:"rejected"},Ht=function(e){if(!e)return!1;if(gt(e)||_t(e)||vt(e))return!0;var t=_n("InvalidConversationID",e);return t&&Oe.w(t),!1},jt=function(e){""!==e.desc&&""!==_n("API_REFER")&&Oe.w("[".concat(e.api,"] | ").concat(e.param," | ").concat(e.desc,", ").concat(_n("API_REFER")).concat(e.api))},Kt=function(){return _n("StringRequiredLog")},Wt=function(e){return _n("NonEmptyStringRequiredLog",e)},Yt=function(){return _n("NumberRequiredLog")},zt=function(){return _n("UndefinedNotAllowedLog")},$t=function(){return _n("FileRequiredLog")},Xt=function(){return _n("FunctionRequiredLog")},Jt=function(){return _n("ArrayRequiredLog")},Qt=function(){return _n("NonEmptyArrayLog")},Zt=function(){return _n("CallbackMissingLog")},en=function(){return _n("PositiveIntegerRequiredLog")},tn=function(e,t){return _n("StringNotLongerThanLog",e,t)},nn=function(e,t){return _n("NumberLessThanLog",e,t)},on=function(e){return _n("KeyValueStringRequiredLog",e)},rn=function(){return _n("PlainObjectRequiredLog")},an=function(){return _n("NonEmptyContentRequiredLog")},sn=function(){return _n("FileNotSelectedLog")},cn=function(){return _n("MessageInstanceRequiredLog")},un=function(){return _n("NonAnonymousFunctionLog")},ln=function(){return _n("MessageExtensionNotAvailableLog")},dn={type:"String",required:!0},fn={type:"Array",required:!0},pn={type:"Object",required:!0},hn={type:"Boolean",required:!0},gn={type:"number",required:!0},_n=null,vn={hookGetAPITips:function(e){_n=e},login:{userID:dn,userSig:dn},addToBlacklist:{userIDList:fn},removeFromBlacklist:{userIDList:fn},on:[{name:"eventName",type:"String",validator:function(e){return"string"==typeof e&&0!==e.length||(jt({api:"on",param:"eventName",desc:Wt("eventName")}),!1)}},{name:"handler",type:"Function",validator:function(e){return"function"!=typeof e?(jt({api:"on",param:"handler",desc:Xt()}),!1):(""===e.name&&jt({api:"on",param:"handler",desc:un()}),!0)}}],once:[{name:"eventName",type:"String",validator:function(e){return"string"==typeof e&&0!==e.length||(jt({api:"once",param:"eventName",desc:Wt("eventName")}),!1)}},{name:"handler",type:"Function",validator:function(e){return"function"!=typeof e?(jt({api:"once",param:"handler",desc:Xt()}),!1):(""===e.name&&jt({api:"once",param:"handler",desc:un()}),!0)}}],off:[{name:"eventName",type:"String",validator:function(e){return"string"==typeof e&&0!==e.length||(jt({api:"off",param:"eventName",desc:Wt("eventName")}),!1)}},{name:"handler",type:"Function",validator:function(e){return"function"!=typeof e?(jt({api:"off",param:"handler",desc:Xt()}),!1):(""===e.name&&jt({api:"off",param:"handler",desc:un()}),!0)}}],sendMessage:[t({name:"message"},pn)],setMessageExtensions:[t(t({name:"message"},pn),{},{validator:function(e){return e.status===Bt.SUCCESS&&!0===e.isSupportExtension||(jt({api:"setMessageExtensions",param:"message",desc:ln()}),!1)}}),t({name:"extensions"},fn)],getMessageExtensions:[t(t({name:"message"},pn),{},{validator:function(e){return e.status===Bt.SUCCESS&&!0===e.isSupportExtension||(jt({api:"getMessageExtensions",param:"message",desc:ln()}),!1)}})],deleteMessageExtensions:[t(t({name:"message"},pn),{},{validator:function(e){return e.status===Bt.SUCCESS&&!0===e.isSupportExtension||(jt({api:"deleteMessageExtensions",param:"message",desc:ln()}),!1)}})],getMessageList:{conversationID:t(t({},dn),{},{validator:function(e){return Ht(e)}}),nextReqMessageID:{type:"String"},count:{type:"Number",validator:function(e){return!(!ze(e)&&!/^[1-9][0-9]*$/.test(e))||(jt({api:"getMessageList",param:"count",desc:en()}),!1)}}},getMessageListHopping:{conversationID:t(t({},dn),{},{validator:function(e){return Ht(e)}}),sequence:{type:"Number"},time:{type:"Number"},direction:{type:"Number",validator:function(e){return!(!ze(e)&&0!==e&&1!==e)||(jt({api:"getMessageListHopping",param:"direction",desc:_n("0Or1RequiredLog")}),!1)}},count:{type:"Number",validator:function(e){return!(!ze(e)&&!/^[1-9][0-9]*$/.test(e))||(jt({api:"getMessageListHopping",param:"count",desc:en}),!1)}}},setMessageRead:{conversationID:t(t({},dn),{},{validator:function(e){return Ht(e)}})},setAllMessageRead:{scope:{type:"String",required:!1,validator:function(e){return!e||-1!==[A.READ_ALL_C2C_MSG,A.READ_ALL_GROUP_MSG,A.READ_ALL_MSG].indexOf(e)||(jt({api:"setAllMessageRead",param:"scope",desc:"TIM.TYPES.READ_ALL_C2C_MSG or TIM.TYPES.READ_ALL_GROUP_MSG or TIM.TYPES.READ_ALL_MSG required"}),!1)}}},getConversationProfile:[t(t({name:"conversationID"},dn),{},{validator:function(e){return Ht(e)}})],clearHistoryMessage:[t(t({name:"conversationID"},dn),{},{validator:function(e){return Ht(e)}})],pinConversation:{conversationID:t(t({},dn),{},{validator:function(e){return Ht(e)}}),isPinned:t({},hn)},setConversationCustomData:{conversationIDList:t({},fn),customData:{type:"String",validator:function(e){return je(e)?!(e.length>256)||(jt({api:"setConversationCustomData",param:"customData",desc:tn("customData",256)}),!1):(jt({api:"setConversationCustomData",param:"customData",desc:Kt()}),!1)}}},markConversation:{conversationIDList:t({},fn),markType:{type:"number",validator:function(e){return He(e)?e<=0?(jt({api:"markConversation",param:"markType",desc:("markType",0,_n("NumberGreaterThanLog","markType",0))}),!1):!(e>=Math.pow(2,64))||(jt({api:"markConversation",param:"markType",desc:nn("markType","Math.pow(2,64)")}),!1):(jt({api:"markConversation",param:"markType",desc:Yt()}),!1)}},enableMark:t({},hn)},createConversationGroup:{conversationIDList:t({},fn),groupName:t(t({},dn),{},{validator:function(e){return!!e&&(!(e.length>32)||(jt({api:"createConversationGroup",param:"groupName",desc:tn("groupName",32)}),!1))}})},deleteConversationGroup:[t({name:"groupName"},dn)],renameConversationGroup:{oldName:t({},dn),newName:t(t({},dn),{},{validator:function(e){return!!e&&(!(e.length>32)||(jt({api:"renameConversationGroup",param:"newName",desc:tn("newName",32)}),!1))}})},addConversationsToGroup:{conversationIDList:t({},fn),groupName:t({},dn)},deleteConversationsFromGroup:{conversationIDList:t({},fn),groupName:t({},dn)},getGroupList:{groupProfileFilter:{type:"Array"}},getGroupProfile:{groupID:dn,groupCustomFieldFilter:{type:"Array"},memberCustomFieldFilter:{type:"Array"}},getGroupProfileAdvance:{groupIDList:fn},createGroup:{name:dn},joinGroup:{groupID:dn,type:{type:"String"},applyMessage:{type:"String"}},quitGroup:[t({name:"groupID"},dn)],handleApplication:{message:pn,handleAction:dn,handleMessage:{type:"String"}},changeGroupOwner:{groupID:dn,newOwnerID:dn},updateGroupProfile:{groupID:dn,muteAllMembers:{type:"Boolean"}},dismissGroup:[t({name:"groupID"},dn)],searchGroupByID:[t({name:"groupID"},dn)],initGroupAttributes:{groupID:dn,groupAttributes:t(t({},pn),{},{validator:function(e){var t=!0;return Object.keys(e).forEach((function(n){if(!je(e[n]))return jt({api:"initGroupAttributes",param:"groupAttributes",desc:on("value")}),t=!1})),t}})},setGroupAttributes:{groupID:dn,groupAttributes:t(t({},pn),{},{validator:function(e){var t=!0;return Object.keys(e).forEach((function(n){if(!je(e[n]))return jt({api:"setGroupAttributes",param:"groupAttributes",desc:on("value")}),t=!1})),t}})},deleteGroupAttributes:{groupID:dn,keyList:{type:"Array",validator:function(e){if(ze(e)||!Ye(e))return jt({api:"deleteGroupAttributes",param:"keyList",desc:Jt()}),!1;if(!Ut(e)){var t=!0;return e.forEach((function(e){if(!je(e))return jt({api:"deleteGroupAttributes",param:"keyList",desc:_n("StringArrayRequiredLog")}),t=!1})),t}return!0}}},getGroupAttributes:{groupID:dn,keyList:{type:"Array",validator:function(e){if(ze(e)||!Ye(e))return jt({api:"getGroupAttributes",param:"keyList",desc:Jt()}),!1;if(!Ut(e)){var t=!0;return e.forEach((function(e){if(!je(e))return jt({api:"getGroupAttributes",param:"keyList",desc:on("key")}),t=!1})),t}return!0}}},setGroupCounters:{groupID:dn,counters:pn},increaseGroupCounter:{groupID:dn,key:dn,value:gn},decreaseGroupCounter:{groupID:dn,key:dn,value:gn},getGroupCounters:{groupID:dn},getGroupMemberList:{groupID:dn,count:{type:"Number"}},getGroupMemberProfile:{groupID:dn,userIDList:fn,memberCustomFieldFilter:{type:"Array"}},addGroupMember:{groupID:dn,userIDList:fn},setGroupMemberRole:{groupID:dn,userID:dn,role:dn},setGroupMemberMuteTime:{groupID:dn,userID:dn,muteTime:{type:"Number",validator:function(e){return e>=0}}},setGroupMemberNameCard:{groupID:dn,userID:{type:"String"},nameCard:{type:"String",validator:function(e){return je(e)?(e.length,!0):(jt({api:"setGroupMemberNameCard",param:"nameCard",desc:Kt()}),!1)}}},setGroupMemberCustomField:{groupID:dn,userID:{type:"String"},memberCustomField:fn},deleteGroupMember:{groupID:dn},markGroupMemberList:{groupID:dn,markType:{type:"number",validator:function(e){return He(e)?!(e<1e3)||(jt({api:"markGroupMemberList",param:"markType",desc:("markType",1e3,_n("NumberGreaterOrEqualLog","markType",1e3))}),!1):(jt({api:"markGroupMemberList",param:"markType",desc:Yt()}),!1)}},userIDList:t({},fn),enableMark:t({},hn)},createTextMessage:{to:dn,conversationType:dn,payload:t(t({},pn),{},{validator:function(e){return We(e)?je(e.text)?0!==e.text.length||(jt({api:"createTextMessage",param:"payload.text",desc:an()}),!1):(jt({api:"createTextMessage",param:"payload.text",desc:Kt()}),!1):(jt({api:"createTextMessage",param:"payload",desc:rn()}),!1)}})},createTextAtMessage:{to:dn,conversationType:dn,payload:t(t({},pn),{},{validator:function(e){return We(e)?je(e.text)?0===e.text.length?(jt({api:"createTextAtMessage",param:"payload.text",desc:an()}),!1):!(e.atUserList&&!Ye(e.atUserList))||(jt({api:"createTextAtMessage",param:"payload.atUserList",desc:Jt()}),!1):(jt({api:"createTextAtMessage",param:"payload.text",desc:Kt()}),!1):(jt({api:"createTextAtMessage",param:"payload",desc:rn()}),!1)}})},createCustomMessage:{to:dn,conversationType:dn,payload:t(t({},pn),{},{validator:function(e){return We(e)?e.data&&!je(e.data)?(jt({api:"createCustomMessage",param:"payload.data",desc:Kt()}),!1):e.description&&!je(e.description)?(jt({api:"createCustomMessage",param:"payload.description",desc:Kt()}),!1):!(e.extension&&!je(e.extension))||(jt({api:"createCustomMessage",param:"payload.extension",desc:Kt()}),!1):(jt({api:"createCustomMessage",param:"payload",desc:rn()}),!1)}})},createImageMessage:{to:dn,conversationType:dn,payload:t(t({},pn),{},{validator:function(e){if(!We(e))return jt({api:"createImageMessage",param:"payload",desc:rn()}),!1;if(ze(e.file))return jt({api:"createImageMessage",param:"payload.file",desc:zt()}),!1;if(X){if(!(e.file instanceof HTMLInputElement||Ve(e.file)))return We(e.file)&&"undefined"!=typeof uni?0!==e.file.tempFilePaths.length&&0!==e.file.tempFiles.length||(jt({api:"createImageMessage",param:"payload.file",desc:sn()}),!1):(jt({api:"createImageMessage",param:"payload.file",desc:$t()}),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return jt({api:"createImageMessage",param:"payload.file",desc:sn()}),!1}return!0},onProgress:{type:"Function",required:!1,validator:function(e){return ze(e)&&jt({api:"createImageMessage",param:"onProgress",desc:Zt()}),!0}}})},createAudioMessage:{to:dn,conversationType:dn,payload:t(t({},pn),{},{validator:function(e){return!!We(e)||(jt({api:"createAudioMessage",param:"payload",desc:rn()}),!1)}}),onProgress:{type:"Function",required:!1,validator:function(e){return ze(e)&&jt({api:"createAudioMessage",param:"onProgress",desc:Zt()}),!0}}},createVideoMessage:{to:dn,conversationType:dn,payload:t(t({},pn),{},{validator:function(e){if(!We(e))return jt({api:"createVideoMessage",param:"payload",desc:rn()}),!1;if(ze(e.file))return jt({api:"createVideoMessage",param:"payload.file",desc:zt()}),!1;if(X){if(!(e.file instanceof HTMLInputElement||Ve(e.file)))return We(e.file)&&"undefined"!=typeof uni?!!Ve(e.file.tempFile)||(jt({api:"createVideoMessage",param:"payload.file",desc:sn()}),!1):(jt({api:"createVideoMessage",param:"payload.file",desc:$t()}),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return jt({api:"createVideoMessage",param:"payload.file",desc:sn()}),!1}return!0}}),onProgress:{type:"Function",required:!1,validator:function(e){return ze(e)&&jt({api:"createVideoMessage",param:"onProgress",desc:Zt()}),!0}}},createFaceMessage:{to:dn,conversationType:dn,payload:t(t({},pn),{},{validator:function(e){return We(e)?He(e.index)?!!je(e.data)||(jt({api:"createFaceMessage",param:"payload.data",desc:Kt()}),!1):(jt({api:"createFaceMessage",param:"payload.index",desc:Yt()}),!1):(jt({api:"createFaceMessage",param:"payload",desc:rn()}),!1)}})},createFileMessage:{to:dn,conversationType:dn,payload:t(t({},pn),{},{validator:function(e){if(!We(e))return jt({api:"createFileMessage",param:"payload",desc:rn()}),!1;if(ze(e.file))return jt({api:"createFileMessage",param:"payload.file",desc:zt()}),!1;if(X){if(!(e.file instanceof HTMLInputElement||Ve(e.file)))return We(e.file)&&"undefined"!=typeof uni?0!==e.file.tempFilePaths.length&&0!==e.file.tempFiles.length||(jt({api:"createFileMessage",param:"payload.file",desc:sn()}),!1):(jt({api:"createFileMessage",param:"payload.file",desc:$t()}),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return jt({api:"createFileMessage",param:"payload.file",desc:sn()}),!1}return!0}}),onProgress:{type:"Function",required:!1,validator:function(e){return ze(e)&&jt({api:"createFileMessage",param:"onProgress",desc:Zt()}),!0}}},createLocationMessage:{to:dn,conversationType:dn,payload:t(t({},pn),{},{validator:function(e){return We(e)?je(e.description)?He(e.longitude)?!!He(e.latitude)||(jt({api:"createLocationMessage",param:"payload.latitude",desc:Yt()}),!1):(jt({api:"createLocationMessage",param:"payload.longitude",desc:Yt()}),!1):(jt({api:"createLocationMessage",param:"payload.description",desc:Kt()}),!1):(jt({api:"createLocationMessage",param:"payload",desc:rn()}),!1)}})},createMergerMessage:{to:dn,conversationType:dn,payload:t(t({},pn),{},{validator:function(e){if(Ut(e.messageList))return jt({api:"createMergerMessage",param:"payload.messageList",desc:Qt()}),!1;if(Ut(e.compatibleText))return jt({api:"createMergerMessage",param:"payload.compatibleText",desc:Wt("compatibleText")}),!1;var t=!1;return e.messageList.forEach((function(e){e.status===Bt.FAIL&&(t=!0)})),!t||(jt({api:"createMergerMessage",param:"payload.messageList",desc:_n("MergeFailedMessageLog")}),!1)}})},revokeMessage:[t(t({name:"message"},pn),{},{validator:function(e){return Ut(e)?(jt({api:"revokeMessage",param:"message",desc:cn()}),!1):e.conversationType===A.CONV_SYSTEM?(jt({api:"revokeMessage",param:"message",desc:_n("MessageCanBeRevokedDesc")}),!1):!0!==e.isRevoked||(jt({api:"revokeMessage",param:"message",desc:_n("MessageRevokedLog")}),!1)}})],deleteMessage:[t(t({name:"messageList"},fn),{},{validator:function(e){return!Ut(e)||(jt({api:"deleteMessage",param:"messageList",desc:Qt()}),!1)}})],translateText:{sourceTextList:fn,sourceLanguage:dn,targetLanguage:dn},modifyMessage:[t(t({name:"message"},pn),{},{validator:function(e){return Ut(e)?(jt({api:"modifyMessage",param:"message",desc:cn()}),!1):e.conversationType===A.CONV_SYSTEM?(jt({api:"modifyMessage",param:"message",desc:_n("MessageCanBeModifiedLog")}),!1):!0!==e._onlineOnlyFlag||(jt({api:"modifyMessage",param:"message",desc:_n("OnlineMessageNotSupportLog")}),!1)}})],getUserProfile:{userIDList:{type:"Array",validator:function(e){return Ye(e)?(0===e.length&&jt({api:"getUserProfile",param:"userIDList",desc:Qt()}),!0):(jt({api:"getUserProfile",param:"userIDList",desc:Jt()}),!1)}}},updateMyProfile:{profileCustomField:{type:"Array",validator:function(e){return!!ze(e)||!!Ye(e)||(jt({api:"updateMyProfile",param:"profileCustomField",desc:Jt()}),!1)}}},setSelfStatus:{customStatus:{type:"String",validator:function(e){return!!je(e)||(jt({api:"setSelfStatus",param:"customStatus",desc:Kt()}),!1)}}},getUserStatus:{userIDList:{type:"Array",validator:function(e){return Ye(e)?0!==e.length||(jt({api:"getUserStatus",param:"userIDList",desc:Qt()}),!1):(jt({api:"getUserStatus",param:"userIDList",desc:Jt()}),!1)}}},subscribeUserStatus:{userIDList:{type:"Array",validator:function(e){return Ye(e)?0!==e.length||(jt({api:"subscribeUserStatus",param:"userIDList",desc:Qt()}),!1):(jt({api:"subscribeUserStatus",param:"userIDList",desc:Jt()}),!1)}}},unsubscribeUserStatus:{userIDList:{type:"Array",validator:function(e){return!e||!!Ye(e)||(jt({api:"subscribeUserStatus",param:"userIDList",desc:Jt()}),!1)}}},addFriend:{to:dn,source:{type:"String",required:!0,validator:function(e){return!!e&&(e.startsWith("AddSource_Type_")?!(e.replace("AddSource_Type_","").length>8)||(jt({api:"addFriend",param:"source",desc:tn("keyword",8)}),!1):(jt({api:"addFriend",param:"source",desc:_n("SourcePrefixLog")}),!1))}},remark:{type:"String",required:!1,validator:function(e){return!(je(e)&&e.length>96)||(jt({api:"addFriend",param:"remark",desc:tn("remark",96)}),!1)}}},deleteFriend:{userIDList:fn},checkFriend:{userIDList:fn},getFriendProfile:{userIDList:fn},updateFriend:{userID:dn,remark:{type:"String",required:!1,validator:function(e){return!(je(e)&&e.length>96)||(jt({api:"updateFriend",param:"remark",desc:tn("remark",96)}),!1)}},friendCustomField:{type:"Array",required:!1,validator:function(e){if(e){if(!Ye(e))return jt({api:"updateFriend",param:"friendCustomField",desc:Jt()}),!1;var t=!0;return e.forEach((function(e){return je(e.key)&&-1!==e.key.indexOf("Tag_SNS_Custom")?je(e.value)?e.key.replace("Tag_SNS_Custom_","").length>8?(jt({api:"updateFriend",param:"friendCustomField",desc:tn("keyword",8)}),t=!1):void 0:(jt({api:"updateFriend",param:"friendCustomField",desc:on("value")}),t=!1):(jt({api:"updateFriend",param:"friendCustomField",desc:_n("FriendCustomFieldPrefixLog")}),t=!1)})),t}return!0}}},acceptFriendApplication:{userID:dn},refuseFriendApplication:{userID:dn},deleteFriendApplication:{userID:dn},createFriendGroup:{name:dn},deleteFriendGroup:{name:dn},addToFriendGroup:{name:dn,userIDList:fn},removeFromFriendGroup:{name:dn,userIDList:fn},renameFriendGroup:{oldName:dn,newName:dn},sendMessageReadReceipt:[{name:"messageList",type:"Array",validator:function(e){return Ye(e)?0!==e.length||(jt({api:"sendMessageReadReceipt",param:"messageList",desc:Qt()}),!1):(jt({api:"sendMessageReadReceipt",param:"messageList",desc:Jt()}),!1)}}],getMessageReadReceiptList:[{name:"messageList",type:"Array",validator:function(e){return Ye(e)?0!==e.length||(jt({api:"getMessageReadReceiptList",param:"messageList",desc:Qt()}),!1):(jt({api:"getMessageReadReceiptList",param:"messageList",desc:Jt()}),!1)}}],createTopicInCommunity:{groupID:dn,topicName:dn},deleteTopicFromCommunity:{groupID:dn,topicIDList:{type:"Array",validator:function(e){return!e||!!Ye(e)||(jt({api:"deleteTopicFromCommunity",param:"topicIDList",desc:Jt()}),!1)}}},updateTopicProfile:{groupID:dn,topicID:dn},getTopicList:{groupID:dn,topicIDList:{type:"Array",validator:function(e){return!e||!!Ye(e)||(jt({api:"getTopicList",param:"topicIDList",desc:Jt()}),!1)}}}},mn={login:1,logout:1,on:1,once:1,off:1,setLogLevel:1,registerPlugin:1,destroy:1,createTextMessage:1,createTextAtMessage:1,createImageMessage:1,createAudioMessage:1,createVideoMessage:1,createCustomMessage:1,createFaceMessage:1,createFileMessage:1,createLocationMessage:1,createMergerMessage:1,downloadMergerMessage:1,createForwardMessage:1,sendMessage:1,resendMessage:1,revokeMessage:1,deleteMessage:1,translateText:1,modifyMessage:1,sendMessageReadReceipt:1,getGroupMessageReadMemberList:1,getMessageReadReceiptList:1,setMessageExtensions:1,getMessageExtensions:1,deleteMessageExtensions:1,getMessageList:1,findMessage:1,getMessageListHopping:1,setMessageRead:1,setAllMessageRead:1,getConversationList:1,getConversationProfile:1,deleteConversation:1,pinConversation:1,getTotalUnreadMessageCount:1,setConversationCustomData:1,markConversation:1,createConversationGroup:1,getConversationGroupList:1,deleteConversationGroup:1,renameConversationGroup:1,addConversationsToGroup:1,deleteConversationsFromGroup:1,clearHistoryMessage:1,getGroupList:1,getGroupProfile:1,createGroup:1,joinGroup:1,updateGroupProfile:1,quitGroup:1,dismissGroup:1,changeGroupOwner:1,searchGroupByID:1,setMessageRemindType:1,getGroupApplicationList:1,handleGroupApplication:1,initGroupAttributes:1,setGroupAttributes:1,deleteGroupAttributes:1,getGroupAttributes:1,setGroupCounters:1,increaseGroupCounter:1,decreaseGroupCounter:1,getGroupCounters:1,getJoinedCommunityList:1,createTopicInCommunity:1,deleteTopicFromCommunity:1,updateTopicProfile:1,getTopicList:1,getGroupMemberProfile:1,getGroupMemberList:1,addGroupMember:1,deleteGroupMember:1,setGroupMemberNameCard:1,setGroupMemberMuteTime:1,setGroupMemberRole:1,setGroupMemberCustomField:1,getGroupOnlineMemberCount:1,markGroupMemberList:1,getMyProfile:1,getUserProfile:1,updateMyProfile:1,setSelfStatus:1,getUserStatus:1,subscribeUserStatus:1,unsubscribeUserStatus:1,getBlacklist:1,addToBlacklist:1,removeFromBlacklist:1,getFriendList:1,addFriend:1,deleteFriend:1,checkFriend:1,updateFriend:1,getFriendProfile:1,getFriendApplicationList:1,refuseFriendApplication:1,deleteFriendApplication:1,acceptFriendApplication:1,setFriendApplicationRead:1,getFriendGroupList:1,createFriendGroup:1,renameFriendGroup:1,deleteFriendGroup:1,addToFriendGroup:1,removeFromFriendGroup:1,callExperimentalAPI:1},yn=function(){function e(t){r(this,e),this._m=t,this._n=""}return c(e,[{key:"isLoggedIn",value:function(){return this._m.getModule(12).isLoggedIn()}},{key:"isOversea",value:function(){return this._m.getModule(12).isOversea()}},{key:"isPrivateNetWork",value:function(){return this._m.getModule(12).isPrivateNetWork()}},{key:"getFileDownloadProxy",value:function(){return this._m.getModule(12).getFileDownloadProxy()}},{key:"getMyUserID",value:function(){return this._m.getModule(12).getUserID()}},{key:"getMyTinyID",value:function(){return this._m.getModule(12).getTinyID()}},{key:"getSDKAppID",value:function(){return this._m.getModule(12).getSDKAppID()}},{key:"isIntl",value:function(){return this._m.getModule(12).isIntl()}},{key:"isDevMode",value:function(){return this._m.getModule(12).isDevMode()}},{key:"getModule",value:function(e){return this._m.getModule(e)}},{key:"getPlatform",value:function(){return oe}},{key:"getNetworkType",value:function(){return this._m.getModule(15).getNetworkType()}},{key:"probeNetwork",value:function(e){return this._m.getModule(15).probe(e)}},{key:"getCloudConfig",value:function(e){return this._m.getModule(23).getCloudConfig(e)}},{key:"emitOuterEvent",value:function(e,t){this._m.getOuterEmitterInstance().emit(e,t)}},{key:"emitInnerEvent",value:function(e,t){this._m.getInnerEmitterInstance().emit(e,t)}},{key:"getInnerEmitterInstance",value:function(){return this._m.getInnerEmitterInstance()}},{key:"generateTjgID",value:function(e){return this._m.getModule(12).getTinyID()+"-"+e.random}},{key:"filterModifiedMessage",value:function(e){if(!Ut(e)){var t=e.filter((function(e){return!0===e.isModified}));t.length>0&&this.emitOuterEvent(D.MESSAGE_MODIFIED,t)}}},{key:"filterUnmodifiedMessage",value:function(e){return Ut(e)?[]:e.filter((function(e){return!1===e.isModified}))}},{key:"request",value:function(e){return this._m.getModule(20).request(e)}},{key:"canIUse",value:function(e){return this._m.getModule(27).canIUse(e)}},{key:"getErrorMessage",value:function(e,t,n){return this._m.getErrorMessage(e,t,n)}},{key:"outputWarning",value:function(e,t,n){var o=this.getErrorMessage(e,t,n);o&&Oe.w(o)}}]),e}(),Mn="wslogin",In="wslogout",Cn="wshello",bn="authkey",Tn="sendmsg",Sn="send_group_msg",En="portrait_get_all",kn="portrait_set",Dn="black_list_get",An="black_list_add",Ln="black_list_delete",On="msgwithdraw",Rn="msgreaded",wn="set_c2c_peer_mute_notifications",Nn="get_c2c_peer_mute_notifications",Pn="getroammsg",Gn="get_peer_read_time",Un="delete_c2c_msg_ramble",xn="modify_c2c_msg",Fn="set_key_values",qn="get_key_values",Bn="page_get",Vn="batch_delete",Hn="clear_msg",jn="deletemsg",Kn="set_conv_custom_data",Wn="mark_contact",Yn="create_contact_group",zn="del_contact_group",$n="update_contact_group",Xn="add_conv_to_group",Jn="del_conv_from_group",Qn="get_contact_group",Zn="get_joined_group_list",eo="get_group_self_member_info",to="create_group",no="destroy_group",oo="modify_group_base_info",io="apply_join_group",ro="apply_join_group_noauth",ao="quit_group",so="get_group_public_info",co="change_group_owner",uo="handle_apply_join_group",lo="handle_invite_join_permission_group",fo="handle_invite_join_group",po="group_msg_recall",ho="msg_read_report",go="read_all_unread_msg",_o="group_msg_get",vo="get_group_msg_receipt",mo="group_msg_receipt",yo="c2c_msg_read_receipt",Mo="get_group_msg_receipt_detail",Io="get_pendency",Co="deletemsg",bo="get_msg",To="get_msg_noauth",So="get_online_member_num",Eo="delete_group_ramble_msg_by_seq",ko="modify_group_msg",Do="set_group_attr",Ao="modify_group_attr",Lo="delete_group_attr",Oo="clear_group_attr",Ro="get_group_attr",wo="group_set_key_values",No="group_get_key_values",Po="get_group_notify",Go="update_group_counter",Uo="get_group_counter",xo="get_group_member_info",Fo="get_members",qo="get_specified_group_member_info",Bo="add_group_member",Vo="delete_group_member",Ho="ban_group_member",jo="modify_group_member_info",Ko="modify_user_info",Wo="pre_sig",Yo="video_cover",zo="tim_web_report_v2",$o="alive",Xo="ws_msg_push_ack",Jo="save_relay_json_msg",Qo="get_relay_json_msg",Zo="fetch_config",ei="fetch_imsdk_purchase_bitsv2",ti="create_topic",ni="destroy_topic",oi="modify_topic",ii="get_topic",ri="ws_set_custom_status",ai="ws_get_user_status",si="ws_status_subscribe",ci="ws_status_unsubscribe",ui="ws_stat_background",li="ws_stat_foreground",di="ws_stat_settoken",fi="get_local_words",pi="ws_batch_trans_text",hi={NO_SDKAPPID:2e3,NO_ACCOUNT_TYPE:2001,NO_IDENTIFIER:2002,NO_USERSIG:2003,NO_TINYID:2022,NO_A2KEY:2023,USER_NOT_LOGGED_IN:2024,REPEAT_LOGIN:2025,COS_UNDETECTED:2040,COS_GET_SIG_FAIL:2041,MESSAGE_SEND_FAIL:2100,MESSAGE_SEND_FAIL_NOT_IN_AVCHATROOM:2101,MESSAGE_SEND_NEED_MESSAGE_INSTANCE:2105,MESSAGE_SEND_INVALID_CONVERSATION_TYPE:2106,MESSAGE_FILE_IS_EMPTY:2108,MESSAGE_ONPROGRESS_FUNCTION_ERROR:2109,MESSAGE_REVOKE_FAIL:2110,MESSAGE_DELETE_FAIL:2111,MESSAGE_UNREAD_ALL_FAIL:2112,READ_RECEIPT_MESSAGE_LIST_EMPTY:2114,MESSAGE_SEND_GROUP_WITH_TOPIC_FAIL:2115,CANNOT_DELETE_GROUP_SYSTEM_NOTICE:2116,TRANSLATE_TEXT_FAIL:2117,MESSAGE_IMAGE_SELECT_FILE_FIRST:2251,MESSAGE_IMAGE_TYPES_LIMIT:2252,MESSAGE_IMAGE_SIZE_LIMIT:2253,MESSAGE_AUDIO_UPLOAD_FAIL:2300,MESSAGE_AUDIO_SIZE_LIMIT:2301,MESSAGE_VIDEO_UPLOAD_FAIL:2350,MESSAGE_VIDEO_SIZE_LIMIT:2351,MESSAGE_VIDEO_TYPES_LIMIT:2352,MESSAGE_FILE_UPLOAD_FAIL:2400,MESSAGE_FILE_SELECT_FILE_FIRST:2401,MESSAGE_FILE_SIZE_LIMIT:2402,MESSAGE_FILE_URL_IS_EMPTY:2403,MESSAGE_MERGER_TYPE_INVALID:2450,MESSAGE_MERGER_KEY_INVALID:2451,MESSAGE_MERGER_DOWNLOAD_FAIL:2452,MESSAGE_FORWARD_TYPE_INVALID:2453,MESSAGE_MODIFY_CONFLICT:2480,MESSAGE_MODIFY_DISABLED_IN_AVCHATROOM:2481,CONVERSATION_NOT_FOUND:2500,USER_OR_GROUP_NOT_FOUND:2501,CONVERSATION_UN_RECORDED_TYPE:2502,INVALID_CONVERSATION_ID:2503,ILLEGAL_GROUP_TYPE:2600,CANNOT_JOIN_WORK:2601,ILLEGAL_GROUP_ID:2602,CANNOT_FIND_GROUP:2603,CANNOT_CHANGE_OWNER_IN_AVCHATROOM:2620,CANNOT_CHANGE_OWNER_TO_SELF:2621,CANNOT_DISMISS_WORK:2622,MEMBER_NOT_IN_GROUP:2623,JOIN_GROUP_FAIL:2660,CANNOT_ADD_MEMBER_IN_AVCHATROOM:2661,CANNOT_JOIN_NON_AVCHATROOM_WITHOUT_LOGIN:2662,NOT_OWNER:2681,CANNOT_SET_MEMBER_ROLE_IN_WORK_AND_AVCHATROOM:2682,INVALID_MEMBER_ROLE:2683,CANNOT_SET_SELF_MEMBER_ROLE:2684,CANNOT_MUTE_SELF:2685,BAN_DURATION_INVALID:2686,NOT_MY_FRIEND:2700,ALREADY_MY_FRIEND:2701,FRIEND_GROUP_EXISTED:2710,FRIEND_GROUP_NOT_EXIST:2711,FRIEND_APPLICATION_NOT_EXIST:2716,UPDATE_PROFILE_INVALID_PARAM:2721,UPDATE_PROFILE_NO_KEY:2722,CANNOT_ADD_SELF_TO_BLACKLIST:2742,NETWORK_ERROR:2800,NETWORK_TIMEOUT:2801,NO_NETWORK:2805,UNCAUGHT_ERROR:2903,INVALID_OPERATION:2905,INVALID_TRTC_CMD:2995,OVER_FREQUENCY_LIMIT:2996,CANNOT_FIND_PROTOCOL:2997,CANNOT_FIND_MODULE:2998,SDK_IS_NOT_READY:2999,LOGGING_IN:3e3,LOGIN_FAILED:3001,KICKED_OUT_MULT_DEVICE:3002,KICKED_OUT_MULT_ACCOUNT:3003,KICKED_OUT_USERSIG_EXPIRED:3004,LOGGED_OUT:3005,KICKED_OUT_REST_API:3006,ILLEGAL_TOPIC_ID:3021,CANNOT_USE_COMMERCIAL_ABILITY:3122,PROFANITY_FOUND:3123,MESSAGE_A2KEY_EXPIRED:20002,ACCOUNT_A2KEY_EXPIRED:70001,HELLO_ANSWER_KICKED_OUT:1002,OPEN_SERVICE_OVERLOAD_ERROR:60022},gi="networkRTT",_i="messageE2EDelay",vi="sendMessageC2C",mi="sendMessageGroup",yi="sendMessageGroupAV",Mi="sendMessageRichMedia",Ii="cosUpload",Ci="messageReceivedGroup",bi="messageReceivedGroupAVPush",Ti="messageReceivedGroupAVPull",Si=(u(qt={},gi,2),u(qt,_i,3),u(qt,vi,4),u(qt,mi,5),u(qt,yi,6),u(qt,Mi,7),u(qt,Ci,8),u(qt,bi,9),u(qt,Ti,10),u(qt,Ii,11),qt),Ei={info:4,warning:5,error:6},ki={wifi:1,"2g":2,"3g":3,"4g":4,"5g":5,unknown:6,none:7,online:8},Di={login:4},Ai=function(){function e(t){r(this,e),this._n="SSOLogData",this.eventType=Di[t]||0,this.timestamp=0,this.networkType=8,this.code=0,this.message="",this.moreMessage="",this.extension=t,this.costTime=0,this.duplicate=!1,this.level=4,this.uiPlatform=void 0,this._sentFlag=!1,this._startts=Se()}return c(e,[{key:"updateTimeStamp",value:function(){this.timestamp=Se()}},{key:"start",value:function(e){return this._startts=e,this}},{key:"end",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._sentFlag){var n=Se();0===this.costTime&&(this.costTime=n-this._startts),this.setMoreMessage("startts:".concat(this._startts," endts:").concat(n)),t?(this._sentFlag=!0,this._eventStatModule&&this._eventStatModule.pushIn(this)):setTimeout((function(){e._sentFlag=!0,e._eventStatModule&&e._eventStatModule.pushIn(e)}),0)}}},{key:"setError",value:function(e,t,n){if(!(e instanceof Error))return Oe.w("".concat(this._n,".setError value not instanceof Error, please check!")),this;if(this._sentFlag)return this;if(this.setNetworkType(n),t)e.code&&this.setCode(e.code),e.message&&this.setMoreMessage(e.message);else{var o=hi.NO_NETWORK;this.setCode(o)}return this.setLevel("error"),this}},{key:"setCode",value:function(e){return ze(e)||this._sentFlag||("ECONNABORTED"===e&&(this.code=103),He(e)?this.code=e:Oe.w("".concat(this._n,".setCode value not a number, please check!"),e,n(e))),this}},{key:"setMessage",value:function(e){return ze(e)||this._sentFlag||(He(e)&&(this.message=e.toString()),je(e)&&(this.message=e)),this}},{key:"setCostTime",value:function(e){return this.costTime=e,this}},{key:"setLevel",value:function(e){return ze(e)||this._sentFlag||(this.level=Ei[e]),this}},{key:"setMoreMessage",value:function(e){return Ut(this.moreMessage)?this.moreMessage="".concat(e):this.moreMessage+=" ".concat(e),this}},{key:"setNetworkType",value:function(e){if(ze(e))Oe.w("".concat(this._n,".setNetworkType value is undefined, please check!"));else{var t=ki[e.toLowerCase()];ze(t)||(this.networkType=t)}return this}},{key:"getStartTs",value:function(){return this._startts}},{key:"setUIPlatform",value:function(e){this.uiPlatform=e}}],[{key:"bindEventStatModule",value:function(t){e.prototype._eventStatModule=t}}]),e}(),Li=function(){function e(t){r(this,e),this.type=A.MSG_TEXT,this.content={text:t.text||""}}return c(e,[{key:"setText",value:function(e){this.content.text=e}},{key:"sendable",value:function(){return 0!==this.content.text.length}}]),e}(),Oi=function(){function e(t,n){r(this,e),this._imageMemoryURL="",this._fileDownloadProxy=n,$?this.createImageDataASURLInWXMiniApp(t.file):this.createImageDataASURLInWeb(t.file),this._initImageInfoModel(),this.type=A.MSG_IMAGE,this._percent=0,this.content={imageFormat:t.imageFormat||Re.UNKNOWN,uuid:t.uuid,imageInfoArray:[]},this.initImageInfoArray(t.imageInfoArray),this._autoFixUrl()}return c(e,[{key:"_initImageInfoModel",value:function(){var e=this;this._ImageInfoModel=function(t){this.instanceID=it(9999999),this.sizeType=t.type||0,this.type=0,this.size=t.size||0,this.width=t.width||0,this.height=t.height||0,this.imageUrl=t.url||"",this.url=Pt(t.url||e._imageMemoryURL,e._fileDownloadProxy)},this._ImageInfoModel.prototype={setSizeType:function(e){this.sizeType=e},setType:function(e){this.type=e},setImageUrl:function(e){e&&(this.imageUrl=e)},getImageUrl:function(){return this.imageUrl}}}},{key:"initImageInfoArray",value:function(e){for(var t=0,n=null,o=null;t<=2;)o=ze(e)||ze(e[t])?{type:0,size:0,width:0,height:0,url:""}:e[t],(n=new this._ImageInfoModel(o)).setSizeType(t+1),n.setType(t),this.addImageInfo(n),t++;this.updateAccessSideImageInfoArray()}},{key:"updateImageInfoArray",value:function(e){for(var t,n=this.content.imageInfoArray.length,o=0;o<n;o++)t=this.content.imageInfoArray[o],e[o].size&&(t.size=e[o].size),e[o].url&&t.setImageUrl(e[o].url),e[o].width&&(t.width=e[o].width),e[o].height&&(t.height=e[o].height)}},{key:"_autoFixUrl",value:function(){for(var e=this.content.imageInfoArray.length,t="",n="",o=["http","https"],i=null,r=0;r<e;r++)this.content.imageInfoArray[r].url&&""!==(i=this.content.imageInfoArray[r]).imageUrl&&(n=i.imageUrl.slice(0,i.imageUrl.indexOf("://")+1),t=i.imageUrl.slice(i.imageUrl.indexOf("://")+1),o.indexOf(n)<0&&(n="https:"),this.content.imageInfoArray[r].setImageUrl([n,t].join("")))}},{key:"updatePercent",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:"updateImageFormat",value:function(e){this.content.imageFormat=Re[e.toUpperCase()]||Re.UNKNOWN}},{key:"createImageDataASURLInWeb",value:function(e){void 0!==e&&e.files.length>0&&(this._imageMemoryURL=window.URL.createObjectURL(e.files[0]))}},{key:"createImageDataASURLInWXMiniApp",value:function(e){e&&e.url&&(this._imageMemoryURL=e.url)}},{key:"replaceImageInfo",value:function(e,t){this.content.imageInfoArray[t]instanceof this._ImageInfoModel||(this.content.imageInfoArray[t]=e)}},{key:"addImageInfo",value:function(e){this.content.imageInfoArray.length>=3||this.content.imageInfoArray.push(e)}},{key:"updateAccessSideImageInfoArray",value:function(){var e=this.content.imageInfoArray,t=e[0],n=t.width,o=void 0===n?0:n,i=t.height,r=void 0===i?0:i;0!==o&&0!==r&&(Tt(e),Object.assign(e[2],bt({originWidth:o,originHeight:r,min:720})))}},{key:"sendable",value:function(){return 0!==this.content.imageInfoArray.length&&""!==this.content.imageInfoArray[0].imageUrl&&0!==this.content.imageInfoArray[0].size}}]),e}(),Ri=function(){function e(t){r(this,e),this.type=A.MSG_FACE,this.content=t||null}return c(e,[{key:"sendable",value:function(){return null!==this.content}}]),e}(),wi=function(){function e(t,n){r(this,e),this.type=A.MSG_AUDIO,this._percent=0,this.content={downloadFlag:2,second:t.second,size:t.size,url:Pt(t.url,n),remoteAudioUrl:t.url||"",uuid:t.uuid}}return c(e,[{key:"updatePercent",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:"updateAudioUrl",value:function(e){this.content.remoteAudioUrl=e}},{key:"sendable",value:function(){return""!==this.content.remoteAudioUrl}}]),e}(),Ni={from:!0,groupID:!0,groupName:!0,to:!0},Pi=function(){function e(t){r(this,e),this.type=A.MSG_GRP_TIP,this.content={},this._initContent(t)}return c(e,[{key:"_initContent",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case"remarkInfo":break;case"groupProfile":t.content.groupProfile={},t._initGroupProfile(e[n]);break;case"operatorInfo":break;case"memberInfoList":case"msgMemberInfo":t._updateMemberList(e[n]);break;case"memberExtraInfo":case"onlineMemberInfo":break;case"memberNum":t.content[n]=e[n],t.content.memberCount=e[n];break;case"newGroupProfile":t.content.newGroupProfile={},t._initNewGroupProfile(e[n]);break;default:t.content[n]=e[n]}})),this.content.userIDList||(this.content.userIDList=[this.content.operatorID])}},{key:"_initGroupProfile",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var o=t[n];Ni[o]&&(this.content.groupProfile[o]=e[o])}}},{key:"_updateMemberList",value:function(e){Ut(this.content.memberList)?this.content.memberList=e:this.content.memberList.forEach((function(t){e.forEach((function(e){t.userID===e.userID&&Object.assign(t,e)}))}))}},{key:"_initNewGroupProfile",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var o=t[n];this.content.newGroupProfile[o]="muteAllMembers"!==o?e[o]:1===e[o]}}}]),e}(),Gi={from:!0,groupID:!0,groupName:!0,to:!0},Ui=function(){function e(t){r(this,e),this.type=A.MSG_GRP_SYS_NOTICE,this.content={},this._initContent(t)}return c(e,[{key:"_initContent",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case"memberInfoList":break;case"remarkInfo":t.content.handleMessage=e[n];break;case"groupProfile":t.content.groupProfile={},t._initGroupProfile(e[n]);break;default:t.content[n]=e[n]}}))}},{key:"_initGroupProfile",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var o=t[n];Gi[o]&&("groupName"===o?this.content.groupProfile.name=e[o]:this.content.groupProfile[o]=e[o])}}}]),e}(),xi=function(){function e(t,n){r(this,e),this.type=A.MSG_FILE,this._percent=0;var o=this._getFileInfo(t);this.content={downloadFlag:2,fileUrl:Pt(t.url,n)||"",uuid:t.uuid,fileName:o.name||"",fileSize:o.size||0}}return c(e,[{key:"_getFileInfo",value:function(e){if(!ze(e.fileName)&&!ze(e.fileSize))return{size:e.fileSize,name:e.fileName};var t=e.file.files[0];if(Y){if(t.path&&-1!==t.path.indexOf(".")){var n=t.path.slice(t.path.lastIndexOf(".")+1).toLowerCase();t.type=n,t.name||(t.name="".concat(it(999999),".").concat(n))}t.name||(t.type="",t.name=t.path.slice(t.path.lastIndexOf("/")+1).toLowerCase()),t.suffix&&(t.type=t.suffix),t.url||(t.url=t.path)}return{size:t.size,name:t.name}}},{key:"updatePercent",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:"updateFileUrl",value:function(e){this.content.fileUrl=e}},{key:"sendable",value:function(){return""!==this.content.fileUrl&&""!==this.content.fileName&&0!==this.content.fileSize}}]),e}(),Fi=function(){function e(t){r(this,e),this.type=A.MSG_CUSTOM,this.content={data:t.data||"",description:t.description||"",extension:t.extension||""}}return c(e,[{key:"setData",value:function(e){return this.content.data=e,this}},{key:"setDescription",value:function(e){return this.content.description=e,this}},{key:"setExtension",value:function(e){return this.content.extension=e,this}},{key:"sendable",value:function(){return 0!==this.content.data.length||0!==this.content.description.length||0!==this.content.extension.length}}]),e}(),qi=function(){function e(t,n){r(this,e),this.type=A.MSG_VIDEO,this._percent=0,this.content={remoteVideoUrl:t.remoteVideoUrl||t.videoUrl||"",videoFormat:t.videoFormat,videoSecond:parseInt(t.videoSecond,10),videoSize:t.videoSize,videoUrl:Pt(t.videoUrl,n),videoDownloadFlag:2,videoUUID:t.videoUUID,thumbUUID:t.thumbUUID,thumbFormat:t.thumbFormat,thumbWidth:t.thumbWidth,snapshotWidth:t.thumbWidth,thumbHeight:t.thumbHeight,snapshotHeight:t.thumbHeight,thumbSize:t.thumbSize,snapshotSize:t.thumbSize,thumbDownloadFlag:2,thumbUrl:Pt(t.thumbUrl,n),snapshotUrl:Pt(t.thumbUrl,n)}}return c(e,[{key:"updatePercent",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:"updateVideoUrl",value:function(e){e&&(this.content.remoteVideoUrl=e)}},{key:"updateSnapshotInfo",value:function(e){var t=e.snapshotUrl,n=e.snapshotWidth,o=e.snapshotHeight;Ut(t)||(this.content.thumbUrl=this.content.snapshotUrl=t),Ut(n)||(this.content.thumbWidth=this.content.snapshotWidth=Number(n)),Ut(o)||(this.content.thumbHeight=this.content.snapshotHeight=Number(o))}},{key:"sendable",value:function(){return""!==this.content.remoteVideoUrl}}]),e}(),Bi=function(){function e(t){r(this,e),this.type=A.MSG_LOCATION;var n=t.description,o=t.longitude,i=t.latitude;this.content={description:n,longitude:o,latitude:i}}return c(e,[{key:"sendable",value:function(){return!0}}]),e}(),Vi=function(){function e(t,n){if(r(this,e),this.from=t.from,this.messageSender=t.from,this.time=t.time,this.messageSequence=t.sequence,this.clientSequence=t.clientSequence||t.sequence,this.messageRandom=t.random,this.cloudCustomData=t.cloudCustomData||"",this.clientTime=t.clientTime||void 0,t.ID)this.ID=t.ID||"",this.nick=t.nick||"",this.avatar=t.avatar||"",this.messageBody=[{type:t.type,payload:t.payload}],t.conversationType.startsWith(A.CONV_C2C)?this.receiverUserID=t.to:t.conversationType.startsWith(A.CONV_GROUP)&&(this.receiverGroupID=t.to),this.messageReceiver=t.to;else{this.nick=t.nick||"",this.avatar=t.avatar||"",this.messageBody=[];var o=t.elements[0].type,i=t.elements[0].content;this._patchRichMediaPayload(o,i),this._updateRichMediaDownloadUrl(o,i,n),o===A.MSG_MERGER?this.messageBody.push({type:o,payload:new Hi(i).content}):this.messageBody.push({type:o,payload:i}),t.groupID&&(this.receiverGroupID=t.groupID,this.messageReceiver=t.groupID),t.to&&(this.receiverUserID=t.to,this.messageReceiver=t.to),this.ID="".concat(t.tinyID,"-").concat(t.clientTime,"-").concat(t.random)}}return c(e,[{key:"_patchRichMediaPayload",value:function(e,t){e===A.MSG_IMAGE?t.imageInfoArray.forEach((function(e){!e.imageUrl&&e.url&&(e.imageUrl=e.url,e.sizeType=e.type,1===e.type?e.type=0:3===e.type&&(e.type=1))})):e===A.MSG_VIDEO?!t.remoteVideoUrl&&t.videoUrl&&(t.remoteVideoUrl=t.videoUrl):e===A.MSG_AUDIO?!t.remoteAudioUrl&&t.url&&(t.remoteAudioUrl=t.url):e===A.MSG_FILE&&!t.fileUrl&&t.url&&(t.fileUrl=t.url,t.url=void 0)}},{key:"_updateRichMediaDownloadUrl",value:function(e,t,n){n&&(e===A.MSG_IMAGE?t.imageInfoArray.forEach((function(e){e.url=Pt(e.url,n)})):e===A.MSG_VIDEO?(t.videoUrl=Pt(t.videoUrl,n),t.snapshotUrl=Pt(t.thumbUrl,n),t.snapshotHeight=t.thumbHeight,t.snapshotWidth=t.thumbWidth):e===A.MSG_AUDIO?t.url=Pt(t.url,n):e===A.MSG_FILE&&(t.fileUrl=Pt(t.fileUrl,n)))}}]),e}(),Hi=function(){function e(t,n){if(r(this,e),this.type=A.MSG_MERGER,this.content={downloadKey:"",pbDownloadKey:"",messageList:[],title:"",abstractList:[],compatibleText:"",version:0,layersOverLimit:!1},t.downloadKey){var o=t.downloadKey,i=t.pbDownloadKey,a=t.title,s=t.abstractList,c=t.compatibleText,u=t.version;this.content.downloadKey=o,this.content.pbDownloadKey=i,this.content.title=a,this.content.abstractList=s,this.content.compatibleText=c,this.content.version=u||0}else if(Ut(t.messageList))1===t.layersOverLimit&&(this.content.layersOverLimit=!0);else{var l=t.messageList,d=t.title,f=t.abstractList,p=t.compatibleText,h=t.version,g=[];l.forEach((function(e){if(!Ut(e)){var t=new Vi(e,n);g.push(t)}})),this.content.messageList=g,this.content.title=d,this.content.abstractList=f,this.content.compatibleText=p,this.content.version=h||0}}return c(e,[{key:"sendable",value:function(){return!Ut(this.content.messageList)||!Ut(this.content.downloadKey)}}]),e}(),ji={1:A.MSG_PRIORITY_HIGH,2:A.MSG_PRIORITY_NORMAL,3:A.MSG_PRIORITY_LOW,4:A.MSG_PRIORITY_LOWEST},Ki=function(){function e(t){r(this,e),this.ID="",this.conversationID=t.conversationID||null,this.conversationType=t.conversationType||A.CONV_C2C,this.conversationSubType=t.conversationSubType,this.time=t.time||Math.ceil(Date.now()/1e3),this.sequence=t.sequence||0,this.clientSequence=t.clientSequence||t.sequence||0,this.random=t.random||0===t.random?t.random:it(),this.priority=this._computePriority(t.priority),this.nick=t.nick||"",this.avatar=t.avatar||"",this.isPeerRead=!1,this.nameCard="",this._elements=[],this.isPlaceMessage=t.isPlaceMessage||0,this.isRevoked=2===t.isPlaceMessage||8===t.msgFlagBits,this.from=t.from||null,this.to=t.to||null,this.flow="",this.isSystemMessage=t.isSystemMessage||!1,this.protocol=t.protocol||"JSON",this.isResend=!1,this.isRead=!1,this.status=t.status||Bt.SUCCESS,this._onlineOnlyFlag=!1,this._groupAtInfoList=[],this._relayFlag=!1,this.atUserList=[],this.cloudCustomData=t.cloudCustomData||"",this.isDeleted=!1,this.isModified=!1,this._isExcludedFromUnreadCount=!(!t.messageControlInfo||1!==t.messageControlInfo.excludedFromUnreadCount),this._isExcludedFromLastMessage=!(!t.messageControlInfo||1!==t.messageControlInfo.excludedFromLastMessage),this.clientTime=t.clientTime||ke()||0,this.senderTinyID=t.senderTinyID||t.tinyID||"",this.readReceiptInfo=t.readReceiptInfo||{readCount:void 0,unreadCount:void 0,isPeerRead:void 0},this.needReadReceipt=!0===t.needReadReceipt||1===t.needReadReceipt,this.version=t.messageVersion||0,this.isBroadcastMessage=t.isBroadcastMessage||!1,this._receiverList=t.receiverList||void 0,this.isSupportExtension=!0===t.isSupportExtension||1===t.isSupportExtension,this.revoker=t.revokerInfo&&t.revokerInfo.revoker||null,this.reInitialize(t.currentUser),this.extractGroupInfo(t.groupProfile||null),this.handleGroupAtInfo(t),this.initC2CReadReceiptInfo(t.readReceiptSentByPeer)}return c(e,[{key:"elements",get:function(){return this._elements}},{key:"getElements",value:function(){return this._elements}},{key:"extractGroupInfo",value:function(e){if(null!==e){je(e.nick)&&(this.nick=e.nick),je(e.avatar)&&(this.avatar=e.avatar);var t=e.messageFromAccountExtraInformation;We(t)&&je(t.nameCard)&&(this.nameCard=t.nameCard)}}},{key:"handleGroupAtInfo",value:function(e){var t=this;e.payload&&e.payload.atUserList&&e.payload.atUserList.forEach((function(e){e!==A.MSG_AT_ALL?(t._groupAtInfoList.push({groupAtAllFlag:0,groupAtUserID:e}),t.atUserList.push(e)):(t._groupAtInfoList.push({groupAtAllFlag:1}),t.atUserList.push(A.MSG_AT_ALL))})),Ye(e.groupAtInfo)&&e.groupAtInfo.forEach((function(e){0===e.groupAtAllFlag?t.atUserList.push(e.groupAtUserID):1===e.groupAtAllFlag&&t.atUserList.push(A.MSG_AT_ALL)}))}},{key:"getGroupAtInfoList",value:function(){return this._groupAtInfoList}},{key:"_initProxy",value:function(){this._elements[0]&&(this.payload=this._elements[0].content,this.type=this._elements[0].type)}},{key:"reInitialize",value:function(e){e&&(this.status=this.from?Bt.SUCCESS:Bt.UNSEND,!this.from&&(this.from=e)),this._initFlow(e),this._initSequence(e),this._concatConversationID(e),this.generateMessageID()}},{key:"isSendable",value:function(){return 0!==this._elements.length&&"function"==typeof this._elements[0].sendable&&this._elements[0].sendable()}},{key:"_initTo",value:function(e){this.conversationType===A.CONV_GROUP&&(this.to=e.groupID)}},{key:"_initSequence",value:function(e){0===this.clientSequence&&e&&(this.clientSequence=function(e){if(!e)return!1;if(void 0===ct[e]){var t=new Date,n="3".concat(t.getHours()).slice(-2),o="0".concat(t.getMinutes()).slice(-2),i="0".concat(t.getSeconds()).slice(-2);ct[e]=parseInt([n,o,i,"0001"].join("")),n=null,o=null,i=null,Oe.l("autoIncrementIndex start index:".concat(ct[e]))}return ct[e]++}(e)),0===this.sequence&&this.conversationType===A.CONV_C2C&&(this.sequence=this.clientSequence)}},{key:"generateMessageID",value:function(){this.from===A.CONV_SYSTEM&&(this.senderTinyID="144115198244471703"),this.ID="".concat(this.senderTinyID,"-").concat(this.clientTime,"-").concat(this.random)}},{key:"_initFlow",value:function(e){""!==e&&(e===this.from?(this.flow="out",this.isRead=!0):this.flow="in")}},{key:"_concatConversationID",value:function(e){var t=this.to,n="",o=this.conversationType;o!==A.CONV_SYSTEM?(n=o===A.CONV_C2C?e===this.from?t:this.from:this.to,this.conversationID=n?"".concat(o).concat(n):null):this.conversationID=A.CONV_SYSTEM}},{key:"isElement",value:function(e){return e instanceof Li||e instanceof Oi||e instanceof Ri||e instanceof wi||e instanceof xi||e instanceof qi||e instanceof Pi||e instanceof Ui||e instanceof Fi||e instanceof Bi||e instanceof Hi}},{key:"setElement",value:function(e,t){var n=this;if(this.isElement(e))return this._elements=[e],void this._initProxy();var o=function(e){if(e.type&&e.content)switch(e.type){case A.MSG_TEXT:n.setTextElement(e.content);break;case A.MSG_IMAGE:n.setImageElement(e.content,t);break;case A.MSG_AUDIO:n.setAudioElement(e.content,t);break;case A.MSG_FILE:n.setFileElement(e.content,t);break;case A.MSG_VIDEO:n.setVideoElement(e.content,t);break;case A.MSG_CUSTOM:n.setCustomElement(e.content);break;case A.MSG_LOCATION:n.setLocationElement(e.content);break;case A.MSG_GRP_TIP:n.setGroupTipElement(e.content);break;case A.MSG_GRP_SYS_NOTICE:n.setGroupSystemNoticeElement(e.content);break;case A.MSG_FACE:n.setFaceElement(e.content);break;case A.MSG_MERGER:n.setMergerElement(e.content,t)}};if(Ye(e))for(var i=0;i<e.length;i++)o(e[i]);else o(e);this._initProxy()}},{key:"clearElement",value:function(){this._elements.length=0}},{key:"setTextElement",value:function(e){var t="string"==typeof e?e:e.text,n=new Li({text:t});this._elements.push(n)}},{key:"setImageElement",value:function(e,t){var n=new Oi(e,t);this._elements.push(n)}},{key:"setAudioElement",value:function(e,t){var n=new wi(e,t);this._elements.push(n)}},{key:"setFileElement",value:function(e,t){var n=new xi(e,t);this._elements.push(n)}},{key:"setVideoElement",value:function(e,t){var n=new qi(e,t);this._elements.push(n)}},{key:"setLocationElement",value:function(e){var t=new Bi(e);this._elements.push(t)}},{key:"setCustomElement",value:function(e){var t=new Fi(e);this._elements.push(t)}},{key:"setGroupTipElement",value:function(e){var t={},n=e.operationType;if(Ut(e.memberInfoList)?e.operatorInfo&&(t=e.operatorInfo):n!==A.GRP_TIP_MBR_JOIN&&n!==A.GRP_TIP_MBR_KICKED_OUT&&n!==A.GRP_TIP_MBR_SET_ADMIN&&n!==A.GRP_TIP_MBR_CANCELED_ADMIN||(t=e.memberInfoList[0]),!Ut(e.memberExtraInfo)){var o=e.memberExtraInfo.reason;e.msgMemberInfo.forEach((function(e){e.reason=o}))}var i=t,r=i.nick,a=i.avatar;je(r)&&(this.nick=r),je(a)&&(this.avatar=a);var s=new Pi(e);this._elements.push(s)}},{key:"setGroupSystemNoticeElement",value:function(e){var t=new Ui(e);this._elements.push(t)}},{key:"setFaceElement",value:function(e){var t=new Ri(e);this._elements.push(t)}},{key:"setMergerElement",value:function(e,t){var n=new Hi(e,t);this._elements.push(n)}},{key:"setIsRead",value:function(e){this.isRead=e}},{key:"setRelayFlag",value:function(e){this._relayFlag=e}},{key:"getRelayFlag",value:function(){return this._relayFlag}},{key:"_computePriority",value:function(e){if(ze(e))return A.MSG_PRIORITY_NORMAL;if(je(e)&&-1!==Object.values(ji).indexOf(e))return e;if(He(e)){var t=""+e;if(-1!==Object.keys(ji).indexOf(t))return ji[t]}return A.MSG_PRIORITY_NORMAL}},{key:"setNickAndAvatar",value:function(e){var t=e.nick,n=e.avatar;je(t)&&(this.nick=t),je(n)&&(this.avatar=n)}},{key:"setNameCard",value:function(e){je(e)&&(this.nameCard=e)}},{key:"initC2CReadReceiptInfo",value:function(e){this.conversationType===A.CONV_C2C&&!0===this.needReadReceipt&&(this.readReceiptInfo.isPeerRead=1===e)}}]),e}(),Wi=function(e){return{code:0,data:e||{}}},Yi=function(e){l(n,e);var t=y(n);function n(e){var o;r(this,n),o=t.call(this);var i=e.code,a=e.message,s=e.data;return o.code=i,o.message=a||o._getErrorMessage(o.code),o.data=s||{},o}return c(n)}(g(Error)),zi=null,$i=function(e){return Promise.resolve(Wi(e))},Xi=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e instanceof Yi)return t&&null!==zi&&zi.emit(D.ERROR,e),Promise.reject(e);if(e instanceof Error){var n=new Yi({code:hi.UNCAUGHT_ERROR});return t&&null!==zi&&zi.emit(D.ERROR,n),Promise.reject(n)}if(!ze(e)&&!ze(e.code)){var o=new Yi(e);return t&&null!==zi&&zi.emit(D.ERROR,o),Promise.reject(o)}},Ji=function(e){l(o,e);var n=y(o);function o(e){var t;return r(this,o),(t=n.call(this,e))._n="C2CModule",t._messageFromUnreadDBMap=new Map,t._signalingFromUnreadDBList=[],t}return c(o,[{key:"onNewC2CMessage",value:function(e){var t=e.dataList,n=e.isInstantMessage,o=e.C2CRemainingUnreadList,i=e.C2CPairUnreadList;Oe.d("".concat(this._n,".onNewC2CMessage count:").concat(t.length," isInstantMessage:").concat(n));var r=this._newC2CMessageStoredAndSummary({dataList:t,C2CRemainingUnreadList:o,C2CPairUnreadList:i,isInstantMessage:n}),a=r.conversationOptionsList,s=r.messageList,c=r.isUnreadC2CMessage;this.filterModifiedMessage(s),a.length>0&&this.getModule(11).onNewMessage({conversationOptionsList:a,isInstantMessage:n,isUnreadC2CMessage:c});var u=this.filterUnmodifiedMessage(s);n&&u.length>0&&this.emitOuterEvent(D.MESSAGE_RECEIVED,u),s.length=0}},{key:"_newC2CMessageStoredAndSummary",value:function(e){for(var t=e.dataList,n=e.C2CRemainingUnreadList,o=e.C2CPairUnreadList,i=e.isInstantMessage,r=null,a=[],s=[],c={},u=this.getModule(16),l=this.getModule(26),d=!1,f=this.getModule(11),p=this.getFileDownloadProxy(),h=0,g=t.length;h<g;h++)if(this._isSignaling(t[h]))this._signalingFromUnreadDBList.push(t[h].eventArray[0].c2CNotifyMsgArray[0]);else{var _=t[h];_.currentUser=this.getMyUserID(),_.conversationType=A.CONV_C2C,_.isSystemMessage=!!_.isSystemMessage,(ze(_.nick)||ze(_.avatar))&&(d=!0,Oe.d("".concat(this._n,"._newC2CMessageStoredAndSummary nick or avatar missing!"))),r=new Ki(_),_.elements=u.parseElements(_.elements,_.from),r.setElement(_.elements,p),r.setNickAndAvatar({nick:_.nick,avatar:_.avatar});var v=r.conversationID;if(i){if(1===this._messageFromUnreadDBMap.get(r.ID))continue;var m=!1;if(r.from!==this.getMyUserID()){var y=f.getLatestMessageSentByPeer(v);if(y){var M=y.nick,I=y.avatar;d?r.setNickAndAvatar({nick:M,avatar:I}):M===r.nick&&I===r.avatar||(m=!0)}}else{var C=f.getLatestMessageSentByMe(v);if(C){var b=C.nick,T=C.avatar;b===r.nick&&T===r.avatar||f.modifyMessageSentByMe({conversationID:v,latestNick:r.nick,latestAvatar:r.avatar})}}var S=1===t[h].isModified;if(f.isMessageSentByCurrentInstance(r)?r.isModified=S:S=!1,0===_.msgLifeTime)r._onlineOnlyFlag=!0,f.isMessageSentByCurrentInstance(r)||s.push(r);else{if(!f.pushIntoMessageList(s,r,S))continue;m&&(f.modifyMessageSentByPeer({conversationID:v,latestNick:r.nick,latestAvatar:r.avatar}),f.updateUserProfileSpecifiedKey({conversationID:v,nick:r.nick,avatar:r.avatar}))}i&&r.clientTime>0&&l.addMessageDelay(r.clientTime)}else this._messageFromUnreadDBMap.set(r.ID,1);if(0!==_.msgLifeTime){if(!1===r._onlineOnlyFlag){var E=f.getLastMessageTime(v);if(He(E)&&r.time<E)continue;if(ze(c[v])){var k=0;"in"===r.flow&&(r._isExcludedFromUnreadCount||(k=1)),c[v]=a.push({conversationID:v,unreadCount:k,type:r.conversationType,subType:r.conversationSubType,lastMessage:r._isExcludedFromLastMessage?"":r})-1}else{var D=c[v];a[D].type=r.conversationType,a[D].subType=r.conversationSubType,a[D].lastMessage=r._isExcludedFromLastMessage?"":r,"in"===r.flow&&(r._isExcludedFromUnreadCount||a[D].unreadCount++)}}}else r._onlineOnlyFlag=!0}this._handleSignalingFromUnreadDB();var L=!1;if(Ye(o))for(var O=function(e,t){if(o[e].unreadCount>0){L=!0;var n=a.find((function(t){return t.conversationID==="C2C".concat(o[e].from)}));n?n.unreadCount=o[e].unreadCount:a.push({conversationID:"C2C".concat(o[e].from),unreadCount:o[e].unreadCount,type:A.CONV_C2C})}},R=0,w=o.length;R<w;R++)O(R);if(Ye(n))for(var N=function(e,t){a.find((function(t){return t.conversationID==="C2C".concat(n[e].from)}))||a.push({conversationID:"C2C".concat(n[e].from),type:A.CONV_C2C,lastMsgTime:n[e].lastMsgTime})},P=0,G=n.length;P<G;P++)N(P);return{conversationOptionsList:a,messageList:s,isUnreadC2CMessage:L}}},{key:"_isSignaling",value:function(e){var t=e.eventArray;return!(!Ye(t)||10!==t[0].event)}},{key:"_handleSignalingFromUnreadDB",value:function(){var e=this._signalingFromUnreadDBList.length;if(Oe.l("".concat(this._n,"._handleSignalingFromUnreadDB signalingCount:").concat(e)),0!==e){var t=[];this._signalingFromUnreadDBList.forEach((function(e){e.hasOwnProperty("c2cMessageRevokedNotify")&&t.push(e)})),this.onC2CMessageRevoked({dataList:t}),this._signalingFromUnreadDBList.length=0,t.length=0}}},{key:"onC2CMessageRevoked",value:function(e){var t=this,n=this.getModule(11),o=[],i=null,r=!0;e.dataList.forEach((function(e){if(e.c2cMessageRevokedNotify){var a=e.c2cMessageRevokedNotify.revokedInfos;ze(a)||a.forEach((function(e){var a=t.getMyUserID()===e.from?"".concat(A.CONV_C2C).concat(e.to):"".concat(A.CONV_C2C).concat(e.from);i=n.revoke(a,e.sequence,e.random);var s=e.revokerInfo&&e.revokerInfo.revoker;if(i)i.revoker||(i.revoker=s,o.push(i));else{var c={conversationID:a,sequence:e.sequence,time:e.time,revoker:s};n.isLastMessageRevoked(c)&&(o.push(c),r=!1)}}))}})),0!==o.length&&(n.onMessageRevoked(o),!0===r&&(Oe.l("".concat(this._n,".onC2CMessageRevoked count:").concat(o.length)),this.emitOuterEvent(D.MESSAGE_REVOKED,o)))}},{key:"onC2CMessageReadReceipt",value:function(e){var t=this;e.dataList.forEach((function(e){if(!Ut(e.c2cMessageReadReceipt)){var n=e.c2cMessageReadReceipt.to;e.c2cMessageReadReceipt.uinPairReadArray.forEach((function(e){var o=e.peerReadTime;Oe.d("".concat(t._n,"._onC2CMessageReadReceipt to:").concat(n," peerReadTime:").concat(o));var i="".concat(A.CONV_C2C).concat(n),r=t.getModule(11);r.recordPeerReadTime(i,o),r.updateMessageIsPeerReadProperty(i,o)}))}}))}},{key:"onC2CMessageReadNotice",value:function(e){var t=this;e.dataList.forEach((function(e){if(!Ut(e.c2cMessageReadNotice)){var n=t.getModule(11);e.c2cMessageReadNotice.uinPairReadArray.forEach((function(e){var o=e.from,i=e.peerReadTime;Oe.d("".concat(t._n,".onC2CMessageReadNotice from:").concat(o," lastReadTime:").concat(i));var r="".concat(A.CONV_C2C).concat(o);n.updateIsReadAfterReadReport({conversationID:r,lastMessageTime:i}),n.updateUnreadCount(r)}))}}))}},{key:"onC2CMessageModified",value:function(e){Oe.d("".concat(this._n,".onC2CMessageModified options:"),JSON.stringify(e));var n=this.getModule(11);e.dataList.forEach((function(e){n.onMessageModified(t(t({},e),{},{conversationType:A.CONV_C2C}))}))}},{key:"onReadReceiptList",value:function(e){Oe.d("".concat(this._n,".onReadReceiptList options:"),JSON.stringify(e));var t=e.dataList,n=t.userID,o=t.readReceiptList;this.getModule(11).updateReadReceiptInfo({userID:n,readReceiptList:o})}},{key:"sendMessage",value:function(e,t){var n=this._createC2CMessagePack(e,t);return this.request(n)}},{key:"_createC2CMessagePack",value:function(e,t){var n=null;t&&(t.offlinePushInfo&&(n=t.offlinePushInfo),!0===t.onlineUserOnly&&(n?n.disablePush=!0:n={disablePush:!0}));var o="";je(e.cloudCustomData)&&e.cloudCustomData.length>0&&(o=e.cloudCustomData);var i=[];if(We(t)&&We(t.messageControlInfo)){var r=t.messageControlInfo,a=r.excludedFromUnreadCount,s=r.excludedFromLastMessage,c=r.excludedFromContentModeration;!0===a&&i.push("NoUnread"),!0===s&&i.push("NoLastMsg"),!0===c&&i.push("NoMsgCheck")}var u=this.isOnlineMessage(e,t)?0:void 0;return{protocolName:Tn,tjgID:this.generateTjgID(e),requestData:{fromAccount:this.getMyUserID(),toAccount:e.to,msgBody:e.getElements(),cloudCustomData:o,msgSeq:e.sequence,msgRandom:e.random,msgLifeTime:u,nick:e.nick,avatar:e.avatar,offlinePushInfo:n?{pushFlag:!0===n.disablePush?1:0,title:n.title||"",desc:n.description||"",ext:n.extension||"",apnsInfo:{badgeMode:!0===n.ignoreIOSBadge?1:0,isVoipPush:this._isVoipPush(n)},androidInfo:{OPPOChannelID:n.androidOPPOChannelID||""}}:void 0,messageControlInfo:0!==u?i:void 0,clientTime:e.clientTime,needReadReceipt:!0===e.needReadReceipt?1:0,isSupportExtension:!0===e.isSupportExtension?1:0}}}},{key:"_isVoipPush",value:function(e){var t=void 0;return ze(e.disableVoipPush)||(t=!1===e.disableVoipPush?1:0),t}},{key:"isOnlineMessage",value:function(e,t){return!(!t||!0!==t.onlineUserOnly)}},{key:"revokeMessage",value:function(e){return this.request({protocolName:On,requestData:{msgInfo:{fromAccount:e.from,toAccount:e.to,msgSeq:e.sequence,msgRandom:e.random,msgTimeStamp:e.time}}})}},{key:"deleteMessage",value:function(e){var t=e.to,n=e.keyList;return Oe.l("".concat(this._n,".deleteMessage toAccount:").concat(t," count:").concat(n.length)),this.request({protocolName:Un,requestData:{fromAccount:this.getMyUserID(),to:t,keyList:n}})}},{key:"modifyRemoteMessage",value:function(e){var t=e.from,n=e.to,o=e.version,i=void 0===o?0:o,r=e.sequence,a=e.random,s=e.time,c=e.payload,u=e.type,l=e.cloudCustomData,d=void 0;return Ot(u)&&(d=[]).push({type:u,content:c}),this.request({protocolName:xn,requestData:{from:t,to:n,version:i,sequence:r,random:a,time:s,elements:d,cloudCustomData:l}})}},{key:"setMessageRead",value:function(e){var t=this,n=e.conversationID,o=e.lastMessageTime,i="".concat(this._n,".setMessageRead");Oe.l("".concat(i," conversationID:").concat(n," lastMessageTime:").concat(o)),He(o)||this.outputWarning("DoNotModifyLastTime");var r=new Ai("setC2CMessageRead");return r.setMessage("conversationID:".concat(n," lastMessageTime:").concat(o)),this.request({protocolName:Rn,requestData:{C2CMsgReaded:{cookie:"",C2CMsgReadedItem:[{toAccount:n.replace("C2C",""),lastMessageTime:o,receipt:1}]}}}).then((function(){r.setNetworkType(t.getNetworkType()).end(),Oe.l("".concat(i," ok"));var e=t.getModule(11);return e.updateIsReadAfterReadReport({conversationID:n,lastMessageTime:o}),e.updateUnreadCount(n),Wi()})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];r.setError(e,o,i).end()})),Oe.l("".concat(i," failed. error:"),e),Xi(e)}))}},{key:"getRoamingMessage",value:function(e){var t=this,n="".concat(this._n,".getRoamingMessage"),o=e.peerAccount,i=e.conversationID,r=e.count,a=e.lastMessageTime,s=e.messageKey,c="peerAccount:".concat(o," count:").concat(r||15," lastMessageTime:").concat(a||0," messageKey:").concat(s);Oe.l("".concat(n," ").concat(c));var u=new Ai("getC2CRoamingMessages");return this.request({protocolName:Pn,requestData:{peerAccount:o,count:r||15,lastMessageTime:a||0,messageKey:s}}).then((function(e){var o=e.data,r=o.complete,a=o.messageList,s=o.messageKey,l=o.lastMessageTime;ze(a)?Oe.l("".concat(n," ok. complete:").concat(r," but messageList is undefined!")):Oe.l("".concat(n," ok. complete:").concat(r," count:").concat(a.length)),u.setNetworkType(t.getNetworkType()).setMessage("".concat(c," complete:").concat(r," length:").concat(a.length)).end();var d=t.getModule(11);1===r&&d.setCompleted(i);var f=d.onRoamingMessage(a,i);d.modifyMessageList(i),d.updateIsRead(i),d.updateRoamingMessageKeyAndTime(i,s,l);var p=d.getPeerReadTime(i);if(Oe.l("".concat(n," update isPeerRead property. conversationID:").concat(i," peerReadTime:").concat(p)),p)d.updateMessageIsPeerReadProperty(i,p);else{var h=i.replace(A.CONV_C2C,"");t.getRemotePeerReadTime([h]).then((function(){d.updateMessageIsPeerReadProperty(i,d.getPeerReadTime(i))}))}var g="";if(f.length>0)g=f[0].ID;else{var _=d.getLocalOldestMessage(i);_&&(g=_.ID)}return Oe.l("".concat(n," nextReqID:").concat(g," stored message count:").concat(f.length)),{nextReqID:g,storedMessageList:f}})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];u.setMessage(c).setError(e,o,i).end()})),Oe.w("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"getRoamingMessagesHopping",value:function(e){var t=this,n="".concat(this._n,".getRoamingMessagesHopping"),o=e.peerAccount,i=e.time,r=void 0===i?0:i,a=e.count,s=e.direction,c="".concat(A.CONV_C2C).concat(o),u="peerAccount:".concat(o," count:").concat(a," time:").concat(r," direction:").concat(s);Oe.l("".concat(n," ").concat(u));var l=new Ai("getC2CRoamingMessagesHopping");return this.request({protocolName:Pn,requestData:{peerAccount:o,count:a+1,lastMessageTime:r,direction:s}}).then((function(e){var o=e.data,i=o.complete,r=o.messageList,a=void 0===r?[]:r,d=o.lastMessageTime;Oe.l("".concat(n," ok. complete:").concat(i," count:").concat(a.length)),l.setNetworkType(t.getNetworkType()).setMessage("".concat(u," complete:").concat(i," length:").concat(a.length)).end(),1!==i&&(1===s?a.pop():a.shift());var f=t.getModule(11).onRoamingMessage(a,c,!1);t._modifyMessageList(c,f);var p=t._computeResult({complete:i,lastMessageTime:d,resultList:f});return Wi(p)})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];l.setMessage(u).setError(e,o,i).end()})),Oe.w("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"_computeResult",value:function(e){var t=e.complete,n=void 0===t?0:t,o=e.lastMessageTime,i=e.resultList,r={messageList:I(void 0===i?[]:i),isCompleted:!1,nextMessageTime:""};return 1===n?(r.isCompleted=!0,r):(r.nextMessageTime=o,r)}},{key:"_modifyMessageList",value:function(e,t){var n=this.getModule(11).getLocalConversation(e);if(n)for(var o=n.userProfile.nick,i=n.userProfile.avatar,r=this.getModule(4).getNickAndAvatarByUserID(this.getMyUserID()),a=r.nick,s=r.avatar,c=t.length-1;c>=0;c--){var u=t[c];"in"===u.flow&&(u.nick!==o&&u.setNickAndAvatar({nick:o}),u.avatar!==i&&u.setNickAndAvatar({avatar:i})),"out"===u.flow&&(u.nick!==a&&u.setNickAndAvatar({nick:a}),u.avatar!==s&&u.setNickAndAvatar({avatar:s}))}}},{key:"getRemotePeerReadTime",value:function(e){var t=this,n="".concat(this._n,".getRemotePeerReadTime");if(Ut(e))return Oe.w("".concat(n," userIDList is empty!")),Promise.resolve();var o=new Ai("getPeerReadTime");return Oe.l("".concat(n," userIDList:").concat(e)),this.request({protocolName:Gn,requestData:{userIDList:e}}).then((function(i){var r=i.data.peerReadTimeList;Oe.l("".concat(n," ok. peerReadTimeList:").concat(r));for(var a="",s=t.getModule(11),c=0;c<e.length;c++)a+="".concat(e[c],"-").concat(r[c]," "),r[c]>0&&s.recordPeerReadTime("C2C".concat(e[c]),r[c]);o.setNetworkType(t.getNetworkType()).setMessage(a).end()})).catch((function(e){t.probeNetwork().then((function(t){var n=M(t,2),i=n[0],r=n[1];o.setError(e,i,r).end()})),Oe.w("".concat(n," failed. error:"),e)}))}},{key:"sendReadReceipt",value:function(e){var t=this,n=e[0].conversationID.replace(A.CONV_C2C,""),o=new Ai("sendC2CReadReceipt");o.setMessage("peerAccount:".concat(n));var i=this.getMyUserID(),r=e.filter((function(e){return e.from!==i&&!0===e.needReadReceipt})).map((function(e){return{fromAccount:e.from,toAccount:e.to,sequence:e.sequence,random:e.random,time:e.time,clientTime:e.clientTime}}));if(0===r.length)return Xi({code:hi.READ_RECEIPT_MESSAGE_LIST_EMPTY});var a="".concat(this._n,".sendReadReceipt");return Oe.l("".concat(a,". peerAccount:").concat(n," messageInfoList length:").concat(r.length)),this.request({protocolName:yo,requestData:{peerAccount:n,messageInfoList:r}}).then((function(e){return o.end(),Oe.l("".concat(a," ok")),Wi()})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),i=n[0],r=n[1];o.setError(e,i,r).end()})),Oe.w("".concat(a," failed. error:"),e),Xi(e)}))}},{key:"getReadReceiptList",value:function(e){var t="".concat(this._n,".getReadReceiptList"),n=this.getMyUserID(),o=e.filter((function(e){return e.from===n&&!0===e.needReadReceipt}));return Oe.l("".concat(t," userID:").concat(n," messageList length:").concat(o.length)),$i({messageList:o})}},{key:"getMessageExtensions",value:function(e,t){return Oe.l("".concat(this._n,".getMessageExtensions startSequence:").concat(t)),this.request({protocolName:qn,requestData:{from:e.from,to:e.to,messageKey:this._getMessageKey(e),startSequence:t}})}},{key:"modifyMessageExtensions",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Oe.l("".concat(this._n,".modifyMessageExtensions operateType:").concat(n)),this.request({protocolName:Fn,requestData:{from:e.from,to:e.to,messageKey:this._getMessageKey(e),extensionList:t,operateType:n}})}},{key:"_getMessageKey",value:function(e){var t=e.clientSequence,n=e.random,o=e.time;return"".concat(t,"_").concat(n,"_").concat(o)}},{key:"reset",value:function(){Oe.l("".concat(this._n,".reset")),this._messageFromUnreadDBMap.clear(),this._signalingFromUnreadDBList.length=0}}]),o}(yn),Qi=function(){function e(){r(this,e),this.list=new Map,this._n="MessageListHandler",this._latestMessageSentByPeerMap=new Map,this._latestMessageSentByMeMap=new Map}return c(e,[{key:"getLocalOldestMessageByConversationID",value:function(e){if(!e)return null;if(!this.list.has(e))return null;var t=this.list.get(e).values();return t?t.next().value:null}},{key:"pushIn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.conversationID,o=!0;this.list.has(n)||this.list.set(n,new Map);var i=this._getUniqueIDOfMessage(e),r=this.list.get(n).has(i);if(r){var a=this.list.get(n).get(i);if(!t||!0===a.isModified)return!1}return this.list.get(n).set(i,e),this._setLatestMessageSentByPeer(n,e),this._setLatestMessageSentByMe(n,e),o}},{key:"unshift",value:function(e,t){var n;if(Ye(e)?e.length>0&&(n=e[0].conversationID,this._unshiftMultipleMessages(e,t)):(n=e.conversationID,this._unshiftSingleMessage(e,t)),n&&n.startsWith(A.CONV_C2C)){var o=Array.from(this.list.get(n).values()),i=o.length;if(0===i)return;for(var r=i-1;r>=0;r--)if("out"===o[r].flow){this._setLatestMessageSentByMe(n,o[r]);break}for(var a=i-1;a>=0;a--)if("in"===o[a].flow){this._setLatestMessageSentByPeer(n,o[a]);break}}}},{key:"_unshiftSingleMessage",value:function(e,t){var n=e.conversationID,o=this._getUniqueIDOfMessage(e);if(!this.list.has(n))return this.list.set(n,new Map),this.list.get(n).set(o,e),void t.push(e);var i=this.list.get(n),r=Array.from(i);i.has(o)||(r.unshift([o,e]),this.list.set(n,new Map(r)),t.push(e))}},{key:"_unshiftMultipleMessages",value:function(e,t){for(var n=e.length,o=[],i=e[0].conversationID,r=this.list.get(i),a=this.list.has(i)?Array.from(r):[],s=0;s<n;s++){var c=this._getUniqueIDOfMessage(e[s]);r&&r.has(c)||(o.push([c,e[s]]),t.push(e[s]))}this.list.set(i,new Map(o.concat(a)))}},{key:"remove",value:function(e){var t=e.conversationID,n=this._getUniqueIDOfMessage(e);this.list.has(t)&&this.list.get(t).delete(n)}},{key:"revoke",value:function(e,t,n){if(Oe.d("revoke message",e,t,n),this.list.has(e)){var o,i=k(this.list.get(e));try{for(i.s();!(o=i.n()).done;){var r=M(o.value,2)[1];if(r.sequence===t&&(ze(n)||r.random===n))return r.isRevoked||(r.isRevoked=!0),r}}catch(u){i.e(u)}finally{i.f()}}return null}},{key:"removeByConversationID",value:function(e){this.list.has(e)&&(this.list.delete(e),this._latestMessageSentByPeerMap.delete(e),this._latestMessageSentByMeMap.delete(e))}},{key:"findMessage",value:function(e){var t,n=null,o=k(this.list);try{for(o.s();!(t=o.n()).done;)for(var i=I(M(t.value,2)[1].values()),r=i.length,a=0;a<r;a++)if(i[a].ID===e){n=i[a];break}}catch(l){o.e(l)}finally{o.f()}return n}},{key:"updateMessageIsPeerReadProperty",value:function(e,t){var n=[];if(this.list.has(e)){var o,i=k(this.list.get(e));try{for(i.s();!(o=i.n()).done;){var r=M(o.value,2)[1];r.time<=t&&!r.isPeerRead&&"out"===r.flow&&(r.isPeerRead=!0,n.push(r))}}catch(u){i.e(u)}finally{i.f()}Oe.l("".concat(this._n,".updateMessageIsPeerReadProperty conversationID:").concat(e," peerReadTime:").concat(t," count:").concat(n.length))}return n}},{key:"updateMessageIsModifiedProperty",value:function(e){var t=e.conversationID;if(this.list.has(t)){var n=this._getUniqueIDOfMessage(e),o=this.list.get(t).get(n);o&&(o.isModified=!0)}}},{key:"hasLocalMessageList",value:function(e){return this.list.has(e)}},{key:"getLocalMessageList",value:function(e){return this.hasLocalMessageList(e)?I(this.list.get(e).values()):[]}},{key:"hasLocalMessage",value:function(e,t){for(var n=!1,o=this.getLocalMessageList(e),i=o.length,r=0;r<i;r++)o[r].ID===t&&(n=!0);return n}},{key:"getLocalMessage",value:function(e,t){for(var n=null,o=this.getLocalMessageList(e),i=o.length,r=0;r<i;r++)if(o[r].ID===t){n=o[r];break}return n}},{key:"getLocalLastMessage",value:function(e){var t=this.getLocalMessageList(e);return t[t.length-1]}},{key:"getLocalOldestMessage",value:function(e){return this.getLocalMessageList(e)[0]}},{key:"_setLatestMessageSentByPeer",value:function(e,t){e.startsWith(A.CONV_C2C)&&"in"===t.flow&&this._latestMessageSentByPeerMap.set(e,t)}},{key:"_setLatestMessageSentByMe",value:function(e,t){e.startsWith(A.CONV_C2C)&&"out"===t.flow&&this._latestMessageSentByMeMap.set(e,t)}},{key:"getLatestMessageSentByPeer",value:function(e){return this._latestMessageSentByPeerMap.get(e)}},{key:"getLatestMessageSentByMe",value:function(e){return this._latestMessageSentByMeMap.get(e)}},{key:"modifyMessageSentByPeer",value:function(e){var t=e.conversationID,n=e.latestNick,o=e.latestAvatar,i=this.list.get(t);if(!Ut(i)){var r=Array.from(i.values()),a=r.length;if(0!==a){for(var s=null,c=0,u=!1,l=a-1;l>=0;l--)"in"===r[l].flow&&((s=r[l]).nick!==n&&(s.setNickAndAvatar({nick:n}),u=!0),s.avatar!==o&&(s.setNickAndAvatar({avatar:o}),u=!0),u&&(c+=1));Oe.l("".concat(this._n,".modifyMessageSentByPeer conversationID:").concat(t," count:").concat(c))}}}},{key:"modifyMessageSentByMe",value:function(e){var t=e.conversationID,n=e.latestNick,o=e.latestAvatar,i=this.list.get(t);if(!Ut(i)){var r=Array.from(i.values()),a=r.length;if(0!==a){for(var s=null,c=0,u=!1,l=a-1;l>=0;l--)"out"===r[l].flow&&((s=r[l]).nick!==n&&(s.setNickAndAvatar({nick:n}),u=!0),s.avatar!==o&&(s.setNickAndAvatar({avatar:o}),u=!0),u&&(c+=1));Oe.l("".concat(this._n,".modifyMessageSentByMe conversationID:").concat(t," count:").concat(c))}}}},{key:"getTopicConversationIDList",value:function(e){return I(this.list.keys()).filter((function(t){return t.startsWith("".concat(A.CONV_GROUP).concat(e))}))}},{key:"traversal",value:function(){if(0!==this.list.size&&-1===Oe.getLevel()){o.group("conversationID-messageCount");var e,t=k(this.list);try{for(t.s();!(e=t.n()).done;){var n=M(e.value,2),i=n[0],r=n[1];o.log("".concat(i,"-").concat(r.size))}}catch(c){t.e(c)}finally{t.f()}o.groupEnd()}}},{key:"onMessageModified",value:function(e,t){if(!this.list.has(e))return{isUpdated:!1,message:null};var n=this._getUniqueIDOfMessage(t),o=this.list.get(e).has(n);if(Oe.d("".concat(this._n,".onMessageModified conversationID:").concat(e," uniqueID:").concat(n," has:").concat(o)),o){var i=this.list.get(e).get(n),r=t.messageVersion,a=t.elements,s=t.cloudCustomData;return i.version<r?(i.version=r,i._elements=JSON.parse(JSON.stringify(a)),i.payload=JSON.parse(JSON.stringify(a[0].content)),i.type=a[0].type,i.cloudCustomData=s,i.isModified=!0,{isUpdated:!0,message:i}):{isUpdated:!1,message:i}}return{isUpdated:!1,message:null}}},{key:"_getUniqueIDOfMessage",value:function(e){var t=e.from,n=e.to,o=e.random,i=e.sequence,r=e.time;return"".concat(t,"-").concat(n,"-").concat(o,"-").concat(i,"-").concat(r)}},{key:"reset",value:function(){this.list.clear(),this._latestMessageSentByPeerMap.clear(),this._latestMessageSentByMeMap.clear()}}]),e}(),Zi="_a2KeyAndTinyIDUpdated",er="_cloudConfigUpdated",tr="_profileUpdated";function nr(e){this.mixin(e)}nr.mixin=function(e){var t=e.prototype||e;t._isReady=!1,t.ready=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)return this._isReady?void(t?e.call(this):setTimeout(e,1)):(this._readyQueue=this._readyQueue||[],void this._readyQueue.push(e))},t.triggerReady=function(){var e=this;this._isReady=!0,setTimeout((function(){var t=e._readyQueue;e._readyQueue=[],t&&t.length>0&&t.forEach((function(e){e.call(this)}),e)}),1)},t.resetReady=function(){this._isReady=!1,this._readyQueue=[]},t.isReady=function(){return this._isReady}};var or=["jpg","jpeg","gif","png","bmp","image","webp"],ir=["mp4","quicktime","mov"],rr=function(){function e(t){var n=this;r(this,e),Ut(t)||(this.userID=t.userID||"",this.nick=t.nick||"",this.gender=t.gender||"",this.birthday=t.birthday||0,this.location=t.location||"",this.selfSignature=t.selfSignature||"",this.allowType=t.allowType||A.ALLOW_TYPE_ALLOW_ANY,this.language=t.language||0,this.avatar=t.avatar||"",this.messageSettings=t.messageSettings||0,this.adminForbidType=t.adminForbidType||A.FORBID_TYPE_NONE,this.level=t.level||0,this.role=t.role||0,this.lastUpdatedTime=0,this.profileCustomField=[],Ut(t.profileCustomField)||t.profileCustomField.forEach((function(e){n.profileCustomField.push({key:e.key,value:e.value})})))}return c(e,[{key:"validate",value:function(e){var t=!0,n="";if(Ut(e))return{valid:!1,tips:"empty options"};if(e.profileCustomField)for(var o=e.profileCustomField.length,i=null,r=0;r<o;r++){if(i=e.profileCustomField[r],!je(i.key)||-1===i.key.indexOf("Tag_Profile_Custom"))return{valid:!1,tips:"The prefix of keys of the custom profile key-value pairs (which is profileCustomField) must be Tag_Profile_Custom"};if(!je(i.value))return{valid:!1,tips:"The type of values of the custom profile key-value pairs (which is profileCustomField) must be String"}}for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if("profileCustomField"===a)continue;if(Ut(e[a])&&!je(e[a])&&!He(e[a])){n="key:"+a+", invalid value:"+e[a],t=!1;continue}switch(a){case"nick":je(e[a])||(n="nick must be a string",t=!1),ot(e[a])>500&&(n="nick name limited: must less than or equal to ".concat(500," bytes, current size: ").concat(ot(e[a])," bytes"),t=!1);break;case"gender":st(Ne,e.gender)||(n="key:gender, invalid value:"+e.gender,t=!1);break;case"birthday":He(e.birthday)||(n="birthday must be a number",t=!1);break;case"location":je(e.location)||(n="location must be a string",t=!1);break;case"selfSignature":je(e.selfSignature)||(n="selfSignature must be a string",t=!1);break;case"allowType":st(Ge,e.allowType)||(n="key:allowType, invalid value:"+e.allowType,t=!1);break;case"language":He(e.language)||(n="language must be a number",t=!1);break;case"avatar":je(e.avatar)||(n="avatar must be a string",t=!1);break;case"messageSettings":0!==e.messageSettings&&1!==e.messageSettings&&(n="messageSettings must be 0 or 1",t=!1);break;case"adminForbidType":st(Pe,e.adminForbidType)||(n="key:adminForbidType, invalid value:"+e.adminForbidType,t=!1);break;case"level":He(e.level)||(n="level must be a number",t=!1);break;case"role":He(e.role)||(n="role must be a number",t=!1);break;default:n="unknown key:"+a+"  "+e[a],t=!1}}return{valid:t,tips:n}}}]),e}(),ar=c((function e(t){r(this,e),this.value=t,this.next=null})),sr=function(){function e(t){r(this,e),this.MAX_LENGTH=t,this.pTail=null,this.pNodeToDel=null,this.map=new Map}return c(e,[{key:"set",value:function(e){var t=new ar(e);if(this.map.size<this.MAX_LENGTH)null===this.pTail?(this.pTail=t,this.pNodeToDel=t):(this.pTail.next=t,this.pTail=t),this.map.set(e,1);else{var n=this.pNodeToDel;this.pNodeToDel=this.pNodeToDel.next,this.map.delete(n.value),n.next=null,n=null,this.pTail.next=t,this.pTail=t,this.map.set(e,1)}}},{key:"has",value:function(e){return this.map.has(e)}},{key:"delete",value:function(e){this.has(e)&&this.map.delete(e)}},{key:"tail",value:function(){return this.pTail}},{key:"size",value:function(){return this.map.size}},{key:"data",value:function(){return Array.from(this.map.keys())}},{key:"reset",value:function(){for(var e;null!==this.pNodeToDel;)e=this.pNodeToDel,this.pNodeToDel=this.pNodeToDel.next,e.next=null,e=null;this.pTail=null,this.map.clear()}}]),e}(),cr=["groupID","name","avatar","type","introduction","notification","ownerID","selfInfo","createTime","infoSequence","lastInfoTime","lastMessage","nextMessageSeq","memberNum","maxMemberNum","memberList","joinOption","groupCustomField","muteAllMembers","isSupportTopic","inviteOption","_lastRevokedTime"],ur=function(){function e(t){r(this,e),this.groupID="",this.name="",this.avatar="",this.type="",this.introduction="",this.notification="",this.ownerID="",this.createTime="",this.infoSequence="",this.lastInfoTime="",this.selfInfo={messageRemindType:"",joinTime:"",nameCard:"",role:"",userID:"",memberCustomField:void 0,readedSequence:0,excludedUnreadSequenceList:void 0},this.lastMessage={lastTime:"",lastSequence:"",fromAccount:"",messageForShow:""},this.nextMessageSeq="",this.memberNum="",this.memberCount="",this.maxMemberNum="",this.maxMemberCount="",this.joinOption="",this.inviteOption="",this.groupCustomField=[],this.muteAllMembers=!1,this.isSupportTopic=!1,this._lastRevokedTime=0,this._initGroup(t)}return c(e,[{key:"memberNum",get:function(){return this.memberCount},set:function(e){}},{key:"maxMemberNum",get:function(){return this.maxMemberCount},set:function(e){}},{key:"_initGroup",value:function(e){for(var t in e)cr.indexOf(t)<0||("selfInfo"!==t?("memberNum"===t&&(this.memberCount=e[t]),"maxMemberNum"===t&&(this.maxMemberCount=e[t]),"isSupportTopic"!==t?this[t]=e[t]:this.isSupportTopic=1===e[t]):this.updateSelfInfo(e[t]))}},{key:"updateGroup",value:function(e){var t=this;e.appid=void 0,e.grossTopicNextMsgSeq=void 0,e.selfInfo&&(e.selfInfo.grossTopicReadSeq=void 0);var n=JSON.parse(JSON.stringify(e));n.lastMsgTime&&(this.lastMessage.lastTime=n.lastMsgTime),ze(n.muteAllMembers)||("On"===n.muteAllMembers?n.muteAllMembers=!0:n.muteAllMembers=!1),n.groupCustomField&&dt(this.groupCustomField,n.groupCustomField),ze(n.memberNum)||(this.memberCount=n.memberNum),ze(n.maxMemberNum)||(this.maxMemberCount=n.maxMemberNum),ze(n.isSupportTopic)||(this.isSupportTopic=He(n.isSupportTopic)?1===n.isSupportTopic:n.isSupportTopic),et(this,n,["members","errorCode","lastMsgTime","groupCustomField","memberNum","maxMemberNum","isSupportTopic"]),Ye(n.members)&&n.members.length>0&&n.members.forEach((function(e){e.userID===t.selfInfo.userID&&et(t.selfInfo,e,["sequence"])}))}},{key:"updateSelfInfo",value:function(e){var n={nameCard:e.nameCard,joinTime:e.joinTime,role:e.role,messageRemindType:e.messageRemindType,readedSequence:e.readedSequence,excludedUnreadSequenceList:e.excludedUnreadSequenceList};et(this.selfInfo,t({},n),[],["",null,void 0,0,NaN])}},{key:"setSelfNameCard",value:function(e){this.selfInfo.nameCard=e}}]),e}(),lr=function(e,n){return ze(e)?{lastTime:0,lastSequence:0,fromAccount:0,messageForShow:"",payload:null,type:"",isRevoked:!1,cloudCustomData:"",onlineOnlyFlag:!1,nick:"",nameCard:"",version:0,isPeerRead:!1,revoker:null}:e instanceof Ki?{lastTime:e.time||0,lastSequence:e.sequence||0,fromAccount:e.from||"",messageForShow:Lt(e.type,e.payload,n),payload:e.payload||null,type:e.type||null,isRevoked:e.isRevoked||!1,cloudCustomData:e.cloudCustomData||"",onlineOnlyFlag:e._onlineOnlyFlag||!1,nick:e.nick||"",nameCard:e.nameCard||"",version:e.version||0,isPeerRead:e.isPeerRead||!1,revoker:e.revoker||null}:t(t({},e),{},{messageForShow:Lt(e.type,e.payload,n)})},dr=function(){function e(t,n){r(this,e),this.conversationID=t.conversationID||"",this.unreadCount=t.unreadCount||0,this.type=t.type||"",this.lastMessage=lr(t.lastMessage,n),t.lastMsgTime&&(this.lastMessage.lastTime=t.lastMsgTime),this._isInfoCompleted=!1,this.peerReadTime=t.peerReadTime||0,this.groupAtInfoList=[],this.remark="",this.isPinned=t.isPinned||!1,this.messageRemindType="",this.markList=t.markList||[],this.customData=t.customData||"",this.conversationGroupList=t.conversationGroupList||[],this._initProfile(t)}return c(e,[{key:"toAccount",get:function(){return this.conversationID.startsWith(A.CONV_C2C)?this.conversationID.replace(A.CONV_C2C,""):this.conversationID.startsWith(A.CONV_GROUP)?this.conversationID.replace(A.CONV_GROUP,""):""}},{key:"subType",get:function(){return this.groupProfile?this.groupProfile.type:""}},{key:"_initProfile",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case"userProfile":t.userProfile=e.userProfile;break;case"groupProfile":t.groupProfile=e.groupProfile}})),ze(this.userProfile)&&this.type===A.CONV_C2C?this.userProfile=new rr({userID:e.conversationID.replace("C2C","")}):ze(this.groupProfile)&&this.type===A.CONV_GROUP&&(this.groupProfile=new ur({groupID:e.conversationID.replace("GROUP","")}))}},{key:"updateUnreadCount",value:function(e){var t=e.nextUnreadCount,n=e.isFromGetConversations,o=e.isUnreadC2CMessage;ze(t)||(ft(this.subType)?this.unreadCount=0:n&&this.type===A.CONV_GROUP||n&&this.type===A.CONV_TOPIC||o&&this.type===A.CONV_C2C?this.unreadCount=t:this.unreadCount=this.unreadCount+t)}},{key:"updateLastMessage",value:function(e){this.lastMessage=lr(e)}},{key:"updateGroupAtInfoList",value:function(e){if(!this._isNeedMergeGroupAtInfo(e)){var t,n=(C(t=e.groupAtType)||b(t)||T(t)||E()).slice(0);-1!==n.indexOf(A.CONV_AT_ME)&&-1!==n.indexOf(A.CONV_AT_ALL)&&(n=[A.CONV_AT_ALL_AT_ME]);var o={from:e.from,groupID:e.groupID,topicID:e.topicID,messageSequence:e.sequence,atTypeArray:n,__random:e.__random,__sequence:e.__sequence};this.groupAtInfoList.push(o)}}},{key:"_isNeedMergeGroupAtInfo",value:function(e){var t=e.groupID,n=e.sequence;if(!pt({groupID:t}))return!1;var o=!1;return this.groupAtInfoList.forEach((function(t){t.messageSequence===n&&(t.atTypeArray.indexOf(A.CONV_AT_ME)>-1&&e.groupAtType.indexOf(A.CONV_AT_ALL)>-1&&(t.atTypeArray=[A.CONV_AT_ALL_AT_ME]),t.atTypeArray.indexOf(A.CONV_AT_ALL)>-1&&e.groupAtType.indexOf(A.CONV_AT_ME)>-1&&(t.atTypeArray=[A.CONV_AT_ALL_AT_ME],t.__random=e.__random,t.__sequence=e.__sequence),o=!0)})),o}},{key:"clearGroupAtInfoList",value:function(){this.groupAtInfoList.length=0}},{key:"reduceUnreadCount",value:function(){return this.unreadCount>=1&&(this.unreadCount-=1,!0)}},{key:"isLastMessageRevoked",value:function(e){var t=e.sequence,n=e.time;return this.type===A.CONV_C2C&&t===this.lastMessage.lastSequence&&n===this.lastMessage.lastTime||this.type===A.CONV_GROUP&&t===this.lastMessage.lastSequence}},{key:"setLastMessageRevoked",value:function(e){this.lastMessage.isRevoked=e}},{key:"setLastMessageRevoker",value:function(e){this.lastMessage.revoker=e}}]),e}(),fr=function(){function e(t){r(this,e),this._conversationModule=t,this._n="MessageRemindHandler",this._updateSequence=0}return c(e,[{key:"getC2CMessageRemindType",value:function(){var e=this,t="".concat(this._n,".getC2CMessageRemindType");return this._conversationModule.request({protocolName:Nn,updateSequence:this._updateSequence}).then((function(n){Oe.l("".concat(t," ok"));var o=n.data,i=o.updateSequence,r=o.muteFlagList;e._updateSequence=i,e._patchC2CMessageRemindType(r)})).catch((function(e){Oe.e("".concat(t," failed. error:"),e)}))}},{key:"_patchC2CMessageRemindType",value:function(e){var t=this,n=0,o="";Ye(e)&&e.length>0&&e.forEach((function(e){var i=e.userID,r=e.muteFlag;0===r?o=A.MSG_REMIND_ACPT_AND_NOTE:1===r?o=A.MSG_REMIND_DISCARD:2===r&&(o=A.MSG_REMIND_ACPT_NOT_NOTE),!0===t._conversationModule.patchMessageRemindType({ID:i,isC2CConversation:!0,messageRemindType:o})&&(n+=1)})),Oe.l("".concat(this._n,"._patchC2CMessageRemindType count:").concat(n))}},{key:"set",value:function(e){return e.groupID?this._setGroupMessageRemindType(e):Ye(e.userIDList)?this._setC2CMessageRemindType(e):void 0}},{key:"_setGroupMessageRemindType",value:function(e){var t=this,n="".concat(this._n,"._setGroupMessageRemindType"),o=e.groupID,i=e.messageRemindType,r="groupID:".concat(o," messageRemindType:").concat(i),a=new Ai("setMessageRemindType");return a.setMessage(r),this._getModule(9).modifyGroupMemberInfo({groupID:o,messageRemindType:i,userID:this._conversationModule.getMyUserID()}).then((function(){a.setNetworkType(t._conversationModule.getNetworkType()).end(),Oe.l("".concat(n," ok. ").concat(r));var o=t.onGroupMessageRemindTypeUpdated(e);return t._conversationModule.emitTotalUnreadMessageCountUpdate(),Wi(o)})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];a.setError(e,o,i).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"onGroupMessageRemindTypeUpdated",value:function(e){var t=e.groupID,n=e.messageRemindType,o=this._getModule(7).getLocalGroupProfile(t);if(o&&(o.selfInfo.messageRemindType=n),ht(t)){var i=t,r=At(i),a=this._getModule(10).getLocalTopic(r,i);return a&&(a.updateSelfInfo({messageRemindType:n}),this._conversationModule.emitOuterEvent(D.TOPIC_UPDATED,{groupID:r,topic:a})),{topic:a}}return this._conversationModule.patchMessageRemindType({ID:t,isC2CConversation:!1,messageRemindType:n})&&this._emitConversationUpdate(),{group:o}}},{key:"_setC2CMessageRemindType",value:function(e){var t=this,n="".concat(this._n,"._setC2CMessageRemindType"),o=e.userIDList,i=e.messageRemindType,r=o.slice(0,30),a=0;i===A.MSG_REMIND_DISCARD?a=1:i===A.MSG_REMIND_ACPT_NOT_NOTE&&(a=2);var s="userIDList:".concat(r," messageRemindType:").concat(i),c=new Ai("setMessageRemindType");return c.setMessage(s),this._conversationModule.request({protocolName:wn,requestData:{userIDList:r,muteFlag:a}}).then((function(e){c.setNetworkType(t._conversationModule.getNetworkType()).end();var o=e.data,a=o.updateSequence,s=o.errorList;t._updateSequence=a;var u=[],l=[];Ye(s)&&s.forEach((function(e){u.push(e.userID),l.push({userID:e.userID,code:e.errorCode})}));var d=r.filter((function(e){return-1===u.indexOf(e)}));Oe.l("".concat(n," ok. successUserIDList:").concat(d," failureUserIDList:").concat(JSON.stringify(l)));var f=0;return d.forEach((function(e){t._conversationModule.patchMessageRemindType({ID:e,isC2CConversation:!0,messageRemindType:i})&&(f+=1)})),f>=1&&t._emitConversationUpdate(),r.length=u.length=0,t._conversationModule.emitTotalUnreadMessageCountUpdate(),$i({successUserIDList:d.map((function(e){return{userID:e}})),failureUserIDList:l})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];c.setError(e,o,i).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"_getModule",value:function(e){return this._conversationModule.getModule(e)}},{key:"_emitConversationUpdate",value:function(){this._conversationModule.emitConversationUpdate(!0,!1)}},{key:"setUpdateSequence",value:function(e){this._updateSequence=e}},{key:"reset",value:function(){Oe.l("".concat(this._n,".reset")),this._updateSequence=0}}]),e}(),pr=function(){function e(t){r(this,e),this._conversationModule=t,this._n="ConvGroupHandler",this._convGroupMap=new Map,this._startIndex=0,this._pagingStatus=Vt.NOT_START}return c(e,[{key:"setConvCustomData",value:function(e){var t=this,n="".concat(this._n,".").concat("setConvCustomData"),o=e.conversationIDList,i=e.customData;Oe.l("".concat(n," options:"),e);var r=new Ai("setConvCustomData");r.setMessage(JSON.stringify(e));var a={fromAccount:this._getMyUserID(),itemList:[]},s=[],c=[];return o.forEach((function(e){if(!t._hasLocalConversation(e))return t._onConversationNotFound(c,e),!0;if(!gt(e)&&!_t(e))return t._onConversationIDInvalid(c,e),!0;var n={operationType:2,contactItem:void 0,customMark:i};gt(e)?n.contactItem={type:1,toAccount:e.replace(A.CONV_C2C,"")}:_t(e)&&(n.contactItem={type:2,groupID:e.replace(A.CONV_GROUP,"")}),a.itemList.push(n)})),c.length===o.length?$i({successConversationIDList:s,failureConversationIDList:c}):this._conversationModule.request({protocolName:Kn,requestData:a}).then((function(e){r.setNetworkType(t._conversationModule.getNetworkType()).end(),Oe.l("".concat(n," ok"));var o=e.data.resultItem;if(Ye(o)){var a,u,l=!1;o.forEach((function(e){a=t._concatConversationID(e.contactItem),0===e.resultCode?(s.push(a),(u=t._getLocalConversation(a))&&u.customData!==i&&(u.customData=i,l=!0)):c.push({conversationID:a,code:e.resultCode,message:e.resultInfo})})),!0===l&&t._emitConversationUpdate()}return Wi({successConversationIDList:s,failureConversationIDList:c})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];r.setError(e,o,i).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"markConversation",value:function(e){var t=this;if(!this._conversationModule.canIUse(x.CONV_MARK))return Xi({code:hi.CANNOT_USE_COMMERCIAL_ABILITY});var n="".concat(this._n,".").concat("markConversation"),o=e.conversationIDList,i=e.markType,r=e.enableMark;Oe.l("".concat(n," options:"),e);var a=new Ai("markConversation");a.setMessage(JSON.stringify(e));var s=void 0,c=void 0,u=this._getFlagBit(i);!0===r?c=[u]:s=[u];var l={fromAccount:this._getMyUserID(),itemList:[]},d=[],f=[];return o.forEach((function(e){if(!t._hasLocalConversation(e))return t._onConversationNotFound(f,e),!0;if(!gt(e)&&!_t(e))return t._onConversationIDInvalid(f,e),!0;var n={operationType:1,contactItem:void 0,clearMark:s,setMark:c};gt(e)?n.contactItem={type:1,toAccount:e.replace(A.CONV_C2C,"")}:_t(e)&&(n.contactItem={type:2,groupID:e.replace(A.CONV_GROUP,"")}),l.itemList.push(n)})),f.length===o.length?$i({successConversationIDList:d,failureConversationIDList:f}):this._conversationModule.request({protocolName:Wn,requestData:l}).then((function(e){a.setNetworkType(t._conversationModule.getNetworkType()).end(),Oe.l("".concat(n," ok"));var o=e.data.resultItem;if(Ye(o)){var s,c,u=!1;o.forEach((function(e){if(s=t._concatConversationID(e.contactItem),0===e.resultCode){if(d.push(s),c=t._getLocalConversation(s)){var n=c.markList.indexOf(i);!0===r?-1===n&&(c.markList.push(i),u=!0):-1!==n&&(c.markList.splice(n,1),u=!0)}}else f.push({conversationID:s,code:e.resultCode,message:e.resultInfo})})),!0===u&&t._emitConversationUpdate()}return Wi({successConversationIDList:d,failureConversationIDList:f})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];a.setError(e,o,i).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"getLocalConvGroupList",value:function(){var e=this;return Oe.l("".concat(this._n,".getLocalConvGroupList pagingStatus:").concat(this._pagingStatus)),this._pagingStatus===Vt.REJECTED?this.getRemoteConvGroupList().then((function(){return Wi(I(e._convGroupMap.values()))})):$i(I(this._convGroupMap.values()))}},{key:"getRemoteConvGroupList",value:function(){var e=this,t="".concat(this._n,".getRemoteConvGroupList");return this._pagingStatus=Vt.PENDING,this._conversationModule.request({protocolName:Qn,requestData:{fromAccount:this._getMyUserID(),startIndex:this._startIndex,startTime:ke()}}).then((function(n){var o,i,r=n.data,a=r.completeFlag,s=r.contactItem,c=r.nextStartIndex,u=void 0===c?0:c,l=r.groupItem;if(e._startIndex=u,Oe.l("".concat(t," completeFlag:").concat(a," nextStartIndex:").concat(u)),Ye(l)&&l.forEach((function(t){var n=t.convGroupID,o=t.groupName;e._convGroupMap.set(n,o)})),Ye(s)&&s.forEach((function(t){var n=t.standardMark,r=t.customData,a=t.convGroupIDList;if(o=e._concatConversationID(t),(i=e._getLocalConversation(o))&&(i.markList=Rt(n),i.customData=r||"",Ye(a))){var s=[];a.forEach((function(t){e._convGroupMap.has(t)&&s.push(e._convGroupMap.get(t))})),i.conversationGroupList=[].concat(s),s.length=0}})),0===a)return e.getRemoteConvGroupList();1===a&&(e._pagingStatus=Vt.RESOLVED,e._emitConversationUpdate(),e._emitConvGroupListUpdate())})).catch((function(n){e._pagingStatus=Vt.REJECTED,Oe.w("".concat(t," failed. error:"),n)}))}},{key:"createConvGroup",value:function(e){var t=this;if(!this._conversationModule.canIUse(x.CONV_GROUP))return Xi({code:hi.CANNOT_USE_COMMERCIAL_ABILITY});var n="".concat(this._n,".").concat("createConvGroup");Oe.l("".concat(n," options:"),e);var o=new Ai("createConvGroup");o.setMessage(JSON.stringify(e));var i=e.groupName,r=e.conversationIDList,a={fromAccount:this._getMyUserID(),itemList:[{groupName:i,contactItem:[]}]},s=[],c=[];return r.forEach((function(e){return t._hasLocalConversation(e)?gt(e)||_t(e)?void(gt(e)?a.itemList[0].contactItem.push({type:1,toAccount:e.replace(A.CONV_C2C,"")}):_t(e)&&a.itemList[0].contactItem.push({type:2,groupID:e.replace(A.CONV_GROUP,"")})):(t._onConversationIDInvalid(c,e),!0):(t._onConversationNotFound(c,e),!0)})),c.length===r.length?$i({successConversationIDList:s,failureConversationIDList:c}):this._conversationModule.request({protocolName:Yn,requestData:a}).then((function(e){o.setNetworkType(t._conversationModule.getNetworkType()).end(),Oe.l("".concat(n," ok"));var r=e.data.groupResultItem[0],a=r.groupItem,u=r.resultItem;if(We(a)&&(t._convGroupMap.set(a.convGroupID,a.groupName),t._emitConvGroupListUpdate()),Ye(u)){var l,d,f=!1;u.forEach((function(e){l=t._concatConversationID(e.contactItem),0===e.resultCode?(s.push(l),(d=t._getLocalConversation(l))&&-1===d.conversationGroupList.indexOf(i)&&(d.conversationGroupList.push(i),f=!0)):c.push({conversationID:l,code:e.resultCode,message:e.resultInfo})})),!0===f&&(t._emitConversationUpdate(),t._emitConvGroupListUpdate())}return Wi({successConversationIDList:s,failureConversationIDList:c})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=M(t,2),i=n[0],r=n[1];o.setError(e,i,r).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"deleteConvGroup",value:function(e){var t=this;if(!this._conversationModule.canIUse(x.CONV_GROUP))return Xi({code:hi.CANNOT_USE_COMMERCIAL_ABILITY});var n="".concat(this._n,".").concat("deleteConvGroup");Oe.l("".concat(n," groupName:").concat(e));var o=new Ai("deleteConvGroup");return o.setMessage(e),this._conversationModule.request({protocolName:zn,requestData:{fromAccount:this._getMyUserID(),groupName:[e]}}).then((function(i){o.setNetworkType(t._conversationModule.getNetworkType()).end(),Oe.l("".concat(n," ok"));var r=i.data.groupItem;if(Ye(r)){var a=!1;r.forEach((function(e){t._convGroupMap.has(e.convGroupID)&&(t._convGroupMap.delete(e.convGroupID),a=!0)})),!0===a&&t._emitConvGroupListUpdate()}t._eraseFromConversationGroupList([e])})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=M(t,2),i=n[0],r=n[1];o.setError(e,i,r).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"renameConvGroup",value:function(e){var t=this;if(!this._conversationModule.canIUse(x.CONV_GROUP))return Xi({code:hi.CANNOT_USE_COMMERCIAL_ABILITY});var n="".concat(this._n,".").concat("renameConvGroup");Oe.l("".concat(n," options:"),e);var o=new Ai("renameConvGroup");o.setMessage(JSON.stringify(e));var i=e.oldName,r=e.newName;return this._conversationModule.request({protocolName:$n,requestData:{fromAccount:this._getMyUserID(),updateType:1,updateGroup:{updateGroupType:1,oldName:i,newName:r}}}).then((function(e){o.setNetworkType(t._conversationModule.getNetworkType()).end(),Oe.l("".concat(n," ok"));var a=e.data.updateGroupResult.convGroupID;t._convGroupMap.set(a,r),t._emitConvGroupListUpdate();var s,c,u=t._conversationModule.getLocalConversationList(),l=!1;u.forEach((function(e){s=e.conversationGroupList,-1!==(c=s.indexOf(i))&&(s.splice(c,1,r),l=!0)})),!0===l&&t._emitConversationUpdate()})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=M(t,2),i=n[0],r=n[1];o.setError(e,i,r).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"addConvsToGroup",value:function(e){var t=this;if(!this._conversationModule.canIUse(x.CONV_GROUP))return Xi({code:hi.CANNOT_USE_COMMERCIAL_ABILITY});var n="".concat(this._n,".").concat("addConvsToGroup");Oe.l("".concat(n," options:"),e);var o=new Ai("addConvsToGroup");o.setMessage(JSON.stringify(e));var i=e.conversationIDList,r=e.groupName,a={fromAccount:this._getMyUserID(),updateType:1,updateGroup:{updateGroupType:2,groupName:r,updateItem:[]}},s=[],c=[];return i.forEach((function(e){return t._hasLocalConversation(e)?gt(e)||_t(e)?void(gt(e)?a.updateGroup.updateItem.push({operationType:1,contactItem:{type:1,toAccount:e.replace(A.CONV_C2C,"")}}):_t(e)&&a.updateGroup.updateItem.push({operationType:1,contactItem:{type:2,groupID:e.replace(A.CONV_GROUP,"")}})):(t._onConversationIDInvalid(c,e),!0):(t._onConversationNotFound(c,e),!0)})),c.length===i.length?$i({successConversationIDList:s,failureConversationIDList:c}):this._conversationModule.request({protocolName:Xn,requestData:a}).then((function(e){o.setNetworkType(t._conversationModule.getNetworkType()).end(),Oe.l("".concat(n," ok"));var i=e.data.updateGroupResult.contactResultItem;if(Ye(i)){var a,u,l=!1;i.forEach((function(e){a=t._concatConversationID(e.contactItem),0===e.resultCode?(u=t._getLocalConversation(a))&&-1===u.conversationGroupList.indexOf(r)&&(u.conversationGroupList.push(r),s.push(a),l=!0):c.push({conversationID:a,code:e.resultCode,message:e.resultInfo})})),!0===l&&(t._emitConversationUpdate(),t._emitConvInGroupUpdate(r))}return Wi({successConversationIDList:s,failureConversationIDList:c})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=M(t,2),i=n[0],r=n[1];o.setError(e,i,r).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"deleteConvsFromGroup",value:function(e){var t=this;if(!this._conversationModule.canIUse(x.CONV_GROUP))return Xi({code:hi.CANNOT_USE_COMMERCIAL_ABILITY});var n="".concat(this._n,".").concat("deleteConvsFromGroup");Oe.l("".concat(n," options:"),e);var o=new Ai("deleteConvsFromGroup");o.setMessage(JSON.stringify(e));var i=e.conversationIDList,r=e.groupName,a={fromAccount:this._getMyUserID(),updateType:1,updateGroup:{updateGroupType:2,groupName:r,updateItem:[]}},s=[],c=[];return i.forEach((function(e){return t._hasLocalConversation(e)?gt(e)||_t(e)?void(gt(e)?a.updateGroup.updateItem.push({operationType:2,contactItem:{type:1,toAccount:e.replace(A.CONV_C2C,"")}}):_t(e)&&a.updateGroup.updateItem.push({operationType:2,contactItem:{type:2,groupID:e.replace(A.CONV_GROUP,"")}})):(t._onConversationIDInvalid(c,e),!0):(t._onConversationNotFound(c,e),!0)})),c.length===i.length?$i({successConversationIDList:s,failureConversationIDList:c}):this._conversationModule.request({protocolName:Jn,requestData:a}).then((function(e){o.setNetworkType(t._conversationModule.getNetworkType()).end(),Oe.l("".concat(n," ok"));var i=e.data.updateGroupResult.contactResultItem;if(Ye(i)){var a,u,l=!1;i.forEach((function(e){if(a=t._concatConversationID(e.contactItem),0===e.resultCode){if(u=t._getLocalConversation(a)){var n=u.conversationGroupList.indexOf(r);-1!==n&&(u.conversationGroupList.splice(n,1),s.push(a),l=!0)}}else c.push({conversationID:a,code:e.resultCode,message:e.resultInfo})})),!0===l&&(t._emitConversationUpdate(),t._emitConvInGroupUpdate(r))}return Wi({successConversationIDList:s,failureConversationIDList:c})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=M(t,2),i=n[0],r=n[1];o.setError(e,i,r).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"onConvMarkUpdated",value:function(e){var t=this;if(!Ut(e)){var n,o;Oe.d("".concat(this._n,".onConvMarkUpdated markItemList:"),e);var i=!1;e.forEach((function(e){var r=e.recentContactItem,a=e.optType,s=e.standardMark,c=e.customMark;if(n=t._concatConversationID(r),o=t._getLocalConversation(n))if(1===a){var u=Rt(s);!0!==function(e,t){if(e===t)return!0;if(!e||!t)return!1;if(e.length!==t.length)return!1;for(var n=0,o=e.length;n<o;n++)if(e[n]!==t[n])return!1;return!0}(o.markList,u)&&(o.markList=u,i=!0)}else 2===a&&o.customData!==c&&void 0!==c&&(o.customData=c,i=!0)})),!0===i&&this._emitConversationUpdate()}}},{key:"onConvGroupCreated",value:function(e){var t=this;Oe.d("".concat(this._n,".onConvGroupCreated resultList:"),e);var n=!1,o=!1;Ye(e)&&(e.forEach((function(e){var i=e.msgGroupItem,r=i.groupID,a=i.groupName;t._convGroupMap.get(r)!==a&&(t._convGroupMap.set(r,a),o=!0);var s,c,u=e.msgRecentContactItem;Ye(u)&&u.forEach((function(e){s=t._concatConversationID(e),(c=t._getLocalConversation(s))&&-1===c.conversationGroupList.indexOf(a)&&(c.conversationGroupList.push(a),n=!0)}))})),!0===n&&this._emitConversationUpdate(),!0===o&&this._emitConvGroupListUpdate())}},{key:"onConvGroupDeleted",value:function(e){var t=this;Oe.d("".concat(this._n,".onConvGroupDeleted groupItemList:"),e);var n=[];if(Ye(e)){var o=!1;e.forEach((function(e){var i=e.groupID,r=e.groupName;t._convGroupMap.has(i)&&(t._convGroupMap.delete(i),o=!0,n.push(r))})),!0===o&&this._emitConvGroupListUpdate()}this._eraseFromConversationGroupList(n)}},{key:"_eraseFromConversationGroupList",value:function(e){Ut(e)||(this._conversationModule.getLocalConversationList().forEach((function(t){t.conversationGroupList=t.conversationGroupList.filter((function(t){return!e.includes(t)}))})),this._emitConversationUpdate())}},{key:"onConvGroupNameUpdated",value:function(e){Oe.d("".concat(this._n,".onConvGroupNameUpdated options:"),e);var t=e.groupID,n=e.groupName,o=e.oldGroupName;if(this._convGroupMap.get(t)!==n){this._convGroupMap.set(t,n),this._emitConvGroupListUpdate();var i,r,a=this._conversationModule.getLocalConversationList(),s=!1;a.forEach((function(e){i=e.conversationGroupList,-1!==(r=i.indexOf(o))&&(i.splice(r,1,n),s=!0)})),!0===s&&this._emitConversationUpdate()}}},{key:"onConvInGroupUpdated",value:function(e){var t=this;Oe.d("".concat(this._n,".onConvInGroupUpdated options:"),e);var n=e.oldGroupName,o=e.recentContactUpdateGroupItem;if(Ye(o)){var i,r,a,s=!1;o.forEach((function(e){var o=e.contactOptType,c=e.recentContactItem;i=t._concatConversationID(c),(r=t._getLocalConversation(i))&&(a=r.conversationGroupList.indexOf(n),1===o?-1===a&&(r.conversationGroupList.push(n),s=!0):2===o&&-1!==a&&(r.conversationGroupList.splice(a,1),s=!0))})),!0===s&&(this._emitConversationUpdate(),this._emitConvInGroupUpdate(n))}}},{key:"onConvAddedToOrDeletedFromGroup",value:function(e){var t=this;Oe.d("".concat(this._n,".onConvAddedToOrDeletedFromGroup options:"),e);var n=e.msgRecentContactItem,o=e.msgRecentContactUpdateContactItem,i=this._concatConversationID(n),r=this._getLocalConversation(i);if(r&&Ye(o)){var a,s=!1;o.forEach((function(e){var n=e.groupOptType,o=e.recentContactGroupItem.groupName;a=r.conversationGroupList.indexOf(o),1===n?-1===a&&(r.conversationGroupList.push(o),s=!0):2===n&&-1!==a&&(r.conversationGroupList.splice(a,1),s=!0),!0===s&&t._emitConvInGroupUpdate(o)})),!0===s&&this._emitConversationUpdate()}}},{key:"onConvGroupListSynced",value:function(e){var t=this;Ye(e)&&0!==e.length&&(Oe.l("".concat(this._n,".onConvGroupListSynced groupItemList:"),e),e.forEach((function(e){t._convGroupMap.set(e.convGroupID,e.groupName)})))}},{key:"getConvGroupListByID",value:function(e){var t=this;if(!Ut(e)){var n=[];return e.forEach((function(e){t._convGroupMap.has(e)&&n.push(t._convGroupMap.get(e))})),n}}},{key:"_onConversationNotFound",value:function(e,t){e.push({conversationID:t,code:hi.CONVERSATION_NOT_FOUND,message:this._conversationModule.getErrorMessage(hi.CONVERSATION_NOT_FOUND)})}},{key:"_onConversationIDInvalid",value:function(e,t){e.push({conversationID:t,code:hi.INVALID_CONVERSATION_ID,message:this._conversationModule.getErrorMessage(hi.INVALID_CONVERSATION_ID)})}},{key:"_getFlagBit",value:function(e){for(var t=e.toString(2),n=t.length,o=n-1;o>=0;o--)if("1"===t[o])return n-o-1}},{key:"_concatConversationID",value:function(e){var t,n=e.type,o=e.to,i=e.groupID,r=e.userID;return 1===n?ze(r)?ze(o)||(t="".concat(A.CONV_C2C).concat(o)):t="".concat(A.CONV_C2C).concat(r):2===n&&(t="".concat(A.CONV_GROUP).concat(i)),t}},{key:"_getMyUserID",value:function(){return this._conversationModule.getMyUserID()}},{key:"_insertConversationGroup",value:function(e,t){var n=this._getLocalConversation(e);if(n){var o=n.conversationGroupList;-1===o.indexOf(t)&&o.push(t)}}},{key:"_getLocalConversation",value:function(e){return this._conversationModule.getLocalConversation(e)}},{key:"_hasLocalConversation",value:function(e){return this._conversationModule.hasLocalConversation(e)}},{key:"_emitConversationUpdate",value:function(){this._conversationModule.emitConversationUpdate(!0,!1)}},{key:"_emitConvGroupListUpdate",value:function(){this._conversationModule.emitOuterEvent(D.CONVERSATION_GROUP_LIST_UPDATED,I(this._convGroupMap.values()))}},{key:"_emitConvInGroupUpdate",value:function(e){var t={groupName:e,conversationList:[]},n=this._conversationModule.getLocalConversationList();t.conversationList=n.filter((function(t){return t.conversationGroupList.includes(e)})),this._conversationModule.emitOuterEvent(D.CONVERSATION_IN_GROUP_UPDATED,t)}},{key:"reset",value:function(){Oe.l("".concat(this._n,".reset")),this._convGroupMap.clear(),this._startIndex=0,this._pagingStatus=Vt.NOT_START}}]),e}(),hr=function(e){l(o,e);var n=y(o);function o(e){var t;return r(this,o),(t=n.call(this,e))._n="ConversationModule",nr.mixin(v(t)),t._messageListHandler=new Qi,t._messageRemindHandler=new fr(v(t)),t._convGroupHandler=new pr(v(t)),t.singlyLinkedList=new sr(100),t._pagingStatus=Vt.NOT_START,t._pagingTimeStamp=0,t._pagingStartIndex=0,t._pagingPinnedTimeStamp=0,t._pagingPinnedStartIndex=0,t._pagingConvIDMap=new Map,t._convIDFromUnreadDBMap=new Map,t._conversationMap=new Map,t._tmpGroupList=[],t._tmpGroupAtTipsList=[],t._peerReadTimeMap=new Map,t._completedMap=new Map,t._roamingMessageKeyAndTimeMap=new Map,t._roamingMessageSequenceMap=new Map,t._remoteGroupReadSequenceMap=new Map,t._convTotalUnreadCount=0,t._pagingGetCostList=[],t._initListeners(),t}return c(o,[{key:"_initListeners",value:function(){var e=this.getInnerEmitterInstance();e.on(Zi,this._initLocalConversationList,this),e.on(tr,this._onProfileUpdated,this)}},{key:"onCheckTimer",value:function(e){e%60==0&&this._messageListHandler.traversal()}},{key:"_initLocalConversationList",value:function(){var e=this,t=new Ai("_initLocalConversationList");Oe.l("".concat(this._n,".").concat("_initLocalConversationList"));var n="",o=this._getStorageConversationList(),i=this.isIntl();if(o){for(var r=o.length,a=0;a<r;a++){var s=o[a];if(s){if(s.conversationID==="".concat(A.CONV_C2C,"@TLS#ERROR")||s.conversationID==="".concat(A.CONV_C2C,"@TLS#NOT_FOUND"))continue;if(s.groupProfile){var c=s.groupProfile.type;if(ft(c))continue}}this._conversationMap.set(o[a].conversationID,new dr(o[a],i))}this.emitConversationUpdate(!0,!1),n="count:".concat(r)}else n="count:0";t.setNetworkType(this.getNetworkType()).setMessage(n).end(),this.getModule(6)||this.triggerReady(),this.ready((function(){e._tmpGroupList.length>0&&(e.updateConversationGroupProfile(e._tmpGroupList),e._tmpGroupList.length=0)})),this.syncConversationList()}},{key:"onMessageSent",value:function(e){this._onSendOrReceiveMessage({conversationOptionsList:e.conversationOptionsList,isInstantMessage:!0})}},{key:"onNewMessage",value:function(e){this._onSendOrReceiveMessage(e)}},{key:"_onSendOrReceiveMessage",value:function(e){var t=this,n=e.conversationOptionsList,o=e.isInstantMessage,i=void 0===o||o,r=e.isUnreadC2CMessage,a=void 0!==r&&r,s=e.updateUnreadCount,c=void 0===s||s;this._isReady?0!==n.length&&(this._getC2CPeerReadTime(n),this._updateLocalConversationList({conversationOptionsList:n,isInstantMessage:i,isUnreadC2CMessage:a,isFromGetConversations:!1,updateUnreadCount:c}),i||(this._convIDFromUnreadDBMap=new Map([].concat(I(this._convIDFromUnreadDBMap),I(n.map((function(e){return[e.conversationID,1]}))))),this._diffAndDeleteConversation()),this._setStorageConversationList(),n.filter((function(e){return e.type===A.CONV_TOPIC})).length>0||this.emitConversationUpdate()):this.ready((function(){t._onSendOrReceiveMessage(e)}))}},{key:"updateConversationGroupProfile",value:function(e){var t=this;if(!Ye(e)||0!==e.length)if(0!==this._conversationMap.size){var n=!1;e.forEach((function(e){var o="GROUP".concat(e.groupID);if(t._conversationMap.has(o)){n=!0;var i=t._conversationMap.get(o);i.groupProfile=JSON.parse(JSON.stringify(e)),i.lastMessage.lastSequence<e.nextMessageSeq&&(i.lastMessage.lastSequence=e.nextMessageSeq-1),i.subType||(i.subType=e.type)}})),n&&this.emitConversationUpdate(!0,!1)}else this._tmpGroupList=e}},{key:"_updateConversationUserProfile",value:function(e){var t=this;e.data.forEach((function(e){var n="C2C".concat(e.userID);t._conversationMap.has(n)&&(t._conversationMap.get(n).userProfile=e)})),this.emitConversationUpdate(!0,!1)}},{key:"onMessageRevoked",value:function(e){var t=this;if(0!==e.length){var n=null,o=!1,i=[];e.forEach((function(e){(n=t._conversationMap.get(e.conversationID))&&(n.type===A.CONV_TOPIC?i.push(e):(n.reduceUnreadCount()&&(o=!0),n.isLastMessageRevoked({sequence:e.sequence,time:e.time})&&(n.setLastMessageRevoked(!0),n.setLastMessageRevoker(e.revoker),o=!0)))})),this.getModule(10).onMessageRevoked(i),o&&(this.emitConversationUpdate(!0,!1),this.emitTotalUnreadMessageCountUpdate())}}},{key:"isLastMessageRevoked",value:function(e){var t=!1,n=e.conversationID,o=e.sequence,i=e.time,r=this._conversationMap.get(n);return r&&(t=r.type===A.CONV_TOPIC?this.getModule(10).isLastMessageRevoked({topicID:n.replace(A.CONV_GROUP,""),sequence:o}):r.isLastMessageRevoked({sequence:o,time:i})),Oe.l("".concat(this._n,".isLastMessageRevoked options:").concat(JSON.stringify(e)," ret:").concat(t)),t}},{key:"onMessageDeleted",value:function(e){var t=this;if(0!==e.length){var n=null;e.forEach((function(e){(n=t._messageListHandler.getLocalMessage(e.conversationID,e.ID))&&(n.isDeleted=!0),e!==n&&(e.isDeleted=!0)}));for(var o=e[0].conversationID,i=this._messageListHandler.getLocalMessageList(o),r={},a=i.length-1;a>=0;a--)if(!i[a].isDeleted){r=i[a];break}var s=this._conversationMap.get(o);if(s){var c=!1;s.lastMessage.lastSequence===r.sequence&&s.lastMessage.lastTime===r.time||(Ut(r)&&(r=void 0),s.updateLastMessage(r),s.type!==A.CONV_TOPIC&&(c=!0),Oe.l("".concat(this._n,".onMessageDeleted. update conversationID:").concat(o," with lastMessage:"),s.lastMessage)),o.startsWith(A.CONV_C2C)&&this.updateUnreadCount(o),c&&this.emitConversationUpdate(!0,!1)}}}},{key:"onMessageModified",value:function(e){var t=e.conversationType,n=e.from,o=e.to,i=e.time,r=e.sequence,a=e.elements,s=e.cloudCustomData,c=e.messageVersion,u=this.getMyUserID(),l="".concat(t).concat(o);o===u&&t===A.CONV_C2C&&(l="".concat(t).concat(n));var d=this._messageListHandler.onMessageModified(l,e),f=d.isUpdated,p=d.message;!0===f&&this.emitOuterEvent(D.MESSAGE_MODIFIED,[p]);var h=this._isTopicConversation(l);if(Oe.l("".concat(this._n,".onMessageModified isUpdated:").concat(f," isTopicMessage:").concat(h," from:").concat(n," to:").concat(o)),h)this.getModule(10).onMessageModified(e);else{var g=this._conversationMap.get(l);if(g){var _=g.lastMessage;Oe.d("".concat(this._n.onMessageModified," lastMessage:"),JSON.stringify(_),"options:",JSON.stringify(e)),_&&_.lastTime===i&&_.lastSequence===r&&_.version!==c&&(_.type=a[0].type,_.payload=a[0].content,_.messageForShow=Lt(_.type,_.payload,this.isIntl()),_.cloudCustomData=s,_.version=c,this.emitConversationUpdate(!0,!1))}}return p}},{key:"onNewGroupAtTips",value:function(e){var n=this,o=e.dataList,i=null;o.forEach((function(e){e.groupAtTips?i=e.groupAtTips:e.elements?i=t(t({},e.elements),{},{sync:!0}):e.groupAtType&&(i=t(t({},e),{},{sync:!0})),i.__random=e.random,i.__sequence=e.clientSequence,n._tmpGroupAtTipsList.push(i)})),Oe.d("".concat(this._n,".onNewGroupAtTips isReady:").concat(this._isReady),this._tmpGroupAtTipsList),this._isReady&&this._handleGroupAtTipsList()}},{key:"_handleGroupAtTipsList",value:function(){var e=this;if(0!==this._tmpGroupAtTipsList.length){var t=!1;this._tmpGroupAtTipsList.forEach((function(n){var o=n.groupID,i=n.from,r=n.topicID,a=void 0===r?void 0:r,s=n.sync,c=void 0!==s&&s;if(i!==e.getMyUserID())if(ze(a)){var u=e._conversationMap.get("".concat(A.CONV_GROUP).concat(o));u&&(u.updateGroupAtInfoList(n),t=!0)}else{var l=e._conversationMap.get("".concat(A.CONV_GROUP).concat(a));if(l){l.updateGroupAtInfoList(n);var d=e.getModule(10),f=l.groupAtInfoList;d.onConversationProxy({topicID:a,groupAtInfoList:f})}Ut(l)&&c&&(e.updateTopicConversation([{conversationID:"".concat(A.CONV_GROUP).concat(a),type:A.CONV_TOPIC}]),e._conversationMap.get("".concat(A.CONV_GROUP).concat(a)).updateGroupAtInfoList(n))}})),t&&this.emitConversationUpdate(!0,!1),this._tmpGroupAtTipsList.length=0}}},{key:"_getC2CPeerReadTime",value:function(e){var t=this,n=[];if(e.forEach((function(e){t._conversationMap.has(e.conversationID)||e.type!==A.CONV_C2C||n.push(e.conversationID.replace(A.CONV_C2C,""))})),n.length>0){Oe.d("".concat(this._n,"._getC2CPeerReadTime userIDList:").concat(n));var o=this.getModule(6);o&&o.getRemotePeerReadTime(n)}}},{key:"_getStorageConversationList",value:function(){return this.getModule(13).getItem("conversationMap")}},{key:"_setStorageConversationList",value:function(){var e=this.getLocalConversationList().filter((function(e){return e.type===A.CONV_C2C||e.type===A.CONV_GROUP&&e.lastMessage.type!==A.MSG_GRP_TIP})).slice(0,20).map((function(e){return{conversationID:e.conversationID,type:e.type,subType:e.subType,lastMessage:e.lastMessage,groupProfile:e.groupProfile,userProfile:e.userProfile}}));this.getModule(13).setItem("conversationMap",e)}},{key:"emitConversationUpdate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getLocalConversationList();if(t){var o=this.getModule(7);o&&o.updateGroupLastMessage(n)}e&&this.emitOuterEvent(D.CONVERSATION_LIST_UPDATED)}},{key:"getLocalConversationList",value:function(){return I(this._conversationMap.values()).filter((function(e){return e.type!==A.CONV_TOPIC}))}},{key:"getLocalConversation",value:function(e){return this._conversationMap.get(e)}},{key:"hasLocalConversation",value:function(e){return this._conversationMap.has(e)}},{key:"getLocalOldestMessage",value:function(e){return this._messageListHandler.getLocalOldestMessage(e)}},{key:"syncConversationList",value:function(){var e=this,t=new Ai("syncConversationList");return this._pagingStatus===Vt.NOT_START&&this._conversationMap.clear(),this._pagingGetConversationList().then((function(n){var o=function(e){if(Ye(e)&&0!==e.length){var t=0;return e.forEach((function(e){t+=e})),(t/e.length).toFixed(0)}}(e._pagingGetCostList);return Oe.l("".concat(e._n,".").concat("syncConversationList",". sum ").concat(function(e){if(Ye(e)&&0!==e.length){var t=0;return e.forEach((function(e){t+=e})),t.toFixed(0)}}(e._pagingGetCostList)," ms, average ").concat(o," ms")),e._pagingGetCostList.length=0,e._pagingStatus=Vt.RESOLVED,e._diffAndDeleteConversation(),e.emitConversationUpdate(!0,!1),e._setStorageConversationList(),e._handleC2CPeerReadTime(),e._patchConversationProperties(),t.setMessage(e._conversationMap.size).setMoreMessage(o).setNetworkType(e.getNetworkType()).end(),n})).catch((function(n){return e._pagingStatus=Vt.REJECTED,t.setMessage(e._pagingTimeStamp),e.probeNetwork().then((function(e){var o=M(e,2),i=o[0],r=o[1];t.setError(n,i,r).end()})),Xi(n)}))}},{key:"_diffAndDeleteConversation",value:function(){var e=this;if(this._isSyncCompleted()){var t=[];this._conversationMap.forEach((function(n,o){!e._pagingConvIDMap.has(o)&&e._convIDFromUnreadDBMap.has(o)&&(e._conversationMap.delete(o),t.push(o))})),Oe.l("".concat(this._n,"._diffAndDeleteConversation list:").concat(t))}}},{key:"_patchConversationProperties",value:function(){var e=this,t=Date.now(),n=this.checkAndPatchRemark(),o=this._messageRemindHandler.getC2CMessageRemindType(),i=this.getModule(7).getGroupList();Promise.all([n,o,i]).then((function(){var n=Date.now()-t;Oe.l("".concat(e._n,"._patchConversationProperties ok. cost ").concat(n," ms")),e.emitConversationUpdate(!0,!1),e.emitTotalUnreadMessageCountUpdate()}))}},{key:"_pagingGetConversationList",value:function(){var e=this,t="".concat(this._n,"._pagingGetConversationList");Oe.l("".concat(t," timeStamp:").concat(this._pagingTimeStamp," startIndex:").concat(this._pagingStartIndex)+" pinnedTimeStamp:".concat(this._pagingPinnedTimeStamp," pinnedStartIndex:").concat(this._pagingPinnedStartIndex));var n=Date.now();return this._pagingStatus=Vt.PENDING,this.request({protocolName:Bn,requestData:{fromAccount:this.getMyUserID(),timeStamp:this._pagingTimeStamp,startIndex:this._pagingStartIndex,pinnedTimeStamp:this._pagingPinnedTimeStamp,pinnedStartIndex:this._pagingPinnedStartIndex,orderType:1}}).then((function(o){var i=o.data,r=i.completeFlag,a=i.conversations,s=void 0===a?[]:a,c=i.timeStamp,u=i.startIndex,l=i.pinnedTimeStamp,d=i.pinnedStartIndex,f=i.groupItem,p=Date.now()-n;if(e._pagingGetCostList.push(p),Oe.l("".concat(t," ok. completeFlag:").concat(r," count:").concat(s.length," cost ").concat(p," ms")),e._convGroupHandler.onConvGroupListSynced(f),s.length>0){var h=e._getConversationOptions(s);e._pagingConvIDMap=new Map([].concat(I(e._pagingConvIDMap),I(h.map((function(e){return[e.conversationID,1]}))))),e._updateLocalConversationList({conversationOptionsList:h,isFromGetConversations:!0}),e.isLoggedIn()&&e.emitConversationUpdate()}if(!e._isReady){if(!e.isLoggedIn())return $i();e.triggerReady()}return e._pagingTimeStamp=c,e._pagingStartIndex=u,e._pagingPinnedTimeStamp=l,e._pagingPinnedStartIndex=d,1!==r?e._pagingGetConversationList():(e._handleGroupAtTipsList(),e._convGroupHandler.getRemoteConvGroupList(),$i())})).catch((function(n){throw e.isLoggedIn()&&(e._isReady||(Oe.w("".concat(t," failed. error:"),n),e.triggerReady())),n}))}},{key:"_updateLocalConversationList",value:function(e){var t,n=e.isFromGetConversations,o=e.isInstantMessage,i=Date.now();t=this._getTmpConversationListMapping(e),this._conversationMap=new Map(this._sortConversationList([].concat(I(t.toBeUpdatedConversationList),I(this._conversationMap)))),n||(this._updateUserOrGroupProfile(t.newConversationList),o&&this.emitTotalUnreadMessageCountUpdate()),Oe.d("".concat(this._n,"._updateLocalConversationList cost ").concat(Date.now()-i," ms"))}},{key:"_getTmpConversationListMapping",value:function(e){for(var t=e.conversationOptionsList,n=e.isFromGetConversations,o=e.isInstantMessage,i=e.isUnreadC2CMessage,r=void 0!==i&&i,a=e.updateUnreadCount,s=[],c=[],u=this.getModule(7),l=this.getModule(8),d=this.isIntl(),f=0,p=t.length;f<p;f++){var h=new dr(t[f],d),g=h.conversationID;if(g!=="".concat(A.CONV_C2C,"@TLS#ERROR")&&g!=="".concat(A.CONV_C2C,"@TLS#NOT_FOUND"))if(this._conversationMap.has(g)){var _=this._conversationMap.get(g),v=["unreadCount","allowType","adminForbidType","payload","isPinned"];!1===o&&v.push("lastMessage");var m=t[f].lastMessage,y=!ze(m);y||t[f].type===A.CONV_TOPIC||this._onLastMessageNotExist(t[f]),ze(o)&&y&&null===_.lastMessage.payload&&(_.lastMessage.payload=m.payload),Ut(_.lastMessage.revoker)||(_.lastMessage.revoker=null),et(_,h,v,[null,void 0,"",0,NaN]),!0===a&&_.updateUnreadCount({nextUnreadCount:h.unreadCount,isFromGetConversations:n,isUnreadC2CMessage:r}),o&&y&&(m.payload&&(_.lastMessage.payload=m.payload),_.type===A.CONV_GROUP&&(_.lastMessage.nameCard=m.nameCard,_.lastMessage.nick=m.nick)),y&&_.lastMessage.cloudCustomData!==m.cloudCustomData&&(_.lastMessage.cloudCustomData=m.cloudCustomData||""),this._conversationMap.delete(g),s.push([g,_])}else{if(h.type===A.CONV_GROUP&&u){var M=h.groupProfile.groupID,I=u.getLocalGroupProfile(M);I&&(h.groupProfile=I,!0===a&&h.updateUnreadCount({nextUnreadCount:0}))}else if(h.type===A.CONV_C2C){var C=g.replace(A.CONV_C2C,"");l&&l.isMyFriend(C)&&(h.remark=l.getFriendRemark(C))}c.push(h),s.push([g,h])}}var b=this.getModule(10);return s.forEach((function(e){if(e[1].type===A.CONV_TOPIC){var t=e[1],n=t.conversationID,o=t.unreadCount,i=t.groupAtInfoList;b.onConversationProxy({topicID:n.replace(A.CONV_GROUP,""),unreadCount:o,groupAtInfoList:Ut(i)?void 0:i})}})),{toBeUpdatedConversationList:s,newConversationList:c}}},{key:"_onLastMessageNotExist",value:function(e){new Ai("lastMessageNotExist").setMessage("".concat(JSON.stringify(e))).setNetworkType(this.getNetworkType()).end()}},{key:"_sortConversationList",value:function(e){var t=[],n=[],o=[],i=[];return e.forEach((function(e){!0===e[1].isPinned?Ut(e[1].lastMessage.lastTime)?n.push(e):t.push(e):Ut(e[1].lastMessage.lastTime)?i.push(e):o.push(e)})),t.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime})).concat(n).concat(o.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime}))).concat(i)}},{key:"_sortConversationListAndEmitEvent",value:function(){this._conversationMap=new Map(this._sortConversationList(I(this._conversationMap))),this.emitConversationUpdate(!0,!1)}},{key:"_updateUserOrGroupProfile",value:function(e){var t=this;if(0!==e.length){var n=[],o=[],i=this.getModule(4),r=this.getModule(7);e.forEach((function(e){if(e.type===A.CONV_C2C)n.push(e.toAccount);else if(e.type===A.CONV_GROUP){var t=e.toAccount;r.hasLocalGroup(t)?e.groupProfile=r.getLocalGroupProfile(t):o.push(t)}})),Oe.l("".concat(this._n,"._updateUserOrGroupProfile c2cUserIDList:").concat(n," groupIDList:").concat(o)),n.length>0&&i.getUserProfile({userIDList:n}).then((function(e){var n=e.data;Ye(n)?n.forEach((function(e){t._doUpdateUserProfile("C2C".concat(e.userID),e)})):t._doUpdateUserProfile("C2C".concat(n.userID),n)})),o.length>0&&r.getGroupProfileAdvance({groupIDList:o,responseFilter:{groupBaseInfoFilter:["Type","Name","FaceUrl"]}}).then((function(e){e.data.successGroupList.forEach((function(e){var n="GROUP".concat(e.groupID);if(t._conversationMap.has(n)){var o=t._conversationMap.get(n);et(o.groupProfile,e,[],[null,void 0,"",0,NaN]),!o.subType&&e.type&&(o.subType=e.type)}}))}))}}},{key:"_doUpdateUserProfile",value:function(e,t){this.hasLocalConversation(e)&&(this.getLocalConversation(e).userProfile=t)}},{key:"_getConversationOptions",value:function(e){var n=this,o=[],i=e.filter((function(e){var t=e.type,n=e.userID;return 1===t&&"@TLS#NOT_FOUND"!==n&&"@TLS#ERROR"!==n||2===t})),r=this.getMyUserID(),a=i.map((function(e){if(ze(e.lastMsg)&&(e.lastMsg={elements:[]}),1===e.type){var i={userID:e.userID,nick:e.peerNick,avatar:e.peerAvatar};return o.push(i),{conversationID:"C2C".concat(e.userID),type:"C2C",lastMessage:{lastTime:e.time,lastSequence:e.sequence,fromAccount:e.lastC2CMsgFromAccount,messageForShow:e.messageShow,type:e.lastMsg.elements[0]?e.lastMsg.elements[0].type:null,payload:e.lastMsg.elements[0]?n._amendLayersOverLimitProperty(e.lastMsg.elements[0].content):null,cloudCustomData:e.lastMsg.cloudCustomData||"",isRevoked:8===e.lastMessageFlag,onlineOnlyFlag:!1,nick:"",nameCard:"",version:0,isPeerRead:e.lastC2CMsgFromAccount===r&&e.time<=e.c2cPeerReadTime,revoker:e.lastMsg.revokerInfo?e.lastMsg.revokerInfo.revoker:null},userProfile:new rr(i),peerReadTime:e.c2cPeerReadTime,isPinned:1===e.isPinned,messageRemindType:"",customData:e.customMark||"",markList:Rt(e.standardMark),conversationGroupList:n._convGroupHandler.getConvGroupListByID(e.contactGroupId)}}return{conversationID:"GROUP".concat(e.groupID),type:"GROUP",lastMessage:t(t({lastTime:e.time,lastSequence:e.sequence,fromAccount:e.msgGroupFromAccount,messageForShow:e.messageShow},n._patchTypeAndPayload(e)),{},{cloudCustomData:e.lastMsg.cloudCustomData||"",isRevoked:2===e.lastMessageFlag,onlineOnlyFlag:!1,nick:e.senderNick||"",nameCard:e.senderNameCard||"",revoker:e.lastMsg.revokerInfo?e.lastMsg.revokerInfo.revoker:null}),groupProfile:new ur({groupID:e.groupID,name:e.groupNick,avatar:e.groupImage}),unreadCount:e.unreadCount,peerReadTime:0,isPinned:1===e.isPinned,messageRemindType:"",version:0,customData:e.customMark||"",markList:Rt(e.standardMark),conversationGroupList:n._convGroupHandler.getConvGroupListByID(e.contactGroupId)}}));return o.length>0&&this.getModule(4).onConversationsProfileUpdated(o),a}},{key:"_patchTypeAndPayload",value:function(e){var n=e.lastMsg,o=n.event,i=void 0===o?void 0:o,r=n.elements,a=void 0===r?[]:r,s=n.groupTips,c=void 0===s?{}:s;if(!ze(i)&&!Ut(c)){var u=new Ki(c);u.setElement({type:A.MSG_GRP_TIP,content:t(t({},c.elements),{},{groupProfile:c.groupProfile})});var l=JSON.parse(JSON.stringify(u.payload));return u=null,{type:A.MSG_GRP_TIP,payload:l}}return{type:a[0]?a[0].type:null,payload:a[0]?this._amendLayersOverLimitProperty(a[0].content):null}}},{key:"_amendLayersOverLimitProperty",value:function(e){var t=e.layersOverLimit;return 0===t?e.layersOverLimit=!1:1===t&&(e.layersOverLimit=!0),e}},{key:"getLocalMessageList",value:function(e){return this._messageListHandler.getLocalMessageList(e)}},{key:"deleteLocalMessage",value:function(e){e instanceof Ki&&this._messageListHandler.remove(e)}},{key:"onConversationDeleted",value:function(e){if(Ye(e)){var t=e.map((function(e){var t=e.type,n=e.userID,o=e.groupID;return 1===t?"".concat(A.CONV_C2C).concat(n):2===t?"".concat(A.CONV_GROUP).concat(o):void 0}));Oe.l("".concat(this._n,".onConversationDeleted conversationIDList:").concat(t)),this.deleteLocalConversationList(t)}}},{key:"onConversationPinned",value:function(e){var t=this;if(Ye(e)){var n=!1;e.forEach((function(e){var o,i=e.type,r=e.userID,a=e.groupID;1===i?o=t.getLocalConversation("".concat(A.CONV_C2C).concat(r)):2===i&&(o=t.getLocalConversation("".concat(A.CONV_GROUP).concat(a))),o&&(Oe.l("".concat(t._n,".onConversationPinned conversationID:").concat(o.conversationID," isPinned:").concat(o.isPinned)),o.isPinned||(o.isPinned=!0,n=!0))})),n&&this._sortConversationListAndEmitEvent()}}},{key:"onConversationUnpinned",value:function(e){var t=this;if(Ye(e)){var n=!1;e.forEach((function(e){var o,i=e.type,r=e.userID,a=e.groupID;1===i?o=t.getLocalConversation("".concat(A.CONV_C2C).concat(r)):2===i&&(o=t.getLocalConversation("".concat(A.CONV_GROUP).concat(a))),o&&(Oe.l("".concat(t._n,".onConversationUnpinned conversationID:").concat(o.conversationID," isPinned:").concat(o.isPinned)),o.isPinned&&(o.isPinned=!1,n=!0))})),n&&this._sortConversationListAndEmitEvent()}}},{key:"getMessageList",value:function(e){var t=this,n=e.conversationID,o=e.nextReqMessageID,i=e.count,r="".concat(this._n,".getMessageList"),a=this.getLocalConversation(n),s="";if(a&&a.groupProfile&&(s=a.groupProfile.type),ft(s))return Oe.l("".concat(r," not available in avchatroom. conversationID:").concat(n)),$i({messageList:[],nextReqMessageID:"",isCompleted:!0});(ze(i)||i>15)&&(i=15),!o&&this._isNotInCommunity(n)&&(this._messageListHandler.removeByConversationID(n),this._completedMap.delete(n),this._roamingMessageSequenceMap.delete(n));var c=this._computeRemainingCount({conversationID:n,nextReqMessageID:o}),u=this._completedMap.has(n);if(Oe.l("".concat(r," conversationID:").concat(n," nextReqMessageID:").concat(o)+" remainingCount:".concat(c," count:").concat(i," isCompleted:").concat(u)),this._needGetHistory({conversationID:n,remainingCount:c,count:i}))return this.getHistoryMessages({conversationID:n,nextReqMessageID:o,count:20}).then((function(e){var o=e.nextReqID,i=e.storedMessageList,a=t._completedMap.has(n),s=i;c>0&&(s=t._messageListHandler.getLocalMessageList(n).slice(0,i.length+c));var u={nextReqMessageID:a?"":o,messageList:s,isCompleted:a};return Oe.l("".concat(r," ret.nextReqMessageID:").concat(u.nextReqMessageID," ret.isCompleted:").concat(u.isCompleted," ret.length:").concat(s.length)),Wi(u)}));this.modifyMessageList(n);var l=this._getMessageListFromMemory({conversationID:n,nextReqMessageID:o,count:i});return $i(l)}},{key:"_getMessageListFromMemory",value:function(e){var t=e.conversationID,n=e.nextReqMessageID,o=e.count,i="".concat(this._n,"._getMessageListFromMemory"),r=this._messageListHandler.getLocalMessageList(t),a=r.length,s=0,c={isCompleted:!1,nextReqMessageID:"",messageList:[]};return n?(s=r.findIndex((function(e){return e.ID===n})))>o?(c.messageList=r.slice(s-o,s),c.nextReqMessageID=r[s-o].ID):(c.messageList=r.slice(0,s),c.isCompleted=!0):a>o?(s=a-o,c.messageList=r.slice(s,a),c.nextReqMessageID=r[s].ID):(c.messageList=r.slice(0,a),c.isCompleted=!0),Oe.l("".concat(i," conversationID:").concat(t)+" ret.nextReqMessageID:".concat(c.nextReqMessageID," ret.isCompleted:").concat(c.isCompleted," ret.length:").concat(c.messageList.length)),c}},{key:"getMessageListHopping",value:function(e){var t=e.conversationID,n=e.sequence,o=e.time,i=e.count,r=e.direction,a=void 0===r?0:r;if((ze(i)||i>15)&&(i=15),t.startsWith(A.CONV_C2C)){var s=this.getModule(6),c=t.replace(A.CONV_C2C,"");return s.getRoamingMessagesHopping({peerAccount:c,time:o,count:i,direction:a})}if(t.startsWith(A.CONV_GROUP)){var u=this.getModule(7),l=t.replace(A.CONV_GROUP,"");return u.getRoamingMessagesHopping({groupID:l,sequence:n,count:i,direction:a})}}},{key:"_computeRemainingCount",value:function(e){var t=e.conversationID,n=e.nextReqMessageID,o=this._messageListHandler.getLocalMessageList(t),i=o.length;if(!n)return i;var r=0;return gt(t)?r=o.findIndex((function(e){return e.ID===n})):_t(t)&&(r=-1!==n.indexOf("-")?o.findIndex((function(e){return e.ID===n})):o.findIndex((function(e){return e.sequence===n}))),-1===r&&(r=0),r}},{key:"_getMessageListSize",value:function(e){return this._messageListHandler.getLocalMessageList(e).length}},{key:"_needGetHistory",value:function(e){var t=e.conversationID,n=e.remainingCount,o=e.count,i=this.getLocalConversation(t),r="";return i&&i.groupProfile&&(r=i.groupProfile.type),!vt(t)&&!ft(r)&&!(_t(t)&&this._isPagingGetGroupListCompleted()&&this._getLocalGroupCount()<=4e3&&!this._hasLocalGroup(t)&&!this._isTopicConversation(t))&&n<=o&&!this._completedMap.has(t)}},{key:"_isTopicConversation",value:function(e){var t=e.replace(A.CONV_GROUP,"");return ht(t)}},{key:"getHistoryMessages",value:function(e){var t=e.conversationID,n=e.count;if(t===A.CONV_SYSTEM)return $i();var o=15;n>20&&(o=20);var i=null;if(gt(t)){var r=this._roamingMessageKeyAndTimeMap.has(t);return(i=this.getModule(6))?i.getRoamingMessage({conversationID:t,peerAccount:t.replace(A.CONV_C2C,""),count:o,lastMessageTime:r?this._roamingMessageKeyAndTimeMap.get(t).lastMessageTime:0,messageKey:r?this._roamingMessageKeyAndTimeMap.get(t).messageKey:""}):Xi({code:hi.CANNOT_FIND_MODULE})}if(_t(t)){if(!(i=this.getModule(7)))return Xi({code:hi.CANNOT_FIND_MODULE});var a=null;this._conversationMap.has(t)&&(a=this._conversationMap.get(t).lastMessage);var s=0;a&&(s=a.lastSequence);var c=this._roamingMessageSequenceMap.get(t);return i.getRoamingMessage({conversationID:t,groupID:t.replace(A.CONV_GROUP,""),count:o,sequence:c||s})}return $i()}},{key:"patchConversationLastMessage",value:function(e){var t=this.getLocalConversation(e);if(t){var n=t.lastMessage,o=n.messageForShow,i=n.payload;if(Ut(o)||Ut(i)){var r=this._messageListHandler.getLocalMessageList(e);if(0===r.length)return;var a=r[r.length-1];Oe.l("".concat(this._n,".patchConversationLastMessage conversationID:").concat(e," payload:"),a.payload),t.updateLastMessage(a)}}}},{key:"onRoamingMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=n.startsWith(A.CONV_C2C)?A.CONV_C2C:A.CONV_GROUP,r=null,a=[],s=[],c=0,u=e.length,l=null,d=i===A.CONV_GROUP,f=this.getModule(16),p=this.getFileDownloadProxy(),h=function(){c=d?e.length-1:0,u=d?0:e.length},g=function(){d?--c:++c},_=function(){return d?c>=u:c<u};for(h();_();g())if(d&&1===e[c].sequence&&o&&this.setCompleted(n),1!==e[c].isPlaceMessage)if((r=new Ki(e[c])).to=e[c].to,i!==A.CONV_GROUP||ze(e[c].topicID)||(r.to=e[c].topicID),r.isSystemMessage=!!e[c].isSystemMessage,r.conversationType=i,4===e[c].event?l={type:A.MSG_GRP_TIP,content:t(t({},e[c].elements),{},{groupProfile:e[c].groupProfile})}:(e[c].elements=f.parseElements(e[c].elements,e[c].from),l=e[c].elements),d||r.setNickAndAvatar({nick:e[c].nick,avatar:e[c].avatar}),Ut(l)){var v=new Ai("emptyMessageBody");v.setMessage("from:".concat(r.from," to:").concat(r.to," sequence:").concat(r.sequence," event:").concat(e[c].event)),v.setNetworkType(this.getNetworkType()).setLevel("warning").end()}else r.setElement(l,p),r.reInitialize(this.getMyUserID()),a.push(r);return h=g=_=null,o?(this._messageListHandler.unshift(a,s),a=null,s):(s=null,a)}},{key:"findMessage",value:function(e){return this._messageListHandler.findMessage(e)}},{key:"_isNotInCommunity",value:function(e){var t=!1;if(e.startsWith(A.CONV_GROUP)&&this._isTopicConversation(e)){var n=At(e.replace(A.CONV_GROUP,""));this.getModule(7).hasLocalGroup(n)||(t=!0)}return t}},{key:"deleteTopicRoamingMessageInfo",value:function(e){var t=this;pt({groupID:e})&&this._messageListHandler.getTopicConversationIDList(e).forEach((function(e){t._messageListHandler.removeByConversationID(e),t._completedMap.delete(e),t._roamingMessageSequenceMap.delete(e)}))}},{key:"deleteGroupRomaingMessageInfo",value:function(e){var t="".concat(A.CONV_GROUP).concat(e);this._messageListHandler.removeByConversationID(t),this._completedMap.delete(t),this._roamingMessageSequenceMap.delete(t)}},{key:"setMessageRead",value:function(e){var t=e.conversationID,n=this.getLocalConversation(t);if(Oe.l("".concat(this._n,".setMessageRead conversationID:").concat(t," unreadCount:").concat(n?n.unreadCount:0)),!n)return $i();if(n.type!==A.CONV_GROUP&&n.type!==A.CONV_TOPIC||Ut(n.groupAtInfoList)||this.deleteGroupAtTips(t),0===n.unreadCount)return $i();if(n.type===A.CONV_GROUP&&!this._hasLocalGroup(t))return 0!==n.unreadCount&&(n.unreadCount=0,this.emitConversationUpdate(!0,!1)),$i();var o=this._messageListHandler.getLocalLastMessage(t),i=n.lastMessage.lastTime;o&&i<o.time&&(i=o.time);var r=n.lastMessage.lastSequence;if(o&&r<o.sequence&&(r=o.sequence),n.type===A.CONV_TOPIC&&ze(o)){var a=this.getModule(10),s=t.replace(A.CONV_GROUP,""),c=At(s),u=a.getLocalTopic(c,s);u&&(r=u.nextMessageSeq-1)}var l=null;switch(n.type){case A.CONV_C2C:return(l=this.getModule(6))?l.setMessageRead({conversationID:t,lastMessageTime:i}):Xi({code:hi.CANNOT_FIND_MODULE});case A.CONV_GROUP:case A.CONV_TOPIC:return(l=this.getModule(7))?l.setMessageRead({conversationID:t,lastMessageSeq:r}):Xi({code:hi.CANNOT_FIND_MODULE});case A.CONV_SYSTEM:return n.unreadCount=0,this.emitConversationUpdate(!0,!1),$i();default:return $i()}}},{key:"setAllMessageRead",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n="setAllMessageRead",o="".concat(this._n,".").concat(n);t.scope||(t.scope=A.READ_ALL_MSG),Oe.l("".concat(o," options:"),t);var i=this._createSetAllMessageReadPack(t);if(0===i.readAllC2CMessage&&0===i.groupMessageReadInfoList.length)return $i();var r=new Ai(n);return this.request({protocolName:go,requestData:i}).then((function(n){var o=n.data,i=e._handleAllMessageRead(o);return r.setMessage("scope:".concat(t.scope," failureGroups:").concat(JSON.stringify(i))).setNetworkType(e.getNetworkType()).end(),$i()})).catch((function(t){return e.probeNetwork().then((function(e){var n=M(e,2),o=n[0],i=n[1];r.setError(t,o,i).end()})),Oe.w("".concat(o," failed. error:"),t),Xi({code:t&&t.code?t.code:hi.MESSAGE_UNREAD_ALL_FAIL,message:t&&t.message?t.message:void 0})}))}},{key:"setConversationCustomData",value:function(e){return this._convGroupHandler.setConvCustomData(e)}},{key:"markConversation",value:function(e){return this._convGroupHandler.markConversation(e)}},{key:"getConversationGroupList",value:function(){return this._convGroupHandler.getLocalConvGroupList()}},{key:"createConversationGroup",value:function(e){return this._convGroupHandler.createConvGroup(e)}},{key:"deleteConversationGroup",value:function(e){return this._convGroupHandler.deleteConvGroup(e)}},{key:"renameConversationGroup",value:function(e){return this._convGroupHandler.renameConvGroup(e)}},{key:"addConversationsToGroup",value:function(e){return this._convGroupHandler.addConvsToGroup(e)}},{key:"deleteConversationsFromGroup",value:function(e){return this._convGroupHandler.deleteConvsFromGroup(e)}},{key:"onConversationMarkUpdated",value:function(e){this._convGroupHandler.onConvMarkUpdated(e)}},{key:"onConversationGroupCreated",value:function(e){this._convGroupHandler.onConvGroupCreated(e)}},{key:"onConversationGroupDeleted",value:function(e){this._convGroupHandler.onConvGroupDeleted(e)}},{key:"onConversationGroupNameUpdated",value:function(e){this._convGroupHandler.onConvGroupNameUpdated(e)}},{key:"onConversationInGroupUpdated",value:function(e){this._convGroupHandler.onConvInGroupUpdated(e)}},{key:"onConversationAddedToOrDeletedFromGroup",value:function(e){this._convGroupHandler.onConvAddedToOrDeletedFromGroup(e)}},{key:"_getConversationLastMessageSequence",value:function(e){var t=this._messageListHandler.getLocalLastMessage(e.conversationID),n=e.lastMessage.lastSequence;return t&&n<t.sequence&&(n=t.sequence),n}},{key:"_getConversationLastMessageTime",value:function(e){var t=this._messageListHandler.getLocalLastMessage(e.conversationID),n=e.lastMessage.lastTime;return t&&n<t.time&&(n=t.time),n}},{key:"_createSetAllMessageReadPack",value:function(e){var t,n={readAllC2CMessage:0,groupMessageReadInfoList:[]},o=e.scope,i=k(this._conversationMap);try{for(i.s();!(t=i.n()).done;){var r=M(t.value,2)[1];if(r.unreadCount>0)if(r.type===A.CONV_C2C&&0===n.readAllC2CMessage){if(o===A.READ_ALL_MSG)n.readAllC2CMessage=1;else if(o===A.READ_ALL_C2C_MSG){n.readAllC2CMessage=1;break}}else if(r.type===A.CONV_GROUP&&(o===A.READ_ALL_GROUP_MSG||o===A.READ_ALL_MSG)){var a=this._getConversationLastMessageSequence(r);n.groupMessageReadInfoList.push({groupID:r.groupProfile.groupID,messageSequence:a})}}}catch(l){i.e(l)}finally{i.f()}return n}},{key:"onPushedAllMessageRead",value:function(e){this._handleAllMessageRead(e)}},{key:"_handleAllMessageRead",value:function(e){var t=e.groupMessageReadInfoList,n=e.readAllC2CMessage,o=this._parseGroupReadInfo(t);return this._updateAllConversationUnreadCount({readAllC2CMessage:n})>=1&&(this.emitConversationUpdate(!0,!1),this.emitTotalUnreadMessageCountUpdate()),o}},{key:"_parseGroupReadInfo",value:function(e){var t=[];if(e&&e.length)for(var n=0,o=e.length;n<o;n++){var i=e[n],r=i.groupID,a=i.sequence,s=i.retCode,c=i.lastMessageSeq;ze(s)?this._remoteGroupReadSequenceMap.set(r,c):(this._remoteGroupReadSequenceMap.set(r,a),0!==s&&t.push("".concat(r,"-").concat(a,"-").concat(s)))}return t}},{key:"_updateAllConversationUnreadCount",value:function(e){var t,n=e.readAllC2CMessage,o=0,i=k(this._conversationMap);try{for(i.s();!(t=i.n()).done;){var r=M(t.value,2),a=r[0],s=r[1];if(s.unreadCount>=1){if(1===n&&s.type===A.CONV_C2C){var c=this._getConversationLastMessageTime(s);this.updateIsReadAfterReadReport({conversationID:a,lastMessageTime:c})}else if(s.type===A.CONV_GROUP){var u=a.replace(A.CONV_GROUP,"");if(this._remoteGroupReadSequenceMap.has(u)){var l=this._remoteGroupReadSequenceMap.get(u),d=this._getConversationLastMessageSequence(s);this.updateIsReadAfterReadReport({conversationID:a,remoteReadSequence:l}),d>=l&&this._remoteGroupReadSequenceMap.delete(u)}}this.updateUnreadCount(a,!1)&&(o+=1)}}}catch(g){i.e(g)}finally{i.f()}return o}},{key:"isRemoteRead",value:function(e){var t=e.conversationID,n=e.sequence,o=t.replace(A.CONV_GROUP,""),i=!1;if(this._remoteGroupReadSequenceMap.has(o)){var r=this._remoteGroupReadSequenceMap.get(o);n<=r&&(i=!0,Oe.l("".concat(this._n,".isRemoteRead conversationID:").concat(t," messageSequence:").concat(n," remoteReadSequence:").concat(r))),n>=r+10&&this._remoteGroupReadSequenceMap.delete(o)}return i}},{key:"updateIsReadAfterReadReport",value:function(e){var t=e.conversationID,n=e.lastMessageSeq,o=e.lastMessageTime,i=this._messageListHandler.getLocalMessageList(t);if(0!==i.length)for(var r,a=i.length-1;a>=0;a--)if(r=i[a],!(o&&r.time>o||n&&r.sequence>n)){if("in"===r.flow&&r.isRead)break;r.setIsRead(!0)}}},{key:"updateUnreadCount",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!1,o=this.getLocalConversation(e),i=this._messageListHandler.getLocalMessageList(e);if(o){var r=o.unreadCount,a=i.filter((function(e){return!e.isRead&&!e._onlineOnlyFlag&&!e.isDeleted})).length;if(r!==a&&(o.unreadCount=a,n=!0,Oe.l("".concat(this._n,".updateUnreadCount from ").concat(r," to ").concat(a,", conversationID:").concat(e)),!0===t&&(this.emitConversationUpdate(!0,!1),this.emitTotalUnreadMessageCountUpdate())),n&&o.type===A.CONV_TOPIC){var s=o.unreadCount,c=this.getModule(10),u=e.replace(A.CONV_GROUP,"");c.onConversationProxy({topicID:u,unreadCount:s})}return n}}},{key:"clearGroupAtInfoList",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getLocalConversation(e);if(n&&n.groupAtInfoList.length>0){if(n.clearGroupAtInfoList(),Oe.l("".concat(this._n,".clearGroupAtInfoList conversationID:").concat(e)),n.type===A.CONV_TOPIC){var o=n.groupAtInfoList,i=this.getModule(10),r=e.replace(A.CONV_GROUP,"");i.onConversationProxy({topicID:r,groupAtInfoList:o})}!0===t&&this.emitConversationUpdate(!0,!1)}}},{key:"updateReadReceiptInfo",value:function(e){var t=this,n=e.userID,o=void 0===n?void 0:n,i=e.groupID,r=void 0===i?void 0:i,a=e.readReceiptList;if(!Ut(a)){var s=[];if(ze(o)){if(!ze(r)){var c="".concat(A.CONV_GROUP).concat(r);a.forEach((function(e){var n=e.tinyID,o=e.clientTime,i=e.random,a=e.readCount,u=e.unreadCount,l="".concat(n,"-").concat(o,"-").concat(i),d=t._messageListHandler.getLocalMessage(c,l),f={groupID:r,messageID:l,readCount:0,unreadCount:0};d&&(He(a)&&(d.readReceiptInfo.readCount=a,f.readCount=a),He(u)&&(d.readReceiptInfo.unreadCount=u,f.unreadCount=u),s.push(f))}))}}else{var u="".concat(A.CONV_C2C).concat(o);a.forEach((function(e){var n=e.tinyID,i=e.clientTime,r=e.random,a="".concat(n,"-").concat(i,"-").concat(r),c=t._messageListHandler.getLocalMessage(u,a);if(c){c.readReceiptInfo.isPeerRead=!0;var l={userID:o,messageID:a,isPeerRead:!0};s.push(l)}}))}s.length>0&&this.emitOuterEvent(D.MESSAGE_READ_RECEIPT_RECEIVED,s)}}},{key:"recomputeGroupUnreadCount",value:function(e){var t=e.conversationID,n=e.count,o=this.getLocalConversation(t);if(o){var i=o.unreadCount,r=i-n;r<0&&(r=0),o.unreadCount=r,Oe.l("".concat(this._n,".recomputeGroupUnreadCount from ").concat(i," to ").concat(r,", conversationID:").concat(t))}}},{key:"updateIsRead",value:function(e){var t=this.getLocalConversation(e),n=this.getLocalMessageList(e);if(t&&0!==n.length&&!vt(t.type)){for(var o=[],i=0,r=n.length;i<r;i++)"in"!==n[i].flow?"out"!==n[i].flow||n[i].isRead||n[i].setIsRead(!0):o.push(n[i]);var a=0;if(t.type===A.CONV_C2C){var s=o.slice(-t.unreadCount).filter((function(e){return e.isRevoked})).length;a=o.length-t.unreadCount-s}else a=o.length-t.unreadCount;for(var c=0;c<a&&!o[c].isRead;c++)o[c].setIsRead(!0)}}},{key:"deleteGroupAtTips",value:function(e){var t=this,n="".concat(this._n,".deleteGroupAtTips");Oe.l("".concat(n));var o=this._conversationMap.get(e);if(!o)return Promise.resolve();var i=o.groupAtInfoList;if(0===i.length)return Promise.resolve();var r=void 0;e.startsWith(A.CONV_GROUP)&&(r=e.replace(A.CONV_GROUP,""));var a=I(i);if((pt({groupID:r})||ht(r))&&0===(a=i.filter((function(e){return!e.atTypeArray.includes(A.CONV_AT_ALL)}))).length)return this.clearGroupAtInfoList(e,!1),Promise.resolve();var s=this.getMyUserID();return this.request({protocolName:jn,requestData:{messageListToDelete:a.map((function(e){return{from:e.from,to:s,messageSeq:e.__sequence,messageRandom:e.__random,groupID:ze(e.topicID)?e.groupID:e.topicID}}))}}).then((function(){return Oe.l("".concat(n," ok. count:").concat(i.length)),t.clearGroupAtInfoList(e,!1),Promise.resolve()})).catch((function(e){return Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"appendToMessageList",value:function(e){this._messageListHandler.pushIn(e)}},{key:"setMessageRandom",value:function(e){this.singlyLinkedList.set(e.random)}},{key:"deleteMessageRandom",value:function(e){this.singlyLinkedList.delete(e.random)}},{key:"pushIntoMessageList",value:function(e,t,n){return!(!this._messageListHandler.pushIn(t,n)||this._isMessageFromCurrentInstance(t)&&!n)&&(e.push(t),!0)}},{key:"_isMessageFromCurrentInstance",value:function(e){return this.singlyLinkedList.has(e.random)}},{key:"revoke",value:function(e,t,n){return this._messageListHandler.revoke(e,t,n)}},{key:"getPeerReadTime",value:function(e){return this._peerReadTimeMap.get(e)}},{key:"recordPeerReadTime",value:function(e,t){this._peerReadTimeMap.has(e)?this._peerReadTimeMap.get(e)<t&&this._peerReadTimeMap.set(e,t):this._peerReadTimeMap.set(e,t)}},{key:"updateMessageIsPeerReadProperty",value:function(e,t){if(e.startsWith(A.CONV_C2C)&&t>0){var n=this._messageListHandler.updateMessageIsPeerReadProperty(e,t);if(n.length>0&&this.emitOuterEvent(D.MESSAGE_READ_BY_PEER,n),this._conversationMap.has(e)){var o=this._conversationMap.get(e).lastMessage;Ut(o)||o.fromAccount===this.getMyUserID()&&o.lastTime<=t&&!o.isPeerRead&&(o.isPeerRead=!0,this.emitConversationUpdate(!0,!1))}}}},{key:"updateMessageIsModifiedProperty",value:function(e){this._messageListHandler.updateMessageIsModifiedProperty(e)}},{key:"setCompleted",value:function(e){Oe.l("".concat(this._n,".setCompleted. conversationID:").concat(e)),this._completedMap.set(e,!0)}},{key:"updateRoamingMessageKeyAndTime",value:function(e,t,n){this._roamingMessageKeyAndTimeMap.set(e,{messageKey:t,lastMessageTime:n})}},{key:"updateRoamingMessageSequence",value:function(e,t){this._roamingMessageSequenceMap.set(e,t)}},{key:"getConversationList",value:function(e){var t=this,n="getConversationList",o="".concat(this._n,".").concat(n),i="pagingStatus:".concat(this._pagingStatus,", local conversation count:").concat(this._conversationMap.size,", options:").concat(e);if(Oe.l("".concat(o,". ").concat(i)),this._pagingStatus===Vt.REJECTED){var r=new Ai(n);return r.setMessage(i),this.syncConversationList().then((function(){r.setNetworkType(t.getNetworkType()).end();var n=t._getConversationList(e);return Wi({conversationList:n,isSyncCompleted:t._isSyncCompleted()})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];r.setError(e,o,i).end()})),Oe.e("".concat(o," failed. error:"),e),Xi(e)}))}if(0===this._conversationMap.size){var a=new Ai(n);return a.setMessage(i),this.syncConversationList().then((function(){a.setNetworkType(t.getNetworkType()).end();var n=t._getConversationList(e);return Wi({conversationList:n,isSyncCompleted:t._isSyncCompleted()})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];a.setError(e,o,i).end()})),Oe.e("".concat(o," failed. error:"),e),Xi(e)}))}var s=this._getConversationList(e);return Oe.l("".concat(o,". returned conversation count:").concat(s.length)),$i({conversationList:s,isSyncCompleted:this._isSyncCompleted()})}},{key:"_getConversationList",value:function(e){if(ze(e))return this.getLocalConversationList();if(Ye(e))return 0===e.length?[]:this.getLocalConversationList().filter((function(t){return e.includes(t.conversationID)}));if(We(e)){var t=e.type,n=e.markType,o=e.groupName;return this.getLocalConversationList().filter((function(e){return(t!==A.CONV_C2C&&t!==A.CONV_GROUP||e.type===t)&&(!je(o)||e.conversationGroupList.includes(o))&&(!He(n)||e.markList.includes(n))}))}return[]}},{key:"_handleC2CPeerReadTime",value:function(){var e,t=k(this._conversationMap);try{for(t.s();!(e=t.n()).done;){var n=M(e.value,2),o=n[0],i=n[1];i.type===A.CONV_C2C&&(Oe.d("".concat(this._n,"._handleC2CPeerReadTime conversationID:").concat(o," peerReadTime:").concat(i.peerReadTime)),this.recordPeerReadTime(o,i.peerReadTime))}}catch(c){t.e(c)}finally{t.f()}}},{key:"_isPagingGetGroupListCompleted",value:function(){return this.getModule(7).isPagingGetCompleted()}},{key:"_getLocalGroupCount",value:function(){return this.getModule(7).getLocalGroupList().length}},{key:"_hasLocalGroup",value:function(e){return this.getModule(7).hasLocalGroup(e.replace(A.CONV_GROUP,""))}},{key:"getConversationProfile",value:function(e){var t,n=this;if((t=this._conversationMap.has(e)?this._conversationMap.get(e):new dr({conversationID:e,type:e.slice(0,3)===A.CONV_C2C?A.CONV_C2C:A.CONV_GROUP},this.isIntl()))._isInfoCompleted||t.type===A.CONV_SYSTEM)return $i({conversation:t});if(_t(e)&&!this._hasLocalGroup(e))return $i({conversation:t});var o="".concat(this._n,".").concat("getConversationProfile"),i=new Ai("getConversationProfile");return Oe.l("".concat(o,". conversationID:").concat(e," remark:").concat(t.remark," lastMessage:"),t.lastMessage),this._updateUserOrGroupProfileCompletely(t).then((function(r){i.setNetworkType(n.getNetworkType()).setMessage("conversationID:".concat(e," unreadCount:").concat(r.data.conversation.unreadCount)).end();var a=n.getModule(8);if(a&&t.type===A.CONV_C2C){var s=e.replace(A.CONV_C2C,"");if(a.isMyFriend(s)){var c=a.getFriendRemark(s);t.remark!==c&&(t.remark=c,Oe.l("".concat(o,". conversationID:").concat(e," patch remark:").concat(t.remark)))}}return Oe.l("".concat(o," ok. conversationID:").concat(e)),r})).catch((function(t){return n.probeNetwork().then((function(n){var o=M(n,2),r=o[0],a=o[1];i.setError(t,r,a).setMessage("conversationID:".concat(e)).end()})),Oe.e("".concat(o," failed. error:"),t),Xi(t)}))}},{key:"_updateUserOrGroupProfileCompletely",value:function(e){var t=this;return e.type===A.CONV_C2C?this.getModule(4).getUserProfile({userIDList:[e.toAccount]}).then((function(n){var o=n.data;return 0===o.length?Xi(new Yi({code:hi.USER_OR_GROUP_NOT_FOUND})):(e.userProfile=o[0],e._isInfoCompleted=!0,t._unshiftConversation(e),$i({conversation:e}))})):this.getModule(7).getGroupProfile({groupID:e.toAccount}).then((function(n){return e.groupProfile=n.data.group,e._isInfoCompleted=!0,t._unshiftConversation(e),$i({conversation:e})}))}},{key:"_unshiftConversation",value:function(e){e instanceof dr&&!this._conversationMap.has(e.conversationID)&&(this._conversationMap=new Map([[e.conversationID,e]].concat(I(this._conversationMap))),this._setStorageConversationList(),this.emitConversationUpdate(!0,!1))}},{key:"_onProfileUpdated",value:function(e){var t=this;e.data.forEach((function(e){var n=e.userID;if(n===t.getMyUserID())t._onMyProfileModified({latestNick:e.nick,latestAvatar:e.avatar});else{var o=t._conversationMap.get("".concat(A.CONV_C2C).concat(n));o&&(o.userProfile=e)}}))}},{key:"_isSyncCompleted",value:function(){return this._pagingStatus===Vt.RESOLVED}},{key:"_errorLog",value:function(e,t,n,o){var i=new Error("Params validate failed."),r="".concat(this.getErrorMessage("API_REFER")).concat(e);throw Oe.w("[".concat(e,"] | ").concat(t," | ").concat(this.getErrorMessage(n,o),", ").concat(r)),Oe.e("[".concat(e,"] Invalid ").concat(t,": type check failed for ").concat(t,".")),i}},{key:"_isValidConversationID",value:function(e){return gt(e)||_t(e)||vt(e)}},{key:"deleteConversation",value:function(e){var t=this,n="deleteConversation";return je(e)||Ke(e)||this._errorLog(n,"options","StringOrObjectRequiredLog"),je(e)?(this._isValidConversationID(e)||this._errorLog(n,"options","InvalidConversationID",e),Oe.l("".concat(this._n,".").concat(n," conversationID:").concat(e)),this.deleteConversationList({conversationIDList:[e],flag:1})):(Ye(e.conversationIDList)||this._errorLog(n,"conversationIDList","ArrayRequiredLog"),0===e.conversationIDList.length&&this._errorLog(n,"conversationIDList","NonEmptyArrayLog"),e.conversationIDList.forEach((function(e){t._isValidConversationID(e)||t._errorLog(n,"conversationIDList","InvalidConversationID",e)})),"clearHistoryMessage"in e&&"boolean"!=typeof e.clearHistoryMessage&&this._errorLog(n,"clearHistoryMessage","BooleanRequiredLog"),e.conversationIDList.length>100&&(e.conversationIDList=e.conversationIDList.slice(0,100)),this.deleteConversationList(e))}},{key:"deleteConversationList",value:function(e){var t=this,n=e.conversationIDList,o=void 0===n?[]:n,i=e.clearHistoryMessage,r=void 0===i||i,a=e.flag,s=void 0===a?0:a,c="".concat(this._n,".").concat("deleteConversationList");Oe.l("".concat(c," conversationIDList.length:").concat(o.length," clearHistoryMessage:").concat(r));var u=new Ai("deleteConversationList");return u.setMessage("conversationIDList:".concat(o)),Promise.all([this.rmLocalOnlyConversationList(o),this.rmLocalAndRemoteConversationList(o,r)]).then((function(e){u.setNetworkType(t.getNetworkType()).end();var n=[].concat(I(e[0]),I(e[1]));return 0===n.length?Xi(new Yi({code:hi.CONVERSATION_NOT_FOUND})):(Oe.l("".concat(c," ok")),$i(1===s?{conversationID:n[0]}:{conversationIDList:n}))})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];u.setError(e,o,i).end()})),Oe.e("".concat(c," failed. error:"),e),Xi(e)}))}},{key:"rmLocalOnlyConversationList",value:function(e){var t=this;return e.filter((function(e){if(!t._conversationMap.has(e))return!1;var n=t.getLocalConversation(e).type;return n!==A.CONV_GROUP||t._hasLocalGroup(e)?n===A.CONV_SYSTEM&&(t.getModule(7).deleteGroupSystemNotice({messageList:t._messageListHandler.getLocalMessageList(e)}),t.deleteLocalConversation(e),!0):(t.deleteLocalConversation(e),!0)}))}},{key:"rmLocalAndRemoteConversationList",value:function(e,t){var n=this,o={fromAccount:this.getMyUserID(),conversationList:[],clearHistoryMessage:t?1:0};return e.forEach((function(e){if(n._conversationMap.has(e)){var t=n.getLocalConversation(e).type;t===A.CONV_C2C?o.conversationList.push({toAccount:e.replace(t,""),type:1}):t===A.CONV_GROUP&&n._hasLocalGroup(e)&&o.conversationList.push({toGroupID:e.replace(t,""),type:2})}})),0===o.conversationList.length?[]:this.request({protocolName:Vn,requestData:o}).then((function(e){var t=[];return e.data.resultList.length>0&&e.data.resultList.map((function(e){if(0===e.code){var n=1===e.type?"".concat(A.CONV_C2C).concat(e.to):"".concat(A.CONV_GROUP).concat(e.groupID);t.push(n)}})),n.deleteLocalConversationList(t),t}))}},{key:"clearHistoryMessage",value:function(e){var t=this,n={fromAccount:this.getMyUserID(),toAccount:void 0,type:void 0,toGroupID:void 0};if(!this._conversationMap.has(e))return Xi({code:hi.CONVERSATION_NOT_FOUND});var o=this._conversationMap.get(e).type;if(o===A.CONV_C2C)n.type=1,n.toAccount=e.replace(A.CONV_C2C,"");else{if(o!==A.CONV_GROUP)return o===A.CONV_SYSTEM?(this.getModule(7).deleteGroupSystemNotice({messageList:this._messageListHandler.getLocalMessageList(e)}),$i({conversationID:e})):Xi({code:hi.CONVERSATION_UN_RECORDED_TYPE});n.type=2,n.toGroupID=e.replace(A.CONV_GROUP,"")}var i="".concat(this._n,".").concat("clearHistoryMessage"),r=new Ai("clearHistoryMessage");return r.setMessage("conversationID:".concat(e)),Oe.l("".concat(i,". conversationID:").concat(e)),this.setMessageRead({conversationID:e}).then((function(){return t.request({protocolName:Hn,requestData:n})})).then((function(){r.setNetworkType(t.getNetworkType()).end(),Oe.l("".concat(i," ok")),t._messageListHandler.removeByConversationID(e),t.setCompleted(e);var n=t.getLocalConversation(e);return n&&(n.updateLastMessage(),t._sortConversationListAndEmitEvent()),$i({conversationID:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];r.setError(e,o,i).end()})),Oe.e("".concat(i," failed. error:"),e),Xi(e)}))}},{key:"pinConversation",value:function(e){var t=this,n=e.conversationID,o=e.isPinned;if(!this._conversationMap.has(n))return Xi({code:hi.CONVERSATION_NOT_FOUND});var i=this.getLocalConversation(n);if(i.isPinned===o)return $i({conversationID:n});var r="".concat(this._n,".").concat("pinConversation"),a=new Ai("pinConversation");a.setMessage("conversationID:".concat(n," isPinned:").concat(o)),Oe.l("".concat(r,". conversationID:").concat(n," isPinned:").concat(o));var s=null;return gt(n)?s={type:1,toAccount:n.replace(A.CONV_C2C,"")}:_t(n)&&(s={type:2,groupID:n.replace(A.CONV_GROUP,"")}),this.request({protocolName:"top",requestData:{fromAccount:this.getMyUserID(),operationType:!0===o?1:2,itemList:[s]}}).then((function(){return a.setNetworkType(t.getNetworkType()).end(),Oe.l("".concat(r," ok")),i.isPinned!==o&&(i.isPinned=o,t._sortConversationListAndEmitEvent()),Wi({conversationID:n})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];a.setError(e,o,i).end()})),Oe.e("".concat(r," failed. error:"),e),Xi(e)}))}},{key:"setMessageRemindType",value:function(e){return this._messageRemindHandler.set(e)}},{key:"patchMessageRemindType",value:function(e){var t=e.ID,n=e.isC2CConversation,o=e.messageRemindType,i=!1,r=this.getLocalConversation(n?"".concat(A.CONV_C2C).concat(t):"".concat(A.CONV_GROUP).concat(t));return r&&r.messageRemindType!==o&&(r.messageRemindType=o,i=!0),Oe.d("".concat(this._n,".patchMessageRemindType options:"),e,"ret:".concat(i)),i}},{key:"onC2CMessageRemindTypeSynced",value:function(e){var t=this,n="".concat(this._n,".onC2CMessageRemindTypeSynced");Oe.d(n,e),e.dataList.forEach((function(e){if(!Ut(e.muteNotificationsSync)){var o,i=e.muteNotificationsSync,r=i.to,a=i.updateSequence,s=i.muteFlag;t._messageRemindHandler.setUpdateSequence(a),0===s?o=A.MSG_REMIND_ACPT_AND_NOTE:1===s?o=A.MSG_REMIND_DISCARD:2===s&&(o=A.MSG_REMIND_ACPT_NOT_NOTE);var c=0;t.patchMessageRemindType({ID:r,isC2CConversation:!0,messageRemindType:o})&&(c+=1),Oe.l("".concat(n," updateCount:").concat(c)),c>=1&&t.emitConversationUpdate(!0,!1)}}))}},{key:"onGroupMessageRemindTypeSynced",value:function(e){Oe.d("".concat(this._n,".onGroupMessageRemindTypeSynced options:"),e),this._messageRemindHandler.onGroupMessageRemindTypeUpdated(e)}},{key:"deleteLocalConversation",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._conversationMap.has(e);if(Oe.d("".concat(this._n,".deleteLocalConversation conversationID:").concat(e," has:").concat(n)),n&&(this._conversationMap.delete(e),this._roamingMessageKeyAndTimeMap.has(e)&&this._roamingMessageKeyAndTimeMap.delete(e),this._roamingMessageSequenceMap.has(e)&&this._roamingMessageSequenceMap.delete(e),this._setStorageConversationList(),this._messageListHandler.removeByConversationID(e),this._completedMap.delete(e),t)){var o=!this._isTopicConversation(e);this.emitConversationUpdate(o,!1)}}},{key:"deleteLocalConversationList",value:function(e){var t=this,n=0,o=!1;e.forEach((function(e){t._conversationMap.has(e)&&(n+=t._conversationMap.get(e).unreadCount||0,t.deleteLocalConversation(e,!1),o=!0)})),Oe.l("".concat(this._n,".deleteLocalConversationList conversationIDList.length:").concat(e.length," isConvIDExisted:").concat(o)),o&&(this.emitConversationUpdate(!0,!1),n>0&&this.emitTotalUnreadMessageCountUpdate())}},{key:"isMessageSentByCurrentInstance",value:function(e){return!(!this._messageListHandler.hasLocalMessage(e.conversationID,e.ID)&&!this.singlyLinkedList.has(e.random))}},{key:"modifyMessageList",value:function(e){if(e.startsWith(A.CONV_C2C)&&this._conversationMap.has(e)){var t=this._conversationMap.get(e),n=Date.now();this._messageListHandler.modifyMessageSentByPeer({conversationID:e,latestNick:t.userProfile.nick,latestAvatar:t.userProfile.avatar});var o=this.getModule(4).getNickAndAvatarByUserID(this.getMyUserID());this._messageListHandler.modifyMessageSentByMe({conversationID:e,latestNick:o.nick,latestAvatar:o.avatar}),Oe.l("".concat(this._n,".modifyMessageList conversationID:").concat(e," cost ").concat(Date.now()-n," ms"))}}},{key:"updateUserProfileSpecifiedKey",value:function(e){Oe.l("".concat(this._n,".updateUserProfileSpecifiedKey options:"),e);var t=e.conversationID,n=e.nick,o=e.avatar;if(this._conversationMap.has(t)){var i=this._conversationMap.get(t).userProfile;je(n)&&i.nick!==n&&(i.nick=n),je(o)&&i.avatar!==o&&(i.avatar=o),this.emitConversationUpdate(!0,!1)}}},{key:"_onMyProfileModified",value:function(e){var n=this,o=this.getLocalConversationList(),i=Date.now();o.forEach((function(o){n.modifyMessageSentByMe(t({conversationID:o.conversationID},e))})),Oe.l("".concat(this._n,"._onMyProfileModified. modify all messages sent by me, cost ").concat(Date.now()-i," ms"))}},{key:"modifyMessageSentByMe",value:function(e){this._messageListHandler.modifyMessageSentByMe(e)}},{key:"getLatestMessageSentByMe",value:function(e){return this._messageListHandler.getLatestMessageSentByMe(e)}},{key:"modifyMessageSentByPeer",value:function(e){this._messageListHandler.modifyMessageSentByPeer(e)}},{key:"getLatestMessageSentByPeer",value:function(e){return this._messageListHandler.getLatestMessageSentByPeer(e)}},{key:"pushIntoNoticeResult",value:function(e,t){return!(!this._messageListHandler.pushIn(t)||this.singlyLinkedList.has(t.random))&&(e.push(t),!0)}},{key:"getLocalLastMessage",value:function(e){return this._messageListHandler.getLocalLastMessage(e)}},{key:"checkAndPatchRemark",value:function(){var e=Promise.resolve();if(0===this._conversationMap.size)return e;var t=this.getModule(8);if(!t)return e;var n=I(this._conversationMap.values()).filter((function(e){return e.type===A.CONV_C2C}));if(0===n.length)return e;var o=0;return n.forEach((function(e){var n=e.conversationID.replace(A.CONV_C2C,"");if(t.isMyFriend(n)){var i=t.getFriendRemark(n);e.remark!==i&&(e.remark=i,o+=1)}})),Oe.l("".concat(this._n,".checkAndPatchRemark. c2c conversation count:").concat(n.length,", patched count:").concat(o)),e}},{key:"updateTopicConversation",value:function(e){this._updateLocalConversationList({conversationOptionsList:e,isFromGetConversations:!0})}},{key:"sendReadReceipt",value:function(e){var t=e[0],n=null;return t.conversationType===A.CONV_C2C?n=this._m.getModule(6):t.conversationType===A.CONV_GROUP&&(n=this._m.getModule(7)),n?n.sendReadReceipt(e):Xi({code:hi.CANNOT_FIND_MODULE})}},{key:"getReadReceiptList",value:function(e){var t=e[0],n=null;return t.conversationType===A.CONV_C2C?n=this._m.getModule(6):t.conversationType===A.CONV_GROUP&&(n=this._m.getModule(7)),n?n.getReadReceiptList(e):Xi({code:hi.CANNOT_FIND_MODULE})}},{key:"getLastMessageTime",value:function(e){var t=this.getLocalConversation(e);return t?t.lastMessage.lastTime:0}},{key:"getTotalUnreadMessageCount",value:function(){var e=this.getLocalConversationList(),t=0;return e.forEach((function(e){e.type!==A.CONV_SYSTEM&&(""!==e.messageRemindType&&e.messageRemindType!==A.MSG_REMIND_ACPT_AND_NOTE||(t+=e.unreadCount))})),t}},{key:"emitTotalUnreadMessageCountUpdate",value:function(){var e=this.getTotalUnreadMessageCount();this._convTotalUnreadCount!==e&&(Oe.l("".concat(this._n,".emitTotalUnreadMessageCountUpdate from ").concat(this._convTotalUnreadCount," to ").concat(e)),this._convTotalUnreadCount=e,this.emitOuterEvent(D.TOTAL_UNREAD_MESSAGE_COUNT_UPDATED))}},{key:"reset",value:function(){Oe.l("".concat(this._n,".reset")),this._pagingStatus=Vt.NOT_START,this._messageListHandler.reset(),this._messageRemindHandler.reset(),this._roamingMessageKeyAndTimeMap.clear(),this._roamingMessageSequenceMap.clear(),this.singlyLinkedList.reset(),this._peerReadTimeMap.clear(),this._completedMap.clear(),this._conversationMap.clear(),this._pagingTimeStamp=0,this._pagingStartIndex=0,this._pagingPinnedTimeStamp=0,this._pagingPinnedStartIndex=0,this._remoteGroupReadSequenceMap.clear(),this._convTotalUnreadCount=0,this._pagingGetCostList.length=0,this.resetReady()}}]),o}(yn),gr=function(){function e(t){r(this,e),this._groupModule=t,this._n="GroupTipsHandler",this._cachedGroupTipsMap=new Map,this._checkCountMap=new Map,this.MAX_CHECK_COUNT=4,this._getTopicPendingMap=new Map}return c(e,[{key:"onCheckTimer",value:function(e){e%1==0&&this._cachedGroupTipsMap.size>0&&this._checkCachedGroupTips()}},{key:"_checkCachedGroupTips",value:function(){var e=this;this._cachedGroupTipsMap.forEach((function(t,n){var o=e._checkCountMap.get(n),i=e._groupModule.hasLocalGroup(n);Oe.l("".concat(e._n,"._checkCachedGroupTips groupID:").concat(n," hasLocalGroup:").concat(i," checkCount:").concat(o)),i?(e._notifyCachedGroupTips(n),e._checkCountMap.delete(n),e._groupModule.deleteUnjoinedAVChatRoom(n)):o>=e.MAX_CHECK_COUNT?(e._deleteCachedGroupTips(n),e._checkCountMap.delete(n)):(o++,e._checkCountMap.set(n,o))}))}},{key:"onNewGroupTips",value:function(e){Oe.d("".concat(this._n,".onReceiveGroupTips count:").concat(e.dataList.length));var t=this.newGroupTipsStoredAndSummary(e),n=t.eventDataList,o=t.result,i=t.AVChatRoomMessageList;i.length>0&&this._groupModule.onAVChatRoomMessage(i),n.length>0&&(this._groupModule.updateNextMessageSeq(n),this._groupModule.getModule(11).onNewMessage({conversationOptionsList:n,isInstantMessage:!0})),o.length>0&&(this._groupModule.emitOuterEvent(D.MESSAGE_RECEIVED,o),this.handleMessageList(o))}},{key:"newGroupTipsStoredAndSummary",value:function(e){for(var n=this,o=e.event,i=e.dataList,r=null,a=[],s=[],c={},u=[],l=function(e,l){var d=lt(i[e]);if(6===o){if(n._groupModule.isGroupAttributesUpdatedNotice(d))return"continue";if(n._groupModule.isGroupCountersNotice(d))return"continue"}var f=d.groupProfile,p=f.groupID,h=f.communityType,g=void 0===h?0:h,_=f.topicID,v=void 0===_?void 0:_,m=f.invisible,y=void 0,M=n._groupModule.isMessageFromTopic(g,v);if(M){y=A.CONV_TOPIC,d.to=v;var I=n._groupModule.getModule(10);I.hasLocalTopic(p,v)||n._getTopicPendingMap.has(v)||(n._getTopicPendingMap.set(v,1),I.getTopicList({groupID:p,topicIDList:[v]}).finally((function(){n._getTopicPendingMap.delete(v)})))}var C=n._groupModule.hasLocalGroup(p);if(!C&&n._groupModule.isUnjoinedAVChatRoom(p))return"continue";if(!C&&!M)return n._cacheGroupTipsAndProbe({groupID:p,event:o,item:d}),"continue";if(n._groupModule.isMessageFromOrToAVChatroom(p))return d.event=o,u.push(d),"continue";if(d.currentUser=n._groupModule.getMyUserID(),d.conversationType=A.CONV_GROUP,(r=new Ki(d)).setElement({type:A.MSG_GRP_TIP,content:t(t({},d.elements),{},{groupProfile:d.groupProfile})}),r.isSystemMessage=!1,1===m)return n._qualityStat(r),"continue";var b=n._groupModule.getModule(11),T=r,S=T.conversationID,E=T.sequence;if(6===o)r._onlineOnlyFlag=!0,s.push(r);else if(!b.pushIntoNoticeResult(s,r))return"continue";if(n._groupModule.isMessageFromCommunityOfTopic(g,v))return"continue";if(6===o&&b.getLocalConversation(S))return"continue";6!==o&&n._qualityStat(r);var k=b.isRemoteRead({conversationID:S,sequence:E});if(ze(c[S])){var D=0;"in"===r.flow&&(r._isExcludedFromUnreadCount||r._onlineOnlyFlag||k||(D=1)),c[S]=a.push({conversationID:S,unreadCount:D,type:ze(y)?r.conversationType:y,subType:r.conversationSubType,lastMessage:r._isExcludedFromLastMessage?"":r})-1}else{var L=c[S];a[L].type=r.conversationType,a[L].subType=r.conversationSubType,a[L].lastMessage=r._isExcludedFromLastMessage?"":r,"in"===r.flow&&(r._isExcludedFromUnreadCount||r._onlineOnlyFlag||k||a[L].unreadCount++)}},d=0,f=i.length;d<f;d++)l(d);return{eventDataList:a,result:s,AVChatRoomMessageList:u}}},{key:"_qualityStat",value:function(e){this._groupModule.getModule(26).addMessageSequence({key:Ci,message:e})}},{key:"handleMessageList",value:function(e){var t=this;e.forEach((function(e){switch(e.payload.operationType){case 1:t._onNewMemberComeIn(e);break;case 2:t._onMemberQuit(e);break;case 3:t._onMemberKickedOut(e);break;case 4:t._onMemberSetAdmin(e);break;case 5:t._onMemberCancelledAdmin(e);break;case 6:t._onGroupProfileModified(e);break;case 7:t._onMemberInfoModified(e);break;case 8:t._onTopicProfileUpdated(e);break;default:Oe.w("".concat(t._n,".handleMessageList unknown operationType:").concat(e.payload.operationType))}}))}},{key:"_onNewMemberComeIn",value:function(e){var t=e.payload,n=t.memberNum,o=t.groupProfile.groupID,i=this._groupModule.getLocalGroupProfile(o);i&&He(n)&&i.memberCount!==n&&(i.memberCount=n,this._updateConversationGroupProfile(i))}},{key:"_onMemberQuit",value:function(e){var t=e.payload,n=t.memberNum,o=t.groupProfile.groupID,i=this._groupModule.getLocalGroupProfile(o);i&&He(n)&&i.memberCount!==n&&(i.memberCount=n,this._updateConversationGroupProfile(i)),this._groupModule.getModule(9).deleteLocalGroupMembers(o,e.payload.userIDList)}},{key:"_onMemberKickedOut",value:function(e){var t=e.payload,n=t.memberNum,o=t.groupProfile.groupID,i=this._groupModule.getLocalGroupProfile(o);i&&He(n)&&i.memberCount!==n&&(i.memberCount=n,this._updateConversationGroupProfile(i)),this._groupModule.getModule(9).deleteLocalGroupMembers(o,e.payload.userIDList)}},{key:"_updateConversationGroupProfile",value:function(e){this._groupModule.getModule(11).updateConversationGroupProfile([e])}},{key:"_onMemberSetAdmin",value:function(e){var t=e.payload.groupProfile.groupID,n=e.payload.userIDList,o=this._groupModule.getModule(9);n.forEach((function(e){var n=o.getLocalGroupMemberInfo(t,e);n&&n.updateRole(A.GRP_MBR_ROLE_ADMIN)}))}},{key:"_onMemberCancelledAdmin",value:function(e){var t=e.payload.groupProfile.groupID,n=e.payload.userIDList,o=this._groupModule.getModule(9);n.forEach((function(e){var n=o.getLocalGroupMemberInfo(t,e);n&&n.updateRole(A.GRP_MBR_ROLE_MEMBER)}))}},{key:"_onGroupProfileModified",value:function(e){var t=this,n=e.payload,o=n.newGroupProfile,i=n.groupProfile.groupID,r=this._groupModule.getLocalGroupProfile(i);Object.keys(o).forEach((function(e){switch(e){case"ownerID":t._ownerChanged(r,o);break;case"groupName":r.name=o[e];break;default:r[e]=o[e]}}));var a=!r.isSupportTopic;this._groupModule.emitGroupListUpdate(!0,a)}},{key:"_ownerChanged",value:function(e,t){var n=e.groupID,o=this._groupModule.getLocalGroupProfile(n),i=this._groupModule.getMyUserID();if(i===t.ownerID){o.updateGroup({selfInfo:{role:A.GRP_MBR_ROLE_OWNER}});var r=this._groupModule.getModule(9),a=r.getLocalGroupMemberInfo(n,i),s=this._groupModule.getLocalGroupProfile(n).ownerID,c=r.getLocalGroupMemberInfo(n,s);a&&a.updateRole(A.GRP_MBR_ROLE_OWNER),c&&c.updateRole(A.GRP_MBR_ROLE_MEMBER)}}},{key:"_onMemberInfoModified",value:function(e){var t=e.to,n=e.payload,o=n.groupProfile,i=n.memberList,r=o.groupID;ht(t)&&this._updateTopicMuteTime(e);var a=this._groupModule.getModule(9);i.forEach((function(e){var t=a.getLocalGroupMemberInfo(r,e.userID);t&&He(e.muteTime)&&t.updateMuteUntil(e.muteTime)}))}},{key:"_updateTopicMuteTime",value:function(e){var t=e.to,n=e.payload,o=n.groupProfile,i=n.memberList,r=void 0===i?[]:i,a=this._groupModule.getModule(10),s=o.groupID,c=a.getLocalTopic(s,t);if(c){for(var u=!1,l=0;l<r.length;l++){var d=r[l];if(d.userID===this._groupModule.getMyUserID()&&d.muteTime>=0){c.updateSelfInfo({muteTime:d.muteTime}),u=!0;break}}u&&this._groupModule.emitOuterEvent(D.TOPIC_UPDATED,{groupID:s,topic:c})}}},{key:"_onTopicProfileUpdated",value:function(e){var n=e.payload,o=n.groupProfile.groupID,i=n.newTopicInfo;this._groupModule.getModule(10).onTopicProfileUpdated(t({groupID:o,topicID:e.to},i))}},{key:"_cacheGroupTips",value:function(e,t){this._cachedGroupTipsMap.has(e)||this._cachedGroupTipsMap.set(e,[]),this._cachedGroupTipsMap.get(e).push(t)}},{key:"_deleteCachedGroupTips",value:function(e){this._cachedGroupTipsMap.has(e)&&this._cachedGroupTipsMap.delete(e)}},{key:"_notifyCachedGroupTips",value:function(e){var t=this,n=this._cachedGroupTipsMap.get(e)||[];n.forEach((function(e){t.onNewGroupTips(e)})),this._deleteCachedGroupTips(e),Oe.l("".concat(this._n,"._notifyCachedGroupTips groupID:").concat(e," count:").concat(n.length))}},{key:"_cacheGroupTipsAndProbe",value:function(e){var t=this,n=e.groupID,o=e.event,i=e.item;this._cacheGroupTips(n,{event:o,dataList:[i]}),this._groupModule.getGroupSimplifiedInfo(n).then((function(e){e.type===A.GRP_AVCHATROOM?t._groupModule.hasLocalGroup(n)?t._notifyCachedGroupTips(n):t._groupModule.setUnjoinedAVChatRoom(n):(t._groupModule.updateGroupMap([e]),t._notifyCachedGroupTips(n))})),this._checkCountMap.has(n)||this._checkCountMap.set(n,0),Oe.l("".concat(this._n,"._cacheGroupTipsAndProbe groupID:").concat(n))}},{key:"reset",value:function(){this._cachedGroupTipsMap.clear(),this._checkCountMap.clear(),this._getTopicPendingMap.clear()}}]),e}(),_r=function(){function e(t){r(this,e),this._groupModule=t,this._n="CommonGroupHandler",this.tempConversationList=null,this._cachedGroupMessageMap=new Map,this._checkCountMap=new Map,this.MAX_CHECK_COUNT=4,this._getTopicPendingMap=new Map,this._isPagingGetCompleted=!1,t.getInnerEmitterInstance().once(Zi,this._initGroupList,this)}return c(e,[{key:"onCheckTimer",value:function(e){e%1==0&&this._cachedGroupMessageMap.size>0&&this._checkCachedGroupMessage()}},{key:"_checkCachedGroupMessage",value:function(){var e=this;this._cachedGroupMessageMap.forEach((function(t,n){var o=e._checkCountMap.get(n),i=e._groupModule.hasLocalGroup(n);Oe.l("".concat(e._n,"._checkCachedGroupMessage groupID:").concat(n," hasLocalGroup:").concat(i," checkCount:").concat(o)),i?(e._notifyCachedGroupMessage(n),e._checkCountMap.delete(n),e._groupModule.deleteUnjoinedAVChatRoom(n)):o>=e.MAX_CHECK_COUNT?(e._deleteCachedGroupMessage(n),e._checkCountMap.delete(n)):(o++,e._checkCountMap.set(n,o))}))}},{key:"_initGroupList",value:function(){var e=this;Oe.l("".concat(this._n,"._initGroupList"));var t=new Ai("getGroupListInStorage"),n=this._groupModule.getStorageGroupList();if(Ye(n)&&n.length>0){n.forEach((function(t){e._groupModule.initGroupMap(t)})),this._groupModule.emitGroupListUpdate(!0,!1);var o=this._groupModule.getLocalGroupList().length;t.setNetworkType(this._groupModule.getNetworkType()).setMessage("group count:".concat(o)).end()}else t.setNetworkType(this._groupModule.getNetworkType()).setMessage("group count:0").end();Oe.l("".concat(this._n,"._initGroupList ok"))}},{key:"handleUpdateGroupLastMessage",value:function(e){var n="".concat(this._n,".handleUpdateGroupLastMessage");if(Oe.l("".concat(n," conversation count:").concat(e.length,", local group count:").concat(this._groupModule.getLocalGroupList().length)),0!==this._groupModule.getGroupMap().size){for(var o,i,r,a=!1,s=0,c=e.length;s<c;s++)(o=e[s]).type===A.CONV_GROUP&&(i=o.conversationID.split(/^GROUP/)[1],(r=this._groupModule.getLocalGroupProfile(i))&&(r.lastMessage=t({},o.lastMessage),a=!0));a&&(this._groupModule.sortLocalGroupList(),this._groupModule.emitGroupListUpdate(!0,!1))}else this.tempConversationList=e}},{key:"onNewGroupMessage",value:function(e){Oe.d("".concat(this._n,".onNewGroupMessage count:").concat(e.dataList.length));var t=this._newGroupMessageStoredAndSummary(e),n=t.conversationOptionsList,o=t.messageList,i=t.AVChatRoomMessageList;i.length>0&&this._groupModule.onAVChatRoomMessage(i),this._groupModule.filterModifiedMessage(o),n.length>0&&(this._groupModule.updateNextMessageSeq(n),this._groupModule.getModule(11).onNewMessage({conversationOptionsList:n,isInstantMessage:e.isInstantMessage||!0,updateUnreadCount:e.updateUnreadCount||!0}));var r=this._groupModule.filterUnmodifiedMessage(o);r.length>0&&this._groupModule.emitOuterEvent(D.MESSAGE_RECEIVED,r),o.length=0}},{key:"_newGroupMessageStoredAndSummary",value:function(e){var t=this,n=e.dataList,o=e.event,i=e.isInstantMessage,r=null,a=[],s=[],c=[],u={},l=this._groupModule.getModule(16),d=this._groupModule.getFileDownloadProxy(),f=n.length;f>1&&n.sort((function(e,t){return e.sequence-t.sequence}));for(var p=function(e){var f=lt(n[e]),p=f.groupProfile,h=p.groupID,g=p.communityType,_=void 0===g?0:g,v=p.topicID,m=void 0===v?void 0:v,y=p.invisible,M=void 0,I=t._groupModule.isMessageFromTopic(_,m);if(I){M=A.CONV_TOPIC,f.to=m;var C=t._groupModule.getModule(10);C.hasLocalTopic(h,m)||t._getTopicPendingMap.has(m)||(t._getTopicPendingMap.set(m,1),C.getTopicList({groupID:h,topicIDList:[m]}).finally((function(){t._getTopicPendingMap.delete(m)})))}var b=t._groupModule.hasLocalGroup(h);if(!b&&t._groupModule.isUnjoinedAVChatRoom(h))return"continue";if(!b&&!I)return t._cacheGroupMessageAndProbe({groupID:h,event:o,item:f}),"continue";if(t._groupModule.isMessageFromOrToAVChatroom(h))return f.event=o,c.push(f),"continue";if(f.currentUser=t._groupModule.getMyUserID(),f.conversationType=A.CONV_GROUP,f.isSystemMessage=!!f.isSystemMessage,r=new Ki(f),f.elements=l.parseElements(f.elements,f.from),r.setElement(f.elements,d),1===y)return t._qualityStat(i,r),"continue";var T=1===n[e].isModified,S=t._groupModule.getModule(11);if(S.isMessageSentByCurrentInstance(r)?r.isModified=T:T=!1,1===f.onlineOnlyFlag)r._onlineOnlyFlag=!0,S.isMessageSentByCurrentInstance(r)||s.push(r);else{if(t._groupModule.isMessageFromCommunityOfTopic(_,m))return s.push(r),"continue";if(!S.pushIntoMessageList(s,r,T))return"continue";t._qualityStat(i,r);var E=r,k=E.conversationID,D=E.sequence,L=S.isRemoteRead({conversationID:k,sequence:D});if(ze(u[k])){var O=0;"in"===r.flow&&(r._isExcludedFromUnreadCount||L||(O=1)),u[k]=a.push({conversationID:k,unreadCount:O,type:ze(M)?r.conversationType:M,subType:r.conversationSubType,lastMessage:r._isExcludedFromLastMessage?"":r})-1}else{var R=u[k];a[R].type=ze(M)?r.conversationType:M,a[R].subType=r.conversationSubType,a[R].lastMessage=r._isExcludedFromLastMessage?"":r,"in"===r.flow&&(r._isExcludedFromUnreadCount||L||a[R].unreadCount++)}}},h=0;h<f;h++)p(h);return{conversationOptionsList:a,messageList:s,AVChatRoomMessageList:c}}},{key:"_qualityStat",value:function(e,t){var n=this._groupModule.getModule(26);n.addMessageSequence({key:Ci,message:t}),e&&t.clientTime>0&&n.addMessageDelay(t.clientTime)}},{key:"onGroupMessageRevoked",value:function(e){var t=this._groupModule.getModule(11),n=[],o=null,i=!0;e.dataList.forEach((function(e){var r=e.elements.revokedInfos;ze(r)||r.forEach((function(e){var r=Ut(e.topicID)?"GROUP".concat(e.groupID):"GROUP".concat(e.topicID);o=t.revoke(r,e.sequence,e.random);var a=e.revokerInfo&&e.revokerInfo.revoker;if(o)o.revoker=a,n.push(o);else{var s={conversationID:r,to:e.topicID||"",sequence:e.sequence,time:e.time,revoker:a};t.isLastMessageRevoked(s)&&(n.push(s),i=!1)}}))})),0!==n.length&&(t.onMessageRevoked(n),!0===i&&(Oe.l("".concat(this._n,".onGroupMessageRevoked count:").concat(n.length)),this._groupModule.emitOuterEvent(D.MESSAGE_REVOKED,n)))}},{key:"_groupListTreeShaking",value:function(e){for(var t=new Map(I(this._groupModule.getGroupMap())),n=0,o=e.length;n<o;n++)t.delete(e[n].groupID);this._groupModule.hasJoinedAVChatRoom()&&this._groupModule.getJoinedAVChatRoom().forEach((function(e){t.delete(e)})),this._groupModule.getGroupMap().forEach((function(e,n){e.isSupportTopic&&t.delete(n)}));for(var i=I(t.keys()),r=0,a=i.length;r<a;r++)this._groupModule.deleteGroup(i[r])}},{key:"getGroupList",value:function(e){var t=this,n="".concat(this._n,".").concat("getGroupList"),o=new Ai("getGroupList");Oe.l("".concat(n));var i={introduction:"Introduction",notification:"Notification",createTime:"CreateTime",ownerID:"Owner_Account",lastInfoTime:"LastInfoTime",memberNum:"MemberNum",maxMemberNum:"MaxMemberNum",joinOption:"ApplyJoinOption",inviteOption:"InviteJoinOption",muteAllMembers:"ShutUpAllMember"},r=["Type","Name","FaceUrl","NextMsgSeq","LastMsgTime","AtInfoList","LastRecallTime"],a=[];e&&e.groupProfileFilter&&e.groupProfileFilter.forEach((function(e){i[e]&&r.push(i[e])}));var s=(e||{}).isGroupWithTopicOnly,c=void 0!==s&&s;return this._pagingGetGroupList({limit:50,offset:0,groupBaseInfoFilter:r,groupList:a,isGroupWithTopicOnly:c}).then((function(){Oe.l("".concat(n," ok. count:").concat(a.length," isGroupWithTopicOnly:").concat(c)),c||t._groupListTreeShaking(a),t._groupModule.updateGroupMap(a);var e=t._groupModule.getLocalGroupList().length;o.setNetworkType(t._groupModule.getNetworkType()).setMessage("remote count:".concat(a.length,", after tree shaking, local count:").concat(e,", isGroupWithTopicOnly:").concat(c)).end(),t.tempConversationList&&(t.handleUpdateGroupLastMessage(t.tempConversationList),t.tempConversationList=null),t._groupModule.patchGroupMessageRemindType(),t._groupModule.recomputeUnreadCount(),t._groupModule.emitGroupListUpdate(!0,!c);var i=t._groupModule.getLocalGroupList();if(c){var r=i.filter((function(e){return!0===e.isSupportTopic}));return Wi({groupList:r})}return t._isPagingGetCompleted=!0,Wi({groupList:i})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=M(t,2),i=n[0],r=n[1];o.setError(e,i,r).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"isPagingGetCompleted",value:function(){return this._isPagingGetCompleted}},{key:"_pagingGetGroupList",value:function(e){var t=this,n="".concat(this._n,".").concat("_pagingGetGroupList"),o=e.isCommunityRelay,i=void 0!==o&&o,r=e.isGroupWithTopicOnly,a=void 0!==r&&r,s=e.limit,c=e.offset,u=e.groupBaseInfoFilter,l=e.groupList;if(a)return this._pagingGetGroupListWithTopic({limit:s,offset:c,groupBaseInfoFilter:u,groupList:l});var d=new Ai("_pagingGetGroupList");return this._groupModule.request({protocolName:Zn,requestData:{type:i?A.GRP_COMMUNITY:void 0,memberAccount:this._groupModule.getMyUserID(),limit:s,offset:c,responseFilter:{groupBaseInfoFilter:u,selfInfoFilter:["Role","JoinTime","MsgFlag","MsgSeq"]}}}).then((function(e){var o=e.data,r=o.groups,a=void 0===r?[]:r,f=o.totalCount;l.push.apply(l,I(a)),t._handleGroupAtInfoWithoutTopic(i,a);var p=c+s,h=!(f>p),g="offset:".concat(c," totalCount:").concat(f," isCompleted:").concat(h," ")+"currentCount:".concat(l.length," isCommunityRelay:").concat(i);return d.setNetworkType(t._groupModule.getNetworkType()).setMessage("".concat(g)).end(),i||h?!i&&h?(Oe.l("".concat(n," start to get community list")),c=0,t._pagingGetGroupList({limit:s,offset:c,groupBaseInfoFilter:u,groupList:l,isCommunityRelay:!0})):i&&!h?(c=p,t._pagingGetGroupList({limit:s,offset:c,groupBaseInfoFilter:u,groupList:l,isCommunityRelay:!0})):(Oe.l("".concat(n," ok. totalCount:").concat(l.length)),Wi({groupList:l})):(c=p,t._pagingGetGroupList({limit:s,offset:c,groupBaseInfoFilter:u,groupList:l}))})).catch((function(e){return 11e3!==e.code&&t._groupModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0],r=n[1];d.setMessage("isCommunityRelay:".concat(i)).setError(e,o,r).end()})),i?(11e3===e.code&&(d=null,Oe.l("".concat(n," ok. community unavailable"))),$i({groupList:l})):Xi(e)}))}},{key:"_pagingGetGroupListWithTopic",value:function(e){var t=this,n="".concat(this._n,"._pagingGetGroupListWithTopic"),o=e.limit,i=e.offset,r=e.groupBaseInfoFilter,a=e.groupList,s=new Ai("pagingGetGroupListWithTopic");return this._groupModule.request({protocolName:Zn,requestData:{type:A.GRP_COMMUNITY,memberAccount:this._groupModule.getMyUserID(),limit:o,offset:i,responseFilter:{groupBaseInfoFilter:r,selfInfoFilter:["Role","JoinTime","MsgFlag","MsgSeq"]},isSupportTopic:1}}).then((function(e){var c=e.data,u=c.groups,l=void 0===u?[]:u,d=c.totalCount;a.push.apply(a,I(l));var f=i+o,p=!(d>f),h="offset:".concat(i," totalCount:").concat(d," isCompleted:").concat(p," ")+"currentCount:".concat(a.length);return s.setNetworkType(t._groupModule.getNetworkType()).setMessage("".concat(h)).end(),p?(Oe.l("".concat(n," ok. totalCount:").concat(a.length)),Wi({groupList:a})):(i=f,t._pagingGetGroupListWithTopic({limit:o,offset:i,groupBaseInfoFilter:r,groupList:a}))})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];s.setError(e,o,i).end()})),Xi(e)}))}},{key:"_cacheGroupMessage",value:function(e,t){this._cachedGroupMessageMap.has(e)||this._cachedGroupMessageMap.set(e,[]),this._cachedGroupMessageMap.get(e).push(t)}},{key:"_deleteCachedGroupMessage",value:function(e){this._cachedGroupMessageMap.has(e)&&this._cachedGroupMessageMap.delete(e)}},{key:"_notifyCachedGroupMessage",value:function(e){var t=this,n=this._cachedGroupMessageMap.get(e)||[];n.forEach((function(e){t.onNewGroupMessage(e)})),this._deleteCachedGroupMessage(e),Oe.l("".concat(this._n,"._notifyCachedGroupMessage groupID:").concat(e," count:").concat(n.length))}},{key:"_cacheGroupMessageAndProbe",value:function(e){var t=this,n=e.groupID,o=e.event,i=e.item;this._cacheGroupMessage(n,{event:o,dataList:[i]}),this._groupModule.getGroupSimplifiedInfo(n).then((function(e){e.type===A.GRP_AVCHATROOM?t._groupModule.hasLocalGroup(n)?t._notifyCachedGroupMessage(n):t._groupModule.setUnjoinedAVChatRoom(n):(t._groupModule.updateGroupMap([e]),t._notifyCachedGroupMessage(n))})),this._checkCountMap.has(n)||this._checkCountMap.set(n,0),Oe.l("".concat(this._n,"._cacheGroupMessageAndProbe groupID:").concat(n))}},{key:"_handleGroupAtInfoWithoutTopic",value:function(e,n){var o=this;e&&0!==n.length&&n.forEach((function(e){var n=e.groupID,i=e.groupAtInfoList,r=[];ze(i)||(i.forEach((function(e){r.push(t(t({},e),{},{groupID:n}))})),o._groupModule.getModule(11).onNewGroupAtTips({dataList:r}))}))}},{key:"reset",value:function(){this._cachedGroupMessageMap.clear(),this._checkCountMap.clear(),this._getTopicPendingMap.clear(),this._isPagingGetCompleted=!1,this._groupModule.getInnerEmitterInstance().once(Zi,this._initGroupList,this)}}]),e}(),vr=function(){function e(t){r(this,e),this._groupModule=t,this._n="GroupAttributesHandler",this._groupAttributesMap=new Map,this._groupAttributesCopy={},this.CACHE_EXPIRE_TIME=3e4,this._groupModule.getInnerEmitterInstance().on(er,this._onCloudConfigUpdated,this)}return c(e,[{key:"_onCloudConfigUpdated",value:function(){var e=this._groupModule.getCloudConfig("grp_attr_cache_time");ze(e)||(this.CACHE_EXPIRE_TIME=Number(e))}},{key:"updateLocalMainSequenceOnReconnected",value:function(){this._groupAttributesMap.forEach((function(e){e.localMainSequence=0}))}},{key:"isGroupAttributesUpdatedNotice",value:function(e){var t=e.to,n=e.elements.newGroupProfile,o=!ze(n)&&!Ut(n.groupAttributeOption);return o&&this._onGroupAttributesUpdated({groupID:t,groupAttributeOption:n.groupAttributeOption}),o}},{key:"_onGroupAttributesUpdated",value:function(e){var t=this,n=e.groupID,o=e.groupAttributeOption,i=o.mainSequence,r=o.isWithChangedAttributeInfo,a=o.groupAttributeList,s=void 0===a?[]:a,c=o.operationType;if(Oe.l("".concat(this._n,".onGroupAttributesUpdated. ")+"groupID:".concat(n," isWithChangedAttributeInfo:").concat(r," operationType:").concat(c)),!ze(c)){this._groupAttributesCopy=this._getCachedAttributes({groupID:n});var u=i-this._getLocalGroupAttributes(n).localMainSequence;if(0!==u){if(1===r&&1===u)return this._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:i,groupAttributeList:s,operationType:c}),void this._emitGroupAttributesUpdated(n);if(this._hasLocalGroupAttributes(n)){var l=this._getLocalGroupAttributes(n).avChatRoomKey;this._getGroupAttributes({groupID:n,avChatRoomKey:l}).then((function(){t._emitGroupAttributesUpdated(n)}))}}}}},{key:"initGroupAttributesCache",value:function(e){var t=e.groupID,n=e.avChatRoomKey,o=void 0===n?void 0:n;this._groupAttributesMap.set(t,{lastUpdateTime:0,localMainSequence:0,remoteMainSequence:0,attributes:new Map,avChatRoomKey:o}),Oe.l("".concat(this._n,".initGroupAttributesCache groupID:").concat(t," avChatRoomKey:").concat(o))}},{key:"initGroupAttributes",value:function(e){var t=this,n=e.groupID,o=e.groupAttributes,i=this._getLocalGroupAttributes(n),r=i.remoteMainSequence,a=i.avChatRoomKey,s=new Ai("initGroupAttributes");return s.setMessage("groupID:".concat(n," avChatRoomKey:").concat(a," mainSequence:").concat(r)),this._groupModule.request({protocolName:Do,requestData:{groupID:n,avChatRoomKey:a,mainSequence:r,groupAttributeList:this._transformGroupAttributes(o)}}).then((function(e){Oe.l("".concat(t._n,".").concat("initGroupAttributes"," ok. groupID:").concat(n));var i=e.data,r=i.mainSequence,a=I(i.groupAttributeList);return a.forEach((function(e){e.value=o[e.key]})),t._groupAttributesCopy=t._getCachedAttributes({groupID:n}),t._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:r,groupAttributeList:a,operationType:1}),t._emitGroupAttributesUpdated(n),s.setNetworkType(t._groupModule.getNetworkType()).end(),Wi({groupAttributes:o})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];s.setError(e,o,i).end()})),Xi(e)}))}},{key:"setGroupAttributes",value:function(e){var t=this,n="".concat(this._n,".").concat("setGroupAttributes"),o=e.groupID,i=e.groupAttributes,r=this._getLocalGroupAttributes(o),a=r.remoteMainSequence,s=r.avChatRoomKey,c=r.attributes,u=this._transformGroupAttributes(i);u.forEach((function(e){var t=e.key;e.sequence=0,c.has(t)&&(e.sequence=c.get(t).sequence)}));var l=new Ai("setGroupAttributes");return l.setMessage("groupID:".concat(o," groupAttributes:").concat(JSON.stringify(i))),Oe.l("".concat(n,". groupID:").concat(o," mainSequence:").concat(a)),this._groupModule.request({protocolName:Ao,requestData:{groupID:o,avChatRoomKey:s,mainSequence:a,groupAttributeList:u}}).then((function(e){Oe.l("".concat(n," ok."));var r=e.data,a=r.mainSequence,s=I(r.groupAttributeList);return s.forEach((function(e){e.value=i[e.key]})),t._groupAttributesCopy=t._getCachedAttributes({groupID:o}),t._refreshCachedGroupAttributes({groupID:o,remoteMainSequence:a,groupAttributeList:s,operationType:2}),t._emitGroupAttributesUpdated(o),l.setNetworkType(t._groupModule.getNetworkType()).end(),Wi({groupAttributes:i})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];l.setError(e,o,i).end()})),Xi(e)}))}},{key:"deleteGroupAttributes",value:function(e){var t=this,n=e.groupID,o=e.keyList,i=void 0===o?[]:o,r=this._getLocalGroupAttributes(n),a=r.remoteMainSequence,s=r.avChatRoomKey,c=r.attributes,u=I(c.keys()),l=Oo,d=3,f={groupID:n,avChatRoomKey:s,mainSequence:a},p=[];i.length>0&&(u=[],l=Lo,d=4,i.forEach((function(e){var t=0;c.has(e)&&(t=c.get(e).sequence,u.push(e)),p.push({key:e,sequence:t})})),f.groupAttributeList=p);var h=new Ai("deleteGroupAttributes");return h.setMessage("groupID:".concat(n," mainSequence:").concat(a," keyList:").concat(i," protocolName:").concat(l)),this._groupModule.request({protocolName:l,requestData:f}).then((function(e){Oe.l("".concat(t._n,".").concat("deleteGroupAttributes"," ok. groupID:").concat(n));var o=e.data.mainSequence;return t._groupAttributesCopy=t._getCachedAttributes({groupID:n}),t._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:o,groupAttributeList:p,operationType:d}),t._emitGroupAttributesUpdated(n),h.setNetworkType(t._groupModule.getNetworkType()).end(),Wi({keyList:u})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];h.setError(e,o,i).end()})),Xi(e)}))}},{key:"getGroupAttributes",value:function(e){var t=this,n="".concat(this._n,".").concat("getGroupAttributes"),o=e.groupID,i=this._getLocalGroupAttributes(o),r=i.avChatRoomKey,a=i.lastUpdateTime,s=i.localMainSequence,c=i.remoteMainSequence,u=new Ai("getGroupAttributes");if(u.setMessage("groupID:".concat(o," localMainSequence:").concat(s," remoteMainSequence:").concat(c," keyList:").concat(e.keyList)),Date.now()-a>=this.CACHE_EXPIRE_TIME||s<c)return this._getGroupAttributes({groupID:o,avChatRoomKey:r}).then((function(i){u.setMoreMessage("get attributes from remote. count:".concat(i.length)).setNetworkType(t._groupModule.getNetworkType()).end(),Oe.l("".concat(n," from remote. groupID:").concat(o));var r=t._getCachedAttributes(e);return Wi({groupAttributes:r})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];u.setError(e,o,i).end()})),Xi(e)}));u.setMoreMessage("get attributes from cache").setNetworkType(this._groupModule.getNetworkType()).end(),Oe.l("".concat(n," from cache. groupID:").concat(o));var l=this._getCachedAttributes(e);return $i({groupAttributes:l})}},{key:"_getGroupAttributes",value:function(e){var n=this,o=0;return ze(e.avChatRoomKey)||(o=1),this._groupModule.request({protocolName:Ro,requestData:t(t({},e),{},{groupType:o})}).then((function(t){Oe.l("".concat(n._n,"._getGroupAttributes ok. groupID:").concat(e.groupID));var o=t.data,i=o.mainSequence,r=o.groupAttributeList,a=I(r);return ze(i)||n._refreshCachedGroupAttributes({groupID:e.groupID,remoteMainSequence:i,groupAttributeList:a,operationType:5}),r})).catch((function(e){return Xi(e)}))}},{key:"_refreshCachedGroupAttributes",value:function(e){var t=e.groupID,n=e.remoteMainSequence,o=e.groupAttributeList,i=e.operationType;if(this._hasLocalGroupAttributes(t)){var r=this._getLocalGroupAttributes(t),a=r.localMainSequence;if(5===i||n-a==1)r.remoteMainSequence=n,r.localMainSequence=n,r.lastUpdateTime=Date.now(),this._updateCachedAttributes({groupAttributes:r,groupAttributeList:o,operationType:i});else{if(a===n)return;r.remoteMainSequence=n}this._groupAttributesMap.set(t,r);var s="operationType:".concat(i," localMainSequence:").concat(a," remoteMainSequence:").concat(n);Oe.l("".concat(this._n,"._refreshCachedGroupAttributes. ").concat(s))}}},{key:"_getCachedAttributes",value:function(e){var t=e.groupID,n=e.keyList,o=void 0===n?[]:n,i={};if(this._hasLocalGroupAttributes(t)){var r=this._getLocalGroupAttributes(t).attributes;if(o.length>0)o.forEach((function(e){r.has(e)&&(i[e]=r.get(e).value)}));else{var a,s=k(r.keys());try{for(s.s();!(a=s.n()).done;){var c=a.value;i[c]=r.get(c).value}}catch(f){s.e(f)}finally{s.f()}}}return i}},{key:"_updateCachedAttributes",value:function(e){var t=e.groupAttributes,n=e.groupAttributeList,o=e.operationType;3!==o?4!==o?(1===o&&t.attributes.clear(),n.forEach((function(e){var n=e.key,o=e.value,i=e.sequence;t.attributes.set(n,{value:o,sequence:i})}))):n.forEach((function(e){t.attributes.delete(e.key)})):t.attributes.clear()}},{key:"_hasLocalGroupAttributes",value:function(e){return this._groupAttributesMap.has(e)}},{key:"_getLocalGroupAttributes",value:function(e){return this._hasLocalGroupAttributes(e)||this.initGroupAttributesCache({groupID:e}),this._groupAttributesMap.get(e)}},{key:"_transformGroupAttributes",value:function(e){var t=[];return Object.keys(e).forEach((function(n){t.push({key:n,value:e[n]})})),t}},{key:"_emitGroupAttributesUpdated",value:function(e){var t=this._getCachedAttributes({groupID:e}),n=this._computeAttrChangedInfo(t),o=n.updatedKeyList,i=n.deletedKeyList;Oe.l("".concat(this._n,"._emitGroupAttributesUpdated update:").concat(o.length,", delete:").concat(i.length)),0===o.length&&0===i.length||this._groupModule.emitOuterEvent(D.GROUP_ATTRIBUTES_UPDATED,{groupID:e,groupAttributes:t,updatedKeyList:o,deletedKeyList:i})}},{key:"_computeAttrChangedInfo",value:function(e){var t=this,n=[],o=[];return Object.keys(e).forEach((function(o){e[o]!==t._groupAttributesCopy[o]&&n.push(o)})),Object.keys(this._groupAttributesCopy).forEach((function(t){ze(e[t])&&o.push(t)})),this._groupAttributesCopy={},{updatedKeyList:n,deletedKeyList:o}}},{key:"deleteLocalGroupAttributes",value:function(e){this._hasLocalGroupAttributes(e)&&this._groupAttributesMap.delete(e)}},{key:"reset",value:function(){this._groupAttributesMap.clear(),this._groupAttributesCopy={},this.CACHE_EXPIRE_TIME=3e4}}]),e}(),mr=function(){function e(t){r(this,e),this._groupModule=t,this._n="GroupCountersHandler",this._groupCountersMap=new Map,this.EXPIRE_TIME=3e4,this._groupModule.getInnerEmitterInstance().on(er,this._onCloudConfigUpdated,this)}return c(e,[{key:"_onCloudConfigUpdated",value:function(){var e=this._groupModule.getCloudConfig("grp_counter_expire_time");ze(e)||(this.EXPIRE_TIME=Number(e))}},{key:"isGroupCountersNotice",value:function(e){var t=e.to,n=e.elements.groupCounterInfo,o=!1;return Ut(n)||(this._onGroupCountersUpdated({groupID:t,groupCounterInfo:n}),o=!0),o}},{key:"_onGroupCountersUpdated",value:function(e){var t=this,n=e.groupID;e.groupCounterInfo.forEach((function(e){var o=e.type,i=e.groupCounterSeq,r=e.counterList,a=void 0===r?[]:r;0!==o&&2!==o||(t._updateLocalGroupCounters({groupID:n,groupCounterSeq:i,counterList:a}),a.forEach((function(e){t._groupModule.emitOuterEvent(D.GROUP_COUNTER_UPDATED,{groupID:n,key:e.key,value:e.value})}))),1===o&&t._deleteLocalGroupCounters({groupID:n,groupCounterSeq:i,counterList:a})})),Oe.l("".concat(this._n,"._onGroupCountersUpdated groupID:").concat(n))}},{key:"initGroupCountersCache",value:function(e){var t=e.groupID,n=e.avChatRoomKey;this._groupCountersMap.set(t,{lastUpdateTime:0,groupCounterSeq:0,counters:new Map,avChatRoomKey:n}),Oe.l("".concat(this._n,".initGroupCountersCache groupID:").concat(t," avChatRoomKey:").concat(n))}},{key:"setGroupCounters",value:function(e){var t=this;if(!this._groupModule.canIUse(x.GRP_COUNTER))return Xi({code:hi.CANNOT_USE_COMMERCIAL_ABILITY});var n="".concat(this._n,".setGroupCounters"),o=e.groupID,i=e.counters,r=this._convertObjectToList(i),a=this._getLocalGroupCounters(o).avChatRoomKey,s="groupID:".concat(o," count:").concat(r.length),c=new Ai("setGroupCounters");return c.setMessage("".concat(s)),Oe.l("".concat(n,". ").concat(s)),this._updateGroupCounters({groupID:o,counterList:r,avChatRoomKey:a,mode:"Set"}).then((function(e){return c.end(),Oe.l("".concat(n," ok.")),Wi({counters:e})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];c.setError(e,o,i).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"increaseGroupCounter",value:function(e){var t=this;if(!this._groupModule.canIUse(x.GRP_COUNTER))return Xi({code:hi.CANNOT_USE_COMMERCIAL_ABILITY});var n="".concat(this._n,".increaseGroupCounters"),o=e.groupID,i=e.key,r=e.value,a=this._getLocalGroupCounters(o).avChatRoomKey,s="groupID:".concat(o," key:").concat(i," value:").concat(r),c=new Ai("increaseGroupCounter");c.setMessage("".concat(s)),Oe.l("".concat(n,". ").concat(s));var u=[{key:i,value:r}];return this._updateGroupCounters({groupID:o,counterList:u,avChatRoomKey:a,mode:"Increase"}).then((function(e){return c.end(),Oe.l("".concat(n," ok.")),Wi({counters:e})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];c.setError(e,o,i).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"decreaseGroupCounter",value:function(e){var t=this;if(!this._groupModule.canIUse(x.GRP_COUNTER))return Xi({code:hi.CANNOT_USE_COMMERCIAL_ABILITY});var n="".concat(this._n,".decreaseGroupCounter"),o=e.groupID,i=e.key,r=e.value,a=this._getLocalGroupCounters(o).avChatRoomKey,s="groupID:".concat(o," key:").concat(i," value:").concat(r),c=new Ai("decreaseGroupCounter");c.setMessage("".concat(s)),Oe.l("".concat(n,". ").concat(s));var u=[{key:i,value:r}];return this._updateGroupCounters({groupID:o,counterList:u,avChatRoomKey:a,mode:"Decrease"}).then((function(e){return c.end(),Oe.l("".concat(n," ok.")),Wi({counters:e})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];c.setError(e,o,i).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"getGroupCounters",value:function(e){var t=this;if(!this._groupModule.canIUse(x.GRP_COUNTER))return Xi({code:hi.CANNOT_USE_COMMERCIAL_ABILITY});var n="".concat(this._n,".getGroupCounters"),o=e.groupID,i=e.keyList,r=void 0===i?[]:i,a=this._getLocalGroupCounters(o),s=a.avChatRoomKey,c=a.lastUpdateTime,u=new Ai("getGroupCounters");if(u.setMessage("groupID:".concat(o)),Date.now()-c>=this.EXPIRE_TIME)return this._getRemoteGroupCounters({groupID:o,avChatRoomKey:s}).then((function(e){u.setMoreMessage("from remote. count:".concat(e.length)).end(),Oe.l("".concat(n," from remote. groupID:").concat(o));var i=t._getLocalCounters(o,r);return Wi({counters:i})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];u.setError(e,o,i).end()})),Xi(e)}));u.setMoreMessage("from cache").end(),Oe.l("".concat(n," from cache. groupID:").concat(o));var l=this._getLocalCounters(o,r);return $i({counters:l})}},{key:"_getRemoteGroupCounters",value:function(e){var n=this;return this._groupModule.request({protocolName:Uo,requestData:t({},e)}).then((function(t){var o=t.data,i=o.counterList,r=void 0===i?[]:i,a=o.groupCounterSeq;return n._updateLocalGroupCounters({groupID:e.groupID,counterList:r,groupCounterSeq:a}),Oe.l("".concat(n._n,"._getRemoteGroupCounters ok. groupID:").concat(e.groupID)),r})).catch((function(e){return Xi(e)}))}},{key:"_convertObjectToList",value:function(e){var t=[];return Object.keys(e).forEach((function(n){t.push({key:n,value:e[n]})})),t}},{key:"_updateGroupCounters",value:function(e){var n="".concat(this._n,"._updateGroupCounters"),o=e.groupID,i=e.avChatRoomKey,r=e.mode;return Oe.l("".concat(n,". groupID:").concat(o," avChatRoomKey:").concat(i," mode:").concat(r)),this._groupModule.request({protocolName:Go,requestData:t({},e)}).then((function(e){Oe.l("".concat(n," ok."));var t=e.data.counterList,o={};return(void 0===t?[]:t).forEach((function(e){var t=e.key,n=e.value;o[t]=n})),o})).catch((function(e){return Xi(e)}))}},{key:"_hasLocalGroupCounters",value:function(e){return this._groupCountersMap.has(e)}},{key:"_getLocalGroupCounters",value:function(e){return this._hasLocalGroupCounters(e)||this.initGroupCountersCache({groupID:e}),this._groupCountersMap.get(e)}},{key:"_updateLocalGroupCounters",value:function(e){var t=e.groupID,n=e.counterList,o=void 0===n?[]:n,i=e.groupCounterSeq;if(this._hasLocalGroupCounters(t)){var r=this._getLocalGroupCounters(t),a=r.counters,s=r.avChatRoomKey,c=r.groupCounterSeq;if(i>0&&i<c)return;o.forEach((function(e){var t=e.key,n=e.value;a.set(t,n)})),this._groupCountersMap.set(t,{lastUpdateTime:Date.now(),groupCounterSeq:i,counters:a,avChatRoomKey:s})}}},{key:"_deleteLocalGroupCounters",value:function(e){var t=e.groupID,n=e.counterList,o=void 0===n?[]:n,i=e.groupCounterSeq;if(this._hasLocalGroupCounters(t)){var r=this._getLocalGroupCounters(t),a=r.counters,s=r.avChatRoomKey;o.forEach((function(e){a.delete(e.key)})),this._groupCountersMap.set(t,{lastUpdateTime:Date.now(),groupCounterSeq:i,counters:a,avChatRoomKey:s})}}},{key:"_getLocalCounters",value:function(e,t){var n={};if(!this._hasLocalGroupCounters(e))return n;var o=this._getLocalGroupCounters(e).counters;if(t.length>0)t.forEach((function(e){o.has(e)&&(n[e]=o.get(e))}));else{var i,r=k(o.keys());try{for(r.s();!(i=r.n()).done;){var a=i.value;n[a]=o.get(a)}}catch(l){r.e(l)}finally{r.f()}}return n}},{key:"reset",value:function(){this._groupCountersMap.clear(),this.EXPIRE_TIME=3e4}}]),e}(),yr=function(){function e(t){r(this,e);var n=t.manager,o=t.groupID,i=t.onInit,a=t.onSuccess,s=t.onFail;this._n="Polling",this._manager=n,this._groupModule=n._groupModule,this._onInit=i,this._onSuccess=a,this._onFail=s,this._groupID=o,this._timeoutID=-1,this._isRunning=!1,this._protocolName=bo}return c(e,[{key:"start",value:function(){var e=this._groupModule.isLoggedIn();e||(this._protocolName=To),Oe.l("".concat(this._n,".start pollingInterval:").concat(this._manager.getPollingInterval()," isLoggedIn:").concat(e)),this._isRunning=!0,this._request()}},{key:"isRunning",value:function(){return this._isRunning}},{key:"_request",value:function(){var e=this,t=this._onInit(this._groupID);this._groupModule.request({protocolName:this._protocolName,requestData:t}).then((function(t){e._onSuccess(e._groupID,t),e.isRunning()&&(clearTimeout(e._timeoutID),e._timeoutID=setTimeout(e._request.bind(e),e._manager.getPollingInterval()))})).catch((function(t){e._onFail(e._groupID,t),e.isRunning()&&(clearTimeout(e._timeoutID),e._timeoutID=setTimeout(e._request.bind(e),e._manager.MAX_POLLING_INTERVAL))}))}},{key:"stop",value:function(){Oe.l("".concat(this._n,".stop")),this._timeoutID>0&&(clearTimeout(this._timeoutID),this._timeoutID=-1),this._isRunning=!1}},{key:"getPollingTimerID",value:function(){return this._timeoutID}}]),e}(),Mr={3:!0,4:!0,5:!0,6:!0,17:!0},Ir=function(){function e(t){r(this,e),this._groupModule=t,this._n="AVChatRoomHandler",this._joinedGroupMap=new Map,this._pollingRequestInfoMap=new Map,this._pollingInstanceMap=new Map,this.sequencesLinkedList=new sr(200),this.messageIDLinkedList=new sr(100),this.receivedMessageCount=0,this._reportMessageStackedCount=0,this._onlineMemberCountMap=new Map,this.DEFAULT_EXPIRE_TIME=60,this.DEFAULT_POLLING_INTERVAL=300,this.MAX_POLLING_INTERVAL=2e3,this._pollingInterval=this.DEFAULT_POLLING_INTERVAL,this.DEFAULT_POLLING_NO_MESSAGE_COUNT=20,this.DEFAULT_POLLING_INTERVAL_PLUS=2e3,this._pollingNoMessageCount=0,this._startBroadcastSeq=1,this._broadcastMessageIDMap=new Map,this.DEFAULT_POLLING_SIMPLIFIED_MSG=0}return c(e,[{key:"hasJoinedAVChatRoom",value:function(){return this._joinedGroupMap.size>0}},{key:"checkJoinedAVChatRoomByID",value:function(e){return this._joinedGroupMap.has(e)}},{key:"getJoinedAVChatRoom",value:function(){return this._joinedGroupMap.size>0?I(this._joinedGroupMap.keys()):null}},{key:"_updateRequestData",value:function(e){var n=this._pollingRequestInfoMap.get(e);return e===I(this._pollingInstanceMap.keys())[0]?t(t({},n),{},{startBroadcastSeq:this._startBroadcastSeq,simplifiedMessage:this.DEFAULT_POLLING_SIMPLIFIED_MSG}):t(t({},n),{},{simplifiedMessage:this.DEFAULT_POLLING_SIMPLIFIED_MSG})}},{key:"_handleSuccess",value:function(e,t){var n=t.data,o=n.key,i=n.nextSeq,r=n.rspMsgList,a=n.errorCode,s=n.nextBroadcastSeq,c=n.broadcastMessageList;if(0!==a){var u=this._pollingRequestInfoMap.get(e),l=new Ai("longPollingAVError"),d=u?"".concat(u.key,"-").concat(u.startSeq):"requestInfo is undefined";l.setMessage("".concat(e,"-").concat(d,"-").concat(t.errorInfo)).setCode(t.errorCode).setNetworkType(this._groupModule.getNetworkType()).end(!0)}else{if(!this.checkJoinedAVChatRoomByID(e))return;je(o)&&He(i)&&this._pollingRequestInfoMap.set(e,{key:o,startSeq:i}),He(s)&&s>this._startBroadcastSeq&&(this._startBroadcastSeq=s),Ye(r)&&r.length>0?(r.forEach((function(e){e.to=e.groupID})),this.onMessage(r)):(this._pollingNoMessageCount+=1,this._pollingNoMessageCount===this.DEFAULT_POLLING_NO_MESSAGE_COUNT&&(this._pollingInterval=this.DEFAULT_POLLING_INTERVAL+this.DEFAULT_POLLING_INTERVAL_PLUS)),this._onBroadcastMessage(c)}}},{key:"_handleFailure",value:function(e,t){}},{key:"onMessage",value:function(e){if(Ye(e)&&0!==e.length){0!==this._pollingNoMessageCount&&(this._pollingNoMessageCount=0,this._pollingInterval=this.DEFAULT_POLLING_INTERVAL);var t=null,n=[],o=this._getModule(11),i=this._getModule(26),r=e.length;r>1&&e.sort((function(e,t){return e.sequence-t.sequence}));for(var a=this._getModule(12),s=0;s<r;s++){var c=this.restoreMessageFromSimplified(e[s]);if(Mr[c.event]){if(6===c.event){if(this._groupModule.isGroupAttributesUpdatedNotice(c))continue;if(this._groupModule.isGroupCountersNotice(c))continue}this.receivedMessageCount+=1,t=this.packMessage(c,c.event);var u=1===c.isModified,l=1===c.isHistoryMessage;if((a.isUnlimitedAVChatRoom()||!this.sequencesLinkedList.has(t.sequence))&&!this.messageIDLinkedList.has(t.ID)){var d=t.conversationID;if(this.receivedMessageCount%50==0?this._getModule(22).detectFirstRound(d,this.sequencesLinkedList.data()):this.receivedMessageCount%80==0&&this._getModule(22).detectSecondRound(d,this.sequencesLinkedList.data()),null!==this.sequencesLinkedList.tail()){var f=this.sequencesLinkedList.tail().value,p=t.sequence-f;p>1&&p<=20?this._getModule(22).onMessageMaybeLost(d,f+1,p-1):p<-1&&p>=-20&&this._getModule(22).onMessageMaybeLost(d,t.sequence+1,Math.abs(p)-1)}this.sequencesLinkedList.set(t.sequence),this.messageIDLinkedList.set(t.ID);var h=!1;if(this._isMessageSentByCurrentInstance(t)?u&&(h=!0,t.isModified=u,o.updateMessageIsModifiedProperty(t)):h=!0,h){if(t.conversationType===A.CONV_SYSTEM&&5===t.payload.operationType&&this._onGroupDismissed(t.payload.groupProfile.groupID),!l&&t.conversationType!==A.CONV_SYSTEM){var g=t.conversationID.replace(A.CONV_GROUP,"");this._pollingInstanceMap.has(g)?this._groupModule.isLoggedIn()&&i.addMessageSequence({key:Ti,message:t}):(t.type!==A.MSG_GRP_TIP&&t.clientTime>0&&i.addMessageDelay(t.clientTime),i.addMessageSequence({key:bi,message:t}))}n.push(t)}}}else Oe.w("".concat(this._n,".onMessage unknown event:").concat(c.event))}if(0!==n.length){this._groupModule.filterModifiedMessage(n);var _=this.packConversationOption(n);_.length>0&&this._getModule(11).onNewMessage({conversationOptionsList:_,isInstantMessage:!0}),Oe.d("".concat(this._n,".onMessage count:").concat(n.length)),this._checkMessageStacked(n);var v=this._groupModule.filterUnmodifiedMessage(n);v.length>0&&this._groupModule.emitOuterEvent(D.MESSAGE_RECEIVED,v),n.length=0}}}},{key:"isBroadcastOrNormal",value:function(e){return 3===e||17===e}},{key:"isGroupTip",value:function(e){return 4===e||6===e}},{key:"isGroupSystemNotice",value:function(e){return 5===e}},{key:"restoreGroupTipElements",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.groupJoinType||(e.groupJoinType=1);var t=e.operatorInfo,n=void 0===t?{}:t,o=e.operatorID,i=e.userIDList,r=void 0===i?[]:i,a=n.userID,s=void 0===a?o:a,c=n.avatar,u=void 0===c?"":c,l=n.nick,d=void 0===l?"":l;e.operatorInfo={userID:s,avatar:u,nick:d};var f=r.map((function(e){return{userID:e}}));return e.memberInfoList=e.memberInfoList||f,e}},{key:"restoreMessageFromSimplified",value:function(e){var n=e.event;if(this.isBroadcastOrNormal(n)&&(e.cloudCustomData=e.cloudCustomData||"",e.elements=e.elements.map((function(e){if(e.type===A.MSG_CUSTOM){var n=e.content,o=void 0===n?{}:n;e.content=t({data:"",description:"",extension:""},o)}return e}))),(this.isGroupTip(n)||this.isGroupSystemNotice(n))&&(e.from=e.from||"@TIM#SYSTEM"),this.isGroupTip(n)){e.elements=this.restoreGroupTipElements(e.elements);var o=e.elements,i=void 0===o?{}:o,r=i.operationType,a=i.operatorInfo;if(1===r){var s=[{userID:(void 0===a?{}:a).userID}];i.memberInfoList=i.memberInfoList||s}}if(this.isGroupSystemNotice(n)){var c=e.elements,l=c.memberInfoList,d=c.operatorInfo;l||(l=void 0===d?{}:d),e.elements.memberInfoList=t({userID:e.elements.operatorID,avatar:"",nick:""},l),e.elements=t({authentication:"",remarkInfo:"",messageKey:1e3*e.time},e.elements);var f=Object.keys(e.elements).filter((function(e){return"operatorInfo"!==e})).reduce((function(n,o){return t(t({},n),{},u({},o,e.elements[o]))}),{});e.elements=f}return e}},{key:"_onGroupDismissed",value:function(e){Oe.l("".concat(this._n,"._onGroupDismissed groupID:").concat(e)),this._groupModule.deleteLocalGroupAndConversation(e),this.reset(e)}},{key:"_checkMessageStacked",value:function(e){var t="MessageStacked",n=e.length;n>=100&&(this._groupModule.outputWarning(t,n),this._reportMessageStackedCount<5&&(new Ai(t).setNetworkType(this._groupModule.getNetworkType()).setMessage("count:".concat(n," groupID:").concat(I(this._joinedGroupMap.keys()))).setLevel("warning").end(),this._reportMessageStackedCount+=1))}},{key:"_isMessageSentByCurrentInstance",value:function(e){return!!this._getModule(11).isMessageSentByCurrentInstance(e)}},{key:"packMessage",value:function(e,t){e.currentUser=this._groupModule.getMyUserID(),e.conversationType=5===t?A.CONV_SYSTEM:A.CONV_GROUP,e.isSystemMessage=!!e.isSystemMessage;var n=new Ki(e),o=this.packElements(e,t);return n.setElement(o,this._groupModule.getFileDownloadProxy()),n}},{key:"packElements",value:function(e,n){return 4===n||6===n?(this._updateMemberCountByGroupTips(e),{type:A.MSG_GRP_TIP,content:t(t({},e.elements),{},{groupProfile:e.groupProfile})}):5===n?{type:A.MSG_GRP_SYS_NOTICE,content:t(t({},e.elements),{},{groupProfile:t(t({},e.groupProfile),{},{groupID:e.groupID})})}:this._getModule(16).parseElements(e.elements,e.from)}},{key:"packConversationOption",value:function(e){for(var t=new Map,n=0;n<e.length;n++){var o=e[n],i=o.conversationID;if(t.has(i)){var r=t.get(i);r.lastMessage=o,"in"===o.flow&&r.unreadCount++}else t.set(i,{conversationID:o.conversationID,unreadCount:"out"===o.flow?0:1,type:o.conversationType,subType:o.conversationSubType,lastMessage:o})}return I(t.values())}},{key:"_updateMemberCountByGroupTips",value:function(e){var t=e.groupProfile.groupID,n=e.elements.onlineMemberInfo,o=void 0===n?void 0:n;if(!Ut(o)){var i=o.onlineMemberNum,r=void 0===i?0:i,a=o.expireTime,s=void 0===a?this.DEFAULT_EXPIRE_TIME:a,c=this._onlineMemberCountMap.get(t)||{},u=Date.now();Ut(c)?Object.assign(c,{lastReqTime:0,lastSyncTime:0,latestUpdateTime:u,memberCount:r,expireTime:s}):(c.latestUpdateTime=u,c.memberCount=r),Oe.d("".concat(this._n,"._updateMemberCountByGroupTips info:"),c),this._onlineMemberCountMap.set(t,c)}}},{key:"_onBroadcastMessage",value:function(e){if(!Ut(e)){for(var t=[],n=e.length,o=null,i=0;i<n;i++){var r=this.restoreMessageFromSimplified(e[i]);Mr[r.event]?((o=this.packMessage(r,r.event)).isBroadcastMessage=!0,this._broadcastMessageIDMap.has(o.ID)||(t.push(o),this._broadcastMessageIDMap.set(o.ID,1))):Oe.w("".concat(this._n,"._onBroadcastMessage unknown event:").concat(r.event))}t.length>0&&this._groupModule.emitOuterEvent(D.MESSAGE_RECEIVED,t)}}},{key:"start",value:function(e){if(this._pollingInstanceMap.has(e)){var t=this._pollingInstanceMap.get(e);t.isRunning()||t.start()}else{var n=new yr({manager:this,groupID:e,onInit:this._updateRequestData.bind(this),onSuccess:this._handleSuccess.bind(this),onFail:this._handleFailure.bind(this)});n.start(),this._pollingInstanceMap.set(e,n),Oe.l("".concat(this._n,".start groupID:").concat(e))}}},{key:"handleJoinResult",value:function(e){var t=this;return this._preCheck().then((function(){var n=e.longPollingKey,o=e.group,i=o.groupID;return t._joinedGroupMap.set(i,o),t._groupModule.updateGroupMap([o]),t._groupModule.deleteUnjoinedAVChatRoom(i),t._groupModule.emitGroupListUpdate(!0,!1),ze(n)?$i({status:Ue,group:o}):Promise.resolve()}))}},{key:"startRunLoop",value:function(e){var t=this;return this.handleJoinResult(e).then((function(){var n=e.longPollingKey,o=e.group,i=e.startSeq,r=void 0===i?0:i,a=o.groupID;return t._pollingRequestInfoMap.set(a,{key:n,startSeq:r}),t.start(a),t._groupModule.isLoggedIn()?$i({status:Ue,group:o}):$i({status:Ue})}))}},{key:"_preCheck",value:function(){if(this._getModule(12).isUnlimitedAVChatRoom())return Promise.resolve();if(!this.hasJoinedAVChatRoom())return Promise.resolve();var e=M(this._joinedGroupMap.entries().next().value,2),t=e[0],n=e[1];if(this._groupModule.isLoggedIn()){if(n.selfInfo.role!==A.GRP_MBR_ROLE_OWNER&&n.ownerID!==this._groupModule.getMyUserID())return this._groupModule.quitGroup(t);this._groupModule.deleteLocalGroupAndConversation(t)}else this._groupModule.deleteLocalGroupAndConversation(t);return this.reset(t),Promise.resolve()}},{key:"joinWithoutAuth",value:function(e){var t=this,n=e.groupID,o="".concat(this._n,".").concat("joinWithoutAuth"),i=new Ai("joinWithoutAuth");return this._groupModule.request({protocolName:ro,requestData:e}).then((function(e){var r=e.data.longPollingKey;if(t._groupModule.probeNetwork().then((function(e){var t=M(e,2);t[0];var o=t[1];i.setNetworkType(o).setMessage("groupID:".concat(n," longPollingKey:").concat(r)).end(!0)})),ze(r))return Xi({code:hi.CANNOT_JOIN_NON_AVCHATROOM_WITHOUT_LOGIN});Oe.l("".concat(o," ok. groupID:").concat(n)),t._getModule(11).setCompleted("".concat(A.CONV_GROUP).concat(n));var a=new ur({groupID:n});return t.startRunLoop({group:a,longPollingKey:r}),Wi({status:Ue})})).catch((function(e){return Oe.e("".concat(o," failed. groupID:").concat(n," error:"),e),t._groupModule.probeNetwork().then((function(t){var o=M(t,2),r=o[0],a=o[1];i.setError(e,r,a).setMessage("groupID:".concat(n)).end(!0)})),Xi(e)})).finally((function(){t._groupModule.getModule(14).reportAtOnce()}))}},{key:"getGroupOnlineMemberCount",value:function(e){var t=this._onlineMemberCountMap.get(e)||{},n=Date.now();return Ut(t)||n-t.lastSyncTime>1e3*t.expireTime&&n-t.latestUpdateTime>1e4&&n-t.lastReqTime>3e3?(t.lastReqTime=n,this._onlineMemberCountMap.set(e,t),this._getGroupOnlineMemberCount(e).then((function(e){return Wi({memberCount:e.memberCount})})).catch((function(e){return Xi(e)}))):$i({memberCount:t.memberCount})}},{key:"_getGroupOnlineMemberCount",value:function(e){var t=this,n="".concat(this._n,".").concat("_getGroupOnlineMemberCount");return this._groupModule.request({protocolName:So,requestData:{groupID:e}}).then((function(o){var i=t._onlineMemberCountMap.get(e)||{},r=o.data,a=r.onlineMemberNum,s=void 0===a?0:a,c=r.expireTime,u=void 0===c?t.DEFAULT_EXPIRE_TIME:c;Oe.l("".concat(n," ok. groupID:").concat(e," memberCount:").concat(s," expireTime:").concat(u));var l=Date.now();return Ut(i)&&(i.lastReqTime=l),t._onlineMemberCountMap.set(e,Object.assign(i,{lastSyncTime:l,latestUpdateTime:l,memberCount:s,expireTime:u})),{memberCount:s}})).catch((function(o){return Oe.w("".concat(n," failed. error:"),o),new Ai("_getGroupOnlineMemberCount").setCode(o.code).setMessage("groupID:".concat(e," error:").concat(JSON.stringify(o))).setNetworkType(t._groupModule.getNetworkType()).end(),Promise.reject(o)}))}},{key:"_getModule",value:function(e){return this._groupModule.getModule(e)}},{key:"setPollingInterval",value:function(e){ze(e)||(He(e)?this._pollingInterval=this.DEFAULT_POLLING_INTERVAL=e:this._pollingInterval=this.DEFAULT_POLLING_INTERVAL=parseInt(e,10))}},{key:"setPollingIntervalPlus",value:function(e){ze(e)||(He(e)?this.DEFAULT_POLLING_INTERVAL_PLUS=e:this.DEFAULT_POLLING_INTERVAL_PLUS=parseInt(e,10))}},{key:"setPollingNoMessageCount",value:function(e){ze(e)||(He(e)?this.DEFAULT_POLLING_NO_MESSAGE_COUNT=e:this.DEFAULT_POLLING_NO_MESSAGE_COUNT=parseInt(e,10))}},{key:"setPollingSimplifiedMessage",value:function(e){ze(e)||"0"!==e&&"1"!==e||(this.DEFAULT_POLLING_SIMPLIFIED_MSG=parseInt(e,10))}},{key:"getPollingInterval",value:function(){return this._pollingInterval}},{key:"onAVChatRoomMemberBanned",value:function(e){var t=e.payload.groupProfile.groupID;Oe.l("".concat(this._n,".onAVChatRoomMemberBanned groupID:").concat(t)),this._groupModule.deleteLocalGroupAndConversation(t),this.reset(t)}},{key:"restartPolling",value:function(){Oe.l("".concat(this._n,".restartPolling count:").concat(this._pollingInstanceMap.size));var e,t=k(this._pollingInstanceMap.values());try{for(t.s();!(e=t.n()).done;){var n=e.value;n.stop(),n.start()}}catch(r){t.e(r)}finally{t.f()}}},{key:"getPollingTimerID",value:function(e){if(!this._pollingInstanceMap.has(e))return-1;var t=this._pollingInstanceMap.get(e).getPollingTimerID();return Oe.l("".concat(this._n,".getPollingTimerID groupID:").concat(e," timerID:").concat(t)),t}},{key:"reset",value:function(e){if(e){Oe.l("".concat(this._n,".reset groupID:").concat(e));var t=this._pollingInstanceMap.get(e);t&&t.stop(),this._pollingInstanceMap.delete(e),this._joinedGroupMap.delete(e),this._pollingRequestInfoMap.delete(e),this._onlineMemberCountMap.delete(e)}else{Oe.l("".concat(this._n,".reset all"));var n,o=k(this._pollingInstanceMap.values());try{for(o.s();!(n=o.n()).done;)n.value.stop()}catch(a){o.e(a)}finally{o.f()}this._pollingInstanceMap.clear(),this._joinedGroupMap.clear(),this._pollingRequestInfoMap.clear(),this._onlineMemberCountMap.clear(),this._broadcastMessageIDMap.clear()}this.sequencesLinkedList.reset(),this.messageIDLinkedList.reset(),this.receivedMessageCount=0,this._reportMessageStackedCount=0,this._pollingInterval=this.DEFAULT_POLLING_INTERVAL=300,this.DEFAULT_POLLING_NO_MESSAGE_COUNT=20,this.DEFAULT_POLLING_INTERVAL_PLUS=2e3,this._pollingNoMessageCount=0}}]),e}(),Cr=function(){function e(t){r(this,e),this._groupModule=t,this._n="GroupSystemNoticeHandler",this.pendencyMap=new Map}return c(e,[{key:"onNewGroupSystemNotice",value:function(e){var t=e.dataList,n=e.isSyncingEnded,o=e.isInstantMessage;Oe.d("".concat(this._n,".onReceiveSystemNotice count:").concat(t.length));var i=this.newSystemNoticeStoredAndSummary({notifiesList:t,isInstantMessage:o}),r=i.eventDataList,a=i.result;r.length>0&&(this._groupModule.getModule(11).onNewMessage({conversationOptionsList:r,isInstantMessage:o}),this._onReceivedGroupSystemNotice({result:a,isInstantMessage:o})),o?a.length>0&&this._groupModule.emitOuterEvent(D.MESSAGE_RECEIVED,a):!0===n&&this._clearGroupSystemNotice()}},{key:"newSystemNoticeStoredAndSummary",value:function(e){var n=e.notifiesList,o=e.isInstantMessage,i=null,r=n.length,a=0,s=[],c={conversationID:A.CONV_SYSTEM,unreadCount:0,type:A.CONV_SYSTEM,subType:null,lastMessage:null};for(a=0;a<r;a++){var u=n[a],l=u.groupProfile,d=l.communityType,f=void 0===d?0:d,p=l.topicID,h=void 0===p?void 0:p,g=u.elements,_=g.topicIDList,v=void 0===_?void 0:_,m=g.operationType;if(!(2!==f||Ut(h)&&Ut(v))){if([17,18,20].includes(m)){this._handleTopicSystemNotice(u);continue}Ut(h)||(u.to=h)}15!==u.elements.operationType&&(u.currentUser=this._groupModule.getMyUserID(),u.conversationType=A.CONV_SYSTEM,u.conversationID=A.CONV_SYSTEM,(i=new Ki(u)).setElement({type:A.MSG_GRP_SYS_NOTICE,content:t(t({},u.elements),{},{groupProfile:t({},u.groupProfile)})}),i.isSystemMessage=!0,(1===i.sequence&&1===i.random||2===i.sequence&&2===i.random)&&(i.sequence=it(),i.random=it(),i.generateMessageID(),Oe.l("".concat(this._n,".newSystemNoticeStoredAndSummary sequence and random maybe duplicated, regenerate. ID:").concat(i.ID))),this._groupModule.getModule(11).pushIntoNoticeResult(s,i)&&(o?c.unreadCount++:i.setIsRead(!0),c.subType=i.conversationSubType))}return c.lastMessage=s[s.length-1],{eventDataList:s.length>0?[c]:[],result:s}}},{key:"_clearGroupSystemNotice",value:function(){var e=this;this._getPendencyList().then((function(t){t.forEach((function(t){e.pendencyMap.set("".concat(t.from,"_").concat(t.groupID,"_").concat(t.to),t)}));var n=e._groupModule.getModule(11).getLocalMessageList(A.CONV_SYSTEM),o=[];n.forEach((function(t){var n=t.payload,i=n.operatorID,r=n.operationType,a=n.groupProfile;if(1===r){var s="".concat(i,"_").concat(a.groupID,"_").concat(a.to),c=e.pendencyMap.get(s);c&&He(c.handled)&&0!==c.handled&&o.push(t)}})),e.deleteGroupSystemNotice({messageList:o})}))}},{key:"deleteGroupSystemNotice",value:function(e){var t=this,n="".concat(this._n,".deleteGroupSystemNotice");return Ye(e.messageList)&&0!==e.messageList.length?(Oe.l("".concat(n," ")+e.messageList.map((function(e){return e.ID}))),this._groupModule.request({protocolName:Co,requestData:{messageListToDelete:e.messageList.map((function(e){return{from:A.CONV_SYSTEM,messageSeq:e.clientSequence,messageRandom:e.random}}))}}).then((function(){Oe.l("".concat(n," ok"));var o=t._groupModule.getModule(11);return e.messageList.forEach((function(e){o.deleteLocalMessage(e)})),Wi()})).catch((function(e){return Oe.e("".concat(n," error:"),e),Xi(e)}))):$i()}},{key:"_getPendencyList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.type,o=void 0===n?void 0:n,i=t.startTime,r=void 0===i?0:i,a=t.limit,s=void 0===a?20:a;return this._groupModule.request({protocolName:Io,requestData:{type:o,startTime:r,limit:s,handleAccount:this._groupModule.getMyUserID()}}).then((function(t){var n=t.data.pendencyList;return 0!==t.data.nextStartTime?e._getPendencyList({startTime:t.data.nextStartTime}).then((function(e){return[].concat(I(n),I(e))})):n}))}},{key:"getGroupApplicationList",value:function(){var e=this;return this._getPendencyList().then((function(t){return e._getPendencyList({type:A.GRP_COMMUNITY}).then((function(n){return t.push.apply(t,I(n)),e._handlePendencyResult(t)})).catch((function(n){return e._handlePendencyResult(t)}))}))}},{key:"_handlePendencyResult",value:function(e){var t=this,n=[];return e.forEach((function(e){t.pendencyMap.set("".concat(e.from,"_").concat(e.groupID,"_").concat(e.to),e),0===e.handled&&n.push({applicant:e.from,applicantNick:e.fromUserNickName,groupName:e.groupName,groupID:e.groupID,authentication:e.authentication,messageKey:e.time,applicationType:e.applicationType,userID:e.userID})})),$i({applicationList:n})}},{key:"_onReceivedGroupSystemNotice",value:function(e){var t=this,n=e.result;e.isInstantMessage&&n.forEach((function(e){switch(e.payload.operationType){case 1:break;case 2:t._onApplyGroupRequestAgreed(e);break;case 3:break;case 4:t._onMemberKicked(e);break;case 5:t._onGroupDismissed(e);break;case 6:break;case 7:t._onInviteGroup(e);break;case 8:t._onQuitGroup(e);break;case 9:t._onSetManager(e);break;case 10:t._onDeleteManager(e);break;case 11:case 12:case 15:break;case 20:t._onMessageRemindTypeSynced(e);break;case 21:t._groupModule.onAVChatRoomMemberBanned(e)}}))}},{key:"_onApplyGroupRequestAgreed",value:function(e){var t=this,n=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(n)||this._groupModule.getGroupProfile({groupID:n}).then((function(e){var n=e.data.group;if(n){t._groupModule.updateGroupMap([n]);var o=!n.isSupportTopic;t._groupModule.emitGroupListUpdate(!0,o)}}))}},{key:"_onMemberKicked",value:function(e){var t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t)}},{key:"_onGroupDismissed",value:function(e){var t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t);var n=this._groupModule._AVChatRoomHandler;n&&n.checkJoinedAVChatRoomByID(t)&&n.reset(t)}},{key:"_onInviteGroup",value:function(e){var t=this,n=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(n)||this._groupModule.getGroupProfile({groupID:n}).then((function(e){var n=e.data.group;n&&(t._groupModule.updateGroupMap([n]),t._groupModule.emitGroupListUpdate())}))}},{key:"_onQuitGroup",value:function(e){var t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t)}},{key:"_onSetManager",value:function(e){var t=e.payload.groupProfile,n=t.to,o=t.groupID,i=this._groupModule.getModule(9).getLocalGroupMemberInfo(o,n);i&&i.updateRole(A.GRP_MBR_ROLE_ADMIN)}},{key:"_onDeleteManager",value:function(e){var t=e.payload.groupProfile,n=t.to,o=t.groupID,i=this._groupModule.getModule(9).getLocalGroupMemberInfo(o,n);i&&i.updateRole(A.GRP_MBR_ROLE_MEMBER)}},{key:"_onMessageRemindTypeSynced",value:function(e){var t=e.payload.groupProfile.groupID,n=e.payload.messageRemindType;this._groupModule.getModule(11).onGroupMessageRemindTypeSynced({groupID:t,messageRemindType:n})}},{key:"_handleTopicSystemNotice",value:function(e){var t=e.groupProfile,n=t.groupID,o=t.topicID,i=e.elements,r=i.operationType,a=i.topicIDList,s=i.messageRemindType,c=this._groupModule.getModule(10);17===r?c.onTopicCreated({groupID:n,topicID:o}):18===r?c.onTopicDeleted({groupID:n,topicIDList:a}):20===r&&c.onTopicMessageRemindTypeUpdated({groupID:n,topicID:o,messageRemindType:s})}},{key:"reset",value:function(){this.pendencyMap.clear()}}]),e}(),br=["relayFlag"],Tr=function(e){l(o,e);var n=y(o);function o(e){var t;return r(this,o),(t=n.call(this,e))._n="GroupModule",t._commonGroupHandler=null,t._AVChatRoomHandler=null,t._groupSystemNoticeHandler=null,t._commonGroupHandler=new _r(v(t)),t._groupAttributesHandler=new vr(v(t)),t._groupCountersHandler=new mr(v(t)),t._AVChatRoomHandler=new Ir(v(t)),t._groupTipsHandler=new gr(v(t)),t._groupSystemNoticeHandler=new Cr(v(t)),t.groupMap=new Map,t._unjoinedAVChatRoomList=new Map,t._receiptDetailCompleteMap=new Map,t.getInnerEmitterInstance().on(er,t._onCloudConfigUpdated,v(t)),t}return c(o,[{key:"_onCloudConfigUpdated",value:function(){var e=this.getCloudConfig("polling_interval"),t=this.getCloudConfig("polling_interval_plus"),n=this.getCloudConfig("polling_no_msg_count"),o=this.getCloudConfig("polling_simplified_msg");this._AVChatRoomHandler&&(Oe.l("".concat(this._n,"._onCloudConfigUpdated pollingInterval:").concat(e)+" pollingIntervalPlus:".concat(t," pollingNoMessageCount:").concat(n)+" pollingSimplifiedMessage:".concat(o)),this._AVChatRoomHandler.setPollingInterval(e),this._AVChatRoomHandler.setPollingIntervalPlus(t),this._AVChatRoomHandler.setPollingNoMessageCount(n),this._AVChatRoomHandler.setPollingSimplifiedMessage(o))}},{key:"onCheckTimer",value:function(e){this.isLoggedIn()&&(this._commonGroupHandler.onCheckTimer(e),this._groupTipsHandler.onCheckTimer(e))}},{key:"guardForAVChatRoom",value:function(e){var t=this;if(e.conversationType===A.CONV_GROUP){var n=ht(e.to)?At(e.to):e.to;return this.hasLocalGroup(n)?$i():this.getGroupProfile({groupID:n}).then((function(o){var i=o.data.group.type;if(Oe.l("".concat(t._n,".guardForAVChatRoom. groupID:").concat(n," type:").concat(i)),i===A.GRP_AVCHATROOM){var r=hi.MESSAGE_SEND_FAIL_NOT_IN_AVCHATROOM;return Xi(new Yi({code:r,message:t.getErrorMessage(r,e.from,n),data:{message:e}}))}return $i()}))}return $i()}},{key:"checkJoinedAVChatRoomByID",value:function(e){return!!this._AVChatRoomHandler&&this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)}},{key:"onNewGroupMessage",value:function(e){this._commonGroupHandler&&this._commonGroupHandler.onNewGroupMessage(e)}},{key:"updateNextMessageSeq",value:function(e){var t=this;if(Ye(e)){var n=this.getModule(10);e.forEach((function(e){var o=e.conversationID.replace(A.CONV_GROUP,"");ht(o)&&n.updateLastMessage(o,e.lastMessage),t.groupMap.has(o)&&(t.groupMap.get(o).nextMessageSeq=e.lastMessage.sequence+1)}))}}},{key:"onNewGroupTips",value:function(e){this._groupTipsHandler&&this._groupTipsHandler.onNewGroupTips(e)}},{key:"onGroupMessageRevoked",value:function(e){this._commonGroupHandler&&this._commonGroupHandler.onGroupMessageRevoked(e)}},{key:"onNewGroupSystemNotice",value:function(e){this._groupSystemNoticeHandler&&this._groupSystemNoticeHandler.onNewGroupSystemNotice(e)}},{key:"onGroupMessageReadNotice",value:function(e){var t=this;e.dataList.forEach((function(e){var n=e.elements.groupMessageReadNotice;if(!ze(n)){var o=t.getModule(11);n.forEach((function(e){var n=e.groupID,i=e.topicID,r=void 0===i?void 0:i,a=e.lastMessageSeq;Oe.d("".concat(t._n,".onGroupMessageReadNotice groupID:").concat(n," lastMessageSeq:").concat(a));var s="".concat(A.CONV_GROUP).concat(n),c=!0;Ut(r)||(s="".concat(A.CONV_GROUP).concat(r),c=!1),o.updateIsReadAfterReadReport({conversationID:s,lastMessageSeq:a}),o.updateUnreadCount(s,c),o.clearGroupAtInfoList(s,c)}))}}))}},{key:"onReadReceiptList",value:function(e){var t=this;Oe.d("".concat(this._n,".onReadReceiptList options:"),JSON.stringify(e)),e.dataList.forEach((function(e){var n=e.groupProfile,o=e.elements,i=n.groupID,r=t.getModule(11),a=o.readReceiptList;r.updateReadReceiptInfo({groupID:i,readReceiptList:a})}))}},{key:"onGroupMessageModified",value:function(e){Oe.d("".concat(this._n,".onGroupMessageModified options:"),JSON.stringify(e));var n=this.getModule(11);e.dataList.forEach((function(e){n.onMessageModified(t(t({},e),{},{conversationType:A.CONV_GROUP,to:e.topicID?e.topicID:e.groupID}))}))}},{key:"deleteGroupSystemNotice",value:function(e){this._groupSystemNoticeHandler&&this._groupSystemNoticeHandler.deleteGroupSystemNotice(e)}},{key:"initGroupMap",value:function(e){this.groupMap.set(e.groupID,new ur(e))}},{key:"deleteGroup",value:function(e){this.groupMap.delete(e)}},{key:"updateGroupMap",value:function(e){var t,n=this,o=this.getModule(11);e.forEach((function(e){t=e.groupID,n.groupMap.has(t)?n.groupMap.get(t).updateGroup(e):(n.groupMap.set(t,new ur(e)),o.deleteGroupRomaingMessageInfo(t))}));var i,r=this.getMyUserID(),a=k(this.groupMap);try{for(a.s();!(i=a.n()).done;){var s=M(i.value,2)[1];s.selfInfo.userID=r,"Owner"===s.selfInfo.role&&(s.ownerID=r)}}catch(d){a.e(d)}finally{a.f()}this._setStorageGroupList()}},{key:"getStorageGroupList",value:function(){return this.getModule(13).getItem("groupMap")}},{key:"_setStorageGroupList",value:function(){var e=this.getLocalGroupList().filter((function(e){var t=e.type;return!ft(t)})).filter((function(e){return!e.isSupportTopic})).slice(0,20).map((function(e){return{groupID:e.groupID,name:e.name,avatar:e.avatar,type:e.type}}));this.getModule(13).setItem("groupMap",e)}},{key:"getGroupMap",value:function(){return this.groupMap}},{key:"getLocalGroupList",value:function(){return I(this.groupMap.values())}},{key:"getLocalGroupProfile",value:function(e){return this.groupMap.get(e)}},{key:"sortLocalGroupList",value:function(){var e=I(this.groupMap).filter((function(e){var t=M(e,2);return t[0],!Ut(t[1].lastMessage)}));e.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime})),this.groupMap=new Map(I(e))}},{key:"updateGroupLastMessage",value:function(e){this._commonGroupHandler&&this._commonGroupHandler.handleUpdateGroupLastMessage(e)}},{key:"emitGroupListUpdate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getLocalGroupList();if(e&&this.emitOuterEvent(D.GROUP_LIST_UPDATED),t){var o=JSON.parse(JSON.stringify(n)),i=this.getModule(11);i.updateConversationGroupProfile(o)}}},{key:"patchGroupMessageRemindType",value:function(){var e=this.getLocalGroupList(),t=this.getModule(11),n=0;e.forEach((function(e){!0===t.patchMessageRemindType({ID:e.groupID,isC2CConversation:!1,messageRemindType:e.selfInfo.messageRemindType})&&(n+=1)})),Oe.l("".concat(this._n,".patchGroupMessageRemindType count:").concat(n))}},{key:"recomputeUnreadCount",value:function(){var e=this.getLocalGroupList(),t=this.getModule(11);e.forEach((function(e){var n=e.groupID,o=e.selfInfo,i=o.excludedUnreadSequenceList,r=o.readedSequence;if(Ye(i)){var a=0;i.forEach((function(t){t>=r&&t<=e.nextMessageSeq-1&&(a+=1)})),a>=1&&t.recomputeGroupUnreadCount({conversationID:"".concat(A.CONV_GROUP).concat(n),count:a})}}))}},{key:"getMyNameCardByGroupID",value:function(e){var t=this.getLocalGroupProfile(e);return t?t.selfInfo.nameCard:""}},{key:"isPagingGetCompleted",value:function(){return!!this._commonGroupHandler&&this._commonGroupHandler.isPagingGetCompleted()}},{key:"getGroupList",value:function(e){return this._commonGroupHandler?this._commonGroupHandler.getGroupList(e):$i()}},{key:"getGroupProfile",value:function(e){var t=this,n="".concat(this._n,".").concat("getGroupProfile"),o=new Ai("getGroupProfile"),i=e.groupID,r=e.groupCustomFieldFilter;Oe.l("".concat(n," groupID:").concat(i));var a={groupIDList:[i],responseFilter:{groupBaseInfoFilter:["Type","Name","Introduction","Notification","FaceUrl","Owner_Account","CreateTime","InfoSeq","LastInfoTime","LastMsgTime","MemberNum","MaxMemberNum","ApplyJoinOption","NextMsgSeq","ShutUpAllMember","InviteJoinOption"],groupCustomFieldFilter:r,memberInfoFilter:["Role","JoinTime","MsgSeq","MsgFlag","NameCard"]}};return this.getGroupProfileAdvance(a).then((function(e){var r,a=e.data,s=a.successGroupList,c=a.failureGroupList;return Oe.l("".concat(n," ok")),c.length>0?Xi(c[0]):(ft(s[0].type)&&!t.hasLocalGroup(i)?r=new ur(s[0]):(t.updateGroupMap(s),r=t.getLocalGroupProfile(i)),r.isSupportTopic||t.getModule(11).updateConversationGroupProfile([r]),o.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(i," type:").concat(r.type," muteAllMembers:").concat(r.muteAllMembers," ownerID:").concat(r.ownerID)).end(),Wi({group:r}))})).catch((function(i){return t.probeNetwork().then((function(t){var n=M(t,2),r=n[0],a=n[1];o.setError(i,r,a).setMessage("groupID:".concat(e.groupID)).end()})),Oe.e("".concat(n," failed. error:"),i),Xi(i)}))}},{key:"getGroupProfileAdvance",value:function(e){var n="".concat(this._n,".getGroupProfileAdvance"),o=e.groupIDList;Ye(o)&&o.length>50&&(this.outputWarning("GetGroupProfileLimit"),o.length=50);var i=[],r=[];o.forEach((function(e){pt({groupID:e})?r.push(e):i.push(e)}));var a=[];if(i.length>0){var s=this._getGroupProfileAdvance(t(t({},e),{},{groupIDList:i}));a.push(s)}if(r.length>0){var c=this._getGroupProfileAdvance(t(t({},e),{},{groupIDList:r,relayFlag:i.length>0}));a.push(c)}return Promise.all(a).then((function(e){var t=[],n=[];return e.forEach((function(e){t.push.apply(t,I(e.successGroupList)),n.push.apply(n,I(e.failureGroupList))})),Wi({successGroupList:t,failureGroupList:n})})).catch((function(e){return Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"_getGroupProfileAdvance",value:function(e){var t=this,n=e.relayFlag,o=void 0!==n&&n,i=_(e,br);return this.request({protocolName:eo,requestData:i}).then((function(e){Oe.l("".concat(t._n,"._getGroupProfileAdvance ok."));var n=e.data.groups;return{successGroupList:n.filter((function(e){return ze(e.errorCode)||0===e.errorCode})),failureGroupList:n.filter((function(e){return e.errorCode&&0!==e.errorCode})).map((function(e){return new Yi({code:e.errorCode,message:e.errorInfo,data:{groupID:e.groupID}})}))}})).catch((function(t){return o&&pt({groupID:e.groupIDList[0]})?{successGroupList:[],failureGroupList:[]}:Xi(t)}))}},{key:"createGroup",value:function(e){var n=this,o="".concat(this._n,".").concat("createGroup"),i=e.type,r=e.groupID;if(e.name&&!1===this._filterProfanity("name",e))return Xi({code:hi.PROFANITY_FOUND});if(e.introduction&&!1===this._filterProfanity("introduction",e))return Xi({code:hi.PROFANITY_FOUND});if(e.notification&&!1===this._filterProfanity("notification",e))return Xi({code:hi.PROFANITY_FOUND});if(!["Public","Private","ChatRoom","AVChatRoom","Community"].includes(i))return Xi({code:hi.ILLEGAL_GROUP_TYPE});if(!pt({type:i})){if(!Ut(r)&&pt({groupID:r}))return Xi({code:hi.ILLEGAL_GROUP_ID});e.isSupportTopic=void 0}if(ft(i)&&!ze(e.memberList)&&e.memberList.length>0&&(e.memberList=void 0),this._canIUseJoinOption(i)||ze(e.joinOption)||(e.joinOption=void 0),pt({type:i})){if(!Ut(r)&&!pt({groupID:r}))return Xi({code:hi.ILLEGAL_GROUP_ID});e.isSupportTopic=!0===e.isSupportTopic?1:0}var a=new Ai("createGroup");Oe.l("".concat(o," options:"),e);var s=null,c=[];return this.request({protocolName:to,requestData:t(t({},e),{},{ownerID:this.getMyUserID(),webPushFlag:1})}).then((function(i){var r=i.data,u=r.groupID,l=r.overLimitUserIDList,d=void 0===l?[]:l;if(s=u,c=d,a.setNetworkType(n.getNetworkType()).setMessage("groupType:".concat(e.type," groupID:").concat(u," overLimitUserIDList=").concat(d)).end(),Oe.l("".concat(o," ok groupID:").concat(u," overLimitUserIDList:"),d),e.type===A.GRP_AVCHATROOM)return n.getGroupProfile({groupID:u});if(e.type===A.GRP_COMMUNITY&&1===e.isSupportTopic)return n.getGroupProfile({groupID:u});Ut(e.memberList)||Ut(d)||(e.memberList=e.memberList.filter((function(e){return-1===d.indexOf(e.userID)}))),n.updateGroupMap([t(t({},e),{},{groupID:u})]);var f=n.getModule(2),p=f.createCustomMessage({to:u,conversationType:A.CONV_GROUP,payload:{data:"group_create",extension:n.isIntl()?"".concat(n.getMyUserID()," created a group"):"".concat(n.getMyUserID(),"创建群组")}});return f.sendMessageInstance(p),n.emitGroupListUpdate(),n.getGroupProfile({groupID:u})})).then((function(e){var t=e.data.group,n=t.selfInfo,o=n.nameCard,i=n.joinTime;return t.updateSelfInfo({nameCard:o,joinTime:i,messageRemindType:A.MSG_REMIND_ACPT_AND_NOTE,role:A.GRP_MBR_ROLE_OWNER}),Wi({group:t,overLimitUserIDList:c})})).catch((function(i){if(a.setMessage("groupType:".concat(e.type)),n.probeNetwork().then((function(e){var t=M(e,2),n=t[0],o=t[1];a.setError(i,n,o).end()})),10010===i.code||10007===i.code){n.updateGroupMap([t(t({},e),{},{groupID:s})]);var r=n.getLocalGroupProfile(s);return Oe.l("".concat(o," success, but failed to get group profile.")),Wi({group:r,overLimitUserIDList:c})}return Oe.e("".concat(o," failed. error:"),i),Xi(i)}))}},{key:"dismissGroup",value:function(e){var t=this,n="".concat(this._n,".").concat("dismissGroup");if(this.hasLocalGroup(e)&&this.getLocalGroupProfile(e).type===A.GRP_WORK)return Xi(new Yi({code:hi.CANNOT_DISMISS_WORK}));var o=new Ai("dismissGroup");return o.setMessage("groupID:".concat(e)),Oe.l("".concat(n," groupID:").concat(e)),this.request({protocolName:no,requestData:{groupID:e}}).then((function(){return o.setNetworkType(t.getNetworkType()).end(),Oe.l("".concat(n," ok")),t.deleteLocalGroupAndConversation(e),t.checkJoinedAVChatRoomByID(e)&&t._AVChatRoomHandler.reset(e),t._groupAttributesHandler.deleteLocalGroupAttributes(e),Wi({groupID:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),i=n[0],r=n[1];o.setError(e,i,r).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"updateGroupProfile",value:function(e){var t=this,n="".concat(this._n,".").concat("updateGroupProfile");if(this.hasLocalGroup(e.groupID)){var o=this.getLocalGroupProfile(e.groupID).type;this._canIUseJoinOption(o)||ze(e.joinOption)||(Oe.w("".concat(n," joinOption is unavailable for Work/Meeting/AVChatRoom")),e.joinOption=void 0)}if(ze(e.muteAllMembers)||(e.muteAllMembers?e.muteAllMembers="On":e.muteAllMembers="Off"),e.name&&!1===this._filterProfanity("name",e))return Xi({code:hi.PROFANITY_FOUND});if(e.introduction&&!1===this._filterProfanity("introduction",e))return Xi({code:hi.PROFANITY_FOUND});if(e.notification&&!1===this._filterProfanity("notification",e))return Xi({code:hi.PROFANITY_FOUND});var i=new Ai("updateGroupProfile");return i.setMessage(JSON.stringify(e)),Oe.l("".concat(n," groupID:").concat(e.groupID)),this.request({protocolName:oo,requestData:e}).then((function(){return i.setNetworkType(t.getNetworkType()).end(),Oe.l("".concat(n," ok")),t.hasLocalGroup(e.groupID)&&(t.groupMap.get(e.groupID).updateGroup(e),t._setStorageGroupList()),Wi({group:t.groupMap.get(e.groupID)})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],r=n[1];i.setError(e,o,r).end()})),Oe.l("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"_filterProfanity",value:function(e,t){var n=this.getModule(29);if(!n)return!0;var o=n.filterText(t[e],F),i=o.isAllowedToSend,r=o.modifiedText;return!0===i&&(t[e]=r,!0)}},{key:"joinGroup",value:function(e){var t=this,n=e.groupID,o=e.type,i="".concat(this._n,".joinGroup");if(o===A.GRP_WORK)return Xi({code:hi.CANNOT_JOIN_WORK});if(this.deleteUnjoinedAVChatRoom(n),this.hasLocalGroup(n)){if(!this.isLoggedIn())return $i({status:A.JOIN_STATUS_ALREADY_IN_GROUP});var r=new Ai("applyJoinGroup");return this.getGroupProfile({groupID:n}).then((function(){return r.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(n," joinedStatus:").concat(A.JOIN_STATUS_ALREADY_IN_GROUP)).end(),$i({status:A.JOIN_STATUS_ALREADY_IN_GROUP})})).catch((function(o){return r.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(n," unjoined")).end(),Oe.w("".concat(i," ").concat(n," was unjoined, now join!")),t.groupMap.delete(n),t.applyJoinGroup(e)}))}return Oe.l("".concat(i," groupID:").concat(n)),this.isLoggedIn()?this.applyJoinGroup(e):this._AVChatRoomHandler.joinWithoutAuth(e)}},{key:"applyJoinGroup",value:function(e){var n=this,o="".concat(this._n,".").concat("applyJoinGroup"),i=e.groupID;if(!Ut(e.applyMessage)&&!1===this._filterProfanity("applyMessage",e))return Xi({code:hi.PROFANITY_FOUND});var r=new Ai("applyJoinGroup"),a=t({},e),s=this.canIUse(x.AVCHATROOM_HISTORY_MSG);return s&&(a.historyMessageFlag=1),this.getModule(11).deleteTopicRoamingMessageInfo(i),this.request({protocolName:io,requestData:a}).then((function(e){var t=e.data,a=t.joinedStatus,c=t.longPollingKey,u=t.startSeq,l=t.avChatRoomFlag,d=t.avChatRoomKey,f=t.messageList,p="groupID:".concat(i," joinedStatus:").concat(a," longPollingKey:").concat(c," startSeq:").concat(u)+" avChatRoomFlag:".concat(l," canGetAVChatRoomHistoryMessage:").concat(s,",")+" history message count:".concat(Ut(f)?0:f.length);switch(r.setNetworkType(n.getNetworkType()).setMessage("".concat(p)).end(),Oe.l("".concat(o," ok. ").concat(p)),a){case xe:return Wi({status:xe});case Ue:return n.getGroupProfile({groupID:i}).then((function(e){var t=e.data.group;return n._handleJoinResult({group:t,avChatRoomFlag:l,longPollingKey:c,startSeq:u,avChatRoomKey:d,messageList:f})})).catch((function(){var e=new ur({groupID:i});return n._handleJoinResult({group:e,avChatRoomFlag:l,longPollingKey:c,startSeq:u,avChatRoomKey:d,messageList:f})}));default:var h=new Yi({code:hi.JOIN_GROUP_FAIL});return Oe.e("".concat(o," failed. error:"),h),Xi(h)}})).catch((function(e){return r.setMessage("groupID:".concat(i)),n.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];r.setError(e,o,i).end()})),Oe.e("".concat(o," failed. error:"),e),Xi(e)}))}},{key:"_handleJoinResult",value:function(e){var t,n=this,o=e.group,i=e.avChatRoomFlag,r=e.longPollingKey,a=e.startSeq,s=e.avChatRoomKey,c=e.messageList,u=o.groupID;return 1===i?(this.getModule(11).setCompleted("".concat(A.CONV_GROUP).concat(u)),this._groupAttributesHandler.initGroupAttributesCache({groupID:u,avChatRoomKey:s}),this._groupCountersHandler.initGroupCountersCache({groupID:u,avChatRoomKey:s}),(t=ze(r)?this._AVChatRoomHandler.handleJoinResult({group:o}):this._AVChatRoomHandler.startRunLoop({group:o,longPollingKey:r,startSeq:a})).then((function(){n._onAVChatRoomHistoryMessage(c)})),t):(this.emitGroupListUpdate(!0,!1),Wi({status:Ue,group:o}))}},{key:"quitGroup",value:function(e){var t=this,n="".concat(this._n,".").concat("quitGroup");Oe.l("".concat(n," groupID:").concat(e));var o=this.checkJoinedAVChatRoomByID(e);if(!o&&!this.hasLocalGroup(e))return Xi({code:hi.MEMBER_NOT_IN_GROUP});if(o&&!this.isLoggedIn())return Oe.l("".concat(n," anonymously ok. groupID:").concat(e)),this.deleteLocalGroupAndConversation(e),this._AVChatRoomHandler.reset(e),$i({groupID:e});var i=new Ai("quitGroup");return i.setMessage("groupID:".concat(e)),this.request({protocolName:ao,requestData:{groupID:e}}).then((function(){return i.setNetworkType(t.getNetworkType()).end(),Oe.l("".concat(n," ok")),t.deleteLocalGroupAndConversation(e),o&&t._AVChatRoomHandler.reset(e),t._groupAttributesHandler.deleteLocalGroupAttributes(e),Wi({groupID:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],r=n[1];i.setError(e,o,r).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"searchGroupByID",value:function(e){var t=this,n="".concat(this._n,".").concat("searchGroupByID"),o={groupIDList:[e]},i=new Ai("searchGroupByID");return i.setMessage("groupID:".concat(e)),Oe.l("".concat(n," groupID:").concat(e)),this.request({protocolName:so,requestData:o}).then((function(e){var o=e.data.groupProfile;if(0!==o[0].errorCode)throw new Yi({code:o[0].errorCode,message:o[0].errorInfo});return i.setNetworkType(t.getNetworkType()).end(),Oe.l("".concat(n," ok")),Wi({group:new ur(o[0])})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],r=n[1];i.setError(e,o,r).end()})),Oe.w("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"changeGroupOwner",value:function(e){var t=this,n="".concat(this._n,".").concat("changeGroupOwner");if(this.hasLocalGroup(e.groupID)&&this.getLocalGroupProfile(e.groupID).type===A.GRP_AVCHATROOM)return Xi({code:hi.CANNOT_CHANGE_OWNER_IN_AVCHATROOM});if(e.newOwnerID===this.getMyUserID())return Xi({code:hi.CANNOT_CHANGE_OWNER_TO_SELF});var o=new Ai("changeGroupOwner");return o.setMessage("groupID:".concat(e.groupID," newOwnerID:").concat(e.newOwnerID)),Oe.l("".concat(n," groupID:").concat(e.groupID)),this.request({protocolName:co,requestData:e}).then((function(){o.setNetworkType(t.getNetworkType()).end(),Oe.l("".concat(n," ok"));var i=e.groupID,r=e.newOwnerID;t.groupMap.get(i).ownerID=r;var a=t.getModule(9).getLocalGroupMemberList(i);if(a instanceof Map){var s=a.get(t.getMyUserID());ze(s)||(s.updateRole("Member"),t.groupMap.get(i).selfInfo.role="Member");var c=a.get(r);ze(c)||c.updateRole("Owner")}return t.emitGroupListUpdate(!0,!1),Wi({group:t.groupMap.get(i)})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),i=n[0],r=n[1];o.setError(e,i,r).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"getGroupApplicationList",value:function(){return this._groupSystemNoticeHandler.getGroupApplicationList()}},{key:"handleGroupApplication",value:function(e){var t,n,o,i,r,a=this,s="".concat(this._n,".").concat("handleGroupApplication"),c=e.handleAction,u=e.handleMessage,l=e.message,d=e.application;l?(t=l.payload.operatorID,n=l.payload.groupProfile.groupID,o=l.payload.authentication,i=l.payload.messageKey):d&&(t=d.applicant,n=d.groupID,o=d.authentication,i=d.messageKey);var f=uo;d&&2===d.applicationType&&(f=lo,r=d.userID);var p=new Ai("handleGroupApplication");return p.setMessage("groupID:".concat(n)),Oe.l("".concat(s," groupID:").concat(n)),this.request({protocolName:f,requestData:{handleAction:c,handleMessage:u,applicant:t,invitee:r,groupID:n,authentication:o,messageKey:i}}).then((function(){return p.setNetworkType(a.getNetworkType()).end(),Oe.l("".concat(s," ok")),l&&a._groupSystemNoticeHandler.deleteGroupSystemNotice({messageList:[e.message]}),Wi({group:a.getLocalGroupProfile(n)})})).catch((function(e){return a.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];p.setError(e,o,i).end()})),Oe.e("".concat(s," failed. error"),e),Xi(e)}))}},{key:"handleGroupInvitation",value:function(e){var n=this,o="".concat(this._n,".").concat("handleGroupInvitation"),i=e.message.payload,r=i.groupProfile.groupID,a=i.authentication,s=i.messageKey,c=i.operatorID,u=e.handleAction,l=new Ai("handleGroupInvitation");return l.setMessage("groupID:".concat(r," inviter:").concat(c," handleAction:").concat(u)),Oe.l("".concat(o," groupID:").concat(r," inviter:").concat(c," handleAction:").concat(u)),this.request({protocolName:fo,requestData:t(t({},e),{},{inviter:c,groupID:r,authentication:a,messageKey:s})}).then((function(){return l.setNetworkType(n.getNetworkType()).end(),Oe.l("".concat(o," ok")),n._groupSystemNoticeHandler.deleteGroupSystemNotice({messageList:[e.message]}),Wi({group:n.getLocalGroupProfile(r)})})).catch((function(e){return n.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];l.setError(e,o,i).end()})),Oe.e("".concat(o," failed. error"),e),Xi(e)}))}},{key:"getGroupOnlineMemberCount",value:function(e){return this._AVChatRoomHandler?this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)?this._AVChatRoomHandler.getGroupOnlineMemberCount(e):$i({memberCount:0}):Xi({code:hi.CANNOT_FIND_MODULE})}},{key:"hasLocalGroup",value:function(e){return this.groupMap.has(e)}},{key:"deleteLocalGroupAndConversation",value:function(e){var t=this.checkJoinedAVChatRoomByID(e);if(Oe.l("".concat(this._n,".deleteLocalGroupAndConversation isJoinedAVChatRoom:").concat(t)),t&&this.getModule(11).deleteLocalConversation("".concat(A.CONV_GROUP).concat(e)),pt({groupID:e})){var n=this.getLocalGroupProfile(e);n&&!0===n.isSupportTopic&&this.getModule(10).deleteTopicListInCommunity(e)}this._deleteLocalGroup(e),this.emitGroupListUpdate(!0,!1)}},{key:"_deleteLocalGroup",value:function(e){this.groupMap.delete(e),this.getModule(9).deleteGroupMemberList(e),this._setStorageGroupList()}},{key:"sendMessage",value:function(e,t){if(Ye(e._receiverList)&&e._receiverList.length>0&&!this.canIUse(x.MSG_TO_SPECIFIED_GRP_MBR))return Xi({code:hi.CANNOT_USE_COMMERCIAL_ABILITY});var n=this.createGroupMessagePack(e,t);return this.request(n)}},{key:"createGroupMessagePack",value:function(e,t){var n=null;t&&t.offlinePushInfo&&(n=t.offlinePushInfo);var o="";je(e.cloudCustomData)&&e.cloudCustomData.length>0&&(o=e.cloudCustomData);var i=[];if(We(t)&&We(t.messageControlInfo)){var r=t.messageControlInfo,a=r.excludedFromUnreadCount,s=r.excludedFromLastMessage,c=r.excludedFromContentModeration;!0===a&&i.push("NoUnread"),!0===s&&i.push("NoLastMsg"),!0===c&&i.push("NoMsgCheck")}var u=void 0;Ye(e._receiverList)&&e._receiverList.length>0&&(u=e._receiverList,e._receiverList.length>50&&(u=e._receiverList.slice(0,50),this.outputWarning("ReceiverListLimit")));var l=this.isOnlineMessage(e,t)?1:0,d=e.getGroupAtInfoList(),f={fromAccount:this.getMyUserID(),groupID:e.to,msgBody:e.getElements(),cloudCustomData:o,random:e.random,priority:e.priority,clientSequence:e.clientSequence,groupAtInfo:e.type!==A.MSG_TEXT||Ut(d)?void 0:d,onlineOnlyFlag:l,clientTime:e.clientTime,offlinePushInfo:n?{pushFlag:!0===n.disablePush?1:0,title:n.title||"",desc:n.description||"",ext:n.extension||"",apnsInfo:{badgeMode:!0===n.ignoreIOSBadge?1:0,isVoipPush:this._isVoipPush(n)},androidInfo:{OPPOChannelID:n.androidOPPOChannelID||""}}:void 0,messageControlInfo:0===l?i:void 0,needReadReceipt:!0!==e.needReadReceipt||this.isMessageFromOrToAVChatroom(e.to)?0:1,receiverList:u,isSupportExtension:!0===e.isSupportExtension?1:0};return ht(e.to)&&(f.groupID=At(e.to),f.topicID=e.to),{protocolName:Sn,tjgID:this.generateTjgID(e),requestData:f}}},{key:"_isVoipPush",value:function(e){var t=void 0;return ze(e.disableVoipPush)||(t=!1===e.disableVoipPush?1:0),t}},{key:"revokeMessage",value:function(e){var t={groupID:e.to,msgSeqList:[{msgSeq:e.sequence}]};return ht(e.to)&&(t.groupID=At(e.to),t.topicID=e.to),this.request({protocolName:po,requestData:t})}},{key:"deleteMessage",value:function(e){var t=e.to,n=e.keyList;Oe.l("".concat(this._n,".deleteMessage groupID:").concat(t," count:").concat(n.length));var o={groupID:t,deleter:this.getMyUserID(),keyList:n};return ht(t)&&(o.groupID=At(t),o.topicID=t),this.request({protocolName:Eo,requestData:o})}},{key:"modifyRemoteMessage",value:function(e){var t=e.to,n=e.sequence,o=e.payload,i=e.type,r=e.version,a=void 0===r?0:r,s=e.cloudCustomData,c=t,u=void 0;ht(t)&&(c=At(t),u=t);var l=void 0;return Ot(i)&&(l=[]).push({type:i,content:o}),this.request({protocolName:ko,requestData:{groupID:c,topicID:u,sequence:n,version:a,elements:l,cloudCustomData:s}})}},{key:"getRoamingMessage",value:function(e){var t=this,n="".concat(this._n,".getRoamingMessage"),o=e.conversationID,i=e.groupID,r=e.sequence,a=new Ai("getGroupRoamingMessages"),s=0,c=void 0;return ht(i)&&(i=At(c=i)),this._computeLastSequence({groupID:i,topicID:c,sequence:r}).then((function(e){return s=e,Oe.l("".concat(n," groupID:").concat(i," startSequence:").concat(s)),t.request({protocolName:_o,requestData:{groupID:i,count:21,sequence:s,topicID:c}})})).then((function(e){var r=e.data,u=r.messageList,l=r.complete,d=r.invisibleSequenceList,f=void 0===d?[]:d;ze(u)?Oe.l("".concat(n," ok. complete:").concat(l," but messageList is undefined!")):Oe.l("".concat(n," ok. complete:").concat(l," count:").concat(u.length));var p=t._getMinSequence(f,u)-1;a.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(i," topicID:").concat(c," startSequence:").concat(s," complete:").concat(l," nextSequence:").concat(p)).end();var h=t.getModule(11),g=[];return Ut(u)||(h.updateRoamingMessageSequence(o,p),g=h.onRoamingMessage(u,o),h.updateIsRead(o),h.patchConversationLastMessage(o)),(2===l||p<=1)&&(h.setCompleted(o),p=""),Oe.l("".concat(n," nextReqID:").concat(p,", stored message count:").concat(g.length,", invisible sequence count:").concat(f.length)),{nextReqID:p+"",storedMessageList:g}})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],r=n[1];a.setError(e,o,r).setMessage("groupID:".concat(i," topicID:").concat(c," startSequence:").concat(s)).end()})),Oe.w("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"_getGroupIDOfMessage",value:function(e){return e.conversationID.replace(A.CONV_GROUP,"")}},{key:"_getMinSequence",value:function(e,t){var n=0;Ut(t)||(n=t[t.length-1].sequence);var o=0;return Ut(e)||(o=e[e.length-1]),Oe.l("".concat(this._n,"._getMinSequence minVisibleSequence:").concat(n," minInvisibleSequence:").concat(o)),o>0&&o<n?o:n}},{key:"getReadReceiptList",value:function(e){var t=this,n="".concat(this._n,".").concat("getReadReceiptList"),o=this._getGroupIDOfMessage(e[0]),i=this.getMyUserID(),r=e.filter((function(e){return e.from===i&&!0===e.needReadReceipt})).map((function(e){return{sequence:e.sequence}}));if(Oe.l("".concat(n," groupID:").concat(o," sequenceList:").concat(JSON.stringify(r))),0===r.length)return $i({messageList:e});var a=new Ai("getReadReceiptList");return a.setMessage("groupID:".concat(o)),this.request({protocolName:vo,requestData:{groupID:o,sequenceList:r}}).then((function(t){a.end(),Oe.l("".concat(n," ok"));var o=t.data.readReceiptList;return Ye(o)&&o.forEach((function(t){e.forEach((function(e){0===t.code&&t.sequence===e.sequence&&(e.readReceiptInfo.readCount=t.readCount,e.readReceiptInfo.unreadCount=t.unreadCount)}))})),Wi({messageList:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];a.setError(e,o,i).end()})),Oe.w("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"sendReadReceipt",value:function(e){var t=this,n="".concat(this._n,".").concat("sendReadReceipt"),o=this._getGroupIDOfMessage(e[0]),i=new Ai("sendReadReceipt");i.setMessage("groupID:".concat(o));var r=this.getMyUserID(),a=e.filter((function(e){return e.from!==r&&!0===e.needReadReceipt})).map((function(e){return{sequence:e.sequence}}));return 0===a.length?Xi({code:hi.READ_RECEIPT_MESSAGE_LIST_EMPTY}):(Oe.l("".concat(n,". sequenceList:").concat(JSON.stringify(a))),this.request({protocolName:mo,requestData:{groupID:o,sequenceList:a}}).then((function(e){return i.end(),Oe.l("".concat(n," ok")),Wi()})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],r=n[1];i.setError(e,o,r).end()})),Oe.w("".concat(n," failed. error:"),e),Xi(e)})))}},{key:"getReadReceiptDetail",value:function(e){var t=this,n=e.message,o=e.filter,i=e.cursor,r=e.count,a=this._getGroupIDOfMessage(n),s=n.ID,c=n.sequence,u="".concat(this._n,".").concat("getReadReceiptDetail"),l=this._receiptDetailCompleteMap.get(s)||!1,d=0!==o&&1!==o?0:o,f=je(i)?i:"",p=!He(r)||r<=0||r>=100?100:r,h="groupID:".concat(a," sequence:").concat(c," cursor:").concat(f," filter:").concat(d," completeFlag:").concat(l);Oe.l("".concat(u," ").concat(h));var g={cursor:"",isCompleted:!1,messageID:s,unreadUserIDList:[],readUserIDList:[]},_=new Ai("getReadReceiptDetail");return _.setMessage(h),this.request({protocolName:Mo,requestData:{groupID:a,sequence:c,flag:d,cursor:f,count:p}}).then((function(e){_.end();var n=e.data,o=n.cursor,i=n.isCompleted,r=n.unreadUserIDList,a=n.readUserIDList;return g.cursor=o,1===i&&(g.isCompleted=!0,t._receiptDetailCompleteMap.set(s,!0)),0===d?g.readUserIDList=a.map((function(e){return e.userID})):1===d&&(g.unreadUserIDList=r.map((function(e){return e.userID}))),Oe.l("".concat(u," ok")),Wi(g)})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];_.setError(e,o,i).end()})),Oe.w("".concat(u," failed. error:"),e),Xi(e)}))}},{key:"getRoamingMessagesHopping",value:function(e){var t=this,n="".concat(this._n,".getRoamingMessagesHopping"),o=new Ai("getGroupRoamingMessagesHopping"),i=e.groupID,r=e.count,a=e.sequence,s=e.direction,c=a;1===s&&(c=a+r-1);var u=void 0;ht(i)&&(i=At(u=i));var l="".concat(u?"topicID:".concat(u):"groupID:".concat(i)," sequence:").concat(a," direction:").concat(s);return Oe.l("".concat(n," ").concat(l)),this.request({protocolName:_o,requestData:{groupID:i,topicID:u,count:r,sequence:c}}).then((function(i){var r=i.data,c=r.messageList,u=r.complete,d="complete:".concat(u," count:").concat(c?c.length:0);if(Oe.l("".concat(n," ok. ").concat(d)),o.setNetworkType(t.getNetworkType()).setMessage("".concat(l," ").concat(d)).end(),2===u||Ut(c)){var f=t._computeResult();return Wi(f)}var p="".concat(A.CONV_GROUP).concat(e.groupID),h=t.getModule(11).onRoamingMessage(c,p,!1),g=t._computeResult({direction:s,sequence:a,remoteMessageList:c,processedMessageList:h});return Wi(g)})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),s=n[0],c=n[1];o.setError(e,s,c).setMessage("groupID:".concat(i," sequence:").concat(a," count:").concat(r)).end()})),Oe.w("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"_computeResult",value:function(e){var t={messageList:[],isCompleted:!1,nextMessageSeq:""};if(ze(e))return t.isCompleted=!0,t;var n=e.direction,o=e.sequence,i=e.remoteMessageList,r=void 0===i?[]:i,a=e.processedMessageList,s=void 0===a?[]:a,c=r.length;return 1===n?(t.nextMessageSeq=r[0].sequence+1,s.forEach((function(e){e.sequence>=o&&t.messageList.push(e)})),0===t.messageList.length&&r[0].sequence<o&&(t.isCompleted=!0,t.nextMessageSeq=""),t):(t.nextMessageSeq=r[c-1].sequence-1,t.messageList=I(s),0===t.nextMessageSeq&&(t.isCompleted=!0,t.nextMessageSeq=""),t)}},{key:"setMessageRead",value:function(e){var t=this,n=e.conversationID,o=e.lastMessageSeq,i="".concat(this._n,".setMessageRead");Oe.l("".concat(i," conversationID:").concat(n," lastMessageSeq:").concat(o)),He(o)||this.outputWarning("DoNotModifyLastSeq");var r=new Ai("setGroupMessageRead");r.setMessage("".concat(n,"-").concat(o));var a=n.replace(A.CONV_GROUP,""),s=void 0;return ht(a)&&(a=At(s=a)),this.request({protocolName:ho,requestData:{groupID:a,topicID:s,messageReadSeq:o}}).then((function(){r.setNetworkType(t.getNetworkType()).end(),Oe.l("".concat(i," ok."));var e=t.getModule(11);e.updateIsReadAfterReadReport({conversationID:n,lastMessageSeq:o});var c=!0;if(!ze(s)){c=!1;var u=t.getModule(10).getLocalTopic(a,s);u&&u.updateSelfInfo({readedSequence:o})}return e.updateUnreadCount(n,c),Wi()})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];r.setError(e,o,i).end()})),Oe.l("".concat(i," failed. error:"),e),Xi(e)}))}},{key:"_computeLastSequence",value:function(e){var t=e.groupID,n=e.topicID,o=void 0===n?void 0:n,i=e.sequence;return i>0?Promise.resolve(i):ze(o)||this.hasLocalGroup(t)?ze(o)?this.getGroupLastSequence(t):this.getTopicLastSequence({groupID:t,topicID:o}):Promise.resolve(0)}},{key:"getGroupLastSequence",value:function(e){var t=this,n="".concat(this._n,".").concat("getGroupLastSequence"),o=new Ai("getGroupLastSequence"),i=0,r="";if(this.hasLocalGroup(e)){var a=this.getLocalGroupProfile(e),s=a.lastMessage;if(s.lastSequence>0&&!1===s.onlineOnlyFlag)return i=s.lastSequence,r="got lastSequence:".concat(i," from local group profile[lastMessage.lastSequence]. groupID:").concat(e),Oe.l("".concat(n," ").concat(r)),o.setNetworkType(this.getNetworkType()).setMessage("".concat(r)).end(),Promise.resolve(i);if(a.nextMessageSeq>1)return i=a.nextMessageSeq-1,r="got lastSequence:".concat(i," from local group profile[nextMessageSeq]. groupID:").concat(e),Oe.l("".concat(n," ").concat(r)),o.setNetworkType(this.getNetworkType()).setMessage("".concat(r)).end(),Promise.resolve(i)}var c="GROUP".concat(e),u=this.getModule(11).getLocalConversation(c);if(u&&u.lastMessage.lastSequence&&!1===u.lastMessage.onlineOnlyFlag)return i=u.lastMessage.lastSequence,r="got lastSequence:".concat(i," from local conversation profile[lastMessage.lastSequence]. groupID:").concat(e),Oe.l("".concat(n," ").concat(r)),o.setNetworkType(this.getNetworkType()).setMessage("".concat(r)).end(),Promise.resolve(i);var l={groupIDList:[e],responseFilter:{groupBaseInfoFilter:["NextMsgSeq"]}};return this.getGroupProfileAdvance(l).then((function(a){var s=a.data.successGroupList;return Ut(s)?Oe.l("".concat(n," successGroupList is empty. groupID:").concat(e)):(i=s[0].nextMessageSeq-1,r="got lastSequence:".concat(i," from getGroupProfileAdvance. groupID:").concat(e),Oe.l("".concat(n," ").concat(r))),o.setNetworkType(t.getNetworkType()).setMessage("".concat(r)).end(),i})).catch((function(i){return t.probeNetwork().then((function(t){var n=M(t,2),r=n[0],a=n[1];o.setError(i,r,a).setMessage("get lastSequence failed from getGroupProfileAdvance. groupID:".concat(e)).end()})),Oe.w("".concat(n," failed. error:"),i),Xi(i)}))}},{key:"getTopicLastSequence",value:function(e){var t=this,n=e.groupID,o=e.topicID,i="".concat(this._n,".").concat("getTopicLastSequence"),r=new Ai("getTopicLastSequence"),a=0,s="",c=this.getModule(10);return c.hasLocalTopic(n,o)?(a=c.getLocalTopic(n,o).nextMessageSeq-1,s="get lastSequence:".concat(a," from local topic info[nextMessageSeq]. topicID:").concat(o),Oe.l("".concat(i," ").concat(s)),r.setNetworkType(this.getNetworkType()).setMessage("".concat(s)).end(),Promise.resolve(a)):c.getTopicList({groupID:n,topicIDList:[o]}).then((function(e){var n=e.data.successTopicList;return Ut(n)?Oe.l("".concat(i," successTopicList is empty. topicID:").concat(o)):(a=n[0].nextMessageSeq-1,s="get lastSequence:".concat(a," from getTopicList. topicID:").concat(o),Oe.l("".concat(i," ").concat(s))),r.setNetworkType(t.getNetworkType()).setMessage("".concat(s)).end(),a})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),i=n[0],a=n[1];r.setError(e,i,a).setMessage("get lastSequence failed from getTopicList. topicID:".concat(o)).end()})),Oe.w("".concat(i," failed. error:"),e),Xi(e)}))}},{key:"isMessageFromOrToAVChatroom",value:function(e){return!!this._AVChatRoomHandler&&this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)}},{key:"hasJoinedAVChatRoom",value:function(){return this._AVChatRoomHandler?this._AVChatRoomHandler.hasJoinedAVChatRoom():0}},{key:"getJoinedAVChatRoom",value:function(){return this._AVChatRoomHandler?this._AVChatRoomHandler.getJoinedAVChatRoom():[]}},{key:"isOnlineMessage",value:function(e,t){return!(!this._canIUseOnlineOnlyFlag(e)||!t||!0!==t.onlineUserOnly)}},{key:"_canIUseOnlineOnlyFlag",value:function(e){var t=this.getJoinedAVChatRoom();return!t||!t.includes(e.to)||e.conversationType!==A.CONV_GROUP}},{key:"_onAVChatRoomHistoryMessage",value:function(e){if(!Ut(e)){Oe.l("".concat(this._n,"._onAVChatRoomHistoryMessage count:").concat(e.length));var n=[];e.forEach((function(e){n.push(t(t({},e),{},{isHistoryMessage:1}))})),this.onAVChatRoomMessage(n)}}},{key:"onAVChatRoomMessage",value:function(e){this._AVChatRoomHandler&&this._AVChatRoomHandler.onMessage(e)}},{key:"onAVChatRoomMemberBanned",value:function(e){this._AVChatRoomHandler&&this._AVChatRoomHandler.onAVChatRoomMemberBanned(e)}},{key:"getGroupSimplifiedInfo",value:function(e){var t=this,n=new Ai("getGroupSimplifiedInfo"),o={groupIDList:[e],responseFilter:{groupBaseInfoFilter:["Type","Name"]}};return this.getGroupProfileAdvance(o).then((function(o){var i=o.data.successGroupList;return n.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(e," type:").concat(i[0].type)).end(),i[0]})).catch((function(o){t.probeNetwork().then((function(t){var i=M(t,2),r=i[0],a=i[1];n.setError(o,r,a).setMessage("groupID:".concat(e)).end()}))}))}},{key:"setUnjoinedAVChatRoom",value:function(e){this._unjoinedAVChatRoomList.set(e,1)}},{key:"deleteUnjoinedAVChatRoom",value:function(e){this._unjoinedAVChatRoomList.has(e)&&this._unjoinedAVChatRoomList.delete(e)}},{key:"isUnjoinedAVChatRoom",value:function(e){return this._unjoinedAVChatRoomList.has(e)}},{key:"isGroupAttributesUpdatedNotice",value:function(e){return this._groupAttributesHandler.isGroupAttributesUpdatedNotice(e)}},{key:"updateLocalMainSequenceOnReconnected",value:function(){this._groupAttributesHandler.updateLocalMainSequenceOnReconnected()}},{key:"initGroupAttributes",value:function(e){return this._groupAttributesHandler.initGroupAttributes(e)}},{key:"setGroupAttributes",value:function(e){return this._groupAttributesHandler.setGroupAttributes(e)}},{key:"deleteGroupAttributes",value:function(e){return this._groupAttributesHandler.deleteGroupAttributes(e)}},{key:"getGroupAttributes",value:function(e){return this._groupAttributesHandler.getGroupAttributes(e)}},{key:"isMessageFromTopic",value:function(e,t){return 2===e&&!Ut(t)}},{key:"isMessageFromCommunityOfTopic",value:function(e,t){return 2===e&&Ut(t)}},{key:"getMessageExtensions",value:function(e,t){return Oe.l("".concat(this._n,".getMessageExtensions startSequence:").concat(t)),this.request({protocolName:No,requestData:{groupID:e.to,messageSequence:e.sequence,startSequence:t}})}},{key:"modifyMessageExtensions",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Oe.l("".concat(this._n,".modifyMessageExtensions operateType:").concat(n)),this.request({protocolName:wo,requestData:{groupID:e.to,messageSequence:e.sequence,extensionList:t,operateType:n}})}},{key:"getGroupNotify",value:function(e){var n=this;if(this.hasLocalGroup(e)){var o=this.getLocalGroupProfile(e),i=o.type,r=o.isSupportTopic;if(!ft(i)&&!r){var a="".concat(this._n,".getGroupNotify"),s=this._getGroupLastRevokedTime(e),c=1e3*Se();Oe.l("".concat(a," groupID:").concat(e," type:").concat(i," beginTime:").concat(s," endTime:").concat(c)),this.request({protocolName:Po,requestData:{type:pt({type:i,groupID:e})?A.GRP_COMMUNITY:void 0,groupID:e,beginTime:s,endTime:c}}).then((function(o){var i=o.data,r=i.nextRevokedTime,s=i.notifyList;Oe.l("".concat(a," ok. groupID:").concat(e," nextRevokedTime:").concat(r));var c={dataList:[{elements:{revokedInfos:[]}}]};Ye(s)&&s.forEach((function(n){c.dataList[0].elements.revokedInfos.push({groupID:e,sequence:n.sequence,random:n.random,revokerInfo:t({},n.revokerInfo)})})),n.onGroupMessageRevoked(c),0!==r?(n._setGroupLastRevokedTime(e,r),n.getGroupNotify(e)):n._setGroupLastRevokedTime(e,1e3*Se())})).catch((function(e){Oe.e("".concat(a," failed. error:"),e)}))}}}},{key:"_getGroupLastRevokedTime",value:function(e){return this.hasLocalGroup(e)?this.getLocalGroupProfile(e)._lastRevokedTime:0}},{key:"_setGroupLastRevokedTime",value:function(e,t){this.hasLocalGroup(e)&&(this.getLocalGroupProfile(e)._lastRevokedTime=t)}},{key:"isGroupCountersNotice",value:function(e){return this._groupCountersHandler.isGroupCountersNotice(e)}},{key:"setGroupCounters",value:function(e){return this._groupCountersHandler.setGroupCounters(e)}},{key:"increaseGroupCounter",value:function(e){return this._groupCountersHandler.increaseGroupCounter(e)}},{key:"decreaseGroupCounter",value:function(e){return this._groupCountersHandler.decreaseGroupCounter(e)}},{key:"getGroupCounters",value:function(e){return this._groupCountersHandler.getGroupCounters(e)}},{key:"restartPolling",value:function(){this._AVChatRoomHandler&&this._AVChatRoomHandler.restartPolling()}},{key:"getPollingTimerID",value:function(e){if(!e)return-1;var t=this.getLocalGroupProfile(e);return t&&ft(t.type)?this._AVChatRoomHandler.getPollingTimerID(e):-1}},{key:"_canIUseJoinOption",value:function(e){return function(e){return e===A.GRP_PUBLIC}(e)||pt({type:e})}},{key:"reset",value:function(){this.groupMap.clear(),this._unjoinedAVChatRoomList.clear(),this._receiptDetailCompleteMap.clear(),this._commonGroupHandler.reset(),this._groupSystemNoticeHandler.reset(),this._groupTipsHandler.reset(),this._groupAttributesHandler.reset(),this._groupCountersHandler.reset(),this._AVChatRoomHandler&&this._AVChatRoomHandler.reset()}}]),o}(yn),Sr=function(){function e(t){r(this,e),this.userID="",this.avatar="",this.nick="",this.role="",this.joinTime="",this.lastSendMsgTime="",this.nameCard="",this.muteUntil=0,this.memberCustomField=[],this._initMember(t)}return c(e,[{key:"_initMember",value:function(e){this.updateMember(e)}},{key:"updateMember",value:function(e){var t=[null,void 0,"",0,NaN];e.memberCustomField&&dt(this.memberCustomField,e.memberCustomField),et(this,e,["memberCustomField","marks"],t)}},{key:"updateRole",value:function(e){["Owner","Admin","Member"].indexOf(e)<0||(this.role=e)}},{key:"updateMuteUntil",value:function(e){ze(e)||(this.muteUntil=Math.floor((Date.now()+1e3*e)/1e3))}},{key:"updateNameCard",value:function(e){ze(e)||(this.nameCard=e)}},{key:"updateMemberCustomField",value:function(e){e&&dt(this.memberCustomField,e)}}]),e}(),Er=function(e){l(o,e);var n=y(o);function o(e){var t;return r(this,o),(t=n.call(this,e))._n="GroupMemberModule",t.groupMemberListMap=new Map,t.getInnerEmitterInstance().on(tr,t._onProfileUpdated,v(t)),t}return c(o,[{key:"_onProfileUpdated",value:function(e){for(var t=this,n=e.data,o=function(e){var o=n[e];t.groupMemberListMap.forEach((function(e){e.has(o.userID)&&e.get(o.userID).updateMember({nick:o.nick,avatar:o.avatar})}))},i=0;i<n.length;i++)o(i)}},{key:"deleteGroupMemberList",value:function(e){this.groupMemberListMap.delete(e)}},{key:"getGroupMemberList",value:function(e){var t=this,n=e.groupID,o=e.offset,i=void 0===o?0:o,r=e.count,a=void 0===r?15:r,s=e.filter,c=void 0===s?void 0:s,u="".concat(this._n,".").concat("getGroupMemberList"),l=this.getModule(7),d=l.hasLocalGroup(n);if(Oe.l("".concat(u," groupID:").concat(n," offset:").concat(i," count:").concat(a," hasLocalGroup:").concat(d)),!d)return $i({memberList:[],offset:0});if(l.getLocalGroupProfile(n).type===A.GRP_AVCHATROOM){if(this.canIUse(x.AVCHATROOM_MBR_LIST))return this._getAVChatRoomMemberList({groupID:n,offset:i,filter:c});this.outputWarning("LiveOnlineMember")}var f=new Ai("getGroupMemberList"),p=0,h={groupID:n,limit:a>100?100:a};pt({groupID:n})?h.next="".concat(i):(h.offset=i,p=i+a);var g=[];return this.request({protocolName:xo,requestData:h}).then((function(e){var o=e.data,i=o.members,r=o.memberNum,a=o.next,s=void 0===a?void 0:a;if(ze(s)||(p=Ut(s)?0:s),!Ye(i)||0===i.length)return p=0,Promise.resolve([]);var c=t.getModule(7);return c.hasLocalGroup(n)&&(c.getLocalGroupProfile(n).memberNum=r),g=t._updateLocalGroupMemberMap(n,i),t.getModule(4).getUserProfile({userIDList:i.map((function(e){return e.userID})),tagList:[we.NICK,we.AVATAR]})})).then((function(e){var o=e.data;if(!Ye(o)||0===o.length)return $i({memberList:[],offset:p});var r=o.map((function(e){return{userID:e.userID,nick:e.nick,avatar:e.avatar}}));return t._updateLocalGroupMemberMap(n,r),g.length<a&&(p=0),f.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(n," offset:").concat(i," count:").concat(a)).end(),Oe.l("".concat(u," ok.")),Wi({memberList:g,offset:p})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];f.setError(e,o,i).end()})),Oe.e("".concat(u," failed. error:"),e),Xi(e)}))}},{key:"_getAVChatRoomMemberList",value:function(e){var t=this,n=e.groupID,o=e.offset,i=e.filter,r="".concat(this._n,".").concat("_getAVChatRoomMemberList"),a=new Ai("_getAVChatRoomMemberList");return a.setMessage("groupID:".concat(n," offset:").concat(o," filter:").concat(i)),this.request({protocolName:Fo,requestData:{groupID:n,offset:o,filter:i}}).then((function(e){var o=e.data,i=o.memberList,s=void 0===i?[]:i,c=o.offset,u=void 0===c?0:c;a.setNetworkType(t.getNetworkType()).end(),Oe.l("".concat(r," ok. member count:").concat(s.length,", next request timestamp:").concat(u));var l=t._updateLocalGroupMemberMap(n,s);return Wi({memberList:l,offset:u})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];a.setError(e,o,i).end()})),Oe.e("".concat(r," failed. error:"),e),Xi(e)}))}},{key:"getGroupMemberProfile",value:function(e){var n=this,o="".concat(this._n,".").concat("getGroupMemberProfile"),i=new Ai("getGroupMemberProfile");i.setMessage(e.userIDList.length>5?"userIDList.length:".concat(e.userIDList.length):"userIDList:".concat(e.userIDList)),Oe.l("".concat(o," groupID:").concat(e.groupID," userIDList:").concat(e.userIDList.join(","))),e.userIDList.length>50&&(e.userIDList=e.userIDList.slice(0,50));var r=e.groupID,a=e.userIDList;return this._getGroupMemberProfileAdvance(t(t({},e),{},{userIDList:a})).then((function(e){var t=e.data.members;return Ye(t)&&0!==t.length?(n._updateLocalGroupMemberMap(r,t),n.getModule(4).getUserProfile({userIDList:t.map((function(e){return e.userID})),tagList:[we.NICK,we.AVATAR]})):$i([])})).then((function(e){var t=e.data.map((function(e){return{userID:e.userID,nick:e.nick,avatar:e.avatar}}));n._updateLocalGroupMemberMap(r,t);var o=a.filter((function(e){return n.hasLocalGroupMember(r,e)})).map((function(e){return n.getLocalGroupMemberInfo(r,e)}));return i.setNetworkType(n.getNetworkType()).end(),Wi({memberList:o})}))}},{key:"addGroupMember",value:function(e){var t=this,n="".concat(this._n,".").concat("addGroupMember"),o=e.groupID,i=this.getModule(7).getLocalGroupProfile(o),r=i.type,a=new Ai("addGroupMember");if(a.setMessage("groupID:".concat(o," groupType:").concat(r)),ft(r)){var s=new Yi({code:hi.CANNOT_ADD_MEMBER_IN_AVCHATROOM});return a.setError(s,!0,this.getNetworkType()).end(),Xi(s)}return e.userIDList=e.userIDList.map((function(e){return{userID:e}})),Oe.l("".concat(n," groupID:").concat(o)),this.request({protocolName:Bo,requestData:e}).then((function(o){var r=o.data.members;Oe.l("".concat(n," ok"));var s=r.filter((function(e){return 1===e.result})).map((function(e){return e.userID})),c=r.filter((function(e){return 0===e.result})).map((function(e){return e.userID})),u=r.filter((function(e){return 2===e.result})).map((function(e){return e.userID})),l=r.filter((function(e){return 4===e.result})).map((function(e){return e.userID})),d="groupID:".concat(e.groupID,", ")+"successUserIDList:".concat(s,", ")+"failureUserIDList:".concat(c,", ")+"existedUserIDList:".concat(u,", ")+"overLimitUserIDList:".concat(l);return a.setNetworkType(t.getNetworkType()).setMoreMessage(d).end(),0===s.length?Wi({successUserIDList:s,failureUserIDList:c,existedUserIDList:u,overLimitUserIDList:l}):(i.memberCount+=s.length,t._updateConversationGroupProfile(i),Wi({successUserIDList:s,failureUserIDList:c,existedUserIDList:u,overLimitUserIDList:l,group:i}))})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];a.setError(e,o,i).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"deleteGroupMember",value:function(e){var t=this,n="".concat(this._n,".").concat("deleteGroupMember"),o=e.groupID,i=e.userIDList,r=this.getModule(7).getLocalGroupProfile(o);if(ze(r))return Xi({code:hi.CANNOT_FIND_GROUP});if(ft(r.type))return this.canIUse(x.AVCHATROOM_BAN_MBR)?this._banAVChatRoomMember(e):Xi({code:hi.CANNOT_USE_COMMERCIAL_ABILITY});var a=new Ai("deleteGroupMember"),s="groupID:".concat(o," ").concat(i.length>5?"userIDList.length:".concat(i.length):"userIDList:".concat(i));return a.setMessage(s),Oe.l("".concat(n," groupID:").concat(o," userIDList:"),i),this.request({protocolName:Vo,requestData:e}).then((function(){return a.setNetworkType(t.getNetworkType()).end(),Oe.l("".concat(n," ok")),r.memberCount-=1,t._updateConversationGroupProfile(r),t.deleteLocalGroupMembers(o,i),Wi({group:r,userIDList:i})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];a.setError(e,o,i).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"_updateConversationGroupProfile",value:function(e){this.getModule(11).updateConversationGroupProfile([e])}},{key:"_banAVChatRoomMember",value:function(e){var t=this,n="".concat(this._n,".").concat("deleteGroupMember"),o=e.groupID,i=e.userIDList,r="groupID:".concat(o," ").concat(i.length>5?"userIDList.length:".concat(i.length):"userIDList:".concat(i)),a=new Ai("deleteGroupMember");a.setMessage(r),Oe.l("".concat(n," groupID:").concat(o," userIDList:"),i);var s=this.getModule(7).getLocalGroupProfile(o);return ze(e.duration)||0===e.duration?Xi({code:hi.BAN_DURATION_INVALID}):this.request({protocolName:Ho,requestData:e}).then((function(){return a.setNetworkType(t.getNetworkType()).end(),Oe.l("".concat(n," ok")),t.deleteLocalGroupMembers(o,i),Wi({group:s,userIDList:i})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];a.setError(e,o,i).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"setGroupMemberMuteTime",value:function(e){var t=this,n=e.groupID,o=e.userID,i=e.muteTime,r="".concat(this._n,".").concat("setGroupMemberMuteTime");if(o===this.getMyUserID())return Xi(new Yi({code:hi.CANNOT_MUTE_SELF}));Oe.l("".concat(r," groupID:").concat(n," userID:").concat(o));var a=new Ai("setGroupMemberMuteTime");return a.setMessage("groupID:".concat(n," userID:").concat(o," muteTime:").concat(i)),this.modifyGroupMemberInfo({groupID:n,userID:o,muteTime:i}).then((function(e){a.setNetworkType(t.getNetworkType()).end(),Oe.l("".concat(r," ok"));var o=t.getModule(7);return Wi({group:o.getLocalGroupProfile(n),member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];a.setError(e,o,i).end()})),Oe.e("".concat(r," failed. error:"),e),Xi(e)}))}},{key:"setGroupMemberRole",value:function(e){var t=this,n="".concat(this._n,".").concat("setGroupMemberRole"),o=e.groupID,i=e.userID,r=e.role,a=this.getModule(7).getLocalGroupProfile(o);if(a.selfInfo.role!==A.GRP_MBR_ROLE_OWNER)return Xi({code:hi.NOT_OWNER});if([A.GRP_WORK,A.GRP_AVCHATROOM].includes(a.type))return Xi({code:hi.CANNOT_SET_MEMBER_ROLE_IN_WORK_AND_AVCHATROOM});var s=[A.GRP_MBR_ROLE_ADMIN,A.GRP_MBR_ROLE_MEMBER];if(pt({groupID:o})&&s.push(A.GRP_MBR_ROLE_CUSTOM),s.indexOf(r)<0)return Xi({code:hi.INVALID_MEMBER_ROLE});if(i===this.getMyUserID())return Xi({code:hi.CANNOT_SET_SELF_MEMBER_ROLE});var c=new Ai("setGroupMemberRole");return c.setMessage("groupID:".concat(o," userID:").concat(i," role:").concat(r)),Oe.l("".concat(n," groupID:").concat(o," userID:").concat(i)),this.modifyGroupMemberInfo({groupID:o,userID:i,role:r}).then((function(e){return c.setNetworkType(t.getNetworkType()).end(),Oe.l("".concat(n," ok")),Wi({group:a,member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];c.setError(e,o,i).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"_filterProfanity",value:function(e,t){var n=this.getModule(29);if(!n)return!0;var o=n.filterText(t[e],"group_member_profile"),i=o.isAllowedToSend,r=o.modifiedText;return!0===i&&(t[e]=r,!0)}},{key:"setGroupMemberNameCard",value:function(e){var t=this,n="".concat(this._n,".").concat("setGroupMemberNameCard");if(e.nameCard&&!1===this._filterProfanity("nameCard",e))return Xi({code:hi.PROFANITY_FOUND});var o=e.groupID,i=e.userID,r=void 0===i?this.getMyUserID():i,a=e.nameCard;Oe.l("".concat(n," groupID:").concat(o," userID:").concat(r));var s=new Ai("setGroupMemberNameCard");return s.setMessage("groupID:".concat(o," userID:").concat(r," nameCard:").concat(a)),this.modifyGroupMemberInfo({groupID:o,userID:r,nameCard:a}).then((function(e){Oe.l("".concat(n," ok")),s.setNetworkType(t.getNetworkType()).end();var i=t.getModule(7).getLocalGroupProfile(o);return r===t.getMyUserID()&&i&&i.setSelfNameCard(a),Wi({group:i,member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];s.setError(e,o,i).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"setGroupMemberCustomField",value:function(e){var t=this,n="".concat(this._n,".").concat("setGroupMemberCustomField"),o=e.groupID,i=e.userID,r=void 0===i?this.getMyUserID():i,a=e.memberCustomField;Oe.l("".concat(n," groupID:").concat(o," userID:").concat(r));var s=new Ai("setGroupMemberCustomField");return s.setMessage("groupID:".concat(o," userID:").concat(r," memberCustomField:").concat(JSON.stringify(a))),this.modifyGroupMemberInfo({groupID:o,userID:r,memberCustomField:a}).then((function(e){s.setNetworkType(t.getNetworkType()).end(),Oe.l("".concat(n," ok"));var i=t.getModule(7).getLocalGroupProfile(o);return Wi({group:i,member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];s.setError(e,o,i).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"modifyGroupMemberInfo",value:function(e){var n=this,o=e.groupID,i=e.userID,r=void 0;return ht(o)&&(o=At(r=o)),this.request({protocolName:jo,requestData:t(t({},e),{},{groupID:o,topicID:r})}).then((function(){if(n.hasLocalGroupMember(o,i)){var t=n.getLocalGroupMemberInfo(o,i);return ze(e.muteTime)||t.updateMuteUntil(e.muteTime),ze(e.role)||t.updateRole(e.role),ze(e.nameCard)||t.updateNameCard(e.nameCard),ze(e.memberCustomField)||t.updateMemberCustomField(e.memberCustomField),t}return n.getGroupMemberProfile({groupID:o,userIDList:[i]}).then((function(e){return M(e.data.memberList,1)[0]}))}))}},{key:"markGroupMemberList",value:function(e){var t=this,n="".concat(this._n,".").concat("markGroupMemberList"),o=e.groupID,i=e.markType,r=e.enableMark,a=e.userIDList,s=void 0===a?[]:a,c="groupID:".concat(o," markType:").concat(i," enableMark:").concat(r," userIDList count: ").concat(s.length);Oe.l("".concat(n," ").concat(c));var u=2,l=[];!0===r&&(u=1);var d=I(s);s.length>500&&(d=s.slice(0,500),Oe.w("".concat(n," ").concat(Nt(500)))),d.forEach((function(e){l.push({userID:e,markType:[i]})})),d=null;var f=new Ai("markGroupMemberList");return f.setMessage("".concat(c)),this.request({protocolName:Ko,requestData:{groupID:o,operationType:u,memberList:l}}).then((function(e){var o=e.data.memberList,i=void 0===o?[]:o,r=[],a=[];i.length===s.length?r.push.apply(r,I(s)):(i.forEach((function(e){r.push(e.userID)})),s.forEach((function(e){r.includes(e)||a.push(e)})));var c="success count:".concat(r.length," fail count:").concat(a.length);return f.setNetworkType(t.getNetworkType()).setMessage(c).end(),Oe.l("".concat(n," ok. ").concat(c)),Wi({successUserIDList:r,failureUserIDList:a})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];f.setError(e,o,i).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"_getGroupMemberProfileAdvance",value:function(e){return this.request({protocolName:qo,requestData:t(t({},e),{},{memberInfoFilter:e.memberInfoFilter?e.memberInfoFilter:["Role","JoinTime","NameCard","ShutUpUntil"]})})}},{key:"_updateLocalGroupMemberMap",value:function(e,t){var n=this;return Ye(t)&&0!==t.length?t.map((function(t){return n.hasLocalGroupMember(e,t.userID)?n.getLocalGroupMemberInfo(e,t.userID).updateMember(t):n.setLocalGroupMember(e,new Sr(t)),n.getLocalGroupMemberInfo(e,t.userID)})):[]}},{key:"deleteLocalGroupMembers",value:function(e,t){var n=this.groupMemberListMap.get(e);n&&t.forEach((function(e){n.delete(e)}))}},{key:"getLocalGroupMemberInfo",value:function(e,t){return this.groupMemberListMap.has(e)?this.groupMemberListMap.get(e).get(t):null}},{key:"setLocalGroupMember",value:function(e,t){if(this.groupMemberListMap.has(e))this.groupMemberListMap.get(e).set(t.userID,t);else{var n=(new Map).set(t.userID,t);this.groupMemberListMap.set(e,n)}}},{key:"getLocalGroupMemberList",value:function(e){return this.groupMemberListMap.get(e)}},{key:"hasLocalGroupMember",value:function(e,t){return this.groupMemberListMap.has(e)&&this.groupMemberListMap.get(e).has(t)}},{key:"hasLocalGroupMemberMap",value:function(e){return this.groupMemberListMap.has(e)}},{key:"reset",value:function(){this.groupMemberListMap.clear()}}]),o}(yn),kr=["topicID","topicName","avatar","introduction","notification","unreadCount","muteAllMembers","customData","groupAtInfoList","nextMessageSeq","selfInfo"],Dr=function(e,t){return Ut(e)?{lastTime:0,lastSequence:0,fromAccount:"",payload:null,type:"",messageForShow:"",nick:"",version:0,cloudCustomData:"",isRevoked:!1,revoker:null}:{lastTime:e.time||0,lastSequence:e.sequence||0,fromAccount:e.from||"",payload:e.payload||null,type:e.type||"",messageForShow:Lt(e.type,e.payload,t),nick:e.nick||"",version:e.version||0,cloudCustomData:e.cloudCustomData||"",isRevoked:e.isRevoked||!1,revoker:e.revoker||null}},Ar=function(){function e(t,n){r(this,e),this.topicID="",this.topicName="",this.avatar="",this.introduction="",this.notification="",this.unreadCount=0,this.muteAllMembers=!1,this.customData="",this.groupAtInfoList=[],this.nextMessageSeq=0,this.lastMessage=Dr(t.lastMessage,n),this.selfInfo={muteTime:0,readedSequence:0,messageRemindType:"",excludedUnreadSequenceList:void 0},this._initTopic(t)}return c(e,[{key:"_initTopic",value:function(e){for(var t in e)kr.indexOf(t)<0||("selfInfo"===t?this.updateSelfInfo(e[t]):this[t]="muteAllMembers"===t?1===e[t]:e[t])}},{key:"updateUnreadCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.unreadCount=e}},{key:"updateNextMessageSeq",value:function(e){this.nextMessageSeq=e}},{key:"updateLastMessage",value:function(e){this.lastMessage=Dr(e)}},{key:"updateGroupAtInfoList",value:function(e){this.groupAtInfoList=JSON.parse(JSON.stringify(e))}},{key:"updateTopic",value:function(e){ze(e.selfInfo)||this.updateSelfInfo(e.selfInfo),ze(e.muteAllMembers)||(this.muteAllMembers=1===e.muteAllMembers),et(this,e,["groupID","lastMessageTime","selfInfo","muteAllMembers","lastMsg"])}},{key:"updateSelfInfo",value:function(e){return 0!==et(this.selfInfo,e,[],[""])}},{key:"reduceUnreadCount",value:function(){return this.unreadCount>=1&&(this.unreadCount-=1,!0)}},{key:"isLastMessageRevoked",value:function(e){return e.sequence===this.lastMessage.lastSequence}},{key:"setLastMessageRevoked",value:function(e){this.lastMessage.isRevoked=e}},{key:"setLastMessageRevoker",value:function(e){this.lastMessage.revoker=e}}]),e}(),Lr=function(e){l(o,e);var n=y(o);function o(e){var t;return r(this,o),(t=n.call(this,e))._n="TopicModule",t._topicMap=new Map,t._getTopicTimeMap=new Map,t.TOPIC_CACHE_TIME=300,t.TOPIC_LAST_ACTIVE_TIME=3600,t.getInnerEmitterInstance().on(er,t._onCloudConfigUpdated,v(t)),t}return c(o,[{key:"_onCloudConfigUpdated",value:function(){var e=this.getCloudConfig("topic_cache_time"),t=this.getCloudConfig("topic_last_active_time");ze(e)||(this.TOPIC_CACHE_TIME=Number(e)),ze(t)||(this.TOPIC_LAST_ACTIVE_TIME=Number(t))}},{key:"onTopicCreated",value:function(e){var t=e.groupID;this.resetGetTopicTime(t),this.emitOuterEvent(D.TOPIC_CREATED,e)}},{key:"onTopicDeleted",value:function(e){var t=this,n=e.groupID,o=e.topicIDList;(void 0===o?[]:o).forEach((function(e){t._deleteLocalTopic(n,e)})),this.emitOuterEvent(D.TOPIC_DELETED,e)}},{key:"onTopicMessageRemindTypeUpdated",value:function(e){var t=e.groupID,n=e.topicID,o=e.messageRemindType,i=this.getLocalTopic(t,n);if(i){var r=i.updateSelfInfo({messageRemindType:o});r&&this.emitOuterEvent(D.TOPIC_UPDATED,{groupID:t,topic:i}),Oe.d("".concat(this._n,".onTopicMessageRemindTypeUpdated topicID:").concat(n)+" messageRemindType:".concat(o," isTopicUpdated:").concat(r))}}},{key:"onTopicProfileUpdated",value:function(e){var t=e.groupID,n=e.topicID,o=this.getLocalTopic(t,n);o&&(o.updateTopic(e),this.emitOuterEvent(D.TOPIC_UPDATED,{groupID:t,topic:o}))}},{key:"onConversationProxy",value:function(e){var t=e.topicID,n=e.unreadCount,o=e.groupAtInfoList,i=At(t),r=this.getLocalTopic(i,t),a=!1;r&&(ze(n)||r.unreadCount===n||(r.updateUnreadCount(n),a=!0),ze(o)||(r.updateGroupAtInfoList(o),a=!0)),a&&this.emitOuterEvent(D.TOPIC_UPDATED,{groupID:i,topic:r})}},{key:"onMessageSent",value:function(e){var t=e.groupID,n=e.topicID,o=e.lastMessage,i=this.getLocalTopic(t,n);i&&(i.nextMessageSeq+=1,i.updateLastMessage(o),this.emitOuterEvent(D.TOPIC_UPDATED,{groupID:t,topic:i}))}},{key:"onMessageModified",value:function(e){var t=e.to,n=e.time,o=e.sequence,i=e.elements,r=e.cloudCustomData,a=e.messageVersion,s=At(t),c=this.getLocalTopic(s,t);if(c){var u=c.lastMessage;Oe.d("".concat(this._n,".onMessageModified topicID:").concat(t," lastMessage:"),JSON.stringify(u),"options:",JSON.stringify(e)),u&&(null===u.payload||u.lastTime===n&&u.lastSequence===o&&u.version!==a)&&(u.type=i[0].type,u.payload=i[0].content,u.messageForShow=Lt(u.type,u.payload,this.isIntl()),u.cloudCustomData=r,u.version=a,u.lastSequence=o,u.lastTime=n,this.emitOuterEvent(D.TOPIC_UPDATED,{groupID:s,topic:c}))}}},{key:"onMessageRevoked",value:function(e){var t=this;if(0!==e.length){var n=null,o=null,i=!1;e.forEach((function(e){var r=e.to;o=At(r),(n=t.getLocalTopic(o,r))&&(n.reduceUnreadCount()&&(i=!0),n.isLastMessageRevoked(e)&&(n.setLastMessageRevoked(!0),n.setLastMessageRevoker(e.revoker),i=!0))})),i&&this.emitOuterEvent(D.TOPIC_UPDATED,{groupID:o,topic:n})}}},{key:"isLastMessageRevoked",value:function(e){var t=e.topicID,n=e.sequence,o=At(t),i=this.getLocalTopic(o,t),r=!1;return i&&(r=i.isLastMessageRevoked({sequence:n})),r}},{key:"getJoinedCommunityList",value:function(){return this.getModule(7).getGroupList({isGroupWithTopicOnly:!0}).then((function(e){var t=e.data.groupList;return Wi({groupList:void 0===t?[]:t})})).catch((function(e){return Xi(e)}))}},{key:"createTopicInCommunity",value:function(e){var n=this,o="".concat(this._n,".").concat("createTopicInCommunity"),i=e.topicID;if(!ze(i)&&!ht(i))return Xi({code:hi.ILLEGAL_TOPIC_ID});if(e.topicName&&!1===this._filterProfanity("topicName",e))return Xi({code:hi.PROFANITY_FOUND});if(e.introduction&&!1===this._filterProfanity("introduction",e))return Xi({code:hi.PROFANITY_FOUND});if(e.notification&&!1===this._filterProfanity("notification",e))return Xi({code:hi.PROFANITY_FOUND});var r=new Ai("createTopicInCommunity");return this.request({protocolName:ti,requestData:t({},e)}).then((function(i){var a=i.data.topicID;return r.setMessage("topicID:".concat(a)).setNetworkType(n.getNetworkType()).end(),Oe.l("".concat(o," ok")),n._updateTopicMap([t(t({},e),{},{topicID:a})]),Wi({topicID:a})})).catch((function(e){return n.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];r.setError(e,o,i).end()})),Oe.e("".concat(o," failed. error:"),e),Xi(e)}))}},{key:"deleteTopicFromCommunity",value:function(e){var t=this,n="".concat(this._n,".").concat("deleteTopicFromCommunity"),o=e.groupID,i=e.topicIDList,r=void 0===i?[]:i,a=new Ai("deleteTopicFromCommunity");return a.setMessage("groupID:".concat(o," topicIDList:").concat(r)),this.request({protocolName:ni,requestData:{groupID:o,topicIDList:r}}).then((function(e){var n=e.data.resultList,i=[],r=[];(void 0===n?[]:n).forEach((function(e){var t=e.topicID,n=e.errorCode,o=e.errorInfo;0===n?i.push({topicID:t}):r.push({topicID:t,code:n,message:o})}));var s="success count:".concat(i.length,", fail count:").concat(r.length);return a.setMoreMessage("".concat(s)).setNetworkType(t.getNetworkType()).end(),Oe.l("".concat(s)),i.forEach((function(e){t._deleteLocalTopic(o,e.topicID)})),Wi({successTopicList:i,failureTopicList:r})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];a.setError(e,o,i).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"updateTopicProfile",value:function(e){var n=this,o="".concat(this._n,".").concat("updateTopicProfile");if(Oe.l("".concat(o," options:"),e),e.topicName&&!1===this._filterProfanity("topicName",e))return Xi({code:hi.PROFANITY_FOUND});if(e.introduction&&!1===this._filterProfanity("introduction",e))return Xi({code:hi.PROFANITY_FOUND});if(e.notification&&!1===this._filterProfanity("notification",e))return Xi({code:hi.PROFANITY_FOUND});var i=new Ai("updateTopicProfile");return i.setMessage("groupID:".concat(e.groupID," topicID:").concat(e.topicID)),ze(e.muteAllMembers)||(e.muteAllMembers=!0===e.muteAllMembers?"On":"Off"),this.request({protocolName:oi,requestData:t({},e)}).then((function(){return i.setNetworkType(n.getNetworkType()).end(),Oe.l("".concat(o," ok")),n._updateTopicMap([e]),Wi({topic:n.getLocalTopic(e.groupID,e.topicID)})})).catch((function(e){return n.probeNetwork().then((function(t){var n=M(t,2),o=n[0],r=n[1];i.setError(e,o,r).end()})),Oe.e("".concat(o," failed. error:"),e),Xi(e)}))}},{key:"getTopicList",value:function(e){var n=this,o="".concat(this._n,".").concat("getTopicList"),i=e.groupID,r=e.topicIDList,a=void 0===r?[]:r,s=0===a.length,c=new Ai("getTopicList");if(c.setMessage("groupID:".concat(i)),this._getTopicTimeMap.has(i)){var u=this._getTopicTimeMap.get(i),l=u.isGetAll,d=u.time;if((l||!l&&!s)&&Date.now()-d<1e3*this.TOPIC_CACHE_TIME){var f=this._getLocalTopicList(i,a);if(s||f.length===a.length)return c.setNetworkType(this.getNetworkType()).setMoreMessage("from cache, topic count:".concat(f.length)).end(),Oe.l("".concat(o," groupID:").concat(i," from cache, topic count:").concat(f.length)),$i({successTopicList:f,failureTopicList:[]})}}return this.request({protocolName:ii,requestData:{groupID:i,topicIDList:a}}).then((function(e){var r=e.data.topicInfoList,a=[],u=[],l=[];(void 0===r?[]:r).forEach((function(e){var n=e.topic,o=e.selfInfo,i=e.errorCode,r=e.errorInfo,s=n.topicID;0===i?(a.push(t(t({},n),{},{selfInfo:o})),u.push(s)):l.push({topicID:s,code:i,message:r})})),n._updateTopicMap(a),n._handleTopicAtInfo(a);var d="success count:".concat(u.length,", fail count:").concat(l.length);c.setNetworkType(n.getNetworkType()).setMoreMessage("".concat(d)).end(),Oe.l("".concat(o," groupID:").concat(i," from remote, ").concat(d));var f=[];return Ut(u)||(n._getTopicTimeMap.set(i,{time:Date.now(),isGetAll:s}),f=n._getLocalTopicList(i,u)),Wi({successTopicList:f,failureTopicList:l})})).catch((function(e){return n.probeNetwork(e).then((function(t){var n=M(t,2),o=n[0],i=n[1];c.setError(e,o,i).end()})),Oe.e("".concat(o," failed. error:"),e),Xi(e)}))}},{key:"hasLocalTopic",value:function(e,t){return!!this._topicMap.has(e)&&this._topicMap.get(e).has(t)}},{key:"getLocalTopic",value:function(e,t){var n=null;return this._topicMap.has(e)&&(n=this._topicMap.get(e).get(t)),n}},{key:"_getLocalTopicList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this._topicMap.get(e),o=[];return n&&(o=I(n.values())),0===t.length?o:o.filter((function(e){return t.includes(e.topicID)}))}},{key:"_deleteLocalTopic",value:function(e,t){this._topicMap.has(e)&&(this._topicMap.get(e).delete(t),Oe.l("".concat(this._n,"._deleteLocalTopic groupID:").concat(e," topicID:").concat(t)))}},{key:"_updateTopicMap",value:function(e){var t=this,n=[];e.forEach((function(e){var o=e.groupID,i=e.topicID,r=null;t._topicMap.has(o)||t._topicMap.set(o,new Map),t._topicMap.get(o).has(i)?(r=t._topicMap.get(o).get(i)).updateTopic(e):(t._getTopicLastMessage(e),r=new Ar(e,t.isIntl()),t._topicMap.get(o).set(i,r));var a=t._computeUnreadCount(r);r.updateUnreadCount(a),n.push({conversationID:"".concat(A.CONV_GROUP).concat(i),type:A.CONV_TOPIC,unreadCount:a})})),n.length>0&&this.getModule(11).updateTopicConversation(n)}},{key:"resetGetTopicTime",value:function(e){var t=this;ze(e)?I(this._getTopicTimeMap.keys()).forEach((function(e){t._getTopicTimeMap.set(e,0)})):this._getTopicTimeMap.set(e,0)}},{key:"getTopicListOnReconnected",value:function(){var e=this,t=I(this._topicMap.keys()),n=[];t.forEach((function(t){var o=[];e._getLocalTopicList(t).forEach((function(t){var n=t.lastMessage.lastTime,i=void 0===n?0:n;Date.now()-1e3*i<1e3*e.TOPIC_LAST_ACTIVE_TIME&&o.push(t.topicID)})),o.length>0&&n.push({groupID:t,topicIDList:o})})),Oe.l("".concat(this._n,".getTopicListOnReconnected. active community count:").concat(n.length)),this._relayGetTopicList(n)}},{key:"_relayGetTopicList",value:function(e){var t=this;if(0!==e.length){var n=e.shift(),o=n.topicIDList.length>5?"topicIDList.length:".concat(n.topicIDList.length):"topicIDList:".concat(n.topicIDList),i=new Ai("relayGetTopicList");i.setMessage(o),Oe.l("".concat(this._n,"._relayGetTopicList. ").concat(o)),this.getTopicList(n).then((function(){i.setNetworkType(t.getNetworkType()).end(),t._relayGetTopicList(e)})).catch((function(n){t.probeNetwork().then((function(e){var t=M(e,2),o=t[0],r=t[1];i.setError(n,o,r).end()})),t._relayGetTopicList(e)}))}}},{key:"_handleTopicAtInfo",value:function(e){var n=this;0!==e.length&&e.forEach((function(e){var o=e.groupID,i=e.topicID,r=e.groupAtInfoList,a=[];ze(r)||(r.forEach((function(e){a.push(t(t({},e),{},{groupID:o,topicID:i}))})),n.getModule(11).onNewGroupAtTips({dataList:a}))}))}},{key:"_getTopicLastMessage",value:function(e){if(!ze(e.lastMsg)){var t={time:e.lastMsg.time,sequence:e.lastMsg.sequence,from:e.lastMsg.from,payload:e.lastMsg.elements[0]?e.lastMsg.elements[0].content:null,type:e.lastMsg.elements[0]?e.lastMsg.elements[0].type:"",nick:e.lastMsg.nick,version:e.lastMsg.messageVersion,cloudCustomData:e.lastMsg.cloudCustomData,isRevoked:2===e.lastMsg.isPlaceMessage,revoker:Ut(e.lastMsg.revokerInfo)?null:e.lastMsg.revokerInfo.revoker};e.lastMessage=t}}},{key:"deleteTopicListInCommunity",value:function(e){var t=this,n=this._getLocalTopicList(e),o=this.getModule(11);n.forEach((function(n){var i=n.topicID;t._deleteLocalTopic(e,i),t._getTopicTimeMap.delete(e),o.deleteLocalConversation("".concat(A.CONV_GROUP).concat(i))}))}},{key:"_computeUnreadCount",value:function(e){var t=e.selfInfo,n=t.excludedUnreadSequenceList,o=t.readedSequence,i=e.nextMessageSeq-e.selfInfo.readedSequence-1;if(Ye(n)){var r=0;n.forEach((function(t){t>=o&&t<=e.nextMessageSeq-1&&(r+=1)})),r>=1&&(i-=r)}return i<0?0:i}},{key:"_filterProfanity",value:function(e,t){var n=this.getModule(29);if(!n)return!0;var o=n.filterText(t[e],F),i=o.isAllowedToSend,r=o.modifiedText;return!0===i&&(t[e]=r,!0)}},{key:"updateLastMessage",value:function(e,t){var n=At(e),o=this.getLocalTopic(n,e);if(o){var i=t.sequence+1;o.updateNextMessageSeq(i),o.updateLastMessage(t),this.emitOuterEvent(D.TOPIC_UPDATED,{groupID:n,topic:o})}}},{key:"getMessageExtensions",value:function(e,t){Oe.l("".concat(this._n,".getMessageExtensions startSequence:").concat(t));var n=At(e.to);return this.request({protocolName:No,requestData:{groupID:n,topicID:e.to,messageSequence:e.sequence,startSequence:t}})}},{key:"modifyMessageExtensions",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Oe.l("".concat(this._n,".modifyMessageExtensions operateType:").concat(n));var o=At(e.to);return this.request({protocolName:wo,requestData:{groupID:o,topicID:e.to,messageSequence:e.sequence,extensionList:t,operateType:n}})}},{key:"reset",value:function(){Oe.l("".concat(this._n,".reset")),this._topicMap.clear(),this._getTopicTimeMap.clear(),this.TOPIC_CACHE_TIME=300,this.TOPIC_LAST_ACTIVE_TIME=3600}}]),o}(yn),Or=function(){function e(t){r(this,e),this._userModule=t,this._n="ProfileHandler",this.TAG="profile",this.accountProfileMap=new Map,this.expirationTime=864e5}return c(e,[{key:"setExpirationTime",value:function(e){this.expirationTime=e}},{key:"getUserProfile",value:function(e){var t=this,n="".concat(this._n,".").concat("getUserProfile"),o=e.userIDList;e.fromAccount=this._userModule.getMyAccount(),o.length>100&&(Oe.w("".concat(n," ").concat(Nt(100))),o.length=100);for(var i,r=[],a=[],s=0,c=o.length;s<c;s++)i=o[s],this._userModule.isMyFriend(i)&&this._contains(i)?a.push(this._getProfileFromMap(i)):r.push(i);if(0===r.length)return $i(a);e.toAccount=r;var u=e.bFromGetMyProfile||!1,l=[];e.toAccount.forEach((function(e){l.push({toAccount:e,standardSequence:0,customSequence:0})})),e.userItem=l;var d=new Ai("getUserProfile");return d.setMessage(o.length>5?"userIDList.length:".concat(o.length):"userIDList:".concat(o)),this._userModule.request({protocolName:En,requestData:e}).then((function(e){d.setNetworkType(t._userModule.getNetworkType()).end(),Oe.i("".concat(n," ok"));var o=t._handleResponse(e).concat(a);return Wi(u?o[0]:o)})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];d.setError(e,o,i).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"getMyProfile",value:function(){var e=this._userModule.getMyAccount(),t="".concat(this._n,".getMyProfile");if(Oe.l("".concat(t," myAccount:").concat(e)),this._fill(),this._contains(e)){var n=this._getProfileFromMap(e);return Oe.d("".concat(t," from cache, myProfile:").concat(JSON.stringify(n))),$i(n)}return this.getUserProfile({fromAccount:e,userIDList:[e],bFromGetMyProfile:!0})}},{key:"_handleResponse",value:function(e){var t=e.data.userProfileItem;if(!Ye(t))return[];for(var n=[],o=Date.now(),i=0,r=t.length;i<r;i++){var a=t[i],s=a.to,c=a.profileItem;if("@TLS#NOT_FOUND"!==s&&""!==s){var u=this._update(s,this._getLatestProfileFromResponse(s,c)).latestProfile;n.push(u)}}return Oe.l("".concat(this._n,"._handleResponse cost ").concat(Date.now()-o," ms")),n}},{key:"_getLatestProfileFromResponse",value:function(e,t){var n={userID:e,profileCustomField:[]};if(!Ut(t))for(var o=0,i=t.length;o<i;o++)if(t[o].tag.indexOf("Tag_Profile_Custom")>-1)n.profileCustomField.push({key:t[o].tag,value:t[o].value});else switch(t[o].tag){case we.NICK:n.nick=t[o].value;break;case we.GENDER:n.gender=t[o].value;break;case we.BIRTHDAY:n.birthday=t[o].value;break;case we.LOCATION:n.location=t[o].value;break;case we.SELFSIGNATURE:n.selfSignature=t[o].value;break;case we.ALLOWTYPE:n.allowType=t[o].value;break;case we.LANGUAGE:n.language=t[o].value;break;case we.AVATAR:n.avatar=t[o].value;break;case we.MESSAGESETTINGS:n.messageSettings=t[o].value;break;case we.ADMINFORBIDTYPE:n.adminForbidType=t[o].value;break;case we.LEVEL:n.level=t[o].value;break;case we.ROLE:n.role=t[o].value;break;default:Oe.w("".concat(this._n,"._getLatestProfileFromResponse unknown tag:"),t[o].tag,t[o].value)}return n}},{key:"updateMyProfile",value:function(e){var t=this,n="".concat(this._n,".").concat("updateMyProfile");if(e.nick&&!1===this._userModule.filterProfanity("nick",e))return Xi({code:hi.PROFANITY_FOUND});if(e.selfSignature&&!1===this._userModule.filterProfanity("selfSignature",e))return Xi({code:hi.PROFANITY_FOUND});var o=new Ai("updateMyProfile");o.setMessage(JSON.stringify(e));var i=(new rr).validate(e);if(!i.valid)return o.setCode(hi.UPDATE_PROFILE_INVALID_PARAM).setMoreMessage("info:".concat(i.tips)).setNetworkType(this._userModule.getNetworkType()).end(),Oe.e("".concat(n," info:").concat(i.tips)),Xi({code:hi.UPDATE_PROFILE_INVALID_PARAM});var r=[];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&("profileCustomField"===a?e.profileCustomField.forEach((function(e){r.push({tag:e.key,value:e.value})})):r.push({tag:we[a.toUpperCase()],value:e[a]}));if(0===r.length){var s=new Yi({code:hi.UPDATE_PROFILE_NO_KEY});return o.setError(s,!0,this._userModule.getNetworkType()).end(),Oe.e("".concat(n," failed. error:"),s),Xi(s)}var c=this._userModule.getMyAccount();return this._userModule.request({protocolName:kn,requestData:{fromAccount:c,profileItem:r}}).then((function(i){o.setNetworkType(t._userModule.getNetworkType()).end(),Oe.i("".concat(n," ok"));var r=t._update(c,e),a=r.isProfileUpdated,s=r.latestProfile;return!0===a&&t._userModule.emitOuterEvent(D.PROFILE_UPDATED,[s]),$i(s)})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=M(t,2),i=n[0],r=n[1];o.setError(e,i,r).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"onProfileModified",value:function(e){var t=e.dataList;if(!Ut(t)){var n,o=t.length;Oe.d("".concat(this._n,".onProfileModified count:").concat(o," dataList:"),e.dataList);for(var i=[],r=0;r<o;r++){n=t[r].userID;var a=this._update(n,this._getLatestProfileFromResponse(n,t[r].profileList)),s=a.isProfileUpdated,c=a.latestProfile;!0===s&&i.push(c)}i.length>0&&(this._userModule.emitInnerEvent(tr,i),this._userModule.emitOuterEvent(D.PROFILE_UPDATED,i))}}},{key:"_fill",value:function(){if(0===this.accountProfileMap.size){for(var e=this._getCachedProfiles(),t=Date.now(),n=0,o=e.length;n<o;n++)t-e[n].lastUpdatedTime<this.expirationTime&&this.accountProfileMap.set(e[n].userID,e[n]);Oe.l("".concat(this._n,"._fill from cache, size:").concat(this.accountProfileMap.size))}}},{key:"_update",value:function(e,t){var n,o=!1,i=Date.now();return this._contains(e)?(n=this._getProfileFromMap(e),t.profileCustomField&&!0===dt(n.profileCustomField,t.profileCustomField)&&(n.lastUpdatedTime=i,o=!0),et(n,t,["profileCustomField"])>0&&(n.lastUpdatedTime=i,o=!0)):(n=new rr(t),(this._userModule.isMyFriend(e)||e===this._userModule.getMyAccount())&&(n.lastUpdatedTime=i,o=!0,this.accountProfileMap.set(e,n))),this._flush(e===this._userModule.getMyAccount()),Oe.l("".concat(this._n,"._update account:").concat(e," isProfileUpdated:").concat(o)),{isProfileUpdated:o,latestProfile:n}}},{key:"_flush",value:function(e){var t=I(this.accountProfileMap.values()),n=this._userModule.getStorageModule();Oe.d("".concat(this._n,"._flush length:").concat(t.length," flushAtOnce:").concat(e)),n.setItem(this.TAG,t,e)}},{key:"_contains",value:function(e){return this.accountProfileMap.has(e)}},{key:"_getProfileFromMap",value:function(e){return this.accountProfileMap.get(e)}},{key:"_getCachedProfiles",value:function(){var e=this._userModule.getStorageModule().getItem(this.TAG);return Ut(e)?[]:e}},{key:"onConversationsProfileUpdated",value:function(e){for(var t,n,o,i=[],r=0,a=e.length;r<a;r++)n=(t=e[r]).userID,this._userModule.isMyFriend(n)&&(this._contains(n)?(o=this._getProfileFromMap(n),et(o,t)>0&&i.push(n)):i.push(t.userID));0!==i.length&&(Oe.i("".concat(this._n,".onConversationsProfileUpdated toAccountList:").concat(i)),this.getUserProfile({userIDList:i}))}},{key:"getNickAndAvatarByUserID",value:function(e){if(this._contains(e)){var t=this._getProfileFromMap(e);return{nick:t.nick,avatar:t.avatar}}return{nick:"",avatar:""}}},{key:"reset",value:function(){this._flush(!0),this.accountProfileMap.clear()}}]),e}(),Rr=c((function e(t){r(this,e),Ut||(this.userID=t.userID||"",this.timeStamp=t.timeStamp||0)})),wr=function(){function e(t){r(this,e),this._userModule=t,this._n="BlacklistHandler",this._blacklistMap=new Map,this.startIndex=0,this.maxLimited=100,this.currentSequence=0}return c(e,[{key:"getLocalBlacklist",value:function(){return I(this._blacklistMap.keys())}},{key:"getBlacklist",value:function(){var e=this,t="".concat(this._n,".getBlacklist"),n={fromAccount:this._userModule.getMyAccount(),maxLimited:this.maxLimited,startIndex:0,lastSequence:this.currentSequence},o=new Ai("getBlacklist");return this._userModule.request({protocolName:Dn,requestData:n}).then((function(n){var i=n.data,r=i.blackListItem,a=i.currentSequence,s=Ut(r)?0:r.length;o.setNetworkType(e._userModule.getNetworkType()).setMessage("count:".concat(s)).end(),Oe.i("".concat(t," ok")),e.currentSequence=a,e._handleResponse(r,!0),e._userModule.emitOuterEvent(D.BLACKLIST_UPDATED,I(e._blacklistMap.keys()))})).catch((function(n){return e._userModule.probeNetwork().then((function(e){var t=M(e,2),i=t[0],r=t[1];o.setError(n,i,r).end()})),Oe.e("".concat(t," failed. error:"),n),Xi(n)}))}},{key:"addBlacklist",value:function(e){var t=this,n=new Ai("addToBlacklist"),o="".concat(this._n,".addBlacklist"),i=this._userModule.getMyAccount();if(1===e.userIDList.length&&e.userIDList[0]===i){var r=hi.CANNOT_ADD_SELF_TO_BLACKLIST,a=this._userModule.getErrorMessage(r);n.setCode(r).setMessage(a).setNetworkType(this._userModule.getNetworkType()).end();var s=new Yi({code:r});return Oe.e("".concat(o," failed. error:"),s),Xi(s)}return e.userIDList.includes(i)&&(e.userIDList=e.userIDList.filter((function(e){return e!==i}))),e.fromAccount=this._userModule.getMyAccount(),e.toAccount=e.userIDList,this._userModule.request({protocolName:An,requestData:e}).then((function(i){return n.setNetworkType(t._userModule.getNetworkType()).setMessage(e.userIDList.length>5?"userIDList.length:".concat(e.userIDList.length):"userIDList:".concat(e.userIDList)).end(),Oe.i("".concat(o," ok")),t._handleResponse(i.resultItem,!0),Wi(I(t._blacklistMap.keys()))})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var o=M(t,2),i=o[0],r=o[1];n.setError(e,i,r).end()})),Oe.e("".concat(o," failed. error:"),e),Xi(e)}))}},{key:"_handleResponse",value:function(e,t){if(!Ut(e))for(var n,o,i,r=0,a=e.length;r<a;r++)o=e[r].to,i=e[r].resultCode,(ze(i)||0===i)&&(t?((n=this._blacklistMap.has(o)?this._blacklistMap.get(o):new Rr).userID=o,!Ut(e[r].addBlackTimeStamp)&&(n.timeStamp=e[r].addBlackTimeStamp),this._blacklistMap.set(o,n)):this._blacklistMap.has(o)&&(n=this._blacklistMap.get(o),this._blacklistMap.delete(o)));Oe.l("".concat(this._n,"._handleResponse total:").concat(this._blacklistMap.size," bAdd:").concat(t))}},{key:"deleteBlacklist",value:function(e){var t=this,n="".concat(this._n,".deleteBlacklist"),o=new Ai("removeFromBlacklist");return e.fromAccount=this._userModule.getMyAccount(),e.toAccount=e.userIDList,this._userModule.request({protocolName:Ln,requestData:e}).then((function(i){return o.setNetworkType(t._userModule.getNetworkType()).setMessage(e.userIDList.length>5?"userIDList.length:".concat(e.userIDList.length):"userIDList:".concat(e.userIDList)).end(),Oe.i("".concat(n," ok")),t._handleResponse(i.data.resultItem,!1),Wi(I(t._blacklistMap.keys()))})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=M(t,2),i=n[0],r=n[1];o.setError(e,i,r).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"onAccountDeleted",value:function(e){for(var t,n=[],o=0,i=e.length;o<i;o++)t=e[o],this._blacklistMap.has(t)&&(this._blacklistMap.delete(t),n.push(t));n.length>0&&(Oe.l("".concat(this._n,".onAccountDeleted count:").concat(n.length," userIDList:"),n),this._userModule.emitOuterEvent(D.BLACKLIST_UPDATED,I(this._blacklistMap.keys())))}},{key:"onAccountAdded",value:function(e){for(var t,n=[],o=0,i=e.length;o<i;o++)t=e[o],this._blacklistMap.has(t)||(this._blacklistMap.set(t,new Rr({userID:t})),n.push(t));n.length>0&&(Oe.l("".concat(this._n,".onAccountAdded count:").concat(n.length," userIDList:"),n),this._userModule.emitOuterEvent(D.BLACKLIST_UPDATED,I(this._blacklistMap.keys())))}},{key:"reset",value:function(){this._blacklistMap.clear(),this.startIndex=0,this.maxLimited=100,this.currentSequence=0}}]),e}(),Nr=function(e){var t=String(e).replace(/[=]+$/,""),n="";if(t.length%4==1)return"";for(var o,i,r=0,a=0;i=t.charAt(a++);~i&&(o=r%4?64*o+i:i,r++%4)?n+=String.fromCharCode(255&o>>(-2*r&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);try{return decodeURIComponent(escape(n))}catch(l){return""}},Pr=function(){function e(t){r(this,e),this._userModule=t,this._n="UserStatusHandler",this.MAX_QUERY_USER_COUNT=500,this.MAX_SUBSCRIBE_USER_COUNT=100,this.MAX_UNSUBSCRIBE_USER_COUNT=100,this._userModule.getInnerEmitterInstance().on(er,this._onCloudConfigUpdated,this)}return c(e,[{key:"_onCloudConfigUpdated",value:function(){var e=this._userModule.getCloudConfig("status_query_count"),t=this._userModule.getCloudConfig("status_sub_count"),n=this._userModule.getCloudConfig("status_unsub_count");Oe.l("".concat(this._n,"._onCloudConfigUpdated statusQueryCount:").concat(e," statusSubscribeCount:").concat(t)+" statusUnsubscribeCount:".concat(n)),ze(e)||(this.MAX_QUERY_USER_COUNT=parseInt(e,10)),ze(e)||(this.MAX_SUBSCRIBE_USER_COUNT=parseInt(t,10)),ze(e)||(this.MAX_UNSUBSCRIBE_USER_COUNT=parseInt(n,10))}},{key:"onUserStatusUpdated",value:function(e){var t=e.dataList,n=this._userModule.getMyUserID(),o=this._userModule.getModule(12),i=t.map((function(e){var t=e.to,i=e.statusType,r=e.customStatus,a=Nr(r);return t===n&&o.setCustomStatus(a),{userID:t,statusType:i,customStatus:a}}));this._userModule.emitOuterEvent(D.USER_STATUS_UPDATED,i)}},{key:"setSelfStatus",value:function(e){var t=this,n="".concat(this._n,".setSelfStatus");if(!1===this._userModule.filterProfanity("customStatus",e))return Xi({code:hi.PROFANITY_FOUND});var o=new Ai("setSelfStatus"),i=e.customStatus;return this._userModule.request({protocolName:ri,requestData:{customStatus:i}}).then((function(e){return o.setNetworkType(t._userModule.getNetworkType()).setMessage("customStatus:".concat(i)).end(),Oe.l("".concat(n," ok. customStatus:").concat(i)),t._userModule.getModule(12).setCustomStatus(i),Wi({userID:t._userModule.getMyUserID(),statusType:1,customStatus:i})})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=M(t,2),i=n[0],r=n[1];o.setError(e,i,r).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"getUserStatus",value:function(e){var t=this,n="".concat(this._n,".getUserStatus"),o=e.userIDList,i=void 0===o?[]:o,r=this._userModule.getMyUserID(),a=I(i),s=void 0,c=a.indexOf(r);if(c>-1){a.splice(c,1);var u=this._userModule.getModule(12).getCustomStatus();s={userID:r,statusType:1,customStatus:u}}if(0===a.length)return $i({successUserList:[s],failureUserList:[]});if(!this._userModule.canIUse(x.USER_STATUS))return Xi({code:hi.CANNOT_USE_COMMERCIAL_ABILITY});a.length>this.MAX_QUERY_USER_COUNT&&(Oe.w("".concat(n," ").concat(Nt(this.MAX_QUERY_USER_COUNT))),a=i.slice(0,this.MAX_QUERY_USER_COUNT));var l=new Ai("getUserStatus");return this._userModule.request({protocolName:ai,requestData:{userIDList:a}}).then((function(e){var o=e.data,r=o.successUserList,a=void 0===r?[]:r,c=o.failureUserList,u=void 0===c?[]:c,d=a.map((function(e){var t=e.userID,n=e.statusType,o=e.customStatus;return{userID:t,statusType:n,customStatus:Nr(o)}})),f=u.map((function(e){var t=e.userID,n=e.invalidUserID,o=e.errorCode,i=e.errorInfo;return{userID:Ut(n)?t:n,code:o,message:i}}));ze(s)||d.unshift(s);var p="userID count:".concat(i.length,", success count:").concat(d.length,", fail count:").concat(f.length);return l.setNetworkType(t._userModule.getNetworkType()).setMessage("".concat(p)).end(),Oe.l("".concat(n," ok. ").concat(p,".")),Wi({successUserList:d,failureUserList:f})})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0],r=n[1];l.setMessage("userID count:".concat(i.length)).setError(e,o,r).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"subscribeUserStatus",value:function(e){var t=this;if(!this._userModule.canIUse(x.USER_STATUS))return Xi({code:hi.CANNOT_USE_COMMERCIAL_ABILITY});var n="".concat(this._n,".subscribeUserStatus"),o=e.userIDList,i=void 0===o?[]:o,r=I(i);r.length>this.MAX_SUBSCRIBE_USER_COUNT&&(Oe.w("".concat(n," ").concat(Nt(this.MAX_SUBSCRIBE_USER_COUNT))),r=i.slice(0,this.MAX_SUBSCRIBE_USER_COUNT));var a=new Ai("subscribeUserStatus"),s="userID count:".concat(i.length);return Oe.l("".concat(n," ").concat(s)),this._userModule.request({protocolName:si,requestData:{userIDList:r}}).then((function(e){var o=e.data.failureUserList,i=(void 0===o?[]:o).map((function(e){var t=e.userID,n=e.invalidUserID,o=e.errorCode,i=e.errorInfo;return{userID:Ut(n)?t:n,code:o,message:i}}));return a.setNetworkType(t._userModule.getNetworkType()).setMessage("".concat(s," fail count:").concat(i.length)).end(),Oe.l("".concat(n," ok. fail count:").concat(i.length,".")),Wi({failureUserList:i})})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];a.setMessage("".concat(s)).setError(e,o,i).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"unsubscribeUserStatus",value:function(e){var t=this;if(!this._userModule.canIUse(x.USER_STATUS))return Xi({code:hi.CANNOT_USE_COMMERCIAL_ABILITY});var n="".concat(this._n,".unsubscribeUserStatus"),o=(e||{}).userIDList,i=void 0===o?[]:o,r=I(i);i.length>this.MAX_UNSUBSCRIBE_USER_COUNT&&(Oe.w("".concat(n," ").concat(Nt(this.MAX_UNSUBSCRIBE_USER_COUNT))),r=i.slice(0,this.MAX_UNSUBSCRIBE_USER_COUNT));var a=new Ai("unsubscribeUserStatus"),s="userID count:".concat(i.length);Oe.l("".concat(n," ").concat(s));var c={userIDList:r};return 0===r.length&&(c.userIDList=void 0,c.unsubscribeAll=1),this._userModule.request({protocolName:ci,requestData:c}).then((function(e){var o=e.data.failureUserList,i=(void 0===o?[]:o).map((function(e){var t=e.userID,n=e.invalidUserID,o=e.errorCode,i=e.errorInfo;return{userID:Ut(n)?t:n,code:o,message:i}}));return a.setNetworkType(t._userModule.getNetworkType()).setMessage("".concat(s," fail count:").concat(i.length)).end(),Oe.l("".concat(n," ok. fail count:").concat(i.length,".")),Wi({failureUserList:i})})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];a.setMessage("".concat(s)).setError(e,o,i).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"reset",value:function(){this.MAX_QUERY_USER_COUNT=500,this.MAX_SUBSCRIBE_USER_COUNT=100,this.MAX_UNSUBSCRIBE_USER_COUNT=100}}]),e}(),Gr=function(e){l(n,e);var t=y(n);function n(e){var o;return r(this,n),(o=t.call(this,e))._n="UserModule",o._profileHandler=new Or(v(o)),o._blacklistHandler=new wr(v(o)),o._userStatusHandler=new Pr(v(o)),o.getInnerEmitterInstance().on(Zi,o.onContextUpdated,v(o)),o}return c(n,[{key:"onContextUpdated",value:function(e){this._profileHandler.getMyProfile(),this._blacklistHandler.getBlacklist()}},{key:"onProfileModified",value:function(e){this._profileHandler.onProfileModified(e)}},{key:"onRelationChainModified",value:function(e){var t=e.dataList;if(!Ut(t)){var n=[];t.forEach((function(e){e.blackListDelAccount&&n.push.apply(n,I(e.blackListDelAccount))})),n.length>0&&this._blacklistHandler.onAccountDeleted(n);var o=[];t.forEach((function(e){e.blackListAddAccount&&o.push.apply(o,I(e.blackListAddAccount))})),o.length>0&&this._blacklistHandler.onAccountAdded(o)}}},{key:"onConversationsProfileUpdated",value:function(e){this._profileHandler.onConversationsProfileUpdated(e)}},{key:"getMyAccount",value:function(){return this.getMyUserID()}},{key:"getMyProfile",value:function(){return this._profileHandler.getMyProfile()}},{key:"getStorageModule",value:function(){return this.getModule(13)}},{key:"filterProfanity",value:function(e,t){var n=this.getModule(29);if(!n)return!0;var o=n.filterText(t[e],"user_profile"),i=o.isAllowedToSend,r=o.modifiedText;return!0===i&&(t[e]=r,!0)}},{key:"isMyFriend",value:function(e){var t=this.getModule(8);return!!t&&t.isMyFriend(e)}},{key:"getUserProfile",value:function(e){return this._profileHandler.getUserProfile(e)}},{key:"updateMyProfile",value:function(e){return this._profileHandler.updateMyProfile(e)}},{key:"getNickAndAvatarByUserID",value:function(e){return this._profileHandler.getNickAndAvatarByUserID(e)}},{key:"getLocalBlacklist",value:function(){var e=this._blacklistHandler.getLocalBlacklist();return $i(e)}},{key:"addBlacklist",value:function(e){return this._blacklistHandler.addBlacklist(e)}},{key:"deleteBlacklist",value:function(e){return this._blacklistHandler.deleteBlacklist(e)}},{key:"onUserStatusUpdated",value:function(e){this._userStatusHandler.onUserStatusUpdated(e)}},{key:"setSelfStatus",value:function(e){return this._userStatusHandler.setSelfStatus(e)}},{key:"getUserStatus",value:function(e){return this._userStatusHandler.getUserStatus(e)}},{key:"subscribeUserStatus",value:function(e){return this._userStatusHandler.subscribeUserStatus(e)}},{key:"unsubscribeUserStatus",value:function(e){return this._userStatusHandler.unsubscribeUserStatus(e)}},{key:"reset",value:function(){Oe.l("".concat(this._n,".reset")),this._profileHandler.reset(),this._blacklistHandler.reset(),this._userStatusHandler.reset()}}]),n}(yn),Ur=function(){function e(t,n){r(this,e),this._m=t,this._isLoggedIn=!1,this._SDKAppID=n.SDKAppID,this._userID=n.userID||"",this._userSig=n.userSig||"",this._version="2.27.6",this._a2Key="",this._tinyID="",this._customStatus="",this._contentType="json",this._unlimitedAVChatRoom=n.unlimitedAVChatRoom,this._scene=n.scene||"",this._oversea=n.oversea,this._instanceID=n.instanceID,this._statusInstanceID=0,this._isDevMode=n.devMode,this._proxyServer=n.proxyServer,this._fileUploadProxy=n.fileUploadProxy,this._fileDownloadProxy=n.fileDownloadProxy}return c(e,[{key:"isLoggedIn",value:function(){return this._isLoggedIn}},{key:"isOversea",value:function(){return this._oversea}},{key:"isPrivateNetWork",value:function(){return this._proxyServer}},{key:"isDevMode",value:function(){return this._isDevMode}},{key:"isSingaporeSite",value:function(){return this._SDKAppID>=2e7&&this._SDKAppID<3e7||this._SDKAppID>=172e7&&this._SDKAppID<173e7}},{key:"isKoreaSite",value:function(){return this._SDKAppID>=3e7&&this._SDKAppID<4e7||this._SDKAppID>=173e7&&this._SDKAppID<174e7}},{key:"isGermanySite",value:function(){return this._SDKAppID>=4e7&&this._SDKAppID<5e7||this._SDKAppID>=174e7&&this._SDKAppID<175e7}},{key:"isIndiaSite",value:function(){return this._SDKAppID>=5e7&&this._SDKAppID<6e7||this._SDKAppID>=175e7&&this._SDKAppID<176e7}},{key:"isJapanSite",value:function(){return this._SDKAppID>=6e7&&this._SDKAppID<7e7||this._SDKAppID>=176e7&&this._SDKAppID<177e7}},{key:"isUSASite",value:function(){return this._SDKAppID>=7e7&&this._SDKAppID<8e7||this._SDKAppID>=177e7&&this._SDKAppID<178e7}},{key:"isIntl",value:function(){return 0===(e=this._SDKAppID)||e>=2e7&&e<8e7||e>=172e7&&e<178e7;var e}},{key:"isUnlimitedAVChatRoom",value:function(){return this._unlimitedAVChatRoom}},{key:"setUserID",value:function(e){this._userID=e}},{key:"getUserID",value:function(){return this._userID}},{key:"setUserSig",value:function(e){this._userSig=e}},{key:"getUserSig",value:function(){return this._userSig}},{key:"getSDKAppID",value:function(){return this._SDKAppID}},{key:"setTinyID",value:function(e){this._tinyID=e,this._isLoggedIn=!0}},{key:"getTinyID",value:function(){return this._tinyID}},{key:"setCustomStatus",value:function(e){this._customStatus=e}},{key:"getCustomStatus",value:function(){return this._customStatus}},{key:"getScene",value:function(){return ye?window.tencent_cloud_im_csig_flutter_for_web_25F_cy:this._isTUIKit()?"tuikit":this._scene}},{key:"getInstanceID",value:function(){return this._instanceID}},{key:"getStatusInstanceID",value:function(){return this._statusInstanceID}},{key:"setStatusInstanceID",value:function(e){this._statusInstanceID=e}},{key:"getVersion",value:function(){return this._version}},{key:"getA2Key",value:function(){return this._a2Key}},{key:"setA2Key",value:function(e){this._a2Key=e}},{key:"getContentType",value:function(){return this._contentType}},{key:"getProxyServer",value:function(){return this._proxyServer}},{key:"getFileUploadProxy",value:function(){return this._fileUploadProxy}},{key:"getFileDownloadProxy",value:function(){return this._fileDownloadProxy}},{key:"_isTUIKit",value:function(){var e=!1,t=!1,n=!1,o=!1,i=[];$&&(i=Object.keys(J)),X&&(i=z?Object.keys(uni):Object.keys(window));for(var r=0,a=i.length;r<a;r++)if(i[r].toLowerCase().includes("uikit")){e=!0;break}if(i=null,$&&!Xe(J.createGamePortal)&&Xe(getApp)&&!ze(getApp())){var s=getApp().globalData;We(s)&&!0===s.isTUIKit&&(t=!0)}!0===this._m.getModule(13).getStorageSync("TIM_".concat(this._SDKAppID,"_isTUIKit"))&&(n=!0);var c=null;if(q&&!H&&"undefined"==typeof uni&&__wxConfig&&(c=__wxConfig.pages),V&&"undefined"==typeof uni&&__qqConfig&&(c=__qqConfig.pages),Ye(c)&&c.length>0){for(var u=0,l=c.length;u<l;u++)if(c[u].toLowerCase().includes("tui")){o=!0;break}c=null}return e||t||n||o}},{key:"reset",value:function(){this._isLoggedIn=!1,this._userSig="",this._a2Key="",this._tinyID="",this._customStatus="",this._statusInstanceID=0}}]),e}(),xr=function(e){l(n,e);var t=y(n);function n(e){var o;return r(this,n),(o=t.call(this,e))._n="SignModule",o._helloInterval=120,o._lastLoginTs=0,o._lastWsHelloTs=0,o._isWebUniapp=0,nr.mixin(v(o)),o}return c(n,[{key:"onCheckTimer",value:function(e){this.isLoggedIn()&&e%this._helloInterval==0&&this._hello()}},{key:"login",value:function(e){var t="";if(this.isLoggedIn()){var n=this.getMyUserID();return(t=this.getErrorMessage("RepeatLogin",n))&&Oe.w(t),$i({actionStatus:"OK",errorCode:0,errorInfo:t,repeatLogin:!0})}if(Date.now()-this._lastLoginTs<=15e3)return this.outputWarning("LoggingIn",e.userID),Xi({code:hi.REPEAT_LOGIN});Oe.l("".concat(this._n,".login userID:").concat(e.userID));var o=this._checkLoginInfo(e);if(0!==o.code)return Xi(o);var i=this.getModule(12),r=e.userID,a=e.userSig;return i.setUserID(r),i.setUserSig(a),this.getModule(20).updateProtocolConfig(),this._login()}},{key:"_login",value:function(){var e=this,t=this.getModule(12),n=t.getScene(),o=0,i=new Ai("login");i.setMessage("".concat(n)).setMoreMessage("identifier:".concat(this.getMyUserID())),z?"tuikit"===n?i.setUIPlatform(4):i.setUIPlatform(3):$?"tuikit"===n?i.setUIPlatform(12):i.setUIPlatform(11):X&&(ye?"flutter_web_uikit"===n?i.setUIPlatform(21):i.setUIPlatform(20):this._isReactUIKit()?me?i.setUIPlatform(25):i.setUIPlatform(24):me?"tuikit"===n?i.setUIPlatform(17):i.setUIPlatform(16):"tuikit"===n?i.setUIPlatform(14):i.setUIPlatform(13));var r=this.getModule(28);if(r.canIUseOfflinePush()){this._isWebUniapp=r.getUniAppPlatform();var a=this._getStatusInstanceID();t.setStatusInstanceID(a),this.getModule(20).updateProtocolConfig(),o=r.getDeviceBrand()}var s="".concat(this._n,"._login");return this._lastLoginTs=Date.now(),this.request({protocolName:Mn,requestData:{deviceBrand:o,isWebUniapp:this._isWebUniapp}}).then((function(o){e._lastLoginTs=0;var r=Date.now(),a=null,c=o.data,u=c.a2Key,l=c.tinyID,d=c.helloInterval,f=c.instanceID,p=c.timeStamp,h=c.customStatus,g=void 0===h?"":h,_=c.purchaseBits;Oe.l("".concat(s," ok. scene:").concat(n," helloInterval:").concat(d," instanceID:").concat(f," timeStamp:").concat(p));var v=1e3*p,m=r-i.getStartTs(),y=v+parseInt(m/2)-r,M=i.getStartTs()+y;if(i.start(M),function(e,t){Te=t;var n=new Date;n.setTime(e),Oe.i("baseTime from server:".concat(n," offset:").concat(Te))}(v,y),!l)throw a=new Yi({code:hi.NO_TINYID}),i.setError(a,!0,e.getNetworkType()).end(),a;if(!u)throw a=new Yi({code:hi.NO_A2KEY}),i.setError(a,!0,e.getNetworkType()).end(),a;var I=Nr(g);i.setNetworkType(e.getNetworkType()).setMoreMessage("helloInterval:".concat(d," instanceID:").concat(f," offset:").concat(y," customStatus:").concat(I)).end(),t.setA2Key(u),t.setTinyID(l),t.setStatusInstanceID(f),t.setCustomStatus(I),_&&e.getModule(27).onPushedConfig({errorCode:0,expiredTime:0,purchaseBits:_}),e.getModule(20).updateProtocolConfig(),e.emitInnerEvent(Zi),e._helloInterval=d,e.triggerReady();var C=e.getModule(28);return C.canIUseOfflinePush()&&(uni.setStorageSync("timUniAppInstanceID",f),C.init()),e._fetchCloudControlConfig(),e.getModule(29).init(),o})).catch((function(t){return e.probeNetwork().then((function(e){var n=M(e,2),o=n[0],r=n[1];i.setError(t,o,r).end(!0)})),e._m.setNotReadyReason(hi.LOGIN_FAILED),Oe.e("".concat(s," failed. error:"),t),e._lastLoginTs=0,e._m.onLoginFailed(),Xi(t)}))}},{key:"logout",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.isLoggedIn())return Xi({code:hi.USER_NOT_LOGGED_IN});var n=new Ai("logout");n.setNetworkType(this.getNetworkType()).setMessage("identifier:".concat(this.getMyUserID())).end(!0);var o="".concat(this._n,".logout");return Oe.i("".concat(o," type:").concat(t)),0===t&&this._m.setNotReadyReason(hi.LOGGED_OUT),this.request({protocolName:In,requestData:{type:t}}).then((function(){return e.resetReady(),$i({})})).catch((function(t){return Oe.e("".concat(o," error:"),t),e.resetReady(),$i({})}))}},{key:"_fetchCloudControlConfig",value:function(){this.getModule(23).fetchConfig()}},{key:"_getStatusInstanceID",value:function(){return uni.getStorageSync("timUniAppInstanceID")}},{key:"_hello",value:function(){var e=this;this._lastWsHelloTs=Date.now(),this.request({protocolName:Cn,requestData:{isWebUniapp:this._isWebUniapp}}).catch((function(t){Oe.w("".concat(e._n,"._hello error:"),t)}))}},{key:"getLastWsHelloTs",value:function(){return this._lastWsHelloTs}},{key:"_checkLoginInfo",value:function(e){var t=0;return Ut(this.getModule(12).getSDKAppID())?t=hi.NO_SDKAPPID:Ut(e.userID)?t=hi.NO_IDENTIFIER:Ut(e.userSig)&&(t=hi.NO_USERSIG),{code:t}}},{key:"_isReactUIKit",value:function(){return X&&void 0!==window.tencent_cloud_im_csig_react_uikit_23F_xa}},{key:"onMultipleAccountKickedOut",value:function(e){var t=this;new Ai("kickedOut").setNetworkType(this.getNetworkType()).setMessage("type:".concat(A.KICKED_OUT_MULT_ACCOUNT," newInstanceInfo:").concat(JSON.stringify(e))).end(!0),Oe.w("".concat(this._n,".onMultipleAccountKickedOut userID:").concat(this.getMyUserID()," newInstanceInfo:"),e),this.logout(1).then((function(){t.emitOuterEvent(D.KICKED_OUT,{type:A.KICKED_OUT_MULT_ACCOUNT}),t._m.setNotReadyReason(hi.KICKED_OUT_MULT_ACCOUNT),t._m.reset()}))}},{key:"onMultipleDeviceKickedOut",value:function(e){var t=this;new Ai("kickedOut").setNetworkType(this.getNetworkType()).setMessage("type:".concat(A.KICKED_OUT_MULT_DEVICE," newInstanceInfo:").concat(JSON.stringify(e))).end(!0),Oe.w("".concat(this._n,".onMultipleDeviceKickedOut userID:").concat(this.getMyUserID()," newInstanceInfo:"),e),this.logout(1).then((function(){t.emitOuterEvent(D.KICKED_OUT,{type:A.KICKED_OUT_MULT_DEVICE}),t._m.setNotReadyReason(hi.KICKED_OUT_MULT_DEVICE),t._m.reset()}))}},{key:"onUserSigExpired",value:function(){new Ai("kickedOut").setNetworkType(this.getNetworkType()).setMessage(A.KICKED_OUT_USERSIG_EXPIRED).end(!0),Oe.w("".concat(this._n,".onUserSigExpired: userSig expired")),0!==this.getModule(12).getStatusInstanceID()&&(this.emitOuterEvent(D.KICKED_OUT,{type:A.KICKED_OUT_USERSIG_EXPIRED}),this._m.setNotReadyReason(hi.KICKED_OUT_USERSIG_EXPIRED),this._m.reset())}},{key:"onRestApiKickedOut",value:function(e){new Ai("kickedOut").setNetworkType(this.getNetworkType()).setMessage("type:".concat(A.KICKED_OUT_REST_API," newInstanceInfo:").concat(JSON.stringify(e))).end(!0),Oe.w("".concat(this._n,".onRestApiKickedOut userID:").concat(this.getMyUserID()," newInstanceInfo:"),e),0!==this.getModule(12).getStatusInstanceID()&&(this.emitOuterEvent(D.KICKED_OUT,{type:A.KICKED_OUT_REST_API}),this._m.setNotReadyReason(hi.KICKED_OUT_REST_API),this._m.reset(),this.getModule(21).onRestApiKickedOut())}},{key:"reset",value:function(){Oe.l("".concat(this._n,".reset")),this.resetReady(),this._helloInterval=120,this._lastLoginTs=0,this._lastWsHelloTs=0,this._isWebUniapp=0}}]),n}(yn);function Fr(){return null}var qr=function(){function e(t){r(this,e),this._m=t,this._n="StorageModule",this._storageQueue=new Map,this._errorTolerantHandle()}return c(e,[{key:"_errorTolerantHandle",value:function(){$||!ze(window)&&this._canIUseCookies()||(this.getItem=Fr,this.setItem=Fr,this.removeItem=Fr,this.clear=Fr)}},{key:"onCheckTimer",value:function(e){if(e%20==0){if(0===this._storageQueue.size)return;this._doFlush()}}},{key:"_doFlush",value:function(){try{var e,t=k(this._storageQueue);try{for(t.s();!(e=t.n()).done;){var n=M(e.value,2),o=n[0],i=n[1];this._setStorageSync(this._getKey(o),i)}}catch(c){t.e(c)}finally{t.f()}this._storageQueue.clear()}catch(u){Oe.w("".concat(this._n,"._doFlush error:"),u)}}},{key:"_getPrefix",value:function(){var e=this._m.getModule(12);return"TIM_".concat(e.getSDKAppID(),"_").concat(e.getUserID(),"_")}},{key:"_getKey",value:function(e){return"".concat(this._getPrefix()).concat(e)}},{key:"getItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{var n=t?this._getKey(e):e;return this.getStorageSync(n)}catch(r){return Oe.w("".concat(this._n,".getItem error:"),r),{}}}},{key:"setItem",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(n){var i=o?this._getKey(e):e;this._setStorageSync(i,t)}else this._storageQueue.set(e,t)}},{key:"clear",value:function(){try{$?J.clearStorageSync():this._canIUseCookies()&&localStorage.clear()}catch(e){Oe.w("".concat(this._n,".clear error:"),e)}}},{key:"removeItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{var n=t?this._getKey(e):e;this._removeStorageSync(n)}catch(r){Oe.w("".concat(this._n,".removeItem error:"),r)}}},{key:"getSize",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"b";try{var o={size:0,limitSize:5242880,unit:n};if(Object.defineProperty(o,"leftSize",{enumerable:!0,get:function(){return o.limitSize-o.size}}),$&&(o.limitSize=1024*J.getStorageInfoSync().limitSize),e)o.size=JSON.stringify(this.getItem(e)).length+this._getKey(e).length;else if($){var i=J.getStorageInfoSync(),r=i.keys;r.forEach((function(e){o.size+=JSON.stringify(t.getStorageSync(e)).length+t._getKey(e).length}))}else if(this._canIUseCookies())for(var a in localStorage)localStorage.hasOwnProperty(a)&&(o.size+=localStorage.getItem(a).length+a.length);return this._convertUnit(o)}catch(l){Oe.w("".concat(this._n," error:"),l)}}},{key:"_convertUnit",value:function(e){var t={},n=e.unit;for(var o in t.unit=n,e)"number"==typeof e[o]&&("kb"===n.toLowerCase()?t[o]=Math.round(e[o]/1024):"mb"===n.toLowerCase()?t[o]=Math.round(e[o]/1024/1024):t[o]=e[o]);return t}},{key:"_setStorageSync",value:function(e,t){$?K?my.setStorageSync({key:e,data:t}):J.setStorageSync(e,t):this._canIUseCookies()&&localStorage.setItem(e,JSON.stringify(t))}},{key:"getStorageSync",value:function(e){return $?K?my.getStorageSync({key:e}).data:J.getStorageSync(e):this._canIUseCookies()?JSON.parse(localStorage.getItem(e)):{}}},{key:"_removeStorageSync",value:function(e){$?K?my.removeStorageSync({key:e}):J.removeStorageSync(e):this._canIUseCookies()&&localStorage.removeItem(e)}},{key:"_canIUseCookies",value:function(){return navigator&&navigator.cookieEnabled&&localStorage}},{key:"reset",value:function(){Oe.l("".concat(this._n,".reset")),this._doFlush()}}]),e}(),Br=function(){function e(t){r(this,e),this._n="SSOLogBody",this._report=[]}return c(e,[{key:"pushIn",value:function(e){Oe.d("".concat(this._n,".pushIn"),this._report.length,e),this._report.push(e)}},{key:"backfill",value:function(e){var t;Ye(e)&&0!==e.length&&(Oe.d("".concat(this._n,".backfill"),this._report.length,e.length),(t=this._report).unshift.apply(t,I(e)))}},{key:"getLogsNumInMemory",value:function(){return this._report.length}},{key:"isEmpty",value:function(){return 0===this._report.length}},{key:"_reset",value:function(){this._report.length=0,this._report=[]}},{key:"getLogsInMemory",value:function(){var e=this._report.slice();return this._reset(),e}}]),e}(),Vr=function(e){var t=e.getModule(12);return{SDKType:10,SDKAppID:t.getSDKAppID(),SDKVersion:t.getVersion(),tinyID:Number(t.getTinyID()),userID:t.getUserID(),platform:e.getPlatform(),instanceID:t.getInstanceID(),traceID:Se()}},Hr=function(e){l(o,e);var n=y(o);function o(e){var t;r(this,o),(t=n.call(this,e))._n="EventStatModule",t.TAG="im-ssolog-event",t._reportBody=new Br,t.MIN_THRESHOLD=20,t.MAX_THRESHOLD=100,t.WAITING_TIME=6e4,t.REPORT_LEVEL=[4,5,6],t.REPORT_SDKAPPID_BLACKLIST=[],t.REPORT_TINYID_WHITELIST=[],t._lastReportTime=Date.now();var i=t.getInnerEmitterInstance();return i.on(Zi,t._onLoginSuccess,v(t)),i.on(er,t._onCloudConfigUpdated,v(t)),t}return c(o,[{key:"reportAtOnce",value:function(){Oe.d("".concat(this._n,".reportAtOnce")),this._report()}},{key:"_onLoginSuccess",value:function(){var e=this,t=this.getModule(13),n=t.getItem(this.TAG,!1);!Ut(n)&&Xe(n.forEach)&&(Oe.l("".concat(this._n,"._onLoginSuccess get ssolog in storage, count:").concat(n.length)),n.forEach((function(t){e._reportBody.pushIn(t)})),t.removeItem(this.TAG,!1))}},{key:"_onCloudConfigUpdated",value:function(){var e=this.getCloudConfig("evt_rpt_threshold"),t=this.getCloudConfig("evt_rpt_waiting"),n=this.getCloudConfig("evt_rpt_level"),o=this.getCloudConfig("evt_rpt_sdkappid_bl"),i=this.getCloudConfig("evt_rpt_tinyid_wl");ze(e)||(this.MIN_THRESHOLD=Number(e)),ze(t)||(this.WAITING_TIME=Number(t)),ze(n)||(this.REPORT_LEVEL=n.split(",").map((function(e){return Number(e)}))),ze(o)||(this.REPORT_SDKAPPID_BLACKLIST=o.split(",").map((function(e){return Number(e)}))),ze(i)||(this.REPORT_TINYID_WHITELIST=i.split(","))}},{key:"pushIn",value:function(e){e instanceof Ai&&(e.updateTimeStamp(),this._reportBody.pushIn(e),this._reportBody.getLogsNumInMemory()>=this.MIN_THRESHOLD&&this._report())}},{key:"onCheckTimer",value:function(){Date.now()<this._lastReportTime+this.WAITING_TIME||this._reportBody.isEmpty()||this._report()}},{key:"_filterLogs",value:function(e){var t=this,n=this.getModule(12),o=n.getSDKAppID(),i=n.getTinyID();return kt(this.REPORT_SDKAPPID_BLACKLIST,o)&&!Dt(this.REPORT_TINYID_WHITELIST,i)?[]:e.filter((function(e){return t.REPORT_LEVEL.includes(e.level)}))}},{key:"_report",value:function(){var e=this;if(!this._reportBody.isEmpty()){var n=this._reportBody.getLogsInMemory(),o=this._filterLogs(n);if(0!==o.length){var i={header:Vr(this),event:o};this.request({protocolName:zo,requestData:t({},i)}).then((function(){e._lastReportTime=Date.now()})).catch((function(t){Oe.w("".concat(e._n,".report failed. networkType:").concat(e.getNetworkType()," error:"),t),e._reportBody.backfill(n),e._reportBody.getLogsNumInMemory()>e.MAX_THRESHOLD&&e._flushAtOnce()}))}else this._lastReportTime=Date.now()}}},{key:"_flushAtOnce",value:function(){var e=this.getModule(13),t=e.getItem(this.TAG,!1),n=this._reportBody.getLogsInMemory(),o="".concat(this._n,"._flushAtOnce");if(Ut(t))Oe.l("".concat(o," count:").concat(n.length)),e.setItem(this.TAG,n,!0,!1);else{var i=n.concat(t);i.length>this.MAX_THRESHOLD&&(i=i.slice(0,this.MAX_THRESHOLD)),Oe.l("".concat(o," count:").concat(i.length)),e.setItem(this.TAG,i,!0,!1)}}},{key:"reset",value:function(){Oe.l("".concat(this._n,".reset")),this._lastReportTime=0,this._report(),this.REPORT_SDKAPPID_BLACKLIST=[],this.REPORT_TINYID_WHITELIST=[]}}]),o}(yn),jr="none",Kr="online",Wr=[hi.OVER_FREQUENCY_LIMIT,hi.OPEN_SERVICE_OVERLOAD_ERROR],Yr=function(){function e(t){r(this,e),this._m=t,this._networkType="",this._n="NetMonitorModule",this.MAX_WAIT_TIME=3e3,this._mpNetworkStatusCallback=null,this._webOnlineCallback=null,this._webOfflineCallback=null}return c(e,[{key:"start",value:function(){var e=this;$?(J.getNetworkType({success:function(t){e._networkType=t.networkType||t.subtype||"",t.networkType===jr?Oe.w("".concat(e._n,".start no network, please check!")):Oe.i("".concat(e._n,".start networkType:").concat(t.networkType))}}),this._mpNetworkStatusCallback=this._onNetworkStatusChange.bind(this),J.onNetworkStatusChange(this._mpNetworkStatusCallback)):(this._networkType=Kr,this._webOnlineCallback=this._onWebOnline.bind(this),this._webOfflineCallback=this._onWebOffline.bind(this),window&&(window.addEventListener("online",this._webOnlineCallback),window.addEventListener("offline",this._webOfflineCallback)))}},{key:"_onWebOnline",value:function(){this._onNetworkStatusChange({isConnected:!0,networkType:Kr})}},{key:"_onWebOffline",value:function(){this._onNetworkStatusChange({isConnected:!1,networkType:jr})}},{key:"_onNetworkStatusChange",value:function(e){var t=e.isConnected,n=e.networkType,o="".concat(this._n,"._onNetworkStatusChange"),i=!1;t?(Oe.i("".concat(o," previous:").concat(this._networkType," current:").concat(n)),this._networkType!==n&&(i=!0,this._m.getModule(21).reConnect(!0))):this._networkType!==n&&(i=!0,Oe.w("".concat(o," no network, please check!")),this._m.getModule(21).offline()),i&&(new Ai("networkChange").setMessage("isConnected:".concat(t," previousNetworkType:").concat(this._networkType," networkType:").concat(n)).end(),this._networkType=n)}},{key:"probe",value:function(e){var t=this;if(!ze(e)&&Wr.includes(e.code))return Promise.resolve([!0,this._networkType]);var n="".concat(this._n,".probe");return new Promise((function(e,o){$?J.getNetworkType({success:function(o){t._networkType=o.networkType,o.networkType===jr?(Oe.w("".concat(n," no network, please check!")),e([!1,o.networkType])):(Oe.i("".concat(n," networkType:").concat(o.networkType)),e([!0,o.networkType]))}}):t._networkType===jr?e([!1,jr]):e([!0,Kr])}))}},{key:"getNetworkType",value:function(){return this._networkType}},{key:"reset",value:function(){Oe.l("".concat(this._n,".reset")),$?null!==this._mpNetworkStatusCallback&&(J.offNetworkStatusChange&&(Y||H?J.offNetworkStatusChange(this._mpNetworkStatusCallback):J.offNetworkStatusChange()),this._mpNetworkStatusCallback=null):window&&(null!==this._webOnlineCallback&&(window.removeEventListener("online",this._webOnlineCallback),this._webOnlineCallback=null),null!==this._onWebOffline&&(window.removeEventListener("offline",this._webOfflineCallback),this._webOfflineCallback=null))}}]),e}();function zr(e,t){return e(t={exports:{}},t.exports),t.exports}var $r=zr((function(e){var t=Object.prototype.hasOwnProperty,n="~";function o(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function r(e,t,o,r,a){if("function"!=typeof o)throw new TypeError("The listener must be a function");var s=new i(o,r||e,a),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function s(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,o,i=[];if(0===this._eventsCount)return i;for(o in e=this._events)t.call(e,o)&&i.push(n?o.slice(1):o);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,o=this._events[t];if(!o)return[];if(o.fn)return[o.fn];for(var i=0,r=o.length,a=new Array(r);i<r;i++)a[i]=o[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,o=this._events[t];return o?o.fn?1:o.length:0},s.prototype.emit=function(e,t,o,i,r,a){var s=n?n+e:e;if(!this._events[s])return!1;var c,u,l=this._events[s],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,o),!0;case 4:return l.fn.call(l.context,t,o,i),!0;case 5:return l.fn.call(l.context,t,o,i,r),!0;case 6:return l.fn.call(l.context,t,o,i,r,a),!0}for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var f,p=l.length;for(u=0;u<p;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,o);break;case 4:l[u].fn.call(l[u].context,t,o,i);break;default:if(!c)for(f=1,c=new Array(d-1);f<d;f++)c[f-1]=arguments[f];l[u].fn.apply(l[u].context,c)}}return!0},s.prototype.on=function(e,t,n){return r(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return r(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,o,i){var r=n?n+e:e;if(!this._events[r])return this;if(!t)return a(this,r),this;var s=this._events[r];if(s.fn)s.fn!==t||i&&!s.once||o&&s.context!==o||a(this,r);else{for(var c=0,u=[],l=s.length;c<l;c++)(s[c].fn!==t||i&&!s[c].once||o&&s[c].context!==o)&&u.push(s[c]);u.length?this._events[r]=1===u.length?u[0]:u:a(this,r)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new o,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s})),Xr=function(e){l(n,e);var t=y(n);function n(e){var o;return r(this,n),(o=t.call(this,e))._n="BigDataChannelModule",o.FILETYPE={SOUND:2106,FILE:2107,VIDEO:2113},o._bdh_download_server="grouptalk.c2c.qq.com",o._BDHBizID=10001,o._authKey="",o._expireTime=0,o.getInnerEmitterInstance().on(Zi,o._getAuthKey,v(o)),o}return c(n,[{key:"_getAuthKey",value:function(){var e=this;this.isIntl()||this.request({protocolName:bn}).then((function(t){t.data.authKey&&(e._authKey=t.data.authKey,e._expireTime=parseInt(t.data.expireTime))}))}},{key:"_isFromOlderVersion",value:function(e){return!(!e.content||2===e.content.downloadFlag)}},{key:"parseElements",value:function(e,t){if(!Ye(e)||!t)return[];for(var n=[],o=null,i=0;i<e.length;i++)o=e[i],this._needParse(o)?n.push(this._parseElement(o,t)):n.push(e[i]);return n}},{key:"_needParse",value:function(e){return!e.cloudCustomData&&!(!this._isFromOlderVersion(e)||e.type!==A.MSG_AUDIO&&e.type!==A.MSG_FILE&&e.type!==A.MSG_VIDEO)}},{key:"_parseElement",value:function(e,t){switch(e.type){case A.MSG_AUDIO:return this._parseAudioElement(e,t);case A.MSG_FILE:return this._parseFileElement(e,t);case A.MSG_VIDEO:return this._parseVideoElement(e,t)}}},{key:"_parseAudioElement",value:function(e,t){return e.content.url=this._genAudioUrl(e.content.uuid,t),e}},{key:"_parseFileElement",value:function(e,t){return e.content.url=this._genFileUrl(e.content.uuid,t,e.content.fileName),e}},{key:"_parseVideoElement",value:function(e,t){return e.content.url=this._genVideoUrl(e.content.uuid,t),e}},{key:"_genAudioUrl",value:function(e,t){if(""===this._authKey)return"";var n=this.getModule(12).getSDKAppID();return"https://".concat(this._bdh_download_server,"/asn.com/stddownload_common_file?authkey=").concat(this._authKey,"&bid=").concat(this._BDHBizID,"&subbid=").concat(n,"&fileid=").concat(e,"&filetype=").concat(this.FILETYPE.SOUND,"&openid=").concat(t,"&ver=0")}},{key:"_genFileUrl",value:function(e,t,n){if(""===this._authKey)return"";n||(n="".concat(Math.floor(1e5*Math.random()),"-").concat(Date.now()));var o=this.getModule(12).getSDKAppID();return"https://".concat(this._bdh_download_server,"/asn.com/stddownload_common_file?authkey=").concat(this._authKey,"&bid=").concat(this._BDHBizID,"&subbid=").concat(o,"&fileid=").concat(e,"&filetype=").concat(this.FILETYPE.FILE,"&openid=").concat(t,"&ver=0&filename=").concat(encodeURIComponent(n))}},{key:"_genVideoUrl",value:function(e,t){if(""===this._authKey)return"";var n=this.getModule(12).getSDKAppID();return"https://".concat(this._bdh_download_server,"/asn.com/stddownload_common_file?authkey=").concat(this._authKey,"&bid=").concat(this._BDHBizID,"&subbid=").concat(n,"&fileid=").concat(e,"&filetype=").concat(this.FILETYPE.VIDEO,"&openid=").concat(t,"&ver=0")}},{key:"reset",value:function(){this._authKey="",this.expireTime=0}}]),n}(yn),Jr=["requestSnapshotUrl"],Qr=function(e){l(o,e);var n=y(o);function o(e){var t;r(this,o),(t=n.call(this,e))._n="UploadModule",t.TIMUploadPlugin=null,t.timUploadPlugin=null,t.COSSDK=null,t._cosUploadMethod=null,t.expiredTimeLimit=600,t.appid=0,t.bucketName="",t.ciUrl="",t.directory="",t.downloadUrl="",t.uploadUrl="",t.region="ap-shanghai",t.cos=null,t.cosOptions={secretId:"",secretKey:"",sessionToken:"",expiredTime:0},t.uploadFileType="",t.duration=900,t.tryCount=0,t.UPLOAD_SIZE_LIMIT={AUDIO:20971520,FILE:104857600,IMAGE:20971520,VIDEO:104857600};var i=t.getInnerEmitterInstance();return i.on(Zi,t._init,v(t)),i.on(er,t._onCloudConfigUpdated,v(t)),t}return c(o,[{key:"_init",value:function(){var e=this.getModule(18);if(this.TIMUploadPlugin=e.getPlugin("tim-upload-plugin"),this.TIMUploadPlugin)this._initUploaderMethod();else{var t=$?"cos-wx-sdk":"cos-js-sdk";this.COSSDK=e.getPlugin(t),this.COSSDK?(this._getAuthorizationKey(),this.outputWarning("CosReplacement",t)):this.outputWarning("PluginUndetected")}}},{key:"_onCloudConfigUpdated",value:function(){var e="".concat(this._n,"._onCloudConfigUpdated"),t=this.getCloudConfig("upload_size_limit");if(Oe.l("".concat(e," uploadSizeLimit:").concat(t)),!ze(t))try{var n=JSON.parse(t);this.UPLOAD_SIZE_LIMIT={AUDIO:n.a?1048576*parseInt(n.a):this.UPLOAD_SIZE_LIMIT.AUDIO,FILE:n.f?1048576*parseInt(n.f):this.UPLOAD_SIZE_LIMIT.FILE,IMAGE:n.i?1048576*parseInt(n.i):this.UPLOAD_SIZE_LIMIT.IMAGE,VIDEO:n.v?1048576*parseInt(n.v):this.UPLOAD_SIZE_LIMIT.VIDEO}}catch(r){Oe.e("".concat(e," JSON parse error. uploadSizeLimit:"),t)}}},{key:"_getAuthorizationKey",value:function(){var e=this,t="".concat(this._n,".").concat("_getAuthorizationKey"),n=new Ai("_getAuthorizationKey"),o=Math.ceil(Date.now()/1e3);this.request({protocolName:"cos",requestData:{duration:this.expiredTimeLimit}}).then((function(i){var r=i.data;Oe.l("".concat(t," ok. data:"),r);var a=r.expiredTime-o;n.setMessage("requestId:".concat(r.requestId," requestTime:").concat(o," expiredTime:").concat(r.expiredTime," diff:").concat(a,"s")).setNetworkType(e.getNetworkType()).end(),!$&&r.region&&(e.region=r.region),e.appid=r.appid,e.bucketName=r.bucketName,e.ciUrl=r.ciUrl,e.directory=r.directory,e.downloadUrl=r.downloadUrl,e.uploadUrl=r.uploadUrl,e.cosOptions={secretId:r.secretId,secretKey:r.secretKey,sessionToken:r.sessionToken,expiredTime:r.expiredTime},Oe.l("".concat(t," ok. region:").concat(e.region," bucketName:").concat(e.bucketName)),e._initUploaderMethod()})).catch((function(o){e.probeNetwork().then((function(e){var t=M(e,2),i=t[0],r=t[1];n.setError(o,i,r).end()})),Oe.w("".concat(t," failed. error:"),o)}))}},{key:"_getCosPreSigUrl",value:function(e){var t=this,n="".concat(this._n,".").concat("_getCosPreSigUrl"),o=Math.ceil(Date.now()/1e3),i=new Ai("_getCosPreSigUrl");return this.request({protocolName:Wo,requestData:{fileType:e.fileType,fileName:e.fileName,uploadMethod:e.uploadMethod,duration:e.duration}}).then((function(e){t.tryCount=0;var r=e.data||{},a=r.expiredTime-o;return Oe.l("".concat(n," ok. data:"),r),i.setMessage("requestId:".concat(r.requestId," expiredTime:").concat(r.expiredTime," diff:").concat(a,"s")).setNetworkType(t.getNetworkType()).end(),r})).catch((function(o){return-1===o.code&&(o.code=hi.COS_GET_SIG_FAIL),t.probeNetwork().then((function(e){var t=M(e,2),n=t[0],r=t[1];i.setError(o,n,r).end()})),Oe.w("".concat(n," failed. error:"),o),t.tryCount<1?(t.tryCount++,t._getCosPreSigUrl(e)):(t.tryCount=0,Xi({code:hi.COS_GET_SIG_FAIL}))}))}},{key:"_initUploaderMethod",value:function(){var e=this;if(this.TIMUploadPlugin)return this.timUploadPlugin=new this.TIMUploadPlugin,void(this._cosUploadMethod=function(t,n){e.timUploadPlugin.uploadFile(t,n)});this.appid&&(this.cos=$?new this.COSSDK({ForcePathStyle:!0,getAuthorization:this._getAuthorization.bind(this)}):new this.COSSDK({getAuthorization:this._getAuthorization.bind(this)}),this._cosUploadMethod=$?function(t,n){e.cos.postObject(t,n)}:function(t,n){e.cos.uploadFiles(t,n)})}},{key:"onCheckTimer",value:function(e){this.COSSDK&&(this.TIMUploadPlugin||this.isLoggedIn()&&e%60==0&&Math.ceil(Date.now()/1e3)>=this.cosOptions.expiredTime-120&&this._getAuthorizationKey())}},{key:"_getAuthorization",value:function(e,t){t({TmpSecretId:this.cosOptions.secretId,TmpSecretKey:this.cosOptions.secretKey,XCosSecurityToken:this.cosOptions.sessionToken,ExpiredTime:this.cosOptions.expiredTime})}},{key:"upload",value:function(e){if(!0===e.getRelayFlag())return Promise.resolve();var t=this.getModule(26);switch(e.type){case A.MSG_IMAGE:return t.addTotalCount(Ii),this._uploadImage(e);case A.MSG_FILE:return t.addTotalCount(Ii),this._uploadFile(e);case A.MSG_AUDIO:return t.addTotalCount(Ii),this._uploadAudio(e);case A.MSG_VIDEO:return t.addTotalCount(Ii),this._uploadVideo(e);default:return Promise.resolve()}}},{key:"_uploadImage",value:function(e){var n=this,o=this.getModule(2),i=e.getElements()[0],r=o.getMessageOption(e.clientSequence);return this.doUploadImage({file:r.payload.file,to:r.to,onProgress:function(e){if(i.updatePercent(e),Xe(r.onProgress))try{r.onProgress(e)}catch(t){return Xi({code:hi.MESSAGE_ONPROGRESS_FUNCTION_ERROR})}}}).then((function(o){var r,a,s=o.location,c=o.fileType,u=o.fileSize,l=o.width,d=o.height,f=o.smallImageUrl,p=o.smallImageWidth,h=o.smallImageHeight,g=o.largeImageUrl,_=o.largeImageWidth,v=o.largeImageHeight,m=n.isPrivateNetWork()?s:ut(s);return i.updateImageFormat(c),f&&g?(r={url:f,width:p,height:h},a={url:g,width:_,height:v}):(r=bt({originUrl:m,originWidth:l,originHeight:d,min:198}),a=bt({originUrl:m,originWidth:l,originHeight:d,min:720})),i.updateImageInfoArray([{size:u,url:m,width:l,height:d},t({},a),t({},r)]),e}))}},{key:"_uploadFile",value:function(e){var t=this,n=this.getModule(2),o=e.getElements()[0],i=n.getMessageOption(e.clientSequence);return this.doUploadFile({file:i.payload.file,to:i.to,onProgress:function(e){if(o.updatePercent(e),Xe(i.onProgress))try{i.onProgress(e)}catch(t){return Xi({code:hi.MESSAGE_ONPROGRESS_FUNCTION_ERROR})}}}).then((function(n){var i=n.location,r=t.isPrivateNetWork()?i:ut(i);return o.updateFileUrl(r),e}))}},{key:"_uploadAudio",value:function(e){var t=this,n=this.getModule(2),o=e.getElements()[0],i=n.getMessageOption(e.clientSequence);return this.doUploadAudio({file:i.payload.file,to:i.to,onProgress:function(e){if(o.updatePercent(e),Xe(i.onProgress))try{i.onProgress(e)}catch(t){return Xi({code:hi.MESSAGE_ONPROGRESS_FUNCTION_ERROR})}}}).then((function(n){var i=n.location,r=t.isPrivateNetWork()?i:ut(i);return o.updateAudioUrl(r),e}))}},{key:"_uploadVideo",value:function(e){var t=this,n=this.getModule(2),o=e.getElements()[0],i=n.getMessageOption(e.clientSequence);return this.doUploadVideo({file:i.payload.file,to:i.to,onProgress:function(e){if(o.updatePercent(e),Xe(i.onProgress))try{i.onProgress(e)}catch(t){return Xi({code:hi.MESSAGE_ONPROGRESS_FUNCTION_ERROR})}}}).then((function(n){var i=n.location,r=n.snapshotInfo,a=t.isPrivateNetWork()?i:ut(i);return o.updateVideoUrl(a),Ut(r)||o.updateSnapshotInfo(r),e}))}},{key:"_checkSizeError",value:function(e){return Xi({code:hi["MESSAGE_".concat(e,"_SIZE_LIMIT")],message:this.getErrorMessage("UploadSizeLimit",e.toLowerCase(),"".concat(this.UPLOAD_SIZE_LIMIT[e]/1048576," MB"))})}},{key:"doUploadImage",value:function(e){var t=this;if(!e.file)return Xi({code:hi.MESSAGE_IMAGE_SELECT_FILE_FIRST});var n=this._checkImageType(e.file);if(!0!==n)return n;var o=this._checkImageSize(e.file);if(!0!==o)return o;var i=null;return this._setUploadFileType(1),this.uploadByCOS(e).then((function(e){return i=e,t.isPrivateNetWork()?yt(e.location):yt("https://".concat(e.location))})).then((function(e){return i.width=e.width,i.height=e.height,Promise.resolve(i)}))}},{key:"_checkImageType",value:function(e){var t="";return t=$?e.url.slice(e.url.lastIndexOf(".")+1):e.files[0].name.slice(e.files[0].name.lastIndexOf(".")+1),or.indexOf(t.toLowerCase())>=0||Xi({code:hi.MESSAGE_IMAGE_TYPES_LIMIT})}},{key:"_checkImageSize",value:function(e){var t;return 0===(t=$?e.size:e.files[0].size)?Xi({code:hi.MESSAGE_FILE_IS_EMPTY}):t<this.UPLOAD_SIZE_LIMIT.IMAGE||this._checkSizeError("IMAGE")}},{key:"doUploadFile",value:function(e){return e.file?e.file.files[0].size>this.UPLOAD_SIZE_LIMIT.FILE?this._checkSizeError("FILE"):0===e.file.files[0].size?Xi({code:hi.MESSAGE_FILE_IS_EMPTY}):(this._setUploadFileType(255),this.uploadByCOS(e)):Xi({code:hi.MESSAGE_FILE_SELECT_FILE_FIRST})}},{key:"doUploadVideo",value:function(e){return e.file.videoFile.size>this.UPLOAD_SIZE_LIMIT.VIDEO?this._checkSizeError("VIDEO"):0===e.file.videoFile.size?Xi({code:hi.MESSAGE_FILE_IS_EMPTY}):-1===ir.indexOf(e.file.videoFile.type)?Xi({code:hi.MESSAGE_VIDEO_TYPES_LIMIT}):(this._setUploadFileType(2),$?this.handleVideoUpload({file:e.file.videoFile,onProgress:e.onProgress}):X?this.handleVideoUpload(e):void 0)}},{key:"handleVideoUpload",value:function(e){var t=this;return new Promise((function(n,o){t.uploadByCOS(e).then((function(e){n(e)})).catch((function(){t.uploadByCOS(e).then((function(e){n(e)})).catch((function(){o(new Yi({code:hi.MESSAGE_VIDEO_UPLOAD_FAIL}))}))}))}))}},{key:"doUploadAudio",value:function(e){return e.file?e.file.size>this.UPLOAD_SIZE_LIMIT.AUDIO?this._checkSizeError("AUDIO"):0===e.file.size?Xi({code:hi.MESSAGE_FILE_IS_EMPTY}):(this._setUploadFileType(3),this.uploadByCOS(e)):Xi({code:hi.MESSAGE_AUDIO_UPLOAD_FAIL})}},{key:"uploadByCOS",value:function(e){var t=this;if(!Xe(this._cosUploadMethod))return this.outputWarning("PluginUndetected"),Xi({code:hi.COS_UNDETECTED});if(this.timUploadPlugin)return this._uploadWithPreSigUrl(e);var n=new Ai("upload"),o="".concat(this._n,".uploadByCOS"),i=Date.now(),r=this._getFile(e);return new Promise((function(a,s){var c=$?t._createCosOptionsWXMiniApp(e):t._createCosOptionsWeb(e),u=t;t._cosUploadMethod(c,(function(e,c){var l=Object.create(null);if(c){if(e||Ye(c.files)&&c.files[0].error){var d=new Yi({code:hi.MESSAGE_FILE_UPLOAD_FAIL});return n.setError(d,!0,t.getNetworkType()).end(),Oe.l("".concat(o," failed. error:"),c.files[0].error),403===c.files[0].error.statusCode&&(Oe.w("".concat(o," failed. cos AccessKeyId was invalid, regain auth key!")),t._getAuthorizationKey()),void s(d)}l.fileName=r.name,l.fileSize=r.size,l.fileType=r.type.slice(r.type.indexOf("/")+1).toLowerCase(),l.location=$?c.Location:c.files[0].data.Location;var f=Date.now()-i,p=u._formatFileSize(r.size),h=u._formatSpeed(1e3*r.size/f),g="size:".concat(p," time:").concat(f,"ms speed:").concat(h);Oe.l("".concat(o," success. name:").concat(r.name," ").concat(g)),a(l);var _=t.getModule(26);return _.addCost(Ii,f),_.addFileSize(Ii,r.size),void n.setNetworkType(t.getNetworkType()).setMessage(g).end()}var v=new Yi({code:hi.MESSAGE_FILE_UPLOAD_FAIL});n.setError(v,!0,u.getNetworkType()).end(),Oe.w("".concat(o," failed. error:"),e),403===e.statusCode&&(Oe.w("".concat(o," failed. cos AccessKeyId was invalid, regain auth key!")),t._getAuthorizationKey()),s(v)}))}))}},{key:"_uploadWithPreSigUrl",value:function(e){var t=this,n="".concat(this._n,"._uploadWithPreSigUrl"),o=this._getFile(e);return this._createCosOptionsPreSigUrl(e).then((function(e){return new Promise((function(i,r){var a=new Ai("upload"),s=e.requestSnapshotUrl,c=void 0===s?void 0:s,u=_(e,Jr),l=Date.now();t._cosUploadMethod(u,(function(e,s){if(e||403===s.statusCode)return a.setError(new Yi(e),!0,t.getNetworkType()).end(),Oe.l("".concat(n," failed, error:"),e),void r(new Yi({code:hi.MESSAGE_FILE_UPLOAD_FAIL}));var d=Object.create(null),f=s.data.location||"";t.isPrivateNetWork()||0!==f.indexOf("https://")&&0!==f.indexOf("http://")||(f=f.split("//")[1]),d.fileName=o.name,d.fileSize=o.size,d.fileType=o.type.slice(o.type.indexOf("/")+1).toLowerCase(),d.location=f;var p=Date.now()-l,h=t._formatFileSize(o.size),g=t._formatSpeed(1e3*o.size/p),_="size:".concat(h,",time:").concat(p,"ms,speed:").concat(g," res:").concat(JSON.stringify(s.data));Oe.l("".concat(n," success name:").concat(o.name,",").concat(_)),a.setNetworkType(t.getNetworkType()).setMessage(_).end();var v=t.getModule(26);v.addCost(Ii,p),v.addFileSize(Ii,o.size);var m=[];if(u.thumbUrl&&u.largeUrl&&(m=[t._getSmallImageInfoByUrl(u.thumbUrl,d),t._getLargeImageInfoByUrl(u.largeUrl,d)]),c&&m.push(t._getSnapshotInfoByUrl(c,d)),m.length>0)return Promise.all(m).then((function(){i(d)}));i(d)}))}))}))}},{key:"_getRawOrUploadProxyUrl",value:function(e){var t=this.getModule(12).getFileUploadProxy(),n=e;return t&&(n=e.replace(/^https:\/\/[^/]+/,t)),n}},{key:"_getFile",value:function(e){var t;return Ye(e.file.files)||(t=e.file.files,"filelist"===Qe(t))?e.file.files[0]:e.file}},{key:"_formatFileSize",value:function(e){return e<1024?e+"B":e<1048576?Math.floor(e/1024)+"KB":Math.floor(e/1048576)+"MB"}},{key:"_formatSpeed",value:function(e){return e<=1048576?Et(e/1024,1)+"KB/s":Et(e/1048576,1)+"MB/s"}},{key:"_createCosOptionsWeb",value:function(e){var t=this._getFile(e),n=t.name,o=n.slice(n.lastIndexOf(".")),i=this._genFileName("".concat(it(999999)).concat(o));return{files:[{Bucket:"".concat(this.bucketName,"-").concat(this.appid),Region:this.region,Key:"".concat(this.directory,"/").concat(i),Body:t}],SliceSize:1048576,onProgress:function(t){if("function"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(n){Oe.w("onProgress callback error:",n)}},onFileFinish:function(e,t,n){}}}},{key:"_createCosOptionsWXMiniApp",value:function(e){var t=this._getFile(e),n=this._genFileName(t.name),o=t.url;return{Bucket:"".concat(this.bucketName,"-").concat(this.appid),Region:this.region,Key:"".concat(this.directory,"/").concat(n),FilePath:o,onProgress:function(t){if(Oe.l(JSON.stringify(t)),"function"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(n){Oe.w("onProgress callback error:",n)}}}}},{key:"_createCosOptionsPreSigUrl",value:function(e){var t=this,n="",o="",i=0,r=this._getFile(e);if($)n=this._genFileName(r.name),o=r.url,i=1;else{var a=r.name,s=a.slice(a.lastIndexOf("."));n=this._genFileName("".concat(it(999999)).concat(s)),o=r,i=0}return this._getCosPreSigUrl({fileType:this.uploadFileType,fileName:n,uploadMethod:i,duration:this.duration}).then((function(i){var r=i.uploadUrl,a=i.downloadUrl,s=i.requestSnapshotUrl,c=void 0===s?void 0:s,u=i.thumbUrl,l=i.largeUrl;return{url:t._getRawOrUploadProxyUrl(r),fileType:t.uploadFileType,fileName:n,resources:o,downloadUrl:a,requestSnapshotUrl:c,thumbUrl:u,largeUrl:l,onProgress:function(t){if("function"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(n){Oe.w("onProgress callback error:",n),Oe.e(n)}}}}))}},{key:"_genFileName",value:function(e){return"".concat(Mt(),"-").concat(e)}},{key:"_setUploadFileType",value:function(e){this.uploadFileType=e}},{key:"_getSnapshotInfoByUrl",value:function(e,t){var n=this,o=new Ai("getSnapshotInfo");return this.request({protocolName:Yo,requestData:{platform:this.getPlatform(),coverName:this._genFileName(it(99999)),requestSnapshotUrl:e}}).then((function(e){var n=(e.data||{}).snapshotUrl;return o.setMessage("snapshotUrl:".concat(n)).end(),Ut(n)?{}:yt(n).then((function(e){t.snapshotInfo={snapshotUrl:n,snapshotWidth:e.width,snapshotHeight:e.height}}))})).catch((function(e){return Oe.w("".concat(n._n,"._getSnapshotInfoByUrl failed. error:"),e),o.setCode(e.errorCode).setMessage(e.errorInfo).end(),{}}))}},{key:"_getSmallImageInfoByUrl",value:function(e,t){return yt(e).then((function(n){t.smallImageUrl=e,t.smallImageWidth=n.width,t.smallImageHeight=n.height}))}},{key:"_getLargeImageInfoByUrl",value:function(e,t){return yt(e).then((function(n){t.largeImageUrl=e,t.largeImageWidth=n.width,t.largeImageHeight=n.height}))}},{key:"reset",value:function(){Oe.l("".concat(this._n,".reset"))}}]),o}(yn),Zr=["downloadKey","pbDownloadKey","messageList"],ea=function(){function e(t){r(this,e),this._n="MergerMessageHandler",this._messageModule=t}return c(e,[{key:"uploadMergerMessage",value:function(e,t){var n=this,o="".concat(this._n,".").concat("uploadMergerMessage");Oe.d("".concat(o," message:"),e,"messageBytes:".concat(t));var i=e.payload.messageList,r=i.length,a=new Ai("uploadMergerMessage");return this._messageModule.request({protocolName:Jo,requestData:{messageList:i}}).then((function(e){Oe.d("".concat(o," ok. response:"),e.data);var i=e.data,s=i.pbDownloadKey,c=i.downloadKey,u={pbDownloadKey:s,downloadKey:c,messageNumber:r};return a.setNetworkType(n._messageModule.getNetworkType()).setMessage("".concat(r,"-").concat(t,"-").concat(c)).end(),u})).catch((function(e){throw Oe.w("".concat(o," failed. error:"),e),n._messageModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];a.setError(e,o,i).end()})),e}))}},{key:"downloadMergerMessage",value:function(e){var n=this,o="".concat(this._n,".").concat("downloadMergerMessage");Oe.d("".concat(o," message:"),e);var i=e.payload.downloadKey,r=this._messageModule.getFileDownloadProxy(),a=new Ai("downloadMergerMessage");return a.setMessage("downloadKey:".concat(i)),this._messageModule.request({protocolName:Qo,requestData:{downloadKey:i}}).then((function(i){if(Oe.d("".concat(o," ok. response:"),i.data),Xe(e.clearElement)){var s=e.payload;s.downloadKey,s.pbDownloadKey,s.messageList;var c=_(s,Zr);e.clearElement(),e.setElement({type:e.type,content:t({messageList:i.data.messageList},c)},r)}else{var u=[];i.data.messageList.forEach((function(e){if(!Ut(e)){var t=new Vi(e,r);u.push(t)}})),e.payload.messageList=u,e.payload.downloadKey="",e.payload.pbDownloadKey=""}return a.setNetworkType(n._messageModule.getNetworkType()).end(),e})).catch((function(e){throw Oe.w("".concat(o," failed. key:").concat(i," error:"),e),n._messageModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];a.setError(e,o,i).end()})),e}))}},{key:"createMergerMessagePack",value:function(e,t,n){return e.conversationType===A.CONV_C2C?this._createC2CMergerMessagePack(e,t,n):this._createGroupMergerMessagePack(e,t,n)}},{key:"_createC2CMergerMessagePack",value:function(e,t,n){var o=null;t&&(t.offlinePushInfo&&(o=t.offlinePushInfo),!0===t.onlineUserOnly&&(o?o.disablePush=!0:o={disablePush:!0}));var i=[];if(We(t)&&We(t.messageControlInfo)){var r=t.messageControlInfo,a=r.excludedFromUnreadCount,s=r.excludedFromLastMessage,c=r.excludedFromContentModeration;!0===a&&i.push("NoUnread"),!0===s&&i.push("NoLastMsg"),!0===c&&i.push("NoMsgCheck")}var u="";je(e.cloudCustomData)&&e.cloudCustomData.length>0&&(u=e.cloudCustomData);var l=n.pbDownloadKey,d=n.downloadKey,f=n.messageNumber,p=e.payload,h=p.title,g=p.abstractList,_=p.compatibleText,v=this._messageModule.getModule(6),m=v&&v.isOnlineMessage(e,t)?0:void 0;return{protocolName:Tn,tjgID:this._messageModule.generateTjgID(e),requestData:{fromAccount:this._messageModule.getMyUserID(),toAccount:e.to,msgBody:[{msgType:e.type,msgContent:{pbDownloadKey:l,downloadKey:d,title:h,abstractList:g,compatibleText:_,messageNumber:f}}],cloudCustomData:u,clientTime:e.clientTime,msgSeq:e.sequence,msgRandom:e.random,msgLifeTime:m,offlinePushInfo:o?{pushFlag:!0===o.disablePush?1:0,title:o.title||"",desc:o.description||"",ext:o.extension||"",apnsInfo:{badgeMode:!0===o.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:o.androidOPPOChannelID||""}}:void 0,messageControlInfo:0!==m?i:void 0,isSupportExtension:!0===e.isSupportExtension?1:0}}}},{key:"_createGroupMergerMessagePack",value:function(e,t,n){var o=null;t&&t.offlinePushInfo&&(o=t.offlinePushInfo);var i=[];if(We(t)&&We(t.messageControlInfo)){var r=t.messageControlInfo,a=r.excludedFromUnreadCount,s=r.excludedFromLastMessage,c=r.excludedFromContentModeration;!0===a&&i.push("NoUnread"),!0===s&&i.push("NoLastMsg"),!0===c&&i.push("NoMsgCheck")}var u="";je(e.cloudCustomData)&&e.cloudCustomData.length>0&&(u=e.cloudCustomData);var l=n.pbDownloadKey,d=n.downloadKey,f=n.messageNumber,p=e.payload,h=p.title,g=p.abstractList,_=p.compatibleText,v=this._messageModule.getModule(7),m=v&&v.isOnlineMessage(e,t)?1:0;return{protocolName:Sn,tjgID:this._messageModule.generateTjgID(e),requestData:{fromAccount:this._messageModule.getMyUserID(),groupID:e.to,msgBody:[{msgType:e.type,msgContent:{pbDownloadKey:l,downloadKey:d,title:h,abstractList:g,compatibleText:_,messageNumber:f}}],random:e.random,priority:e.priority,clientSequence:e.clientSequence,groupAtInfo:void 0,cloudCustomData:u,onlineOnlyFlag:m,offlinePushInfo:o?{pushFlag:!0===o.disablePush?1:0,title:o.title||"",desc:o.description||"",ext:o.extension||"",apnsInfo:{badgeMode:!0===o.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:o.androidOPPOChannelID||""}}:void 0,clientTime:e.clientTime,needReadReceipt:!0!==e.needReadReceipt||v.isMessageFromOrToAVChatroom(e.to)?0:1,messageControlInfo:0===m?i:void 0,isSupportExtension:!0===e.isSupportExtension?1:0}}}}]),e}(),ta={ERR_SVR_COMM_SENSITIVE_TEXT:80001,ERR_SVR_COMM_BODY_SIZE_LIMIT:80002,OPEN_SERVICE_OVERLOAD_ERROR:60022,ERR_SVR_MSG_PKG_PARSE_FAILED:20001,ERR_SVR_MSG_INTERNAL_AUTH_FAILED:20002,ERR_SVR_MSG_INVALID_ID:20003,ERR_SVR_MSG_PUSH_DENY:20006,ERR_SVR_MSG_IN_PEER_BLACKLIST:20007,ERR_SVR_MSG_BOTH_NOT_FRIEND:20009,ERR_SVR_MSG_NOT_PEER_FRIEND:20010,ERR_SVR_MSG_NOT_SELF_FRIEND:20011,ERR_SVR_MSG_SHUTUP_DENY:20012,ERR_SVR_GROUP_INVALID_PARAMETERS:10004,ERR_SVR_GROUP_PERMISSION_DENY:10007,ERR_SVR_GROUP_NOT_FOUND:10010,ERR_SVR_GROUP_INVALID_GROUPID:10015,ERR_SVR_GROUP_REJECT_FROM_THIRDPARTY:10016,ERR_SVR_GROUP_SHUTUP_DENY:10017,MESSAGE_SEND_FAIL:2100,OVER_FREQUENCY_LIMIT:2996},na=[hi.MESSAGE_ONPROGRESS_FUNCTION_ERROR,hi.MESSAGE_IMAGE_SELECT_FILE_FIRST,hi.MESSAGE_IMAGE_TYPES_LIMIT,hi.MESSAGE_FILE_IS_EMPTY,hi.MESSAGE_IMAGE_SIZE_LIMIT,hi.MESSAGE_FILE_SELECT_FILE_FIRST,hi.MESSAGE_FILE_SIZE_LIMIT,hi.MESSAGE_VIDEO_SIZE_LIMIT,hi.MESSAGE_VIDEO_TYPES_LIMIT,hi.MESSAGE_AUDIO_UPLOAD_FAIL,hi.MESSAGE_AUDIO_SIZE_LIMIT,hi.COS_UNDETECTED];function oa(e){var t=!1;return Object.values(ta).includes(e)&&(t=!0),(e>=120001&&e<=13e4||e>=10100&&e<=10200)&&(t=!0),t}var ia=function(e){l(o,e);var n=y(o);function o(e){var t;return r(this,o),(t=n.call(this,e))._n="MessageModule",t._messageOptionsMap=new Map,t._mergerMessageHandler=new ea(v(t)),t}return c(o,[{key:"createTextMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var n=new Ki(e),o="string"==typeof e.payload?e.payload:e.payload.text,i=new Li({text:o}),r=this._getNickAndAvatarByUserID(t);return n.setElement(i),n.setNickAndAvatar(r),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:"createImageMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var n=new Ki(e);if($){var o=e.payload.file;if(Ve(o))return void this.outputWarning("FileUnsupportedInMP","createImageMessage");var i=o.tempFiles[0].path||o.tempFiles[0].tempFilePath,r={url:i,name:i.slice(i.lastIndexOf("/")+1),size:o.tempFiles&&o.tempFiles[0].size||1,type:i.slice(i.lastIndexOf(".")+1).toLowerCase()};e.payload.file=r}else if(X)if(Ve(e.payload.file)){var a=e.payload.file;e.payload.file={files:[a]}}else if(We(e.payload.file)&&"undefined"!=typeof uni){var s=e.payload.file.tempFiles[0];e.payload.file={files:[s]}}var c=new Oi({imageFormat:Re.UNKNOWN,uuid:this._generateUUID(e.payload.file),file:e.payload.file}),u=this._getNickAndAvatarByUserID(t);return n.setElement(c),n.setNickAndAvatar(u),n.setNameCard(this._getNameCardByGroupID(n)),this._messageOptionsMap.set(n.clientSequence,e),n}},{key:"createAudioMessage",value:function(e){var t=e.payload.file;if($){var n={url:t.tempFilePath,name:t.tempFilePath.slice(t.tempFilePath.lastIndexOf("/")+1),size:t.fileSize,second:parseInt(t.duration)/1e3,type:t.tempFilePath.slice(t.tempFilePath.lastIndexOf(".")+1).toLowerCase()};e.payload.file=n}var o=this.getMyUserID();e.currentUser=o,e.senderTinyID=this.getMyTinyID();var i=new Ki(e),r=new wi({second:Math.floor(t.duration/1e3),size:t.fileSize||t.size,url:t.tempFilePath,uuid:this._generateUUID(e.payload.file)}),a=this._getNickAndAvatarByUserID(o);return i.setElement(r),i.setNickAndAvatar(a),i.setNameCard(this._getNameCardByGroupID(i)),this._messageOptionsMap.set(i.clientSequence,e),i}},{key:"createVideoMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID(),e.payload.file.thumbUrl="",e.payload.file.thumbSize=0;var n={};if($){if(K)return void this.outputWarning("VideoUnsupportedInAlipay");if(Ve(e.payload.file))return void this.outputWarning("FileUnsupportedInMP","createVideoMessage");var o=e.payload.file;Ye(o.tempFiles)&&(o=o.tempFiles[0]),n.url=o.tempFilePath,n.name=o.tempFilePath.slice(o.tempFilePath.lastIndexOf("/")+1),n.size=o.size||1,n.second=o.duration||0,n.type=o.tempFilePath.slice(o.tempFilePath.lastIndexOf(".")+1).toLowerCase()}else if(X){if(Ve(e.payload.file)){var i=e.payload.file;e.payload.file.files=[i]}else if(We(e.payload.file)&&"undefined"!=typeof uni){var r=e.payload.file.tempFile;e.payload.file.files=[r]}var a=e.payload.file;n.url=window.URL.createObjectURL(a.files[0]),n.name=a.files[0].name,n.size=a.files[0].size||1,n.second=a.files[0].duration||0,n.type=a.files[0].type.split("/")[1]}e.payload.file.videoFile=n;var s=new Ki(e),c=new qi({videoFormat:n.type,videoSecond:Et(n.second,0),videoSize:n.size,remoteVideoUrl:"",videoUrl:n.url,videoUUID:this._generateUUID(e.payload.file.videoFile),thumbUUID:this._generateUUID(e.payload.file.videoFile),thumbWidth:e.payload.file.width||200,thumbHeight:e.payload.file.height||200,thumbUrl:e.payload.file.thumbUrl,thumbSize:e.payload.file.thumbSize,thumbFormat:e.payload.file.thumbUrl.slice(e.payload.file.thumbUrl.lastIndexOf(".")+1).toLowerCase()}),u=this._getNickAndAvatarByUserID(t);return s.setElement(c),s.setNickAndAvatar(u),s.setNameCard(this._getNameCardByGroupID(s)),this._messageOptionsMap.set(s.clientSequence,e),s}},{key:"createCustomMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var n=new Ki(e),o=new Fi({data:e.payload.data,description:e.payload.description,extension:e.payload.extension}),i=this._getNickAndAvatarByUserID(t);return n.setElement(o),n.setNickAndAvatar(i),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:"createFaceMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var n=new Ki(e),o=new Ri(e.payload),i=this._getNickAndAvatarByUserID(t);return n.setElement(o),n.setNickAndAvatar(i),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:"createMergerMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var n=this._getNickAndAvatarByUserID(t),o=new Ki(e),i=new Hi(e.payload);return o.setElement(i),o.setNickAndAvatar(n),o.setNameCard(this._getNameCardByGroupID(o)),o.setRelayFlag(!0),o}},{key:"createForwardMessage",value:function(e){var t=e.to,n=e.conversationType,o=e.priority,i=e.payload,r=e.needReadReceipt,a=e.receiverList,s=this.getMyUserID(),c=this._getNickAndAvatarByUserID(s);if(i.type===A.MSG_GRP_TIP)return Xi({code:hi.MESSAGE_FORWARD_TYPE_INVALID});var u={to:t,conversationType:n,conversationID:"".concat(n).concat(t),priority:o,isPlaceMessage:0,status:Bt.UNSEND,currentUser:s,senderTinyID:this.getMyTinyID(),cloudCustomData:e.cloudCustomData||i.cloudCustomData||"",needReadReceipt:r,receiverList:a,isSupportExtension:e.isSupportExtension||!1},l=new Ki(u);return l.setElement(i.getElements()[0]),l.setNickAndAvatar(c),l.setNameCard(this._getNameCardByGroupID(i)),l.setRelayFlag(!0),l}},{key:"downloadMergerMessage",value:function(e){return this._mergerMessageHandler.downloadMergerMessage(e)}},{key:"createFileMessage",value:function(e){if($){if(!q&&!V&&!Y)return;var n=J.getSystemInfoSync().SDKVersion;if(q&&Ct(n,"2.5.0")<0)return void this.outputWarning("WXChooseMessageFile");if(V&&Ct(n,"1.18.0")<0)return void this.outputWarning("QQChooseMessageFile")}if(X||Y){if(Ve(e.payload.file)){var o=e.payload.file;e.payload.file={files:[o]}}else if(We(e.payload.file)&&"undefined"!=typeof uni){var i=e.payload.file,r=i.tempFiles,a=i.files,s=null;Ye(r)?s=r[0]:Ye(a)&&(s=a[0]),e.payload.file={files:[s]}}}else if(q||V){var c=e.payload.file.tempFiles,u=t(t({},c[0]),{},{url:c[0].path});e.payload.file={files:[u]}}var l=this.getMyUserID();e.currentUser=l,e.senderTinyID=this.getMyTinyID();var d=new Ki(e),f=new xi({uuid:this._generateUUID(e.payload.file),file:e.payload.file}),p=this._getNickAndAvatarByUserID(l);return d.setElement(f),d.setNickAndAvatar(p),d.setNameCard(this._getNameCardByGroupID(d)),this._messageOptionsMap.set(d.clientSequence,e),d}},{key:"createLocationMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var n=new Ki(e),o=new Bi(e.payload),i=this._getNickAndAvatarByUserID(t);return n.setElement(o),n.setNickAndAvatar(i),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:"_onCannotFindModule",value:function(){return Xi({code:hi.CANNOT_FIND_MODULE})}},{key:"sendMessageInstance",value:function(e,t){var n=this;if(!1===this.getModule(29).filterMessage(e,t))return this._onSendMessageFailed(e,new Yi({code:hi.PROFANITY_FOUND}));var o,i=null;switch(e.conversationType){case A.CONV_C2C:if(!(i=this.getModule(6)))return this._onCannotFindModule();break;case A.CONV_GROUP:if(!(i=this.getModule(7)))return this._onCannotFindModule();if(pt({groupID:e.to})){var r=i.getLocalGroupProfile(e.to);if(r&&r.isSupportTopic)return Xi({code:hi.MESSAGE_SEND_GROUP_WITH_TOPIC_FAIL})}break;default:return Xi({code:hi.MESSAGE_SEND_INVALID_CONVERSATION_TYPE})}var a=this.getModule(17),s=this.getModule(7);return a.upload(e).then((function(){return n._getSendMessageSpecifiedKey(e)===Mi&&n.getModule(26).addSuccessCount(Ii),s.guardForAVChatRoom(e).then((function(){if(!e.isSendable())return Xi({code:hi.MESSAGE_FILE_URL_IS_EMPTY});n._addSendMessageTotalCount(e),o=Date.now();var r=function(e){var t="utf-8";X&&document&&(t=document.charset.toLowerCase());var n,o,i=0;if(o=e.length,"utf-8"===t||"utf8"===t)for(var r=0;r<o;r++)(n=e.codePointAt(r))<=127?i+=1:n<=2047?i+=2:n<=65535?i+=3:(i+=4,r++);else if("utf-16"===t||"utf16"===t)for(var a=0;a<o;a++)(n=e.codePointAt(a))<=65535?i+=2:(i+=4,a++);else i=e.replace(/[^\x00-\xff]/g,"aa").length;return i}(JSON.stringify(e));return e.type===A.MSG_MERGER&&r>11264?n._mergerMessageHandler.uploadMergerMessage(e,r).then((function(o){var i=n._mergerMessageHandler.createMergerMessagePack(e,t,o);return n.request(i)})):(n.getModule(11).setMessageRandom(e),e.conversationType===A.CONV_C2C||e.conversationType===A.CONV_GROUP?i.sendMessage(e,t):void 0)})).then((function(r){var a=r.data,s=a.time,c=a.sequence,u=a.readReceiptCode;He(u)&&0!==u&&(new Ai("sendMessageWithReceipt").setMessage("from:".concat(e.from," to:").concat(e.to," sequence:").concat(c," readReceiptCode:").concat(u)).end(),Oe.w("".concat(n._n,".sendMessageInstance readReceiptCode:").concat(u," message:").concat(n.getErrorMessage(u)))),n._addSendMessageSuccessCount(e,o),n._messageOptionsMap.delete(e.clientSequence);var l=n.getModule(11);e.status=Bt.SUCCESS,e.time=s;var d=!1;if(e.conversationType===A.CONV_GROUP)e.sequence=c;else if(e.conversationType===A.CONV_C2C){var f=l.getLatestMessageSentByMe(e.conversationID);if(f){var p=f.nick,h=f.avatar;p===e.nick&&h===e.avatar||(d=!0)}}if(d&&l.modifyMessageSentByMe({conversationID:e.conversationID,latestNick:e.nick,latestAvatar:e.avatar}),i.isOnlineMessage(e,t))e._onlineOnlyFlag=!0;else{l.appendToMessageList(e);var g=e;We(t)&&We(t.messageControlInfo)&&(!0===t.messageControlInfo.excludedFromLastMessage&&(e._isExcludedFromLastMessage=!0,g=""),!0===t.messageControlInfo.excludedFromUnreadCount&&(e._isExcludedFromUnreadCount=!0));var _=e.conversationType;ht(e.to)&&(_=A.CONV_TOPIC,n.getModule(10).onMessageSent({groupID:At(e.to),topicID:e.to,lastMessage:g})),l.onMessageSent({conversationOptionsList:[{conversationID:e.conversationID,unreadCount:0,type:_,subType:e.conversationSubType,lastMessage:g}]})}return e.getRelayFlag()||"TIMImageElem"!==e.type||Tt(e.payload.imageInfoArray),Wi({message:e})}))})).catch((function(t){return n._onSendMessageFailed(e,t)}))}},{key:"_onSendMessageFailed",value:function(e,t){e.status=Bt.FAIL,this.getModule(11).deleteMessageRandom(e),this._addSendMessageFailCountOnUser(e,t);var n=new Ai("sendMessage");return n.setMessage("tjg_id:".concat(this.generateTjgID(e)," type:").concat(e.type," from:").concat(e.from," to:").concat(e.to)),this.probeNetwork().then((function(e){var o=M(e,2),i=o[0],r=o[1];n.setError(t,i,r).end()})),Oe.e("".concat(this._n,"._onSendMessageFailed error:"),t),Xi(new Yi({code:t&&t.code?t.code:hi.MESSAGE_SEND_FAIL,message:t&&t.message?t.message:void 0,data:{message:e}}))}},{key:"_getSendMessageSpecifiedKey",value:function(e){if([A.MSG_IMAGE,A.MSG_AUDIO,A.MSG_VIDEO,A.MSG_FILE].includes(e.type))return Mi;if(e.conversationType===A.CONV_C2C)return vi;if(e.conversationType===A.CONV_GROUP){var t=this.getModule(7).getLocalGroupProfile(e.to);if(!t)return;var n=t.type;return ft(n)?yi:mi}}},{key:"_addSendMessageTotalCount",value:function(e){var t=this._getSendMessageSpecifiedKey(e);t&&this.getModule(26).addTotalCount(t)}},{key:"_addSendMessageSuccessCount",value:function(e,t){var n=Math.abs(Date.now()-t),o=this._getSendMessageSpecifiedKey(e);if(o){var i=this.getModule(26);i.addSuccessCount(o),i.addCost(o,n)}}},{key:"_addSendMessageFailCountOnUser",value:function(e,t){var n,o,i=t.code,r=void 0===i?-1:i,a=this.getModule(26),s=this._getSendMessageSpecifiedKey(e);s===Mi&&(n=r,o=!1,na.includes(n)&&(o=!0),o)?a.addFailedCountOfUserSide(Ii):oa(r)&&s&&a.addFailedCountOfUserSide(s)}},{key:"resendMessage",value:function(e){return e.isResend=!0,e.status=Bt.UNSEND,this.sendMessageInstance(e)}},{key:"revokeMessage",value:function(e){var t=this,n=null;if(e.conversationType===A.CONV_C2C?n=this.getModule(6):e.conversationType===A.CONV_GROUP&&(n=this.getModule(7)),!n)return this._onCannotFindModule();var o=new Ai("revokeMessage");o.setMessage("tjg_id:".concat(this.generateTjgID(e)," type:").concat(e.type," from:").concat(e.from," to:").concat(e.to));var i="".concat(this._n,".").concat("revokeMessage");return n.revokeMessage(e).then((function(n){var r=n.data.recallRetList;if(!Ut(r)&&0!==r[0].retCode){var a=new Yi({code:r[0].retCode,data:{message:e}});return o.setCode(a.code).setMoreMessage(a.message).end(),Xi(a)}return Oe.i("".concat(i," ok. ID:").concat(e.ID)),e.isRevoked=!0,o.end(),t.getModule(11).onMessageRevoked([e]),Wi({message:e})})).catch((function(n){t.probeNetwork().then((function(e){var t=M(e,2),i=t[0],r=t[1];o.setError(n,i,r).end()}));var r=new Yi({code:n&&n.code?n.code:hi.MESSAGE_REVOKE_FAIL,message:n&&n.message?n.message:void 0,data:{message:e}});return Oe.w("".concat(i," failed. error:"),n),Xi(r)}))}},{key:"deleteMessage",value:function(e){var t=this,n=null,o=e[0],i=o.conversationID,r="",a=[],s=[];if(o.conversationType===A.CONV_C2C)n=this.getModule(6),r=i.replace(A.CONV_C2C,""),e.forEach((function(e){e&&e.status===Bt.SUCCESS&&e.conversationID===i&&(e._onlineOnlyFlag||a.push("".concat(e.sequence,"_").concat(e.random,"_").concat(e.time)),s.push(e))}));else if(o.conversationType===A.CONV_GROUP)n=this.getModule(7),r=i.replace(A.CONV_GROUP,""),e.forEach((function(e){e&&e.status===Bt.SUCCESS&&e.conversationID===i&&(e._onlineOnlyFlag||a.push("".concat(e.sequence)),s.push(e))}));else if(o.conversationType===A.CONV_SYSTEM)return Xi({code:hi.CANNOT_DELETE_GROUP_SYSTEM_NOTICE});if(!n)return this._onCannotFindModule();if(0===a.length)return this._onMessageDeleted(s);a.length>30&&(a=a.slice(0,30),s=s.slice(0,30));var c=new Ai("deleteMessage");c.setMessage("to:".concat(r," count:").concat(a.length));var u="".concat(this._n,".").concat("deleteMessage");return n.deleteMessage({to:r,keyList:a}).then((function(e){return c.end(),Oe.i("".concat(u," ok")),t._onMessageDeleted(s)})).catch((function(e){t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];c.setError(e,o,i).end()})),Oe.w("".concat(u," failed. error:"),e);var n=new Yi({code:e&&e.code?e.code:hi.MESSAGE_DELETE_FAIL,message:e&&e.message?e.message:void 0});return Xi(n)}))}},{key:"_onMessageDeleted",value:function(e){return this.getModule(11).onMessageDeleted(e),$i({messageList:e})}},{key:"translateText",value:function(e){var n="".concat(this._n,".").concat("translateText"),o=e.sourceTextList,i=e.sourceLanguage,r=e.targetLanguage,a=new Ai("translateText");return a.setMessage("sourceLanguage:".concat(i," targetLanguage:").concat(r)),this.request({protocolName:pi,requestData:{sourceTextList:o,source:i||"auto",target:r,from:this.getMyTinyID(),SDKAppID:this.getSDKAppID()}}).then((function(e){var o=e.data,i=o.error,r=o.requestID,s=o.translatedTextList;if(0===i.code)return a.end(),Oe.i("".concat(n," ok. requestID:").concat(r)),Wi({translatedTextList:s});throw t(t({},i),{},{requestID:r})})).catch((function(e){return a.setCode(e.code).setMoreMessage(e.requestID).end(),Oe.w("".concat(n," failed. error:"),e),Xi({code:hi.TRANSLATE_TEXT_FAIL})}))}},{key:"modifyRemoteMessage",value:function(e){var t=this,n=null,o=e.conversationType,i=e.to;if(this.getModule(7).isMessageFromOrToAVChatroom(i))return Xi({code:hi.MESSAGE_MODIFY_DISABLED_IN_AVCHATROOM,data:{message:e}});if(!1===this.getModule(29).filterMessage(e))return Xi({code:hi.PROFANITY_FOUND,data:{message:e}});o===A.CONV_C2C?n=this.getModule(6):o===A.CONV_GROUP&&(n=this.getModule(7));var r=new Ai("modifyMessage");r.setMessage("to:".concat(i));var a="".concat(this._n,".modifyRemoteMessage");return n.modifyRemoteMessage(e).then((function(n){r.end(),Oe.i("".concat(a," ok"));var o=t._onModifyRemoteMessageResp(e,n.data);return Wi({message:o})})).catch((function(n){if(r.setCode(n.code).setMoreMessage(n.message).end(),Oe.w("".concat(a," failed. error:"),n),20027===n.code){var o=t._onModifyRemoteMessageResp(e,n.data);return Xi({code:hi.MESSAGE_MODIFY_CONFLICT,data:{message:o}})}return Xi({code:n.code,message:n.message,data:{message:e}})}))}},{key:"_onModifyRemoteMessageResp",value:function(e,t){Oe.d("".concat(this._n,"._onModifyRemoteMessageResp options:"),t);var n=e.conversationType,o=e.from,i=e.to,r=e.random,a=e.sequence,s=e.time,c=t.elements,u=t.messageVersion,l=t.cloudCustomData,d=void 0===l?"":l;return this.getModule(11).onMessageModified({conversationType:n,from:o,to:i,time:s,random:r,sequence:a,elements:c,cloudCustomData:d,messageVersion:u})}},{key:"_generateUUID",value:function(e){var t=this.getModule(12),n="".concat(t.getSDKAppID(),"-").concat(t.getUserID(),"-").concat(function(){for(var e="",t=32;t>0;--t)e+=rt[Math.floor(Math.random()*at)];return e}()),o=e.name||e.value||e.url||e.tempFilePath,i=o&&o.slice(o.lastIndexOf(".")+1);return i&&(n="".concat(n,".").concat(i)),n}},{key:"getMessageOption",value:function(e){return this._messageOptionsMap.get(e)}},{key:"_getNickAndAvatarByUserID",value:function(e){return this.getModule(4).getNickAndAvatarByUserID(e)}},{key:"_getNameCardByGroupID",value:function(e){if(e.conversationType===A.CONV_GROUP){var t=this.getModule(7);if(t)return t.getMyNameCardByGroupID(e.to)}return""}},{key:"reset",value:function(){Oe.l("".concat(this._n,".reset")),this._messageOptionsMap.clear()}}]),o}(yn),ra=function(e){l(n,e);var t=y(n);function n(e){var o;return r(this,n),(o=t.call(this,e))._n="MessageExtensionModule",o.messageExtensionMap=new Map,o.globalSeqMap=new Map,o.getMessageExtensionsMap=new Map,o}return c(n,[{key:"onMessageExtensionNotify",value:function(e){var t=this,n=e.dataList,o=n.messageInfo,i=n.operateType,r=n.operateResultList,a=n.tinyID,s=n.globalSequence,c=o.clientTime,u=o.random,l="".concat(a,"-").concat(c,"-").concat(u),d=[],f=[];Oe.l("".concat(this._n,".onMessageExtensionNotify messageID:").concat(l," operateType:").concat(i," globalSequence:").concat(s)),this._updateGlobalSequence(l,s);var p=!1,h=!1;r.forEach((function(e){var n=e.extensions,o=void 0===n?[]:n,r=e.clearSequence;1===i?(p=!0,o.forEach((function(e){d.push({key:e.key,value:e.value})})),t._updateLocalExtension(l,o)):2===i?(h=!0,o.forEach((function(e){f.push(e.key)})),t._updateLocalExtension(l,o)):3===i&&(h=!0,t._hasLocalExtension(l)&&t._getLocalExtension(l).forEach((function(e,t){e.seq<=r&&!Ut(e.value)&&f.push(t)})),t._clearLocalExtension(l,r))})),p&&this.emitOuterEvent(D.MESSAGE_EXTENSIONS_UPDATED,{messageID:l,extensions:d}),h&&this.emitOuterEvent(D.MESSAGE_EXTENSIONS_DELETED,{messageID:l,keyList:f})}},{key:"setMessageExtensions",value:function(e,t){var n=this;if(!this.canIUse(x.MSG_EXT))return Xi({code:hi.CANNOT_USE_COMMERCIAL_ABILITY});var o="".concat(this._n,".").concat("setMessageExtensions"),i=e.ID,r=e.conversationID,a=e.sequence,s=e.time,c=I(t);t.length>20&&(c=t.slice(0,20),Oe.w("".concat(o,". the length of extensions cannot exceed 20.")));var u="conversationID:".concat(r," messageID:").concat(i," sequence:").concat(a," time:").concat(s," count:").concat(c.length),l=new Ai("setMessageExtensions");return l.setMessage(u),Oe.l("".concat(o," ").concat(u)),this._modifyMessageExtensions(e,c).then((function(e){var t=e.resultList,n=e.successCount,i=e.failureCount,r="success count:".concat(n," fail count:").concat(i);return l.setMoreMessage(r).end(),Oe.l("".concat(o," ok. ").concat(r)),Wi({extensions:t})})).catch((function(e){return n.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];l.setError(e,o,i).end()})),Oe.e("".concat(o," failed. error:"),e),Xi(e)}))}},{key:"getMessageExtensions",value:function(e){var t=this;if(!this.canIUse(x.MSG_EXT))return Xi({code:hi.CANNOT_USE_COMMERCIAL_ABILITY});var n="".concat(this._n,".").concat("getMessageExtensions"),o=e.ID,i=e.conversationID,r=e.sequence,a=e.time,s="conversationID:".concat(i," messageID:").concat(o," sequence:").concat(r," time:").concat(a),c=new Ai("getMessageExtensions");c.setMessage(s),Oe.l("".concat(n," ").concat(s));var u=void 0;return this.getMessageExtensionsMap.has(o)&&(u=this._getGlobalSequence(o)),this._getMessageExtensions(e,u).then((function(e){return c.end(),Oe.l("".concat(n," ok. total count:").concat(e.length)),ze(u)&&e.length>0&&t.getMessageExtensionsMap.set(o,1),Wi({extensions:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];c.setError(e,o,i).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"deleteMessageExtensions",value:function(e,t){var n=this;if(!this.canIUse(x.MSG_EXT))return Xi({code:hi.CANNOT_USE_COMMERCIAL_ABILITY});var o="".concat(this._n,".").concat("deleteMessageExtensions"),i=[],r=3;Ut(t)||(r=2,t.forEach((function(e){i.push({key:e,value:"",seq:0})})));var a=e.ID,s=e.conversationID,c=e.sequence,u=e.time,l="conversationID:".concat(s," messageID:").concat(a," sequence:").concat(c," time:").concat(u," operateType:").concat(r),d=new Ai("deleteMessageExtensions");return d.setMessage(l),Oe.l("".concat(o," ").concat(l)),this._modifyMessageExtensions(e,i,r).then((function(e){var t=e.resultList,n=e.successCount,i=e.failureCount,a="";return 2===r&&(a="success count:".concat(n," fail count:").concat(i)),d.setMoreMessage("".concat(a)).end(),Oe.l("".concat(o," ok. ").concat(a)),Wi({extensions:t})})).catch((function(e){return n.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];d.setError(e,o,i).end()})),Oe.e("".concat(o," failed. error:"),e),Xi(e)}))}},{key:"_modifyMessageExtensions",value:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=ht(e.to)?A.CONV_TOPIC:e.conversationType,r=void 0;3!==o&&(r=this._getRequestExtensions(e,t));var a=null;switch(i){case A.CONV_C2C:a=this.getModule(6);break;case A.CONV_GROUP:a=this.getModule(7);break;case A.CONV_TOPIC:a=this.getModule(10);break;default:return Xi({code:hi.CANNOT_FIND_MODULE})}return a.modifyMessageExtensions(e,r,o).then((function(t){var o=t.data,i=o.extensions,r=o.seq,a=[],s=0,c=0,u=[];return(i=Ut(i)?[]:i).forEach((function(e){var t=e.errorCode,n=e.extension,o=n.key,i=n.value,r=n.seq;a.push({code:t,key:o,value:i}),0===t?s++:c++,u.push({key:o,value:i,seq:r})})),n._updateGlobalSequence(e.ID,r),u.length>0&&(n._updateLocalExtension(e.ID,u),u=null),{resultList:a,successCount:s,failureCount:c}})).catch((function(e){return Xi(e)}))}},{key:"_getRequestExtensions",value:function(e,t){var n=[];if(this._hasLocalExtension(e.ID)){var o=this._getLocalExtension(e.ID);return t.forEach((function(e){var t=e.key,i=e.value,r=0;o.has(t)&&(r=o.get(t).seq),n.push({key:t,value:i,seq:r})})),n}return t.forEach((function(e){var t=e.key,o=e.value;n.push({key:t,value:o,seq:0})})),n}},{key:"_getMessageExtensions",value:function(e,t){var n=this,o="".concat(this._n,"._getMessageExtensions"),i=e.ID,r=e.to,a=null;switch(ht(r)?A.CONV_TOPIC:e.conversationType){case A.CONV_C2C:a=this.getModule(6);break;case A.CONV_GROUP:a=this.getModule(7);break;case A.CONV_TOPIC:a=this.getModule(10);break;default:return Xi({code:hi.CANNOT_FIND_MODULE})}return a.getMessageExtensions(e,t).then((function(t){var r=t.data,a=r.extensions,s=r.completeFlag,c=r.globalSequence,u=r.clearSequence;if(a=Ut(a)?[]:a,Oe.l("".concat(o," ok. completeFlag:").concat(s," globalSequence:").concat(c," clearSequence:").concat(u," count:").concat(a.length)),n._updateLocalExtension(i,a),n._clearLocalExtension(i,u),n._updateGlobalSequence(i,c),1!==s){var l=a.slice(-1)[0].seq+1;return n._getMessageExtensions(e,l)}return n._getLocalExtensions(i)})).catch((function(e){return Xi(e)}))}},{key:"_hasLocalExtension",value:function(e){return this.messageExtensionMap.has(e)}},{key:"_getLocalExtension",value:function(e){return this.messageExtensionMap.get(e)}},{key:"_updateLocalExtension",value:function(e,t){this._hasLocalExtension(e)||this.messageExtensionMap.set(e,new Map);var n=this._getLocalExtension(e);t.forEach((function(e){var t=e.key,o=e.value,i=void 0===o?"":o,r=e.seq;n.set(t,{value:i,seq:r})}))}},{key:"_clearLocalExtension",value:function(e,t){if(!(t<=0)&&this._hasLocalExtension(e)){var n=this._getLocalExtension(e);n.forEach((function(e,o){e.seq<=t&&n.delete(o)}))}}},{key:"_getLocalExtensions",value:function(e){var t=[];return this._hasLocalExtension(e)&&this._getLocalExtension(e).forEach((function(e,n){var o=e.value;Ut(o)||t.push({key:n,value:o})})),t}},{key:"_getGlobalSequence",value:function(e){return this.globalSeqMap.get(e)}},{key:"_updateGlobalSequence",value:function(e,t){this.globalSeqMap.set(e,t)}},{key:"reset",value:function(){Oe.l("".concat(this._n,".reset")),this.messageExtensionMap.clear(),this.globalSeqMap.clear(),this.getMessageExtensionsMap.clear()}}]),n}(yn),aa=function(e){l(n,e);var t=y(n);function n(e){var o;return r(this,n),(o=t.call(this,e))._n="ComboMessageModule",o}return c(n,[{key:"sendMessage",value:function(e){var t=this,n=this._constructMessageInstance(e);if(null===n)return Xi({code:hi.MESSAGE_SEND_FAIL});this._addSendMessageTotalCount(n);var o=Date.now();return this.getModule(11).setMessageRandom(n),this._sendComboMessage(n,e).then((function(e){var i=e.data,r=i.time,a=i.sequence,s=i.readReceiptCode;He(s)&&0!==s&&(new Ai("sendMessageWithReceipt").setMessage("from:".concat(n.from," to:").concat(n.to," sequence:").concat(a," readReceiptCode:").concat(s)).end(),Oe.w("".concat(t._n,".sendMessage readReceiptCode:").concat(s," message:").concat(t.getErrorMessage(s)))),t._addSendMessageSuccessCount(n,o);var c=t.getModule(11);n.status=Bt.SUCCESS,n.time=r,n.conversationType===A.CONV_GROUP&&(n.sequence=a),c.appendToMessageList(n);var u=n;return!0===n._isExcludedFromLastMessage&&(u=""),c.onMessageSent({conversationOptionsList:[{conversationID:n.conversationID,unreadCount:0,type:n.conversationType,subType:n.conversationSubType,lastMessage:u}]}),Wi({message:n})})).catch((function(e){return t._onSendMessageFailed(n,e)}))}},{key:"_sendComboMessage",value:function(e,t){var n=this._m.getModule(20),o="";return e.conversationType===A.CONV_C2C&&(o="".concat(U.NAME.OPEN_IM,".").concat(U.CMD.SEND_MESSAGE)),e.conversationType===A.CONV_GROUP&&(o="".concat(U.NAME.GROUP,".").concat(U.CMD.SEND_GROUP_MESSAGE)),n.sendComboMessage({servcmd:o,data:t})}},{key:"_constructMessageInstance",value:function(e){var t="".concat(this._n,"._constructMessageInstance"),n=null;try{var o=this.getMyUserID(),i={};if(i.senderTinyID=this.getMyTinyID(),i.currentUser=o,i.from=e.From_Account||o,e.GroupId?(i.conversationID="".concat(A.CONV_GROUP).concat(e.GroupId),i.conversationType=A.CONV_GROUP,i.to=e.GroupId):e.To_Account&&(i.conversationID="".concat(A.CONV_C2C).concat(e.To_Account),i.conversationType=A.CONV_C2C,i.to=e.To_Account),i.time=e.MsgTimeStamp||0,i.random=e.Random||e.MsgRandom||0,i.priority=e.MsgPriority,je(e.CloudCustomData)&&e.CloudCustomData.length>0&&(i.cloudCustomData=e.CloudCustomData),Ye(e.SendMsgControl)&&(i.messageControlInfo={},e.SendMsgControl.includes("NoUnread")&&(i.messageControlInfo.excludedFromUnreadCount=1),e.SendMsgControl.includes("NoLastMsg")&&(i.messageControlInfo.excludedFromLastMessage=1)),i.conversationType===A.CONV_GROUP&&Ye(e.To_Account)&&e.To_Account.length>0){var r=e.To_Account;e.To_Account.length>50&&(r=e.To_Account.slice(0,50),Oe.w("".concat(t," To_Account must be less than or equal to 50."))),i.receiverList=I(r),e.To_Account=I(r)}1!==e.IsNeedReadReceipt&&1!==e.NeedReadReceipt||(i.needReadReceipt=!0),1===e.SupportMessageExtension&&(i.isSupportExtension=!0),(n=new Ki(i)).status=Bt.UNSEND,e.MsgClientTime=n.clientTime,n.conversationType===A.CONV_C2C&&(e.MsgSeq=n.sequence);for(var a,s=e.MsgBody.length,c=0;c<s;c++)"TIMTextElem"===(a=e.MsgBody[c]).MsgType?n.setTextElement(a.MsgContent.Text):"TIMCustomElem"===a.MsgType?n.setCustomElement({data:a.MsgContent.Data||"",description:a.MsgContent.Desc||"",extension:a.MsgContent.Ext||""}):"TIMFaceElem"===a.MsgType&&n.setFaceElement({index:a.MsgContent.Index,data:a.MsgContent.Data});var u=n.getElements();n.payload=u[0].content,n.type=u[0].type}catch(p){n=null,Oe.e("".concat(t," failed. error:"),p)}return n}},{key:"_onSendMessageFailed",value:function(e,t){e.status=Bt.FAIL,this.getModule(11).deleteMessageRandom(e),this._addSendMessageFailCountOnUser(e,t);var n=new Ai("sendMessage");return n.setMessage("tjg_id:".concat(this.generateTjgID(e)," type:").concat(e.type," from:").concat(e.from," to:").concat(e.to)),this.probeNetwork().then((function(e){var o=M(e,2),i=o[0],r=o[1];n.setError(t,i,r).end()})),Oe.e("".concat(this._n,"._onSendMessageFailed error:"),t),Xi(new Yi({code:t&&t.code?t.code:hi.MESSAGE_SEND_FAIL,message:t&&t.message?t.message:void 0,data:{message:e}}))}},{key:"_getSendMessageSpecifiedKey",value:function(e){if(e.conversationType===A.CONV_C2C)return vi;if(e.conversationType===A.CONV_GROUP){var t=this.getModule(7).getLocalGroupProfile(e.to);if(!t)return;var n=t.type;return ft(n)?yi:mi}}},{key:"_addSendMessageTotalCount",value:function(e){var t=this._getSendMessageSpecifiedKey(e);t&&this.getModule(26).addTotalCount(t)}},{key:"_addSendMessageSuccessCount",value:function(e,t){var n=Math.abs(Date.now()-t),o=this._getSendMessageSpecifiedKey(e);if(o){var i=this.getModule(26);i.addSuccessCount(o),i.addCost(o,n)}}},{key:"_addSendMessageFailCountOnUser",value:function(e,t){var n=t.code,o=void 0===n?-1:n,i=this.getModule(26),r=this._getSendMessageSpecifiedKey(e);oa(o)&&r&&i.addFailedCountOfUserSide(r)}}]),n}(yn),sa=function(e){l(n,e);var t=y(n);function n(e){var o;return r(this,n),(o=t.call(this,e))._n="PluginModule",o.plugins={},o}return c(n,[{key:"registerPlugin",value:function(e){var t=this;Object.keys(e).forEach((function(n){t.plugins[n]=e[n]})),new Ai("registerPlugin").setMessage("".concat(Object.keys(e))).end()}},{key:"getPlugin",value:function(e){return this.plugins[e]}},{key:"reset",value:function(){}}]),n}(yn),ca=function(e){l(o,e);var n=y(o);function o(e){var t;return r(this,o),(t=n.call(this,e))._n="SyncUnreadMessageModule",t._cookie="",t._onlineSyncFlag=!1,t.getInnerEmitterInstance().on(Zi,t._onLoginSuccess,v(t)),t}return c(o,[{key:"_onLoginSuccess",value:function(e){this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:0})}},{key:"_startSync",value:function(e){var n=this,o=e.cookie,i=e.syncFlag,r=e.isOnlineSync,a="".concat(this._n,"._startSync");Oe.l("".concat(a," cookie:").concat(o," syncFlag:").concat(i," isOnlineSync:").concat(r)),this.request({protocolName:"getmsg",requestData:{cookie:o,syncFlag:i,isOnlineSync:r}}).then((function(e){var o=e.data,i=o.cookie,r=o.syncFlag;n._cookie=i,Ut(i)||(0===r||1===r?(n._dispatchUnreadMessage(t(t({},e.data),{},{isSyncingEnded:!1})),n._startSync({cookie:i,syncFlag:r,isOnlineSync:0})):2===r&&n._dispatchUnreadMessage(t(t({},e.data),{},{isSyncingEnded:!0})))})).catch((function(e){Oe.e("".concat(a," failed. error:"),e)}))}},{key:"_dispatchUnreadMessage",value:function(e){e.eventArray&&this.getModule(20).onMessage({head:{},body:{eventArray:e.eventArray,isInstantMessage:this._onlineSyncFlag,isSyncingEnded:e.isSyncingEnded}}),this.getModule(6).onNewC2CMessage({dataList:e.messageList,isInstantMessage:!!e.isSyncingEnded&&this._onlineSyncFlag,C2CRemainingUnreadList:e.C2CRemainingUnreadList,C2CPairUnreadList:e.C2CPairUnreadList})}},{key:"startOnlineSync",value:function(){Oe.l("".concat(this._n,".startOnlineSync")),this._onlineSyncFlag=!0,this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:1})}},{key:"startSyncOnReconnected",value:function(){Oe.l("".concat(this._n,".startSyncOnReconnected.")),this._onlineSyncFlag=!0,this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:0})}},{key:"reset",value:function(){Oe.l("".concat(this._n,".reset")),this._onlineSyncFlag=!1,this._cookie=""}}]),o}(yn),ua={request:{toAccount:"To_Account",fromAccount:"From_Account",to:"To_Account",from:"From_Account",groupID:"GroupId",groupAtUserID:"GroupAt_Account",extension:"Ext",data:"Data",description:"Desc",elements:"MsgBody",sizeType:"Type",downloadFlag:"Download_Flag",thumbUUID:"ThumbUUID",videoUUID:"VideoUUID",remoteAudioUrl:"Url",remoteVideoUrl:"VideoUrl",videoUrl:"",imageUrl:"URL",fileUrl:"Url",uuid:"UUID",priority:"MsgPriority",receiverUserID:"To_Account",receiverGroupID:"GroupId",messageSender:"SenderId",messageReceiver:"ReceiverId",nick:"From_AccountNick",avatar:"From_AccountHeadurl",messageNumber:"MsgNum",pbDownloadKey:"PbMsgKey",downloadKey:"JsonMsgKey",applicationType:"PendencyType",userIDList:"To_Account",groupNameList:"GroupName",userID:"To_Account",groupAttributeList:"GroupAttr",mainSequence:"AttrMainSeq",avChatRoomKey:"BytesKey",attributeControl:"AttrControl",sequence:"seq",messageControlInfo:"SendMsgControl",updateSequence:"UpdateSeq",clientTime:"MsgClientTime",sequenceList:"MsgSeqList",topicID:"TopicId",customData:"CustomString",isSupportTopic:"SupportTopic",isWebUniapp:"is_web_uniapp",isSupportExtension:"SupportMessageExtension",messageSequence:"MsgSeq",messageKey:"MsgKey",startSequence:"startSeq",simplifiedMessage:"DownsizeFlag"},response:{MsgPriority:"priority",ThumbUUID:"thumbUUID",VideoUUID:"videoUUID",Download_Flag:"downloadFlag",GroupId:"groupID",Member_Account:"userID",MsgList:"messageList",SyncFlag:"syncFlag",To_Account:"to",From_Account:"from",MsgSeq:"sequence",MsgRandom:"random",MsgTime:"time",MsgTimeStamp:"time",MsgContent:"content",MsgBody:"elements",From_AccountNick:"nick",From_AccountHeadurl:"avatar",GroupWithdrawInfoArray:"revokedInfos",GroupReadInfoArray:"groupMessageReadNotice",LastReadMsgSeq:"lastMessageSeq",WithdrawC2cMsgNotify:"c2cMessageRevokedNotify",C2cWithdrawInfoArray:"revokedInfos",C2cReadedReceipt:"c2cMessageReadReceipt",ReadC2cMsgNotify:"c2cMessageReadNotice",LastReadTime:"peerReadTime",MsgRand:"random",MsgType:"type",MsgShow:"messageShow",NextMsgSeq:"nextMessageSeq",FaceUrl:"avatar",ProfileDataMod:"profileModify",Profile_Account:"userID",ValueBytes:"value",ValueNum:"value",NoticeSeq:"noticeSequence",NotifySeq:"notifySequence",MsgFrom_AccountExtraInfo:"messageFromAccountExtraInformation",Operator_Account:"operatorID",OpType:"operationType",ReportType:"operationType",UserId:"userID",User_Account:"userID",List_Account:"userIDList",MsgOperatorMemberExtraInfo:"operatorInfo",MsgMemberExtraInfo:"memberInfoList",ImageUrl:"avatar",NickName:"nick",MsgGroupNewInfo:"newGroupProfile",MsgAppDefinedData:"groupCustomField",Owner_Account:"ownerID",GroupFaceUrl:"avatar",GroupIntroduction:"introduction",GroupNotification:"notification",GroupApplyJoinOption:"joinOption",MsgKey:"messageKey",GroupInfo:"groupProfile",ShutupTime:"muteTime",Desc:"description",Ext:"extension",GroupAt_Account:"groupAtUserID",MsgNum:"messageNumber",PbMsgKey:"pbDownloadKey",JsonMsgKey:"downloadKey",MsgModifiedFlag:"isModified",PendencyItem:"applicationItem",PendencyType:"applicationType",AddTime:"time",AddSource:"source",AddWording:"wording",ProfileImImage:"avatar",PendencyAdd:"friendApplicationAdded",FrienPencydDel_Account:"friendApplicationDeletedUserIDList",Peer_Account:"userID",GroupAttr:"groupAttributeList",GroupAttrAry:"groupAttributeList",AttrMainSeq:"mainSequence",seq:"sequence",GroupAttrOption:"groupAttributeOption",BytesChangedKeys:"changedKeyList",GroupAttrInfo:"groupAttributeList",GroupAttrSeq:"mainSequence",PushChangedAttrValFlag:"isWithChangedAttributeInfo",SubKeySeq:"sequence",Val:"value",MsgGroupFromCardName:"senderNameCard",MsgGroupFromNickName:"senderNick",C2cNick:"peerNick",C2cImage:"peerAvatar",SendMsgControl:"messageControlInfo",NoLastMsg:"excludedFromLastMessage",NoUnread:"excludedFromUnreadCount",UpdateSeq:"updateSequence",MuteNotifications:"muteFlag",MsgClientTime:"clientTime",TinyId:"tinyID",GroupMsgReceiptList:"readReceiptList",ReadNum:"readCount",UnreadNum:"unreadCount",TopicId:"topicID",MillionGroupFlag:"communityType",SupportTopic:"isSupportTopic",MsgTopicNewInfo:"newTopicInfo",ShutupAll:"muteAllMembers",CustomString:"customData",TopicFaceUrl:"avatar",TopicIntroduction:"introduction",TopicNotification:"notification",TopicIdArray:"topicIDList",MsgVersion:"messageVersion",C2cMsgModNotifys:"c2cMessageModified",GroupMsgModNotifys:"groupMessageModified",ApplyJoinOption:"joinOption",MsgFlag:"messageRemindType",AtInfoList:"groupAtInfoList",AtFlagList:"groupAtType",AtMsgSeq:"sequence",BanDuration:"duration",BanDescription:"reason",NotVisible:"invisible",BytesTag:"tag",BytesValue:"value",RptBytesValue:"value",LatestSeq:"globalSequence",ClearSeq:"clearSequence",SupportMessageExtension:"isSupportExtension",ExtensionList:"extensions",GroupCounter:"counterList",Revoker_Account:"revoker",MsgExtensionNotify:"messageExtensionNotify",ExtensionC2cMsgInfo:"messageInfo",ExtensionGroupMsgInfo:"messageInfo",MsgOptType:"operateType",SetKVInfo:"operateResultList",DeleteKVInfo:"operateResultList",ClearKVInfo:"operateResultList",MsgKeyValue:"extensions",ClearMsgSeq:"clearSequence",MsgLastSeq:"globalSequence",InviteJoinOption:"inviteOption",MemberList_Account:"inviteeList",MsgMemberExtraInfoList:"inviteeInfoList",E:"event",GInf:"groupProfile",MCT:"clientTime",MR:"random",MP:"priority",MTS:"time",GId:"groupID",MS:"sequence",CCD:"cloudCustomData",F_Account:"from",F_Hd:"avatar",F_NN:"nick",GN:"groupName",GT:"groupType",IsSys:"isSystemMessage",OpInf:"operatorInfo",Img:"avatar",NN:"nick",OnlineInf:"onlineMemberInfo",ET:"expireTime",Num:"onlineMemberNum",Opt:"operationType",O_Account:"operatorID",RT:"operationType",UDF:"userDefinedField",L_Account:"userIDList"},ignoreKeyWord:["C2C","ID","USP"]};function la(e,t){if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("Expected the input to be `string | string[]`");var n;return t=Object.assign({pascalCase:!1},t),0===(e=Array.isArray(e)?e.map((function(e){return e.trim()})).filter((function(e){return e.length})).join("-"):e.trim()).length?"":1===e.length?t.pascalCase?e.toUpperCase():e.toLowerCase():(e!==e.toLowerCase()&&(e=da(e)),e=e.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(function(e,t){return t.toUpperCase()})).replace(/\d+(\w|$)/g,(function(e){return e.toUpperCase()})),n=e,t.pascalCase?n.charAt(0).toUpperCase()+n.slice(1):n)}var da=function(e){for(var t=!1,n=!1,o=!1,i=0;i<e.length;i++){var r=e[i];t&&/[a-zA-Z]/.test(r)&&r.toUpperCase()===r?(e=e.slice(0,i)+"-"+e.slice(i),t=!1,o=n,n=!0,i++):n&&o&&/[a-zA-Z]/.test(r)&&r.toLowerCase()===r?(e=e.slice(0,i-1)+"-"+e.slice(i-1),o=n,n=!1,t=!0):(t=r.toLowerCase()===r&&r.toUpperCase()!==r,o=n,n=r.toUpperCase()===r&&r.toLowerCase()!==r)}return e};var fa=String.fromCharCode,pa=function(e){var t=0|e.charCodeAt(0);if(55296<=t)if(t<56320){var n=0|e.charCodeAt(1);if(56320<=n&&n<=57343){if((t=(t<<10)+n-56613888|0)>65535)return fa(240|t>>>18,128|t>>>12&63,128|t>>>6&63,128|63&t)}else t=65533}else t<=57343&&(t=65533);return t<=2047?fa(192|t>>>6,128|63&t):fa(224|t>>>12,128|t>>>6&63,128|63&t)},ha=function(e){for(var t=void 0===e?"":(""+e).replace(/[\x80-\uD7ff\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,pa),n=0|t.length,o=new Uint8Array(n),i=0;i<n;i=i+1|0)o[i]=0|t.charCodeAt(i);return o},ga=function(){function e(t){r(this,e),this._handler=t;var n=t.getURL();if(this._socket=null,this._workerSocket=null,this._id=it(),this._handler.getIsWorkerEnabled()){var o=URL.createObjectURL(new Blob([';let _socket = null;onmessage = function(event) {  if (event.data.cmd === "start") {    const url = event.data.url;    _socket = new WebSocket(url);    _socket.binaryType = "arraybuffer";    _socket.onopen = function() {      postMessage({ callback: "onOpen", extensions: _socket.extensions });    };    _socket.onclose = function(e) {      postMessage({ callback: "onOpen", e: { code: e.code, reason: e.reason } });    };    _socket.onmessage = function(e) {      postMessage({ callback: "onMessage", data: e.data });    };    _socket.onerror = function(e) {      postMessage({ callback: "onError", e: { isTrusted: "true" } });    };  } else if (event.data.cmd === "sendMessage") {    if (_socket !== null) {      _socket.send(event.data.data);    }  } else if (event.data.cmd === "stop") {    if (_socket !== null) {      _socket.close(event.data.code);      _socket = null;    }  }};'],{type:"application/javascript; charset=utf-8"}));this._workerSocket=new Worker(o);var i=this;this._workerSocket.onmessage=function(e){var t=e.data,n=t.callback,o=t.e,r=t.extensions;"onOpen"===n?i._onOpen(r):"onClose"===n?i._onClose(o):"onError"===n?i._onError(o):"onMessage"===n&&i._onMessage(e.data)},this._workerSocket.postMessage({cmd:"start",id:this._id,url:n})}else $?K?(J.connectSocket({url:n,header:{"content-type":"application/json"}}),J.onSocketClose(this._onClose.bind(this)),J.onSocketOpen(this._onOpen.bind(this)),J.onSocketMessage(this._onMessage.bind(this)),J.onSocketError(this._onError.bind(this))):(this._socket=J.connectSocket({url:n,header:{"content-type":"application/json"},complete:function(){}}),this._socket.onClose(this._onClose.bind(this)),this._socket.onOpen(this._onOpen.bind(this)),this._socket.onMessage(this._onMessage.bind(this)),this._socket.onError(this._onError.bind(this))):X&&(this._socket=new WebSocket(n),this._socket.binaryType="arraybuffer",this._socket.onopen=this._onOpen.bind(this,this._socket.extensions),this._socket.onmessage=this._onMessage.bind(this),this._socket.onclose=this._onClose.bind(this),this._socket.onerror=this._onError.bind(this));this._canIUseBinaryFrame=t.canIUseBinaryFrame()}return c(e,[{key:"getID",value:function(){return this._id}},{key:"_onOpen",value:function(e){this._handler.onOpen({id:this._id,res:JSON.stringify(e)})}},{key:"_onClose",value:function(e){this._handler.onClose({id:this._id,e:e})}},{key:"_onMessage",value:function(e){var t;t=this._canIUseBinaryFrame?this._isAppCompressedData(e.data)?this._handler.inflate(e.data):function(e){for(var t=new Uint8Array(e),n="",o=0,i=t.length;o<i;){var r=t[o],a=0,s=0;if(r<=127?(a=0,s=255&r):r<=223?(a=1,s=31&r):r<=239?(a=2,s=15&r):r<=244&&(a=3,s=7&r),i-o-a>0)for(var c=0;c<a;)s=s<<6|63&(r=t[o+c+1]),c+=1;else s=65533,a=i-o;n+=String.fromCodePoint(s),o+=a+1}return n}(e.data):e.data,this._handler.onMessage({data:t})}},{key:"_isAppCompressedData",value:function(e){var t=new Uint8Array(e);return 67===t[0]&&79===t[1]&&77===t[2]&&80===t[3]}},{key:"_onError",value:function(e){this._handler.onError({id:this._id,e:e})}},{key:"setIsWorkerEnabled",value:function(e){this._isWorkerEnabled=!0}},{key:"close",value:function(e){if(this._workerSocket&&(this._workerSocket.postMessage({cmd:"stop",code:e}),this._workerSocket.terminate(),this._workerSocket=null),K)return J.offSocketClose(),J.offSocketMessage(),J.offSocketOpen(),J.offSocketError(),void J.closeSocket();this._socket&&($?(this._socket.onClose((function(){})),this._socket.onOpen((function(){})),this._socket.onMessage((function(){})),this._socket.onError((function(){}))):X&&(this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null),j?this._socket.close({code:e}):this._socket.close(e),this._socket=null)}},{key:"send",value:function(e){if(this._workerSocket)this._workerSocket.postMessage({cmd:"sendMessage",data:this._canIUseBinaryFrame?ha(e.data).buffer:e.data});else{if(K)return void J.sendSocketMessage({data:e.data,fail:function(){e.fail&&e.requestID&&e.fail(e.requestID)}});this._socket&&($?this._socket.send({data:this._canIUseBinaryFrame?ha(e.data).buffer:e.data,fail:function(){e.fail&&e.requestID&&e.fail(e.requestID)}}):X&&this._socket.send(this._canIUseBinaryFrame?ha(e.data):e.data))}}}]),e}(),_a=["keyMap"],va=["keyMap"],ma="connected",ya="connecting",Ma="disconnected",Ia=function(){function e(t){r(this,e),this._channelModule=t,this._n="SocketHandler",this._promiseMap=new Map,this._readyState=Ma,this._simpleRequestMap=new Map,this.MAX_SIZE=100,this._startSequence=it(),this._startTs=0,this._reConnectFlag=!1,this._nextPingTs=0,this._reConnectCount=0,this.MAX_RECONNECT_COUNT=3,this._socketID=-1,this._random=0,this._socket=null,this._url="",this._onOpenTs=0,this._canIUseBinaryFrame=!0,this._isWorkerEnabled=!0,this._setWebsocketHost(),this._initConnection()}return c(e,[{key:"_setWebsocketHost",value:function(){var e=this._channelModule.getModule(12),t=G;this._channelModule.isOversea()&&(t="OVERSEA"),e.isSingaporeSite()?t="SINGAPORE":e.isKoreaSite()?t="KOREA":e.isGermanySite()?t="GERMANY":e.isIndiaSite()?t="IND":e.isJapanSite()?t="JPN":e.isUSASite()&&(t="USA"),U.HOST.setCurrent(t)}},{key:"_initConnection",value:function(){ze(U.HOST.CURRENT.BACKUP)||""===this._url?this._url=U.HOST.CURRENT.DEFAULT:this._url===U.HOST.CURRENT.DEFAULT?this._url=U.HOST.CURRENT.BACKUP:this._url===U.HOST.CURRENT.BACKUP?this._url=this._canIUseAnyCast()?U.HOST.CURRENT.ANYCAST:U.HOST.CURRENT.DEFAULT:this._url===U.HOST.CURRENT.ANYCAST&&(U.HOST.CURRENT.ANYCAST="",this._url=U.HOST.CURRENT.DEFAULT);var e=this._channelModule.getModule(12).getProxyServer();Ut(e)||(this._url=e),this._connect(),this._nextPingTs=0}},{key:"_canIUseAnyCast",value:function(){return X&&U.HOST.CURRENT.ANYCAST}},{key:"onCheckTimer",value:function(e){e%1==0&&this._checkPromiseMap()}},{key:"_checkPromiseMap",value:function(){var e=this;0!==this._promiseMap.size&&this._promiseMap.forEach((function(t,n){var o=t.reject,i=t.timestamp,r=15e3;-1!==n.indexOf(Mn)?r=9e4:-1!==n.indexOf($o)&&(r=3e3),Date.now()-i>=r&&(Oe.l("".concat(e._n,"._checkPromiseMap request timeout, delete requestID:").concat(n)),e._promiseMap.delete(n),o(new Yi({code:hi.NETWORK_TIMEOUT})),e._channelModule.onRequestTimeout(n))}))}},{key:"onOpen",value:function(e){if(""!==this._readyState){this._onOpenTs=Date.now();var t=e.id,n=e.res;this._socketID=t;var o=Date.now()-this._startTs,i="socketID:".concat(t," res:").concat(n);Oe.l("".concat(this._n,"._onOpen cost:").concat(o," ms. ").concat(i)),new Ai("wsOnOpen").setMessage(o).setCostTime(o).setMoreMessage(i).end(),e.id===this._socketID&&(this._readyState=ma,this._reConnectCount=0,this._resend(),!0===this._reConnectFlag&&(this._channelModule.onReconnected(),this._reConnectFlag=!1),this._channelModule.onOpen())}}},{key:"onClose",value:function(e){var t=new Ai("wsOnClose"),n=e.id,o=e.e,i="sourceSocketID:".concat(n," currentSocketID:").concat(this._socketID," code:").concat(o.code," reason:").concat(o.reason),r=0;0!==this._onOpenTs&&(r=Date.now()-this._onOpenTs),t.setMessage(r).setCostTime(r).setMoreMessage(i).setCode(o.code).end(),Oe.l("".concat(this._n,"._onClose ").concat(i," onlineTime:").concat(r)),n===this._socketID&&(this._readyState=Ma,r<1e3?this._channelModule.onReconnectFailed():this._channelModule.onClose())}},{key:"onError",value:function(e){var t=e.id,n=e.e,o="sourceSocketID:".concat(t," currentSocketID:").concat(this._socketID);new Ai("wsOnError").setMessage(n.errMsg||nt(n)).setMoreMessage(o).setLevel("error").end(),Oe.w("".concat(this._n,"._onError"),n,o),t===this._socketID&&(this._readyState="",this._channelModule.onError())}},{key:"onMessage",value:function(e){var t;try{t=JSON.parse(e.data)}catch(f){new Ai("jsonParseError").setMessage(e.data).end()}if(t&&t.head){var n=this._getRequestIDFromHead(t.head),o=t.body;if(!this._isTRTCCommand(n)){var i=St(t.head);o=function e(t,n){if(Ye(t))return t.map((function(t){return Ke(t)?e(t,n):t}));if(Ke(t)){var o=(i=t,r=function(e,t){return ze(n[t])?la(t):n[t]},a={},Object.keys(i).forEach((function(e){a[r(i[e],e)]=i[e]})),a);return mt(o,(function(t){return Ye(t)||Ke(t)?e(t,n):t}))}var i,r,a}(t.body,this._getResponseKeyMap(i))}if(Oe.d("".concat(this._n,".onMessage ret:").concat(JSON.stringify(o)," requestID:").concat(n," has:").concat(this._promiseMap.has(n))),this._setNextPingTs(),this._promiseMap.has(n)){var r=this._promiseMap.get(n),a=r.resolve,s=r.reject,c=r.timestamp;return this._promiseMap.delete(n),this._calcRTT(c),void(o.errorCode&&0!==o.errorCode?(this._channelModule.onErrorCodeNotZero(o),s(new Yi({code:o.errorCode,message:o.errorInfo||"",data:n.includes(xn)||n.includes(ko)?{elements:o.elements,messageVersion:o.messageVersion,cloudCustomData:o.cloudCustomData}:void 0}))):a(Wi(o)))}this._channelModule.onMessage({head:t.head,body:o})}}},{key:"_isTRTCCommand",value:function(e){for(var t=this._channelModule.getModule(30).getCommandList(),n=!1,o=0;o<t.length;o++)if(e.startsWith(t[o])){n=!0;break}return n}},{key:"_calcRTT",value:function(e){var t=Date.now()-e;this._channelModule.getModule(26).addRTT(t)}},{key:"_connect",value:function(){this._startTs=Date.now(),this._onOpenTs=0,this._socket=new ga(this),this._socketID=this._socket.getID(),this._readyState=ya,Oe.l("".concat(this._n,"._connect isWorkerEnabled:").concat(this.getIsWorkerEnabled()," socketID:").concat(this._socketID," url:").concat(this.getURL())),new Ai("wsConnect").setMessage("socketID:".concat(this._socketID," url:").concat(this.getURL())).end()}},{key:"getURL",value:function(){this._channelModule.isDevMode()&&(this._canIUseBinaryFrame=!1);var e=It();(K||q&&"windows"===e||Y)&&(this._canIUseBinaryFrame=!1);var t=-1;"ios"===e?t=ce||-1:"android"===e&&(t=le||-1);var n=this._channelModule.getModule(12),o=this._channelModule.getPlatform(),i=n.getSDKAppID(),r=n.getInstanceID(),a="sdkappid=".concat(i,"&instanceid=").concat(r,"&random=").concat(this._getRandom(),"&platform=").concat(o,"&host=").concat(e)+"&version=".concat(t,"&sdkversion=").concat("2.27.6");return B&&(a+="&isminigame=1"),this._channelModule.canIUseInflate()&&(a+="&compress=gzip"),this._canIUseBinaryFrame?"".concat(this._url,"/binfo?").concat(a):"".concat(this._url,"/info?").concat(a)}},{key:"_closeConnection",value:function(e){Oe.l("".concat(this._n,"._closeConnection socketID:").concat(this._socketID)),this._socket&&(this._socket.close(e),this._socketID=-1,this._socket=null,this._readyState=Ma)}},{key:"_resend",value:function(){var e=this;if(Oe.l("".concat(this._n,"._resend reConnectFlag:").concat(this._reConnectFlag),"promiseMap.size:".concat(this._promiseMap.size," simpleRequestMap.size:").concat(this._simpleRequestMap.size)),this._promiseMap.size>0&&this._promiseMap.forEach((function(t,n){var o=t.uplinkData,i=t.resolve,r=t.reject;e._promiseMap.set(n,{resolve:i,reject:r,timestamp:Date.now(),uplinkData:o}),e._execute(n,o)})),this._simpleRequestMap.size>0){var t,n=k(this._simpleRequestMap);try{for(n.s();!(t=n.n()).done;){var o=M(t.value,2),i=o[0],r=o[1];this._execute(i,r)}}catch(u){n.e(u)}finally{n.f()}this._simpleRequestMap.clear()}}},{key:"send",value:function(e){var t=this;e.head.seq=this._getSequence(),e.head.reqtime=Math.floor(Date.now()/1e3),e.keyMap;var n=_(e,_a),o=this._getRequestIDFromHead(e.head),i=JSON.stringify(n);return new Promise((function(e,r){t._promiseMap.set(o,{resolve:e,reject:r,timestamp:Date.now(),uplinkData:i}),Oe.d("".concat(t._n,".send uplinkData:").concat(JSON.stringify(n)," requestID:").concat(o," readyState:").concat(t._readyState)),t._readyState!==ma?t._reConnect():(t._execute(o,i),t._channelModule.getModule(26).addRequestCount())}))}},{key:"simplySend",value:function(e){e.head.seq=this._getSequence(),e.head.reqtime=Math.floor(Date.now()/1e3),e.keyMap;var t=_(e,va),n=this._getRequestIDFromHead(e.head),o=JSON.stringify(t);this._readyState!==ma?(this._simpleRequestMap.size<this.MAX_SIZE?this._simpleRequestMap.set(n,o):Oe.l("".concat(this._n,".simplySend. simpleRequestMap is full, drop request!")),this._reConnect()):this._execute(n,o)}},{key:"_execute",value:function(e,t){this._socket.send({data:t,fail:$?this._onSendFail.bind(this):void 0,requestID:e})}},{key:"_onSendFail",value:function(e){Oe.l("".concat(this._n,"._onSendFail requestID:").concat(e))}},{key:"_getSequence",value:function(){var e;if(this._startSequence<2415919103)return e=this._startSequence,this._startSequence+=1,2415919103===this._startSequence&&(this._startSequence=it()),e}},{key:"_getRequestIDFromHead",value:function(e){return e.servcmd+e.seq}},{key:"_getResponseKeyMap",value:function(e){var n=this._channelModule.getKeyMap(e);return t(t({},ua.response),n.response)}},{key:"_reConnect",value:function(){this._readyState!==ma&&this._readyState!==ya&&this.forcedReconnect()}},{key:"forcedReconnect",value:function(){var e=this,t="".concat(this._n,".forcedReconnect");Oe.l("".concat(t," count:").concat(this._reConnectCount," readyState:").concat(this._readyState)),this._reConnectFlag=!0,this._resetRandom(),this._reConnectCount<this.MAX_RECONNECT_COUNT?(this._reConnectCount+=1,this._closeConnection(4001),this._initConnection()):(this._reConnectCount=0,this._channelModule.probeNetwork().then((function(n){var o=M(n,2),i=o[0];o[1],i?(Oe.w("".concat(t," disconnected from wsserver but network is ok, continue...")),e._closeConnection(4001),e._initConnection()):e._channelModule.onReconnectFailed()})))}},{key:"getReconnectFlag",value:function(){return this._reConnectFlag}},{key:"_setNextPingTs",value:function(){this._nextPingTs=Date.now()+1e4}},{key:"getNextPingTs",value:function(){return this._nextPingTs}},{key:"isConnected",value:function(){return this._readyState===ma}},{key:"canIUseBinaryFrame",value:function(){return this._canIUseBinaryFrame}},{key:"inflate",value:function(e){if(this._channelModule.canIUseInflate())return this._channelModule.getModule(37).inflate(e)}},{key:"setIsWorkerEnabled",value:function(e){Oe.l("".concat(this._n,".setIsWorkerEnabled flag:").concat(e)),this._isWorkerEnabled=e}},{key:"getIsWorkerEnabled",value:function(){return this._isWorkerEnabled&&ve}},{key:"_getRandom",value:function(){return 0===this._random&&(this._random=Math.random()),this._random}},{key:"_resetRandom",value:function(){this._random=0}},{key:"close",value:function(){Oe.l("".concat(this._n,".close")),this._closeConnection(4e3),this._promiseMap.clear(),this._startSequence=it(),this._readyState=Ma,this._simpleRequestMap.clear(),this._reConnectFlag=!1,this._reConnectCount=0,this._onOpenTs=0,this._url="",this._random=0,this._canIUseBinaryFrame=!0,this._isWorkerEnabled=!0}}]),e}(),Ca=function(e){l(n,e);var t=y(n);function n(e){var o;if(r(this,n),(o=t.call(this,e))._n="ChannelModule",o._socketHandler=new Ia(v(o)),o._probing=!1,o._isAppShowing=!0,o._previousState=A.NET_STATE_CONNECTED,$&&"function"==typeof J.onAppShow&&"function"==typeof J.onAppHide){var i=o._onAppHide.bind(v(o)),a=o._onAppShow.bind(v(o));"function"==typeof J.offAppHide&&J.offAppHide(i),"function"==typeof J.offAppShow&&J.offAppShow(a),J.onAppHide(i),J.onAppShow(a)}return o._timerForNotLoggedIn=-1,o._timerForNotLoggedIn=setInterval(o.onCheckTimer.bind(v(o)),1e3),o._fatalErrorFlag=!1,o}return c(n,[{key:"onCheckTimer",value:function(e){this._socketHandler&&(this.isLoggedIn()?(this._timerForNotLoggedIn>0&&(clearInterval(this._timerForNotLoggedIn),this._timerForNotLoggedIn=-1),this._socketHandler.onCheckTimer(e)):this._socketHandler.onCheckTimer(1),this._checkNextPing())}},{key:"onErrorCodeNotZero",value:function(e){this.getModule(20).onErrorCodeNotZero(e)}},{key:"onMessage",value:function(e){this.getModule(20).onMessage(e)}},{key:"send",value:function(e){return this._socketHandler?this._previousState!==A.NET_STATE_CONNECTED&&e.head.servcmd.includes(zo)?(this.reConnect(),this._sendLogViaHTTP(e)):this._socketHandler.send(e):Promise.reject()}},{key:"_sendLogViaHTTP",value:function(e){var t=U.HOST.CURRENT.STAT;return new Promise((function(n,o){var i="".concat(t,"/v4/imopenstat/tim_web_report_v2?sdkappid=").concat(e.head.sdkappid,"&reqtime=").concat(Date.now()),r=JSON.stringify(e.body),a="application/x-www-form-urlencoded;charset=UTF-8";if($)J.request({url:i,data:r,method:"POST",timeout:3e3,header:{"content-type":a},success:function(){n()},fail:function(){o(new Yi({code:hi.NETWORK_ERROR}))}});else{var s=new XMLHttpRequest,c=setTimeout((function(){s.abort(),o(new Yi({code:hi.NETWORK_TIMEOUT}))}),3e3);s.onreadystatechange=function(){4===s.readyState&&(clearTimeout(c),200===s.status||304===s.status?n():o(new Yi({code:hi.NETWORK_ERROR})))},s.open("POST",i,!0),s.setRequestHeader("Content-type",a),s.send(r)}}))}},{key:"simplySend",value:function(e){return this._socketHandler?this._socketHandler.simplySend(e):Promise.reject()}},{key:"onOpen",value:function(){this._ping()}},{key:"onClose",value:function(){this._socketHandler&&this._socketHandler.getReconnectFlag()&&this._emitNetStateChangeEvent(A.NET_STATE_DISCONNECTED),this.reConnect()}},{key:"onError",value:function(){$&&!Y&&this.outputWarning("DomainNameInMP"),this._emitNetStateChangeEvent(A.NET_STATE_DISCONNECTED)}},{key:"getKeyMap",value:function(e){return this.getModule(20).getKeyMap(e)}},{key:"_onAppHide",value:function(){this._isAppShowing=!1}},{key:"_onAppShow",value:function(){this._isAppShowing=!0}},{key:"onRequestTimeout",value:function(e){}},{key:"onReconnected",value:function(){Oe.l("".concat(this._n,".onReconnected")),this._m.restartTimer(),this.getModule(20).onReconnected(),this._emitNetStateChangeEvent(A.NET_STATE_CONNECTED)}},{key:"onReconnectFailed",value:function(){Oe.l("".concat(this._n,".onReconnectFailed")),this._emitNetStateChangeEvent(A.NET_STATE_DISCONNECTED)}},{key:"setIsWorkerEnabled",value:function(e){this._socketHandler&&this._socketHandler.setIsWorkerEnabled(!1)}},{key:"offline",value:function(){this._emitNetStateChangeEvent(A.NET_STATE_DISCONNECTED)}},{key:"reConnect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!1;this._socketHandler&&(t=this._socketHandler.getReconnectFlag());var n="forcedFlag:".concat(e," fatalErrorFlag:").concat(this._fatalErrorFlag," previousState:").concat(this._previousState," reconnectFlag:").concat(t);if(Oe.l("".concat(this._n,".reConnect ").concat(n)),!this._fatalErrorFlag&&this._socketHandler){if(!0===e)this._socketHandler.forcedReconnect();else{if(this._previousState===A.NET_STATE_CONNECTING&&t)return;this._socketHandler.forcedReconnect()}this._emitNetStateChangeEvent(A.NET_STATE_CONNECTING)}}},{key:"_emitNetStateChangeEvent",value:function(e){this._previousState!==e&&(Oe.l("".concat(this._n,"._emitNetStateChangeEvent from ").concat(this._previousState," to ").concat(e)),this._previousState=e,this.emitOuterEvent(D.NET_STATE_CHANGE,{state:e}))}},{key:"_ping",value:function(){var e=this;if(!0!==this._probing){this._probing=!0;var t=this.getModule(20).getProtocolData({protocolName:$o});this.send(t).then((function(){e._probing=!1})).catch((function(t){if(Oe.w("".concat(e._n,"._ping failed. error:"),t),e._probing=!1,t&&60002===t.code)return new Ai("error").setMessage("code:".concat(t.code," message:").concat(t.message)).setNetworkType(e.getModule(15).getNetworkType()).end(),e._fatalErrorFlag=!0,void e._emitNetStateChangeEvent(A.NET_STATE_DISCONNECTED);e.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];Oe.l("".concat(e._n,"._ping failed. probe network, isAppShowing:").concat(e._isAppShowing," online:").concat(o," networkType:").concat(i)),o?e.reConnect():e._emitNetStateChangeEvent(A.NET_STATE_DISCONNECTED)}))}))}}},{key:"_checkNextPing",value:function(){this._socketHandler&&this._socketHandler.isConnected()&&Date.now()>=this._socketHandler.getNextPingTs()&&this._ping()}},{key:"canIUseInflate",value:function(){return this._m.canIUseInflate()}},{key:"dealloc",value:function(){this._socketHandler&&(this._socketHandler.close(),this._socketHandler=null),this._timerForNotLoggedIn>-1&&clearInterval(this._timerForNotLoggedIn)}},{key:"onRestApiKickedOut",value:function(){this._socketHandler&&(this._socketHandler.close(),this.reConnect(!0))}},{key:"reset",value:function(){Oe.l("".concat(this._n,".reset")),this._previousState=A.NET_STATE_CONNECTED,this._probing=!1,this._fatalErrorFlag=!1,this._timerForNotLoggedIn=setInterval(this.onCheckTimer.bind(this),1e3)}}]),n}(yn),ba=["a2","tinyid"],Ta=["a2","tinyid"],Sa=function(){function e(t){r(this,e),this._n="ProtocolHandler",this._sessionModule=t,this._configMap=new Map,this._fillConfigMap()}return c(e,[{key:"_fillConfigMap",value:function(){this._configMap.clear();var e=this._sessionModule.genCommonHead(),n=this._sessionModule.genCosSpecifiedHead(),o=this._sessionModule.genSSOReportHead(),i=this._sessionModule.isIntl();this._configMap.set(Mn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.IM_OPEN_STATUS,".").concat(U.CMD.LOGIN)}),body:{state:"Online",isWebUniapp:0,deviceBrand:0},keyMap:{request:{deviceBrand:"InstType"},response:{InstId:"instanceID",HelloInterval:"helloInterval"}}}}(e)),this._configMap.set(In,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.IM_OPEN_STATUS,".").concat(U.CMD.LOGOUT)}),body:{type:0},keyMap:{request:{type:"wslogout_type"}}}}(e)),this._configMap.set(Cn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.IM_OPEN_STATUS,".").concat(U.CMD.HELLO)}),body:{isWebUniapp:0},keyMap:{response:{NewInstInfo:"newInstanceInfo"}}}}(e)),this._configMap.set("KickOther",function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.STAT_SERVICE,".").concat(U.CMD.KICK_OTHER)}),body:{}}}(e)),this._configMap.set("cos",function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.IM_COS_SIGN,".").concat(U.CMD.COS_SIGN)}),body:{cmd:"open_im_cos_svc",subCmd:"get_cos_token",duration:300,version:2},keyMap:{request:{userSig:"usersig",subCmd:"sub_cmd",cmd:"cmd",duration:"duration",version:"version"},response:{expired_time:"expiredTime",bucket_name:"bucketName",session_token:"sessionToken",tmp_secret_id:"secretId",tmp_secret_key:"secretKey"}}}}(n)),this._configMap.set(Wo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.CUSTOM_UPLOAD,".").concat(U.CMD.COS_PRE_SIG)}),body:{fileType:void 0,fileName:void 0,uploadMethod:0,duration:900},keyMap:{request:{userSig:"usersig",fileType:"file_type",fileName:"file_name",uploadMethod:"upload_method"},response:{expired_time:"expiredTime",request_id:"requestId",head_url:"headUrl",upload_url:"uploadUrl",download_url:"downloadUrl",ci_url:"ciUrl",snapshot_url:"requestSnapshotUrl"}}}}(n)),this._configMap.set(Yo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.CUSTOM_UPLOAD,".").concat(U.CMD.VIDEO_COVER)}),body:{version:1,platform:void 0,coverName:void 0,requestSnapshotUrl:void 0},keyMap:{request:{version:"version",platform:"platform",coverName:"cover_name",requestSnapshotUrl:"snapshot_url"},response:{error_code:"errorCode",error_msg:"errorInfo",download_url:"snapshotUrl"}}}}(n)),this._configMap.set(ei,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.IM_CONFIG_MANAGER,".").concat(U.CMD.FETCH_COMMERCIAL_CONFIG)}),body:{SDKAppID:0},keyMap:{request:{SDKAppID:"uint32_sdkappid"},response:{int32_error_code:"errorCode",str_error_message:"errorMessage",str_purchase_bits:"purchaseBits",uint32_expired_time:"expiredTime"}}}}(e)),this._configMap.set("push_imsdk_purchase_bitsv2",function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.IM_CONFIG_MANAGER,".").concat(U.CMD.PUSHED_COMMERCIAL_CONFIG)}),body:{},keyMap:{response:{int32_error_code:"errorCode",str_error_message:"errorMessage",str_purchase_bits:"purchaseBits",uint32_expired_time:"expiredTime"}}}}(e)),this._configMap.set(Zo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.IM_CONFIG_MANAGER,".").concat(U.CMD.FETCH_CLOUD_CONTROL_CONFIG)}),body:{SDKAppID:0,version:0},keyMap:{request:{SDKAppID:"uint32_sdkappid",version:"uint64_version"},response:{int32_error_code:"errorCode",str_error_message:"errorMessage",str_json_config:"cloudControlConfig",uint32_expired_time:"expiredTime",uint32_sdkappid:"SDKAppID",uint64_version:"version"}}}}(e)),this._configMap.set("push_configv2",function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.IM_CONFIG_MANAGER,".").concat(U.CMD.PUSHED_CLOUD_CONTROL_CONFIG)}),body:{},keyMap:{response:{int32_error_code:"errorCode",str_error_message:"errorMessage",str_json_config:"cloudControlConfig",uint32_expired_time:"expiredTime",uint32_sdkappid:"SDKAppID",uint64_version:"version"}}}}(e)),this._configMap.set("notify2",function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.OVERLOAD_PUSH,".").concat(U.CMD.OVERLOAD_NOTIFY)}),body:{},keyMap:{response:{OverLoadServCmd:"overloadCommand",DelaySecs:"waitingTime"}}}}(e)),this._configMap.set("getmsg",function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.OPEN_IM,".").concat(U.CMD.GET_MESSAGES)}),body:{cookie:"",syncFlag:0,needAbstract:1,isOnlineSync:0,needSignaling:1},keyMap:{request:{fromAccount:"From_Account",toAccount:"To_Account",from:"From_Account",to:"To_Account",time:"MsgTimeStamp",sequence:"MsgSeq",random:"MsgRandom",elements:"MsgBody"},response:{MsgList:"messageList",SyncFlag:"syncFlag",To_Account:"to",From_Account:"from",ClientSeq:"clientSequence",MsgSeq:"sequence",NoticeSeq:"noticeSequence",NotifySeq:"notifySequence",MsgRandom:"random",MsgTimeStamp:"time",MsgContent:"content",ToGroupId:"to",MsgKey:"messageKey",GroupTips:"groupTips",MsgBody:"elements",MsgType:"type",C2CRemainingUnreadCount:"C2CRemainingUnreadList",C2CPairUnreadCount:"C2CPairUnreadList"}}}}(e)),i||(this._configMap.set(bn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.OPEN_IM,".").concat(U.CMD.BIG_DATA_HALLWAY_AUTH_KEY)}),body:{}}}(e)),this._configMap.set(fi,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.IM_MSG_AUDIT_MGR,".").concat(U.CMD.GET_RPOFANITY_LIST)}),body:{version:0,deviceID:"",startIndex:void 0},keyMap:{request:{version:"uint64_version",deviceID:"str_device_id",startIndex:"uint64_start_index"},response:{msg_cmd_error_code:"errorInfo",str_err_msg:"errorMessage",uint32_code:"errorCode",msg_scene_ctl_config:"filterConfig",uint64_c2c_custom_msg_flag:"c2c_custom_message",uint64_c2c_text_msg_flag:"c2c_text_message",uint64_group_custom_msg_flag:"group_custom_message",uint64_group_text_msg_flag:"group_text_message",uint64_group_info_flag:"group_profile",uint64_group_member_info_flag:"group_member_profile",uint64_relation_chain_flag:"sns",uint64_user_info_flag:"user_profile",rpt_msg_dirty_word:"lexicon",str_dirty_word:"profanity",str_replaced_content:"replacement",uint64_filter_type:"filterType",uint64_id:"id",uint64_word_type:"profanityType",uint64_complete_flag:"completeFlag",uint64_next_start_index:"nextStartIndex",uint64_version:"version",uint64_expired_time:"expiredTime"}}}}(e))),this._configMap.set(Tn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.OPEN_IM,".").concat(U.CMD.SEND_MESSAGE)}),body:{fromAccount:"",toAccount:"",msgSeq:0,msgRandom:0,msgBody:[],cloudCustomData:void 0,nick:"",avatar:"",msgLifeTime:void 0,offlinePushInfo:{pushFlag:0,title:"",desc:"",ext:"",apnsInfo:{badgeMode:0,isVoipPush:void 0},androidInfo:{OPPOChannelID:""}},messageControlInfo:void 0,clientTime:void 0,needReadReceipt:0,isSupportExtension:0},keyMap:{request:{fromAccount:"From_Account",toAccount:"To_Account",msgTimeStamp:"MsgTimeStamp",msgSeq:"MsgSeq",msgRandom:"MsgRandom",msgBody:"MsgBody",count:"MaxCnt",lastMessageTime:"LastMsgTime",messageKey:"MsgKey",peerAccount:"Peer_Account",data:"Data",description:"Desc",extension:"Ext",type:"MsgType",content:"MsgContent",sizeType:"Type",uuid:"UUID",url:"",imageUrl:"URL",fileUrl:"Url",remoteAudioUrl:"Url",remoteVideoUrl:"VideoUrl",thumbUUID:"ThumbUUID",videoUUID:"VideoUUID",videoUrl:"",downloadFlag:"Download_Flag",nick:"From_AccountNick",avatar:"From_AccountHeadurl",from:"From_Account",time:"MsgTimeStamp",messageRandom:"MsgRandom",messageSequence:"MsgSeq",elements:"MsgBody",clientSequence:"ClientSeq",payload:"MsgContent",messageList:"MsgList",messageNumber:"MsgNum",abstractList:"AbstractList",messageBody:"MsgBody",needReadReceipt:"IsNeedReadReceipt"}}}}(e)),this._configMap.set(Sn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.SEND_GROUP_MESSAGE)}),body:{fromAccount:"",groupID:"",random:0,clientSequence:0,priority:"",msgBody:[],cloudCustomData:void 0,onlineOnlyFlag:0,offlinePushInfo:{pushFlag:0,title:"",desc:"",ext:"",apnsInfo:{badgeMode:0,isVoipPush:void 0},androidInfo:{OPPOChannelID:""}},groupAtInfo:[],messageControlInfo:void 0,clientTime:void 0,needReadReceipt:0,topicID:void 0,receiverList:void 0,isSupportExtension:0},keyMap:{request:{to:"GroupId",extension:"Ext",data:"Data",description:"Desc",random:"Random",sequence:"ReqMsgSeq",count:"ReqMsgNumber",type:"MsgType",priority:"MsgPriority",content:"MsgContent",elements:"MsgBody",sizeType:"Type",uuid:"UUID",url:"",imageUrl:"URL",fileUrl:"Url",remoteAudioUrl:"Url",remoteVideoUrl:"VideoUrl",thumbUUID:"ThumbUUID",videoUUID:"VideoUUID",videoUrl:"",downloadFlag:"Download_Flag",clientSequence:"ClientSeq",from:"From_Account",time:"MsgTimeStamp",messageRandom:"MsgRandom",messageSequence:"MsgSeq",payload:"MsgContent",messageList:"MsgList",messageNumber:"MsgNum",abstractList:"AbstractList",messageBody:"MsgBody",needReadReceipt:"NeedReadReceipt",receiverList:"To_Account"},response:{MsgTime:"time",MsgSeq:"sequence"}}}}(e)),this._configMap.set(On,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.OPEN_IM,".").concat(U.CMD.REVOKE_C2C_MESSAGE)}),body:{msgInfo:{fromAccount:"",toAccount:"",msgTimeStamp:0,msgSeq:0,msgRandom:0}},keyMap:{request:{msgInfo:"MsgInfo",msgTimeStamp:"MsgTimeStamp",msgSeq:"MsgSeq",msgRandom:"MsgRandom"}}}}(e)),this._configMap.set(po,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.REVOKE_GROUP_MESSAGE)}),body:{groupID:"",msgSeqList:void 0,topicID:""},keyMap:{request:{msgSeqList:"MsgSeqList",msgSeq:"MsgSeq"}}}}(e)),this._configMap.set(Pn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.OPEN_IM,".").concat(U.CMD.GET_C2C_ROAM_MESSAGES)}),body:{peerAccount:"",count:15,lastMessageTime:0,messageKey:"",withRecalledMessage:1,direction:0},keyMap:{request:{messageKey:"MsgKey",peerAccount:"Peer_Account",count:"MaxCnt",lastMessageTime:"LastMsgTime",withRecalledMessage:"WithRecalledMsg",direction:"GetDirection"},response:{LastMsgTime:"lastMessageTime",IsNeedReadReceipt:"needReadReceipt",IsPeerRead:"readReceiptSentByPeer"}}}}(e)),this._configMap.set(xn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.OPEN_IM,".").concat(U.CMD.MODIFY_C2C_MESSAGE)}),body:{from:"",to:"",sequence:0,random:0,time:0,version:0,elements:void 0,cloudCustomData:void 0},keyMap:{request:{sequence:"MsgSeq",random:"MsgRandom",time:"MsgTime",version:"MsgVersion",type:"MsgType",content:"MsgContent"}}}}(e)),this._configMap.set(_o,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.GET_GROUP_ROAM_MESSAGES)}),body:{withRecalledMsg:1,groupID:"",count:15,sequence:"",topicID:void 0},keyMap:{request:{sequence:"ReqMsgSeq",count:"ReqMsgNumber",withRecalledMessage:"WithRecalledMsg"},response:{Random:"random",MsgTime:"time",MsgSeq:"sequence",ReqMsgSeq:"sequence",RspMsgList:"messageList",IsPlaceMsg:"isPlaceMessage",IsSystemMsg:"isSystemMessage",ToGroupId:"to",EnumFrom_AccountType:"fromAccountType",EnumTo_AccountType:"toAccountType",GroupCode:"groupCode",MsgPriority:"priority",MsgBody:"elements",MsgType:"type",MsgContent:"content",IsFinished:"complete",Download_Flag:"downloadFlag",ClientSeq:"clientSequence",ThumbUUID:"thumbUUID",VideoUUID:"videoUUID",ToTopicId:"topicID",InvisibleMsgSeq:"invisibleSequenceList"}}}}(e)),this._configMap.set(Rn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.OPEN_IM,".").concat(U.CMD.SET_C2C_MESSAGE_READ)}),body:{C2CMsgReaded:void 0},keyMap:{request:{lastMessageTime:"LastedMsgTime"}}}}(e)),this._configMap.set(wn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.OPEN_IM,".").concat(U.CMD.SET_C2C_PEER_MUTE_NOTIFICATIONS)}),body:{userIDList:void 0,muteFlag:0},keyMap:{request:{userIDList:"Peer_Account",muteFlag:"Mute_Notifications"}}}}(e)),this._configMap.set(Nn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.OPEN_IM,".").concat(U.CMD.GET_C2C_PEER_MUTE_NOTIFICATIONS)}),body:{updateSequence:0},keyMap:{response:{MuteNotificationsList:"muteFlagList"}}}}(e)),this._configMap.set(ho,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.SET_GROUP_MESSAGE_READ)}),body:{groupID:void 0,messageReadSeq:void 0,topicID:void 0},keyMap:{request:{messageReadSeq:"MsgReadedSeq"}}}}(e)),this._configMap.set(go,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.OPEN_IM,".").concat(U.CMD.SET_ALL_MESSAGE_READ)}),body:{readAllC2CMessage:0,groupMessageReadInfoList:[]},keyMap:{request:{readAllC2CMessage:"C2CReadAllMsg",groupMessageReadInfoList:"GroupReadInfo",messageSequence:"MsgSeq"},response:{C2CReadAllMsg:"readAllC2CMessage",GroupReadInfoArray:"groupMessageReadInfoList"}}}}(e)),this._configMap.set(Un,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.OPEN_IM,".").concat(U.CMD.DELETE_C2C_MESSAGE)}),body:{fromAccount:"",to:"",keyList:void 0},keyMap:{request:{keyList:"MsgKeyList"}}}}(e)),this._configMap.set(Eo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.DELETE_GROUP_MESSAGE)}),body:{groupID:"",deleter:"",keyList:void 0,topicID:void 0},keyMap:{request:{deleter:"Deleter_Account",keyList:"Seqs"}}}}(e)),this._configMap.set(pi,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.IM_OPEN_TRANSLATE,".").concat(U.CMD.TRANSLATE_TEXT)}),body:{sourceTextList:void 0,SDKAppID:0,from:0,source:"",target:""},keyMap:{request:{sourceTextList:"SourceText",SDKAppID:"SdkAppId",from:"FromAccount"},response:{TargetText:"translatedTextList",RequestId:"requestID",CmdErrorCode:"error",ErrorCode:"code",ErrorInfo:"message"}}}}(e)),this._configMap.set(ko,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.OPEN_IM,".").concat(U.CMD.MODIFY_GROUP_MESSAGE)}),body:{groupID:"",topicID:void 0,sequence:0,version:0,elements:void 0,cloudCustomData:void 0},keyMap:{request:{sequence:"MsgSeq",version:"MsgVersion",type:"MsgType",content:"MsgContent"}}}}(e)),this._configMap.set(vo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.GET_READ_RECEIPT)}),body:{groupID:"",sequenceList:void 0},keyMap:{request:{sequence:"MsgSeq"}}}}(e)),this._configMap.set(yo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.OPEN_IM,".").concat(U.CMD.SEND_C2C_READ_RECEIPT)}),body:{peerAccount:"",messageInfoList:void 0},keyMap:{request:{peerAccount:"Peer_Account",messageInfoList:"C2CMsgInfo",fromAccount:"From_Account",toAccount:"To_Account",sequence:"MsgSeq",random:"MsgRandom",time:"MsgTime",clientTime:"MsgClientTime"}}}}(e)),this._configMap.set(mo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.SEND_READ_RECEIPT)}),body:{groupID:"",sequenceList:void 0},keyMap:{request:{sequenceList:"MsgSeqList",sequence:"MsgSeq"}}}}(e)),this._configMap.set(Mo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.GET_READ_RECEIPT_DETAIL)}),body:{groupID:"",sequence:void 0,flag:0,cursor:0,count:0},keyMap:{request:{sequence:"MsgSeq",count:"Num"},response:{ReadList:"readUserIDList",Read_Account:"userID",UnreadList:"unreadUserIDList",Unread_Account:"userID",IsFinish:"isCompleted"}}}}(e)),this._configMap.set(Fn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.OPEN_IM_MSG_EXT,".").concat(U.CMD.MODIFY_C2C_MESSAGE_EXTENSIONS)}),body:{from:void 0,to:void 0,messageKey:void 0,operateType:void 0,extensionList:void 0}}}(e)),this._configMap.set(qn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.OPEN_IM_MSG_EXT,".").concat(U.CMD.GET_C2C_MESSAGE_EXTENSIONS)}),body:{from:void 0,to:void 0,messageKey:void 0,startSequence:void 0}}}(e)),this._configMap.set(wo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.OPEN_IM_MSG_EXT,".").concat(U.CMD.MODIFY_GROUP_MESSAGE_EXTENSIONS)}),body:{groupID:void 0,topicID:void 0,messageSequence:void 0,operateType:void 0,extensionList:void 0}}}(e)),this._configMap.set(No,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.OPEN_IM_MSG_EXT,".").concat(U.CMD.GET_GROUP_MESSAGE_EXTENSIONS)}),body:{groupID:void 0,topicID:void 0,messageSequence:void 0,startSequence:void 0}}}(e)),this._configMap.set(Gn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.OPEN_IM,".").concat(U.CMD.GET_PEER_READ_TIME)}),body:{userIDList:void 0},keyMap:{request:{userIDList:"To_Account"},response:{ReadTime:"peerReadTimeList"}}}}(e)),this._configMap.set("get",function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.RECENT_CONTACT,".").concat(U.CMD.GET_CONVERSATION_LIST)}),body:{fromAccount:void 0,count:0},keyMap:{request:{},response:{SessionItem:"conversations",ToAccount:"groupID",To_Account:"userID",UnreadMsgCount:"unreadCount",MsgGroupReadedSeq:"messageReadSeq",C2cPeerReadTime:"c2cPeerReadTime"}}}}(e)),this._configMap.set(Bn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.RECENT_CONTACT,".").concat(U.CMD.PAGING_GET_CONVERSATION_LIST)}),body:{fromAccount:void 0,timeStamp:void 0,startIndex:void 0,pinnedTimeStamp:void 0,pinnedStartIndex:void 0,orderType:void 0,messageAssistFlag:4,assistFlag:15},keyMap:{request:{messageAssistFlag:"MsgAssistFlags",assistFlag:"AssistFlags",pinnedTimeStamp:"TopTimeStamp",pinnedStartIndex:"TopStartIndex"},response:{SessionItem:"conversations",ToAccount:"groupID",To_Account:"userID",UnreadMsgCount:"unreadCount",MsgGroupReadedSeq:"messageReadSeq",C2cPeerReadTime:"c2cPeerReadTime",LastMsgFlags:"lastMessageFlag",TopFlags:"isPinned",TopTimeStamp:"pinnedTimeStamp",TopStartIndex:"pinnedStartIndex",GroupId:"convGroupID"}}}}(e)),this._configMap.set(Vn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.RECENT_CONTACT,".").concat(U.CMD.DELETE_CONVERSATION)}),body:{fromAccount:"",conversationList:void 0,clearHistoryMessage:void 0},keyMap:{request:{toGroupID:"ToGroupid",clearHistoryMessage:"ClearRamble",conversationList:"ContactItem"},response:{ResultItem:"resultList",ToGroupid:"groupID",ResultCode:"code",ResultInfo:"info"}}}}(e)),this._configMap.set(Hn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.RECENT_CONTACT,".").concat(U.CMD.CLEAR_HISTORY_MESSAGE)}),body:{fromAccount:"",toAccount:void 0,type:1,toGroupID:void 0},keyMap:{request:{toGroupID:"ToGroupid"}}}}(e)),this._configMap.set("top",function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.RECENT_CONTACT,".").concat(U.CMD.PIN_CONVERSATION)}),body:{fromAccount:"",operationType:1,itemList:void 0},keyMap:{request:{itemList:"RecentContactItem"}}}}(e)),this._configMap.set(jn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.OPEN_IM,".").concat(U.CMD.DELETE_GROUP_AT_TIPS)}),body:{messageListToDelete:void 0},keyMap:{request:{messageListToDelete:"DelMsgList",messageSeq:"MsgSeq",messageRandom:"MsgRandom"}}}}(e)),this._configMap.set(Kn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.RECENT_CONTACT,".").concat(U.CMD.MARK_CONVERSATION)}),body:{fromAccount:"",itemList:void 0},keyMap:{request:{itemList:"MarkItem",operationType:"OptType",groupID:"ToGroupId"},response:{ToGroupId:"groupID",OptType:"operationType"}}}}(e)),this._configMap.set(Wn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.RECENT_CONTACT,".").concat(U.CMD.MARK_CONVERSATION)}),body:{fromAccount:"",itemList:void 0},keyMap:{request:{itemList:"MarkItem",operationType:"OptType",groupID:"ToGroupId"},response:{ToGroupId:"groupID",OptType:"operationType"}}}}(e)),this._configMap.set(Yn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.RECENT_CONTACT,".").concat(U.CMD.CREATE_CONVERSATION_GROUP)}),body:{fromAccount:"",itemList:void 0},keyMap:{request:{itemList:"GroupContactItem",groupID:"ToGroupId"},response:{GroupId:"convGroupID",ToGroupId:"groupID",OptType:"operationType"}}}}(e)),this._configMap.set(zn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.RECENT_CONTACT,".").concat(U.CMD.DELETE_CONVERSATION_GROUP)}),body:{fromAccount:"",groupName:void 0},keyMap:{request:{},response:{GroupId:"convGroupID"}}}}(e)),this._configMap.set($n,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.RECENT_CONTACT,".").concat(U.CMD.UPDATE_CONVERSATION_GROUP)}),body:{fromAccount:"",updateType:void 0,updateGroup:void 0},keyMap:{request:{oldName:"OldGroupName",newName:"NewGroupName",groupID:"ToGroupId",operationType:"ContactOptType",groupName:"OldGroupName",updateItem:"ContactUpdateItem"},response:{ContactOptType:"operationType",ToGroupId:"groupID",GroupId:"convGroupID"}}}}(e)),this._configMap.set(Xn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.RECENT_CONTACT,".").concat(U.CMD.UPDATE_CONVERSATION_GROUP)}),body:{fromAccount:"",updateType:void 0,updateGroup:{groupName:void 0,updateGroupType:void 0,updateItem:void 0}},keyMap:{request:{},response:{}}}}(e)),this._configMap.set(Jn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.RECENT_CONTACT,".").concat(U.CMD.UPDATE_CONVERSATION_GROUP)}),body:{fromAccount:"",updateType:void 0,updateGroup:void 0},keyMap:{request:{},response:{}}}}(e)),this._configMap.set(Qn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.RECENT_CONTACT,".").concat(U.CMD.GET_CONVERSATION_GROUP_LIST)}),body:{fromAccount:"",startTime:void 0,startIndex:void 0},keyMap:{request:{},response:{GroupId:"convGroupID",ToGroupId:"groupID",OptType:"operationType",CustomMark:"customData",ContactGroupId:"convGroupIDList"}}}}(e)),this._configMap.set(En,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.PROFILE,".").concat(U.CMD.PORTRAIT_GET)}),body:{fromAccount:"",userItem:[]},keyMap:{request:{toAccount:"To_Account",standardSequence:"StandardSequence",customSequence:"CustomSequence"}}}}(e)),this._configMap.set(kn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.PROFILE,".").concat(U.CMD.PORTRAIT_SET)}),body:{fromAccount:"",profileItem:[{tag:we.NICK,value:""},{tag:we.GENDER,value:""},{tag:we.ALLOWTYPE,value:""},{tag:we.AVATAR,value:""}]},keyMap:{request:{toAccount:"To_Account",standardSequence:"StandardSequence",customSequence:"CustomSequence"}}}}(e)),this._configMap.set(Dn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.FRIEND,".").concat(U.CMD.GET_BLACKLIST)}),body:{fromAccount:"",startIndex:0,maxLimited:30,lastSequence:0},keyMap:{response:{CurruentSequence:"currentSequence"}}}}(e)),this._configMap.set(An,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.FRIEND,".").concat(U.CMD.ADD_BLACKLIST)}),body:{fromAccount:"",toAccount:[]}}}(e)),this._configMap.set(Ln,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.FRIEND,".").concat(U.CMD.DELETE_BLACKLIST)}),body:{fromAccount:"",toAccount:[]}}}(e)),this._configMap.set(ri,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.IM_OPEN_STATUS,".").concat(U.CMD.SET_SELF_STATUS)}),body:{customStatus:""},keyMap:{}}}(e)),this._configMap.set(ai,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.IM_OPEN_STATUS,".").concat(U.CMD.GET_USER_STATUS)}),body:{userIDList:void 0},keyMap:{response:{UserStatusList:"successUserList",ErrorList:"failureUserList",To_Account:"userID",Invalid_Account:"invalidUserID",Status:"statusType"}}}}(e)),this._configMap.set(si,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.IM_OPEN_STATUS,".").concat(U.CMD.SUBSCRIBE_USER_STATUS)}),body:{userIDList:void 0},keyMap:{response:{ErrorList:"failureUserList",To_Account:"userID",Invalid_Account:"invalidUserID"}}}}(e)),this._configMap.set(ci,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.IM_OPEN_STATUS,".").concat(U.CMD.UNSUBSCRIBE_USER_STATUS)}),body:{userIDList:void 0,unsubscribeAll:void 0},keyMap:{response:{ErrorList:"failureUserList",To_Account:"userID",Invalid_Account:"invalidUserID"}}}}(e)),this._configMap.set(Zn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.GET_JOINED_GROUPS)}),body:{memberAccount:"",limit:void 0,offset:void 0,groupType:void 0,responseFilter:{groupBaseInfoFilter:void 0,selfInfoFilter:void 0},isSupportTopic:0},keyMap:{request:{memberAccount:"Member_Account"},response:{GroupIdList:"groups",NoUnreadSeqList:"excludedUnreadSequenceList",MsgSeq:"readedSequence",LastRecallTime:"_lastRevokedTime"}}}}(e)),this._configMap.set(eo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.GET_GROUP_INFO)}),body:{groupIDList:void 0,responseFilter:{groupBaseInfoFilter:["Type","Name","Introduction","Notification","FaceUrl","Owner_Account","CreateTime","InfoSeq","LastInfoTime","LastMsgTime","MemberNum","MaxMemberNum","ApplyJoinOption","NextMsgSeq","ShutUpAllMember"],groupCustomFieldFilter:void 0,memberInfoFilter:void 0,memberCustomFieldFilter:void 0}},keyMap:{request:{groupIDList:"GroupIdList",groupCustomField:"AppDefinedData",memberCustomField:"AppMemberDefinedData",groupCustomFieldFilter:"AppDefinedDataFilter_Group",memberCustomFieldFilter:"AppDefinedDataFilter_GroupMember"},response:{GroupIdList:"groups",AppDefinedData:"groupCustomField",AppMemberDefinedData:"memberCustomField",AppDefinedDataFilter_Group:"groupCustomFieldFilter",AppDefinedDataFilter_GroupMember:"memberCustomFieldFilter",InfoSeq:"infoSequence",MemberList:"members",GroupInfo:"groups",ShutUpUntil:"muteUntil",ShutUpAllMember:"muteAllMembers"}}}}(e)),this._configMap.set(to,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.CREATE_GROUP)}),body:{type:void 0,name:void 0,groupID:void 0,ownerID:void 0,introduction:void 0,notification:void 0,maxMemberNum:void 0,joinOption:void 0,memberList:void 0,groupCustomField:void 0,memberCustomField:void 0,webPushFlag:1,avatar:"",isSupportTopic:void 0,inviteOption:void 0},keyMap:{request:{ownerID:"Owner_Account",userID:"Member_Account",avatar:"FaceUrl",maxMemberNum:"MaxMemberCount",joinOption:"ApplyJoinOption",groupCustomField:"AppDefinedData",memberCustomField:"AppMemberDefinedData",inviteOption:"InviteJoinOption"},response:{HugeGroupFlag:"avChatRoomFlag",OverJoinedGroupLimit_Account:"overLimitUserIDList"}}}}(e)),this._configMap.set(no,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.DESTROY_GROUP)}),body:{groupID:void 0}}}(e)),this._configMap.set(oo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.MODIFY_GROUP_INFO)}),body:{groupID:void 0,name:void 0,introduction:void 0,notification:void 0,avatar:void 0,joinOption:void 0,groupCustomField:void 0,muteAllMembers:void 0,inviteOption:void 0},keyMap:{request:{groupCustomField:"AppDefinedData",muteAllMembers:"ShutUpAllMember",joinOption:"ApplyJoinOption",avatar:"FaceUrl",inviteOption:"InviteJoinOption"},response:{AppDefinedData:"groupCustomField",ShutUpAllMember:"muteAllMembers"}}}}(e)),this._configMap.set(io,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.APPLY_JOIN_GROUP)}),body:{groupID:void 0,applyMessage:void 0,userDefinedField:void 0,webPushFlag:1,historyMessageFlag:void 0},keyMap:{request:{applyMessage:"ApplyMsg",historyMessageFlag:"HugeGroupHistoryMsgFlag"},response:{HugeGroupFlag:"avChatRoomFlag",AVChatRoomKey:"avChatRoomKey",RspMsgList:"messageList",ToGroupId:"to"}}}}(e)),this._configMap.set(ro,function(e){return e.a2,e.tinyid,{head:t(t({},_(e,ba)),{},{servcmd:"".concat(U.NAME.BIG_GROUP_NO_AUTH,".").concat(U.CMD.APPLY_JOIN_GROUP)}),body:{groupID:void 0,applyMessage:void 0,userDefinedField:void 0,webPushFlag:1},keyMap:{request:{applyMessage:"ApplyMsg"},response:{HugeGroupFlag:"avChatRoomFlag"}}}}(e)),this._configMap.set(ao,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.QUIT_GROUP)}),body:{groupID:void 0}}}(e)),this._configMap.set(so,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.SEARCH_GROUP_BY_ID)}),body:{groupIDList:void 0,responseFilter:{groupBasePublicInfoFilter:["Type","Name","Introduction","Notification","FaceUrl","CreateTime","Owner_Account","LastInfoTime","LastMsgTime","NextMsgSeq","MemberNum","MaxMemberNum","ApplyJoinOption","InviteJoinOption"]}},keyMap:{response:{}}}}(e)),this._configMap.set(co,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.CHANGE_GROUP_OWNER)}),body:{groupID:void 0,newOwnerID:void 0},keyMap:{request:{newOwnerID:"NewOwner_Account"}}}}(e)),this._configMap.set(uo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.HANDLE_APPLY_JOIN_GROUP)}),body:{groupID:void 0,applicant:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,messageKey:void 0,userDefinedField:void 0},keyMap:{request:{applicant:"Applicant_Account",handleAction:"HandleMsg",handleMessage:"ApprovalMsg",messageKey:"MsgKey"}}}}(e)),this._configMap.set(lo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.HANDLE_INVITE_JOIN_GROUP)}),body:{groupID:void 0,applicant:void 0,invitee:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,userDefinedField:void 0},keyMap:{request:{applicant:"Applicant_Account",invitee:"Invited_Account",handleAction:"HandleMsg",handleMessage:"ApprovalMsg"}}}}(e)),this._configMap.set(fo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.HANDLE_GROUP_INVITATION)}),body:{groupID:void 0,inviter:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,messageKey:void 0,userDefinedField:void 0},keyMap:{request:{inviter:"Inviter_Account",handleAction:"HandleMsg",handleMessage:"ApprovalMsg",messageKey:"MsgKey"}}}}(e)),this._configMap.set(Io,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.GET_GROUP_APPLICATION)}),body:{startTime:void 0,limit:void 0,handleAccount:void 0},keyMap:{request:{handleAccount:"Handle_Account"},response:{To_Account:"userID"}}}}(e)),this._configMap.set(Co,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.OPEN_IM,".").concat(U.CMD.DELETE_GROUP_SYSTEM_MESSAGE)}),body:{messageListToDelete:void 0},keyMap:{request:{messageListToDelete:"DelMsgList",messageSeq:"MsgSeq",messageRandom:"MsgRandom"}}}}(e)),this._configMap.set(bo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.BIG_GROUP_LONG_POLLING,".").concat(U.CMD.AVCHATROOM_LONG_POLL)}),body:{USP:1,startSeq:1,startBroadcastSeq:void 0,holdTime:90,key:void 0,simplifiedMessage:void 0},keyMap:{request:{USP:"USP"},response:{ToGroupId:"groupID",RspBroadcastMsgList:"broadcastMessageList",IsSystemMsg:"isSystemMessage"}}}}(e)),this._configMap.set(To,function(e){return e.a2,e.tinyid,{head:t(t({},_(e,Ta)),{},{servcmd:"".concat(U.NAME.BIG_GROUP_LONG_POLLING_NO_AUTH,".").concat(U.CMD.AVCHATROOM_LONG_POLL)}),body:{USP:1,startSeq:1,holdTime:90,key:void 0,simplifiedMessage:void 0},keyMap:{request:{USP:"USP"},response:{ToGroupId:"groupID",RspBroadcastMsgList:"broadcastMessageList",IsSystemMsg:"isSystemMessage"}}}}(e)),this._configMap.set(So,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.GET_ONLINE_MEMBER_NUM)}),body:{groupID:void 0}}}(e)),this._configMap.set(Do,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.SET_GROUP_ATTRIBUTES)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:["RaceConflict"]},keyMap:{request:{key:"key",value:"value"}}}}(e)),this._configMap.set(Ao,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.MODIFY_GROUP_ATTRIBUTES)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:["RaceConflict"]},keyMap:{request:{key:"key",value:"value"}}}}(e)),this._configMap.set(Lo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.DELETE_GROUP_ATTRIBUTES)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:["RaceConflict"]},keyMap:{request:{key:"key"}}}}(e)),this._configMap.set(Oo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.CLEAR_GROUP_ATTRIBUTES)}),body:{groupID:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:["RaceConflict"]}}}(e)),this._configMap.set(Ro,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP_ATTR,".").concat(U.CMD.GET_GROUP_ATTRIBUTES)}),body:{groupID:void 0,avChatRoomKey:void 0,groupType:1},keyMap:{request:{avChatRoomKey:"Key",groupType:"GroupType"}}}}(e)),this._configMap.set(Po,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.GET_GROUP_NOTIFY)}),body:{notifyType:1,groupID:"",beginTime:0,endTime:0,limit:20},keyMap:{request:{},response:{NextMsgTime:"nextRevokedTime",NotifyMsgList:"notifyList"}}}}(e)),this._configMap.set(Go,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.UPDATE_GROUP_COUNTER)}),body:{groupID:void 0,counterList:void 0,avChatRoomKey:void 0,mode:void 0},keyMap:{request:{counterList:"GroupCounter"}}}}(e)),this._configMap.set(Uo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.GET_GROUP_COUNTER)}),body:{groupID:void 0,keyList:[],avChatRoomKey:void 0},keyMap:{request:{keyList:"GroupCounterKeys"}}}}(e)),this._configMap.set(ti,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP_COMMUNITY,".").concat(U.CMD.CREATE_TOPIC)}),body:{groupID:void 0,topicName:void 0,avatar:void 0,customData:void 0,topicID:void 0,notification:void 0,introduction:void 0},keyMap:{request:{avatar:"FaceUrl"}}}}(e)),this._configMap.set(ni,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP_COMMUNITY,".").concat(U.CMD.DELETE_TOPIC)}),body:{groupID:void 0,topicIDList:void 0},keyMap:{request:{topicIDList:"TopicIdList"},response:{DestroyResultItem:"resultList"}}}}(e)),this._configMap.set(oi,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP_COMMUNITY,".").concat(U.CMD.UPDATE_TOPIC_PROFILE)}),body:{groupID:void 0,topicID:void 0,avatar:void 0,customData:void 0,notification:void 0,introduction:void 0,muteAllMembers:void 0,topicName:void 0},keyMap:{request:{avatar:"FaceUrl",muteAllMembers:"ShutUpAllMember"}}}}(e)),this._configMap.set(ii,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP_COMMUNITY,".").concat(U.CMD.GET_TOPIC_LIST)}),body:{groupID:void 0,topicIDList:void 0,MemberInfoFilter:["NoUnreadSeqList"]},keyMap:{request:{topicIDList:"TopicIdList"},response:{TopicAndSelfInfo:"topicInfoList",TopicInfo:"topic",GroupID:"groupID",ShutUpTime:"muteTime",ShutUpAllFlag:"muteAllMembers",LastMsgTime:"lastMessageTime",MsgSeq:"readedSequence",LastMsgSeq:"sequence",NoUnreadSeqList:"excludedUnreadSequenceList"}}}}(e)),this._configMap.set(xo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.GET_GROUP_MEMBER_LIST)}),body:{groupID:void 0,limit:0,offset:void 0,next:void 0,memberRoleFilter:void 0,memberInfoFilter:["Role","NameCard","ShutUpUntil","JoinTime"],memberCustomFieldFilter:void 0},keyMap:{request:{memberCustomFieldFilter:"AppDefinedDataFilter_GroupMember"},response:{AppMemberDefinedData:"memberCustomField",AppDefinedDataFilter_GroupMember:"memberCustomFieldFilter",MemberList:"members",ShutUpUntil:"muteUntil"}}}}(e)),this._configMap.set(Fo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP_AVCHATROOM,".").concat(U.CMD.GET_AVCHATROOM_MEMBER_LIST)}),body:{groupID:void 0,offset:void 0,filter:void 0},keyMap:{request:{offset:"Timestamp",filter:"Mark"},response:{NextTimestamp:"offset"}}}}(e)),this._configMap.set(qo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.GET_GROUP_MEMBER_INFO)}),body:{groupID:void 0,userIDList:void 0,memberInfoFilter:void 0,memberCustomFieldFilter:void 0},keyMap:{request:{userIDList:"Member_List_Account",memberCustomFieldFilter:"AppDefinedDataFilter_GroupMember"},response:{MemberList:"members",ShutUpUntil:"muteUntil",AppDefinedDataFilter_GroupMember:"memberCustomFieldFilter",AppMemberDefinedData:"memberCustomField"}}}}(e)),this._configMap.set(Bo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.ADD_GROUP_MEMBER)}),body:{groupID:void 0,silence:void 0,userIDList:void 0},keyMap:{request:{userID:"Member_Account",userIDList:"MemberList"},response:{MemberList:"members"}}}}(e)),this._configMap.set(Vo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.DELETE_GROUP_MEMBER)}),body:{groupID:void 0,userIDList:void 0,reason:void 0},keyMap:{request:{userIDList:"MemberToDel_Account"}}}}(e)),this._configMap.set(Ho,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.BAN_AVCHATROOM_MEMBER)}),body:{groupID:void 0,userIDList:void 0,duration:void 0,reason:""},keyMap:{request:{userIDList:"Members_Account",duration:"Duration",reason:"Description"}}}}(e)),this._configMap.set(jo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP,".").concat(U.CMD.MODIFY_GROUP_MEMBER_INFO)}),body:{groupID:void 0,topicID:void 0,userID:void 0,messageRemindType:void 0,nameCard:void 0,role:void 0,memberCustomField:void 0,muteTime:void 0},keyMap:{request:{userID:"Member_Account",memberCustomField:"AppMemberDefinedData",muteTime:"ShutUpTime",messageRemindType:"MsgFlag"}}}}(e)),this._configMap.set(Ko,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.GROUP_AVCHATROOM,".").concat(U.CMD.MARK_AVCHATROOM_MEMBER_INFO)}),body:{groupID:void 0,operationType:1,memberList:[]},keyMap:{request:{operationType:"CommandType",memberList:"MemberList",markType:"Marks",userID:"Member_Account"},response:{CommandType:"operationType",Marks:"markType",Member_Account:"userID"}}}}(e)),this._configMap.set(zo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.IM_OPEN_STAT,".").concat(U.CMD.TIM_WEB_REPORT_V2)}),body:{header:{},event:[],quality:[]},keyMap:{request:{SDKType:"sdk_type",SDKVersion:"sdk_version",deviceType:"device_type",platform:"platform",instanceID:"instance_id",traceID:"trace_id",SDKAppID:"sdk_app_id",userID:"user_id",tinyID:"tiny_id",extension:"extension",timestamp:"timestamp",networkType:"network_type",eventType:"event_type",code:"error_code",message:"error_message",moreMessage:"more_message",duplicate:"duplicate",costTime:"cost_time",level:"level",qualityType:"quality_type",reportIndex:"report_index",wholePeriod:"whole_period",totalCount:"total_count",rttCount:"success_count_business",successRateOfRequest:"percent_business",countLessThan1Second:"success_count_business",percentOfCountLessThan1Second:"percent_business",countLessThan3Second:"success_count_platform",percentOfCountLessThan3Second:"percent_platform",successCountOfBusiness:"success_count_business",successRateOfBusiness:"percent_business",successCountOfPlatform:"success_count_platform",successRateOfPlatform:"percent_platform",successCountOfMessageReceived:"success_count_business",successRateOfMessageReceived:"percent_business",avgRTT:"average_value",avgDelay:"average_value",avgValue:"average_value",uiPlatform:"ui_platform"}}}}(o)),this._configMap.set($o,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.HEARTBEAT,".").concat(U.CMD.ALIVE)}),body:{}}}(e)),this._configMap.set("msg_push",function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.IM_OPEN_PUSH,".").concat(U.CMD.MESSAGE_PUSH)}),body:{},keyMap:{response:{C2cMsgArray:"C2CMessageArray",GroupMsgArray:"groupMessageArray",GroupTips:"groupTips",C2cNotifyMsgArray:"C2CNotifyMessageArray",C2cMsgInfo:"C2CReadReceiptArray",ClientSeq:"clientSequence",MsgPriority:"priority",NoticeSeq:"noticeSequence",MsgContent:"content",MsgType:"type",MsgBody:"elements",ToGroupId:"to",Desc:"description",Ext:"extension",IsSyncMsg:"isSyncMessage",Flag:"needSync",NeedAck:"needAck",PendencyAdd_Account:"userID",ProfileImNick:"nick",PendencyType:"applicationType",C2CReadAllMsg:"readAllC2CMessage",IsNeedReadReceipt:"needReadReceipt",Status:"statusType"}}}}(e)),this._configMap.set("multi_msg_push_ws",function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.IM_OPEN_PUSH,".").concat(U.CMD.MULTI_MESSAGE_PUSH)}),body:{},keyMap:{response:{GroupMsgArray:"groupMessageArray",GroupTips:"groupTips",ClientSeq:"clientSequence",MsgPriority:"priority",NoticeSeq:"noticeSequence",MsgContent:"content",MsgType:"type",MsgBody:"elements",ToGroupId:"to",Desc:"description",Ext:"extension",IsSyncMsg:"isSyncMessage",Flag:"needSync",NeedAck:"needAck",PendencyType:"applicationType"}}}}(e)),this._configMap.set(Xo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.OPEN_IM,".").concat(U.CMD.MESSAGE_PUSH_ACK)}),body:{sessionData:void 0},keyMap:{request:{sessionData:"SessionData"}}}}(e)),this._configMap.set("stat_forceoffline",function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.IM_OPEN_STATUS,".").concat(U.CMD.STATUS_FORCE_OFFLINE)}),body:{},keyMap:{response:{C2cNotifyMsgArray:"C2CNotifyMessageArray",NoticeSeq:"noticeSequence",KickoutMsgNotify:"kickoutMsgNotify",NewInstInfo:"newInstanceInfo"}}}}(e)),this._configMap.set(Qo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.IM_LONG_MESSAGE,".").concat(U.CMD.DOWNLOAD_MERGER_MESSAGE)}),body:{downloadKey:""},keyMap:{response:{Data:"data",Desc:"description",Ext:"extension",Download_Flag:"downloadFlag",ThumbUUID:"thumbUUID",VideoUUID:"videoUUID"}}}}(e)),this._configMap.set(Jo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.IM_LONG_MESSAGE,".").concat(U.CMD.UPLOAD_MERGER_MESSAGE)}),body:{messageList:[]},keyMap:{request:{fromAccount:"From_Account",toAccount:"To_Account",msgTimeStamp:"MsgTimeStamp",msgSeq:"MsgSeq",msgRandom:"MsgRandom",msgBody:"MsgBody",type:"MsgType",content:"MsgContent",data:"Data",description:"Desc",extension:"Ext",sizeType:"Type",uuid:"UUID",url:"",imageUrl:"URL",fileUrl:"Url",remoteAudioUrl:"Url",remoteVideoUrl:"VideoUrl",thumbUUID:"ThumbUUID",videoUUID:"VideoUUID",videoUrl:"",downloadFlag:"Download_Flag",from:"From_Account",time:"MsgTimeStamp",messageRandom:"MsgRandom",messageSequence:"MsgSeq",elements:"MsgBody",clientSequence:"ClientSeq",payload:"MsgContent",messageList:"MsgList",messageNumber:"MsgNum",abstractList:"AbstractList",messageBody:"MsgBody"}}}}(e)),this._configMap.set(di,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.IM_OPEN_STATUS,".").concat(U.CMD.SET_TOKEN)}),body:{tokenID:"",pushMsg:0,sdkAppID:0,businessID:"",deviceBrand:"",deviceToken:"",isTpns:0,isWebUniapp:0},keyMap:{request:{tokenID:"TokenID",pushMsg:"PushMsg",sdkAppID:"EnterVersion",businessID:"BusiID",deviceBrand:"InstType",deviceToken:"VarToken",isTpns:"IsTpns"}}}}(e)),this._configMap.set(li,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.IM_OPEN_STATUS,".").concat(U.CMD.STAT_FOREGROUND)}),body:{isWebUniapp:0}}}(e)),this._configMap.set(ui,function(e){return{head:t(t({},e),{},{servcmd:"".concat(U.NAME.IM_OPEN_STATUS,".").concat(U.CMD.STAT_BACKGROUND)}),body:{C2CUnread:0,GroupUnread:0,isWebUniapp:0},keyMap:{request:{c2cUnreadCount:"C2cUnread",groupUnreadCount:"GrpUnread"}}}}(e))}},{key:"has",value:function(e){return this._configMap.has(e)}},{key:"get",value:function(e){return this._configMap.get(e)}},{key:"update",value:function(){this._fillConfigMap()}},{key:"getKeyMap",value:function(e){return this.has(e)?this.get(e).keyMap||{}:(Oe.w("".concat(this._n,".getKeyMap unknown protocolName:").concat(e)),{})}},{key:"getProtocolData",value:function(e){var t=e.protocolName,n=e.requestData,o=this.get(t),i=null;if(n){var r=this._simpleDeepCopy(o),a=this._updateService(n,r),s=a.body,c=Object.create(null);for(var u in s)if(Object.prototype.hasOwnProperty.call(s,u)){if(c[u]=s[u],void 0===n[u])continue;c[u]=n[u]}a.body=c,i=this._getUplinkData(a)}else i=this._getUplinkData(o);return i}},{key:"_getUplinkData",value:function(e){var t=this._requestDataCleaner(e),n=St(t.head),o=function(e,t){var n=0;return function e(t,o){if(++n>100)return n--,t;if(Ye(t)){var i=t.map((function(t){return Ke(t)?e(t,o):t}));return n--,i}if(Ke(t)){var r=(a=t,s=function(e,t){if(!Ze(t))return!1;if((i=t)!==la(i))for(var n=0;n<ua.ignoreKeyWord.length&&!t.includes(ua.ignoreKeyWord[n]);n++);var i;return ze(o[t])?function(e){return"OPPOChannelID"===e?e:e[0].toUpperCase()+la(e).slice(1)}(t):o[t]},c=Object.create(null),Object.keys(a).forEach((function(e){var t=s(a[e],e);t&&(c[t]=a[e])})),c);return r=mt(r,(function(t,n){return Ye(t)||Ke(t)?e(t,o):t})),n--,r}var a,s,c}(e,t)}(t.body,this._getRequestKeyMap(n));return t.body=o,t}},{key:"_updateService",value:function(e,t){var n=St(t.head);if(this._isFromGroupRequest(t)){var o=e.type,i=e.groupID,r=void 0===i?void 0:i,a=e.groupIDList,s=void 0===a?[]:a;ze(r)&&(r=s[0]||""),pt({type:o,groupID:r})&&(t.head.servcmd="".concat(U.NAME.GROUP_COMMUNITY,".").concat(n))}return t}},{key:"_isFromGroupRequest",value:function(e){return e.head.servcmd.includes(U.NAME.GROUP)||e.head.servcmd.includes(U.NAME.GROUP_ATTR)}},{key:"_getRequestKeyMap",value:function(e){var n=this.getKeyMap(e);return t(t({},ua.request),n.request)}},{key:"_requestDataCleaner",value:function(e){var t=Array.isArray(e)?[]:Object.create(null);for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&Ze(o)&&null!==e[o]&&void 0!==e[o]&&("object"!==n(e[o])?t[o]=e[o]:t[o]=this._requestDataCleaner.bind(this)(e[o]));return t}},{key:"_simpleDeepCopy",value:function(e){for(var t,n=Object.keys(e),o={},i=0,r=n.length;i<r;i++)t=n[i],Ye(e[t])?o[t]=Array.from(e[t]):Ke(e[t])?o[t]=this._simpleDeepCopy(e[t]):o[t]=e[t];return o}}]),e}(),Ea=[Xo],ka=function(){function e(t){r(this,e),this._sessionModule=t,this._n="DownlinkHandler",this._eventHandlerMap=new Map,this._eventHandlerMap.set("C2CMessageArray",this._c2cMessageArrayHandler.bind(this)),this._eventHandlerMap.set("groupMessageArray",this._groupMessageArrayHandler.bind(this)),this._eventHandlerMap.set("groupTips",this._groupTipsHandler.bind(this)),this._eventHandlerMap.set("C2CNotifyMessageArray",this._C2CNotifyMessageArrayHandler.bind(this)),this._eventHandlerMap.set("C2CReadReceiptArray",this._C2CReadReceiptArrayHandler.bind(this)),this._eventHandlerMap.set("profileModify",this._profileHandler.bind(this)),this._eventHandlerMap.set("friendListMod",this._relationChainHandler.bind(this)),this._eventHandlerMap.set("recentContactMod",this._recentContactHandler.bind(this)),this._eventHandlerMap.set("readAllC2CMessage",this._allMessageReadHandler.bind(this)),this._eventHandlerMap.set("c2cMessageModified",this._c2cMessageModifiedHandler.bind(this)),this._eventHandlerMap.set("groupMessageModified",this._groupMessageModifiedHandler.bind(this)),this._eventHandlerMap.set("userStatusList",this._userStatusListHandler.bind(this)),this._eventHandlerMap.set("messageExtensionNotify",this._messageExtensionNotifyHandler.bind(this)),this._keys=I(this._eventHandlerMap.keys())}return c(e,[{key:"_c2cMessageArrayHandler",value:function(e){var t=this._sessionModule.getModule(6);t&&(e.dataList.forEach((function(e){if(1===e.isSyncMessage){var t=e.from;e.from=e.to,e.to=t}})),1===e.needSync&&this._sessionModule.getModule(19).startOnlineSync(),t.onNewC2CMessage({dataList:e.dataList,isInstantMessage:!0}))}},{key:"_c2cMessageModifiedHandler",value:function(e){var t=this._sessionModule.getModule(6);t&&t.onC2CMessageModified(e)}},{key:"_groupMessageArrayHandler",value:function(e){var t=this._sessionModule.getModule(7);t&&t.onNewGroupMessage({event:e.event,dataList:e.dataList,isInstantMessage:!0})}},{key:"_groupMessageModifiedHandler",value:function(e){var t=this._sessionModule.getModule(7);t&&t.onGroupMessageModified(e)}},{key:"_groupTipsHandler",value:function(e){var t=this._sessionModule.getModule(7);if(t){var n=e.event,o=e.dataList,i=e.isInstantMessage,r=void 0===i||i,a=e.isSyncingEnded;switch(n){case 4:case 6:t.onNewGroupTips({event:n,dataList:o});break;case 5:for(var s=0;s<o.length;s++)if(Ye(o[s].elements.revokedInfos))t.onGroupMessageRevoked({dataList:o});else if(Ye(o[s].elements.groupMessageReadNotice))t.onGroupMessageReadNotice({dataList:o});else{if(!Ye(o[s].elements.readReceiptList)){t.onNewGroupSystemNotice({dataList:o,isInstantMessage:r,isSyncingEnded:a});break}t.onReadReceiptList({dataList:o})}break;case 12:this._sessionModule.getModule(11).onNewGroupAtTips({dataList:o});break;default:Oe.l("".concat(this._n,"._groupTipsHandler unknown event:").concat(n," dataList:"),o)}}}},{key:"_C2CNotifyMessageArrayHandler",value:function(e){var t=this,n=e.dataList;if(Ye(n)){var o=this._sessionModule.getModule(6);n.forEach((function(e){if(We(e))if(e.hasOwnProperty("kickoutMsgNotify")){var i=e.kickoutMsgNotify,r=i.kickType,a=i.newInstanceInfo,s=void 0===a?{}:a;1===r?t._sessionModule.onMultipleAccountKickedOut(s):2===r?t._sessionModule.onMultipleDeviceKickedOut(s):3===r&&t._sessionModule.onRestApiKickedOut(s)}else e.hasOwnProperty("c2cMessageRevokedNotify")?o&&o.onC2CMessageRevoked({dataList:n}):e.hasOwnProperty("c2cMessageReadReceipt")?o&&o.onC2CMessageReadReceipt({dataList:n}):e.hasOwnProperty("c2cMessageReadNotice")?o&&o.onC2CMessageReadNotice({dataList:n}):e.hasOwnProperty("muteNotificationsSync")&&t._sessionModule.getModule(11).onC2CMessageRemindTypeSynced({dataList:n})}))}}},{key:"_C2CReadReceiptArrayHandler",value:function(e){this._sessionModule.getModule(6).onReadReceiptList(e)}},{key:"_profileHandler",value:function(e){this._sessionModule.getModule(4).onProfileModified({dataList:e.dataList});var t=this._sessionModule.getModule(8);t&&t.onFriendProfileModified({dataList:e.dataList})}},{key:"_relationChainHandler",value:function(e){this._sessionModule.getModule(4).onRelationChainModified({dataList:e.dataList});var t=this._sessionModule.getModule(8);t&&t.onRelationChainModified({dataList:e.dataList})}},{key:"_recentContactHandler",value:function(e){var t=e.dataList;if(Ye(t)){var n=this._sessionModule.getModule(11);n&&t.forEach((function(e){var t=e.pushType;if(1===t){var o=e.recentContactDeleteItem;n.onConversationDeleted(o.recentContactList)}else if(2===t){var i=e.recentContactTopItem;n.onConversationPinned(i.recentContactList)}else if(3===t){var r=e.recentContactTopItem;n.onConversationUnpinned(r.recentContactList)}else if(4===t){var a=e.recentContactMarkContact;n.onConversationMarkUpdated(a.recentContactMarkContactItem)}else if(5===t){var s=e.recentContactCreateContactGroup;n.onConversationGroupCreated(s.msgContactGroupContactItem)}else if(6===t){var c=e.recentContactDelContactGroup;n.onConversationGroupDeleted(c.msgGroupItem)}else if(7===t){var u=e.recentContactUpdateContactGroup,l=u.updateType,d=u.msgUpdateGroup,f=u.msgUpdateContact;if(1===l){var p=d.updateGroupType;1===p?n.onConversationGroupNameUpdated(d):2===p&&n.onConversationInGroupUpdated(d)}else 2===l&&n.onConversationAddedToOrDeletedFromGroup(f)}}))}}},{key:"_allMessageReadHandler",value:function(e){var t=e.dataList,n=this._sessionModule.getModule(11);n&&n.onPushedAllMessageRead(t)}},{key:"_userStatusListHandler",value:function(e){this._sessionModule.getModule(4).onUserStatusUpdated(e)}},{key:"_messageExtensionNotifyHandler",value:function(e){this._sessionModule.getModule(3).onMessageExtensionNotify(e)}},{key:"onMessage",value:function(e){var t=this,n=e.body;if(this._filterMessageFromIMOpenPush(e)){var o=n.eventArray,i=n.isInstantMessage,r=n.isSyncingEnded,a=n.needSync;if(Ye(o))for(var s=null,c=null,u=0,l=0,d=o.length;l<d;l++){u=(s=o[l]).event;var f=Object.keys(s).find((function(e){return-1!==t._keys.indexOf(e)}));f?(c=14===u?{readAllC2CMessage:s[f],groupMessageReadInfoList:s.groupMessageReadNotice||[]}:16===u?{userID:s.userID,readReceiptList:s[f]}:s[f],this._eventHandlerMap.get(f)({event:u,dataList:c,isInstantMessage:i,isSyncingEnded:r,needSync:a})):Oe.l("".concat(this._n,".onMessage unknown eventItem:").concat(s))}}}},{key:"_filterMessageFromIMOpenPush",value:function(e){var t=e.head,n=e.body,o=t.servcmd,i=!1;if(ze(o)||(i=o.includes(U.NAME.IM_CONFIG_MANAGER)||o.includes(U.NAME.OVERLOAD_PUSH)||o.includes(U.NAME.STAT_SERVICE)),!i)return!0;if(o.includes(U.CMD.PUSHED_CLOUD_CONTROL_CONFIG))this._sessionModule.getModule(23).onPushedCloudControlConfig(n);else if(o.includes(U.CMD.PUSHED_COMMERCIAL_CONFIG))this._sessionModule.getModule(27).onPushedConfig(n);else if(o.includes(U.CMD.OVERLOAD_NOTIFY))this._sessionModule.onPushedServerOverload(n);else if(o.includes(U.CMD.KICK_OTHER)){var r=Date.now();this._sessionModule.reLoginOnKickOther();var a=new Ai("kickOther"),s=this._sessionModule.getModule(1).getLastWsHelloTs(),c=r-s;a.setMessage("last wshello time:".concat(s," diff:").concat(c,"ms")).setNetworkType(this._sessionModule.getNetworkType()).end()}return!1}}]),e}(),Da=[{cmd:U.CMD.GET_GROUP_INFO,interval:1,count:20},{cmd:U.CMD.GET_AVCHATROOM_MEMBER_LIST,interval:3,count:1},{cmd:U.CMD.GET_GROUP_APPLICATION,interval:1,count:15},{cmd:U.CMD.GET_TOPIC_LIST,interval:1,count:10},{cmd:U.CMD.SET_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:U.CMD.MODIFY_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:U.CMD.DELETE_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:U.CMD.CLEAR_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:U.CMD.GET_GROUP_ATTRIBUTES,interval:5,count:20},{cmd:U.CMD.UPDATE_GROUP_COUNTER,interval:5,count:20},{cmd:U.CMD.GET_GROUP_COUNTER,interval:5,count:20},{cmd:U.CMD.SET_ALL_MESSAGE_READ,interval:1,count:1},{cmd:U.CMD.GET_USER_STATUS,interval:5,count:20},{cmd:U.CMD.SUBSCRIBE_USER_STATUS,interval:5,count:20},{cmd:U.CMD.UNSUBSCRIBE_USER_STATUS,interval:5,count:20}],Aa=function(e){l(o,e);var n=y(o);function o(e){var t;return r(this,o),(t=n.call(this,e))._n="SessionModule",t._platform=t.getPlatform(),t._protocolHandler=new Sa(v(t)),t._messageDispatcher=new ka(v(t)),t._commandFrequencyLimitMap=new Map,t._commandRequestInfoMap=new Map,t._serverOverloadInfoMap=new Map,t._init(),t.getInnerEmitterInstance().on(er,t._onCloudConfigUpdated,v(t)),t}return c(o,[{key:"_init",value:function(){this._updateCommandFrequencyLimitMap(Da)}},{key:"_onCloudConfigUpdated",value:function(){var e=this.getCloudConfig("cmd_frequency_limit");ze(e)||(e=JSON.parse(e),this._updateCommandFrequencyLimitMap(e))}},{key:"_updateCommandFrequencyLimitMap",value:function(e){var t=this;e.forEach((function(e){t._commandFrequencyLimitMap.set(e.cmd,{interval:e.interval,count:e.count})}))}},{key:"updateProtocolConfig",value:function(){this._protocolHandler.update()}},{key:"request",value:function(e){Oe.d("".concat(this._n,".request options:"),e);var t=e.protocolName,n=e.tjgID;if(!this._protocolHandler.has(t))return Oe.w("".concat(this._n,".request unknown protocol:").concat(t)),Xi({code:hi.CANNOT_FIND_PROTOCOL});var o=this.getProtocolData(e),i=o.head.servcmd;if(this._isFrequencyOverLimit(i))return Xi({code:hi.OVER_FREQUENCY_LIMIT});if(this._isServerOverload(i))return Xi({code:hi.OPEN_SERVICE_OVERLOAD_ERROR});Ut(n)||(o.head.tjgID=n);var r=this.getModule(21);return Ea.includes(t)?r.simplySend(o):r.send(o)}},{key:"getKeyMap",value:function(e){return this._protocolHandler.getKeyMap(e)}},{key:"genCommonHead",value:function(){var e=this.getModule(12);return{ver:"v4",platform:this._platform,websdkappid:P,websdkversion:N,a2:e.getA2Key()||void 0,tinyid:e.getTinyID()||void 0,status_instid:e.getStatusInstanceID(),sdkappid:e.getSDKAppID(),contenttype:e.getContentType(),reqtime:0,identifier:e.getA2Key()?void 0:e.getUserID(),usersig:e.getA2Key()?void 0:e.getUserSig(),sdkability:192371,tjgID:""}}},{key:"genCosSpecifiedHead",value:function(){var e=this.getModule(12);return{ver:"v4",platform:this._platform,websdkappid:P,websdkversion:N,sdkappid:e.getSDKAppID(),contenttype:e.getContentType(),reqtime:0,identifier:e.getUserID(),usersig:e.getUserSig(),status_instid:e.getStatusInstanceID(),sdkability:192371}}},{key:"genSSOReportHead",value:function(){var e=this.getModule(12);return{ver:"v4",platform:this._platform,websdkappid:P,websdkversion:N,sdkappid:e.getSDKAppID(),contenttype:"",reqtime:0,identifier:"",usersig:"",status_instid:e.getStatusInstanceID(),sdkability:192371}}},{key:"getProtocolData",value:function(e){return this._protocolHandler.getProtocolData(e)}},{key:"trans",value:function(e){var n=e.servcmd,o=e.data,i={head:t(t({},this.genCommonHead()),{},{servcmd:n}),body:o};return this.getModule(21).send(i)}},{key:"sendComboMessage",value:function(e){var n=e.servcmd,o=e.data,i={head:t(t({},this.genCommonHead()),{},{servcmd:n}),body:o};return this.getModule(21).send(i)}},{key:"onErrorCodeNotZero",value:function(e){var t=e.errorCode;if(t===hi.HELLO_ANSWER_KICKED_OUT){var n=e.kickType,o=e.newInstanceInfo,i=void 0===o?{}:o;1===n?this.onMultipleAccountKickedOut(i):2===n?this.onMultipleDeviceKickedOut(i):3===n&&this.onRestApiKickedOut(i)}t!==hi.MESSAGE_A2KEY_EXPIRED&&t!==hi.ACCOUNT_A2KEY_EXPIRED||(this._onUserSigExpired(),this.getModule(21).reConnect())}},{key:"onMessage",value:function(e){var t=e.body,n=t.needAck,o=void 0===n?0:n,i=t.sessionData;1===o&&this._sendACK(i),this._messageDispatcher.onMessage(e)}},{key:"onReconnected",value:function(){this._reLoginOnReconnected()}},{key:"reLoginOnKickOther",value:function(){Oe.l("".concat(this._n,".reLoginOnKickOther")),this._reLogin()}},{key:"_reLoginOnReconnected",value:function(){Oe.l("".concat(this._n,"._reLoginOnReconnected")),this._reLogin()}},{key:"_reLogin",value:function(){var e=this;if(this.isLoggedIn()){var t=0,n=this.getModule(28);n.canIUseOfflinePush()&&(t=n.getUniAppPlatform()),this.request({protocolName:Mn,requestData:{isWebUniapp:t}}).then((function(t){var n=t.data.instanceID;e.getModule(12).setStatusInstanceID(n),Oe.l("".concat(e._n,"._reLogin ok.")),e.getModule(11).syncConversationList().then((function(){Oe.l("".concat(e._n,"._reLogin, sync conversation list ok.")),e.getModule(25).start()})),e.getModule(7).updateLocalMainSequenceOnReconnected();var o=e.getModule(10);o.resetGetTopicTime(),o.getTopicListOnReconnected()}))}}},{key:"onMultipleAccountKickedOut",value:function(e){this.getModule(1).onMultipleAccountKickedOut(e)}},{key:"onMultipleDeviceKickedOut",value:function(e){this.getModule(1).onMultipleDeviceKickedOut(e)}},{key:"_onUserSigExpired",value:function(){this.getModule(1).onUserSigExpired()}},{key:"onRestApiKickedOut",value:function(e){this.getModule(1).onRestApiKickedOut(e)}},{key:"_sendACK",value:function(e){this.request({protocolName:Xo,requestData:{sessionData:e}})}},{key:"_isFrequencyOverLimit",value:function(e){var t=e.split(".")[1];if(!this._commandFrequencyLimitMap.has(t))return!1;if(!this._commandRequestInfoMap.has(t))return this._commandRequestInfoMap.set(t,{startTime:Date.now(),requestCount:1}),!1;var n=this._commandFrequencyLimitMap.get(t),o=n.count,i=n.interval,r=this._commandRequestInfoMap.get(t),a=r.startTime,s=r.requestCount;if(Date.now()-a>1e3*i)return this._commandRequestInfoMap.set(t,{startTime:Date.now(),requestCount:1}),!1;s+=1,this._commandRequestInfoMap.set(t,{startTime:a,requestCount:s});var c=!1;return s>o&&(c=!0),c}},{key:"_isServerOverload",value:function(e){if(!this._serverOverloadInfoMap.has(e))return!1;var t=this._serverOverloadInfoMap.get(e),n=t.overloadTime,o=t.waitingTime,i=!1;return Date.now()-n<=1e3*o?i=!0:(this._serverOverloadInfoMap.delete(e),i=!1),i}},{key:"onPushedServerOverload",value:function(e){var t=e.overloadCommand,n=e.waitingTime;this._serverOverloadInfoMap.set(t,{overloadTime:Date.now(),waitingTime:n}),Oe.w("".concat(this._n,".onPushedServerOverload waitingTime:").concat(n,"s"))}},{key:"reset",value:function(){Oe.l("".concat(this._n,".reset")),this._updateCommandFrequencyLimitMap(Da),this._commandRequestInfoMap.clear(),this._serverOverloadInfoMap.clear()}}]),o}(yn),La=function(e){l(n,e);var t=y(n);function n(e){var o;return r(this,n),(o=t.call(this,e))._n="MessageLossDetectionModule",o._maybeLostSequencesMap=new Map,o._firstRoundRet=[],o}return c(n,[{key:"onMessageMaybeLost",value:function(e,t,n){this._maybeLostSequencesMap.has(e)||this._maybeLostSequencesMap.set(e,[]);for(var o=this._maybeLostSequencesMap.get(e),i=0;i<n;i++)-1===o.indexOf(t+i)&&o.push(t+i)}},{key:"detectFirstRound",value:function(e,t){var n=this._maybeLostSequencesMap.get(e);if(!Ut(n)&&!Ut(t)){var o=n.filter((function(e){return-1===t.indexOf(e)}));0===o.length?Oe.i("".concat(this._n,".detectFirstRound no message loss. conversationID:").concat(e)):this._firstRoundRet=this._firstRoundRet.concat(o),n.length=0}}},{key:"detectSecondRound",value:function(e,t){if(!Ut(this._firstRoundRet)&&!Ut(t)){var n=this._firstRoundRet.filter((function(e){return-1===t.indexOf(e)}));this._firstRoundRet.length=0;var o,i=n.length;0!==i&&(i<=5?o=e+"-"+n.join("-"):(n.sort((function(e,t){return e-t})),o=e+" start:"+n[0]+" end:"+n[i-1]+" count:"+i),new Ai("messageLoss").setMessage(o).setNetworkType(this.getNetworkType()).setLevel("warning").end(),Oe.i("".concat(this._n,".detectSecondRound message loss detected. conversationID:").concat(e," lostSequences:").concat(n)))}}},{key:"reset",value:function(){Oe.l("".concat(this._n,".reset")),this._maybeLostSequencesMap.clear(),this._firstRoundRet.length=0}}]),n}(yn),Oa=function(e){l(n,e);var t=y(n);function n(e){var o;return r(this,n),(o=t.call(this,e))._n="CloudControlModule",o._cloudConfig=new Map,o._expiredTime=0,o._version=0,o._isFetching=!1,o}return c(n,[{key:"getCloudConfig",value:function(e){return ze(e)?this._cloudConfig:this._cloudConfig.has(e)?this._cloudConfig.get(e):void 0}},{key:"_canFetchConfig",value:function(){return this.isLoggedIn()&&!this._isFetching&&Date.now()>=this._expiredTime}},{key:"fetchConfig",value:function(){var e=this,t=this._canFetchConfig();if(Oe.l("".concat(this._n,".fetchConfig canFetchConfig:").concat(t)),t){var n=new Ai("fetchCloudControlConfig"),o=this.getModule(12).getSDKAppID();this._isFetching=!0,this.request({protocolName:Zo,requestData:{SDKAppID:o,version:this._version}}).then((function(t){e._isFetching=!1,n.setMessage("version:".concat(e._version," newVersion:").concat(t.data.version," config:").concat(t.data.cloudControlConfig)).setNetworkType(e.getNetworkType()).end(),Oe.l("".concat(e._n,".fetchConfig ok")),e._parseCloudControlConfig(t.data)})).catch((function(t){e._isFetching=!1,e.probeNetwork().then((function(e){var o=M(e,2),i=o[0],r=o[1];n.setError(t,i,r).end()})),Oe.l("".concat(e._n,".fetchConfig failed. error:"),t),e._setExpiredTimeOnResponseError(12e4)}))}}},{key:"onPushedCloudControlConfig",value:function(e){Oe.l("".concat(this._n,".onPushedCloudControlConfig")),new Ai("pushedCloudControlConfig").setNetworkType(this.getNetworkType()).setMessage("newVersion:".concat(e.version," config:").concat(e.cloudControlConfig)).end(),this._parseCloudControlConfig(e)}},{key:"onCheckTimer",value:function(e){this._canFetchConfig()&&this.fetchConfig()}},{key:"_parseCloudControlConfig",value:function(e){var t=this,n="".concat(this._n,"._parseCloudControlConfig"),o=e.errorCode,i=e.errorMessage,r=e.cloudControlConfig,a=e.version,s=e.expiredTime;if(0===o){if(this._version!==a){var c=null;try{c=JSON.parse(r)}catch(f){this.isPrivateNetWork()||Oe.e("".concat(n," JSON parse error. cloudControlConfig:"),r)}c&&(this._cloudConfig.clear(),Object.keys(c).forEach((function(e){t._cloudConfig.set(e,c[e])})),this._version=a,this.emitInnerEvent(er))}this._expiredTime=Date.now()+1e3*s}else ze(o)?(Oe.l("".concat(n," failed. Invalid message format:"),e),this._setExpiredTimeOnResponseError(36e5)):(Oe.e("".concat(n," errorCode:").concat(o," errorMessage:").concat(i)),this._setExpiredTimeOnResponseError(12e4))}},{key:"_setExpiredTimeOnResponseError",value:function(e){this._expiredTime=Date.now()+e}},{key:"reset",value:function(){Oe.l("".concat(this._n,".reset")),this._cloudConfig.clear(),this._expiredTime=0,this._version=0,this._isFetching=!1}}]),n}(yn),Ra=function(e){l(n,e);var t=y(n);function n(e){var o;return r(this,n),(o=t.call(this,e))._n="RecoverMessageModule",o.PULL_LIMIT_COUNT=15,o}return c(n,[{key:"start",value:function(){this._recoverGroupChat(),this._recoverC2CChat()}},{key:"_recoverGroupChat",value:function(){var e,t,n=this,o=this._getLocalConversationList().filter((function(e){return e.type===A.CONV_GROUP&&e.groupProfile.type!==A.GRP_AVCHATROOM})),i=this.getModule(11),r=0,a=0,s=0;o.forEach((function(o){var c=o.conversationID,u=o.lastMessage;t=c.replace(A.CONV_GROUP,""),e=i.getLocalLastMessage(c),u&&0!==u.lastSequence&&e?(a=u.lastSequence,r=e.sequence,s=a-r,r>0&&s>=1&&s<300?n._recoverGroupMessage({groupID:t,localLastMessageSequence:r,remoteLastMessageSequence:a}):n._getGroupNotify(t)):n._getGroupNotify(t)}))}},{key:"_recoverC2CChat",value:function(){var e,t=this,n=this._getLocalConversationList().filter((function(e){return e.type===A.CONV_C2C})),o=this.getModule(11),i=0,r=0,a=0,s=[Promise.resolve()];n.forEach((function(n){var c=n.conversationID,u=n.lastMessage;e=o.getLocalLastMessage(c),u&&0!==u.lastTime&&e&&(r=u.lastTime,i=e.time,a=r-i,i>0&&a>=1&&a<=600&&s.push(t._recoverC2CMessage({conversationID:c,localLastMessageTime:i,remoteLastMessageTime:r})))})),Promise.all(s).then((function(){Oe.l("".concat(t._n,"._recoverC2CChat all promise fulfilled, start to sync unread messages")),t.getModule(19).startSyncOnReconnected()}))}},{key:"_getLocalConversationList",value:function(){return this.getModule(11).getLocalConversationList()}},{key:"_recoverGroupMessage",value:function(e){var t=this,n="".concat(this._n,"._recoverGroupMessage");Oe.l("".concat(n," options:"),e);var o=e.groupID,i=e.localLastMessageSequence,r=e.remoteLastMessageSequence;this._getGroupRomaingMessage({groupID:o,sequence:i}).then((function(e){var i=e.data,a=i.complete,s=i.messageList;if(!ze(s)){var c=s[0].sequence;Oe.l("".concat(n," pkgLastMessageSequence:").concat(c," complete:").concat(a)),c<r&&2!==a&&t._recoverGroupMessage({groupID:o,localLastMessageSequence:c,remoteLastMessageSequence:r}),new Ai("recoverMessage").setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(o," complete:").concat(a," messageList length:").concat(s.length)).end();var u=t.getModule(7);s.length>1&&s.sort((function(e,t){return e.sequence-t.sequence}));for(var l=0;l<s.length;l++){var d=s[l];d.from!==A.CONV_SYSTEM?u.onNewGroupMessage({dataList:[d],isInstantMessage:!1,updateUnreadCount:!1}):u.onNewGroupTips({event:d.event,dataList:[d]})}t._getGroupNotify(o)}}))}},{key:"_getGroupNotify",value:function(e){this.getModule(7).getGroupNotify(e)}},{key:"_getGroupRomaingMessage",value:function(e){var t=e.groupID,n=e.sequence;return this.request({protocolName:_o,requestData:{groupID:t,count:this.PULL_LIMIT_COUNT,sequence:n+this.PULL_LIMIT_COUNT-1}})}},{key:"_recoverC2CMessage",value:function(e){var t=this,n="".concat(this._n,"._recoverC2CMessage");Oe.l("".concat(this._n,"._recoverC2CMessage options:"),e);var o=e.conversationID,i=e.localLastMessageTime,r=e.remoteLastMessageTime;return this._getC2CRoamingMessage({conversationID:o,time:i}).then((function(e){var i=e.data,a=i.complete,s=i.messageList;if(!ze(s)){var c=s.length;new Ai("recoverMessage").setNetworkType(t.getNetworkType()).setMessage("".concat(o," complete:").concat(a," messageList length:").concat(c)).end(),t.getModule(6).onNewC2CMessage({dataList:s,isInstantMessage:!0});var u=s[c-1].time;if(Oe.l("".concat(n," pkgLastMessageTime:").concat(u," complete:").concat(a)),u<r&&1!==a)return t._recoverC2CMessage({conversationID:o,localLastMessageTime:u,remoteLastMessageTime:r})}}))}},{key:"_getC2CRoamingMessage",value:function(e){var t=e.conversationID,n=e.time;return this.request({protocolName:Pn,requestData:{peerAccount:t.replace(A.CONV_C2C,""),count:this.PULL_LIMIT_COUNT+1,lastMessageTime:n,direction:1}})}},{key:"reset",value:function(){Oe.l("".concat(this._n,".reset"))}}]),n}(yn),wa=function(){function e(){r(this,e),this._n="AvgE2EDelay",this._e2eDelayArray=[]}return c(e,[{key:"addMessageDelay",value:function(e){var t=ke()-e;t>=0&&this._e2eDelayArray.push(t)}},{key:"_calcAvg",value:function(e,t){if(0===t)return 0;var n=0;return e.forEach((function(e){n+=e})),Et(n/t,1)}},{key:"_calcCountWithLimit",value:function(e){var t=e.e2eDelayArray,n=e.min,o=e.max;return t.filter((function(e){return n<=e&&e<o})).length}},{key:"_calcPercent",value:function(e,t){var n=Et(e/t*100,2);return n>100&&(n=100),n}},{key:"_checkE2EDelayException",value:function(e,t){var n=e.filter((function(e){return e>t}));if(n.length>0){var o=n.length,i=Math.min.apply(Math,I(n)),r=Math.max.apply(Math,I(n)),a=this._calcAvg(n,o),s=Et(o/e.length*100,2);s>50&&new Ai("messageE2EDelayException").setMessage("count:".concat(o," min:").concat(i," max:").concat(r," avg:").concat(a," percent:").concat(s)).setLevel("warning").end()}}},{key:"getStatResult",value:function(){var e=this._e2eDelayArray.length;if(0===e)return null;var t=I(this._e2eDelayArray),n=this._calcCountWithLimit({e2eDelayArray:t,min:0,max:1}),o=this._calcCountWithLimit({e2eDelayArray:t,min:1,max:3}),i=this._calcPercent(n,e),r=this._calcPercent(o,e),a=this._calcAvg(t,e);return this._checkE2EDelayException(t,3),t.length=0,this.reset(),{totalCount:e,countLessThan1Second:n,percentOfCountLessThan1Second:i,countLessThan3Second:o,percentOfCountLessThan3Second:r,avgDelay:a}}},{key:"reset",value:function(){this._e2eDelayArray.length=0}}]),e}(),Na=function(){function e(){r(this,e),this._n="AvgRTT",this._requestCount=0,this._rttArray=[]}return c(e,[{key:"addRequestCount",value:function(){this._requestCount+=1}},{key:"addRTT",value:function(e){this._rttArray.push(e)}},{key:"_calcTotalCount",value:function(){return this._requestCount}},{key:"_calcRTTCount",value:function(e){return e.length}},{key:"_calcSuccessRateOfRequest",value:function(e,t){if(0===t)return 0;var n=Et(e/t*100,2);return n>100&&(n=100),n}},{key:"_calcAvg",value:function(e,t){if(0===t)return 0;var n=0;return e.forEach((function(e){n+=e})),parseInt(n/t)}},{key:"_calcMax",value:function(){return Math.max.apply(Math,I(this._rttArray))}},{key:"_calcMin",value:function(){return Math.min.apply(Math,I(this._rttArray))}},{key:"getStatResult",value:function(){var e=this._calcTotalCount(),t=I(this._rttArray);if(0===e)return null;var n=this._calcRTTCount(t),o=this._calcSuccessRateOfRequest(n,e),i=this._calcAvg(t,n);return Oe.l("".concat(this._n,".getStatResult max:").concat(this._calcMax()," min:").concat(this._calcMin()," avg:").concat(i)),this.reset(),{totalCount:e,rttCount:n,successRateOfRequest:o,avgRTT:i}}},{key:"reset",value:function(){this._requestCount=0,this._rttArray.length=0}}]),e}(),Pa=function(){function e(){r(this,e),this._map=new Map}return c(e,[{key:"initMap",value:function(e){var t=this;e.forEach((function(e){t._map.set(e,{totalCount:0,successCount:0,failedCountOfUserSide:0,costArray:[],fileSizeArray:[]})}))}},{key:"addTotalCount",value:function(e){return!(ze(e)||!this._map.has(e))&&(this._map.get(e).totalCount+=1,!0)}},{key:"addSuccessCount",value:function(e){return!(ze(e)||!this._map.has(e))&&(this._map.get(e).successCount+=1,!0)}},{key:"addFailedCountOfUserSide",value:function(e){return!(ze(e)||!this._map.has(e))&&(this._map.get(e).failedCountOfUserSide+=1,!0)}},{key:"addCost",value:function(e,t){return!(ze(e)||!this._map.has(e))&&(this._map.get(e).costArray.push(t),!0)}},{key:"addFileSize",value:function(e,t){return!(ze(e)||!this._map.has(e))&&(this._map.get(e).fileSizeArray.push(t),!0)}},{key:"_calcSuccessRateOfBusiness",value:function(e){if(ze(e)||!this._map.has(e))return-1;var t=this._map.get(e),n=Et(t.successCount/t.totalCount*100,2);return n>100&&(n=100),n}},{key:"_calcSuccessRateOfPlatform",value:function(e){if(ze(e)||!this._map.has(e))return-1;var t=this._map.get(e),n=this._calcSuccessCountOfPlatform(e)/t.totalCount*100;return(n=Et(n,2))>100&&(n=100),n}},{key:"_calcTotalCount",value:function(e){return ze(e)||!this._map.has(e)?-1:this._map.get(e).totalCount}},{key:"_calcSuccessCountOfBusiness",value:function(e){return ze(e)||!this._map.has(e)?-1:this._map.get(e).successCount}},{key:"_calcSuccessCountOfPlatform",value:function(e){if(ze(e)||!this._map.has(e))return-1;var t=this._map.get(e);return t.successCount+t.failedCountOfUserSide}},{key:"_calcAvg",value:function(e){return ze(e)||!this._map.has(e)?-1:e===Ii?this._calcAvgSpeed(e):this._calcAvgCost(e)}},{key:"_calcAvgCost",value:function(e){var t=this._map.get(e).costArray.length;if(0===t)return 0;var n=0;return this._map.get(e).costArray.forEach((function(e){n+=e})),parseInt(n/t)}},{key:"_calcAvgSpeed",value:function(e){var t=0,n=0;return this._map.get(e).costArray.forEach((function(e){t+=e})),this._map.get(e).fileSizeArray.forEach((function(e){n+=e})),parseInt(1e3*n/t)}},{key:"getStatResult",value:function(e){var t=this._calcTotalCount(e);if(0===t)return null;var n=this._calcSuccessCountOfBusiness(e),o=this._calcSuccessRateOfBusiness(e),i=this._calcSuccessCountOfPlatform(e),r=this._calcSuccessRateOfPlatform(e),a=this._calcAvg(e);return this.reset(e),{totalCount:t,successCountOfBusiness:n,successRateOfBusiness:o,successCountOfPlatform:i,successRateOfPlatform:r,avgValue:a}}},{key:"reset",value:function(e){ze(e)?this._map.clear():this._map.set(e,{totalCount:0,successCount:0,failedCountOfUserSide:0,costArray:[],fileSizeArray:[]})}}]),e}(),Ga=function(){function e(){r(this,e),this._lastMap=new Map,this._currentMap=new Map}return c(e,[{key:"initMap",value:function(e){var t=this;e.forEach((function(e){t._lastMap.set(e,new Map),t._currentMap.set(e,new Map)}))}},{key:"addMessageSequence",value:function(e){var t=e.key,n=e.message;if(ze(t)||!this._lastMap.has(t)||!this._currentMap.has(t))return!1;var o=n.conversationID,i=n.sequence,r=o.replace(A.CONV_GROUP,"");if(0===this._lastMap.get(t).size)this._addCurrentMap(e);else if(this._lastMap.get(t).has(r)){var a=this._lastMap.get(t).get(r),s=a.length-1;i>a[0]&&i<a[s]?(a.push(i),a.sort(),this._lastMap.get(t).set(r,a)):this._addCurrentMap(e)}else this._addCurrentMap(e);return!0}},{key:"_addCurrentMap",value:function(e){var t=e.key,n=e.message,o=n.conversationID,i=n.sequence,r=o.replace(A.CONV_GROUP,"");this._currentMap.get(t).has(r)||this._currentMap.get(t).set(r,[]),this._currentMap.get(t).get(r).push(i)}},{key:"_copyData",value:function(e){if(!ze(e)){this._lastMap.set(e,new Map);var t,n=this._lastMap.get(e),o=k(this._currentMap.get(e));try{for(o.s();!(t=o.n()).done;){var i=M(t.value,2),r=i[0],a=i[1];n.set(r,a)}}catch(l){o.e(l)}finally{o.f()}n=null,this._currentMap.set(e,new Map)}}},{key:"getStatResult",value:function(e){if(ze(this._currentMap.get(e))||ze(this._lastMap.get(e)))return null;if(0===this._lastMap.get(e).size)return this._copyData(e),null;var t=0,n=0;if(this._lastMap.get(e).forEach((function(e,o){var i=I(e.values()),r=i.length,a=i[r-1]-i[0]+1;t+=a,n+=r})),0===t)return null;var o=Et(n/t*100,2);return o>100&&(o=100),this._copyData(e),{totalCount:t,successCountOfMessageReceived:n,successRateOfMessageReceived:o}}},{key:"reset",value:function(){this._currentMap.clear(),this._lastMap.clear()}}]),e}(),Ua=function(e){l(o,e);var n=y(o);function o(e){var t;r(this,o),(t=n.call(this,e))._n="QualityStatModule",t.TAG="im-ssolog-quality-stat",t.reportIndex=0,t.wholePeriod=!1,t._qualityItems=[gi,_i,vi,mi,yi,Mi,Ii,Ci,bi,Ti],t._messageSentItems=[vi,mi,yi,Mi,Ii],t._messageReceivedItems=[Ci,bi,Ti],t.REPORT_INTERVAL=120,t.REPORT_SDKAPPID_BLACKLIST=[],t.REPORT_TINYID_WHITELIST=[],t._statInfoArr=[],t._avgRTT=new Na,t._avgE2EDelay=new wa,t._rateMessageSent=new Pa,t._rateMessageReceived=new Ga;var i=t.getInnerEmitterInstance();return i.on(Zi,t._onLoginSuccess,v(t)),i.on(er,t._onCloudConfigUpdated,v(t)),t}return c(o,[{key:"_onLoginSuccess",value:function(){var e=this;this._rateMessageSent.initMap(this._messageSentItems),this._rateMessageReceived.initMap(this._messageReceivedItems);var t=this.getModule(13),n=t.getItem(this.TAG,!1);!Ut(n)&&Xe(n.forEach)&&(Oe.l("".concat(this._n,"._onLoginSuccess get quality stat logs from local storage, count:").concat(n.length)),n.forEach((function(t){e._statInfoArr.push(t)})),t.removeItem(this.TAG,!1))}},{key:"_onCloudConfigUpdated",value:function(){var e=this.getCloudConfig("q_rpt_interval"),t=this.getCloudConfig("q_rpt_sdkappid_bl"),n=this.getCloudConfig("q_rpt_tinyid_wl");ze(e)||(this.REPORT_INTERVAL=Number(e)),ze(t)||(this.REPORT_SDKAPPID_BLACKLIST=t.split(",").map((function(e){return Number(e)}))),ze(n)||(this.REPORT_TINYID_WHITELIST=n.split(","))}},{key:"onCheckTimer",value:function(e){this.isLoggedIn()&&e%this.REPORT_INTERVAL==0&&(this.wholePeriod=!0,this._report())}},{key:"addRequestCount",value:function(){this._avgRTT.addRequestCount()}},{key:"addRTT",value:function(e){this._avgRTT.addRTT(e)}},{key:"addMessageDelay",value:function(e){this._avgE2EDelay.addMessageDelay(e)}},{key:"addTotalCount",value:function(e){this._rateMessageSent.addTotalCount(e)||Oe.w("".concat(this._n,".addTotalCount invalid key:"),e)}},{key:"addSuccessCount",value:function(e){this._rateMessageSent.addSuccessCount(e)||Oe.w("".concat(this._n,".addSuccessCount invalid key:"),e)}},{key:"addFailedCountOfUserSide",value:function(e){this._rateMessageSent.addFailedCountOfUserSide(e)||Oe.w("".concat(this._n,".addFailedCountOfUserSide invalid key:"),e)}},{key:"addCost",value:function(e,t){this._rateMessageSent.addCost(e,t)||Oe.w("".concat(this._n,".addCost invalid key or cost:"),e,t)}},{key:"addFileSize",value:function(e,t){this._rateMessageSent.addFileSize(e,t)||Oe.w("".concat(this._n,".addFileSize invalid key or size:"),e,t)}},{key:"addMessageSequence",value:function(e){this._rateMessageReceived.addMessageSequence(e)||Oe.w("".concat(this._n,".addMessageSequence invalid key:"),e.key)}},{key:"_getQualityItem",value:function(e){var n={},o=ki[this.getNetworkType()];ze(o)&&(o=8);var i={qualityType:Si[e],timestamp:Se(),networkType:o,extension:""};switch(e){case gi:n=this._avgRTT.getStatResult();break;case _i:n=this._avgE2EDelay.getStatResult();break;case vi:case mi:case yi:case Mi:case Ii:n=this._rateMessageSent.getStatResult(e);break;case Ci:case bi:case Ti:n=this._rateMessageReceived.getStatResult(e)}return null===n?null:t(t({},i),n)}},{key:"_report",value:function(e){var t=this,n=[],o=null;ze(e)?this._qualityItems.forEach((function(e){null!==(o=t._getQualityItem(e))&&(o.reportIndex=t.reportIndex,o.wholePeriod=t.wholePeriod,n.push(o))})):null!==(o=this._getQualityItem(e))&&(o.reportIndex=this.reportIndex,o.wholePeriod=this.wholePeriod,n.push(o)),Oe.d("".concat(this._n,"._report"),n),this._statInfoArr.length>0&&(n=n.concat(this._statInfoArr),this._statInfoArr=[]);var i=this.getModule(12),r=i.getSDKAppID(),a=i.getTinyID();kt(this.REPORT_SDKAPPID_BLACKLIST,r)&&!Dt(this.REPORT_TINYID_WHITELIST,a)&&(n=[]),n.length>0&&this._doReport(n)}},{key:"_doReport",value:function(e){var n=this,o={header:Vr(this),quality:e};this.request({protocolName:zo,requestData:t({},o)}).then((function(){n.reportIndex++,n.wholePeriod=!1})).catch((function(t){Oe.w("".concat(n._n,"._doReport, online:").concat(n.getNetworkType()," error:"),t),n._statInfoArr=n._statInfoArr.concat(e),n._flushAtOnce()}))}},{key:"_flushAtOnce",value:function(){var e=this.getModule(13),t=e.getItem(this.TAG,!1),n=this._statInfoArr,o="".concat(this._n,"._flushAtOnce");if(Ut(t))Oe.l("".concat(o," count:").concat(n.length)),e.setItem(this.TAG,n,!0,!1);else{var i=n.concat(t);i.length>10&&(i=i.slice(0,10)),Oe.l("".concat(o," count:").concat(i.length)),e.setItem(this.TAG,i,!0,!1)}this._statInfoArr=[]}},{key:"reset",value:function(){Oe.l("".concat(this._n,".reset")),this._report(),this.reportIndex=0,this.wholePeriod=!1,this.REPORT_SDKAPPID_BLACKLIST=[],this.REPORT_TINYID_WHITELIST=[],this._avgRTT.reset(),this._avgE2EDelay.reset(),this._rateMessageSent.reset(),this._rateMessageReceived.reset()}}]),o}(yn),xa=function(e){l(n,e);var t=y(n);function n(e){var o;return r(this,n),(o=t.call(this,e))._n="WorkerTimerModule",o._isWorkerEnabled=!0,o._workerTimer=null,o._timerID=-1,o._init(),o.getInnerEmitterInstance().on(er,o._onCloudConfigUpdated,v(o)),o}return c(n,[{key:"isWorkerEnabled",value:function(){return this._isWorkerEnabled&&ve}},{key:"startWorkerTimer",value:function(){Oe.l("".concat(this._n,".startWorkerTimer")),this._workerTimer&&this._workerTimer.postMessage("start")}},{key:"stopWorkerTimer",value:function(){Oe.l("".concat(this._n,".stopWorkerTimer")),this._workerTimer&&this._workerTimer.postMessage("stop")}},{key:"_init",value:function(){if(ve){var e=URL.createObjectURL(new Blob(['let interval = -1;onmessage = function(event) {  if (event.data === "start") {    if (interval > 0) {      clearInterval(interval);    }    interval = setInterval(() => {      postMessage("");    }, 1000);    postMessage(interval);  } else if (event.data === "stop") {    clearInterval(interval);    interval = -1;  }};'],{type:"application/javascript; charset=utf-8"}));this._workerTimer=new Worker(e);var t=this;this._workerTimer.onmessage=function(e){e.data?(t._timerID=e.data,Oe.l("".concat(t._n,"._init seed:").concat(t._timerID))):t._m.onCheckTimer()}}}},{key:"_onCloudConfigUpdated",value:function(){var e=this.getCloudConfig("enable_worker");Oe.l("".concat(this._n,"._onCloudConfigUpdated enableWorker:").concat(e)),ze(e)||"1"===e?!this._isWorkerEnabled&&ve&&(this._isWorkerEnabled=!0,this.startWorkerTimer(),this._m.onWorkerTimerEnabled()):this._isWorkerEnabled&&ve&&(this._isWorkerEnabled=!1,this.stopWorkerTimer(),this._m.onWorkerTimerDisabled())}},{key:"terminate",value:function(){Oe.l("".concat(this._n,".terminate")),this._workerTimer&&(this._workerTimer.terminate(),this._workerTimer=null,this._timerID=-1)}},{key:"getTimerID",value:function(){return this._timerID}},{key:"reset",value:function(){Oe.l("".concat(this._n,".reset"))}}]),n}(yn),Fa=function(){function e(){r(this,e),this._n="PurchasedFeatureHandler",this._purchasedFeatureMap=new Map}return c(e,[{key:"isValidPurchaseBits",value:function(e){return e&&"string"==typeof e&&e.length>=1&&e.length<=64&&/[01]{1,64}/.test(e)}},{key:"parsePurchaseBits",value:function(e){if(this.isValidPurchaseBits(e)){this._purchasedFeatureMap.clear();for(var t=null,n=e.length-1,o=0;n>=0;n--,o++)t=o<32?new O(0,Math.pow(2,o)).toString():new O(Math.pow(2,o-32),0).toString(),"1"===e[n]?this._purchasedFeatureMap.set(t,!0):this._purchasedFeatureMap.set(t,!1)}else Oe.w("".concat(this._n,".parsePurchaseBits invalid purchasebits:").concat(e))}},{key:"hasPurchasedFeature",value:function(e){return!!this._purchasedFeatureMap.get(e)}},{key:"isFeatureEnabled",value:function(e){for(var t=parseInt(e).toString(2),n=void 0,o=!0,i=t.length-1,r=0;i>=0;i--,r++)if("1"===t.charAt(i)&&(n=r<32?new O(0,Math.pow(2,r)).toString():new O(Math.pow(2,r-32),0).toString(),!this._purchasedFeatureMap.get(n))){o=!1;break}return Oe.l("".concat(this._n,".isFeatureEnabled decimalNumber:").concat(e," binaryString:").concat(t," ret:").concat(o)),$i({enabled:o})}},{key:"clear",value:function(){this._purchasedFeatureMap.clear()}}]),e}(),qa=function(){function e(t){r(this,e),this._m=t,this._n="CommercialConfigModule",this._expiredTime=0,this._isFetching=!1,this._purchasedFeatureHandler=new Fa}return c(e,[{key:"_canFetch",value:function(){return this._getModule(12).isLoggedIn()?!this._isFetching&&Date.now()>=this._expiredTime:(this._expiredTime=Date.now()+2e3,!1)}},{key:"onCheckTimer",value:function(e){this._canFetch()&&this.fetchConfig()}},{key:"fetchConfig",value:function(){var e=this,t=this._canFetch(),n="".concat(this._n,".fetchConfig");if(Oe.l("".concat(n," canFetch:").concat(t)),t){var o=this._getModule(15),i=new Ai("fetchCommercialConfig");i.setNetworkType(o.getNetworkType());var r=this._getModule(12).getSDKAppID(),a=this._getModule(20);this._isFetching=!0,a.request({protocolName:ei,requestData:{SDKAppID:r}}).then((function(t){i.setMessage("purchaseBits:".concat(t.data.purchaseBits)).end(),Oe.l("".concat(n," ok.")),e._parseConfig(t.data),e._isFetching=!1})).catch((function(t){o.probe().then((function(e){var n=M(e,2),o=n[0],r=n[1];i.setError(t,o,r).end()})),e._isFetching=!1}))}}},{key:"onPushedConfig",value:function(e){var t="".concat(this._n,".onPushedConfig data:").concat(JSON.stringify(e));Oe.l("".concat(t)),new Ai("pushedCommercialConfig").setNetworkType(this._getModule(15).getNetworkType()).setMessage("purchaseBits:".concat(e.purchaseBits)).end(),this._parseConfig(e)}},{key:"_parseConfig",value:function(e){var t="".concat(this._n,"._parseConfig"),n=e.errorCode,o=e.errorMessage,i=e.purchaseBits,r=e.expiredTime;0===n?(this._purchasedFeatureHandler.parsePurchaseBits(i),this._expiredTime=Date.now()+1e3*r):ze(n)?(Oe.l("".concat(t," failed. Invalid message format:"),e),this._setExpiredTimeOnResponseError(36e5)):(Oe.e("".concat(t," errorCode:").concat(n," errorMessage:").concat(o)),this._setExpiredTimeOnResponseError(12e4))}},{key:"_setExpiredTimeOnResponseError",value:function(e){this._expiredTime=Date.now()+e}},{key:"canIUse",value:function(e){return this._purchasedFeatureHandler.hasPurchasedFeature(e)}},{key:"isFeatureEnabled",value:function(e){return this._purchasedFeatureHandler.isFeatureEnabled(e)}},{key:"_getModule",value:function(e){return this._m.getModule(e)}},{key:"reset",value:function(){Oe.l("".concat(this._n,".reset")),this._expiredTime=0,this._isFetching=!1,this._purchasedFeatureHandler.clear()}}]),e}(),Ba=function(e){l(n,e);var t=y(n);function n(e){var o;return r(this,n),(o=t.call(this,e))._m=e,o._n="OfflinePushModule",o._offlinePushPlugin=void 0,o._androidPushConfig={huaweiPushBussinessId:"",xiaomiPushBussinessId:"",xiaomiPushAppId:"",xiaomiPushAppKey:"",meizuPushBussinessId:"",meizuPushAppId:"",meizuPushAppKey:"",vivoPushBussinessId:"",fcmPushBussinessId:"",oppoPushBussinessId:"",oppoPushAppKey:"",oppoPushAppSecret:"",honorPushBussinessId:""},o._deviceToken="",o._businessID=0,o._iosBusinessID=0,o._c2cUnreadCount=0,o._groupUnreadCount=0,o._isWebUniapp=0,o}return c(n,[{key:"registerPlugin",value:function(e){if(Y){this._offlinePushPlugin=e["tim-offline-push-plugin"];var t=e.offlinePushConfig||{},n=t.huaweiBusinessID,o=t.xiaomiBusinessID,i=t.xiaomiAppID,r=t.xiaomiAppKey,a=t.meizuBusinessID,s=t.meizuAppID,c=t.meizuAppKey,u=t.vivoBusinessID,l=t.oppoBusinessID,d=t.oppoAppKey,f=t.oppoAppSecret,p=t.honorBusinessID,h=t.iosBusinessID;this._androidPushConfig.huaweiPushBussinessId=n,this._androidPushConfig.xiaomiPushBussinessId=o,this._androidPushConfig.xiaomiPushAppId=i,this._androidPushConfig.xiaomiPushAppKey=r,this._androidPushConfig.meizuPushBussinessId=a,this._androidPushConfig.meizuPushAppId=s,this._androidPushConfig.meizuPushAppKey=c,this._androidPushConfig.vivoPushBussinessId=u,this._androidPushConfig.oppoPushBussinessId=l,this._androidPushConfig.oppoPushAppKey=d,this._androidPushConfig.oppoPushAppSecret=f,this._androidPushConfig.honorPushBussinessId=p,new Ai("registerPlugin").setMessage("tim-offline-push-plugin").setMoreMessage("isExist:".concat(!ze(this._offlinePushPlugin))).end(!0),Oe.l("".concat(this._n,".").concat("registerPlugin"," ok. offlinePushConfig:").concat(JSON.stringify(e.offlinePushConfig))),this._iosBusinessID=h,this._setAppShowListener()}else this.outputWarning("OfflinePushInUniapp")}},{key:"init",value:function(){this._isWebUniapp=this.getUniAppPlatform(),this._getDeviceToken()}},{key:"_getDeviceToken",value:function(){var e=this,t="".concat(this._n,".").concat("_getDeviceToken");if(Xe(this._offlinePushPlugin.getDeviceToken)){var n="androidPushConfig:".concat(JSON.stringify(this._androidPushConfig),", iosBusinessID:").concat(this._iosBusinessID);Oe.l("".concat(t," start. ").concat(n)),new Ai("_getDeviceToken").setMessage("".concat(n)).end(!0),this._offlinePushPlugin.getDeviceToken(this._androidPushConfig,(function(o){var i=new Ai("getDeviceTokenRes"),r=o.code,a=o.msg;if(0===r){var s=o.data,c=s.deviceToken,u=s.deviceBrand,l=s.deviceType,d=s.bussinessId;e._deviceToken=c,e._businessID=d||e._iosBusinessID,n="deviceToken:".concat(c,", deviceBrand:").concat(u||l,", businessID:").concat(e._businessID),Oe.l("".concat(t," ok. ").concat(n)),i.setMessage(n).end(!0),e._setToken()}else i.setMessage("code:".concat(r,", msg:").concat(a)).end(!0),Oe.e("".concat(t," failed. error:"),o)}))}else Oe.e("".concat(t," getDeviceToken is not a function"))}},{key:"canIUseOfflinePush",value:function(){return Y&&!ze(this._offlinePushPlugin)}},{key:"_setAppShowListener",value:function(){var e=this,t="".concat(this._n,".").concat("_setAppShowListener");ze(this._offlinePushPlugin)?Oe.e("".concat(t," offlinePushPlugin is undefined")):Xe(this._offlinePushPlugin.setAppShowListener)?(new Ai("_setAppShowListener").end(!0),Oe.l("".concat(t," start")),this._offlinePushPlugin.setAppShowListener((function(n){var o=(n||{}).appShow;new Ai("setAppShowListenerRes").setMessage("appShow:".concat(o)).end(!0),Oe.l("".concat(t," ok. appShow:").concat(o)),e._m.isReady()&&(0===o?(e._getConvUnreadCount(),e._onBackground()):1===o&&e._onForeground())}))):Oe.e("".concat(t," setAppShowListener is not a function"))}},{key:"getDeviceBrand",value:function(){if(!ze(this._offlinePushPlugin)&&Xe(this._offlinePushPlugin.getDeviceType)){var e=(this._offlinePushPlugin.getDeviceType()||{}).deviceType;return Oe.l("".concat(this._n,".getDeviceBrand ok. deviceType:").concat(e)),e}}},{key:"_setToken",value:function(){var e,t=this,n="".concat(this._n,"._setToken"),o=this.getModule(12),i=1,r="",a="";Ut(this._deviceToken)&&(i=0);var s=this.getUniAppPlatform(),c=this.getDeviceBrand();s===w.IOS||s===w.IPAD||s===w.MAC?a=this._deviceToken:s===w.ANDROID&&(r=this._deviceToken);var u=new Ai("offlinePushSetToken");return e="deviceToken:".concat(a||r,", businessID:").concat(this._businessID,", ")+"deviceBrand:".concat(c,", isWebUniapp:").concat(this._isWebUniapp,", pushMsg:").concat(i,", platform:").concat(s),u.setMessage("".concat(e)),Oe.l("".concat(n," ").concat(e)),this.request({protocolName:di,requestData:{tokenID:r,pushMsg:i,sdkAppID:o.getSDKAppID(),businessID:parseInt(this._businessID),deviceBrand:c,deviceToken:a,isWebUniapp:this._isWebUniapp}}).then((function(e){return u.end(),Oe.l("".concat(n," ok")),e})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];u.setError(e,o,i).end()})),Oe.e("".concat(n," failed. error:"),e),Xi(e)}))}},{key:"_getConvUnreadCount",value:function(){var e=this;this._c2cUnreadCount=0,this._groupUnreadCount=0,this.getModule(11).getLocalConversationList().forEach((function(t){t.type===A.CONV_C2C&&(e._c2cUnreadCount+=t.unreadCount),t.type===A.CONV_GROUP&&(e._groupUnreadCount+=t.unreadCount)}))}},{key:"_onBackground",value:function(){var e=this,t="".concat(this._n,".").concat("_onBackground"),n=new Ai("_onBackground");this.request({protocolName:ui,requestData:{c2cUnreadCount:this._c2cUnreadCount,groupUnreadCount:this._groupUnreadCount,isWebUniapp:this._isWebUniapp}}).then((function(o){return n.setMessage("c2cUnreadCount: ".concat(e._c2cUnreadCount,", groupUnreadCount: ").concat(e._groupUnreadCount)).end(),Oe.l("".concat(t," ok")),o})).catch((function(o){e.probeNetwork().then((function(e){var t=M(e,2),i=t[0],r=t[1];n.setError(o,i,r).end()})),Oe.e("".concat(t," failed. error:"),o)}))}},{key:"_onForeground",value:function(){var e=this,t="".concat(this._n,".").concat("_onForeground"),n=new Ai("_onForeground");this.request({protocolName:li,requestData:{isWebUniapp:this._isWebUniapp}}).then((function(e){return n.end(),Oe.l("".concat(t," ok")),e})).catch((function(o){e.probeNetwork().then((function(e){var t=M(e,2),i=t[0],r=t[1];n.setError(o,i,r).end()})),Oe.e("".concat(t," failed. error:"),o)}))}},{key:"getUniAppPlatform",value:function(){var e=uni.getSystemInfoSync().platform,t=this.getDeviceBrand();return"ios"===e?w.IOS:"android"===e?w.ANDROID:1002===t?w.IPAD:1001===t?w.MAC:void 0}},{key:"reset",value:function(){this._deviceToken="",this._businessID=0,this._c2cUnreadCount=0,this._groupUnreadCount=0,this._isWebUniapp=0,Oe.l("".concat(this._n,".reset"))}}]),n}(yn),Va=function(e){l(n,e);var t=y(n);function n(e){var o;return r(this,n),(o=t.call(this,e))._n="ProfanityFilterModule",o._plugin=null,o._filterConfigMap=new Map,o._startIndex=0,o._version=0,o._canIUseLexicon=!1,o._isFetching=!1,o._expiredTime=0,o}return c(n,[{key:"init",value:function(){var e=this.getModule(18).getPlugin("tim-profanity-filter-plugin");e?(this._plugin=new e({logger:Oe,isArray:Ye,isMap:Be,isDevMode:this.isDevMode()}),this._getLexicon()):this.outputWarning("ProfanityPluginNotFound")}},{key:"onCheckTimer",value:function(){this._plugin&&this._canIUseLexicon&&this.isLoggedIn()&&!this._isFetching&&Date.now()>=this._expiredTime&&this._getLexicon()}},{key:"filterMessage",value:function(e,t){var n=!0;if(!this._plugin||!this._canIUseLexicon)return n;if(t&&t.messageControlInfo&&!0===t.messageControlInfo.excludedFromContentModeration)return n;var o=e.type,i=e.conversationType;if(o!==A.MSG_TEXT&&o!==A.MSG_CUSTOM)return n;var r,a="".concat(this._n,".filterMessage");if(Oe.l("".concat(a)),o===A.MSG_TEXT){if(i===A.CONV_C2C?r="c2c_text_message":i===A.CONV_GROUP&&(r="group_text_message"),!this._isConfigOn(r))return n;var s=this._plugin.filter(e.payload.text),c=s.type,u=s.modifiedText;1===c?n=!1:2===c&&(e.payload.text=u)}else if(o===A.MSG_CUSTOM){if(i===A.CONV_C2C?r="c2c_custom_message":i===A.CONV_GROUP&&(r="group_custom_message"),!this._isConfigOn(r))return n;var l=this._plugin.filter(e.payload.data),d=this._plugin.filter(e.payload.description),f=this._plugin.filter(e.payload.extension);1===l.type||1===d.type||1===f.type?n=!1:(2===l.type&&(e.payload.data=l.modifiedText),2===d.type&&(e.payload.description=d.modifiedText),2===f.type&&(e.payload.extension=f.modifiedText))}return Oe.l("".concat(a," done. isAllowedToSend:").concat(n)),n}},{key:"filterText",value:function(e,t){var n="".concat(this._n,".filterText"),o={isAllowedToSend:!0,modifiedText:e};if(!this._plugin||!this._canIUseLexicon)return o;if(!this._isConfigOn(t))return o;Oe.l("".concat(n));var i=this._plugin.filter(e),r=i.type,a=i.modifiedText;return 1===r?o.isAllowedToSend=!1:2===r&&(o.modifiedText=a),Oe.l("".concat(n," done. ret:"),o),o}},{key:"_getLexicon",value:function(){var e=this,t=new Ai("profanityFilter"),n="".concat(this._n,"._getLexicon");this._isFetching=!0,this.request({protocolName:fi,requestData:{startIndex:this._startIndex,version:this._version}}).then((function(o){var i=o.data,r=i.errorInfo,a=i.filterConfig,s=i.lexicon,c=i.strToken,u=i.completeFlag,l=i.nextStartIndex,d=i.version,f=i.expiredTime,p=r.errorCode,h=r.errorMessage;return 0!==p?(e._isFetching=!1,Oe.w("".concat(n," failed. error:"),r),void t.setCode(p).setMessage(h).end()):(e._onFilterConfig(a),e._getToken(c),1===u?(Oe.l("".concat(n," done. version:").concat(d," expiredTime:").concat(f)),e._version=d,e._canIUseLexicon=!0,e._isFetching=!1,e._expiredTime=Date.now()+1e3*f,void e._plugin.onLexiconCompleted(s)):(e._startIndex=l,e._plugin.onLexiconSliced(s),void e._getLexicon()))})).catch((function(o){e.probeNetwork().then((function(e){var n=M(e,2),i=n[0],r=n[1];t.setError(o,i,r).end()})),e._isFetching=!1,Oe.l("".concat(n," failed. error:"),o)}))}},{key:"_onFilterConfig",value:function(e){var t=this;Ut(e)||(this._filterConfigMap.clear(),Object.keys(e).forEach((function(n){t._filterConfigMap.set(n,e[n])})),Oe.l("".concat(this._n,"._onFilterConfig. keys:").concat(Array.from(this._filterConfigMap.keys())," values:").concat(Array.from(this._filterConfigMap.values()))))}},{key:"_isConfigOn",value:function(e){return 1===this._filterConfigMap.get(e)}},{key:"_getToken",value:function(e){if(je(e)){var t=e.length,n="";if(t%2==0)for(var o=0;o<=t-1;o+=2)n+=e[o+1],n+=e[o];else{for(var i=0;i<t-1;i+=2)n+=e[i+1],n+=e[i];n+=e[t-1]}this._plugin.onToken(n)}}},{key:"reset",value:function(){Oe.l("".concat(this._n,".reset")),this._plugin&&(this._plugin.reset(),this._plugin=null),this._filterConfigMap.clear(),this._startIndex=0,this._version=0,this._canIUseLexicon=!1,this._isFetching=!1,this._expiredTime=0}}]),n}(yn),Ha=function(){function e(t){r(this,e),this._m=t,this._n="TransCmdModule",this._TRTCCommandList=["tui_room_svr.*"],this._m.getInnerEmitterInstance().on(er,this._onCloudConfigUpdated,this)}return c(e,[{key:"_onCloudConfigUpdated",value:function(){var e=this,t=this._m.getModule(23).getCloudConfig("rtc_cmd");ze(t)||(t=JSON.parse(t)).forEach((function(t){e._TRTCCommandList.includes(t)||e._TRTCCommandList.push(t)}))}},{key:"sendTRTCCustomData",value:function(e){var t=e.serviceCommand,n=e.data,o="".concat(U.NAME.TUIROOM_SVR,".*");return ze(t)||(o=t),this._TRTCCommandList.includes(o)?this._trans({servcmd:o,data:n}):Xi({code:hi.INVALID_TRTC_CMD})}},{key:"_trans",value:function(e){Oe.d("".concat(this._n,"._trans. options:").concat(JSON.stringify(e)));var t=e.servcmd,n=e.data;return this._m.getModule(20).trans({servcmd:t,data:je(n)?JSON.parse(n):n})}},{key:"getCommandList",value:function(){return this._TRTCCommandList}},{key:"reset",value:function(){Oe.l("".concat(this._n,".reset"))}}]),e}(),ja=function(){function e(t){r(this,e),this._m=t,this._n="ErrorMessageModule",this.TIM_ERROR_ASSISTANCE="tim_error_assistance",this.STORAGE_EXPIRES_TIME=6048e5,this._map=new Map,this._init()}return c(e,[{key:"_init",value:function(){var e=this._getStorageModule().getItem(this.TIM_ERROR_ASSISTANCE,!1);if(e){var t;try{t=JSON.parse(e)}catch(n){this._getStorageModule().removeItem(this.TIM_ERROR_ASSISTANCE,!1),Oe.w("".concat(this._n,"._init error:"),n)}t&&(this._needToUpdate(t)?this._fetch():this._fillMap(t.message))}else this._fetch()}},{key:"_needToUpdate",value:function(e){var t=e.localSavedTime,n=e.localSavedVersion,o=t&&(new Date).getTime()-t>=this.STORAGE_EXPIRES_TIME,i=!n||"2.27.6"!==n;return Oe.l("".concat(this._n,"._needToUpdate isTimeout:").concat(o," isDifferentVersion:").concat(i)),o||i}},{key:"_fetch",value:function(){if(!this._m.getModule(12).isPrivateNetWork()){var e="https://web.sdk.qcloud.com/im/download/error-message/0.0.1/tim-error-message.txt",t="application/x-www-form-urlencoded;charset=UTF-8",n="".concat(this._n,"._fetch ok in"),o=this;if($)J.request({url:e,method:"GET",timeout:3e3,header:{"content-type":t},dataType:"text",success:function(e){o._fillAndSave(e.data),Oe.l("".concat(n," mini program"))},fail:function(){}});else{var i=new XMLHttpRequest,r=setTimeout((function(){i.abort()}),3e3);i.onreadystatechange=function(){4===i.readyState&&(clearTimeout(r),200!==i.status&&304!==i.status||(Oe.l("".concat(n," browser")),o._fillAndSave(i.responseText)))},i.open("GET",e,!0),i.setRequestHeader("Content-type",t),i.send()}}}},{key:"_fillAndSave",value:function(e){this._fillMap(e),this._getStorageModule().setItem(this.TIM_ERROR_ASSISTANCE,JSON.stringify({message:e,localSavedTime:(new Date).getTime(),localSavedVersion:"2.27.6"}),!0,!1)}},{key:"_getStorageModule",value:function(){return this._m.getModule(13)}},{key:"_fillMap",value:function(e){this._map.clear();for(var t,n,o,i=e.split(";\n"),r=i.length,a=new RegExp(/'/g),s=0;s<r;s++)if(t=i[s].indexOf(":"),n=i[s].slice(0,t),o=i[s].slice(t+1,i[s].length),!n.startsWith("//")){if(ze(o))continue;this._map.set(n,o.replace(a,""))}}},{key:"get",value:function(e){var t=e.isIntl,n=e.key,o=e.replacement1,i=e.replacement2,r="".concat(n,t?"_en":"_cn");!this._map.has(r)&&this._map.has(n)&&(r=n);var a="";return this._map.has(r)?(a=this._map.get(r),ze(o)||(a=a.replace("$replacement1",o)),ze(i)||(a=a.replace("$replacement2",i)),a):a}},{key:"reset",value:function(){Oe.l("".concat(this._n,".reset"))}}]),e}(),Ka=zr((function(e,t){var o="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var o=t.shift();if(o){if("object"!==n(o))throw new TypeError(o+"must be non-object");for(var r in o)i(o,r)&&(e[r]=o[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,n,o,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+o),i);else for(var r=0;r<o;r++)e[i+r]=t[n+r]},flattenChunks:function(e){var t,n,o,i,r,a;for(o=0,t=0,n=e.length;t<n;t++)o+=e[t].length;for(a=new Uint8Array(o),i=0,t=0,n=e.length;t<n;t++)r=e[t],a.set(r,i),i+=r.length;return a}},a={arraySet:function(e,t,n,o,i){for(var r=0;r<o;r++)e[i+r]=t[n+r]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,r)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,a))},t.setTyped(o)}));Ka.assign,Ka.shrinkBuf,Ka.setTyped,Ka.Buf8,Ka.Buf16,Ka.Buf32;var Wa=function(e,t,n,o){for(var i=65535&e|0,r=e>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{r=r+(i=i+t[o++]|0)|0}while(--a);i%=65521,r%=65521}return i|r<<16|0},Ya=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var o=0;o<8;o++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}(),za=function(e,t,n,o){var i=Ya,r=o+n;e^=-1;for(var a=o;a<r;a++)e=e>>>8^i[255&(e^t[a])];return-1^e},$a=function(e,t){var n,o,i,r,a,s,c,u,l,d,f,p,h,g,_,v,m,y,M,I,C,b,T,S,E;n=e.state,o=e.next_in,S=e.input,i=o+(e.avail_in-5),r=e.next_out,E=e.output,a=r-(t-e.avail_out),s=r+(e.avail_out-257),c=n.dmax,u=n.wsize,l=n.whave,d=n.wnext,f=n.window,p=n.hold,h=n.bits,g=n.lencode,_=n.distcode,v=(1<<n.lenbits)-1,m=(1<<n.distbits)-1;e:do{h<15&&(p+=S[o++]<<h,h+=8,p+=S[o++]<<h,h+=8),y=g[p&v];t:for(;;){if(p>>>=M=y>>>24,h-=M,0===(M=y>>>16&255))E[r++]=65535&y;else{if(!(16&M)){if(0==(64&M)){y=g[(65535&y)+(p&(1<<M)-1)];continue t}if(32&M){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}I=65535&y,(M&=15)&&(h<M&&(p+=S[o++]<<h,h+=8),I+=p&(1<<M)-1,p>>>=M,h-=M),h<15&&(p+=S[o++]<<h,h+=8,p+=S[o++]<<h,h+=8),y=_[p&m];n:for(;;){if(p>>>=M=y>>>24,h-=M,!(16&(M=y>>>16&255))){if(0==(64&M)){y=_[(65535&y)+(p&(1<<M)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(C=65535&y,h<(M&=15)&&(p+=S[o++]<<h,(h+=8)<M&&(p+=S[o++]<<h,h+=8)),(C+=p&(1<<M)-1)>c){e.msg="invalid distance too far back",n.mode=30;break e}if(p>>>=M,h-=M,C>(M=r-a)){if((M=C-M)>l&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(b=0,T=f,0===d){if(b+=u-M,M<I){I-=M;do{E[r++]=f[b++]}while(--M);b=r-C,T=E}}else if(d<M){if(b+=u+d-M,(M-=d)<I){I-=M;do{E[r++]=f[b++]}while(--M);if(b=0,d<I){I-=M=d;do{E[r++]=f[b++]}while(--M);b=r-C,T=E}}}else if(b+=d-M,M<I){I-=M;do{E[r++]=f[b++]}while(--M);b=r-C,T=E}for(;I>2;)E[r++]=T[b++],E[r++]=T[b++],E[r++]=T[b++],I-=3;I&&(E[r++]=T[b++],I>1&&(E[r++]=T[b++]))}else{b=r-C;do{E[r++]=E[b++],E[r++]=E[b++],E[r++]=E[b++],I-=3}while(I>2);I&&(E[r++]=E[b++],I>1&&(E[r++]=E[b++]))}break}}break}}while(o<i&&r<s);o-=I=h>>3,p&=(1<<(h-=I<<3))-1,e.next_in=o,e.next_out=r,e.avail_in=o<i?i-o+5:5-(o-i),e.avail_out=r<s?s-r+257:257-(r-s),n.hold=p,n.bits=h},Xa=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Ja=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Qa=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Za=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],es=function(e,t,n,o,i,r,a,s){var c,u,l,d,f,p,h,g,_,v=s.bits,m=0,y=0,M=0,I=0,C=0,b=0,T=0,S=0,E=0,k=0,D=null,A=0,L=new Ka.Buf16(16),O=new Ka.Buf16(16),R=null,w=0;for(m=0;m<=15;m++)L[m]=0;for(y=0;y<o;y++)L[t[n+y]]++;for(C=v,I=15;I>=1&&0===L[I];I--);if(C>I&&(C=I),0===I)return i[r++]=20971520,i[r++]=20971520,s.bits=1,0;for(M=1;M<I&&0===L[M];M++);for(C<M&&(C=M),S=1,m=1;m<=15;m++)if(S<<=1,(S-=L[m])<0)return-1;if(S>0&&(0===e||1!==I))return-1;for(O[1]=0,m=1;m<15;m++)O[m+1]=O[m]+L[m];for(y=0;y<o;y++)0!==t[n+y]&&(a[O[t[n+y]]++]=y);if(0===e?(D=R=a,p=19):1===e?(D=Xa,A-=257,R=Ja,w-=257,p=256):(D=Qa,R=Za,p=-1),k=0,y=0,m=M,f=r,b=C,T=0,l=-1,d=(E=1<<C)-1,1===e&&E>852||2===e&&E>592)return 1;for(;;){h=m-T,a[y]<p?(g=0,_=a[y]):a[y]>p?(g=R[w+a[y]],_=D[A+a[y]]):(g=96,_=0),c=1<<m-T,M=u=1<<b;do{i[f+(k>>T)+(u-=c)]=h<<24|g<<16|_|0}while(0!==u);for(c=1<<m-1;k&c;)c>>=1;if(0!==c?(k&=c-1,k+=c):k=0,y++,0==--L[m]){if(m===I)break;m=t[n+a[y]]}if(m>C&&(k&d)!==l){for(0===T&&(T=C),f+=M,S=1<<(b=m-T);b+T<I&&!((S-=L[b+T])<=0);)b++,S<<=1;if(E+=1<<b,1===e&&E>852||2===e&&E>592)return 1;i[l=k&d]=C<<24|b<<16|f-r|0}}return 0!==k&&(i[f+k]=m-T<<24|64<<16|0),s.bits=C,0};function ts(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function ns(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Ka.Buf16(320),this.work=new Ka.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function os(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Ka.Buf32(852),t.distcode=t.distdyn=new Ka.Buf32(592),t.sane=1,t.back=-1,0):-2}function is(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,os(e)):-2}function rs(e,t){var n,o;return e&&e.state?(o=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?-2:(null!==o.window&&o.wbits!==t&&(o.window=null),o.wrap=n,o.wbits=t,is(e))):-2}function as(e,t){var n,o;return e?(o=new ns,e.state=o,o.window=null,0!==(n=rs(e,t))&&(e.state=null),n):-2}var ss,cs,us=!0;function ls(e){if(us){var t;for(ss=new Ka.Buf32(512),cs=new Ka.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(es(1,e.lens,0,288,ss,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;es(2,e.lens,0,32,cs,0,e.work,{bits:5}),us=!1}e.lencode=ss,e.lenbits=9,e.distcode=cs,e.distbits=5}function ds(e,t,n,o){var i,r=e.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Ka.Buf8(r.wsize)),o>=r.wsize?(Ka.arraySet(r.window,t,n-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):((i=r.wsize-r.wnext)>o&&(i=o),Ka.arraySet(r.window,t,n-o,i,r.wnext),(o-=i)?(Ka.arraySet(r.window,t,n-o,o,0),r.wnext=o,r.whave=r.wsize):(r.wnext+=i,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=i))),0}var fs={inflateReset:is,inflateReset2:rs,inflateResetKeep:os,inflateInit:function(e){return as(e,15)},inflateInit2:as,inflate:function(e,t){var n,o,i,r,a,s,c,u,l,d,f,p,h,g,_,v,m,y,M,I,C,b,T,S,E=0,k=new Ka.Buf8(4),D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return-2;12===(n=e.state).mode&&(n.mode=13),a=e.next_out,i=e.output,c=e.avail_out,r=e.next_in,o=e.input,s=e.avail_in,u=n.hold,l=n.bits,d=s,f=c,b=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;l<16;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}if(2&n.wrap&&35615===u){n.check=0,k[0]=255&u,k[1]=u>>>8&255,n.check=za(n.check,k,2,0),u=0,l=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&u)){e.msg="unknown compression method",n.mode=30;break}if(l-=4,C=8+(15&(u>>>=4)),0===n.wbits)n.wbits=C;else if(C>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<C,e.adler=n.check=1,n.mode=512&u?10:12,u=0,l=0;break;case 2:for(;l<16;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}if(n.flags=u,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&(k[0]=255&u,k[1]=u>>>8&255,n.check=za(n.check,k,2,0)),u=0,l=0,n.mode=3;case 3:for(;l<32;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}n.head&&(n.head.time=u),512&n.flags&&(k[0]=255&u,k[1]=u>>>8&255,k[2]=u>>>16&255,k[3]=u>>>24&255,n.check=za(n.check,k,4,0)),u=0,l=0,n.mode=4;case 4:for(;l<16;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&(k[0]=255&u,k[1]=u>>>8&255,n.check=za(n.check,k,2,0)),u=0,l=0,n.mode=5;case 5:if(1024&n.flags){for(;l<16;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&(k[0]=255&u,k[1]=u>>>8&255,n.check=za(n.check,k,2,0)),u=0,l=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((p=n.length)>s&&(p=s),p&&(n.head&&(C=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),Ka.arraySet(n.head.extra,o,r,p,C)),512&n.flags&&(n.check=za(n.check,o,p,r)),s-=p,r+=p,n.length-=p),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===s)break e;p=0;do{C=o[r+p++],n.head&&C&&n.length<65536&&(n.head.name+=String.fromCharCode(C))}while(C&&p<s);if(512&n.flags&&(n.check=za(n.check,o,p,r)),s-=p,r+=p,C)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===s)break e;p=0;do{C=o[r+p++],n.head&&C&&n.length<65536&&(n.head.comment+=String.fromCharCode(C))}while(C&&p<s);if(512&n.flags&&(n.check=za(n.check,o,p,r)),s-=p,r+=p,C)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;l<16;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}if(u!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}u=0,l=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;l<32;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}e.adler=n.check=ts(u),u=0,l=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=a,e.avail_out=c,e.next_in=r,e.avail_in=s,n.hold=u,n.bits=l,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){u>>>=7&l,l-=7&l,n.mode=27;break}for(;l<3;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}switch(n.last=1&u,l-=1,3&(u>>>=1)){case 0:n.mode=14;break;case 1:if(ls(n),n.mode=20,6===t){u>>>=2,l-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}u>>>=2,l-=2;break;case 14:for(u>>>=7&l,l-=7&l;l<32;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}if((65535&u)!=(u>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&u,u=0,l=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(p=n.length){if(p>s&&(p=s),p>c&&(p=c),0===p)break e;Ka.arraySet(i,o,r,p,a),s-=p,r+=p,c-=p,a+=p,n.length-=p;break}n.mode=12;break;case 17:for(;l<14;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}if(n.nlen=257+(31&u),u>>>=5,l-=5,n.ndist=1+(31&u),u>>>=5,l-=5,n.ncode=4+(15&u),u>>>=4,l-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;l<3;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}n.lens[D[n.have++]]=7&u,u>>>=3,l-=3}for(;n.have<19;)n.lens[D[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,T={bits:n.lenbits},b=es(0,n.lens,0,19,n.lencode,0,n.work,T),n.lenbits=T.bits,b){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;v=(E=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,m=65535&E,!((_=E>>>24)<=l);){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}if(m<16)u>>>=_,l-=_,n.lens[n.have++]=m;else{if(16===m){for(S=_+2;l<S;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}if(u>>>=_,l-=_,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}C=n.lens[n.have-1],p=3+(3&u),u>>>=2,l-=2}else if(17===m){for(S=_+3;l<S;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}l-=_,C=0,p=3+(7&(u>>>=_)),u>>>=3,l-=3}else{for(S=_+7;l<S;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}l-=_,C=0,p=11+(127&(u>>>=_)),u>>>=7,l-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;p--;)n.lens[n.have++]=C}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,T={bits:n.lenbits},b=es(1,n.lens,0,n.nlen,n.lencode,0,n.work,T),n.lenbits=T.bits,b){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,T={bits:n.distbits},b=es(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,T),n.distbits=T.bits,b){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(s>=6&&c>=258){e.next_out=a,e.avail_out=c,e.next_in=r,e.avail_in=s,n.hold=u,n.bits=l,$a(e,f),a=e.next_out,i=e.output,c=e.avail_out,r=e.next_in,o=e.input,s=e.avail_in,u=n.hold,l=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;v=(E=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,m=65535&E,!((_=E>>>24)<=l);){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}if(v&&0==(240&v)){for(y=_,M=v,I=m;v=(E=n.lencode[I+((u&(1<<y+M)-1)>>y)])>>>16&255,m=65535&E,!(y+(_=E>>>24)<=l);){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}u>>>=y,l-=y,n.back+=y}if(u>>>=_,l-=_,n.back+=_,n.length=m,0===v){n.mode=26;break}if(32&v){n.back=-1,n.mode=12;break}if(64&v){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&v,n.mode=22;case 22:if(n.extra){for(S=n.extra;l<S;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,l-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;v=(E=n.distcode[u&(1<<n.distbits)-1])>>>16&255,m=65535&E,!((_=E>>>24)<=l);){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}if(0==(240&v)){for(y=_,M=v,I=m;v=(E=n.distcode[I+((u&(1<<y+M)-1)>>y)])>>>16&255,m=65535&E,!(y+(_=E>>>24)<=l);){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}u>>>=y,l-=y,n.back+=y}if(u>>>=_,l-=_,n.back+=_,64&v){e.msg="invalid distance code",n.mode=30;break}n.offset=m,n.extra=15&v,n.mode=24;case 24:if(n.extra){for(S=n.extra;l<S;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,l-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===c)break e;if(p=f-c,n.offset>p){if((p=n.offset-p)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}p>n.wnext?(p-=n.wnext,h=n.wsize-p):h=n.wnext-p,p>n.length&&(p=n.length),g=n.window}else g=i,h=a-n.offset,p=n.length;p>c&&(p=c),c-=p,n.length-=p;do{i[a++]=g[h++]}while(--p);0===n.length&&(n.mode=21);break;case 26:if(0===c)break e;i[a++]=n.length,c--,n.mode=21;break;case 27:if(n.wrap){for(;l<32;){if(0===s)break e;s--,u|=o[r++]<<l,l+=8}if(f-=c,e.total_out+=f,n.total+=f,f&&(e.adler=n.check=n.flags?za(n.check,i,f,a-f):Wa(n.check,i,f,a-f)),f=c,(n.flags?u:ts(u))!==n.check){e.msg="incorrect data check",n.mode=30;break}u=0,l=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;l<32;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}if(u!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}u=0,l=0}n.mode=29;case 29:b=1;break e;case 30:b=-3;break e;case 31:return-4;case 32:default:return-2}return e.next_out=a,e.avail_out=c,e.next_in=r,e.avail_in=s,n.hold=u,n.bits=l,(n.wsize||f!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&ds(e,e.output,e.next_out,f-e.avail_out),d-=e.avail_in,f-=e.avail_out,e.total_in+=d,e.total_out+=f,n.total+=f,n.wrap&&f&&(e.adler=n.check=n.flags?za(n.check,i,f,e.next_out-f):Wa(n.check,i,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===d&&0===f||4===t)&&0===b&&(b=-5),b},inflateEnd:function(e){if(!e||!e.state)return-2;var t=e.state;return t.window&&(t.window=null),e.state=null,0},inflateGetHeader:function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?-2:(n.head=t,t.done=!1,0):-2},inflateSetDictionary:function(e,t){var n,o=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?-2:11===n.mode&&Wa(1,t,o,0)!==n.check?-3:ds(e,t,o,o)?(n.mode=31,-4):(n.havedict=1,0):-2},inflateInfo:"pako inflate (from Nodeca project)"},ps=!0,hs=!0;try{String.fromCharCode.apply(null,[0])}catch(Us){ps=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(Us){hs=!1}for(var gs=new Ka.Buf8(256),_s=0;_s<256;_s++)gs[_s]=_s>=252?6:_s>=248?5:_s>=240?4:_s>=224?3:_s>=192?2:1;gs[254]=gs[254]=1;var vs=function(e,t){var n,o,i,r,a=t||e.length,s=new Array(2*a);for(o=0,n=0;n<a;)if((i=e[n++])<128)s[o++]=i;else if((r=gs[i])>4)s[o++]=65533,n+=r-1;else{for(i&=2===r?31:3===r?15:7;r>1&&n<a;)i=i<<6|63&e[n++],r--;r>1?s[o++]=65533:i<65536?s[o++]=i:(i-=65536,s[o++]=55296|i>>10&1023,s[o++]=56320|1023&i)}return function(e,t){if(t<65534&&(e.subarray&&hs||!e.subarray&&ps))return String.fromCharCode.apply(null,Ka.shrinkBuf(e,t));for(var n="",o=0;o<t;o++)n+=String.fromCharCode(e[o]);return n}(s,o)},ms=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+gs[e[n]]>t?n:t},ys={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Ms={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Is=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Cs=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},bs=Object.prototype.toString;function Ts(e){if(!(this instanceof Ts))return new Ts(e);this.options=Ka.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Is,this.strm.avail_out=0;var n=fs.inflateInit2(this.strm,t.windowBits);if(n!==ys.Z_OK)throw new Error(Ms[n]);if(this.header=new Cs,fs.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=function(e){var t,n,o,i,r,a=e.length,s=0;for(i=0;i<a;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(o=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(o-56320),i++),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Ka.Buf8(s),r=0,i=0;r<s;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(o=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(o-56320),i++),n<128?t[r++]=n:n<2048?(t[r++]=192|n>>>6,t[r++]=128|63&n):n<65536?(t[r++]=224|n>>>12,t[r++]=128|n>>>6&63,t[r++]=128|63&n):(t[r++]=240|n>>>18,t[r++]=128|n>>>12&63,t[r++]=128|n>>>6&63,t[r++]=128|63&n);return t}(t.dictionary):"[object ArrayBuffer]"===bs.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=fs.inflateSetDictionary(this.strm,t.dictionary))!==ys.Z_OK))throw new Error(Ms[n])}function Ss(e,t){var n=new Ts(t);if(n.push(e,!0),n.err)throw n.msg||Ms[n.err];return n.result}Ts.prototype.push=function(e,t){var n,o,i,r,a,s=this.strm,c=this.options.chunkSize,u=this.options.dictionary,l=!1;if(this.ended)return!1;o=t===~~t?t:!0===t?ys.Z_FINISH:ys.Z_NO_FLUSH,"string"==typeof e?s.input=function(e){for(var t=new Ka.Buf8(e.length),n=0,o=t.length;n<o;n++)t[n]=e.charCodeAt(n);return t}(e):"[object ArrayBuffer]"===bs.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new Ka.Buf8(c),s.next_out=0,s.avail_out=c),(n=fs.inflate(s,ys.Z_NO_FLUSH))===ys.Z_NEED_DICT&&u&&(n=fs.inflateSetDictionary(this.strm,u)),n===ys.Z_BUF_ERROR&&!0===l&&(n=ys.Z_OK,l=!1),n!==ys.Z_STREAM_END&&n!==ys.Z_OK)return this.onEnd(n),this.ended=!0,!1;s.next_out&&(0!==s.avail_out&&n!==ys.Z_STREAM_END&&(0!==s.avail_in||o!==ys.Z_FINISH&&o!==ys.Z_SYNC_FLUSH)||("string"===this.options.to?(i=ms(s.output,s.next_out),r=s.next_out-i,a=vs(s.output,i),s.next_out=r,s.avail_out=c-r,r&&Ka.arraySet(s.output,s.output,i,r,0),this.onData(a)):this.onData(Ka.shrinkBuf(s.output,s.next_out)))),0===s.avail_in&&0===s.avail_out&&(l=!0)}while((s.avail_in>0||0===s.avail_out)&&n!==ys.Z_STREAM_END);return n===ys.Z_STREAM_END&&(o=ys.Z_FINISH),o===ys.Z_FINISH?(n=fs.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===ys.Z_OK):o!==ys.Z_SYNC_FLUSH||(this.onEnd(ys.Z_OK),s.avail_out=0,!0)},Ts.prototype.onData=function(e){this.chunks.push(e)},Ts.prototype.onEnd=function(e){e===ys.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Ka.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Es={Inflate:Ts,inflate:Ss,inflateRaw:function(e,t){return(t=t||{}).raw=!0,Ss(e,t)},ungzip:Ss},ks={};(0,Ka.assign)(ks,Es,ys);var Ds=ks,As=function(){function e(t){r(this,e),this._m=t,this._n="InflateModule",this._bLogForInflateOK=!1,this._bLogForInflateError=!1}return c(e,[{key:"inflate",value:function(e){var t,n=new Uint8Array(e).slice(4),o=Date.now();try{t=Ds.inflate(n,{to:"string"}),this._bLogForInflateOK||(this._bLogForInflateOK=!0,new Ai("inflateOK").end())}catch(u){if(this._bLogForInflateError)return;return this._bLogForInflateError=!0,void new Ai("inflateError").setMessage(u).end()}var i=n.length+4,r=t.length;return Oe.d("inflate ok. zipped:".concat(i," unzipped:").concat(r)+" compression ratio:".concat(Math.round(100*(r-i)/r),"% cost:").concat(Date.now()-o)),t}},{key:"reset",value:function(){Oe.l("".concat(this._n,".reset")),this._bLogForInflateOK=!1,this._bLogForInflateError=!1}}]),e}(),Ls=function(){function e(t){r(this,e);var n=new Ai("sdkConstruct");this._n="ModuleManager",this._isReady=!1,this._reason=hi.USER_NOT_LOGGED_IN,this._startLoginTs=0,this._moduleMap=new Map,this._innerEmitter=null,this._outerEmitter=null,this._checkCount=0,this._checkTimer=-1,this._moduleMap.set(12,new Ur(this,t)),this._moduleMap.set(37,new As(this)),this._moduleMap.set(27,new qa(this)),this._moduleMap.set(23,new Oa(this)),this._moduleMap.set(24,new xa(this)),this._moduleMap.set(26,new Ua(this)),this._moduleMap.set(21,new Ca(this)),this._moduleMap.set(20,new Aa(this)),this._moduleMap.set(1,new xr(this)),this._moduleMap.set(2,new ia(this)),this._moduleMap.set(3,new ra(this)),this._moduleMap.set(31,new aa(this)),this._moduleMap.set(4,new Gr(this)),this._moduleMap.set(6,new Ji(this)),this._moduleMap.set(11,new hr(this)),this._moduleMap.set(7,new Tr(this)),this._moduleMap.set(9,new Er(this)),this._moduleMap.set(10,new Lr(this)),this._moduleMap.set(13,new qr(this)),this._moduleMap.set(32,new ja(this)),this._moduleMap.set(14,new Hr(this)),this._moduleMap.set(15,new Yr(this)),this._moduleMap.set(16,new Xr(this)),this._moduleMap.set(17,new Qr(this)),this._moduleMap.set(18,new sa(this)),this._moduleMap.set(19,new ca(this)),this._moduleMap.set(22,new La(this)),this._moduleMap.set(25,new Ra(this)),this._moduleMap.set(28,new Ba(this)),this._moduleMap.set(29,new Va(this)),this._moduleMap.set(30,new Ha(this)),this._eventThrottleMap=new Map;var o=t.instanceID,i=t.oversea,a=t.SDKAppID,s="instanceID:".concat(o," SDKAppID:").concat(a," host:").concat(It()," oversea:").concat(i," inBrowser:").concat(X," inMiniApp:").concat($)+" canIUseInflate:".concat(this.canIUseInflate())+" workerAvailable:".concat(ve," UserAgent:").concat(Q);Ai.bindEventStatModule(this._moduleMap.get(14)),n.setMessage("".concat(s," ").concat(function(){var e="";if($)try{var t=J.getSystemInfoSync(),n=t.model,o=t.version,i=t.system,r=t.platform,a=t.SDKVersion;e="model:".concat(n," version:").concat(o," system:").concat(i," platform:").concat(r," SDKVersion:").concat(a)}catch(s){e=""}return e}())).end(),Oe.i("SDK ".concat(s)),Yi.prototype._getErrorMessage=this.getErrorMessage.bind(this),this._readyList=void 0,this._ssoLogForReady=null,this._initReadyList()}return c(e,[{key:"_startTimer",value:function(){var e=this._moduleMap.get(24),t=e.isWorkerEnabled();Oe.l("".concat(this._n,".startTimer isWorkerEnabled:").concat(t," seed:").concat(this._checkTimer)),t?e.startWorkerTimer():this._startMainThreadTimer()}},{key:"_startMainThreadTimer",value:function(){this._checkTimer<0&&(this._checkTimer=setInterval(this.onCheckTimer.bind(this),1e3)),Oe.l("".concat(this._n,"._startMainThreadTimer seed:").concat(this._checkTimer))}},{key:"stopTimer",value:function(){var e=this._moduleMap.get(24),t=e.isWorkerEnabled();Oe.l("".concat(this._n,".stopTimer isWorkerEnabled:").concat(t," seed:").concat(this._checkTimer)),t?e.stopWorkerTimer():this._stopMainThreadTimer()}},{key:"_stopMainThreadTimer",value:function(){Oe.l("".concat(this._n,"._stopMainThreadTimer")),this._checkTimer>0&&(clearInterval(this._checkTimer),this._checkTimer=-1,this._checkCount=0)}},{key:"_stopMainThreadSocket",value:function(){Oe.l("".concat(this._n,"._stopMainThreadSocket"));var e=this._moduleMap.get(21);e.setIsWorkerEnabled(!0),e.reConnect()}},{key:"_startMainThreadSocket",value:function(){Oe.l("".concat(this._n,"._startMainThreadSocket"));var e=this._moduleMap.get(21);e.setIsWorkerEnabled(!1),e.reConnect()}},{key:"onWorkerTimerEnabled",value:function(){Oe.l("".concat(this._n,".onWorkerTimerEnabled, disable main thread timer and socket")),this._stopMainThreadTimer(),this._stopMainThreadSocket()}},{key:"onWorkerTimerDisabled",value:function(){Oe.l("".concat(this._n,".onWorkerTimerDisabled, enable main thread timer and socket")),this._startMainThreadTimer(),this._startMainThreadSocket()}},{key:"onCheckTimer",value:function(){this._checkCount+=1;var e,t=k(this._moduleMap);try{for(t.s();!(e=t.n()).done;){var n=M(e.value,2)[1];n.onCheckTimer&&n.onCheckTimer(this._checkCount)}}catch(r){t.e(r)}finally{t.f()}}},{key:"_initReadyList",value:function(){var e=this;this._readyList=[this._moduleMap.get(1),this._moduleMap.get(11)],this._readyList.forEach((function(t){t.ready((function(){return e._onModuleReady()}))}))}},{key:"_onModuleReady",value:function(){var e=!0;if(this._readyList.forEach((function(t){t.isReady()||(e=!1)})),e&&!this._isReady){this._isReady=!0,this._outerEmitter.emit(D.SDK_READY);var t=Date.now()-this._startLoginTs;Oe.w("SDK is ready. cost ".concat(t," ms")),this._startLoginTs=Date.now();var n=this._moduleMap.get(15).getNetworkType(),o=this._ssoLogForReady.getStartTs()+Te;this._ssoLogForReady.setNetworkType(n).setMessage(t).start(o).end()}}},{key:"login",value:function(){0===this._startLoginTs&&(Ee(),this._startLoginTs=Date.now(),this._startTimer(),this._moduleMap.get(15).start(),this._ssoLogForReady=new Ai("sdkReady"),this._reason=hi.LOGGING_IN)}},{key:"onLoginFailed",value:function(){this._startLoginTs=0}},{key:"getOuterEmitterInstance",value:function(){return null===this._outerEmitter&&(this._outerEmitter=new $r,function(e){zi=e}(this._outerEmitter),this._outerEmitter._emit=this._outerEmitter.emit,this._outerEmitter.emit=function(e,t){var n=this;if(e===D.CONVERSATION_LIST_UPDATED||e===D.FRIEND_LIST_UPDATED||e===D.GROUP_LIST_UPDATED||e===D.TOTAL_UNREAD_MESSAGE_COUNT_UPDATED)if(this._eventThrottleMap.has(e)){var o=Date.now(),i=this._eventThrottleMap.get(e);o-i.last<=1e3?(i.timeoutID&&clearTimeout(i.timeoutID),i.timeoutID=setTimeout((function(){i.last=Date.now(),n._outerEmitter._emit.apply(n._outerEmitter,[e,{name:e,data:n._getEventData(e)}])}),1e3)):(i.last=o,this._outerEmitter._emit.apply(this._outerEmitter,[e,{name:e,data:this._getEventData(e)}]))}else this._eventThrottleMap.set(e,{last:Date.now(),timeoutID:-1}),this._outerEmitter._emit.apply(this._outerEmitter,[e,{name:e,data:this._getEventData(e)}]);else this._outerEmitter._emit.apply(this._outerEmitter,[e,{name:e,data:arguments[1]}])}.bind(this)),this._outerEmitter}},{key:"_getEventData",value:function(e){return e===D.CONVERSATION_LIST_UPDATED?this._moduleMap.get(11).getLocalConversationList():e===D.FRIEND_LIST_UPDATED?this._moduleMap.get(8).getLocalFriendList(!1):e===D.GROUP_LIST_UPDATED?this._moduleMap.get(7).getLocalGroupList():e===D.TOTAL_UNREAD_MESSAGE_COUNT_UPDATED?this._moduleMap.get(11).getTotalUnreadMessageCount():void 0}},{key:"getInnerEmitterInstance",value:function(){return null===this._innerEmitter&&(this._innerEmitter=new $r,this._innerEmitter._emit=this._innerEmitter.emit,this._innerEmitter.emit=function(e,t){var n;n=We(arguments[1])&&arguments[1].data?[e,{name:arguments[0],data:arguments[1].data}]:[e,{name:arguments[0],data:arguments[1]}],this._innerEmitter._emit.apply(this._innerEmitter,n)}.bind(this)),this._innerEmitter}},{key:"hasModule",value:function(e){return this._moduleMap.has(e)}},{key:"getModule",value:function(e){return this._moduleMap.get(e)}},{key:"canIUseInflate",value:function(){return!!this._moduleMap.get(37)}},{key:"isReady",value:function(){return this._isReady}},{key:"isIntl",value:function(){return this.getModule(12).isIntl()}},{key:"getNotReadyReason",value:function(){return this._reason}},{key:"setNotReadyReason",value:function(e){this._reason=e}},{key:"getErrorMessage",value:function(e,t,n){return this._moduleMap.get(32).get({key:e,replacement1:t,replacement2:n,isIntl:this.isIntl()})}},{key:"outputWarning",value:function(e,t,n){var o=this.getErrorMessage(e,t,n);o&&Oe.w(o)}},{key:"onError",value:function(e){var t="code:".concat(e.code," message:").concat(e.message);Oe.w("Oops! ".concat(t)),new Ai("error").setMessage(t).setNetworkType(this.getModule(15).getNetworkType()).setLevel("error").end(),this.getOuterEmitterInstance().emit(D.ERROR,e)}},{key:"restartTimer",value:function(){Oe.l("".concat(this._n,".restartTimer")),this.stopTimer(),this._startTimer(),this.getModule(7).restartPolling()}},{key:"getTimerID",value:function(){var e=this._moduleMap.get(24);return e.isWorkerEnabled()?e.getTimerID():this._checkTimer}},{key:"getPollingTimerID",value:function(e){return this._moduleMap.get(7).getPollingTimerID(e)}},{key:"reset",value:function(){Oe.l("".concat(this._n,".reset")),Ee();var e,t=k(this._moduleMap);try{for(t.s();!(e=t.n()).done;){var n=M(e.value,2)[1];n.reset&&n.reset()}}catch(u){t.e(u)}finally{t.f()}this._startLoginTs=0,this._initReadyList(),this._isReady=!1,this.stopTimer(),this._outerEmitter.emit(D.SDK_NOT_READY);var o,i=k(this._eventThrottleMap);try{for(i.s();!(o=i.n()).done;){var r=M(o.value,2)[1];r.timeoutID&&clearTimeout(r.timeoutID)}}catch(u){i.e(u)}finally{i.f()}this._eventThrottleMap.clear()}}]),e}(),Os=function(){function e(t){r(this,e),this._funcMap=new Map,this._m=t}return c(e,[{key:"defense",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if("string"!=typeof e)return null;if(0===e.length)return null;if("function"!=typeof t)return null;if(this._funcMap.has(e)&&this._funcMap.get(e).has(t))return this._funcMap.get(e).get(t);this._funcMap.has(e)||this._funcMap.set(e,new Map);var o=null;return this._funcMap.get(e).has(t)?o=this._funcMap.get(e).get(t):(o=this._pack(e,t,n),this._funcMap.get(e).set(t,o)),o}},{key:"defenseOnce",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return"function"!=typeof t?null:this._pack(e,t,n)}},{key:"find",value:function(e,t){return"string"!=typeof e||0===e.length||"function"!=typeof t?null:this._funcMap.has(e)&&this._funcMap.get(e).has(t)?this._funcMap.get(e).get(t):(this._m.outputWarning("ListenerFnNotFound",e),null)}},{key:"delete",value:function(e,t){return"function"==typeof t&&!!this._funcMap.has(e)&&!!this._funcMap.get(e).has(t)&&(this._funcMap.get(e).delete(t),0===this._funcMap.get(e).size&&this._funcMap.delete(e),!0)}},{key:"_pack",value:function(e,t,n){var o=this;return function(){try{t.apply(n,Array.from(arguments))}catch(d){var i=Object.values(D).indexOf(e),r="CallbackError";if(-1!==i){var a=Object.keys(D)[i];o._m.outputWarning(r,a,d)}var s=new Ai(r);s.setMessage("eventName:".concat(e)).setMoreMessage(d.message).end()}}}}]),e}(),Rs=function(){function e(t){r(this,e);var n={SDKAppID:t.SDKAppID,unlimitedAVChatRoom:t.unlimitedAVChatRoom||!1,scene:t.scene||"",oversea:t.oversea||!1,instanceID:Mt(),devMode:t.devMode||!1,proxyServer:t.proxyServer||void 0,fileUploadProxy:t.fileUploadProxy||void 0,fileDownloadProxy:t.fileDownloadProxy||t.fileUploadProxy||void 0};this._m=new Ls(n),this._safetyCallbackFactory=new Os(this._m)}return c(e,[{key:"onError",value:function(e){this._m.onError(e)}},{key:"login",value:function(e){return this._m.login(),this._getModule(1).login(e)}},{key:"logout",value:function(){var e=this;return this._getModule(1).logout().then((function(t){return e._m.reset(),t}))}},{key:"isReady",value:function(){return this._m.isReady()}},{key:"isIntl",value:function(){return this._m.isIntl()}},{key:"getNotReadyReason",value:function(){return this._m.getNotReadyReason()}},{key:"getErrorMessage",value:function(e,t,n){return this._m.getErrorMessage(e,t,n)}},{key:"_getModule",value:function(e){return this._m.getModule(e)}},{key:"destroy",value:function(){var e=this;return this.logout().finally((function(){e._m.stopTimer(),e._getModule(24).terminate(),e._getModule(21).dealloc();var t=e._m.getOuterEmitterInstance(),n=e._getModule(12);t.emit(D.SDK_DESTROY,{SDKAppID:n.getSDKAppID()})}))}},{key:"on",value:function(e,t,n){Oe.d("on","eventName:".concat(e)),this._m.getOuterEmitterInstance().on(e,this._safetyCallbackFactory.defense(e,t,n),n)}},{key:"once",value:function(e,t,n){Oe.d("once","eventName:".concat(e)),this._m.getOuterEmitterInstance().once(e,this._safetyCallbackFactory.defenseOnce(e,t,n),n||this)}},{key:"off",value:function(e,t,n,o){Oe.d("off","eventName:".concat(e));var i=this._safetyCallbackFactory.find(e,t);null!==i&&(this._m.getOuterEmitterInstance().off(e,i,n,o),this._safetyCallbackFactory.delete(e,t))}},{key:"registerPlugin",value:function(e){ze(e["tim-offline-push-plugin"])?this._getModule(18).registerPlugin(e):this._getModule(28).registerPlugin(e)}},{key:"setLogLevel",value:function(e){if(e<=0){var t=this.getErrorMessage("TIM_ASCII_ART");t&&o.log(t);var n=this.getErrorMessage("API_REFER");n&&(wt()?o.log("%c ".concat("IM SDK API ->"," %c"),"background:#ff9d00; padding:1px; border-radius:3px; color: #fff","background:transparent",n):o.log("IM SDK API ->",n));var i=this.getErrorMessage("DOCS_GUIDE");i&&o.log(i)}Oe.setLevel(e)}},{key:"createTextMessage",value:function(e){return this._getModule(2).createTextMessage(e)}},{key:"createTextAtMessage",value:function(e){return this._getModule(2).createTextMessage(e)}},{key:"createImageMessage",value:function(e){return this._getModule(2).createImageMessage(e)}},{key:"createAudioMessage",value:function(e){return this._getModule(2).createAudioMessage(e)}},{key:"createVideoMessage",value:function(e){return this._getModule(2).createVideoMessage(e)}},{key:"createCustomMessage",value:function(e){return this._getModule(2).createCustomMessage(e)}},{key:"createFaceMessage",value:function(e){return this._getModule(2).createFaceMessage(e)}},{key:"createFileMessage",value:function(e){return this._getModule(2).createFileMessage(e)}},{key:"createLocationMessage",value:function(e){return this._getModule(2).createLocationMessage(e)}},{key:"createMergerMessage",value:function(e){return this._getModule(2).createMergerMessage(e)}},{key:"downloadMergerMessage",value:function(e){return e.type!==A.MSG_MERGER?Xi({code:hi.MESSAGE_MERGER_TYPE_INVALID}):Ut(e.payload.downloadKey)?Xi({code:hi.MESSAGE_MERGER_KEY_INVALID}):this._getModule(2).downloadMergerMessage(e).catch((function(e){return Xi({code:hi.MESSAGE_MERGER_DOWNLOAD_FAIL})}))}},{key:"createForwardMessage",value:function(e){return this._getModule(2).createForwardMessage(e)}},{key:"sendMessage",value:function(e,t){return e instanceof Ki?this._getModule(2).sendMessageInstance(e,t):Xi({code:hi.MESSAGE_SEND_NEED_MESSAGE_INSTANCE})}},{key:"callExperimentalAPI",value:function(e,t){return"sendComboMessage"===e?this._getModule(31).sendMessage(t):"handleGroupInvitation"===e?this._getModule(7).handleGroupInvitation(t):"isCommercialAbilityEnabled"===e?this._getModule(27).isFeatureEnabled(t):"isIntl"===e?this.isIntl():"sendTRTCCustomData"===e?this._getModule(30).sendTRTCCustomData(t):"getTimerID"===e?this._m.getTimerID():"getPollingTimerID"===e?this._m.getPollingTimerID(t):Xi({code:hi.INVALID_OPERATION})}},{key:"revokeMessage",value:function(e){return this._getModule(2).revokeMessage(e)}},{key:"resendMessage",value:function(e){return this._getModule(2).resendMessage(e)}},{key:"deleteMessage",value:function(e){return this._getModule(2).deleteMessage(e)}},{key:"translateText",value:function(e){return this._getModule(2).translateText(e)}},{key:"setMessageExtensions",value:function(e,t){return this._getModule(3).setMessageExtensions(e,t)}},{key:"getMessageExtensions",value:function(e){return this._getModule(3).getMessageExtensions(e)}},{key:"deleteMessageExtensions",value:function(e,t){return this._getModule(3).deleteMessageExtensions(e,t)}},{key:"modifyMessage",value:function(e){return this._getModule(2).modifyRemoteMessage(e)}},{key:"getMessageList",value:function(e){return this._getModule(11).getMessageList(e)}},{key:"getMessageListHopping",value:function(e){return this._getModule(11).getMessageListHopping(e)}},{key:"sendMessageReadReceipt",value:function(e){return this._getModule(11).sendReadReceipt(e)}},{key:"getMessageReadReceiptList",value:function(e){return this._getModule(11).getReadReceiptList(e)}},{key:"getGroupMessageReadMemberList",value:function(e){return this._getModule(7).getReadReceiptDetail(e)}},{key:"findMessage",value:function(e){return this._getModule(11).findMessage(e)}},{key:"setMessageRead",value:function(e){return this._getModule(11).setMessageRead(e)}},{key:"getConversationList",value:function(e){return this._getModule(11).getConversationList(e)}},{key:"getConversationProfile",value:function(e){return this._getModule(11).getConversationProfile(e)}},{key:"deleteConversation",value:function(e){return this._getModule(11).deleteConversation(e)}},{key:"clearHistoryMessage",value:function(e){return this._getModule(11).clearHistoryMessage(e)}},{key:"pinConversation",value:function(e){return this._getModule(11).pinConversation(e)}},{key:"setAllMessageRead",value:function(e){return this._getModule(11).setAllMessageRead(e)}},{key:"setMessageRemindType",value:function(e){return this._getModule(11).setMessageRemindType(e)}},{key:"getTotalUnreadMessageCount",value:function(){return this._getModule(11).getTotalUnreadMessageCount()}},{key:"setConversationCustomData",value:function(e){return this._getModule(11).setConversationCustomData(e)}},{key:"markConversation",value:function(e){return this._getModule(11).markConversation(e)}},{key:"getConversationGroupList",value:function(){return this._getModule(11).getConversationGroupList()}},{key:"createConversationGroup",value:function(e){return this._getModule(11).createConversationGroup(e)}},{key:"deleteConversationGroup",value:function(e){return this._getModule(11).deleteConversationGroup(e)}},{key:"renameConversationGroup",value:function(e){return this._getModule(11).renameConversationGroup(e)}},{key:"addConversationsToGroup",value:function(e){return this._getModule(11).addConversationsToGroup(e)}},{key:"deleteConversationsFromGroup",value:function(e){return this._getModule(11).deleteConversationsFromGroup(e)}},{key:"getMyProfile",value:function(){return this._getModule(4).getMyProfile()}},{key:"getUserProfile",value:function(e){return this._getModule(4).getUserProfile(e)}},{key:"updateMyProfile",value:function(e){return this._getModule(4).updateMyProfile(e)}},{key:"getBlacklist",value:function(){return this._getModule(4).getLocalBlacklist()}},{key:"addToBlacklist",value:function(e){return this._getModule(4).addBlacklist(e)}},{key:"removeFromBlacklist",value:function(e){return this._getModule(4).deleteBlacklist(e)}},{key:"setSelfStatus",value:function(e){return this._getModule(4).setSelfStatus(e)}},{key:"getUserStatus",value:function(e){return this._getModule(4).getUserStatus(e)}},{key:"subscribeUserStatus",value:function(e){return this._getModule(4).subscribeUserStatus(e)}},{key:"unsubscribeUserStatus",value:function(e){return this._getModule(4).unsubscribeUserStatus(e)}},{key:"getFriendList",value:function(){var e=this._getModule(8);return e?e.getLocalFriendList():Xi({code:hi.CANNOT_FIND_MODULE})}},{key:"addFriend",value:function(e){var t=this._getModule(8);return t?t.addFriend(e):Xi({code:hi.CANNOT_FIND_MODULE})}},{key:"deleteFriend",value:function(e){var t=this._getModule(8);return t?t.deleteFriend(e):Xi({code:hi.CANNOT_FIND_MODULE})}},{key:"checkFriend",value:function(e){var t=this._getModule(8);return t?t.checkFriend(e):Xi({code:hi.CANNOT_FIND_MODULE})}},{key:"getFriendProfile",value:function(e){var t=this._getModule(8);return t?t.getFriendProfile(e):Xi({code:hi.CANNOT_FIND_MODULE})}},{key:"updateFriend",value:function(e){var t=this._getModule(8);return t?t.updateFriend(e):Xi({code:hi.CANNOT_FIND_MODULE})}},{key:"getFriendApplicationList",value:function(){var e=this._getModule(8);return e?e.getLocalFriendApplicationList():Xi({code:hi.CANNOT_FIND_MODULE})}},{key:"acceptFriendApplication",value:function(e){var t=this._getModule(8);return t?t.acceptFriendApplication(e):Xi({code:hi.CANNOT_FIND_MODULE})}},{key:"refuseFriendApplication",value:function(e){var t=this._getModule(8);return t?t.refuseFriendApplication(e):Xi({code:hi.CANNOT_FIND_MODULE})}},{key:"deleteFriendApplication",value:function(e){var t=this._getModule(8);return t?t.deleteFriendApplication(e):Xi({code:hi.CANNOT_FIND_MODULE})}},{key:"setFriendApplicationRead",value:function(){var e=this._getModule(8);return e?e.setFriendApplicationRead():Xi({code:hi.CANNOT_FIND_MODULE})}},{key:"getFriendGroupList",value:function(){var e=this._getModule(8);return e?e.getLocalFriendGroupList():Xi({code:hi.CANNOT_FIND_MODULE})}},{key:"createFriendGroup",value:function(e){var t=this._getModule(8);return t?t.createFriendGroup(e):Xi({code:hi.CANNOT_FIND_MODULE})}},{key:"deleteFriendGroup",value:function(e){var t=this._getModule(8);return t?t.deleteFriendGroup(e):Xi({code:hi.CANNOT_FIND_MODULE})}},{key:"addToFriendGroup",value:function(e){var t=this._getModule(8);return t?t.addToFriendGroup(e):Xi({code:hi.CANNOT_FIND_MODULE})}},{key:"removeFromFriendGroup",value:function(e){var t=this._getModule(8);return t?t.removeFromFriendGroup(e):Xi({code:hi.CANNOT_FIND_MODULE})}},{key:"renameFriendGroup",value:function(e){var t=this._getModule(8);return t?t.renameFriendGroup(e):Xi({code:hi.CANNOT_FIND_MODULE})}},{key:"getGroupList",value:function(e){return this._getModule(7).getGroupList(e)}},{key:"getGroupProfile",value:function(e){return this._getModule(7).getGroupProfile(e)}},{key:"createGroup",value:function(e){return this._getModule(7).createGroup(e)}},{key:"dismissGroup",value:function(e){return this._getModule(7).dismissGroup(e)}},{key:"updateGroupProfile",value:function(e){return this._getModule(7).updateGroupProfile(e)}},{key:"joinGroup",value:function(e){return this._getModule(7).joinGroup(e)}},{key:"quitGroup",value:function(e){return this._getModule(7).quitGroup(e)}},{key:"searchGroupByID",value:function(e){return this._getModule(7).searchGroupByID(e)}},{key:"getGroupOnlineMemberCount",value:function(e){return this._getModule(7).getGroupOnlineMemberCount(e)}},{key:"changeGroupOwner",value:function(e){return this._getModule(7).changeGroupOwner(e)}},{key:"getGroupApplicationList",value:function(){return this._getModule(7).getGroupApplicationList()}},{key:"handleGroupApplication",value:function(e){return this._getModule(7).handleGroupApplication(e)}},{key:"initGroupAttributes",value:function(e){return this._getModule(7).initGroupAttributes(e)}},{key:"setGroupAttributes",value:function(e){return this._getModule(7).setGroupAttributes(e)}},{key:"deleteGroupAttributes",value:function(e){return this._getModule(7).deleteGroupAttributes(e)}},{key:"getGroupAttributes",value:function(e){return this._getModule(7).getGroupAttributes(e)}},{key:"setGroupCounters",value:function(e){return this._getModule(7).setGroupCounters(e)}},{key:"increaseGroupCounter",value:function(e){return this._getModule(7).increaseGroupCounter(e)}},{key:"decreaseGroupCounter",value:function(e){return this._getModule(7).decreaseGroupCounter(e)}},{key:"getGroupCounters",value:function(e){return this._getModule(7).getGroupCounters(e)}},{key:"getGroupMemberList",value:function(e){return this._getModule(9).getGroupMemberList(e)}},{key:"getGroupMemberProfile",value:function(e){return this._getModule(9).getGroupMemberProfile(e)}},{key:"addGroupMember",value:function(e){return this._getModule(9).addGroupMember(e)}},{key:"deleteGroupMember",value:function(e){return this._getModule(9).deleteGroupMember(e)}},{key:"setGroupMemberMuteTime",value:function(e){return this._getModule(9).setGroupMemberMuteTime(e)}},{key:"setGroupMemberRole",value:function(e){return this._getModule(9).setGroupMemberRole(e)}},{key:"setGroupMemberNameCard",value:function(e){return this._getModule(9).setGroupMemberNameCard(e)}},{key:"setGroupMemberCustomField",value:function(e){return this._getModule(9).setGroupMemberCustomField(e)}},{key:"markGroupMemberList",value:function(e){return this._getModule(9).markGroupMemberList(e)}},{key:"getJoinedCommunityList",value:function(){return this._getModule(10).getJoinedCommunityList()}},{key:"createTopicInCommunity",value:function(e){return this._getModule(10).createTopicInCommunity(e)}},{key:"deleteTopicFromCommunity",value:function(e){return this._getModule(10).deleteTopicFromCommunity(e)}},{key:"updateTopicProfile",value:function(e){return this._getModule(10).updateTopicProfile(e)}},{key:"getTopicList",value:function(e){return this._getModule(10).getTopicList(e)}}]),e}(),ws={login:1,logout:1,destroy:1,on:1,off:1,ready:1,setLogLevel:1,joinGroup:1,quitGroup:1,registerPlugin:1,getGroupOnlineMemberCount:1};function Ns(e,t){if(e.isReady()||1===ws[t])return!0;var n=e.getNotReadyReason(),o={code:n,message:"".concat(e.getErrorMessage(n)," | ").concat(t," | ").concat(e.getErrorMessage(hi.SDK_IS_NOT_READY))};return e.onError(o),o}var Ps={},Gs={create:function(e){var n=0,o=e.SDKAppID;if(He(o))n=o;else if(n=parseInt(o),isNaN(o))return Oe.e("".concat("TIM.create"," failed. Failed to parse the SDKAppID, please check the arguments")),null;if(n&&Ps[n])return Ps[n];Oe.l("".concat("TIM.create"));var i=new Rs(t(t({},e),{},{SDKAppID:n}));i.on(D.SDK_DESTROY,(function(e){Ps[e.data.SDKAppID]=null,delete Ps[e.data.SDKAppID]}));var r=function(e){var t=Object.create(null);return Object.keys(mn).forEach((function(n){if(e[n]){var o=new L;t[n]=function(){var t=Array.from(arguments);return o.use((function(t,o){var i=Ns(e,n);return!0===i?o():Xi(i)})).use((function(e,t){if(!0===xt(e,vn[n],n))return t()})).use((function(t,o){return e[n].apply(e,t)})),o.run(t)}}})),t}(i);return Ps[n]=r,vn.hookGetAPITips(i.getErrorMessage.bind(i)),Oe.l("".concat("TIM.create"," ok")),r}};return Gs.TYPES=A,Gs.EVENT=D,Gs.VERSION="2.27.6",Oe.l("TIM.VERSION:".concat(Gs.VERSION)),Gs}))}).call(this,n("ba7c")["default"],n("0ee4"))},"44d2":function(e,t,n){"use strict";var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.createInnerAudioContext=function(){return new u},n("bf0f"),n("6a54"),n("64aa"),n("5ef2"),n("2797"),n("c223"),n("aa9c"),n("5c47"),n("a1c1"),n("dd2b");var i=o(n("80b1")),r=o(n("efe5")),a=o(n("39d8")),s=o(n("ccb8")),c=["onCanplay","onPlay","onPause","onStop","onEnded","onTimeUpdate","onError","onWaiting","onSeeking","onSeeked"],u=function(){function e(){var t=this;(0,i.default)(this,e),(0,a.default)(this,"_audio",void 0),(0,a.default)(this,"_stoping",void 0),(0,a.default)(this,"startTime",void 0),(0,a.default)(this,"_events",void 0),(0,a.default)(this,"_src",void 0);var n=this._audio=new Audio;this._stoping=!1;["src","autoplay","loop","duration","currentTime","paused","volume"].forEach((function(e){Object.defineProperty(t,e,{set:"src"===e?function(e){return n.src=(0,s.default)(e),t._src=e,e}:function(t){return n[e]=t,t},get:"src"===e?function(){return t._src}:function(){return n[e]}})})),this.startTime=0,Object.defineProperty(this,"obeyMuteSwitch",{set:function(e){return!1},get:function(){return!1}}),Object.defineProperty(this,"buffered",{get:function(){var e=n.buffered;return e.length?e.end(e.length-1):0}}),this._events={},c.forEach((function(e){t._events[e]=[]})),n.addEventListener("loadedmetadata",(function(){var e=Number(t.startTime)||0;e>0&&(n.currentTime=e)}));var o=["canplay","pause","seeking","seeked","timeUpdate"];["canplay","play","pause","ended","timeUpdate","error","waiting","seeking","seeked"].forEach((function(e){n.addEventListener(e.toLowerCase(),(function(){t._stoping&&o.indexOf(e)>=0||t._events["on".concat(e.substr(0,1).toUpperCase()).concat(e.substr(1))].forEach((function(e){e()}))}),!1)}))}return(0,r.default)(e,[{key:"play",value:function(){this._stoping=!1,this._audio.play()}},{key:"pause",value:function(){this._audio.pause()}},{key:"stop",value:function(){this._stoping=!0,this._audio.pause(),this._audio.currentTime=0,this._events.onStop.forEach((function(e){e()}))}},{key:"seek",value:function(e){this._stoping=!1,e=Number(e),"number"!==typeof e||isNaN(e)||(this._audio.currentTime=e)}},{key:"destroy",value:function(){this.stop()}}]),e}();c.forEach((function(e){u.prototype[e]=function(t){"function"===typeof t&&this._events[e].push(t)}})),["offCanplay","offPlay","offPause","offStop","offEnded","offTimeUpdate","offError","offWaiting","offSeeking","offSeeked"].forEach((function(e){u.prototype[e]=function(t){var n=this._events[e.replace("off","on")],o=n.indexOf(t);o>=0&&n.splice(o,1)}}))},4626:function(e,t,n){"use strict";var o=n("8bdb"),i=n("036b").includes,r=n("af9e"),a=n("1cb5"),s=r((function(){return!Array(1).includes()}));o({target:"Array",proto:!0,forced:s},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")},"46ac":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.isCallbackApi=p,t.isContextApi=d,t.isSyncApi=f,t.isTaskApi=function(e){return-1!==c.indexOf(e)},t.promisify=function(e,t){if(!g(e)||!(0,o.isFn)(t))return t;return function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return(0,o.isFn)(n.success)||(0,o.isFn)(n.fail)||(0,o.isFn)(n.complete)?(0,i.wrapperReturnValue)(e,i.invokeApi.apply(void 0,[e,t,n].concat(a))):(0,i.wrapperReturnValue)(e,h(new Promise((function(o,r){i.invokeApi.apply(void 0,[e,t,Object.assign({},n,{success:o,fail:r})].concat(a))}))))}},t.shouldPromise=g,n("5c47"),n("0506"),n("5ef2"),n("bf0f"),n("c223");var o=n("1ffa"),i=n("eff8"),r=/^\$|Window$|WindowStyle$|sendHostEvent|sendNativeEvent|restoreGlobal|requireGlobal|getCurrentSubNVue|getMenuButtonBoundingClientRect|^report|interceptors|Interceptor$|getSubNVueById|requireNativePlugin|upx2px|hideKeyboard|canIUse|^create|Sync$|Manager$|base64ToArrayBuffer|arrayBufferToBase64|getLocale|setLocale|invokePushCallback|getWindowInfo|getDeviceInfo|getAppBaseInfo|getSystemSetting|getAppAuthorizeSetting|initUTS|requireUTS|registerUTS/,a=/^create|Manager$/,s=["createBLEConnection"],c=["request","downloadFile","uploadFile","connectSocket"],u=["createBLEConnection","createPushMessage"],l=/^on|^off/;function d(e){return a.test(e)&&-1===s.indexOf(e)}function f(e){return r.test(e)&&-1===u.indexOf(e)}function p(e){return l.test(e)&&"onPush"!==e}function h(e){return e.then((function(e){return[null,e]})).catch((function(e){return[e]}))}function g(e){return!(d(e)||f(e)||p(e))}Promise.prototype.finally||(Promise.prototype.finally=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))})},"470d":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("0398")),r=o(n("552d")),a={name:"RichText",props:{nodes:{type:[Array,String],default:function(){return[]}}},watch:{nodes:function(e){this._renderNodes(e)}},mounted:function(){this._renderNodes(this.nodes)},methods:{_renderNodes:function(e){var t="",n=this;while(n)!t&&(t=n.$options._scopeId),n=n.$parent;var o=!!this.$listeners.itemclick;if(this._isMounted){"string"===typeof e&&(e=(0,i.default)(e));var a=(0,r.default)(e,document.createDocumentFragment(),t,o&&this.triggerItemClick);a.appendChild(this.$refs.sensor.$el);var s=this.$refs.content;s.innerHTML="",s.appendChild(a)}},_updateView:function(){window.dispatchEvent(new CustomEvent("updateview"))},triggerItemClick:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.$trigger("itemclick",e,t)}}};t.default=a},"471d":function(e,t,n){"use strict";var o=n("e7e3");e.exports=function(){var e=o(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},"472b":function(e,t,n){var o=n("7aa6"),i=n("fdca"),r=n("77cd"),a=n("1faa"),s=n("9360").CONFIGURABLE,c=n("97cf"),u=n("7b05"),l=u.enforce,d=u.get,f=Object.defineProperty,p=a&&!o((function(){return 8!==f((function(){}),"length",{value:8}).length})),h=String(String).split("String"),g=e.exports=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!r(e,"name")||s&&e.name!==t)&&(a?f(e,"name",{value:t,configurable:!0}):e.name=t),p&&n&&r(n,"arity")&&e.length!==n.arity&&f(e,"length",{value:n.arity});try{n&&r(n,"constructor")&&n.constructor?a&&f(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(i){}var o=l(e);return r(o,"source")||(o.source=h.join("string"==typeof t?t:"")),e};Function.prototype.toString=g((function(){return i(this)&&d(this).source||c(this)}),"toString")},"472be":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={rate:{value:1,count:5,disabled:!1,size:18,inactiveColor:"#b2b2b2",activeColor:"#FA3534",gutter:4,minCount:1,allowHalf:!1,activeIcon:"star-fill",inactiveIcon:"star",touchable:!0}}},4733:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(Array.isArray(e))return(0,o.default)(e)};var o=function(e){return e&&e.__esModule?e:{default:e}}(n("8d0b"))},"473f":function(e,t,n){"use strict";var o=n("8bdb"),i=n("9a51").left,r=n("2b04"),a=n("0173"),s=n("db06"),c=!s&&a>79&&a<83,u=c||!r("reduce");o({target:"Array",proto:!0,forced:u},{reduce:function(e){var t=arguments.length;return i(this,e,t,t>1?arguments[1]:void 0)}})},4743:function(e,t,n){var o=n("8394");e.exports=function(e,t){var n=o.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}},"474f":function(e,t,n){"use strict";var o="object"==typeof document&&document.all;e.exports="undefined"==typeof o&&void 0!==o?function(e){return"function"==typeof e||e===o}:function(e){return"function"==typeof e}},"47d6":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={sticky:{offsetTop:0,customNavHeight:0,disabled:!1,bgColor:"transparent",zIndex:"",index:""}}},4809:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("uni-scroll-view",e._g({},e.$listeners),[n("div",{ref:"wrap",staticClass:"uni-scroll-view"},[n("div",{ref:"main",staticClass:"uni-scroll-view",style:{"overflow-x":e.scrollX?"auto":"hidden","overflow-y":e.scrollY?"auto":"hidden"}},[n("div",{ref:"content",staticClass:"uni-scroll-view-content"},[e.refresherEnabled?n("div",{ref:"refresherinner",staticClass:"uni-scroll-view-refresher",style:{"background-color":e.refresherBackground,height:e.refresherHeight+"px"}},["none"!==e.refresherDefaultStyle?n("div",{staticClass:"uni-scroll-view-refresh"},[n("div",{staticClass:"uni-scroll-view-refresh-inner"},["pulling"==e.refreshState?n("svg",{key:"refresh__icon",staticClass:"uni-scroll-view-refresh__icon",style:{transform:"rotate("+e.refreshRotate+"deg)"},attrs:{fill:"#2BD009",width:"24",height:"24",viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}}),n("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}})]):e._e(),"refreshing"==e.refreshState?n("svg",{key:"refresh__spinner",staticClass:"uni-scroll-view-refresh__spinner",attrs:{width:"24",height:"24",viewBox:"25 25 50 50"}},[n("circle",{staticStyle:{color:"#2bd009"},attrs:{cx:"50",cy:"50",r:"20",fill:"none","stroke-width":"3"}})]):e._e()])]):e._e(),"none"==e.refresherDefaultStyle?e._t("refresher"):e._e()],2):e._e(),e._t("default")],2)])])])},i=[]},4819:function(e,t,n){"use strict";n.r(t);var o=n("35d5"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},4825:function(e,t,n){var o=n("d10a"),i=n("7aa6"),r=n("fdca"),a=n("720d"),s=n("c86b"),c=n("97cf"),u=function(){},l=[],d=s("Reflect","construct"),f=/^\s*(?:class|function)\b/,p=o(f.exec),h=!f.exec(u),g=function(e){if(!r(e))return!1;try{return d(u,l,e),!0}catch(t){return!1}},_=function(e){if(!r(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return h||!!p(f,c(e))}catch(t){return!0}};_.sham=!0,e.exports=!d||i((function(){var e;return g(g.call)||!g(Object)||!g((function(){e=!0}))||e}))?_:g},"497b":function(e,t,n){"use strict";var o=n("1aad");e.exports=function(e){var t=+e;return t!==t||0===t?0:o(t)}},4984:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.createPageMixin=function(){return{created:function(){var e=(0,i.decodedQuery)(this.$route.query);(0,a.default)(this,e),(0,r.callPageHook)(this,"onLoad",e),(0,r.callPageHook)(this,"onShow")}}};var i=n("1ffa"),r=n("e0f3"),a=o(n("3487a"))},"49a5":function(e,t,n){var o=n("8394"),i=n("a030"),r=o["__core-js_shared__"]||i("__core-js_shared__",{});e.exports=r},"49fc":function(e,t,n){"use strict";var o=n("bb80"),i=/[^\0-\u007E]/,r=/[.\u3002\uFF0E\uFF61]/g,a="Overflow: input needs wider integers to process",s=RangeError,c=o(r.exec),u=Math.floor,l=String.fromCharCode,d=o("".charCodeAt),f=o([].join),p=o([].push),h=o("".replace),g=o("".split),_=o("".toLowerCase),v=function(e){return e+22+75*(e<26)},m=function(e,t,n){var o=0;e=n?u(e/700):e>>1,e+=u(e/t);while(e>455)e=u(e/35),o+=36;return u(o+36*e/(e+38))},y=function(e){var t=[];e=function(e){var t=[],n=0,o=e.length;while(n<o){var i=d(e,n++);if(i>=55296&&i<=56319&&n<o){var r=d(e,n++);56320===(64512&r)?p(t,((1023&i)<<10)+(1023&r)+65536):(p(t,i),n--)}else p(t,i)}return t}(e);var n,o,i=e.length,r=128,c=0,h=72;for(n=0;n<e.length;n++)o=e[n],o<128&&p(t,l(o));var g=t.length,_=g;g&&p(t,"-");while(_<i){var y=2147483647;for(n=0;n<e.length;n++)o=e[n],o>=r&&o<y&&(y=o);var M=_+1;if(y-r>u((2147483647-c)/M))throw new s(a);for(c+=(y-r)*M,r=y,n=0;n<e.length;n++){if(o=e[n],o<r&&++c>2147483647)throw new s(a);if(o===r){var I=c,C=36;while(1){var b=C<=h?1:C>=h+26?26:C-h;if(I<b)break;var T=I-b,S=36-b;p(t,l(v(b+T%S))),I=u(T/S),C+=36}p(t,l(v(I))),h=m(c,M,_===g),c=0,_++}}c++,r++}return f(t,"")};e.exports=function(e){var t,n,o=[],a=g(h(_(e),r,"."),".");for(t=0;t<a.length;t++)n=a[t],p(o,c(i,n)?"xn--"+y(n):n);return f(o,".")}},"4a90":function(e,t,n){var o,i,r,a=n("bdbb").default;(function(s,c,u){"object"===a(t)?e.exports=t=c(n("5e74"),n("7f5d"),n("4f3e"),n("734e"),n("f794")):(i=[n("5e74"),n("7f5d"),n("4f3e"),n("734e"),n("f794")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))})(0,(function(e){return function(){var t=e,n=t.lib,o=n.BlockCipher,i=t.algo,r=16,a=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],s=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]],c={pbox:[],sbox:[]};function u(e,t){var n=t>>24&255,o=t>>16&255,i=t>>8&255,r=255&t,a=e.sbox[0][n]+e.sbox[1][o];return a^=e.sbox[2][i],a+=e.sbox[3][r],a}function l(e,t,n){for(var o,i=t,a=n,s=0;s<r;++s)i^=e.pbox[s],a=u(e,i)^a,o=i,i=a,a=o;return o=i,i=a,a=o,a^=e.pbox[r],i^=e.pbox[17],{left:i,right:a}}var d=i.Blowfish=o.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4;(function(e,t,n){for(var o=0;o<4;o++){e.sbox[o]=[];for(var i=0;i<256;i++)e.sbox[o][i]=s[o][i]}for(var r=0,c=0;c<18;c++)e.pbox[c]=a[c]^t[r],r++,r>=n&&(r=0);for(var u=0,d=0,f=0,p=0;p<18;p+=2)f=l(e,u,d),u=f.left,d=f.right,e.pbox[p]=u,e.pbox[p+1]=d;for(var h=0;h<4;h++)for(var g=0;g<256;g+=2)f=l(e,u,d),u=f.left,d=f.right,e.sbox[h][g]=u,e.sbox[h][g+1]=d})(c,t,n)}},encryptBlock:function(e,t){var n=l(c,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},decryptBlock:function(e,t){var n=function(e,t,n){for(var o,i=t,r=n,a=17;a>1;--a)i^=e.pbox[a],r=u(e,i)^r,o=i,i=r,r=o;return o=i,i=r,r=o,r^=e.pbox[1],i^=e.pbox[0],{left:i,right:r}}(c,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},blockSize:2,keySize:4,ivSize:2});t.Blowfish=o._createHelper(d)}(),e.Blowfish}))},"4afb":function(e,t,n){"use strict";var o=n("5057").IteratorPrototype,i=n("e37c"),r=n("0b5a"),a=n("181d"),s=n("799d"),c=function(){return this};e.exports=function(e,t,n,u){var l=t+" Iterator";return e.prototype=i(o,{next:r(+!u,n)}),a(e,l,!1,!0),s[l]=c,e}},"4b1f":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={input:{value:"",type:"text",fixed:!1,disabled:!1,disabledColor:"#f5f7fa",clearable:!1,password:!1,maxlength:-1,placeholder:null,placeholderClass:"input-placeholder",placeholderStyle:"color: #c0c4cc",showWordLimit:!1,confirmType:"done",confirmHold:!1,holdKeyboard:!1,focus:!1,autoBlur:!1,disableDefaultPadding:!1,cursor:-1,cursorSpacing:30,selectionStart:-1,selectionEnd:-1,adjustPosition:!0,inputAlign:"left",fontSize:"15px",color:"#303133",prefixIcon:"",prefixIconStyle:"",suffixIcon:"",suffixIconStyle:"",border:"surround",readonly:!1,shape:"square",formatter:null}}},"4bad":function(e,t,n){"use strict";(function(e,o){var i=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.chooseFile=function(e,t){var n=e.count,i=e.sourceType,u=e.type,f=e.extension;d&&(document.body.removeChild(d),d=null);d=(0,s.default)({count:n,sourceType:i,type:u,extension:f}),document.body.appendChild(d),d.addEventListener("change",(function(e){for(var o=[],i=e.target.files.length,a=function(t){var i=e.target.files[t],a=void 0;Object.defineProperty(i,"path",{get:function(){return a=a||(0,r.fileToUrl)(i),a}}),t<n&&o.push(i)},s=0;s<i;s++)a(s);var c={errMsg:"chooseFile:ok",get tempFilePaths(){return o.map((function(e){var t=e.path;return t}))},tempFiles:o};l(t,c)})),d.click(),c.interact.getStatus()||o.warn("".concat((0,a.t)("uni.chooseFile.notUserActivation")))},n("fd3c"),n("6a54"),n("aa9c");var r=n("2c6f"),a=n("1909"),s=i(n("f5a2")),c=n("c47d"),u=e,l=u.invokeCallbackHandler,d=null}).call(this,n("ef66"),n("ba7c")["default"])},"4c53":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.uni=void 0,n("bf0f"),n("2797");var i=o(n("bf4d")),r=n("591c"),a=n("46ac"),s=o(n("6e8c")),c=Object.create(null);t.uni=c,i.default.forEach((function(e){s.default[e]?c[e]=(0,a.promisify)(e,(0,r.wrapper)(e,s.default[e])):c[e]=(0,r.wrapperUnimplemented)(e)}))},"4c77":function(e,t,n){"use strict";var o,i,r,a=n("7aa6"),s=n("fdca"),c=n("1ae3"),u=n("849d"),l=n("8a29"),d=n("27cc"),f=n("29d5"),p=n("3a4b"),h=f("iterator"),g=!1;[].keys&&(r=[].keys(),"next"in r?(i=l(l(r)),i!==Object.prototype&&(o=i)):g=!0);var _=!c(o)||a((function(){var e={};return o[h].call(e)!==e}));_?o={}:p&&(o=u(o)),s(o[h])||d(o,h,(function(){return this})),e.exports={IteratorPrototype:o,BUGGY_SAFARI_ITERATORS:g}},"4d16":function(e,t,n){"use strict";var o=n("ae5c"),i=n("bb80"),r=n("7e41"),a=n("1099"),s=n("1fc1"),c=n("3242"),u=i([].push),l=function(e){var t=1===e,n=2===e,i=3===e,l=4===e,d=6===e,f=7===e,p=5===e||d;return function(h,g,_,v){for(var m,y,M=a(h),I=r(M),C=s(I),b=o(g,_),T=0,S=v||c,E=t?S(h,C):n||f?S(h,0):void 0;C>T;T++)if((p||T in I)&&(m=I[T],y=b(m,T,M),e))if(t)E[T]=y;else if(y)switch(e){case 3:return!0;case 5:return m;case 6:return T;case 2:u(E,m)}else switch(e){case 4:return!1;case 7:u(E,m)}return d?-1:i||l?l:E}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},"4d79":function(e,t,n){"use strict";n.r(t),function(e){
/*!
 * vue-i18n v8.28.2 
 * (c) 2022 kazuya kawaguchi
 * Released under the MIT License.
 */
var n=["compactDisplay","currency","currencyDisplay","currencySign","localeMatcher","notation","numberingSystem","signDisplay","style","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"],o=["dateStyle","timeStyle","calendar","localeMatcher","hour12","hourCycle","timeZone","formatMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function i(t,n){"undefined"!==typeof e&&(e.warn("[vue-i18n] "+t),n&&e.warn(n.stack))}var r=Array.isArray;function a(e){return null!==e&&"object"===typeof e}function s(e){return"boolean"===typeof e}function c(e){return"string"===typeof e}var u=Object.prototype.toString;function l(e){return"[object Object]"===u.call(e)}function d(e){return null===e||void 0===e}function f(e){return"function"===typeof e}function p(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];var n=null,o=null;return 1===e.length?a(e[0])||r(e[0])?o=e[0]:"string"===typeof e[0]&&(n=e[0]):2===e.length&&("string"===typeof e[0]&&(n=e[0]),(a(e[1])||r(e[1]))&&(o=e[1])),{locale:n,params:o}}function h(e){return JSON.parse(JSON.stringify(e))}function g(e,t){return!!~e.indexOf(t)}var _=Object.prototype.hasOwnProperty;function v(e,t){return _.call(e,t)}function m(e){for(var t=arguments,n=Object(e),o=1;o<arguments.length;o++){var i=t[o];if(void 0!==i&&null!==i){var r=void 0;for(r in i)v(i,r)&&(a(i[r])?n[r]=m(n[r],i[r]):n[r]=i[r])}}return n}function y(e,t){if(e===t)return!0;var n=a(e),o=a(t);if(!n||!o)return!n&&!o&&String(e)===String(t);try{var i=r(e),s=r(t);if(i&&s)return e.length===t.length&&e.every((function(e,n){return y(e,t[n])}));if(i||s)return!1;var c=Object.keys(e),u=Object.keys(t);return c.length===u.length&&c.every((function(n){return y(e[n],t[n])}))}catch(l){return!1}}function M(e){return null!=e&&Object.keys(e).forEach((function(t){"string"==typeof e[t]&&(e[t]=function(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}(e[t]))})),e}var I={name:"i18n",functional:!0,props:{tag:{type:[String,Boolean,Object],default:"span"},path:{type:String,required:!0},locale:{type:String},places:{type:[Array,Object]}},render:function(e,t){var n=t.data,o=t.parent,i=t.props,r=t.slots,a=o.$i18n;if(a){var s=i.path,c=i.locale,u=i.places,l=r(),d=a.i(s,c,function(e){var t;for(t in e)if("default"!==t)return!1;return Boolean(t)}(l)||u?function(e,t){var n=t?function(e){0;return Array.isArray(e)?e.reduce(b,{}):Object.assign({},e)}(t):{};if(!e)return n;e=e.filter((function(e){return e.tag||""!==e.text.trim()}));var o=e.every(T);0;return e.reduce(o?C:b,n)}(l.default,u):l),f=i.tag&&!0!==i.tag||!1===i.tag?i.tag:"span";return f?e(f,n,d):d}}};function C(e,t){return t.data&&t.data.attrs&&t.data.attrs.place&&(e[t.data.attrs.place]=t),e}function b(e,t,n){return e[n]=t,e}function T(e){return Boolean(e.data&&e.data.attrs&&e.data.attrs.place)}var S,E={name:"i18n-n",functional:!0,props:{tag:{type:[String,Boolean,Object],default:"span"},value:{type:Number,required:!0},format:{type:[String,Object]},locale:{type:String}},render:function(e,t){var o=t.props,i=t.parent,r=t.data,s=i.$i18n;if(!s)return null;var u=null,l=null;c(o.format)?u=o.format:a(o.format)&&(o.format.key&&(u=o.format.key),l=Object.keys(o.format).reduce((function(e,t){var i;return g(n,t)?Object.assign({},e,(i={},i[t]=o.format[t],i)):e}),null));var d=o.locale||s.locale,f=s._ntp(o.value,d,u,l),p=f.map((function(e,t){var n,o=r.scopedSlots&&r.scopedSlots[e.type];return o?o((n={},n[e.type]=e.value,n.index=t,n.parts=f,n)):e.value})),h=o.tag&&!0!==o.tag||!1===o.tag?o.tag:"span";return h?e(h,{attrs:r.attrs,class:r["class"],staticClass:r.staticClass},p):p}};function k(e,t,n){L(e,n)&&O(e,t,n)}function D(e,t,n,o){if(L(e,n)){var i=n.context.$i18n;(function(e,t){var n=t.context;return e._locale===n.$i18n.locale})(e,n)&&y(t.value,t.oldValue)&&y(e._localeMessage,i.getLocaleMessage(i.locale))||O(e,t,n)}}function A(e,t,n,o){var r=n.context;if(r){var a=n.context.$i18n||{};t.modifiers.preserve||a.preserveDirectiveContent||(e.textContent=""),e._vt=void 0,delete e["_vt"],e._locale=void 0,delete e["_locale"],e._localeMessage=void 0,delete e["_localeMessage"]}else i("Vue instance does not exists in VNode context")}function L(e,t){var n=t.context;return n?!!n.$i18n||(i("VueI18n instance does not exists in Vue instance"),!1):(i("Vue instance does not exists in VNode context"),!1)}function O(e,t,n){var o,r,a=t.value,s=function(e){var t,n,o,i;c(e)?t=e:l(e)&&(t=e.path,n=e.locale,o=e.args,i=e.choice);return{path:t,locale:n,args:o,choice:i}}(a),u=s.path,d=s.locale,f=s.args,p=s.choice;if(u||d||f)if(u){var h=n.context;e._vt=e.textContent=null!=p?(o=h.$i18n).tc.apply(o,[u,p].concat(R(d,f))):(r=h.$i18n).t.apply(r,[u].concat(R(d,f))),e._locale=h.$i18n.locale,e._localeMessage=h.$i18n.getLocaleMessage(h.$i18n.locale)}else i("`path` is required in v-t directive");else i("value type not supported")}function R(e,t){var n=[];return e&&n.push(e),t&&(Array.isArray(t)||l(t))&&n.push(t),n}function w(e,t){void 0===t&&(t={bridge:!1}),w.installed=!0,S=e;S.version&&Number(S.version.split(".")[0]);(function(e){e.prototype.hasOwnProperty("$i18n")||Object.defineProperty(e.prototype,"$i18n",{get:function(){return this._i18n}}),e.prototype.$t=function(e){var t=[],n=arguments.length-1;while(n-- >0)t[n]=arguments[n+1];var o=this.$i18n;return o._t.apply(o,[e,o.locale,o._getMessages(),this].concat(t))},e.prototype.$tc=function(e,t){var n=[],o=arguments.length-2;while(o-- >0)n[o]=arguments[o+2];var i=this.$i18n;return i._tc.apply(i,[e,i.locale,i._getMessages(),this,t].concat(n))},e.prototype.$te=function(e,t){var n=this.$i18n;return n._te(e,n.locale,n._getMessages(),t)},e.prototype.$d=function(e){var t,n=[],o=arguments.length-1;while(o-- >0)n[o]=arguments[o+1];return(t=this.$i18n).d.apply(t,[e].concat(n))},e.prototype.$n=function(e){var t,n=[],o=arguments.length-1;while(o-- >0)n[o]=arguments[o+1];return(t=this.$i18n).n.apply(t,[e].concat(n))}})(S),S.mixin(function(e){function t(){this!==this.$root&&this.$options.__INTLIFY_META__&&this.$el&&this.$el.setAttribute("data-intlify",this.$options.__INTLIFY_META__)}return void 0===e&&(e=!1),e?{mounted:t}:{beforeCreate:function(){var e=this.$options;if(e.i18n=e.i18n||(e.__i18nBridge||e.__i18n?{}:null),e.i18n)if(e.i18n instanceof $){if(e.__i18nBridge||e.__i18n)try{var t=e.i18n&&e.i18n.messages?e.i18n.messages:{},n=e.__i18nBridge||e.__i18n;n.forEach((function(e){t=m(t,JSON.parse(e))})),Object.keys(t).forEach((function(n){e.i18n.mergeLocaleMessage(n,t[n])}))}catch(c){0}this._i18n=e.i18n,this._i18nWatcher=this._i18n.watchI18nData()}else if(l(e.i18n)){var o=this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof $?this.$root.$i18n:null;if(o&&(e.i18n.root=this.$root,e.i18n.formatter=o.formatter,e.i18n.fallbackLocale=o.fallbackLocale,e.i18n.formatFallbackMessages=o.formatFallbackMessages,e.i18n.silentTranslationWarn=o.silentTranslationWarn,e.i18n.silentFallbackWarn=o.silentFallbackWarn,e.i18n.pluralizationRules=o.pluralizationRules,e.i18n.preserveDirectiveContent=o.preserveDirectiveContent),e.__i18nBridge||e.__i18n)try{var i=e.i18n&&e.i18n.messages?e.i18n.messages:{},r=e.__i18nBridge||e.__i18n;r.forEach((function(e){i=m(i,JSON.parse(e))})),e.i18n.messages=i}catch(c){0}var a=e.i18n,s=a.sharedMessages;s&&l(s)&&(e.i18n.messages=m(e.i18n.messages,s)),this._i18n=new $(e.i18n),this._i18nWatcher=this._i18n.watchI18nData(),(void 0===e.i18n.sync||e.i18n.sync)&&(this._localeWatcher=this.$i18n.watchLocale()),o&&o.onComponentInstanceCreated(this._i18n)}else 0;else this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof $?this._i18n=this.$root.$i18n:e.parent&&e.parent.$i18n&&e.parent.$i18n instanceof $&&(this._i18n=e.parent.$i18n)},beforeMount:function(){var e=this.$options;e.i18n=e.i18n||(e.__i18nBridge||e.__i18n?{}:null),e.i18n?(e.i18n instanceof $||l(e.i18n))&&(this._i18n.subscribeDataChanging(this),this._subscribing=!0):(this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof $||e.parent&&e.parent.$i18n&&e.parent.$i18n instanceof $)&&(this._i18n.subscribeDataChanging(this),this._subscribing=!0)},mounted:t,beforeDestroy:function(){if(this._i18n){var e=this;this.$nextTick((function(){e._subscribing&&(e._i18n.unsubscribeDataChanging(e),delete e._subscribing),e._i18nWatcher&&(e._i18nWatcher(),e._i18n.destroyVM(),delete e._i18nWatcher),e._localeWatcher&&(e._localeWatcher(),delete e._localeWatcher)}))}}}}(t.bridge)),S.directive("t",{bind:k,update:D,unbind:A}),S.component(I.name,I),S.component(E.name,E);var n=S.config.optionMergeStrategies;n.i18n=function(e,t){return void 0===t?e:t}}var N=function(){this._caches=Object.create(null)};N.prototype.interpolate=function(e,t){if(!t)return[e];var n=this._caches[e];return n||(n=function(e){var t=[],n=0,o="";while(n<e.length){var i=e[n++];if("{"===i){o&&t.push({type:"text",value:o}),o="";var r="";i=e[n++];while(void 0!==i&&"}"!==i)r+=i,i=e[n++];var a="}"===i,s=P.test(r)?"list":a&&G.test(r)?"named":"unknown";t.push({value:r,type:s})}else"%"===i?"{"!==e[n]&&(o+=i):o+=i}return o&&t.push({type:"text",value:o}),t}(e),this._caches[e]=n),function(e,t){var n=[],o=0,i=Array.isArray(t)?"list":a(t)?"named":"unknown";if("unknown"===i)return n;while(o<e.length){var r=e[o];switch(r.type){case"text":n.push(r.value);break;case"list":n.push(t[parseInt(r.value,10)]);break;case"named":"named"===i&&n.push(t[r.value]);break;case"unknown":0;break}o++}return n}(n,t)};var P=/^(?:\d)+/,G=/^(?:\w)+/;var U=[];U[0]={ws:[0],ident:[3,0],"[":[4],eof:[7]},U[1]={ws:[1],".":[2],"[":[4],eof:[7]},U[2]={ws:[2],ident:[3,0],0:[3,0],number:[3,0]},U[3]={ident:[3,0],0:[3,0],number:[3,0],ws:[1,1],".":[2,1],"[":[4,1],eof:[7,1]},U[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],eof:8,else:[4,0]},U[5]={"'":[4,0],eof:8,else:[5,0]},U[6]={'"':[4,0],eof:8,else:[6,0]};var x=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function F(e){if(void 0===e||null===e)return"eof";var t=e.charCodeAt(0);switch(t){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"ident";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return"ident"}function q(e){var t=e.trim();return("0"!==e.charAt(0)||!isNaN(e))&&(function(e){return x.test(e)}(t)?function(e){var t=e.charCodeAt(0),n=e.charCodeAt(e.length-1);return t!==n||34!==t&&39!==t?e:e.slice(1,-1)}(t):"*"+t)}var B=function(){this._cache=Object.create(null)};B.prototype.parsePath=function(e){var t=this._cache[e];return t||(t=function(e){var t,n,o,i,r,a,s,c=[],u=-1,l=0,d=0,f=[];function p(){var t=e[u+1];if(5===l&&"'"===t||6===l&&'"'===t)return u++,o="\\"+t,f[0](),!0}f[1]=function(){void 0!==n&&(c.push(n),n=void 0)},f[0]=function(){void 0===n?n=o:n+=o},f[2]=function(){f[0](),d++},f[3]=function(){if(d>0)d--,l=4,f[0]();else{if(d=0,void 0===n)return!1;if(n=q(n),!1===n)return!1;f[1]()}};while(null!==l)if(u++,t=e[u],"\\"!==t||!p()){if(i=F(t),s=U[l],r=s[i]||s["else"]||8,8===r)return;if(l=r[0],a=f[r[1]],a&&(o=r[2],o=void 0===o?t:o,!1===a()))return;if(7===l)return c}}(e),t&&(this._cache[e]=t)),t||[]},B.prototype.getPathValue=function(e,t){if(!a(e))return null;var n=this.parsePath(t);if(0===n.length)return null;var o=n.length,i=e,r=0;while(r<o){var s=i[n[r]];if(void 0===s||null===s)return null;i=s,r++}return i};var V,H=/<\/?[\w\s="/.':;#-\/]+>/,j=/(?:@(?:\.[a-zA-Z]+)?:(?:[\w\-_|./]+|\([\w\-_:|./]+\)))/g,K=/^@(?:\.([a-zA-Z]+))?:/,W=/[()]/g,Y={upper:function(e){return e.toLocaleUpperCase()},lower:function(e){return e.toLocaleLowerCase()},capitalize:function(e){return""+e.charAt(0).toLocaleUpperCase()+e.substr(1)}},z=new N,$=function(e){var t=this;void 0===e&&(e={}),!S&&"undefined"!==typeof window&&window.Vue&&w(window.Vue);var n=e.locale||"en-US",o=!1!==e.fallbackLocale&&(e.fallbackLocale||"en-US"),i=e.messages||{},r=e.dateTimeFormats||e.datetimeFormats||{},a=e.numberFormats||{};this._vm=null,this._formatter=e.formatter||z,this._modifiers=e.modifiers||{},this._missing=e.missing||null,this._root=e.root||null,this._sync=void 0===e.sync||!!e.sync,this._fallbackRoot=void 0===e.fallbackRoot||!!e.fallbackRoot,this._fallbackRootWithEmptyString=void 0===e.fallbackRootWithEmptyString||!!e.fallbackRootWithEmptyString,this._formatFallbackMessages=void 0!==e.formatFallbackMessages&&!!e.formatFallbackMessages,this._silentTranslationWarn=void 0!==e.silentTranslationWarn&&e.silentTranslationWarn,this._silentFallbackWarn=void 0!==e.silentFallbackWarn&&!!e.silentFallbackWarn,this._dateTimeFormatters={},this._numberFormatters={},this._path=new B,this._dataListeners=new Set,this._componentInstanceCreatedListener=e.componentInstanceCreatedListener||null,this._preserveDirectiveContent=void 0!==e.preserveDirectiveContent&&!!e.preserveDirectiveContent,this.pluralizationRules=e.pluralizationRules||{},this._warnHtmlInMessage=e.warnHtmlInMessage||"off",this._postTranslation=e.postTranslation||null,this._escapeParameterHtml=e.escapeParameterHtml||!1,"__VUE_I18N_BRIDGE__"in e&&(this.__VUE_I18N_BRIDGE__=e.__VUE_I18N_BRIDGE__),this.getChoiceIndex=function(e,n){var o=Object.getPrototypeOf(t);if(o&&o.getChoiceIndex){var i=o.getChoiceIndex;return i.call(t,e,n)}return t.locale in t.pluralizationRules?t.pluralizationRules[t.locale].apply(t,[e,n]):function(e,t){return e=Math.abs(e),2===t?e?e>1?1:0:1:e?Math.min(e,2):0}(e,n)},this._exist=function(e,n){return!(!e||!n)&&(!d(t._path.getPathValue(e,n))||!!e[n])},"warn"!==this._warnHtmlInMessage&&"error"!==this._warnHtmlInMessage||Object.keys(i).forEach((function(e){t._checkLocaleMessage(e,t._warnHtmlInMessage,i[e])})),this._initVM({locale:n,fallbackLocale:o,messages:i,dateTimeFormats:r,numberFormats:a})},X={vm:{configurable:!0},messages:{configurable:!0},dateTimeFormats:{configurable:!0},numberFormats:{configurable:!0},availableLocales:{configurable:!0},locale:{configurable:!0},fallbackLocale:{configurable:!0},formatFallbackMessages:{configurable:!0},missing:{configurable:!0},formatter:{configurable:!0},silentTranslationWarn:{configurable:!0},silentFallbackWarn:{configurable:!0},preserveDirectiveContent:{configurable:!0},warnHtmlInMessage:{configurable:!0},postTranslation:{configurable:!0},sync:{configurable:!0}};$.prototype._checkLocaleMessage=function(t,n,o){var a=function(t,n,o,s){if(l(o))Object.keys(o).forEach((function(e){var i=o[e];l(i)?(s.push(e),s.push("."),a(t,n,i,s),s.pop(),s.pop()):(s.push(e),a(t,n,i,s),s.pop())}));else if(r(o))o.forEach((function(e,o){l(e)?(s.push("["+o+"]"),s.push("."),a(t,n,e,s),s.pop(),s.pop()):(s.push("["+o+"]"),a(t,n,e,s),s.pop())}));else if(c(o)){var u=H.test(o);if(u){var d="Detected HTML in message '"+o+"' of keypath '"+s.join("")+"' at '"+n+"'. Consider component interpolation with '<i18n>' to avoid XSS. See https://bit.ly/2ZqJzkp";"warn"===t?i(d):"error"===t&&function(t,n){"undefined"!==typeof e&&(e.error("[vue-i18n] "+t),n&&e.error(n.stack))}(d)}}};a(n,t,o,[])},$.prototype._initVM=function(e){var t=S.config.silent;S.config.silent=!0,this._vm=new S({data:e,__VUE18N__INSTANCE__:!0}),S.config.silent=t},$.prototype.destroyVM=function(){this._vm.$destroy()},$.prototype.subscribeDataChanging=function(e){this._dataListeners.add(e)},$.prototype.unsubscribeDataChanging=function(e){(function(e,t){if(e.delete(t));})(this._dataListeners,e)},$.prototype.watchI18nData=function(){var e=this;return this._vm.$watch("$data",(function(){var t=function(e){var t=[];return e.forEach((function(e){return t.push(e)})),t}(e._dataListeners),n=t.length;while(n--)S.nextTick((function(){t[n]&&t[n].$forceUpdate()}))}),{deep:!0})},$.prototype.watchLocale=function(e){if(e){if(!this.__VUE_I18N_BRIDGE__)return null;var t=this,n=this._vm;return this.vm.$watch("locale",(function(o){n.$set(n,"locale",o),t.__VUE_I18N_BRIDGE__&&e&&(e.locale.value=o),n.$forceUpdate()}),{immediate:!0})}if(!this._sync||!this._root)return null;var o=this._vm;return this._root.$i18n.vm.$watch("locale",(function(e){o.$set(o,"locale",e),o.$forceUpdate()}),{immediate:!0})},$.prototype.onComponentInstanceCreated=function(e){this._componentInstanceCreatedListener&&this._componentInstanceCreatedListener(e,this)},X.vm.get=function(){return this._vm},X.messages.get=function(){return h(this._getMessages())},X.dateTimeFormats.get=function(){return h(this._getDateTimeFormats())},X.numberFormats.get=function(){return h(this._getNumberFormats())},X.availableLocales.get=function(){return Object.keys(this.messages).sort()},X.locale.get=function(){return this._vm.locale},X.locale.set=function(e){this._vm.$set(this._vm,"locale",e)},X.fallbackLocale.get=function(){return this._vm.fallbackLocale},X.fallbackLocale.set=function(e){this._localeChainCache={},this._vm.$set(this._vm,"fallbackLocale",e)},X.formatFallbackMessages.get=function(){return this._formatFallbackMessages},X.formatFallbackMessages.set=function(e){this._formatFallbackMessages=e},X.missing.get=function(){return this._missing},X.missing.set=function(e){this._missing=e},X.formatter.get=function(){return this._formatter},X.formatter.set=function(e){this._formatter=e},X.silentTranslationWarn.get=function(){return this._silentTranslationWarn},X.silentTranslationWarn.set=function(e){this._silentTranslationWarn=e},X.silentFallbackWarn.get=function(){return this._silentFallbackWarn},X.silentFallbackWarn.set=function(e){this._silentFallbackWarn=e},X.preserveDirectiveContent.get=function(){return this._preserveDirectiveContent},X.preserveDirectiveContent.set=function(e){this._preserveDirectiveContent=e},X.warnHtmlInMessage.get=function(){return this._warnHtmlInMessage},X.warnHtmlInMessage.set=function(e){var t=this,n=this._warnHtmlInMessage;if(this._warnHtmlInMessage=e,n!==e&&("warn"===e||"error"===e)){var o=this._getMessages();Object.keys(o).forEach((function(e){t._checkLocaleMessage(e,t._warnHtmlInMessage,o[e])}))}},X.postTranslation.get=function(){return this._postTranslation},X.postTranslation.set=function(e){this._postTranslation=e},X.sync.get=function(){return this._sync},X.sync.set=function(e){this._sync=e},$.prototype._getMessages=function(){return this._vm.messages},$.prototype._getDateTimeFormats=function(){return this._vm.dateTimeFormats},$.prototype._getNumberFormats=function(){return this._vm.numberFormats},$.prototype._warnDefault=function(e,t,n,o,i,r){if(!d(n))return n;if(this._missing){var a=this._missing.apply(null,[e,t,o,i]);if(c(a))return a}else 0;if(this._formatFallbackMessages){var s=p.apply(void 0,i);return this._render(t,r,s.params,t)}return t},$.prototype._isFallbackRoot=function(e){return(this._fallbackRootWithEmptyString?!e:d(e))&&!d(this._root)&&this._fallbackRoot},$.prototype._isSilentFallbackWarn=function(e){return this._silentFallbackWarn instanceof RegExp?this._silentFallbackWarn.test(e):this._silentFallbackWarn},$.prototype._isSilentFallback=function(e,t){return this._isSilentFallbackWarn(t)&&(this._isFallbackRoot()||e!==this.fallbackLocale)},$.prototype._isSilentTranslationWarn=function(e){return this._silentTranslationWarn instanceof RegExp?this._silentTranslationWarn.test(e):this._silentTranslationWarn},$.prototype._interpolate=function(e,t,n,o,i,a,s){if(!t)return null;var u,p=this._path.getPathValue(t,n);if(r(p)||l(p))return p;if(d(p)){if(!l(t))return null;if(u=t[n],!c(u)&&!f(u))return null}else{if(!c(p)&&!f(p))return null;u=p}return c(u)&&(u.indexOf("@:")>=0||u.indexOf("@.")>=0)&&(u=this._link(e,t,u,o,"raw",a,s)),this._render(u,i,a,n)},$.prototype._link=function(e,t,n,o,i,a,s){var c=n,u=c.match(j);for(var l in u)if(u.hasOwnProperty(l)){var d=u[l],f=d.match(K),p=f[0],h=f[1],_=d.replace(p,"").replace(W,"");if(g(s,_))return c;s.push(_);var v=this._interpolate(e,t,_,o,"raw"===i?"string":i,"raw"===i?void 0:a,s);if(this._isFallbackRoot(v)){if(!this._root)throw Error("unexpected error");var m=this._root.$i18n;v=m._translate(m._getMessages(),m.locale,m.fallbackLocale,_,o,i,a)}v=this._warnDefault(e,_,v,o,r(a)?a:[a],i),this._modifiers.hasOwnProperty(h)?v=this._modifiers[h](v):Y.hasOwnProperty(h)&&(v=Y[h](v)),s.pop(),c=v?c.replace(d,v):c}return c},$.prototype._createMessageContext=function(e,t,n,o){var i=this,s=r(e)?e:[],c=a(e)?e:{},u=this._getMessages(),l=this.locale;return{list:function(e){return s[e]},named:function(e){return c[e]},values:e,formatter:t,path:n,messages:u,locale:l,linked:function(e){return i._interpolate(l,u[l]||{},e,null,o,void 0,[e])}}},$.prototype._render=function(e,t,n,o){if(f(e))return e(this._createMessageContext(n,this._formatter||z,o,t));var i=this._formatter.interpolate(e,n,o);return i||(i=z.interpolate(e,n,o)),"string"!==t||c(i)?i:i.join("")},$.prototype._appendItemToChain=function(e,t,n){var o=!1;return g(e,t)||(o=!0,t&&(o="!"!==t[t.length-1],t=t.replace(/!/g,""),e.push(t),n&&n[t]&&(o=n[t]))),o},$.prototype._appendLocaleToChain=function(e,t,n){var o,i=t.split("-");do{var r=i.join("-");o=this._appendItemToChain(e,r,n),i.splice(-1,1)}while(i.length&&!0===o);return o},$.prototype._appendBlockToChain=function(e,t,n){for(var o=!0,i=0;i<t.length&&s(o);i++){var r=t[i];c(r)&&(o=this._appendLocaleToChain(e,r,n))}return o},$.prototype._getLocaleChain=function(e,t){if(""===e)return[];this._localeChainCache||(this._localeChainCache={});var n=this._localeChainCache[e];if(!n){t||(t=this.fallbackLocale),n=[];var o,i=[e];while(r(i))i=this._appendBlockToChain(n,i,t);o=r(t)?t:a(t)?t["default"]?t["default"]:null:t,i=c(o)?[o]:o,i&&this._appendBlockToChain(n,i,null),this._localeChainCache[e]=n}return n},$.prototype._translate=function(e,t,n,o,i,r,a){for(var s,c=this._getLocaleChain(t,n),u=0;u<c.length;u++){var l=c[u];if(s=this._interpolate(l,e[l],o,i,r,a,[o]),!d(s))return s}return null},$.prototype._t=function(e,t,n,o){var i,r=[],a=arguments.length-4;while(a-- >0)r[a]=arguments[a+4];if(!e)return"";var s=p.apply(void 0,r);this._escapeParameterHtml&&(s.params=M(s.params));var c=s.locale||t,u=this._translate(n,c,this.fallbackLocale,e,o,"string",s.params);if(this._isFallbackRoot(u)){if(!this._root)throw Error("unexpected error");return(i=this._root).$t.apply(i,[e].concat(r))}return u=this._warnDefault(c,e,u,o,r,"string"),this._postTranslation&&null!==u&&void 0!==u&&(u=this._postTranslation(u,e)),u},$.prototype.t=function(e){var t,n=[],o=arguments.length-1;while(o-- >0)n[o]=arguments[o+1];return(t=this)._t.apply(t,[e,this.locale,this._getMessages(),null].concat(n))},$.prototype._i=function(e,t,n,o,i){var r=this._translate(n,t,this.fallbackLocale,e,o,"raw",i);if(this._isFallbackRoot(r)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.i(e,t,i)}return this._warnDefault(t,e,r,o,[i],"raw")},$.prototype.i=function(e,t,n){return e?(c(t)||(t=this.locale),this._i(e,t,this._getMessages(),null,n)):""},$.prototype._tc=function(e,t,n,o,i){var r,a=[],s=arguments.length-5;while(s-- >0)a[s]=arguments[s+5];if(!e)return"";void 0===i&&(i=1);var c={count:i,n:i},u=p.apply(void 0,a);return u.params=Object.assign(c,u.params),a=null===u.locale?[u.params]:[u.locale,u.params],this.fetchChoice((r=this)._t.apply(r,[e,t,n,o].concat(a)),i)},$.prototype.fetchChoice=function(e,t){if(!e||!c(e))return null;var n=e.split("|");return t=this.getChoiceIndex(t,n.length),n[t]?n[t].trim():e},$.prototype.tc=function(e,t){var n,o=[],i=arguments.length-2;while(i-- >0)o[i]=arguments[i+2];return(n=this)._tc.apply(n,[e,this.locale,this._getMessages(),null,t].concat(o))},$.prototype._te=function(e,t,n){var o=[],i=arguments.length-3;while(i-- >0)o[i]=arguments[i+3];var r=p.apply(void 0,o).locale||t;return this._exist(n[r],e)},$.prototype.te=function(e,t){return this._te(e,this.locale,this._getMessages(),t)},$.prototype.getLocaleMessage=function(e){return h(this._vm.messages[e]||{})},$.prototype.setLocaleMessage=function(e,t){"warn"!==this._warnHtmlInMessage&&"error"!==this._warnHtmlInMessage||this._checkLocaleMessage(e,this._warnHtmlInMessage,t),this._vm.$set(this._vm.messages,e,t)},$.prototype.mergeLocaleMessage=function(e,t){"warn"!==this._warnHtmlInMessage&&"error"!==this._warnHtmlInMessage||this._checkLocaleMessage(e,this._warnHtmlInMessage,t),this._vm.$set(this._vm.messages,e,m("undefined"!==typeof this._vm.messages[e]&&Object.keys(this._vm.messages[e]).length?Object.assign({},this._vm.messages[e]):{},t))},$.prototype.getDateTimeFormat=function(e){return h(this._vm.dateTimeFormats[e]||{})},$.prototype.setDateTimeFormat=function(e,t){this._vm.$set(this._vm.dateTimeFormats,e,t),this._clearDateTimeFormat(e,t)},$.prototype.mergeDateTimeFormat=function(e,t){this._vm.$set(this._vm.dateTimeFormats,e,m(this._vm.dateTimeFormats[e]||{},t)),this._clearDateTimeFormat(e,t)},$.prototype._clearDateTimeFormat=function(e,t){for(var n in t){var o=e+"__"+n;this._dateTimeFormatters.hasOwnProperty(o)&&delete this._dateTimeFormatters[o]}},$.prototype._localizeDateTime=function(e,t,n,o,i,r){for(var a=t,s=o[a],c=this._getLocaleChain(t,n),u=0;u<c.length;u++){var l=c[u];if(s=o[l],a=l,!d(s)&&!d(s[i]))break}if(d(s)||d(s[i]))return null;var f,p=s[i];if(r)f=new Intl.DateTimeFormat(a,Object.assign({},p,r));else{var h=a+"__"+i;f=this._dateTimeFormatters[h],f||(f=this._dateTimeFormatters[h]=new Intl.DateTimeFormat(a,p))}return f.format(e)},$.prototype._d=function(e,t,n,o){if(!n){var i=o?new Intl.DateTimeFormat(t,o):new Intl.DateTimeFormat(t);return i.format(e)}var r=this._localizeDateTime(e,t,this.fallbackLocale,this._getDateTimeFormats(),n,o);if(this._isFallbackRoot(r)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.d(e,n,t)}return r||""},$.prototype.d=function(e){var t=[],n=arguments.length-1;while(n-- >0)t[n]=arguments[n+1];var i=this.locale,r=null,s=null;return 1===t.length?(c(t[0])?r=t[0]:a(t[0])&&(t[0].locale&&(i=t[0].locale),t[0].key&&(r=t[0].key)),s=Object.keys(t[0]).reduce((function(e,n){var i;return g(o,n)?Object.assign({},e,(i={},i[n]=t[0][n],i)):e}),null)):2===t.length&&(c(t[0])&&(r=t[0]),c(t[1])&&(i=t[1])),this._d(e,i,r,s)},$.prototype.getNumberFormat=function(e){return h(this._vm.numberFormats[e]||{})},$.prototype.setNumberFormat=function(e,t){this._vm.$set(this._vm.numberFormats,e,t),this._clearNumberFormat(e,t)},$.prototype.mergeNumberFormat=function(e,t){this._vm.$set(this._vm.numberFormats,e,m(this._vm.numberFormats[e]||{},t)),this._clearNumberFormat(e,t)},$.prototype._clearNumberFormat=function(e,t){for(var n in t){var o=e+"__"+n;this._numberFormatters.hasOwnProperty(o)&&delete this._numberFormatters[o]}},$.prototype._getNumberFormatter=function(e,t,n,o,i,r){for(var a=t,s=o[a],c=this._getLocaleChain(t,n),u=0;u<c.length;u++){var l=c[u];if(s=o[l],a=l,!d(s)&&!d(s[i]))break}if(d(s)||d(s[i]))return null;var f,p=s[i];if(r)f=new Intl.NumberFormat(a,Object.assign({},p,r));else{var h=a+"__"+i;f=this._numberFormatters[h],f||(f=this._numberFormatters[h]=new Intl.NumberFormat(a,p))}return f},$.prototype._n=function(e,t,n,o){if(!$.availabilities.numberFormat)return"";if(!n){var i=o?new Intl.NumberFormat(t,o):new Intl.NumberFormat(t);return i.format(e)}var r=this._getNumberFormatter(e,t,this.fallbackLocale,this._getNumberFormats(),n,o),a=r&&r.format(e);if(this._isFallbackRoot(a)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.n(e,Object.assign({},{key:n,locale:t},o))}return a||""},$.prototype.n=function(e){var t=[],o=arguments.length-1;while(o-- >0)t[o]=arguments[o+1];var i=this.locale,r=null,s=null;return 1===t.length?c(t[0])?r=t[0]:a(t[0])&&(t[0].locale&&(i=t[0].locale),t[0].key&&(r=t[0].key),s=Object.keys(t[0]).reduce((function(e,o){var i;return g(n,o)?Object.assign({},e,(i={},i[o]=t[0][o],i)):e}),null)):2===t.length&&(c(t[0])&&(r=t[0]),c(t[1])&&(i=t[1])),this._n(e,i,r,s)},$.prototype._ntp=function(e,t,n,o){if(!$.availabilities.numberFormat)return[];if(!n){var i=o?new Intl.NumberFormat(t,o):new Intl.NumberFormat(t);return i.formatToParts(e)}var r=this._getNumberFormatter(e,t,this.fallbackLocale,this._getNumberFormats(),n,o),a=r&&r.formatToParts(e);if(this._isFallbackRoot(a)){if(!this._root)throw Error("unexpected error");return this._root.$i18n._ntp(e,t,n,o)}return a||[]},Object.defineProperties($.prototype,X),Object.defineProperty($,"availabilities",{get:function(){if(!V){var e="undefined"!==typeof Intl;V={dateTimeFormat:e&&"undefined"!==typeof Intl.DateTimeFormat,numberFormat:e&&"undefined"!==typeof Intl.NumberFormat}}return V}}),$.install=w,$.version="8.28.2",t["default"]=$}.call(this,n("ba7c")["default"])},"4d8f":function(e,t,n){"use strict";var o=n("7ddb"),i=n("1fc1"),r=n("497b"),a=o.aTypedArray,s=o.exportTypedArrayMethod;s("at",(function(e){var t=a(this),n=i(t),o=r(e),s=o>=0?o:n+o;return s<0||s>=n?void 0:t[s]}))},"4db2":function(e,t,n){"use strict";var o=n("8bdb"),i=n("9f69"),r=n("af9e"),a=n("efa5"),s=n("e7e3"),c=n("e34c"),u=n("c435"),l=n("5dfa"),d=a.ArrayBuffer,f=a.DataView,p=f.prototype,h=i(d.prototype.slice),g=i(p.getUint8),_=i(p.setUint8),v=r((function(){return!new d(2).slice(1,void 0).byteLength}));o({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:v},{slice:function(e,t){if(h&&void 0===t)return h(s(this),e);var n=s(this).byteLength,o=c(e,n),i=c(void 0===t?n:t,n),r=new(l(this,d))(u(i-o)),a=new f(this),p=new f(r),v=0;while(o<i)_(p,v++,g(a,o++));return r}})},"4e22":function(e,t,n){"use strict";n.r(t);var o=n("470d"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},"4e2d":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={checkbox:{name:"",shape:"",size:"",checkbox:!1,disabled:"",activeColor:"",inactiveColor:"",iconSize:"",iconColor:"",label:"",labelSize:"",labelColor:"",labelDisabled:""}}},"4e43":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.hideKeyboard=function(){var e=document.activeElement;!e||"TEXTAREA"!==e.tagName&&"INPUT"!==e.tagName||e.blur()}},"4e86":function(e,t,n){"use strict";(function(e,o){n("6a54");var i=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasContext=void 0,t.canvasGetImageData=function(e,t){var n=e.canvasId,o=e.x,i=e.y,r=e.width,a=e.height,s=(0,d.getCurrentPageId)();if(!s)return void(0,f.invoke)(t,{errMsg:"canvasGetImageData:fail"});var c=h.push((function(e){var n=e.data;n&&n.length&&(e.data=new Uint8ClampedArray(n));(0,f.invoke)(t,e)}));g(n,s,"getImageData",{x:o,y:i,width:r,height:a,callbackId:c})},t.canvasPutImageData=function(e,t){var n=e.canvasId,o=e.data,i=e.x,r=e.y,a=e.width,s=e.height,c=(0,d.getCurrentPageId)();if(!c)return void(0,f.invoke)(t,{errMsg:"canvasPutImageData:fail"});var u=h.push((function(e){(0,f.invoke)(t,e)}));o=Array.prototype.slice.call(o);g(n,c,"putImageData",{data:o,x:i,y:r,width:a,height:s,compressed:void 0,callbackId:u})},t.canvasToTempFilePath=function(e,t){var n=e.x,o=void 0===n?0:n,i=e.y,r=void 0===i?0:i,a=e.width,s=e.height,c=e.destWidth,u=e.destHeight,l=e.canvasId,_=e.fileType,v=e.quality,m=(0,d.getCurrentPageId)();if(!m)return void(0,f.invoke)(t,{errMsg:"canvasToTempFilePath:fail"});var y=h.push((function(e){(0,f.invoke)(t,e)})),M="".concat(p.TEMP_PATH,"/canvas");g(l,m,"toTempFilePath",{x:o,y:r,width:a,height:s,destWidth:c,destHeight:u,fileType:_,quality:v,dirname:M,callbackId:y})},t.createCanvasContext=function(t,n){if(n)return new I(t,n.$page.id);var o=(0,d.getCurrentPageId)();if(o)return new I(t,o);e.emit("onError","createCanvasContext:fail")};var r=i(n("fcf3")),a=i(n("b7c7")),s=i(n("80b1")),c=i(n("efe5"));n("5c47"),n("e966"),n("f7a5"),n("c223"),n("fd3c"),n("0c26"),n("e838"),n("aa9c"),n("5ef2"),n("aa77"),n("bf0f"),n("9327"),n("64aa"),n("c9b5"),n("ab80"),n("d4b5"),n("2c10"),n("dfcf"),n("2797"),n("a1c1"),n("4db2"),n("9480"),n("4d8f"),n("7b97"),n("668a"),n("c5b7"),n("8ff5"),n("2378"),n("641a"),n("64e0"),n("cce3"),n("efba"),n("d009"),n("bd7d"),n("7edd"),n("d798"),n("f547"),n("5e54"),n("b60a"),n("8c18"),n("12973"),n("f991"),n("198e"),n("8557"),n("63b1"),n("1954"),n("1cf1");var u=n("1ffa"),l=i(n("cd07")),d=n("a745"),f=n("d2fd"),p=n("3bc7"),h=(0,l.default)("canvasEvent");function g(t,n,o,i){e.publishHandler(n+"-canvas-"+t,{canvasId:t,type:o,data:i},n)}e.subscribe("onCanvasMethodCallback",(function(e){var t=e.callbackId,n=e.data,o=h.pop(t);o&&o(n)}));var _={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:"#00000000"};function v(e){e=e||"#000000";var t=null;if(null!=(t=/^#([0-9|A-F|a-f]{6})$/.exec(e))){var n=parseInt(t[1].slice(0,2),16),i=parseInt(t[1].slice(2,4),16),r=parseInt(t[1].slice(4),16);return[n,i,r,255]}if(null!=(t=/^#([0-9|A-F|a-f]{3})$/.exec(e))){var a=t[1].slice(0,1),s=t[1].slice(1,2),c=t[1].slice(2,3);return a=parseInt(a+a,16),s=parseInt(s+s,16),c=parseInt(c+c,16),[a,s,c,255]}if(null!=(t=/^rgb\((.+)\)$/.exec(e)))return t[1].split(",").map((function(e){return Math.min(255,parseInt(e.trim()))})).concat(255);if(null!=(t=/^rgba\((.+)\)$/.exec(e)))return t[1].split(",").map((function(e,t){return 3===t?Math.floor(255*parseFloat(e.trim())):Math.min(255,parseInt(e.trim()))}));var l=e.toLowerCase();if((0,u.hasOwn)(_,l)){t=/^#([0-9|A-F|a-f]{6,8})$/.exec(_[l]);var d=parseInt(t[1].slice(0,2),16),f=parseInt(t[1].slice(2,4),16),p=parseInt(t[1].slice(4,6),16),h=parseInt(t[1].slice(6,8),16);return h=h>=0?h:255,[d,f,p,h]}return o.error("unsupported color:"+e),[0,0,0,255]}function m(e,t){this.type="pattern",this.data=e,this.colorStop=t}var y=function(){function e(t,n){(0,s.default)(this,e),this.type=t,this.data=n,this.colorStop=[]}return(0,c.default)(e,[{key:"addColorStop",value:function(e,t){this.colorStop.push([e,v(t)])}}]),e}();function M(e){this.width=e}var I=function(){function e(t,n){(0,s.default)(this,e),this.id=t,this.pageId=n,this.actions=[],this.path=[],this.subpath=[],this.currentTransform=[],this.currentStepAnimates=[],this.drawingState=[],this.state={lineDash:[0,0],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:[0,0,0,0],font:"10px sans-serif",fontSize:10,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif"}}return(0,c.default)(e,[{key:"draw",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0,o=(0,a.default)(this.actions);this.actions=[],this.path=[],"function"===typeof n&&(e=h.push(n)),g(this.id,this.pageId,"actionsChanged",{actions:o,reserve:t,callbackId:e})}},{key:"createLinearGradient",value:function(e,t,n,o){return new y("linear",[e,t,n,o])}},{key:"createCircularGradient",value:function(e,t,n){return new y("radial",[e,t,n])}},{key:"createPattern",value:function(e,t){if(void 0===t)o.error("Failed to execute 'createPattern' on 'CanvasContext': 2 arguments required, but only 1 present.");else{if(!(["repeat","repeat-x","repeat-y","no-repeat"].indexOf(t)<0))return new m(e,t);o.error("Failed to execute 'createPattern' on 'CanvasContext': The provided type ('"+t+"') is not one of 'repeat', 'no-repeat', 'repeat-x', or 'repeat-y'.")}}},{key:"measureText",value:function(e){var t=this.state.font,n=0;return n=function(e,t){var n=document.createElement("canvas"),o=n.getContext("2d");return o.font=t,o.measureText(e).width||0}(e,t),new M(n)}},{key:"save",value:function(){this.actions.push({method:"save",data:[]}),this.drawingState.push(this.state)}},{key:"restore",value:function(){this.actions.push({method:"restore",data:[]}),this.state=this.drawingState.pop()||{lineDash:[0,0],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:[0,0,0,0],font:"10px sans-serif",fontSize:10,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif"}}},{key:"beginPath",value:function(){this.path=[],this.subpath=[],this.path.push({method:"beginPath",data:[]})}},{key:"moveTo",value:function(e,t){this.path.push({method:"moveTo",data:[e,t]}),this.subpath=[[e,t]]}},{key:"lineTo",value:function(e,t){0===this.path.length&&0===this.subpath.length?this.path.push({method:"moveTo",data:[e,t]}):this.path.push({method:"lineTo",data:[e,t]}),this.subpath.push([e,t])}},{key:"quadraticCurveTo",value:function(e,t,n,o){this.path.push({method:"quadraticCurveTo",data:[e,t,n,o]}),this.subpath.push([n,o])}},{key:"bezierCurveTo",value:function(e,t,n,o,i,r){this.path.push({method:"bezierCurveTo",data:[e,t,n,o,i,r]}),this.subpath.push([i,r])}},{key:"arc",value:function(e,t,n,o,i){var r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.path.push({method:"arc",data:[e,t,n,o,i,r]}),this.subpath.push([e,t])}},{key:"rect",value:function(e,t,n,o){this.path.push({method:"rect",data:[e,t,n,o]}),this.subpath=[[e,t]]}},{key:"arcTo",value:function(e,t,n,o,i){this.path.push({method:"arcTo",data:[e,t,n,o,i]}),this.subpath.push([n,o])}},{key:"clip",value:function(){this.actions.push({method:"clip",data:(0,a.default)(this.path)})}},{key:"closePath",value:function(){this.path.push({method:"closePath",data:[]}),this.subpath.length&&(this.subpath=[this.subpath.shift()])}},{key:"clearActions",value:function(){this.actions=[],this.path=[],this.subpath=[]}},{key:"getActions",value:function(){var e=(0,a.default)(this.actions);return this.clearActions(),e}},{key:"lineDashOffset",set:function(e){this.actions.push({method:"setLineDashOffset",data:[e]})}},{key:"globalCompositeOperation",set:function(e){this.actions.push({method:"setGlobalCompositeOperation",data:[e]})}},{key:"shadowBlur",set:function(e){this.actions.push({method:"setShadowBlur",data:[e]})}},{key:"shadowColor",set:function(e){this.actions.push({method:"setShadowColor",data:[e]})}},{key:"shadowOffsetX",set:function(e){this.actions.push({method:"setShadowOffsetX",data:[e]})}},{key:"shadowOffsetY",set:function(e){this.actions.push({method:"setShadowOffsetY",data:[e]})}},{key:"font",get:function(){return this.state.font},set:function(e){var t=this;this.state.font=e;var n=e.match(/^(([\w\-]+\s)*)(\d+r?px)(\/(\d+\.?\d*(r?px)?))?\s+(.*)/);if(n){var i=n[1].trim().split(/\s/),r=parseFloat(n[3]),a=n[7],s=[];i.forEach((function(e,n){["italic","oblique","normal"].indexOf(e)>-1?(s.push({method:"setFontStyle",data:[e]}),t.state.fontStyle=e):["bold","normal"].indexOf(e)>-1?(s.push({method:"setFontWeight",data:[e]}),t.state.fontWeight=e):0===n?(s.push({method:"setFontStyle",data:["normal"]}),t.state.fontStyle="normal"):1===n&&c()})),1===i.length&&c(),i=s.map((function(e){return e.data[0]})).join(" "),this.state.fontSize=r,this.state.fontFamily=a,this.actions.push({method:"setFont",data:["".concat(i," ").concat(r,"px ").concat(a)]})}else o.warn("Failed to set 'font' on 'CanvasContext': invalid format.");function c(){s.push({method:"setFontWeight",data:["normal"]}),t.state.fontWeight="normal"}}},{key:"fillStyle",set:function(e){this.setFillStyle(e)}},{key:"strokeStyle",set:function(e){this.setStrokeStyle(e)}},{key:"globalAlpha",set:function(e){e=Math.floor(255*parseFloat(e)),this.actions.push({method:"setGlobalAlpha",data:[e]})}},{key:"textAlign",set:function(e){this.actions.push({method:"setTextAlign",data:[e]})}},{key:"lineCap",set:function(e){this.actions.push({method:"setLineCap",data:[e]})}},{key:"lineJoin",set:function(e){this.actions.push({method:"setLineJoin",data:[e]})}},{key:"lineWidth",set:function(e){this.actions.push({method:"setLineWidth",data:[e]})}},{key:"miterLimit",set:function(e){this.actions.push({method:"setMiterLimit",data:[e]})}},{key:"textBaseline",set:function(e){this.actions.push({method:"setTextBaseline",data:[e]})}}]),e}();t.CanvasContext=I,[].concat(["scale","rotate","translate","setTransform","transform"],["drawImage","fillText","fill","stroke","fillRect","strokeRect","clearRect","strokeText"]).forEach((function(e){I.prototype[e]=function(e){switch(e){case"fill":case"stroke":return function(){this.actions.push({method:e+"Path",data:(0,a.default)(this.path)})};case"fillRect":return function(e,t,n,o){this.actions.push({method:"fillPath",data:[{method:"rect",data:[e,t,n,o]}]})};case"strokeRect":return function(e,t,n,o){this.actions.push({method:"strokePath",data:[{method:"rect",data:[e,t,n,o]}]})};case"fillText":case"strokeText":return function(t,n,o,i){var r=[t.toString(),n,o];"number"===typeof i&&r.push(i),this.actions.push({method:e,data:r})};case"drawImage":return function(t,n,o,i,r,a,s,c,u){var l;function d(e){return"number"===typeof e}void 0===u&&(a=n,s=o,c=i,u=r,n=void 0,o=void 0,i=void 0,r=void 0),l=d(n)&&d(o)&&d(i)&&d(r)?[t,a,s,c,u,n,o,i,r]:d(c)&&d(u)?[t,a,s,c,u]:[t,a,s],this.actions.push({method:e,data:l})};default:return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];this.actions.push({method:e,data:n})}}}(e)})),["setFillStyle","setTextAlign","setStrokeStyle","setGlobalAlpha","setShadow","setFontSize","setLineCap","setLineJoin","setLineWidth","setMiterLimit","setTextBaseline","setLineDash"].forEach((function(e){I.prototype[e]=function(e){switch(e){case"setFillStyle":case"setStrokeStyle":return function(t){"object"!==(0,r.default)(t)?this.actions.push({method:e,data:["normal",v(t)]}):this.actions.push({method:e,data:[t.type,t.data,t.colorStop]})};case"setGlobalAlpha":return function(t){t=Math.floor(255*parseFloat(t)),this.actions.push({method:e,data:[t]})};case"setShadow":return function(t,n,o,i){i=v(i),this.actions.push({method:e,data:[t,n,o,i]}),this.state.shadowBlur=o,this.state.shadowColor=i,this.state.shadowOffsetX=t,this.state.shadowOffsetY=n};case"setLineDash":return function(t,n){t=t||[0,0],n=n||0,this.actions.push({method:e,data:[t,n]}),this.state.lineDash=t};case"setFontSize":return function(t){this.state.font=this.state.font.replace(/\d+\.?\d*px/,t+"px"),this.state.fontSize=t,this.actions.push({method:e,data:[t]})};default:return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];this.actions.push({method:e,data:n})}}}(e)}))}).call(this,n("ef66"),n("ba7c")["default"])},"4e9b":function(e,t,n){"use strict";var o=n("6aa6"),i=n("f259"),r=n("181d");i("toStringTag"),r(o("Symbol"),"Symbol")},"4f04":function(e,t,n){"use strict";var o=n("af71");e.exports=o&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},"4f3e":function(e,t,n){var o,i,r,a=n("bdbb").default;(function(s,c){"object"===a(t)?e.exports=t=c(n("5e74")):(i=[n("5e74")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))})(0,(function(e){return function(t){var n=e,o=n.lib,i=o.WordArray,r=o.Hasher,a=n.algo,s=[];(function(){for(var e=0;e<64;e++)s[e]=4294967296*t.abs(t.sin(e+1))|0})();var c=a.MD5=r.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var o=t+n,i=e[o];e[o]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var r=this._hash.words,a=e[t+0],c=e[t+1],p=e[t+2],h=e[t+3],g=e[t+4],_=e[t+5],v=e[t+6],m=e[t+7],y=e[t+8],M=e[t+9],I=e[t+10],C=e[t+11],b=e[t+12],T=e[t+13],S=e[t+14],E=e[t+15],k=r[0],D=r[1],A=r[2],L=r[3];k=u(k,D,A,L,a,7,s[0]),L=u(L,k,D,A,c,12,s[1]),A=u(A,L,k,D,p,17,s[2]),D=u(D,A,L,k,h,22,s[3]),k=u(k,D,A,L,g,7,s[4]),L=u(L,k,D,A,_,12,s[5]),A=u(A,L,k,D,v,17,s[6]),D=u(D,A,L,k,m,22,s[7]),k=u(k,D,A,L,y,7,s[8]),L=u(L,k,D,A,M,12,s[9]),A=u(A,L,k,D,I,17,s[10]),D=u(D,A,L,k,C,22,s[11]),k=u(k,D,A,L,b,7,s[12]),L=u(L,k,D,A,T,12,s[13]),A=u(A,L,k,D,S,17,s[14]),D=u(D,A,L,k,E,22,s[15]),k=l(k,D,A,L,c,5,s[16]),L=l(L,k,D,A,v,9,s[17]),A=l(A,L,k,D,C,14,s[18]),D=l(D,A,L,k,a,20,s[19]),k=l(k,D,A,L,_,5,s[20]),L=l(L,k,D,A,I,9,s[21]),A=l(A,L,k,D,E,14,s[22]),D=l(D,A,L,k,g,20,s[23]),k=l(k,D,A,L,M,5,s[24]),L=l(L,k,D,A,S,9,s[25]),A=l(A,L,k,D,h,14,s[26]),D=l(D,A,L,k,y,20,s[27]),k=l(k,D,A,L,T,5,s[28]),L=l(L,k,D,A,p,9,s[29]),A=l(A,L,k,D,m,14,s[30]),D=l(D,A,L,k,b,20,s[31]),k=d(k,D,A,L,_,4,s[32]),L=d(L,k,D,A,y,11,s[33]),A=d(A,L,k,D,C,16,s[34]),D=d(D,A,L,k,S,23,s[35]),k=d(k,D,A,L,c,4,s[36]),L=d(L,k,D,A,g,11,s[37]),A=d(A,L,k,D,m,16,s[38]),D=d(D,A,L,k,I,23,s[39]),k=d(k,D,A,L,T,4,s[40]),L=d(L,k,D,A,a,11,s[41]),A=d(A,L,k,D,h,16,s[42]),D=d(D,A,L,k,v,23,s[43]),k=d(k,D,A,L,M,4,s[44]),L=d(L,k,D,A,b,11,s[45]),A=d(A,L,k,D,E,16,s[46]),D=d(D,A,L,k,p,23,s[47]),k=f(k,D,A,L,a,6,s[48]),L=f(L,k,D,A,m,10,s[49]),A=f(A,L,k,D,S,15,s[50]),D=f(D,A,L,k,_,21,s[51]),k=f(k,D,A,L,b,6,s[52]),L=f(L,k,D,A,h,10,s[53]),A=f(A,L,k,D,I,15,s[54]),D=f(D,A,L,k,c,21,s[55]),k=f(k,D,A,L,y,6,s[56]),L=f(L,k,D,A,E,10,s[57]),A=f(A,L,k,D,v,15,s[58]),D=f(D,A,L,k,T,21,s[59]),k=f(k,D,A,L,g,6,s[60]),L=f(L,k,D,A,C,10,s[61]),A=f(A,L,k,D,p,15,s[62]),D=f(D,A,L,k,M,21,s[63]),r[0]=r[0]+k|0,r[1]=r[1]+D|0,r[2]=r[2]+A|0,r[3]=r[3]+L|0},_doFinalize:function(){var e=this._data,n=e.words,o=8*this._nDataBytes,i=8*e.sigBytes;n[i>>>5]|=128<<24-i%32;var r=t.floor(o/4294967296),a=o;n[15+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),n[14+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,c=s.words,u=0;u<4;u++){var l=c[u];c[u]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return s},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,n,o,i,r,a){var s=e+(t&n|~t&o)+i+a;return(s<<r|s>>>32-r)+t}function l(e,t,n,o,i,r,a){var s=e+(t&o|n&~o)+i+a;return(s<<r|s>>>32-r)+t}function d(e,t,n,o,i,r,a){var s=e+(t^n^o)+i+a;return(s<<r|s>>>32-r)+t}function f(e,t,n,o,i,r,a){var s=e+(n^(t|~o))+i+a;return(s<<r|s>>>32-r)+t}n.MD5=r._createHelper(c),n.HmacMD5=r._createHmacHelper(c)}(Math),e.MD5}))},"4f9b":function(e,t,n){"use strict";var o=n("6a50");o("Float32",(function(e){return function(t,n,o){return e(this,t,n,o)}}))},"503c":function(e,t,n){"use strict";(function(e){n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("5c47"),n("a1c1");var o=n("1ffa"),i={mounted:function(){var e=this;this._toggleListeners("subscribe",this.id),this.$watch("id",(function(t,n){e._toggleListeners("unsubscribe",n,!0),e._toggleListeners("subscribe",t,!0)}))},beforeDestroy:function(){this._toggleListeners("unsubscribe",this.id),this._contextId&&this._toggleListeners("unsubscribe",this._contextId)},methods:{_toggleListeners:function(t,n,i){i&&!n||(0,o.isFn)(this._handleSubscribe)&&e[t](this.$page.id+"-"+this.$options.name.replace(/VUni([A-Z])/,"$1").toLowerCase()+"-"+n,this._handleSubscribe)},_getContextInfo:function(){var e="context-".concat(this._uid);return this._contextId||(this._toggleListeners("subscribe",e),this._contextId=e),{name:this.$options.name.replace(/VUni([A-Z])/,"$1").toLowerCase(),id:e,page:this.$page.id}}}};t.default=i}).call(this,n("b8be"))},5057:function(e,t,n){"use strict";var o,i,r,a=n("af9e"),s=n("474f"),c=n("1c06"),u=n("e37c"),l=n("c337"),d=n("81a9"),f=n("8c08"),p=n("a734"),h=f("iterator"),g=!1;[].keys&&(r=[].keys(),"next"in r?(i=l(l(r)),i!==Object.prototype&&(o=i)):g=!0);var _=!c(o)||a((function(){var e={};return o[h].call(e)!==e}));_?o={}:p&&(o=u(o)),s(o[h])||d(o,h,(function(){return this})),e.exports={IteratorPrototype:o,BUGGY_SAFARI_ITERATORS:g}},5075:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.makePhoneCall=void 0;var o={phoneNumber:{type:String,required:!0,validator:function(e){if(!e)return"makePhoneCall:fail parameter error: parameter.phoneNumber should not be empty String;"}}};t.makePhoneCall=o},50757:function(e,t,n){"use strict";var o=n("ae5c"),i=n("71e9"),r=n("e7e3"),a=n("52df"),s=n("81a7"),c=n("1fc1"),u=n("1297"),l=n("d67c"),d=n("5112"),f=n("7e91"),p=TypeError,h=function(e,t){this.stopped=e,this.result=t},g=h.prototype;e.exports=function(e,t,n){var _,v,m,y,M,I,C,b=n&&n.that,T=!(!n||!n.AS_ENTRIES),S=!(!n||!n.IS_RECORD),E=!(!n||!n.IS_ITERATOR),k=!(!n||!n.INTERRUPTED),D=o(t,b),A=function(e){return _&&f(_,"normal",e),new h(!0,e)},L=function(e){return T?(r(e),k?D(e[0],e[1],A):D(e[0],e[1])):k?D(e,A):D(e)};if(S)_=e.iterator;else if(E)_=e;else{if(v=d(e),!v)throw new p(a(e)+" is not iterable");if(s(v)){for(m=0,y=c(e);y>m;m++)if(M=L(e[m]),M&&u(g,M))return M;return new h(!1)}_=l(e,v)}I=S?e.next:_.next;while(!(C=i(I,_)).done){try{M=L(C.value)}catch(O){f(_,"throw",O)}if("object"==typeof M&&M&&u(g,M))return M}return new h(!1)}},"508d":function(e,t,n){var o=n("8394"),i=n("d953").f,r=n("d1a8"),a=n("27cc"),s=n("a030"),c=n("c199"),u=n("1535");e.exports=function(e,t){var n,l,d,f,p,h,g=e.target,_=e.global,v=e.stat;if(l=_?o:v?o[g]||s(g,{}):(o[g]||{}).prototype,l)for(d in t){if(p=t[d],e.dontCallGetSet?(h=i(l,d),f=h&&h.value):f=l[d],n=u(_?d:g+(v?".":"#")+d,e.forced),!n&&void 0!==f){if(typeof p==typeof f)continue;c(p,f)}(e.sham||f&&f.sham)&&r(p,"sham",!0),a(l,d,p,e)}}},5099:function(e,t,n){"use strict";n.r(t);var o=n("1827"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},"50d5":function(e,t,n){"use strict";var o=n("c215"),i=TypeError;e.exports=function(e){var t=o(e,"number");if("number"==typeof t)throw new i("Can't convert number to bigint");return BigInt(t)}},"50f0":function(e,t,n){"use strict";n.r(t);var o=n("d9eb");for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var r=n("828b"),a=Object(r["a"])(o["default"],void 0,void 0,!1,null,null,null,!1,void 0,void 0);t["default"]=a.exports},5112:function(e,t,n){"use strict";var o=n("8e02"),i=n("60bc"),r=n("1eb8"),a=n("799d"),s=n("8c08"),c=s("iterator");e.exports=function(e){if(!r(e))return i(e,c)||i(e,"@@iterator")||a[o(e)]}},5145:function(e,t,n){"use strict";var o=n("9f9e"),i=n("f660"),r=n("497b"),a=n("1fc1"),s=n("2b04"),c=Math.min,u=[].lastIndexOf,l=!!u&&1/[1].lastIndexOf(1,-0)<0,d=s("lastIndexOf"),f=l||!d;e.exports=f?function(e){if(l)return o(u,this,arguments)||0;var t=i(this),n=a(t);if(0===n)return-1;var s=n-1;for(arguments.length>1&&(s=c(s,r(arguments[1]))),s<0&&(s=n+s);s>=0;s--)if(s in t&&t[s]===e)return s||0;return-1}:u},5259:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("bf0f"),n("2797"),n("dc8a");var o={name:"WebView",props:{src:{type:String,default:""},fullscreen:{type:Boolean,default:!0}},watch:{src:function(e,t){this.iframe&&(this.iframe.src=this.$getRealPath(this.src))}},mounted:function(){var e=this;this.iframe=document.createElement("iframe"),Object.keys(this.$attrs).forEach((function(t){e.iframe[t]=e.$attrs[t]})),this.iframe.src=this.$getRealPath(this.src),this.fullscreen?document.body.appendChild(this.iframe):this.$refs.webviewContainer.appendChild(this.iframe),this._resize()},activated:function(){this.fullscreen&&(this.iframe.style.display="block")},deactivated:function(){this.fullscreen&&(this.iframe.style.display="none")},beforeDestroy:function(){this.fullscreen&&document.body.removeChild(this.iframe)},methods:{_resize:function(){if(this.fullscreen){var e=this.$el.getBoundingClientRect(),t=e.top,n=e.left,o=e.width,i=e.height;this.iframe.style.position="absolute",this.iframe.style.display="block",this.iframe.style.border=0,this.iframe.style.top=t+"px",this.iframe.style.left=n+"px",this.iframe.style.width=o+"px",this.iframe.style.height=i+"px"}else this.iframe.style.width=this.$refs.webviewContainer.style.width||"300px",this.iframe.style.height=this.$refs.webviewContainer.style.height||"150px"}}};t.default=o},"527f":function(e,t,n){var o,i,r,a=n("bdbb").default;n("aa9c"),n("f7a5"),function(s,c,u){"object"===a(t)?e.exports=t=c(n("5e74"),n("80a2")):(i=[n("5e74"),n("80a2")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))}(0,(function(e){return function(t){var n=e,o=n.lib,i=o.WordArray,r=o.Hasher,a=n.x64,s=a.Word,c=n.algo,u=[],l=[],d=[];(function(){for(var e=1,t=0,n=0;n<24;n++){u[e+5*t]=(n+1)*(n+2)/2%64;var o=t%5,i=(2*e+3*t)%5;e=o,t=i}for(e=0;e<5;e++)for(t=0;t<5;t++)l[e+5*t]=t+(2*e+3*t)%5*5;for(var r=1,a=0;a<24;a++){for(var c=0,f=0,p=0;p<7;p++){if(1&r){var h=(1<<p)-1;h<32?f^=1<<h:c^=1<<h-32}128&r?r=r<<1^113:r<<=1}d[a]=s.create(c,f)}})();var f=[];(function(){for(var e=0;e<25;e++)f[e]=s.create()})();var p=c.SHA3=r.extend({cfg:r.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,o=this.blockSize/2,i=0;i<o;i++){var r=e[t+2*i],a=e[t+2*i+1];r=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8);var s=n[i];s.high^=a,s.low^=r}for(var c=0;c<24;c++){for(var p=0;p<5;p++){for(var h=0,g=0,_=0;_<5;_++){s=n[p+5*_];h^=s.high,g^=s.low}var v=f[p];v.high=h,v.low=g}for(p=0;p<5;p++){var m=f[(p+4)%5],y=f[(p+1)%5],M=y.high,I=y.low;for(h=m.high^(M<<1|I>>>31),g=m.low^(I<<1|M>>>31),_=0;_<5;_++){s=n[p+5*_];s.high^=h,s.low^=g}}for(var C=1;C<25;C++){s=n[C];var b=s.high,T=s.low,S=u[C];S<32?(h=b<<S|T>>>32-S,g=T<<S|b>>>32-S):(h=T<<S-32|b>>>64-S,g=b<<S-32|T>>>64-S);var E=f[l[C]];E.high=h,E.low=g}var k=f[0],D=n[0];k.high=D.high,k.low=D.low;for(p=0;p<5;p++)for(_=0;_<5;_++){C=p+5*_,s=n[C];var A=f[C],L=f[(p+1)%5+5*_],O=f[(p+2)%5+5*_];s.high=A.high^~L.high&O.high,s.low=A.low^~L.low&O.low}s=n[0];var R=d[c];s.high^=R.high,s.low^=R.low}},_doFinalize:function(){var e=this._data,n=e.words,o=(this._nDataBytes,8*e.sigBytes),r=32*this.blockSize;n[o>>>5]|=1<<24-o%32,n[(t.ceil((o+1)/r)*r>>>5)-1]|=128,e.sigBytes=4*n.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,c=s/8,u=[],l=0;l<c;l++){var d=a[l],f=d.high,p=d.low;f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),u.push(p),u.push(f)}return new i.init(u,s)},clone:function(){for(var e=r.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});n.SHA3=r._createHelper(p),n.HmacSHA3=r._createHmacHelper(p)}(Math),e.SHA3}))},"52ac":function(e,t,n){"use strict";var o=n("71e9"),i=n("338c"),r=n("1297"),a=n("471d"),s=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in s||i(e,"flags")||!r(s,e)?t:o(a,e)}},"52b3":function(e,t,n){"use strict";n.r(t);var o=n("28eb"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},"52df":function(e,t,n){"use strict";var o=String;e.exports=function(e){try{return o(e)}catch(t){return"Object"}}},5306:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.chooseImage=void 0,n("64aa"),n("8f71"),n("bf0f"),n("4626");var o=["original","compressed"],i=["album","camera"],r={count:{type:Number,required:!1,default:9,validator:function(e,t){e<=0&&(t.count=9)}},sizeType:{type:[Array,String],required:!1,default:o,validator:function(e,t){e="string"===typeof e?[e]:e,e=e.filter((function(e){return o.includes(e)})),t.sizeType=e.length?e:o}},sourceType:{type:Array,required:!1,default:i,validator:function(e,t){e=e.filter((function(e){return i.includes(e)})),t.sourceType=e.length?e:i}},extension:{type:Array,default:["*"],validator:function(e,t){if(0===e.length)return"param extension should not be empty."}}};t.chooseImage=r},5330:function(e,t,n){"use strict";var o=n("1c06"),i=n("6aca");e.exports=function(e,t){o(t)&&"cause"in t&&i(e,"cause",t.cause)}},5358:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={countTo:{startVal:0,endVal:0,duration:2e3,autoplay:!0,decimals:0,useEasing:!0,decimal:".",color:"#606266",fontSize:22,bold:!1,separator:""}}},5359:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("64aa"),n("5ef2");var i=o(n("b0c5")),r={name:"PreviewImage",components:{imageView:i.default},props:{visible:{type:Boolean,default:!1},urls:{type:Array,default:function(){return[]}},current:{type:[String,Number],default:0}},data:function(){return{index:0}},watch:{visible:function(e){if(e){var t="number"===typeof this.current?this.current:this.urls.indexOf(this.current);this.index=t<0?0:t}}},mounted:function(){var e=this,t=0,n=0;this.$el.addEventListener("mousedown",(function(o){e.preventDefault=!1,t=o.clientX,n=o.clientY})),this.$el.addEventListener("mouseup",(function(o){(Math.abs(o.clientX-t)>20||Math.abs(o.clientY-n)>20)&&(e.preventDefault=!0)}))},methods:{_click:function(){this.preventDefault||this.$emit("close")}}};t.default=r},"538f":function(e,t,n){"use strict";(function(e){n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("5ef2"),n("bf0f"),n("2797"),n("c223"),n("5c47"),n("0506"),n("aa9c"),n("a1c1");var i=o(n("9291")),r=o(n("ccb8")),a=o(n("cc82")),s={forward:"&#xe600;",back:"&#xe601;",share:"&#xe602;",favorite:"&#xe604;",home:"&#xe605;",menu:"&#xe606;",close:"&#xe650;"},c={name:"PageHead",mixins:[a.default],props:{backButton:{type:Boolean,default:!0},backgroundColor:{type:String,default:function(){return"transparent"===this.type?"#000":"#F8F8F8"}},textColor:{type:String,default:"#fff"},titleText:{type:String,default:""},duration:{type:String,default:"0"},timingFunc:{type:String,default:""},loading:{type:Boolean,default:!1},titleSize:{type:String,default:"16px"},type:{default:"default",validator:function(e){return-1!==["default","transparent","float"].indexOf(e)}},coverage:{type:String,default:"132px"},buttons:{type:Array,default:function(){return[]}},searchInput:{type:[Object,Boolean],default:function(){return!1}},titleImage:{type:String,default:""},titlePenetrate:{type:Boolean,default:!1},shadow:{type:Object,default:function(){return{}}}},data:function(){return{focus:!1,text:"",composing:!1,showPlaceholder:!1}},computed:{btns:function(){var e=this,t=[],n={};return this.buttons.length&&this.buttons.forEach((function(o){var a=Object.assign({},o);if(a.fontSrc&&!a.fontFamily){var s,c=a.fontSrc=(0,r.default)(a.fontSrc);if(c in n)s=n[c];else{s="font".concat(Date.now()),n[c]=s;var u='@font-face{font-family: "'.concat(s,'";src: url("').concat(c,'") format("truetype")}');(0,i.default)(u,"uni-btn-font-"+s)}a.fontFamily=s}a.color="transparent"===e.type?"#fff":a.color||e.textColor;var l=a.fontSize||("transparent"===e.type||/\\u/.test(a.text)?"22px":"27px");/\d$/.test(l)&&(l+="px"),a.fontSize=l,a.fontWeight=a.fontWeight||"normal",t.push(a)})),t},headClass:function(){var e=this.shadow.colorType,t={"uni-page-head-transparent":"transparent"===this.type,"uni-page-head-titlePenetrate":this.titlePenetrate,"uni-page-head-shadow":e};return e&&(t["uni-page-head-shadow-".concat(e)]=e),t}},mounted:function(){var t=this;if(this.searchInput){var n=this.$refs.input;n.$watch("composing",(function(e){t.composing=e})),n.$watch("valueSync",(function(e){t.showPlaceholder=!!e})),this.searchInput.disabled?n.$el.addEventListener("click",(function(){e.emit("onNavigationBarSearchInputClicked","")})):(n.$refs.input.addEventListener("keyup",(function(n){"ENTER"===n.key.toUpperCase()&&e.emit("onNavigationBarSearchInputConfirmed",{text:t.text})})),n.$refs.input.addEventListener("focus",(function(){e.emit("onNavigationBarSearchInputFocusChanged",{focus:!0})})),n.$refs.input.addEventListener("blur",(function(){e.emit("onNavigationBarSearchInputFocusChanged",{focus:!1})})))}},methods:{_back:function(){1===getCurrentPages().length?uni.reLaunch({url:"/"}):uni.navigateBack({from:"backbutton"})},_onBtnClick:function(t){e.emit("onNavigationBarButtonTap",Object.assign({},this.btns[t],{index:t}))},_formatBtnFontText:function(e){return e.fontSrc&&e.fontFamily?e.text.replace("\\u","&#x"):s[e.type]?s[e.type]:e.text||""},_formatBtnStyle:function(e){var t={color:e.color,fontSize:e.fontSize,fontWeight:e.fontWeight};return e.fontFamily&&(t.fontFamily=e.fontFamily),t},_focus:function(){this.focus=!0},_blur:function(){this.focus=!1},_input:function(t){e.emit("onNavigationBarSearchInputChanged",{text:t})},_clearInput:function(){this.text="",this._input(this.text)}}};t.default=c}).call(this,n("ef66"))},"53f7":function(e,t,n){"use strict";var o=n("7658"),i=n("57e7");o("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},5472:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"uni-async-error",on:{click:this._onClick}},[this._v("\n  "+this._s(this.$$t("uni.async.error"))+"\n")])},i=[]},"549a":function(e,t,n){"use strict";n.r(t);var o=n("f2cf"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},"552d":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,n,o,c){return t.forEach((function(t){if((0,i.isPlainObject)(t))if((0,i.hasOwn)(t,"type")&&"node"!==t.type)"text"===t.type&&"string"===typeof t.text&&""!==t.text&&n.appendChild(document.createTextNode(function(e){return e.replace(/&(([a-zA-Z]+)|(#x{0,1}[\da-zA-Z]+));/gi,(function(e,t){if((0,i.hasOwn)(s,t)&&s[t])return s[t];if(/^#[0-9]{1,4}$/.test(t))return String.fromCharCode(t.slice(1));if(/^#x[0-9a-f]{1,4}$/i.test(t))return String.fromCharCode("0"+t.slice(1));var n=document.createElement("div");return n.innerHTML=e,n.innerText||n.textContent}))}(t.text)));else{if("string"!==typeof t.name||!t.name)return;var u=t.name.toLowerCase();if(!(0,i.hasOwn)(a,u))return;var l=document.createElement(u);if(!l)return;var d=t.attrs;if(o&&l.setAttribute(o,""),(0,i.isPlainObject)(d)){var f=a[u]||[];Object.keys(d).forEach((function(e){var t=d[e];switch(e){case"class":Array.isArray(t)&&(t=t.join(" "));case"style":l.setAttribute(e,t);break;default:-1!==f.indexOf(e)&&l.setAttribute(e,function(e,t,n){return"img"===e&&"src"===t?(0,r.default)(n):n}(u,e,t))}}))}(function(e,t,n){["a","img"].includes(e.name)&&n&&(t.setAttribute("onClick","return false;"),t.addEventListener("click",(function(t){n(t,{node:e}),t.stopPropagation()}),!0))})(t,l,c);var p=t.children;Array.isArray(p)&&p.length&&e(t.children,l,o,c),n.appendChild(l)}})),n},n("5c47"),n("a1c1"),n("0506"),n("f7a5"),n("bf0f"),n("2797"),n("dc8a"),n("5ef2"),n("4626");var i=n("1ffa"),r=o(n("ccb8")),a={a:"",abbr:"",address:"",article:"",aside:"",b:"",bdi:"",bdo:["dir"],big:"",blockquote:"",br:"",caption:"",center:"",cite:"",code:"",col:["span","width"],colgroup:["span","width"],dd:"",del:"",div:"",dl:"",dt:"",em:"",fieldset:"",font:"",footer:"",h1:"",h2:"",h3:"",h4:"",h5:"",h6:"",header:"",hr:"",i:"",img:["alt","src","height","width"],ins:"",label:"",legend:"",li:"",mark:"",nav:"",ol:["start","type"],p:"",pre:"",q:"",rt:"",ruby:"",s:"",section:"",small:"",span:"",strong:"",sub:"",sup:"",table:["width"],tbody:"",td:["colspan","height","rowspan","width"],tfoot:"",th:["colspan","height","rowspan","width"],thead:"",tr:["colspan","height","rowspan","width"],tt:"",u:"",ul:""},s={amp:"&",gt:">",lt:"<",nbsp:" ",quot:'"',apos:"'"}},5628:function(e,t,n){var o=n("1faa"),i=n("632d"),r=n("415b"),a=n("d191"),s=n("d95b"),c=n("9105");t.f=o&&!i?Object.defineProperties:function(e,t){a(e);var n,o=s(t),i=c(t),u=i.length,l=0;while(u>l)r.f(e,n=i[l++],o[n]);return e}},"562d":function(e,t,n){"use strict";var o=n("8bdb"),i=n("bb80"),r=n("e34c"),a=RangeError,s=String.fromCharCode,c=String.fromCodePoint,u=i([].join),l=!!c&&1!==c.length;o({target:"String",stat:!0,arity:1,forced:l},{fromCodePoint:function(e){var t,n=[],o=arguments.length,i=0;while(o>i){if(t=+arguments[i++],r(t,1114111)!==t)throw new a(t+" is not a valid code point");n[i]=t<65536?s(t):s(55296+((t-=65536)>>10),t%1024+56320)}return u(n,"")}})},"569b":function(e,t,n){"use strict";var o=n("8c08"),i=o("toStringTag"),r={};r[i]="z",e.exports="[object z]"===String(r)},"56c8":function(e,t,n){var o=n("d10a"),i=n("77cd"),r=n("d95b"),a=n("0e36").indexOf,s=n("bd8a"),c=o([].push);e.exports=function(e,t){var n,o=r(e),u=0,l=[];for(n in o)!i(s,n)&&i(o,n)&&c(l,n);while(t.length>u)i(o,n=t[u++])&&(~a(l,n)||c(l,n));return l}},"57d9":function(e,t,n){"use strict";n.r(t);var o=n("52b3");for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var r=n("828b"),a=Object(r["a"])(o["default"],void 0,void 0,!1,null,null,null,!1,void 0,void 0);t["default"]=a.exports},"57e2":function(e,t){var n=Math.ceil,o=Math.floor;e.exports=Math.trunc||function(e){var t=+e;return(t>0?o:n)(t)}},"57e7":function(e,t,n){"use strict";var o=n("e37c"),i=n("e4ca"),r=n("a74c"),a=n("ae5c"),s=n("b720"),c=n("1eb8"),u=n("50757"),l=n("0cc2"),d=n("97ed"),f=n("437f"),p=n("ab4a"),h=n("d0b1").fastKey,g=n("235c"),_=g.set,v=g.getterFor;e.exports={getConstructor:function(e,t,n,l){var d=e((function(e,i){s(e,f),_(e,{type:t,index:o(null),first:void 0,last:void 0,size:0}),p||(e.size=0),c(i)||u(i,e[l],{that:e,AS_ENTRIES:n})})),f=d.prototype,g=v(t),m=function(e,t,n){var o,i,r=g(e),a=y(e,t);return a?a.value=n:(r.last=a={index:i=h(t,!0),key:t,value:n,previous:o=r.last,next:void 0,removed:!1},r.first||(r.first=a),o&&(o.next=a),p?r.size++:e.size++,"F"!==i&&(r.index[i]=a)),e},y=function(e,t){var n,o=g(e),i=h(t);if("F"!==i)return o.index[i];for(n=o.first;n;n=n.next)if(n.key===t)return n};return r(f,{clear:function(){var e=g(this),t=e.first;while(t)t.removed=!0,t.previous&&(t.previous=t.previous.next=void 0),t=t.next;e.first=e.last=void 0,e.index=o(null),p?e.size=0:this.size=0},delete:function(e){var t=g(this),n=y(this,e);if(n){var o=n.next,i=n.previous;delete t.index[n.index],n.removed=!0,i&&(i.next=o),o&&(o.previous=i),t.first===n&&(t.first=o),t.last===n&&(t.last=i),p?t.size--:this.size--}return!!n},forEach:function(e){var t,n=g(this),o=a(e,arguments.length>1?arguments[1]:void 0);while(t=t?t.next:n.first){o(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!y(this,e)}}),r(f,n?{get:function(e){var t=y(this,e);return t&&t.value},set:function(e,t){return m(this,0===e?0:e,t)}}:{add:function(e){return m(this,e=0===e?0:e,e)}}),p&&i(f,"size",{configurable:!0,get:function(){return g(this).size}}),d},setStrong:function(e,t,n){var o=t+" Iterator",i=v(t),r=v(o);l(e,t,(function(e,t){_(this,{type:o,target:e,state:i(e),kind:t,last:void 0})}),(function(){var e=r(this),t=e.kind,n=e.last;while(n&&n.removed)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?d("keys"===t?n.key:"values"===t?n.value:[n.key,n.value],!1):(e.target=void 0,d(void 0,!0))}),n?"entries":"values",!n,!0),f(t)}}},5890:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={line:{color:"#d6d7d9",length:"100%",direction:"row",hairline:!0,margin:0,dashed:!1}}},5909:function(e,t,n){var o,i,r,a=n("bdbb").default;n("c9b5"),n("bf0f"),n("ab80"),function(s,c,u){"object"===a(t)?e.exports=t=c(n("5e74"),n("f794")):(i=[n("5e74"),n("f794")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))}(0,(function(e){return function(t){var n=e,o=n.lib,i=o.CipherParams,r=n.enc,a=r.Hex,s=n.format;s.Hex={stringify:function(e){return e.ciphertext.toString(a)},parse:function(e){var t=a.parse(e);return i.create({ciphertext:t})}}}(),e.format.Hex}))},"591c":function(e,t,n){"use strict";(function(e){n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.invokeCallbackHandler=M,t.removeCallbackHandler=function(e){delete g[e]},t.wrapper=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(C.indexOf(e)>-1||!(0,i.isFn)(t))return t;return I(e,n),function(){for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];if((0,a.isSyncApi)(e)){if(p(e,r,-1))return t.apply(null,r)}else if((0,a.isCallbackApi)(e)){if(p(e,r,-1))return t((e.startsWith("off")?v:_)(e,r[0]))}else{var c={};r.length&&(c=r[0]);var u,l=y(e,c,n),d=l.params,f=l.callbackId;if(!1!==f)return u=(0,i.isFn)(d)?t(f):t(d,f),u&&!(0,a.isTaskApi)(e)&&(u=M(f,u),(0,i.isPlainObject)(u)&&(u.errMsg=u.errMsg||e+":ok")),u}}},t.wrapperUnimplemented=function(t){return function(n){e.error("API `"+t+"` is not yet implemented")}},n("c223"),n("7a76"),n("c9b5"),n("bf0f"),n("2797"),n("dc8a"),n("5ef2"),n("9db6"),n("5c47"),n("a1c1"),n("64aa");var i=n("1ffa"),r=n("637e"),a=n("46ac"),s=n("e069"),c=o(n("82cf")),u=o(n("6c7d"));function l(e,t,n){var o="".concat(t,":fail ").concat(e);if(-1===n)throw new Error(o);return"number"===typeof n&&M(n,{errMsg:o}),!1}var d=[{name:"callback",type:Function,required:!0}],f=["beforeValidate","beforeAll","beforeSuccess"];function p(e,t,n){var o=c.default[e];if(!o&&(0,a.isCallbackApi)(e)&&(o=d),o){if(Array.isArray(o)&&Array.isArray(t)){var r=Object.create(null),s=Object.create(null),p=t.length;o.forEach((function(e,n){r[e.name]=e,p>n&&(s[e.name]=t[n])})),o=r,t=s}if((0,i.isFn)(o.beforeValidate)){var h=o.beforeValidate(t);if(h)return l(h,e,n)}for(var g=Object.keys(o),_=0;_<g.length;_++)if(-1===f.indexOf(g[_])){var v=(0,u.default)(g[_],o,t);if(v)return l(v,e,n)}}return!0}var h=1,g={};function _(e,t){var n=h++,o="api."+e+"."+n;return g[n]={name:o,keepAlive:!0,callback:t},n}function v(e,t){for(var n in g){var o=g[n];if(o.name.startsWith("api."+e.replace(/^off/,"on"))&&o.callback===t)return delete g[n],Number(n)}return"fail"}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(0,i.isPlainObject)(t))return{params:t};t=Object.assign({},t);var o=(0,s.getApiCallbacks)(t),a=o.success,c=o.fail,u=o.cancel,l=o.complete,d=(0,i.isFn)(a),f=(0,i.isFn)(c),p=(0,i.isFn)(u),_=(0,i.isFn)(l);if(!d&&!f&&!p&&!_)return{params:t};var v={};for(var m in n){var y=n[m];(0,i.isFn)(y)&&(v[m]=(0,r.tryCatchFramework)(y))}var M=v.beforeSuccess,I=v.afterSuccess,C=v.beforeFail,b=v.afterFail,T=v.beforeCancel,S=v.afterCancel,E=v.beforeAll,k=v.afterAll,D=h++,A="api."+e+"."+D,L=function(n){if(n.errMsg=n.errMsg||e+":ok",-1!==n.errMsg.indexOf(":ok"))n.errMsg=e+":ok";else if(-1!==n.errMsg.indexOf(":cancel"))n.errMsg=e+":cancel";else if(-1!==n.errMsg.indexOf(":fail")){var o="",r=n.errMsg.indexOf(" ");r>-1&&(o=n.errMsg.substr(r)),n.errMsg=e+":fail"+o}(0,i.isFn)(E)&&E(n);var s=n.errMsg;0===s.indexOf(e+":ok")?((0,i.isFn)(M)&&M(n,t),d&&a(n),(0,i.isFn)(I)&&I(n)):0===s.indexOf(e+":cancel")?(n.errMsg=n.errMsg.replace(e+":cancel",e+":fail cancel"),f&&c(n),(0,i.isFn)(T)&&T(n),p&&u(n),(0,i.isFn)(S)&&S(n)):0===s.indexOf(e+":fail")&&((0,i.isFn)(C)&&C(n),f&&c(n),(0,i.isFn)(b)&&b(n)),_&&l(n),(0,i.isFn)(k)&&k(n)};return g[D]={name:A,callback:L},{params:t,callbackId:D}}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=m(e,t,n),r=o.params,a=o.callbackId;return(0,i.isPlainObject)(r)&&!p(e,r,a)?{params:r,callbackId:!1}:{params:r,callbackId:a}}function M(e,t,n){if("number"===typeof e){var o=g[e];if(o)return o.keepAlive||delete g[e],o.callback(t,n)}return t}function I(e,t){var n=c.default[e];n&&((0,i.isFn)(n.beforeAll)&&(t.beforeAll=n.beforeAll),(0,i.isFn)(n.beforeSuccess)&&(t.beforeSuccess=n.beforeSuccess))}var C=["getPushClientId","onPushMessage","offPushMessage"]}).call(this,n("ba7c")["default"])},"592a":function(e,t,n){"use strict";(function(o,i){var r,a,s=n("bdbb").default;n("4085"),n("dc8a"),n("01a2"),n("8f71"),n("bf0f"),n("9a2c"),n("aa9c"),n("2797"),n("a644"),n("a03a"),n("6a54"),n("e39c"),n("844d"),n("18f7"),n("de6c"),n("7a76"),n("c9b5"),n("8a8d"),n("926e"),n("7996"),n("6a88"),n("c1a3"),n("5ef2"),n("ab80"),n("08eb"),n("f7a5"),n("5c47"),n("0506"),n("fd3c"),n("64aa"),n("2c10"),n("e838"),n("d4b5"),n("c223"),n("4626"),n("5ac7"),n("a1c1"),n("7f48"),n("aa77"),n("9db6"),n("e966"),n("dfcf"),n("dd2b"),n("9327"),n("dc89"),n("2425"),n("20f3"),n("22b6"),n("3efd"),n("f3f7"),n("4100"),n("bd06"),n("473f"),n("9979"),n("dc69"),n("0c26"),n("4db2"),n("c976"),n("4d8f"),n("7b97"),n("668a"),n("c5b7"),n("8ff5"),n("2378"),n("641a"),n("64e0"),n("cce3"),n("efba"),n("d009"),n("bd7d"),n("7edd"),n("d798"),n("f547"),n("5e54"),n("b60a"),n("8c18"),n("12973"),n("f991"),n("198e"),n("8557"),n("63b1"),n("1954"),n("1cf1"),n("562d"),n("a578"),n("23f4"),n("7d2f"),n("9c4e"),n("247d"),n("c02e"),n("f555"),function(o,i){"object"==s(t)&&"undefined"!=typeof e?e.exports=i():(r=i,a="function"===typeof r?r.call(t,n,t,e):r,void 0===a||(e.exports=a))}(0,(function(){function e(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)),o}function t(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach((function(e){u(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function n(e){return(n="function"==typeof Symbol&&"symbol"==s(Symbol.iterator)?function(e){return s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":s(e)})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(c){return!1}}function h(e,t,n){return(h=p()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t),t=new(Function.bind.apply(e,o));return n&&f(t,n.prototype),t}).apply(null,arguments)}function g(e,t){if(null==e)return{};var n,o=function(e,t){if(null==e)return{};for(var n,o={},i=Object.keys(e),r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n]);return o}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){var t=p();return function(){var n,o=d(e);n=t?(n=d(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this;if(n&&("object"==s(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return _(o)}}function m(e,t){return M(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,i,r=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(o=n.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return r}}(e,t)||C(e,t)||T()}function y(e){return function(e){if(Array.isArray(e))return b(e)}(e)||I(e)||C(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e){if(Array.isArray(e))return e}function I(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function C(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function T(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(e,t){var n,o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=C(e))||t&&e&&"number"==typeof e.length)return o&&(e=o),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,a=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return r=e.done,e},e:function(e){a=!0,i=e},f:function(){try{r||null==o.return||o.return()}finally{if(a)throw i}}}}var E={SDK_READY:"sdkStateReady",SDK_NOT_READY:"sdkStateNotReady",SDK_DESTROY:"sdkDestroy",MESSAGE_RECEIVED:"onMessageReceived",ROOM_CUSTOM_DATA_RECEIVED:"onRoomCustomDataReceived",MESSAGE_MODIFIED:"onMessageModified",MESSAGE_REVOKED:"onMessageRevoked",MESSAGE_READ_BY_PEER:"onMessageReadByPeer",MESSAGE_READ_RECEIPT_RECEIVED:"onMessageReadReceiptReceived",MESSAGE_EXTENSIONS_UPDATED:"onMessageExtensionsUpdated",MESSAGE_EXTENSIONS_DELETED:"onMessageExtensionsDeleted",MESSAGE_REACTIONS_UPDATED:"onMessageReactionsUpdated",CONVERSATION_LIST_UPDATED:"onConversationListUpdated",TOTAL_UNREAD_MESSAGE_COUNT_UPDATED:"onTotalUnreadMessageCountUpdated",CONVERSATION_GROUP_LIST_UPDATED:"onConversationGroupListUpdated",CONVERSATION_IN_GROUP_UPDATED:"onConversationInGroupUpdated",GROUP_LIST_UPDATED:"onGroupListUpdated",GROUP_ATTRIBUTES_UPDATED:"groupAttributesUpdated",GROUP_COUNTER_UPDATED:"onGroupCounterUpdated",TOPIC_CREATED:"onTopicCreated",TOPIC_DELETED:"onTopicDeleted",TOPIC_UPDATED:"onTopicUpdated",PROFILE_UPDATED:"onProfileUpdated",USER_STATUS_UPDATED:"onUserStatusUpdated",BLACKLIST_UPDATED:"blacklistUpdated",FRIEND_LIST_UPDATED:"onFriendListUpdated",FRIEND_GROUP_LIST_UPDATED:"onFriendGroupListUpdated",FRIEND_APPLICATION_LIST_UPDATED:"onFriendApplicationListUpdated",MY_FOLLOWERS_LIST_UPDATED:"onMyFollowersListUpdated",MY_FOLLOWING_LIST_UPDATED:"onMyFollowingListUpdated",MUTUAL_FOLLOWERS_LIST_UPDATED:"onMutualFollowersListUpdated",KICKED_OUT:"kickedOut",ERROR:"error",NET_STATE_CHANGE:"netStateChange",ALL_RECEIVE_MESSAGE_OPT_UPDATED:"onAllReceiveMessageOptUpdated"},k={MSG_TEXT:"TIMTextElem",MSG_IMAGE:"TIMImageElem",MSG_SOUND:"TIMSoundElem",MSG_AUDIO:"TIMSoundElem",MSG_FILE:"TIMFileElem",MSG_FACE:"TIMFaceElem",MSG_VIDEO:"TIMVideoFileElem",MSG_GEO:"TIMLocationElem",MSG_LOCATION:"TIMLocationElem",MSG_GRP_TIP:"TIMGroupTipElem",MSG_GRP_SYS_NOTICE:"TIMGroupSystemNoticeElem",MSG_CUSTOM:"TIMCustomElem",MSG_MERGER:"TIMRelayElem",MSG_PRIORITY_HIGH:"High",MSG_PRIORITY_NORMAL:"Normal",MSG_PRIORITY_LOW:"Low",MSG_PRIORITY_LOWEST:"Lowest",CONV_C2C:"C2C",CONV_GROUP:"GROUP",CONV_TOPIC:"TOPIC",CONV_SYSTEM:"@TIM#SYSTEM",CONV_AT_ME:1,CONV_AT_ALL:2,CONV_AT_ALL_AT_ME:3,CONV_MARK_TYPE_STAR:1,CONV_MARK_TYPE_UNREAD:2,CONV_MARK_TYPE_FOLD:4,CONV_MARK_TYPE_HIDE:8,GRP_PRIVATE:"Private",GRP_WORK:"Private",GRP_PUBLIC:"Public",GRP_CHATROOM:"ChatRoom",GRP_MEETING:"ChatRoom",GRP_AVCHATROOM:"AVChatRoom",GRP_COMMUNITY:"Community",GRP_ROOM:"Room",GRP_LIVE:"Live",GRP_MBR_ROLE_OWNER:"Owner",GRP_MBR_ROLE_ADMIN:"Admin",GRP_MBR_ROLE_MEMBER:"Member",GRP_MBR_ROLE_CUSTOM:"Custom",GRP_TIP_MBR_JOIN:1,GRP_TIP_MBR_QUIT:2,GRP_TIP_MBR_KICKED_OUT:3,GRP_TIP_MBR_SET_ADMIN:4,GRP_TIP_MBR_CANCELED_ADMIN:5,GRP_TIP_GRP_PROFILE_UPDATED:6,GRP_TIP_MBR_PROFILE_UPDATED:7,GRP_TIP_BAN_AVCHATROOM_MEMBER:10,GRP_TIP_UNBAN_AVCHATROOM_MEMBER:11,MSG_REMIND_ACPT_AND_NOTE:"AcceptAndNotify",MSG_REMIND_ACPT_NOT_NOTE:"AcceptNotNotify",MSG_REMIND_DISCARD:"Discard",RECEIVE_WITH_OFFLINE_PUSH_EXCEPT_AT:"AcceptNotNotifyExceptAt",NOT_RECEIVE_OFFLINE_PUSH_EXCEPT_AT:"AcceptNotNotifyExceptAt",NOT_RECEIVE_MSG_EXCEPT_AT:"NotReceiveMsgExceptAt",GENDER_UNKNOWN:"Gender_Type_Unknown",GENDER_FEMALE:"Gender_Type_Female",GENDER_MALE:"Gender_Type_Male",KICKED_OUT_MULT_ACCOUNT:"multipleAccount",KICKED_OUT_MULT_DEVICE:"multipleDevice",KICKED_OUT_USERSIG_EXPIRED:"userSigExpired",KICKED_OUT_REST_API:"REST_API_Kick",ALLOW_TYPE_ALLOW_ANY:"AllowType_Type_AllowAny",ALLOW_TYPE_NEED_CONFIRM:"AllowType_Type_NeedConfirm",ALLOW_TYPE_DENY_ANY:"AllowType_Type_DenyAny",FORBID_TYPE_NONE:"AdminForbid_Type_None",FORBID_TYPE_SEND_OUT:"AdminForbid_Type_SendOut",JOIN_OPTIONS_FREE_ACCESS:"FreeAccess",JOIN_OPTIONS_NEED_PERMISSION:"NeedPermission",JOIN_OPTIONS_DISABLE_APPLY:"DisableApply",JOIN_STATUS_SUCCESS:"JoinedSuccess",JOIN_STATUS_ALREADY_IN_GROUP:"AlreadyInGroup",JOIN_STATUS_WAIT_APPROVAL:"WaitAdminApproval",INVITE_OPTIONS_DISABLE_INVITE:"DisableInvite",INVITE_OPTIONS_NEED_PERMISSION:"NeedPermission",INVITE_OPTIONS_FREE_ACCESS:"FreeAccess",GRP_PROFILE_OWNER_ID:"ownerID",GRP_PROFILE_CREATE_TIME:"createTime",GRP_PROFILE_LAST_INFO_TIME:"lastInfoTime",GRP_PROFILE_MEMBER_NUM:"memberNum",GRP_PROFILE_MAX_MEMBER_NUM:"maxMemberNum",GRP_PROFILE_JOIN_OPTION:"joinOption",GRP_PROFILE_INVITE_OPTION:"inviteOption",GRP_PROFILE_INTRODUCTION:"introduction",GRP_PROFILE_NOTIFICATION:"notification",GRP_PROFILE_MUTE_ALL_MBRS:"muteAllMembers",SNS_ADD_TYPE_SINGLE:"Add_Type_Single",SNS_ADD_TYPE_BOTH:"Add_Type_Both",SNS_DELETE_TYPE_SINGLE:"Delete_Type_Single",SNS_DELETE_TYPE_BOTH:"Delete_Type_Both",SNS_APPLICATION_TYPE_BOTH:"Pendency_Type_Both",SNS_APPLICATION_SENT_TO_ME:"Pendency_Type_ComeIn",SNS_APPLICATION_SENT_BY_ME:"Pendency_Type_SendOut",SNS_APPLICATION_AGREE:"Response_Action_Agree",SNS_APPLICATION_AGREE_AND_ADD:"Response_Action_AgreeAndAdd",SNS_CHECK_TYPE_BOTH:"CheckResult_Type_Both",SNS_CHECK_TYPE_SINGLE:"CheckResult_Type_Single",SNS_TYPE_NO_RELATION:"CheckResult_Type_NoRelation",SNS_TYPE_A_WITH_B:"CheckResult_Type_AWithB",SNS_TYPE_B_WITH_A:"CheckResult_Type_BWithA",SNS_TYPE_BOTH_WAY:"CheckResult_Type_BothWay",NET_STATE_CONNECTED:"connected",NET_STATE_CONNECTING:"connecting",NET_STATE_DISCONNECTED:"disconnected",MSG_AT_ALL:"__kImSDK_MesssageAtALL__",READ_ALL_C2C_MSG:"readAllC2CMessage",READ_ALL_GROUP_MSG:"readAllGroupMessage",READ_ALL_MSG:"readAllMessage",USER_STATUS_UNKNOWN:0,USER_STATUS_ONLINE:1,USER_STATUS_OFFLINE:2,USER_STATUS_UNLOGINED:3,IOS_OFFLINE_PUSH_NO_SOUND:"push.no_sound",IOS_OFFLINE_PUSH_DEFAULT_SOUND:"default"},D={NEW_INVITATION_RECEIVED:"newInvitationReceived",INVITEE_ACCEPTED:"ts_invitee_accepted",INVITEE_REJECTED:"ts_invitee_rejected",INVITATION_CANCELLED:"ts_invitation_cancelled",INVITATION_TIMEOUT:"ts_invitation_timeout",INVITATION_MODIFIED:"ts_invitation_modified",ACTION_TYPE_UNKNOWN:0,ACTION_TYPE_INVITE:1,ACTION_TYPE_CANCEL_INVITE:2,ACTION_TYPE_ACCEPT_INVITE:3,ACTION_TYPE_REJECT_INVITE:4,ACTION_TYPE_INVITE_TIMEOUT:5},A=(c(V,[{key:"use",value:function(e){if("function"!=typeof e)throw"middleware must be a function";return this.cache.push(e),this}},{key:"next",value:function(e){if(this.middlewares&&0<this.middlewares.length)return this.middlewares.shift().call(this,this.options,this.next.bind(this))}},{key:"run",value:function(e){return this.middlewares=this.cache.map((function(e){return e})),this.options=e,this.next()}}]),V),L=(c(B,[{key:"equal",value:function(e){return null!==e&&this.low===e.low&&this.high===e.high}},{key:"toString",value:function(){var e=Number(this.high).toString(16),t=Number(this.low).toString(16);if(t.length<8)for(var n=8-t.length;n;)t="0"+t,n--;return e+t}}]),B),O={TEST:{CHINA:{DEFAULT:"wss://wss-dev.tim.qq.com"},OVERSEA:{DEFAULT:"wss://wss-dev.tim.qq.com"},SINGAPORE:{DEFAULT:"wss://wsssgp-dev.im.qcloud.com"},KOREA:{DEFAULT:"wss://wsskr-dev.im.qcloud.com"},GERMANY:{DEFAULT:"wss://wssger-dev.im.qcloud.com"},IND:{DEFAULT:"wss://wssind-dev.im.qcloud.com"},JPN:{DEFAULT:"wss://wssjpn-dev.im.qcloud.com"},USA:{DEFAULT:"wss://wssusa-dev.im.qcloud.com"},INDONESIA:{DEFAULT:"wss://wssidn-dev.im.qcloud.com"}},PRODUCTION:{CHINA:{DEFAULT:"wss://wss.im.qcloud.com",BACKUP:"wss://wss.tim.qq.com",STAT:"https://events.im.qcloud.com",ANYCAST:"wss://162.14.13.203"},OVERSEA:{DEFAULT:"wss://wss.im.qcloud.com",BACKUP:"wss://wss.my-imcloud.com",STAT:"https://api.my-imcloud.com"},SINGAPORE:{DEFAULT:"wss://wsssgp.im.qcloud.com",BACKUP:"wss://wsssgp.my-imcloud.com",STAT:"https://apisgp.my-imcloud.com",ANYCAST:"wss://162.14.19.159"},KOREA:{DEFAULT:"wss://wsskr.im.qcloud.com",BACKUP:"wss://wsskr.my-imcloud.com",STAT:"https://apikr.my-imcloud.com",ANYCAST:"wss://162.14.13.104"},GERMANY:{DEFAULT:"wss://wssger.im.qcloud.com",BACKUP:"wss://wssger.my-imcloud.com",STAT:"https://apiger.my-imcloud.com",ANYCAST:"wss://162.14.3.17"},IND:{DEFAULT:"wss://wssind.my-imcloud.com",BACKUP:"wss://wssind.im.qcloud.com",STAT:"https://apiind.my-imcloud.com",ANYCAST:"wss://162.14.18.188"},JPN:{DEFAULT:"wss://wssjpn.im.qcloud.com",BACKUP:"wss://wssjpn.my-imcloud.com",STAT:"https://apijpn.my-imcloud.com"},USA:{DEFAULT:"wss://wssusa.im.qcloud.com",BACKUP:"wss://wssusa.my-imcloud.com",STAT:"https://apiusa.my-imcloud.com",ANYCAST:"wss://162.14.10.42"},INDONESIA:{DEFAULT:"wss://wssidn.im.qcloud.com",BACKUP:"wss://wssidn.my-imcloud.com",STAT:"https://apiidn.my-imcloud.com",ANYCAST:"wss://43.129.34.169"}}},R={ANDROID:2,IOS:3,MAC:4,WEB:7,WX_MP:8,QQ_MP:9,TT_MP:10,BAIDU_MP:11,ALI_MP:12,IPAD:13,UNI_NATIVE_APP:15,DONUT_NATIVE_APP:19,NS_NATIVE_APP:20,RN_NATIVE_APP:21},w="1.7.3",N=537048168,P="CHINA",G={HOST:{CURRENT:{DEFAULT:"wss://wss.im.qcloud.com",STAT:"https://events.im.qcloud.com"},setCurrent:function(){this.CURRENT=O.PRODUCTION[0<arguments.length&&void 0!==arguments[0]?arguments[0]:P]}},NAME:{OPEN_IM:"openim",OPEN_IM_MSG_EXT:"openim_msg_ext_http_svc",GRP:"group_open_http_svc",GRP_AV:"group_open_avchatroom_http_svc",GRP_COMMUNITY:"million_group_open_http_svc",GRP_ATTR:"group_open_attr_http_svc",FD:"sns",PROFILE:"profile",RECENT_CONTACT:"recentcontact",PIC:"openpic",BIG_GRP_NO_AUTH:"group_open_http_noauth_svc",BIG_GRP_POLLING:"group_open_long_polling_http_svc",BIG_GRP_POLLING_NO_AUTH:"group_open_long_polling_http_noauth_svc",IM_OPEN_STAT:"imopenstat",WEB_IM:"webim",IM_COS_SIGN:"im_cos_sign_svr",CUSTOM_UPLOAD:"im_cos_msg",HEARTBEAT:"heartbeat",IM_OPEN_PUSH:"im_open_push",IM_OPEN_STATUS:"im_open_status",IM_LONG_MSG:"im_long_msg",IM_CONFIG_MANAGER:"im_sdk_config_mgr",STAT_SERVICE:"StatSvc",OVERLOAD_PUSH:"OverLoadPush",IM_MSG_AUDIT_MGR:"im_msg_audit_mgr",TUIROOM_SVR:"tui_room_svr",IM_OPEN_TRANSLATE:"im_open_translate",IM_OPEN_SPEECH:"im_open_speech",MSG_SEARCH:"message_search",FOLLOW:"follow",OFFLINE_PUSH_REPORT:"offline_push_report",IM_MSG_LOGIC:"im_msg_db_logic"}},U={SEARCH_GRP_SNS:new L(0,Math.pow(2,1)).toString(),AV_HISTORY_MSG:new L(0,Math.pow(2,2)).toString(),GRP_COMMUNITY:new L(0,Math.pow(2,3)).toString(),MSG_TO_SPECIFIED_GRP_MBR:new L(0,Math.pow(2,4)).toString(),AV_MBR_LIST:new L(0,Math.pow(2,6)).toString(),USER_STATUS:new L(0,Math.pow(2,7)).toString(),CONV_MARK:new L(0,Math.pow(2,9)).toString(),CONV_GROUP:new L(0,Math.pow(2,10)).toString(),AV_BAN_MBR:new L(0,Math.pow(2,11)).toString(),MSG_EXT:new L(0,Math.pow(2,13)).toString(),GRP_COUNTER:new L(0,Math.pow(2,15)).toString(),PLUGIN_TRANSLATE:new L(Math.pow(2,6)).toString(),PLUGIN_VOICE_TO_TEXT:new L(Math.pow(2,7)).toString(),PLUGIN_CS:new L(Math.pow(2,8)).toString(),PLUGIN_PUSH:new L(Math.pow(2,9)).toString(),PLUGIN_BOT:new L(Math.pow(2,10)).toString(),MSG_REACTION:new L(Math.pow(2,16)).toString(),FOLLOW:new L(Math.pow(2,20)).toString()},x="group_profile",F=["Type","Name","Introduction","Notification","FaceUrl","Owner_Account","CreateTime","InfoSeq","LastInfoTime","LastMsgTime","MemberNum","MaxMemberNum","ApplyJoinOption","NextMsgSeq","ShutUpAllMember","InviteJoinOption"],q=["Role","JoinTime","MsgSeq","MsgFlag"];function B(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;r(this,B),this.high=e,this.low=t}function V(){r(this,V),this.cache=[],this.options=null}G.HOST.setCurrent(P);for(var H,j="undefined"!=typeof wx&&"function"==typeof wx.getSystemInfoSync&&Boolean(wx.getSystemInfoSync().fontSizeSetting),K=j&&"function"==typeof wx.createGamePortal,W="undefined"!=typeof qq&&"function"==typeof qq.getSystemInfoSync&&Boolean(qq.getSystemInfoSync().fontSizeSetting),Y="undefined"!=typeof tt&&"function"==typeof tt.getSystemInfoSync&&Boolean(tt.getSystemInfoSync().fontSizeSetting),z="undefined"!=typeof swan&&"function"==typeof swan.getSystemInfoSync&&Boolean(swan.getSystemInfoSync().fontSizeSetting),$="undefined"!=typeof my&&"function"==typeof my.getSystemInfoSync&&Boolean(my.getSystemInfoSync().fontSizeSetting),X="undefined"!=typeof jd&&"function"==typeof jd.getSystemInfoSync,J="undefined"!=typeof uni&&"undefined"==typeof window&&"function"==typeof uni.requireNativePlugin,Q=j&&"object"===n(wx.miniapp),Z="undefined"!=typeof uni,ee=j||W||Y||z||$||J||X,te="undefined"==typeof window&&!ee&&"undefined"!=typeof o&&void 0!==o.NativeScriptGlobals,ne="undefined"!=typeof o&&void 0!==o.nativeModuleProxy,oe="undefined"!=typeof uni?!ee:"undefined"!=typeof window&&!ee&&!ne,ie=W?qq:Y?tt:z?swan:$?my:j?wx:J?uni:X?jd:{},re=oe&&window&&window.navigator&&window.navigator.userAgent||"",ae=(X="WEB",/(micromessenger|webbrowser)/i.test(re)?X="WEB":W?X="QQ_MP":Y?X="TT_MP":z?X="BAIDU_MP":$?X="ALI_MP":j?X=Q?"DONUT_NATIVE_APP":"WX_MP":J?X="UNI_NATIVE_APP":te?X="NS_NATIVE_APP":ne&&(X="RN_NATIVE_APP"),R[X]),se=(Q=/iPad/i.test(re),te=/iPhone/i.test(re)&&!Q,X=/iPod/i.test(re),te||Q||X),ce=(te=re.match(/OS (\d+)_/i))&&te[1]?te[1]:null,ue=/Android/i.test(re),le=function(){var e=re.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),de=(Q=/Edge/i.test(re),X=!Q&&/Chrome/i.test(re),/MSIE/.test(re)||-1<re.indexOf("Trident")&&-1<re.indexOf("rv:11.0")),fe=te=!(te=(te=/MSIE\s(\d+)\.\d/.exec(re))&&parseFloat(te[1]))&&/Trident\/7.0/i.test(re)&&/rv:11.0/.test(re)?11:te,pe=/Safari/i.test(re)&&!X&&!ue&&!Q,he=/Windows/i.test(re),ge=/MAC OS X/i.test(re),_e=oe&&"undefined"!=typeof Worker&&!de,ve=ue||se,me=oe&&void 0!==window.tencent_cloud_im_csig_flutter_for_web_25F_cy,ye=function(){if("undefined"==typeof window||void 0===window.navigator)return!1;var e=window.navigator.standalone;return!(!se||e||pe)}(),Me="undefined"!=typeof i?i:"undefined"!=typeof o&&o.console?o.console:"undefined"!=typeof window&&window.console?window.console:{},Ie=function(){},Ce=["assert","clear","count","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],be=Ce.length;be--;)H=Ce[be],i[H]||(Me[H]=Ie);function Te(){var e=new Date;return e.setTime(Ae()),e}function Se(){De=0}function Ee(){return Math.floor(Ae()/1e3)}var ke=Me,De=0,Ae=function(){return(new Date).getTime()+De},Le=0;function Oe(){return Ht()?"%c Chat %c":"Chat"}function Re(){var e=Te();return e.toLocaleTimeString("en-US",{hour12:!1})+"."+function(e){var t;switch(e.toString().length){case 1:t="00"+e;break;case 2:t="0"+e;break;default:t=e}return t}(e.getMilliseconds())}var we={arguments2String:function(e){var t="";if(1===e.length)t=e[0];else for(var n=0,o=e.length;n<o;n++)ft(e[n])?pt(e[n])?t+=gt(e[n]):t+=JSON.stringify(e[n]):t+=e[n],t+=" ";return t},_exec:function(e,t){Ht()?ke[e](Oe(),"background:#0abf5b; padding:1px; border-radius:3px; color: #fff","background:transparent",Re(),t):ke[e]("".concat(Oe()," ").concat(Re()," ").concat(t))},d:function(){var e;Le<=-1&&(e=this.arguments2String(arguments),this._exec("debug",e))},l:function(){var e;Le<=0&&(e=this.arguments2String(arguments),this._exec("log",e))},log:function(){var e;Le<=0&&(e=this.arguments2String(arguments),this._exec("log",e))},i:function(){var e;Le<=1&&(e=this.arguments2String(arguments),this._exec("info",e))},w:function(){var e;Le<=2&&(e=this.arguments2String(arguments),this._exec("warn",e))},e:function(){var e;Le<=3&&(e=this.arguments2String(arguments),this._exec("error",e))},setLevel:function(e){e<4&&this._exec("log","set level from "+Le+" to "+e),Le=e},getLevel:function(){return Le}},Ne={JPG:1,JPEG:1,GIF:2,PNG:3,BMP:4,UNKNOWN:255},Pe=(te="Tag_Profile_IM_",{NICK:"".concat(te,"Nick"),GENDER:"".concat(te,"Gender"),BIRTHDAY:"".concat(te,"BirthDay"),LOCATION:"".concat(te,"Location"),SELFSIGNATURE:"".concat(te,"SelfSignature"),ALLOWTYPE:"".concat(te,"AllowType"),LANGUAGE:"".concat(te,"Language"),AVATAR:"".concat(te,"Image"),MESSAGESETTINGS:"".concat(te,"MsgSettings"),ADMINFORBIDTYPE:"".concat(te,"AdminForbidType"),LEVEL:"".concat(te,"Level"),ROLE:"".concat(te,"Role")}),Ge={GROUP:"".concat("Tag_SNS_IM_","Group"),REMARK:"".concat("Tag_SNS_IM_","Remark"),ADDSOURCE:"".concat("Tag_SNS_IM_","AddSource"),ADDWORDING:"".concat("Tag_SNS_IM_","Wording"),ADDTIME:"".concat("Tag_SNS_IM_","AddTime")},Ue=(X="Gender_Type_",{UNKNOWN:"".concat(X,"Unknown"),FEMALE:"".concat(X,"Female"),MALE:"".concat(X,"Male")}),xe={NONE:"".concat("AdminForbid_Type_","None"),SEND_OUT:"".concat("AdminForbid_Type_","SendOut")},Fe={NEED_CONFIRM:"".concat("AllowType_Type_","NeedConfirm"),ALLOW_ANY:"".concat("AllowType_Type_","AllowAny"),DENY_ANY:"".concat("AllowType_Type_","DenyAny")},qe="JoinedSuccess",Be="WaitAdminApproval",Ve="@TOPIC#_",He=Object.prototype.hasOwnProperty;function je(e){if(null==e)return!0;if("boolean"==typeof e)return!1;if("number"==typeof e)return 0===e;if("string"==typeof e)return 0===e.length;if("function"==typeof e)return 0===e.length;if(Array.isArray(e))return 0===e.length;if(e instanceof Error)return""===e.message;if($e(e)){for(var t in e)if(He.call(e,t))return!1;return!0}return!!(Ke(e)||function(e){return"set"===ht(e)}(e)||We(e))&&0===e.size}function Ke(e){return"map"===ht(e)}function We(e){return"file"===ht(e)}function Ye(e){return null!==e&&("number"==typeof e&&!isNaN(+e)||"object"===n(e)&&e.constructor===Number)}function ze(e){return null!==e&&"object"===n(e)}function $e(e){if("object"===n(e)&&null!==e){if(null===(e=Object.getPrototypeOf(e)))return 1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return e===t}}function Xe(e){return"function"==typeof Array.isArray?Array.isArray(e):"array"===ht(e)}function Je(e){return"function"==typeof e}function Qe(e){return"filelist"===ht(e)}function Ze(e){return"string"==typeof e&&(e=e[0],!/[^a-zA-Z0-9]/.test(e))}function et(e,t,n,o){if(!ft(e)||!ft(t))return 0;for(var i,r=0,a=Object.keys(t),s=0,c=a.length;s<c;s++)if(i=a[s],!(dt(t[i])||n&&n.includes(i)))if(ft(e[i])&&ft(t[i]))r+=et(e[i],t[i],n,o);else{if(o&&o.includes(t[i]))continue;e[i]!==t[i]&&(e[i]=t[i],r+=1)}return r}function nt(e,t){var n,o=new Map,i=S(e.entries());try{for(i.s();!(n=i.n()).done;){var r=m(n.value,2),a=r[0],s=r[1];o.set(a,t?JSON.stringify(s):JSON.parse(JSON.stringify(s)))}}catch(e){i.e(e)}finally{i.f()}return o}function ot(e){if(0===e.length)return 0;for(var t=0,n=0,o="undefined"!=typeof document&&void 0!==document.characterSet?document.characterSet:"UTF-8";void 0!==e[t];)n+=e[t++].charCodeAt[t]<=255?1:!1===o?3:2;return n}function it(e){return e=e||99999999,Math.round(Math.random()*e)}function rt(){for(var e="",t=32;0<t;--t)e+=_t[Math.floor(Math.random()*vt)];return e}function at(e,t){for(var n in e)if(e[n]===t)return 1}function st(e){return-1===e.indexOf("http://")||-1===e.indexOf("https://")?"https://"+e:e.replace(/https|http/,"https")}function ct(e){if(0===Object.getOwnPropertyNames(e).length)return Object.create(null);var t,o,i=Array.isArray(e)?[]:Object.create(null);for(o in e)null!==e[o]?void 0!==e[o]?(t=n(e[o]),0<=["string","number","function","boolean"].indexOf(t)?i[o]=e[o]:i[o]=ct(e[o])):i[o]=void 0:i[o]=null;return i}var ut=["url"],lt=function(e){return"string"==typeof e},dt=function(e){return void 0===e},ft=function(e){return Xe(e)||ze(e)},pt=function(e){return e instanceof Error},ht=function(e){return Object.prototype.toString.call(e).match(/^\[object (.*)\]$/)[1].toLowerCase()},gt=(Date.now||(Date.now=function(){return(new Date).getTime()}),function(e){return JSON.stringify(e,["message","code"])}),_t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",vt=_t.length,mt={};function yt(e,t){if(!Xe(e)||!Xe(t))return!1;var n=!1;return t.forEach((function(t){var o=t.key,i=(t=t.value,e.find((function(e){return e.key===o})));i?i.value!==t&&(i.value=t,n=!0):(e.push({key:o,value:t}),n=!0)})),n}function Mt(e){return je(e)?[]:e.filter((function(e){return!0===e.isModified}))}function It(e){return je(e)?[]:e.filter((function(e){return!1===e.isModified}))}function Ct(e){return e===k.GRP_AVCHATROOM}function bt(e){var t=e.type;e=e.groupID;return t===k.GRP_COMMUNITY||"".concat(e).startsWith("@TGS#_")&&!"".concat(e).includes(Ve)}function Tt(e){return"".concat(e).startsWith("@TGS#_")&&"".concat(e).includes(Ve)}function St(e){return lt(e)&&e.slice(0,3)===k.CONV_C2C}function Et(e){return lt(e)&&e.slice(0,5)===k.CONV_GROUP}function kt(e){return lt(e)&&e===k.CONV_SYSTEM}function Dt(e,t){var n={};return Object.keys(e).forEach((function(o){n[o]=t(e[o],o)})),n}function At(e){return ne?Promise.resolve({width:0,height:0}):ee?new Promise((function(t,n){ie.getImageInfo({src:e,success:function(e){t({width:e.width,height:e.height})},fail:function(){t({width:0,height:0})}})})):de&&9===fe?Promise.resolve({width:0,height:0}):new Promise((function(t,n){var o=new Image;o.onload=function(){t({width:this.width,height:this.height}),o=null},o.onerror=function(){t({width:0,height:0}),o=null},o.src=e}))}function Lt(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return"".concat(e()+e()).concat(e()).concat(e()).concat(e()).concat(e()).concat(e()).concat(e())}function Ot(){var e=ue?"android":se?"ios":he?"windows":ge?"mac":"unknown";if(ee)try{var t=ie.getSystemInfoSync().platform;void 0!==t&&(e=t)}catch(e){}return e}function Rt(e,t){e=e.split("."),t=t.split(".");for(var n=Math.max(e.length,t.length);e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(var o=0;o<n;o++){var i=parseInt(e[o]),r=parseInt(t[o]);if(r<i)return 1;if(i<r)return-1}return 0}function wt(e){var t=e.originUrl,n=(t=void 0===t?void 0:t,e.originWidth),o=e.originHeight,i=(e=e.min,e=void 0===e?198:e,n=parseInt(n),o=parseInt(o),{url:void 0,width:0,height:0});return(n<=o?n:o)<=e?(i.url=t,i.width=n,i.height=o):(o<=n?(i.width=Math.ceil(n*e/o),i.height=e):(i.width=e,i.height=Math.ceil(o*e/n)),o=t&&-1<t.indexOf("?")?"".concat(t,"&"):"".concat(t,"?"),i.url="".concat(o,198===e?"imageView2/3/w/198/h/198":"imageView2/3/w/720/h/720")),dt(t)?(i.url,g(i,ut)):i}function Nt(e){var t=e[2];e[2]=e[1],e[1]=t;for(var n=0;n<e.length;n++)e[n].setType(n)}function Pt(e){return e=e.servcmd,e.slice(e.indexOf(".")+1)}function Gt(e,t){return Math.round(Number(e)*Math.pow(10,t))/Math.pow(10,t)}function Ut(e,t){return e.includes(t)}function xt(e,t){return e.includes(t)}function Ft(e){return e.split(Ve)[0]}var qt=function(e,t,n){if(dt(t))return"";switch(e){case k.MSG_TEXT:return t.text;case k.MSG_IMAGE:return n?"[Image]":"[图片]";case k.MSG_LOCATION:return n?"[Location]":"[位置]";case k.MSG_AUDIO:return n?"[Voice]":"[语音]";case k.MSG_VIDEO:return n?"[Video]":"[视频]";case k.MSG_FILE:return n?"[File]":"[文件]";case k.MSG_CUSTOM:return n?"[Custom Messages]":"[自定义消息]";case k.MSG_GRP_TIP:return n?"[Group Notification]":"[群提示消息]";case k.MSG_GRP_SYS_NOTICE:return n?"[Group System Message]":"[群系统通知]";case k.MSG_FACE:return n?"[Animated Sticker]":"[动画表情]";case k.MSG_MERGER:return n?"[Chat Record]":"[聊天记录]";default:return""}};function Bt(e){return e===k.MSG_TEXT||e===k.MSG_CUSTOM||e===k.MSG_LOCATION||e===k.MSG_FACE}function Vt(e){var t=[];if(!lt(e))return t;var n=e.length;if(0===n)return t;for(var o=n-1;0<=o;o--)"1"===e[o]&&t.push(Math.pow(2,n-o-1));return t}function Ht(){return!de&&!ee}function jt(e){return"the length of userIDList cannot exceed ".concat(e)}function Kt(e){var t;if(Xe(e)&&0!==e.length)return t=0,e.forEach((function(e){t+=e})),t.toFixed(0)}function Wt(e){var t;if(Xe(e)&&0!==e.length)return t=0,e.forEach((function(e){t+=e})),(t/e.length).toFixed(0)}function Yt(e,t,n){t=!(1<arguments.length&&void 0!==t)||t,n=!(2<arguments.length&&void 0!==n)||n;var o=Date.now();return t?n?"".concat(o-e," ms"):"".concat(Math.round((o-e)/1e3)," s"):n?o-e:Math.round((o-e)/1e3)}function zt(e){return!!(e&&1<e)}function $t(e,t,n,o){if(void 0===t)return 1;var i,r,a=!0;return t.required&&je(e)&&(we.e("[".concat(n,'] Missing required params: "').concat(o,'".')),a=!1),je(e)||(i=ht(e))!==(r=t.type.toLowerCase())&&("asyncfunction"===i&&"function"===r||(we.e("[".concat(n,'] Invalid params: type check failed for "').concat(o,'". Expected ').concat(t.type,".")),a=!1)),t.validator&&!t.validator(e,n,o)&&(we.e("[".concat(n,'] Invalid params: custom validator check failed for "').concat(o,'".')),a=!1),a}function Xt(e){return!!e&&(!!(St(e)||Et(e)||kt(e))||((e=wn("InvalidConversationID",e))&&we.w(e),!1))}function Jt(e){""!==e.desc&&""!==wn("API_REFER")&&we.w("[".concat(e.api,"] | ").concat(e.paramName," | ").concat(e.desc,", ").concat(wn("API_REFER")).concat(e.api))}function Qt(){return wn("StringRequiredLog")}function Zt(e){return wn("NonEmptyStringRequiredLog",e)}function en(){return wn("NumberRequiredLog")}function tn(){return wn("UndefinedNotAllowedLog")}function nn(){return wn("FileRequiredLog")}function on(){return wn("FunctionRequiredLog")}function rn(){return wn("ArrayRequiredLog")}function an(){return wn("NonEmptyArrayLog")}function sn(){return wn("CallbackMissingLog")}function cn(){return wn("PositiveIntegerRequiredLog")}function un(e,t){return wn("StringNotLongerThanLog",e,t)}function ln(e,t){return wn("NumberGreaterOrEqualLog",e,t)}function dn(e){return wn("KeyValueStringRequiredLog",e)}function fn(){return wn("PlainObjectRequiredLog")}function pn(){return wn("NonEmptyContentRequiredLog")}function hn(){return wn("FileNotSelectedLog")}function gn(){return wn("MessageInstanceRequiredLog")}function _n(){return wn("NonAnonymousFunctionLog")}function vn(){return wn("MessageExtensionNotAvailableLog")}function mn(){return wn("MessageReactionRequiredLog")}function yn(e,t){return wn("MaximumArrayLengthLog",e,t)}function Mn(e){return{code:0,data:e||{}}}function In(e){return Promise.resolve(Mn(e))}function Cn(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(e instanceof Gn)return t&&null!==xn&&xn.emit(E.ERROR,e),Promise.reject(e);if(e instanceof Error)return n=new Gn({code:Un.UNCAUGHT_ERROR}),t&&null!==xn&&xn.emit(E.ERROR,n),Promise.reject(n);if(dt(e)||dt(e.code))return Promise.reject(new Gn({code:Un.UNCAUGHT_ERROR}));var n=new Gn(e);return t&&null!==xn&&xn.emit(E.ERROR,n),Promise.reject(n)}var bn,Tn="unSend",Sn="success",En="fail",kn="notStart",Dn="pending",An="resolved",Ln="rejected",On=(Q={type:"String",required:!0},te={type:"Array",required:!0},X={type:"Object",required:!0},{type:"Boolean",required:!0}),Rn={type:"number",required:!0},wn=null,Nn={hookGetAPITips:function(e){wn=e},login:{userID:Q,userSig:Q},addToBlacklist:{userIDList:te},removeFromBlacklist:{userIDList:te},on:[{name:"eventName",type:"String",validator:function(e,t,n){return"string"==typeof e&&0!==e.length||(Jt({api:t,paramName:n,desc:Zt(n)}),!1)}},{name:"handler",type:"Function",validator:function(e,t,n){return"function"!=typeof e?(Jt({api:t,paramName:n,desc:on()}),!1):(""===e.name&&Jt({api:t,paramName:n,desc:_n()}),!0)}}],once:[{name:"eventName",type:"String",validator:function(e,t,n){return"string"==typeof e&&0!==e.length||(Jt({api:t,paramName:n,desc:Zt(n)}),!1)}},{name:"handler",type:"Function",validator:function(e,t,n){return"function"!=typeof e?(Jt({api:t,paramName:n,desc:on()}),!1):(""===e.name&&Jt({api:t,paramName:n,desc:_n()}),!0)}}],off:[{name:"eventName",type:"String",validator:function(e,t,n){return"string"==typeof e&&0!==e.length||(Jt({api:t,paramName:n,desc:Zt(n)}),!1)}},{name:"handler",type:"Function",validator:function(e,t,n){return"function"!=typeof e?(Jt({api:t,paramName:n,desc:on()}),!1):(""===e.name&&Jt({api:t,paramName:n,desc:_n()}),!0)}}],sendMessage:[t({name:"message"},X)],setMessageExtensions:[t(t({name:"message"},X),{},{validator:function(e,t,n){return e.status===Sn&&!0===e.isSupportExtension||(Jt({api:t,paramName:n,desc:vn()}),!1)}}),t({name:"extensions"},te)],getMessageExtensions:[t(t({name:"message"},X),{},{validator:function(e,t,n){return e.status===Sn&&!0===e.isSupportExtension||(Jt({api:t,paramName:n,desc:vn()}),!1)}})],deleteMessageExtensions:[t(t({name:"message"},X),{},{validator:function(e,t,n){return e.status===Sn&&!0===e.isSupportExtension||(Jt({api:t,paramName:n,desc:vn()}),!1)}})],addMessageReaction:[t(t({name:"message"},X),{},{validator:function(e,t,n){return e.status===Sn||(Jt({api:t,paramName:n,desc:mn()}),!1)}}),t({name:"reactionID"},Q)],removeMessageReaction:[t(t({name:"message"},X),{},{validator:function(e,t,n){return e.status===Sn||(Jt({api:t,paramName:n,desc:mn()}),!1)}}),t({name:"reactionID"},Q)],getMessageReactions:{messageList:t({},te)},getAllUserListOfMessageReaction:{message:t(t({},X),{},{validator:function(e,t,n){return e.status===Sn||(Jt({api:t,paramName:n,desc:mn()}),!1)}}),reactionID:t({},Q),nextSeq:{type:"Number"},count:{type:"Number"}},getMessageList:{conversationID:t(t({},Q),{},{validator:Xt}),nextReqMessageID:{type:"String"},count:{type:"Number",validator:function(e,t,n){return!(!dt(e)&&!/^[1-9][0-9]*$/.test(e)&&(Jt({api:t,paramName:n,desc:cn()}),1))}}},getMessageListHopping:{conversationID:t(t({},Q),{},{validator:Xt}),sequence:{type:"Number"},time:{type:"Number"},direction:{type:"Number",validator:function(e,t,n){return!(!dt(e)&&0!==e&&1!==e&&(Jt({api:t,paramName:n,desc:wn("0Or1RequiredLog")}),1))}},count:{type:"Number",validator:function(e,t,n){return!(!dt(e)&&!/^[1-9][0-9]*$/.test(e)&&(Jt({api:t,paramName:n,desc:cn}),1))}}},setMessageRead:{conversationID:t(t({},Q),{},{validator:Xt})},setAllMessageRead:{scope:{type:"String",required:!1,validator:function(e,t,n){return!e||-1!==[k.READ_ALL_C2C_MSG,k.READ_ALL_GROUP_MSG,k.READ_ALL_MSG].indexOf(e)||(Jt({api:t,paramName:n,desc:wn("ValidScopeRequired")}),!1)}}},getConversationProfile:[t(t({name:"conversationID"},Q),{},{validator:Xt})],clearHistoryMessage:[t(t({name:"conversationID"},Q),{},{validator:Xt})],pinConversation:{conversationID:t(t({},Q),{},{validator:Xt}),isPinned:t({},On)},setConversationDraft:{conversationID:t(t({},Q),{},{validator:Xt}),draftText:{type:"String",validator:function(e,t,n){return!!lt(e)||(Jt({api:t,paramName:n,desc:Qt()}),!1)}}},setConversationCustomData:{conversationIDList:t({},te),customData:{type:"String",validator:function(e,t,n){return lt(e)?!(256<e.length&&(Jt({api:t,paramName:n,desc:un(n,256)}),1)):(Jt({api:t,paramName:n,desc:Qt()}),!1)}}},markConversation:{conversationIDList:t({},te),markType:{type:"number",validator:function(e,t,n){return Ye(e)?e<=0?(Jt({api:t,paramName:n,desc:wn("NumberGreaterThanLog",n,0)}),!1):!(e>=Math.pow(2,64)&&(Jt({api:t,paramName:n,desc:wn("NumberLessThanLog",n,"Math.pow(2,64)")}),1)):(Jt({api:t,paramName:n,desc:en()}),!1)}},enableMark:t({},On)},createConversationGroup:{conversationIDList:t({},te),groupName:t(t({},Q),{},{validator:function(e,t,n){return!(!e||32<e.length&&(Jt({api:t,paramName:n,desc:un(n,32)}),1))}})},deleteConversationGroup:[t({name:"groupName"},Q)],renameConversationGroup:{oldName:t({},Q),newName:t(t({},Q),{},{validator:function(e,t,n){return!(!e||32<e.length&&(Jt({api:t,paramName:n,desc:un(n,32)}),1))}})},addConversationsToGroup:{conversationIDList:t({},te),groupName:t({},Q)},deleteConversationsFromGroup:{conversationIDList:t({},te),groupName:t({},Q)},getGroupList:{groupProfileFilter:{type:"Array"}},getGroupProfile:{groupID:Q,groupCustomFieldFilter:{type:"Array"},memberCustomFieldFilter:{type:"Array"}},getGroupProfileAdvance:{groupIDList:te},createGroup:{name:Q},joinGroup:{groupID:Q,type:{type:"String"},applyMessage:{type:"String"}},quitGroup:[t({name:"groupID"},Q)],handleApplication:{message:X,handleAction:Q,handleMessage:{type:"String"}},changeGroupOwner:{groupID:Q,newOwnerID:Q},updateGroupProfile:{groupID:Q,muteAllMembers:{type:"Boolean"}},dismissGroup:[t({name:"groupID"},Q)],searchGroupByID:[t({name:"groupID"},Q)],getGroupOnlineMemberCount:[t({name:"groupID"},Q)],initGroupAttributes:{groupID:Q,groupAttributes:t(t({},X),{},{validator:function(e,t,n){var o=!0;return Object.keys(e).forEach((function(i){if(!lt(e[i]))return Jt({api:t,paramName:n,desc:dn("value")}),o=!1})),o}})},setGroupAttributes:{groupID:Q,groupAttributes:t(t({},X),{},{validator:function(e,t,n){var o=!0;return Object.keys(e).forEach((function(i){if(!lt(e[i]))return Jt({api:t,paramName:n,desc:dn("value")}),o=!1})),o}})},deleteGroupAttributes:{groupID:Q,keyList:{type:"Array",validator:function(e,t,n){return dt(e)||!Xe(e)?(Jt({api:t,paramName:n,desc:rn()}),!1):!!je(e)||(o=!0,e.forEach((function(e){if(!lt(e))return Jt({api:t,paramName:n,desc:wn("StringArrayRequiredLog")}),o=!1})),o);var o}}},getGroupAttributes:{groupID:Q,keyList:{type:"Array",validator:function(e,t,n){return dt(e)||!Xe(e)?(Jt({api:t,paramName:n,desc:rn()}),!1):!!je(e)||(o=!0,e.forEach((function(e){if(!lt(e))return Jt({api:t,paramName:n,desc:dn("key")}),o=!1})),o);var o}}},setGroupCounters:{groupID:Q,counters:X},increaseGroupCounter:{groupID:Q,key:Q,value:Rn},decreaseGroupCounter:{groupID:Q,key:Q,value:Rn},getGroupCounters:{groupID:Q},getGroupMemberList:{groupID:Q,count:{type:"Number"}},getGroupMemberProfile:{groupID:Q,userIDList:te,memberCustomFieldFilter:{type:"Array"}},addGroupMember:{groupID:Q,userIDList:te},setGroupMemberRole:{groupID:Q,userID:Q,role:Q},setGroupMemberMuteTime:{groupID:Q,userID:Q,muteTime:{type:"Number",validator:function(e){return 0<=e}}},setGroupMemberNameCard:{groupID:Q,userID:{type:"String"},nameCard:{type:"String",validator:function(e,t,n){return lt(e)?(e.length,!0):(Jt({api:t,paramName:n,desc:Qt()}),!1)}}},setGroupMemberCustomField:{groupID:Q,userID:{type:"String"},memberCustomField:te},deleteGroupMember:{groupID:Q},markGroupMemberList:{groupID:Q,markType:{type:"number",validator:function(e,t,n){return Ye(e)?!(e<1e3&&(Jt({api:t,paramName:n,desc:ln(n,1e3)}),1)):(Jt({api:t,paramName:n,desc:en()}),!1)}},userIDList:t({},te),enableMark:t({},On)},createTextMessage:{to:Q,conversationType:Q,payload:t(t({},X),{},{validator:function(e,t,n){return $e(e)?lt(e.text)?0!==e.text.length||(Jt({api:t,paramName:"payload.text",desc:pn()}),!1):(Jt({api:t,paramName:"payload.text",desc:Qt()}),!1):(Jt({api:t,paramName:n,desc:fn()}),!1)}})},createTextAtMessage:{to:Q,conversationType:Q,payload:t(t({},X),{},{validator:function(e,t,n){return $e(e)?lt(e.text)?0===e.text.length?(Jt({api:t,paramName:"payload.text",desc:pn()}),!1):!(e.atUserList&&!Xe(e.atUserList)&&(Jt({api:t,paramName:"payload.atUserList",desc:rn()}),1)):(Jt({api:t,paramName:"payload.text",desc:Qt()}),!1):(Jt({api:t,paramName:n,desc:fn()}),!1)}})},createCustomMessage:{to:Q,conversationType:Q,payload:t(t({},X),{},{validator:function(e,t,n){return $e(e)?e.data&&!lt(e.data)?(Jt({api:t,paramName:"payload.data",desc:Qt()}),!1):e.description&&!lt(e.description)?(Jt({api:t,paramName:"payload.description",desc:Qt()}),!1):!(e.extension&&!lt(e.extension)&&(Jt({api:t,paramName:"payload.extension",desc:Qt()}),1)):(Jt({api:t,paramName:"payload",desc:fn()}),!1)}})},createImageMessage:{to:Q,conversationType:Q,payload:t(t({},X),{},{validator:function(e,t,n){if(!$e(e))return Jt({api:t,paramName:n,desc:fn()}),!1;if(dt(e.file))return Jt({api:t,paramName:"payload.file",desc:tn()}),!1;if(oe){if(!(e.file instanceof HTMLInputElement||We(e.file)))return $e(e.file)&&"undefined"!=typeof uni?0!==e.file.tempFilePaths.length&&0!==e.file.tempFiles.length||(Jt({api:t,paramName:"payload.file",desc:hn()}),!1):(Jt({api:t,paramName:"payload.file",desc:nn()}),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return Jt({api:t,paramName:"payload.file",desc:hn()}),!1}return!0},onProgress:{type:"Function",required:!1,validator:function(e,t,n){return dt(e)&&Jt({api:t,paramName:n,desc:sn()}),!0}}})},createAudioMessage:{to:Q,conversationType:Q,payload:t(t({},X),{},{validator:function(e,t,n){return!!$e(e)||(Jt({api:t,paramName:n,desc:fn()}),!1)}}),onProgress:{type:"Function",required:!1,validator:function(e,t,n){return dt(e)&&Jt({api:t,paramName:n,desc:sn()}),!0}}},createVideoMessage:{to:Q,conversationType:Q,payload:t(t({},X),{},{validator:function(e,t,n){if(!$e(e))return Jt({api:t,paramName:n,desc:fn()}),!1;if(dt(e.file))return Jt({api:t,paramName:"payload.file",desc:tn()}),!1;if(oe){if(!(e.file instanceof HTMLInputElement||We(e.file)))return $e(e.file)&&"undefined"!=typeof uni?!!We(e.file.tempFile)||(Jt({api:t,paramName:"payload.file",desc:hn()}),!1):(Jt({api:t,paramName:"payload.file",desc:nn()}),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return Jt({api:t,paramName:"payload.file",desc:hn()}),!1}return!0}}),onProgress:{type:"Function",required:!1,validator:function(e,t,n){return dt(e)&&Jt({api:t,paramName:n,desc:sn()}),!0}}},createFaceMessage:{to:Q,conversationType:Q,payload:t(t({},X),{},{validator:function(e,t,n){return $e(e)?Ye(e.index)?!!lt(e.data)||(Jt({api:t,paramName:"payload.data",desc:Qt()}),!1):(Jt({api:t,paramName:"payload.index",desc:en()}),!1):(Jt({api:t,paramName:n,desc:fn()}),!1)}})},createFileMessage:{to:Q,conversationType:Q,payload:t(t({},X),{},{validator:function(e,t,n){if(!$e(e))return Jt({api:t,paramName:n,desc:fn()}),!1;if(dt(e.file))return Jt({api:t,paramName:"payload.file",desc:tn()}),!1;if(oe){if(!(e.file instanceof HTMLInputElement||We(e.file)))return $e(e.file)&&"undefined"!=typeof uni?0!==e.file.tempFilePaths.length&&0!==e.file.tempFiles.length||(Jt({api:t,paramName:"payload.file",desc:hn()}),!1):(Jt({api:t,paramName:"payload.file",desc:nn()}),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return Jt({api:t,paramName:"payload.file",desc:hn()}),!1}return!0}}),onProgress:{type:"Function",required:!1,validator:function(e,t,n){return dt(e)&&Jt({api:t,paramName:n,desc:sn()}),!0}}},createLocationMessage:{to:Q,conversationType:Q,payload:t(t({},X),{},{validator:function(e,t,n){return $e(e)?lt(e.description)?Ye(e.longitude)?!!Ye(e.latitude)||(Jt({api:t,paramName:"payload.latitude",desc:en()}),!1):(Jt({api:t,paramName:"payload.longitude",desc:en()}),!1):(Jt({api:t,paramName:"payload.description",desc:Qt()}),!1):(Jt({api:t,paramName:n,desc:fn()}),!1)}})},createMergerMessage:{to:Q,conversationType:Q,payload:t(t({},X),{},{validator:function(e,t,n){if(je(e.messageList))return Jt({api:t,paramName:"payload.messageList",desc:an()}),!1;if(je(e.compatibleText))return Jt({api:t,paramName:"payload.compatibleText",desc:Zt("compatibleText")}),!1;var o=!1;return e.messageList.forEach((function(e){e.status===En&&(o=!0)})),!o||(Jt({api:t,paramName:"payload.messageList",desc:wn("MergeFailedMessageLog")}),!1)}})},revokeMessage:[t(t({name:"message"},X),{},{validator:function(e,t,n){return je(e)?(Jt({api:t,paramName:n,desc:gn()}),!1):e.conversationType===k.CONV_SYSTEM?(Jt({api:t,paramName:n,desc:wn("MessageCanBeRevokedDesc")}),!1):!0!==e.isRevoked||(Jt({api:t,paramName:n,desc:wn("MessageRevokedLog")}),!1)}})],deleteMessage:[t(t({name:"messageList"},te),{},{validator:function(e,t,n){return!je(e)||(Jt({api:t,paramName:n,desc:an()}),!1)}})],translateText:{sourceTextList:te,sourceLanguage:Q,targetLanguage:Q},convertVoiceToText:{message:t(t({},X),{},{validator:function(e,t,n){return je(e)?(Jt({api:t,paramName:n,desc:gn()}),!1):e.type===k.MSG_AUDIO&&e.status===Sn||(Jt({api:t,paramName:n,desc:wn("AudioMessageRequiredLog")}),!1)}})},modifyMessage:[t(t({name:"message"},X),{},{validator:function(e,t,n){return je(e)?(Jt({api:t,paramName:n,desc:gn()}),!1):e.conversationType===k.CONV_SYSTEM?(Jt({api:t,paramName:n,desc:wn("MessageCanBeModifiedLog")}),!1):!0!==e._onlineOnlyFlag||(Jt({api:t,paramName:n,desc:wn("OnlineMessageNotSupportLog")}),!1)}})],searchCloudMessages:{keywordList:{type:"Array",required:!1,validator:function(e,t,n){return!(e&&(Xe(e)?0===e.length?(Jt({api:t,paramName:n,desc:an()}),1):5<e.length&&(Jt({api:t,paramName:n,desc:yn(n,5)}),1):(Jt({api:t,paramName:n,desc:rn()}),1)))}},keywordListMatchType:{type:"String",required:!1,validator:function(e,t,n){return!e||"or"===e||"and"===e||Jt({api:t,paramName:n,desc:"".concat(e," is invalid match type")})}},senderUserIDList:{type:"Array",required:!1,validator:function(e,t,n){return!(e&&(Xe(e)?(0===e.length&&Jt({api:t,paramName:n,desc:an()}),5<e.length&&(Jt({api:t,paramName:n,desc:yn(n,5)}),1)):(Jt({api:t,paramName:n,desc:rn()}),1)))}},messageTypeList:{type:"Array",required:!1,validator:function(e,t,n){if(!e)return!0;if(!Xe(e))return Jt({api:t,paramName:n,desc:rn()}),!1;0===e.length&&Jt({api:t,paramName:n,desc:an()});var o=[k.MSG_TEXT,k.MSG_IMAGE,k.MSG_AUDIO,k.MSG_FILE,k.MSG_VIDEO,k.MSG_LOCATION,k.MSG_CUSTOM,k.MSG_MERGER];return!(0<e.filter((function(e){return-1===o.indexOf(e)})).length&&(Jt({api:t,paramName:n,desc:wn("ContainsUnsupportedMessageTypeLog",n)}),1))}},conversationID:{type:"String",required:!1,validator:function(e){return!e||Xt(e)}},timePosition:{type:"number",required:!1,validator:function(e,t,n){return!(e&&e<0&&(Jt({api:t,paramName:n,desc:ln(n,0)}),1))}},timePeriod:{type:"number",required:!1,validator:function(e,t,n){return!(e&&e<0&&(Jt({api:t,paramName:n,desc:ln(n,0)}),1))}},cursor:{type:"String",required:!1}},getUserProfile:{userIDList:{type:"Array",validator:function(e,t,n){return Xe(e)?(0===e.length&&Jt({api:t,paramName:n,desc:an()}),!0):(Jt({api:t,paramName:n,desc:rn()}),!1)}}},updateMyProfile:{profileCustomField:{type:"Array",validator:function(e,t,n){return!!dt(e)||!!Xe(e)||(Jt({api:t,paramName:n,desc:rn()}),!1)}}},setSelfStatus:{customStatus:{type:"String",validator:function(e,t,n){return!!lt(e)||(Jt({api:t,paramName:n,desc:Qt()}),!1)}}},getUserStatus:{userIDList:{type:"Array",validator:function(e,t,n){return Xe(e)?0!==e.length||(Jt({api:t,paramName:n,desc:an()}),!1):(Jt({api:t,paramName:n,desc:rn()}),!1)}}},subscribeUserStatus:{userIDList:{type:"Array",validator:function(e,t,n){return Xe(e)?0!==e.length||(Jt({api:t,paramName:n,desc:an()}),!1):(Jt({api:t,paramName:n,desc:rn()}),!1)}}},unsubscribeUserStatus:{userIDList:{type:"Array",validator:function(e,t,n){return!e||!!Xe(e)||(Jt({api:t,paramName:n,desc:rn()}),!1)}}},addFriend:{to:Q,source:{type:"String",required:!0,validator:function(e,t,n){return!(!e||(e.startsWith("AddSource_Type_")?8<e.replace("AddSource_Type_","").length&&(Jt({api:t,paramName:n,desc:un("keyword",8)}),1):(Jt({api:t,paramName:n,desc:wn("SourcePrefixLog")}),1)))}},remark:{type:"String",required:!1,validator:function(e,t,n){return!(lt(e)&&96<e.length&&(Jt({api:t,paramName:n,desc:un(n,96)}),1))}}},deleteFriend:{userIDList:te},checkFriend:{userIDList:te},getFriendProfile:{userIDList:te},updateFriend:{userID:Q,remark:{type:"String",required:!1,validator:function(e,t,n){return!(lt(e)&&96<e.length&&(Jt({api:t,paramName:n,desc:un(n,96)}),1))}},friendCustomField:{type:"Array",required:!1,validator:function(e,t,n){if(e){if(!Xe(e))return Jt({api:t,paramName:n,desc:rn()}),!1;var o=!0;return e.forEach((function(e){return lt(e.key)&&-1!==e.key.indexOf("Tag_SNS_Custom")?lt(e.value)?8<e.key.replace("Tag_SNS_Custom_","").length?(Jt({api:t,paramName:n,desc:un("keyword",8)}),o=!1):void 0:(Jt({api:t,paramName:n,desc:dn("value")}),o=!1):(Jt({api:t,paramName:n,desc:wn("FriendCustomFieldPrefixLog")}),o=!1)})),o}return!0}}},acceptFriendApplication:{userID:Q},refuseFriendApplication:{userID:Q},deleteFriendApplication:{userID:Q},createFriendGroup:{name:Q},deleteFriendGroup:{name:Q},addToFriendGroup:{name:Q,userIDList:te},removeFromFriendGroup:{name:Q,userIDList:te},renameFriendGroup:{oldName:Q,newName:Q},sendMessageReadReceipt:[{name:"messageList",type:"Array",validator:function(e,t,n){return Xe(e)?0!==e.length||(Jt({api:t,paramName:n,desc:an()}),!1):(Jt({api:t,paramName:n,desc:rn()}),!1)}}],getMessageReadReceiptList:[{name:"messageList",type:"Array",validator:function(e,t,n){return Xe(e)?0!==e.length||(Jt({api:t,paramName:n,desc:an()}),!1):(Jt({api:t,paramName:n,desc:rn()}),!1)}}],createTopicInCommunity:{groupID:Q,topicName:Q},deleteTopicFromCommunity:{groupID:Q,topicIDList:{type:"Array",validator:function(e,t,n){return!e||!!Xe(e)||(Jt({api:t,paramName:n,desc:rn()}),!1)}}},updateTopicProfile:{groupID:Q,topicID:Q},getTopicList:{groupID:Q,topicIDList:{type:"Array",validator:function(e,t,n){return!e||!!Xe(e)||(Jt({api:t,paramName:n,desc:rn()}),!1)}}},followUser:[t({name:"userIDList"},te)],unfollowUser:[t({name:"userIDList"},te)],getMyFollowingList:[t(t({name:"startIndex"},Q),{},{required:!1})],getMyFollowersList:[t(t({name:"startIndex"},Q),{},{required:!1})],getMutualFollowersList:[t(t({name:"startIndex"},Q),{},{required:!1})],getUserFollowInfo:[t(t({name:"userIDList"},te),{},{required:!1})],checkFollowType:[t({name:"userIDList"},te)],addSignalingListener:[{name:"eventName",type:"String",validator:function(e,t,n){return"string"==typeof e&&0!==e.length||(Jt({api:t,paramName:n,desc:Zt(n)}),!1)}},{name:"handler",type:"Function",validator:function(e,t,n){return"function"!=typeof e?(Jt({api:t,paramName:n,desc:on()}),!1):(""===e.name&&Jt({api:t,paramName:n,desc:_n()}),!0)}}],removeSignalingListener:[{name:"eventName",type:"String",validator:function(e,t,n){return"string"==typeof e&&0!==e.length||(Jt({api:t,paramName:n,desc:Zt(n)}),!1)}},{name:"handler",type:"Function",validator:function(e,t,n){return"function"!=typeof e?(Jt({api:t,paramName:n,desc:on()}),!1):(""===e.name&&Jt({api:t,paramName:n,desc:_n()}),!0)}}],invite:{userID:Q},inviteSync:[t(t({},X),{},{validator:function(e,t,n){return $e(e)?!!lt(e.userID)||(Jt({api:t,paramName:"options.userID",desc:Qt()}),!1):(Jt({api:t,paramName:"options",desc:fn()}),!1)}}),{name:"successCb",type:"Function",required:!1,validator:function(e,t,n){return dt(e)&&Jt({api:t,paramName:n,desc:on()}),!0}},{name:"errorCb",type:"Function",required:!1,validator:function(e,t,n){return dt(e)&&Jt({api:t,paramName:n,desc:on()}),!0}}],inviteInGroup:{groupID:Q,inviteeList:te},inviteInGroupSync:[t(t({},X),{},{validator:function(e,t,n){return $e(e)?lt(e.groupID)?!!Xe(e.inviteeList)||(Jt({api:t,paramName:"options.inviteeList",desc:rn()}),!1):(Jt({api:t,paramName:"options.groupID",desc:Qt()}),!1):(Jt({api:t,paramName:"options",desc:fn()}),!1)}}),{name:"successCb",type:"Function",required:!1,validator:function(e,t,n){return dt(e)&&Jt({api:t,paramName:n,desc:on()}),!0}},{name:"errorCb",type:"Function",required:!1,validator:function(e,t,n){return dt(e)&&Jt({api:t,paramName:n,desc:on()}),!0}}],accept:{inviteID:Q},reject:{inviteID:Q},getSignalingInfo:[t(t({name:"message"},X),{},{validator:function(e,t,n){return!je(e)||(Jt({api:t,paramName:n,desc:gn()}),!1)}})],modifyInvitation:{inviteID:Q,data:Q}},Pn={login:1,logout:1,getLoginUser:1,on:1,once:1,off:1,setLogLevel:1,registerPlugin:1,destroy:1,isReady:1,createTextMessage:1,createTextAtMessage:1,createImageMessage:1,createAudioMessage:1,createVideoMessage:1,createCustomMessage:1,createFaceMessage:1,createFileMessage:1,createLocationMessage:1,createMergerMessage:1,downloadMergerMessage:1,createForwardMessage:1,sendMessage:1,resendMessage:1,revokeMessage:1,deleteMessage:1,translateText:1,convertVoiceToText:1,modifyMessage:1,searchCloudMessages:1,sendMessageReadReceipt:1,getGroupMessageReadMemberList:1,getMessageReadReceiptList:1,setMessageExtensions:1,getMessageExtensions:1,deleteMessageExtensions:1,addMessageReaction:1,removeMessageReaction:1,getMessageReactions:1,getAllUserListOfMessageReaction:1,getMessageList:1,findMessage:1,getMessageListHopping:1,setMessageRead:1,setAllMessageRead:1,getConversationList:1,getConversationProfile:1,deleteConversation:1,setConversationDraft:1,pinConversation:1,getTotalUnreadMessageCount:1,setConversationCustomData:1,markConversation:1,createConversationGroup:1,getConversationGroupList:1,deleteConversationGroup:1,renameConversationGroup:1,addConversationsToGroup:1,deleteConversationsFromGroup:1,clearHistoryMessage:1,setMessageRemindType:1,setAllReceiveMessageOpt:1,getAllReceiveMessageOpt:1,getGroupList:1,getGroupProfile:1,createGroup:1,joinGroup:1,updateGroupProfile:1,quitGroup:1,dismissGroup:1,changeGroupOwner:1,searchGroupByID:1,getGroupApplicationList:1,handleGroupApplication:1,initGroupAttributes:1,setGroupAttributes:1,deleteGroupAttributes:1,getGroupAttributes:1,setGroupCounters:1,increaseGroupCounter:1,decreaseGroupCounter:1,getGroupCounters:1,getJoinedCommunityList:1,createTopicInCommunity:1,deleteTopicFromCommunity:1,updateTopicProfile:1,getTopicList:1,getGroupMemberProfile:1,getGroupMemberList:1,addGroupMember:1,deleteGroupMember:1,setGroupMemberNameCard:1,setGroupMemberMuteTime:1,setGroupMemberRole:1,setGroupMemberCustomField:1,getGroupOnlineMemberCount:1,markGroupMemberList:1,getMyProfile:1,getUserProfile:1,updateMyProfile:1,setSelfStatus:1,getUserStatus:1,subscribeUserStatus:1,unsubscribeUserStatus:1,getBlacklist:1,addToBlacklist:1,removeFromBlacklist:1,getFriendList:1,addFriend:1,deleteFriend:1,checkFriend:1,updateFriend:1,getFriendProfile:1,getFriendApplicationList:1,refuseFriendApplication:1,deleteFriendApplication:1,acceptFriendApplication:1,setFriendApplicationRead:1,getFriendGroupList:1,createFriendGroup:1,renameFriendGroup:1,deleteFriendGroup:1,addToFriendGroup:1,removeFromFriendGroup:1,followUser:1,unfollowUser:1,getMyFollowingList:1,getMyFollowersList:1,getMutualFollowersList:1,getUserFollowInfo:1,checkFollowType:1,callExperimentalAPI:1,addSignalingListener:1,removeSignalingListener:1,invite:1,inviteSync:1,inviteInGroup:1,inviteInGroupSync:1,cancel:1,accept:1,reject:1,getSignalingInfo:1,modifyInvitation:1},Gn=(l(ro,function(e){var t="function"==typeof Map?new Map:void 0;return function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return h(e,arguments,d(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),f(n,e)}(e)}(Error)),bn=v(ro),c(ro)),Un={NO_SDKAPPID:2e3,NO_ACCOUNT_TYPE:2001,NO_IDENTIFIER:2002,NO_USERSIG:2003,NO_TINYID:2022,NO_A2KEY:2023,USER_NOT_LOGGED_IN:2024,REPEAT_LOGIN:2025,COS_UNDETECTED:2040,COS_GET_SIG_FAIL:2041,MSG_SEND_FAIL:2100,MSG_SEND_FAIL_NOT_IN_AV:2101,MSG_INSTANCE_REQUIRED:2105,MSG_INVALID_CONV_TYPE:2106,MSG_F_IS_EMPTY:2108,MSG_ONPROGRESS_ERR:2109,MSG_REVOKE_FAIL:2110,MSG_DELETE_FAIL:2111,MSG_UNREAD_ALL_FAIL:2112,READ_RECEIPT_MSG_LIST_EMPTY:2114,MSG_SEND_GRP_WITH_TOPIC_FAIL:2115,CANNOT_DELETE_GRP_SYSTEM_NOTICE:2116,TRANSLATE_TEXT_FAIL:2117,VOICE_TO_TEXT_FAIL:2118,UNSUPPORTED_VOICE_FORMAT:2119,MSG_I_SELECT_F_FIRST:2251,MSG_I_TYPES_LIMIT:2252,MSG_I_SIZE_LIMIT:2253,MSG_A_UPLOAD_FAIL:2300,MSG_A_SIZE_LIMIT:2301,MSG_V_UPLOAD_FAIL:2350,MSG_V_SIZE_LIMIT:2351,MSG_V_TYPES_LIMIT:2352,MSG_F_UPLOAD_FAIL:2400,MSG_F_SELECT_F_FIRST:2401,MSG_F_SIZE_LIMIT:2402,MSG_F_URL_IS_EMPTY:2403,MSG_MERGER_TYPE_INVALID:2450,MSG_MERGER_KEY_INVALID:2451,MSG_MERGER_DOWNLOAD_FAIL:2452,MSG_FORWARD_TYPE_INVALID:2453,MSG_FORWARD_INVALID_ELEMENTS:2454,MSG_MODIFY_CONFLICT:2480,MSG_MODIFY_DISABLED_IN_AV:2481,CONV_NOT_FOUND:2500,USER_OR_GRP_NOT_FOUND:2501,CONV_UN_RECORDED_TYPE:2502,INVALID_CONV_ID:2503,ILLEGAL_GRP_TYPE:2600,ILLEGAL_GRP_ID:2602,CANNOT_FIND_GRP:2603,CANNOT_CHANGE_OWNER_IN_AV:2620,CANNOT_CHANGE_OWNER_TO_SELF:2621,MEMBER_NOT_IN_GRP:2623,JOIN_GRP_FAIL:2660,CANNOT_ADD_MEMBER_IN_AV:2661,CANNOT_JOIN_NON_AV_WITHOUT_LOGIN:2662,NOT_OWNER:2681,CANNOT_SET_MEMBER_ROLE_IN_WORK_AND_AV:2682,INVALID_MEMBER_ROLE:2683,CANNOT_SET_SELF_MEMBER_ROLE:2684,CANNOT_MUTE_SELF:2685,BAN_DURATION_INVALID:2686,OPERATION_NOT_SUPPORTED_IN_AV:2687,NOT_MY_FRIEND:2700,ALREADY_MY_FRIEND:2701,FRIEND_GRP_EXISTED:2710,FRIEND_GRP_NOT_EXIST:2711,FRIEND_APPLICATION_NOT_EXIST:2716,UPDATE_PROFILE_INVALID_PARAM:2721,UPDATE_PROFILE_NO_KEY:2722,CANNOT_ADD_SELF_TO_BLACKLIST:2742,NETWORK_ERROR:2800,NETWORK_TIMEOUT:2801,NO_NETWORK:2805,UNCAUGHT_ERROR:2903,INVALID_OPERATION:2905,INVALID_TRTC_CMD:2995,OVER_FREQUENCY_LIMIT:2996,NO_PROTOCOL:2997,NO_MODULE:2998,SDK_IS_NOT_READY:2999,LOGGING_IN:3e3,LOGIN_FAILED:3001,KICKED_OUT_MULT_DEVICE:3002,KICKED_OUT_MULT_ACCOUNT:3003,KICKED_OUT_USERSIG_EXPIRED:3004,LOGGED_OUT:3005,KICKED_OUT_REST_API:3006,ILLEGAL_TOPIC_ID:3021,NO_USE:3122,PROFANITY_FOUND:3123,OPTIONS_IS_EMPTY:3153,MSG_A2KEY_EXPIRED:20002,ACCOUNT_A2KEY_EXPIRED:70001,HELLO_ANSWER_KICKED_OUT:1002,OPEN_SERVICE_OVERLOAD_ERROR:60022,SIGNALING_INVALID_INVITE_ID:8010,SIGNALING_NO_PERMISSION:8011,SIGNALING_ALREADY_EXISTS:8012,INVALID_CANCEL_MESSAGE:8020,MSG_SEARCH_CURSOR_INVALID:27002,MSG_SEARCH_CURSOR_EXPIRED:27003},xn=null,Fn=(Rn=(c(io,[{key:"isLoggedIn",value:function(){return this._m.get(12).isLoggedIn()}},{key:"isOversea",value:function(){return this._m.get(12).isOversea()}},{key:"isPrivateNetWork",value:function(){var e=this._m.get(12);return e.isPrivateNetWork()&&!e.getFileDownloadProxy()}},{key:"getFileDownloadProxy",value:function(){return this._m.get(12).getFileDownloadProxy()}},{key:"getDowloadFileAuthKey",value:function(){return this._m.get(12).getDowloadFileAuthKey()}},{key:"getMyUserID",value:function(){return this._m.get(12).getUserID()}},{key:"getMyTinyID",value:function(){return this._m.get(12).getTinyID()}},{key:"getSDKAppID",value:function(){return this._m.get(12).getSDKAppID()}},{key:"isIntl",value:function(){return this._m.get(12).isIntl()}},{key:"isUsingChatCore",value:function(){return this._m.get(12).isUsingChatCore()}},{key:"isDevMode",value:function(){return this._m.get(12).isDevMode()}},{key:"get",value:function(e){return this._m.get(e)}},{key:"getPlatform",value:function(){return ae}},{key:"getCloudConfig",value:function(e){return this._m.get(23).getCloudConfig(e)}},{key:"emitOEvt",value:function(e,t){this._m.getOEmitInst().emit(e,t)}},{key:"emitIEvt",value:function(e,t){this._m.getIEmitInst().emit(e,t)}},{key:"getIEmitInst",value:function(){return this._m.getIEmitInst()}},{key:"generateTjgID",value:function(e){return this._m.get(12).getTinyID()+"-"+e.random}},{key:"req",value:function(e){return this._m.get(20).req(e)}},{key:"canIUse",value:function(e){return this._m.get(27).canIUse(e)}},{key:"getErrMsg",value:function(e,t,n){return this._m.getErrMsg(e,t,n)}},{key:"warn",value:function(e,t,n){e=this.getErrMsg(e,t,n),e&&we.w(e)}},{key:"noUse",value:function(e){var t=Un.NO_USE;return Cn({code:t,message:this.getErrMsg(t,e)})}}]),io),{LOGIN:"wslogin",LOGOUT:"wslogout",HELLO:"wshello",KICK_OTHER:"KickOther",SYNC_UNREAD_MSG:"getmsg",SEND_C2C_MSG:"sendmsg",SEND_GRP_MSG:"send_group_msg",GET_USER_PROFILE:"portrait_get_all",UPDATE_MY_PROFILE:"portrait_set",GET_BL:"black_list_get",ADD_TO_BL:"black_list_add",RM_FROM_BL:"black_list_delete",GET_FD_LIST:"friend_get",GET_FD_PROFILE:"friend_get_specified",CHECK_FD:"friend_check",DEL_FD:"friend_delete",ADD_FD:"friend_add",UPDATE_FD:"friend_update",RESPOND_FD_APPLICATION:"friend_response",GET_FD_APPLICATION_LIST:"pendency_get",DEL_FD_APPLICATION:"pendency_delete",REFUSE_FD_APPLICATION:"pendency_refuse",REPORT_FD_APPLICATION:"pendency_report",GET_FD_GRP_LIST:"group_get",CREATE_FD_GRP:"group_add",DEL_FD_GRP:"group_delete",UPDATE_FD_GRP:"group_update",REVOKE_C2C_MSG:"msgwithdraw",SET_C2C_MSG_READ:"msgreaded",SET_C2C_PEER_MUTE_NOTIFICATIONS:"set_c2c_peer_mute_notifications",GET_C2C_PEER_MUTE_NOTIFICATIONS:"get_c2c_peer_mute_notifications",GET_C2C_ROAMING_MSG:"getroammsg",GET_C2C_PEER_READ_TIME:"get_peer_read_time",DEL_C2C_MSG:"delete_c2c_msg_ramble",MODIFY_C2C_MSG:"modify_c2c_msg",MODIFY_C2C_MSG_EXT:"set_key_values",GET_C2C_MSG_EXT:"get_key_values",ADD_C2C_MSG_REACTION:"reaction_add",RM_C2C_MSG_REACTION:"reaction_del",GET_C2C_MSG_REACTIONS:"reaction_multi_stat",GET_C2C_MSG_REACTION_USER_LIST:"reaction_iterate",PAGING_GET_CONV_LIST:"page_get",DEL_CONV:"batch_delete",CLEAR_HISTORY_MSG:"clear_msg",PIN_CONV:"top",DEL_GROUP_AT_TIPS:"deletemsg",SET_CONV_CUSTOM_DATA:"set_conv_custom_data",MARK_CONV:"mark_contact",CREATE_CONV_GRP:"create_contact_group",DEL_CONV_GRP:"del_contact_group",RENAME_CONV_GRP:"update_contact_group",ADD_CONV_TO_GRP:"add_conv_to_group",DEL_CONV_FROM_GRP:"del_conv_from_group",GET_CONV_GRP_LIST:"get_contact_group",SEARCH_CONV_GRP_MARK:"search_contact_group",GET_GRP_LIST:"get_joined_group_list",GET_GRP_PROFILE:"get_group_self_member_info",CREATE_GRP:"create_group",DISMISS_GRP:"destroy_group",UPDATE_GRP_PROFILE:"modify_group_base_info",APPLY_JOIN_GRP:"apply_join_group",APPLY_JOIN_GRP_NOAUTH:"apply_join_group_noauth",QUIT_GRP:"quit_group",SEARCH_GRP:"get_group_public_info",CHANGE_GRP_OWNER:"change_group_owner",HANDLE_GRP_APPLICATION:"handle_apply_join_group",HANDLE_INVITE_JOIN_GRP:"handle_invite_join_permission_group",HANDLE_GRP_INVITATION:"handle_invite_join_group",REVOKE_GRP_MSG:"group_msg_recall",SET_GRP_MSG_READ:"msg_read_report",SET_ALL_MSG_READ:"read_all_unread_msg",GET_GRP_ROAMING_MSG:"group_msg_get",GET_READ_RECEIPT:"get_group_msg_receipt",SEND_READ_RECEIPT:"group_msg_receipt",SEND_C2C_READ_RECEIPT:"c2c_msg_read_receipt",GET_READ_RECEIPT_DETAIL:"get_group_msg_receipt_detail",GET_GRP_PENDENCY:"get_pendency",DEL_GRP_SYSTEM_NOTICE:"deletemsg",AV_POLLING:"get_msg",AV_NOAUTH_POLLING:"get_msg_noauth",GET_ONLINE_MBR_NUM:"get_online_member_num",DEL_GRP_MSG:"delete_group_ramble_msg_by_seq",MODIFY_GRP_MSG:"modify_group_msg",SET_GRP_ATTR:"set_group_attr",MODIFY_GRP_ATTR:"modify_group_attr",DEL_GRP_ATTR:"delete_group_attr",CLEAR_GRP_ATTR:"clear_group_attr",GET_GRP_ATTR:"get_group_attr",MODIFY_GRP_MSG_EXT:"group_set_key_values",GET_GRP_MSG_EXT:"group_get_key_values",GET_GRP_NOTIFY:"batch_get_group_notify",UPDATE_GRP_COUNTER:"update_group_counter",GET_GRP_COUNTER:"get_group_counter",ADD_GRP_MSG_REACTION:"group_reaction_add",RM_GRP_MSG_REACTION:"group_reaction_del",GET_GRP_MSG_REACTIONS:"group_reaction_multi_stat",GET_GRP_MSG_REACTION_USER_LIST:"group_reaction_iterate",GET_GRP_MBR_LIST:"get_group_member_info",GET_AV_MBR_LIST:"get_members",GET_GRP_MBR_PROFILE:"get_specified_group_member_info",ADD_GRP_MBR:"add_group_member",DEL_GRP_MBR:"delete_group_member",BAN_AV_MBR:"ban_group_member",MODIFY_GRP_MBR_INFO:"modify_group_member_info",MARK_AV_MBR_INFO:"modify_user_info",COS_SIGN:"cos",COS_PRE_SIG:"pre_sig",SIMPLE_COS_PRE_SIG:"simple_sig",GET_IMAGE_INFO:"get_imageinfo",GET_IP:"get_final_ip",VIDEO_COVER:"video_cover",SSO_STAT:"tim_web_report_v2",PING:"alive",MSG_PUSH:"msg_push",MSG_CLOUD_SEARCH:"query",MULTI_MSG_PUSH:"multi_msg_push_ws",MSG_PUSH_ACK:"ws_msg_push_ack",STATUS_FORCE_OFFLINE:"stat_forceoffline",UPLOAD_MERGER_MSG:"save_relay_json_msg",DOWNLOAD_MERGER_MSG:"get_relay_json_msg",FETCH_CLOUD_CTRL_CONFIG:"fetch_config",PUSHED_CLOUD_CTRL_CONFIG:"push_configv2",FETCH_COMMERCIAL_CONFIG:"fetch_imsdk_purchase_bitsv2",PUSHED_COMMERCIAL_CONFIG:"push_imsdk_purchase_bitsv2",OVERLOAD_NOTIFY:"notify2",CREATE_TOPIC:"create_topic",DEL_TOPIC:"destroy_topic",UPDATE_TOPIC_PROFILE:"modify_topic",GET_TOPIC_LIST:"get_topic",SET_SELF_STATUS:"ws_set_custom_status",GET_USER_STATUS:"ws_get_user_status",SUB_USER_STATUS:"ws_status_subscribe",UNSUB_USER_STATUS:"ws_status_unsubscribe",STAT_BACKGROUND:"ws_stat_background",STAT_FOREGROUND:"ws_stat_foreground",SET_TOKEN:"ws_stat_settoken",PUSH_REPORT:"uniapp_sdk_report",GET_PROFANITY_LIST:"get_local_words",TRANSLATE_TEXT:"ws_batch_trans_text",VOICE_TO_TEXT:"ws_sentence_recognition",FOLLOW:"follow_add",UNFOLLOW:"follow_delete",GET_FOLLOW:"follow_get",GET_FOLLOW_INFO:"follow_get_info",CHECK_FOLLOW_TYPE:"follow_check",SET_ALL_RECEIVE_MSG_OPT:"ws_set_do_not_disturb",GET_ALL_RECEIVE_MSG_OPT:"ws_get_do_not_disturb"}),qn="networkRTT",Bn="messageE2EDelay",Vn="sendMessageC2C",Hn="sendMessageGroup",jn="sendMessageGroupAV",Kn="sendMessageRichMedia",Wn="cosUpload",Yn="messageReceivedGroup",zn="messageReceivedGroupAVPush",$n="messageReceivedGroupAVPull",Xn=(u(On={},qn,2),u(On,Bn,3),u(On,Vn,4),u(On,Hn,5),u(On,jn,6),u(On,Kn,7),u(On,Yn,8),u(On,zn,9),u(On,$n,10),u(On,Wn,11),On),Jn={info:4,warning:5,error:6},Qn={wifi:1,"2g":2,"3g":3,"4g":4,"5g":5,unknown:6,none:7,online:8},Zn={login:4,plugin_search:16,plugin_translate:16,plugin_voice_to_text:16,plugin_cs:16,plugin_push:16,plugin_bot:16,plugin_emoji_reaction:16},eo=(c(oo,[{key:"updateTimeStamp",value:function(){this.timestamp=Ae()}},{key:"start",value:function(e){return this._startts=e,this}},{key:"end",value:function(){var e,t=this,n=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this._sentFlag||(this._netMonitorModule&&(e=this._netMonitorModule.getNetworkType(),this.setNetworkType(e)),e=Ae(),0===this.costTime&&(this.costTime=e-this._startts),this.setMoreMessage("startts:".concat(this._startts," endts:").concat(e)),n?(this._sentFlag=!0,this._eventStatModule&&this._eventStatModule.pushIn(this)):setTimeout((function(){t._sentFlag=!0,t._eventStatModule&&t._eventStatModule.pushIn(t)}),0))}},{key:"setError",value:function(e){if(!(e instanceof Error))return we.w("".concat(this._n,".setError value not instanceof Error, please check!")),this;if(this._sentFlag)return this;var t=!0;return(t=this._netMonitorModule?this._netMonitorModule.isOnline():t)?(e.code&&this.setCode(e.code),e.message&&this.setMoreMessage(e.message)):this.setCode(Un.NO_NETWORK),this.setLevel("error"),this}},{key:"setCode",value:function(e){return dt(e)||this._sentFlag||("ECONNABORTED"===e&&(this.code=103),Ye(e)?this.code=e:we.w("".concat(this._n,".setCode value not a number, please check!"),e,n(e))),this}},{key:"setMessage",value:function(e){return dt(e)||this._sentFlag||(Ye(e)&&(this.message=e.toString()),lt(e)&&(this.message=e)),this}},{key:"setCostTime",value:function(e){return this.costTime=e,this}},{key:"setLevel",value:function(e){return dt(e)||this._sentFlag||(this.level=Jn[e]),this}},{key:"setMoreMessage",value:function(e){return je(this.moreMessage)?this.moreMessage="".concat(e):this.moreMessage+=" ".concat(e),this}},{key:"setNetworkType",value:function(e){return dt(e)?we.w("".concat(this._n,".setNetworkType value is undefined, please check!")):(e=Qn[e.toLowerCase()],dt(e)||(this.networkType=e)),this}},{key:"getStartTs",value:function(){return this._startts}},{key:"setUIPlatform",value:function(e){return this.uiPlatform=e,this}},{key:"setExtension",value:function(e){return this.extension=e,this}},{key:"setEventType",value:function(e){return this.eventType=e,this}}],[{key:"bindEventStatModule",value:function(e){oo.prototype._eventStatModule=e}},{key:"bindNetMonitorModule",value:function(e){oo.prototype._netMonitorModule=e}}]),oo),to=(c(no,[{key:"setText",value:function(e){this.content.text=e}},{key:"sendable",value:function(){return 0!==this.content.text.length}}]),no);function no(e){r(this,no),this.type=k.MSG_TEXT,this.content={text:e.text||""}}function oo(e){r(this,oo),this._n="SSOLogData",this.eventType=Zn[e]||0,this.timestamp=0,this.networkType=8,this.code=0,this.message="",this.moreMessage="",this.extension=e,this.costTime=0,this.duplicate=!1,this.level=4,this.uiPlatform=void 0,this._sentFlag=!1,this._startts=Ae()}function io(e){r(this,io),this._m=e,this._n=""}function ro(e){r(this,ro),t=bn.call(this);var t,n=e.code,o=e.message;e=e.data;return t.code=n,o?t.message=o:t._getErrMsg&&(t.message=t._getErrMsg(t.code)),t.data=e||{},t}function ao(e,t,n,o){var i;o=3<arguments.length&&void 0!==o?o:[];if(e)return i=e,t&&(e.startsWith("http://")?i=e.replace(/^http:\/\/[^/]+/,t):e.startsWith("https://")&&(i=e.replace(/^https:\/\/[^/]+/,t))),n&&-1===e.indexOf("authKey=")&&uo(e,o)?(-1<e.indexOf("?")?"".concat(e,"&authKey="):"".concat(e,"?authKey=")).concat(n):i}function so(e,t,n){n=2<arguments.length&&void 0!==n?n:[];return e===k.MSG_VIDEO?uo((t[0].content||t[0].payload).snapshotUrl,n)&&(t[0].content?(t[0].content.snapshotUrl=co(t[0].content.snapshotUrl),t[0].content.thumbUrl=co(t[0].content.thumbUrl)):(t[0].payload.snapshotUrl=co(t[0].payload.snapshotUrl),t[0].payload.thumbUrl=co(t[0].payload.thumbUrl))):e===k.MSG_FILE?uo((t[0].content||t[0].payload).fileUrl,n)&&(t[0].content?t[0].content.fileUrl=co(t[0].content.fileUrl):t[0].payload.fileUrl=co(t[0].payload.fileUrl)):e===k.MSG_MERGER&&(e=(n=t[0].content||t[0].payload).downloadKey,n=void 0===(n=n.messageList)?[]:n,je(void 0===e?"":e)&&n.forEach((function(e){so(e.messageBody[0].type,e.messageBody)}))),t}function co(e){if(!e)return e;if(-1===e.indexOf("authKey="))return e;e=e.split("?");for(var t=e[1].split("&"),n=0,o=0;o<t.length;o++)if(-1<t[o].indexOf("authKey=")){n=o;break}return t.splice(n,1),0<t.length?"".concat(e[0],"?").concat(t.join("&")):e[0]}function uo(e,t){var n=!1;if(e){e=e.match(/:\/\/([0-9]?\.)?(.[^/:]+)/);var o=e&&e[2]||"";if(o.includes("rich-dev"))return 1;for(var i=0;i<t.length;i++)if(o.endsWith(t[i])){n=!0;break}}return n}c(Uo,[{key:"_initImageInfoModel",value:function(){var e=this;this._ImageInfoModel=function(t){this.instanceID=it(9999999),this.sizeType=t.type||0,this.type=0,this.size=t.size||0,this.width=t.width||0,this.height=t.height||0,this.imageUrl=t.imageUrl||t.url||"",this.url=ao(t.url||e._imageMemoryURL,e._fileDownloadProxy,e._authKey,e._fileDNList)},this._ImageInfoModel.prototype={setSizeType:function(e){this.sizeType=e},setType:function(e){this.type=e},setImageUrl:function(e){e&&(this.imageUrl=e)},getImageUrl:function(){return this.imageUrl}}}},{key:"initImageInfoArray",value:function(e){for(var t,n=0,o=null;n<=2;)t=dt(e)||dt(e[n])?{type:0,size:0,width:0,height:0,url:""}:e[n],(o=new this._ImageInfoModel(t)).setSizeType(n+1),o.setType(n),this.addImageInfo(o),n++;this.updateAccessSideImageInfoArray()}},{key:"updateImageInfoArray",value:function(e){for(var t,n=this.content.imageInfoArray.length,o=0;o<n;o++)t=this.content.imageInfoArray[o],e[o].size&&(t.size=e[o].size),e[o].url&&t.setImageUrl(e[o].url),e[o].width&&(t.width=e[o].width),e[o].height&&(t.height=e[o].height)}},{key:"_autoFixUrl",value:function(){for(var e=this.content.imageInfoArray.length,t="",n="",o=["http","https"],i=null,r=0;r<e;r++)this.content.imageInfoArray[r].url&&""!==(i=this.content.imageInfoArray[r]).imageUrl&&(n=i.imageUrl.slice(0,i.imageUrl.indexOf("://")+1),t=i.imageUrl.slice(i.imageUrl.indexOf("://")+1),o.indexOf(n)<0&&(n="https:"),this.content.imageInfoArray[r].setImageUrl([n,t].join("")))}},{key:"updatePercent",value:function(e){this._percent=e,1<this._percent&&(this._percent=1)}},{key:"updateImageFormat",value:function(e){this.content.imageFormat=Ne[e.toUpperCase()]||Ne.UNKNOWN}},{key:"createImageDataASURLInWeb",value:function(e){void 0!==e&&0<e.files.length&&(this._imageMemoryURL=window.URL.createObjectURL(e.files[0]))}},{key:"createImageDataASURL",value:function(e){e&&e.url&&(this._imageMemoryURL=e.url)}},{key:"replaceImageInfo",value:function(e,t){this.content.imageInfoArray[t]instanceof this._ImageInfoModel||(this.content.imageInfoArray[t]=e)}},{key:"addImageInfo",value:function(e){3<=this.content.imageInfoArray.length||this.content.imageInfoArray.push(e)}},{key:"updateAccessSideImageInfoArray",value:function(){var e=this.content.imageInfoArray,t=e[0],n=t.width;n=void 0===n?0:n,t=t.height,t=void 0===t?0:t;0!==n&&0!==t&&(Nt(e),Object.assign(e[2],wt({originWidth:n,originHeight:t,min:720})))}},{key:"sendable",value:function(){return 0!==this.content.imageInfoArray.length&&""!==this.content.imageInfoArray[0].imageUrl&&0!==this.content.imageInfoArray[0].size}}]);var lo=Uo,fo=(c(Go,[{key:"sendable",value:function(){return null!==this.content}}]),Go),po=(c(Po,[{key:"updatePercent",value:function(e){this._percent=e,1<this._percent&&(this._percent=1)}},{key:"updateAudioUrl",value:function(e){this.content.remoteAudioUrl=e}},{key:"sendable",value:function(){return""!==this.content.remoteAudioUrl}}]),Po),ho={from:!0,groupID:!0,groupName:!0,to:!0},go=(c(No,[{key:"_initContent",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case"remarkInfo":break;case"groupProfile":t.content.groupProfile={},t._initGroupProfile(e[n]);break;case"operatorInfo":t.content.operatorInfo={},t._initOperatorInfo(e[n]);break;case"memberInfoList":case"msgMemberInfo":t._updateMemberList(e[n]);break;case"memberExtraInfo":case"onlineMemberInfo":break;case"memberNum":t.content[n]=e[n],t.content.memberCount=e[n];break;case"newGroupProfile":t.content.newGroupProfile={},t._initNewGroupProfile(e[n]);break;default:t.content[n]=e[n]}})),this.content.userIDList||(this.content.userIDList=[this.content.operatorID])}},{key:"_initGroupProfile",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var o=t[n];ho[o]&&(this.content.groupProfile[o]=e[o])}}},{key:"_initOperatorInfo",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var o=t[n];this.content.operatorInfo[o]=e[o]}}},{key:"_updateMemberList",value:function(e){je(this.content.memberList)?this.content.memberList=e:this.content.memberList.forEach((function(t){e.forEach((function(e){t.userID===e.userID&&Object.assign(t,e)}))}))}},{key:"_initNewGroupProfile",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var o=t[n];this.content.newGroupProfile[o]="muteAllMembers"!==o?e[o]:1===e[o]}}}]),No),_o={from:!0,groupID:!0,groupName:!0,to:!0,groupType:!0},vo=(c(wo,[{key:"_initContent",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case"memberInfoList":break;case"remarkInfo":t.content.handleMessage=e[n];break;case"groupProfile":t.content.groupProfile={},t._initGroupProfile(e[n]);break;default:t.content[n]=e[n]}}))}},{key:"_initGroupProfile",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var o=t[n];_o[o]&&("groupName"===o?this.content.groupProfile.name=e[o]:this.content.groupProfile[o]=e[o])}}}]),wo),mo=(c(Ro,[{key:"_getFileInfo",value:function(e){if(!dt(e.fileName)&&!dt(e.fileSize))return{size:e.fileSize,name:e.fileName};var t;e=e.file.files[0];return J&&(e.path&&-1!==e.path.indexOf(".")&&(t=e.path.slice(e.path.lastIndexOf(".")+1).toLowerCase(),e.type=t,e.name||(e.name="".concat(it(999999),".").concat(t))),e.name||(e.type="",e.name=e.path.slice(e.path.lastIndexOf("/")+1).toLowerCase()),e.suffix&&(e.type=e.suffix),e.url||(e.url=e.path)),{size:e.size,name:e.name}}},{key:"updatePercent",value:function(e){this._percent=e,1<this._percent&&(this._percent=1)}},{key:"updateFileUrl",value:function(e){this.content.fileUrl=e}},{key:"sendable",value:function(){return""!==this.content.fileUrl&&""!==this.content.fileName&&0!==this.content.fileSize}}]),Ro),yo=(c(Oo,[{key:"setData",value:function(e){return this.content.data=e,this}},{key:"setDescription",value:function(e){return this.content.description=e,this}},{key:"setExtension",value:function(e){return this.content.extension=e,this}},{key:"sendable",value:function(){return 0!==this.content.data.length||0!==this.content.description.length||0!==this.content.extension.length}}]),Oo),Mo=(c(Lo,[{key:"updatePercent",value:function(e){this._percent=e,1<this._percent&&(this._percent=1)}},{key:"updateVideoUrl",value:function(e){e&&(this.content.remoteVideoUrl=e)}},{key:"updateSnapshotInfo",value:function(e){var t=e.snapshotUrl,n=e.snapshotWidth;e=e.snapshotHeight;je(t)||(this.content.thumbUrl=this.content.snapshotUrl=t),je(n)||(this.content.thumbWidth=this.content.snapshotWidth=Number(n)),je(e)||(this.content.thumbHeight=this.content.snapshotHeight=Number(e))}},{key:"sendable",value:function(){return""!==this.content.remoteVideoUrl}}]),Lo),Io=(c(Ao,[{key:"sendable",value:function(){return!0}}]),Ao),Co=(c(Do,[{key:"_patchRichMediaPayload",value:function(e,t){e===k.MSG_IMAGE?t.imageInfoArray.forEach((function(e){!e.imageUrl&&e.url&&(e.imageUrl=e.url,e.sizeType=e.type,1===e.type?e.type=0:3===e.type&&(e.type=1))})):e===k.MSG_VIDEO?!t.remoteVideoUrl&&t.videoUrl&&(t.remoteVideoUrl=t.videoUrl):e===k.MSG_AUDIO?!t.remoteAudioUrl&&t.url&&(t.remoteAudioUrl=t.url):e===k.MSG_FILE&&!t.fileUrl&&t.url&&(t.fileUrl=t.url,t.url=void 0)}},{key:"_updateRichMediaDownloadUrl",value:function(e,t,n,o,i){(n||o)&&(e===k.MSG_IMAGE?t.imageInfoArray.forEach((function(e){e.url=ao(e.url,n,o,i)})):e===k.MSG_VIDEO?(t.videoUrl=ao(t.videoUrl,n,o,i),t.snapshotUrl=ao(t.thumbUrl,n,o,i),t.snapshotHeight=t.thumbHeight,t.snapshotWidth=t.thumbWidth):e===k.MSG_AUDIO?t.url=ao(t.url,n,o,i):e===k.MSG_FILE&&(t.fileUrl=ao(t.fileUrl,n,o,i)))}}]),Do),bo=(c(ko,[{key:"sendable",value:function(){return!je(this.content.messageList)||!je(this.content.downloadKey)}}]),ko),To={1:k.MSG_PRIORITY_HIGH,2:k.MSG_PRIORITY_NORMAL,3:k.MSG_PRIORITY_LOW,4:k.MSG_PRIORITY_LOWEST},So=(c(Eo,[{key:"elements",get:function(){return this._elements}},{key:"getElements",value:function(){return this._elements}},{key:"extractGroupInfo",value:function(e){null!==e&&(lt(e.nick)&&(this.nick=e.nick),lt(e.avatar)&&(this.avatar=e.avatar),e=e.messageFromAccountExtraInformation,$e(e)&&lt(e.nameCard)&&(this.nameCard=e.nameCard))}},{key:"handleGroupAtInfo",value:function(e){var t=this;e.payload&&e.payload.atUserList&&e.payload.atUserList.forEach((function(e){e!==k.MSG_AT_ALL?(t._groupAtInfoList.push({groupAtAllFlag:0,groupAtUserID:e}),t.atUserList.push(e)):(t._groupAtInfoList.push({groupAtAllFlag:1}),t.atUserList.push(k.MSG_AT_ALL))})),Xe(e.groupAtInfo)&&e.groupAtInfo.forEach((function(e){0===e.groupAtAllFlag?t.atUserList.push(e.groupAtUserID):1===e.groupAtAllFlag&&t.atUserList.push(k.MSG_AT_ALL)}))}},{key:"getGroupAtInfoList",value:function(){return this._groupAtInfoList}},{key:"_initProxy",value:function(){this._elements[0]&&(this.payload=this._elements[0].content,this.type=this._elements[0].type)}},{key:"reInitialize",value:function(e){e&&(this.status=this.from?Sn:Tn,this.from||(this.from=e)),this._initFlow(e),this._initSequence(e),this._concatConversationID(e),this.generateMessageID()}},{key:"isSendable",value:function(){return 0!==this._elements.length&&(!0===this._relayFlag||"function"==typeof this._elements[0].sendable&&this._elements[0].sendable())}},{key:"_initTo",value:function(e){this.conversationType===k.CONV_GROUP&&(this.to=e.groupID)}},{key:"_initSequence",value:function(e){var t,n,o;0===this.clientSequence&&e&&(this.clientSequence=!!(e=e)&&(void 0===mt[e]&&(o=new Date,t="3".concat(o.getHours()).slice(-2),n="0".concat(o.getMinutes()).slice(-2),o="0".concat(o.getSeconds()).slice(-2),mt[e]=parseInt([t,n,o,"0001"].join("")),o=n=t=null,we.l("autoIncrementIndex start index:".concat(mt[e]))),mt[e]++)),0===this.sequence&&this.conversationType===k.CONV_C2C&&(this.sequence=this.clientSequence)}},{key:"generateMessageID",value:function(){this.from===k.CONV_SYSTEM&&(this.senderTinyID="144115198244471703"),this.ID="".concat(this.senderTinyID,"-").concat(this.clientTime,"-").concat(this.random)}},{key:"_initFlow",value:function(e){""!==e&&(e===this.from?(this.flow="out",this.isRead=!0):this.flow="in")}},{key:"_concatConversationID",value:function(e){var t=this.to,n=this.conversationType;n!==k.CONV_SYSTEM?(e=n===k.CONV_C2C?e===this.from?t:this.from:this.to,this.conversationID=e?"".concat(n).concat(e):null):this.conversationID=k.CONV_SYSTEM}},{key:"isElement",value:function(e){return e instanceof to||e instanceof lo||e instanceof fo||e instanceof po||e instanceof mo||e instanceof Mo||e instanceof go||e instanceof vo||e instanceof yo||e instanceof Io||e instanceof bo}},{key:"setElement",value:function(e,t,n,o){var i=this;if(this.isElement(e))return this._elements=[e],void this._initProxy();function r(e){if(e.type&&e.content)switch(e.type){case k.MSG_TEXT:i.setTextElement(e.content);break;case k.MSG_IMAGE:i.setImageElement(e.content,t,n,o);break;case k.MSG_AUDIO:i.setAudioElement(e.content,t,n,o);break;case k.MSG_FILE:i.setFileElement(e.content,t,n,o);break;case k.MSG_VIDEO:i.setVideoElement(e.content,t,n,o);break;case k.MSG_CUSTOM:i.setCustomElement(e.content);break;case k.MSG_LOCATION:i.setLocationElement(e.content);break;case k.MSG_GRP_TIP:i.setGroupTipElement(e.content);break;case k.MSG_GRP_SYS_NOTICE:i.setGroupSystemNoticeElement(e.content);break;case k.MSG_FACE:i.setFaceElement(e.content);break;case k.MSG_MERGER:i.setMergerElement(e.content,t,n,o)}}if(Xe(e))for(var a=0;a<e.length;a++)r(e[a]);else r(e);this._initProxy()}},{key:"clearElement",value:function(){this._elements.length=0}},{key:"setTextElement",value:function(e){e="string"==typeof e?e:e.text,e=new to({text:e}),this._elements.push(e)}},{key:"setImageElement",value:function(e,t,n,o){e=new lo(e,t,n,o),this._elements.push(e)}},{key:"setAudioElement",value:function(e,t,n,o){e=new po(e,t,n,o),this._elements.push(e)}},{key:"setFileElement",value:function(e,t,n,o){e=new mo(e,t,n,o),this._elements.push(e)}},{key:"setVideoElement",value:function(e,t,n,o){e=new Mo(e,t,n,o),this._elements.push(e)}},{key:"setLocationElement",value:function(e){e=new Io(e),this._elements.push(e)}},{key:"setCustomElement",value:function(e){e=new yo(e),this._elements.push(e)}},{key:"setGroupTipElement",value:function(e){var t,n={},o=e.operationType;je(e.memberInfoList)?e.operatorInfo&&(n=e.operatorInfo):o!==k.GRP_TIP_MBR_JOIN&&o!==k.GRP_TIP_MBR_KICKED_OUT&&o!==k.GRP_TIP_MBR_SET_ADMIN&&o!==k.GRP_TIP_MBR_CANCELED_ADMIN||(n=e.memberInfoList[0]),je(e.memberExtraInfo)||(t=e.memberExtraInfo.reason,e.msgMemberInfo.forEach((function(e){e.reason=t}))),o=n.nick,n=n.avatar,lt(o)&&(this.nick=o),lt(n)&&(this.avatar=n),o=new go(e),this._elements.push(o)}},{key:"setGroupSystemNoticeElement",value:function(e){e=new vo(e),this._elements.push(e)}},{key:"setFaceElement",value:function(e){e=new fo(e),this._elements.push(e)}},{key:"setMergerElement",value:function(e,t,n,o){e=new bo(e,t,n,o),this._elements.push(e)}},{key:"setIsRead",value:function(e){this.isRead=e}},{key:"setRelayFlag",value:function(e){this._relayFlag=e}},{key:"_computePriority",value:function(e){return dt(e)?k.MSG_PRIORITY_NORMAL:lt(e)&&-1!==Object.values(To).indexOf(e)?e:Ye(e)&&(e=""+e,-1!==Object.keys(To).indexOf(e))?To[e]:k.MSG_PRIORITY_NORMAL}},{key:"setNickAndAvatar",value:function(e){var t=e.nick;e=e.avatar;lt(t)&&(this.nick=t),lt(e)&&(this.avatar=e)}},{key:"setNameCard",value:function(e){lt(e)&&(this.nameCard=e)}},{key:"initC2CReadReceiptInfo",value:function(e){var t=e.readReceiptSentByPeer;e=e.timestamp,e=void 0===e?0:e;this.conversationType===k.CONV_C2C&&!0===this.needReadReceipt&&(this.readReceiptInfo.isPeerRead=1===(void 0===t?void 0:t),this.readReceiptInfo.timestamp=e)}}]),Eo);function Eo(e){r(this,Eo),this.ID="",this.conversationID=e.conversationID||null,this.conversationType=e.conversationType||k.CONV_C2C,this.conversationSubType=e.conversationSubType,this.time=e.time||Math.ceil(Date.now()/1e3),this.sequence=e.sequence||0,this.clientSequence=e.clientSequence||e.sequence||0,this.random=e.random||0===e.random?e.random:it(),this.priority=this._computePriority(e.priority),this.nick=e.nick||"",this.avatar=e.avatar||"",this.isPeerRead=!1,this.nameCard="",this.hasRiskContent=zt(e.checkResult),this._elements=[],this.isPlaceMessage=e.isPlaceMessage||0,this.isRevoked=2===e.isPlaceMessage||8===e.msgFlagBits,this.from=e.from||null,this.to=e.to||null,this.flow="",this.isSystemMessage=e.isSystemMessage||!1,this.protocol=e.protocol||"JSON",this.isResend=!1,this.isRead=!1,this.status=e.status||Sn,this._onlineOnlyFlag=!1,this._groupAtInfoList=[],this._relayFlag=!1,this.atUserList=[],this.cloudCustomData=e.cloudCustomData||"",this.isDeleted=!1,this.isModified=!!e.messageVersion,this._isExcludedFromUnreadCount=!(!e.messageControlInfo||1!==e.messageControlInfo.excludedFromUnreadCount),this._isExcludedFromLastMessage=!(!e.messageControlInfo||1!==e.messageControlInfo.excludedFromLastMessage),this.clientTime=e.clientTime||Ee()||0,this.senderTinyID=e.senderTinyID||e.tinyID||"",this.readReceiptInfo=e.readReceiptInfo||{readCount:void 0,unreadCount:void 0,isPeerRead:void 0,timestamp:0},this.needReadReceipt=!0===e.needReadReceipt||1===e.needReadReceipt,this.version=e.messageVersion||0,this.isBroadcastMessage=e.isBroadcastMessage||!1,this._receiverList=e.receiverList||void 0,this.isSupportExtension=!0===e.isSupportExtension||1===e.isSupportExtension,this._cmConfigID=e.customModerationConfigurationID,this.revoker=e.revokerInfo&&e.revokerInfo.revoker||"",this.revokerInfo=e.revokerInfo||{userID:"",nick:"",avatar:""},this.revokeReason=e.revokeReason||"",this.reInitialize(e.currentUser),this.extractGroupInfo(e.groupProfile||null),this.handleGroupAtInfo(e),this.initC2CReadReceiptInfo(e)}function ko(e,t,n,o){var i,a,s,c,u,l,d;r(this,ko),this.type=k.MSG_MERGER,this.content={downloadKey:"",pbDownloadKey:"",messageList:[],title:"",abstractList:[],compatibleText:"",version:0,layersOverLimit:!1},e.downloadKey?(a=e.downloadKey,s=e.pbDownloadKey,c=e.title,u=e.abstractList,l=e.compatibleText,i=e.version,this.content.downloadKey=a,this.content.pbDownloadKey=s,this.content.title=c,this.content.abstractList=u,this.content.compatibleText=l,this.content.version=i||0):je(e.messageList)?1===e.layersOverLimit&&(this.content.layersOverLimit=!0):(a=e.messageList,s=e.title,c=e.abstractList,u=e.compatibleText,l=e.version,d=[],a.forEach((function(e){je(e)||(e=new Co(e,t,n,o),d.push(e))})),this.content.messageList=d,this.content.title=s,this.content.abstractList=c,this.content.compatibleText=u,this.content.version=l||0)}function Do(e,t,n,o){var i,a;r(this,Do),this.from=e.from,this.messageSender=e.from,this.time=e.time,this.messageSequence=e.sequence,this.clientSequence=e.clientSequence||e.sequence,this.messageRandom=e.random,this.cloudCustomData=e.cloudCustomData||"",this.clientTime=e.clientTime||void 0,e.ID?(this.ID=e.ID||"",this.nick=e.nick||"",this.avatar=e.avatar||"",e.messageBody?this.messageBody=JSON.parse(JSON.stringify(e.messageBody)):this.messageBody=[{type:e.type,payload:e.payload}],e.conversationType?e.conversationType.startsWith(k.CONV_C2C)?this.receiverUserID=e.to:e.conversationType.startsWith(k.CONV_GROUP)&&(this.receiverGroupID=e.to):e.receiverGroupID?this.receiverGroupID=e.receiverGroupID:e.receiverUserID&&(this.receiverUserID=e.receiverUserID),this.messageReceiver=e.to||e.messageReceiver):(this.nick=e.nick||"",this.avatar=e.avatar||"",this.messageBody=[],i=e.elements[0].type,a=e.elements[0].content,this._patchRichMediaPayload(i,a),this._updateRichMediaDownloadUrl(i,a,t,n,o),i===k.MSG_MERGER?this.messageBody.push({type:i,payload:new bo(a,t,n,o).content}):this.messageBody.push({type:i,payload:a}),e.groupID&&(this.receiverGroupID=e.groupID,this.messageReceiver=e.groupID),e.to&&(this.receiverUserID=e.to,this.messageReceiver=e.to),this.ID="".concat(e.tinyID,"-").concat(e.clientTime,"-").concat(e.random))}function Ao(e){r(this,Ao),this.type=k.MSG_LOCATION;var t=e.description,n=e.longitude;e=e.latitude;this.content={description:t,longitude:n,latitude:e}}function Lo(e,t,n,o){r(this,Lo),this.type=k.MSG_VIDEO,this._percent=0,this.content={remoteVideoUrl:e.remoteVideoUrl||e.videoUrl||"",videoFormat:e.videoFormat,videoSecond:parseInt(e.videoSecond,10),videoSize:e.videoSize,videoUrl:ao(e.videoUrl,t,n,o),videoDownloadFlag:2,videoUUID:e.videoUUID,thumbUUID:e.thumbUUID,thumbFormat:e.thumbFormat,thumbWidth:e.thumbWidth,snapshotWidth:e.thumbWidth,thumbHeight:e.thumbHeight,snapshotHeight:e.thumbHeight,thumbSize:e.thumbSize,snapshotSize:e.thumbSize,thumbDownloadFlag:2,thumbUrl:ao(e.thumbUrl,t,n,o),snapshotUrl:ao(e.thumbUrl,t,n,o)}}function Oo(e){r(this,Oo),this.type=k.MSG_CUSTOM,this.content={data:e.data||"",description:e.description||"",extension:e.extension||""}}function Ro(e,t,n,o){r(this,Ro),this.type=k.MSG_FILE,this._percent=0;var i=this._getFileInfo(e);this.content={downloadFlag:2,fileUrl:ao(e.url||e.fileUrl,t,n,o)||"",uuid:e.uuid,fileName:i.name||"",fileSize:i.size||0}}function wo(e){r(this,wo),this.type=k.MSG_GRP_SYS_NOTICE,this.content={},this._initContent(e)}function No(e){r(this,No),this.type=k.MSG_GRP_TIP,this.content={},this._initContent(e)}function Po(e,t,n,o){r(this,Po),this.type=k.MSG_AUDIO,this._percent=0,this.content={downloadFlag:2,second:e.second,size:e.size,url:ao(e.url,t,n,o),remoteAudioUrl:e.url||"",uuid:e.uuid}}function Go(e){r(this,Go),this.type=k.MSG_FACE,this.content=e||null}function Uo(e,t,n,o){r(this,Uo),this._imageMemoryURL="",this._fileDownloadProxy=t,this._authKey=n,this._fileDNList=o,ee||ne?this.createImageDataASURL(e.file):this.createImageDataASURLInWeb(e.file),this._initImageInfoModel(),this.type=k.MSG_IMAGE,this._percent=0,this.content={imageFormat:e.imageFormat||Ne.UNKNOWN,uuid:e.uuid,imageInfoArray:[]},this.initImageInfoArray(e.imageInfoArray),this._autoFixUrl()}function xo(e){if($e(e))return{pushFlag:!0===e.disablePush?1:0,title:e.title||"",desc:e.description||"",ext:e.extension||"",apnsInfo:(o=void 0===(o=(n=e).apnsInfo)?{}:o,i=n.ignoreIOSBadge,n=n.disableVoipPush,i=!0===o.ignoreIOSBadge||!0===(void 0!==i&&i)?1:0,r=void 0,dt(n)||(r=!1===n?1:0),dt(o.disableVoipPush)||(r=!1===o.disableVoipPush?1:0),t(t({},o),{},{badgeMode:i,isVoipPush:r})),androidInfo:(o=void 0===(o=(n=e).androidInfo)?{}:o,n=n.androidOPPOChannelID,n=o.OPPOChannelID||(void 0===n?"":n),t(t({},o),{},{Sound:-1===(r=(i=o.sound||"").lastIndexOf("."))?i:i.slice(0,r),OPPOChannelID:n,GoogleChannelID:o.FCMChannelID||""}))};var n,o,i,r}l(jo,Rn),Fo=v(jo),c(jo,[{key:"onNewMessage",value:function(e){var t=e.dataList,n=e.isInstantMessage,o=e.C2CRemainingUnreadList,i=e.C2CPairUnreadList,r=(e=e.isSyncingEnded,t=(n||we.l("".concat(this._n,".onNewMessage C2CPairUnreadList:"),i,"C2CRemainingUnreadList:",o),this._assembly({dataList:t,C2CRemainingUnreadList:o,C2CPairUnreadList:i,isInstantMessage:n})),o=t.conversationOptionsList,i=t.messageList,t=t.isUnreadC2CMessage,Mt(i));0<r.length&&this.emitOEvt(E.MESSAGE_MODIFIED,r),this.get(11).onNewMessage({conversationOptionsList:o,isInstantMessage:n,isUnreadC2CMessage:t,isSyncingEnded:e}),r=It(i);n&&0<r.length&&this.emitOEvt(E.MESSAGE_RECEIVED,r),i.length=0}},{key:"_assembly",value:function(e){for(var t=e.dataList,n=e.C2CRemainingUnreadList,o=e.C2CPairUnreadList,i=e.isInstantMessage,r=null,a=[],s=[],c={},u=this.get(26),l=!1,d=this.get(11),f=this.get(4),p=(e=this.get(17),this.getFileDownloadProxy()),h=this.getDowloadFileAuthKey(),g=e.getFileDNList(),_=0,v=t.length;_<v;_++)if(this._isC2CNotice(t[_]))this._noticeFromUnreadDBList.push(t[_].eventArray[0].c2CNotifyMsgArray[0]);else{var m=t[_],y=(m.currentUser=this.getMyUserID(),m.conversationType=k.CONV_C2C,m.isSystemMessage=!!m.isSystemMessage,(dt(m.nick)||dt(m.avatar))&&(l=!0),(r=new So(m)).setElement(m.elements,p,h,g),r.setNickAndAvatar({nick:m.nick,avatar:m.avatar}),r.conversationID);if(i){if(this._msgFromUnreadDBMap.get(r.ID))continue;var M,I,C=!1,b=(r.from!==this.getMyUserID()?(I=d.getLatestMessageSentByPeer(y))&&(M=I.nick,I=I.avatar,l?r.setNickAndAvatar({nick:M,avatar:I}):M===r.nick&&I===r.avatar||(C=!0)):(M=d.getLatestMessageSentByMe(y))&&(I=M.nick,b=M.avatar,I===r.nick&&b===r.avatar||(d.modifyMessageSentByMe({conversationID:y,latestNick:r.nick,latestAvatar:r.avatar}),f.mockOnNickAvatarModified(r.nick,r.avatar))),1===t[_].isModified);if(d.isMessageSentByCurrentInstance(r)?r.isModified=b:b=!1,0===m.msgLifeTime)r._onlineOnlyFlag=!0,d.isMessageSentByCurrentInstance(r)||s.push(r);else{if(!d.pushIntoMessageList(s,r,b))continue;C&&(d.modifyMessageSentByPeer({conversationID:y,latestNick:r.nick,latestAvatar:r.avatar}),d.updateUserProfileSpecifiedKey({conversationID:y,nick:r.nick,avatar:r.avatar}))}i&&0<r.clientTime&&u.addMessageDelay(r.clientTime)}else this._msgFromUnreadDBMap.set(r.ID,r);if(0!==m.msgLifeTime){if(!1===r._onlineOnlyFlag){if(C=d.getLastMessageTime(y),Ye(C)&&r.time<C)continue;i&&(dt(c[y])?(m=0,"in"===r.flow&&(r._isExcludedFromUnreadCount||(m=1)),c[y]=a.push({conversationID:y,unreadCount:m,type:r.conversationType,subType:r.conversationSubType,lastMessage:r._isExcludedFromLastMessage?"":r})-1):(m=c[y],a[m].type=r.conversationType,a[m].subType=r.conversationSubType,a[m].lastMessage=r._isExcludedFromLastMessage?"":r,"in"===r.flow&&(r._isExcludedFromUnreadCount||a[m].unreadCount++)))}}else r._onlineOnlyFlag=!0}this._handleNoticeFromUnreadDB();var T=!1;if(Xe(o)&&0<o.length)for(var S=0,E=o.length;S<E;S++)!function(e){if(o[e].from!==k.CONV_SYSTEM){T=!0;var t=a.find((function(t){return t.conversationID==="".concat(k.CONV_C2C).concat(o[e].from)}));t?t.unreadCount=o[e].unreadCount:a.push({conversationID:"".concat(k.CONV_C2C).concat(o[e].from),unreadCount:o[e].unreadCount,type:k.CONV_C2C})}}(S);if(Xe(n))for(var D=0,A=n.length;D<A;D++)!function(e){a.find((function(t){return t.conversationID==="".concat(k.CONV_C2C).concat(n[e].from)}))||a.push({conversationID:"".concat(k.CONV_C2C).concat(n[e].from),type:k.CONV_C2C,lastMsgTime:n[e].lastMsgTime})}(D);return{conversationOptionsList:a,messageList:s,isUnreadC2CMessage:T}}},{key:"getMessageListFromUnreadDB",value:function(){return y(this._msgFromUnreadDBMap.values())}},{key:"_isC2CNotice",value:function(e){return e=e.eventArray,!(!Xe(e)||10!==e[0].event)}},{key:"_handleNoticeFromUnreadDB",value:function(){var e,t=this._noticeFromUnreadDBList.length;0!==t&&(we.l("".concat(this._n,"._handleNoticeFromUnreadDB count:").concat(t)),e=[],this._noticeFromUnreadDBList.forEach((function(t){t.hasOwnProperty("c2cMessageRevokedNotify")&&e.push(t)})),this.onMsgRevoked({dataList:e}),this._noticeFromUnreadDBList.length=0,e.length=0)}},{key:"onMsgRevoked",value:function(e){var t,n=this,o=this.get(11),i=[];e.dataList.forEach((function(e){e.c2cMessageRevokedNotify&&(e=e.c2cMessageRevokedNotify.revokedInfos,dt(e)||e.forEach((function(e){var r=n.getMyUserID()===e.from?"".concat(k.CONV_C2C).concat(e.to):"".concat(k.CONV_C2C).concat(e.from);t=o.revoke(r,e.sequence,e.random);var a,s=e.revokerInfo&&e.revokerInfo.revoker,c=e.revokerInfo&&e.revokerInfo.reason||"";t?a=t:(a={conversationID:r,sequence:e.sequence},e.tinyID&&e.clientTime&&e.random&&(a.ID="".concat(e.tinyID,"-").concat(e.clientTime,"-").concat(e.random)),e.time&&(a.time=e.time)),a&&(a.revoker=s,a.revokeReason=c,a.revokerInfo={userID:s,nick:"",avatar:""},i.push(a))})))})),0!==i.length&&(o.onMessageRevoked(i),we.l("".concat(this._n,".onMsgRevoked count:").concat(i.length)),o.updateRevokerInfo(i).then((function(e){n.emitOEvt(E.MESSAGE_REVOKED,e)})))}},{key:"onMsgReadReceipt",value:function(e){var t=this;e.dataList.forEach((function(e){var n;je(e.c2cMessageReadReceipt)||(n=e.c2cMessageReadReceipt.to,e.c2cMessageReadReceipt.uinPairReadArray.forEach((function(e){e=e.peerReadTime;var o=(we.l("".concat(t._n,".onMsgReadReceipt to:").concat(n," peerReadTime:").concat(e)),"".concat(k.CONV_C2C).concat(n)),i=t.get(11);i.recordPeerReadTime(o,e),i.updateMsgIsPeerReadProp(o,e)})))}))}},{key:"onMsgReadNotice",value:function(e){var t=this;e.dataList.forEach((function(e){var n;je(e.c2cMessageReadNotice)||(n=t.get(11),e.c2cMessageReadNotice.uinPairReadArray.forEach((function(e){var o=e.from;e=e.peerReadTime,we.l("".concat(t._n,".onMsgReadNotice from:").concat(o," lastReadTime:").concat(e)),o="".concat(k.CONV_C2C).concat(o);n.updateIsReadAfterReadReport({conversationID:o,lastMessageTime:e}),n.updateUnreadCount(o)})))}))}},{key:"onMsgModified",value:function(e){we.l("".concat(this._n,".onMsgModified options:"),e);var n=this.get(11);e.dataList.forEach((function(e){n.onMessageModified(t(t({},e),{},{conversationType:k.CONV_C2C}))}))}},{key:"onReadReceiptList",value:function(e){we.l("".concat(this._n,".onReadReceiptList options:"),e),this.get(11).updateReadReceiptInfo(e.dataList)}},{key:"sendMessage",value:function(e,t){return e=this._createC2CMessagePack(e,t),this.req(e)}},{key:"_createC2CMessagePack",value:function(e,t){var n=null,o=(t&&(t.offlinePushInfo&&(n=t.offlinePushInfo),!0===t.onlineUserOnly&&(n?n.disablePush=!0:n={disablePush:!0})),""),i=(lt(e.cloudCustomData)&&0<e.cloudCustomData.length&&(o=e.cloudCustomData),[]),r=($e(t)&&$e(t.messageControlInfo)&&(r=(s=t.messageControlInfo).excludedFromUnreadCount,a=s.excludedFromLastMessage,s=s.excludedFromContentModeration,!0===r&&i.push("NoUnread"),!0===a&&i.push("NoLastMsg"),!0===s&&i.push("NoMsgCheck")),this.isOnlineMessage(e,t)?0:void 0),a=JSON.parse(JSON.stringify(e.getElements())),s=this.get(17).getFileDNList();return{P:Fn.SEND_C2C_MSG,tjgID:this.generateTjgID(e),data:{fromAccount:this.getMyUserID(),toAccount:e.to,msgBody:so(e.type,a,s),cloudCustomData:o,msgSeq:e.sequence,msgRandom:e.random,msgLifeTime:r,nick:e.nick,avatar:e.avatar,offlinePushInfo:xo(n),messageControlInfo:0!==r?i:void 0,clientTime:e.clientTime,needReadReceipt:!0===e.needReadReceipt?1:0,isSupportExtension:!0===e.isSupportExtension?1:0,isRelayMessage:!0===e._relayFlag?1:0,cmConfigID:e._cmConfigID}}}},{key:"isOnlineMessage",value:function(e,t){return!(!t||!0!==t.onlineUserOnly)}},{key:"revokeMessage",value:function(e){return this.req({P:Fn.REVOKE_C2C_MSG,data:{msgInfo:{fromAccount:e.from,toAccount:e.to,msgSeq:e.sequence,msgRandom:e.random,msgTimeStamp:e.time}}})}},{key:"deleteMessage",value:function(e){var t=e.to;e=e.keyList;return we.l("".concat(this._n,".deleteMessage toAccount:").concat(t," count:").concat(e.length)),this.req({P:Fn.DEL_C2C_MSG,data:{fromAccount:this.getMyUserID(),to:t,keyList:e}})}},{key:"modifyRemoteMessage",value:function(e){var t=e.from,n=e.to,o=e.version,i=(o=void 0===o?0:o,e.sequence),r=e.random,a=e.time,s=e.payload,c=e.type,u=(e=e.cloudCustomData,void 0);return Bt(c)&&(u=[]).push({type:c,content:s}),this.req({P:Fn.MODIFY_C2C_MSG,data:{from:t,to:n,version:o,sequence:i,random:r,time:a,elements:u,cloudCustomData:e}})}},{key:"setMessageRead",value:function(e){var t=this,n=e.conversationID,o=e.lastMessageTime,i="".concat(this._n,".").concat("setMessageRead"),r=(e="convID:".concat(n," lastMessageTime:").concat(o),we.l("".concat(i," ").concat(e)),Ye(o)||this.warn("DoNotModifyLastTime"),new eo("setMessageRead"));return r.setMessage(e),this.req({P:Fn.SET_C2C_MSG_READ,data:{C2CMsgReaded:{cookie:"",C2CMsgReadedItem:[{toAccount:n.replace("C2C",""),lastMessageTime:o,receipt:1}]}}}).then((function(){r.end(),we.l("".concat(i," ok"));var e=t.get(11);return e.updateIsReadAfterReadReport({conversationID:n,lastMessageTime:o}),e.updateUnreadCount(n),Mn()})).catch((function(e){return r.setError(e).end(),we.l("".concat(i," failed. error:"),e),Cn(e)}))}},{key:"getRoamingMessage",value:function(e){var t=this,n="".concat(this._n,".").concat("getRoamingMessage"),o=e.peerAccount,i=e.conversationID,r=e.count,a=e.lastMessageTime,s=(e=e.messageKey,"peerAccount:".concat(o," count:").concat(r||15," lastMessageTime:").concat(a||0," messageKey:").concat(e)),c=(we.l("".concat(n," ").concat(s)),new eo("getRoamingMessage"));return this.req({P:Fn.GET_C2C_ROAMING_MSG,data:{peerAccount:o,count:r||15,lastMessageTime:a||0,messageKey:e}}).then((function(e){e=e.data;var o=e.complete,r=e.messageList,a=e.messageKey,u=(e=e.lastMessageTime,dt(r)?we.l("".concat(n," ok. complete:").concat(o," but messageList is undefined!")):we.l("".concat(n," ok. complete:").concat(o," count:").concat(r.length)),c.setMessage("".concat(s," complete:").concat(o," length:").concat(r.length)).end(),t.get(11));1===o&&u.setCompleted(i),o=u.onRoamingMessage(r,i),u.modifyMessageList(i),u.updateIsRead(i),u.updateRoamingMsgKeyAndTime(i,a,e),r=u.getPeerReadTime(i),we.l("".concat(n," update isPeerRead property. convID:").concat(i," peerReadTime:").concat(r)),r?u.updateMsgIsPeerReadProp(i,r):(a=i.replace(k.CONV_C2C,""),t.getRemotePeerReadTime([a]).then((function(){u.updateMsgIsPeerReadProp(i,u.getPeerReadTime(i))}))),e="";return 0<o.length?e=o[0].ID:(r=u.getLocalOldestMessage(i))&&(e=r.ID),we.l("".concat(n," nextReqID:").concat(e," storedMsgCount:").concat(o.length)),{nextReqID:e,storedMessageList:o}})).catch((function(e){return c.setMessage(s).setError(e).end(),we.w("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"getRoamingMessagesHopping",value:function(e){var t=this,n="".concat(this._n,".").concat("getRoamingMessagesHopping"),o=e.peerAccount,i=e.time,r=(i=void 0===i?0:i,e.count),a=e.direction,s="".concat(k.CONV_C2C).concat(o),c="peerAccount:".concat(o," count:").concat(r," time:").concat(i," direction:").concat(a),u=(we.l("".concat(n," ").concat(c)),new eo("getRoamingMessagesHopping"));return this.req({P:Fn.GET_C2C_ROAMING_MSG,data:{peerAccount:o,count:r+1,lastMessageTime:i,direction:a}}).then((function(e){e=e.data;var o=e.complete,i=e.messageList,r=(i=void 0===i?[]:i,e=e.lastMessageTime,"complete:".concat(o," count:").concat(i.length)),l=(we.l("".concat(n," ok. ").concat(r)),u.setMessage("".concat(c," ").concat(r)).end(),1!==o&&(1===a?i.pop():i.shift()),t.get(11));r=l.onRoamingMessage(i,s,!1),t._modifyMessageList(s,r),i=t._computeResult({complete:o,lastMessageTime:e,resultList:r}),l.storeHoppingMessageList(i.messageList),o=l.getPeerReadTime(s);return we.l("".concat(n," update isPeerRead property. convID:").concat(s," peerReadTime:").concat(o)),o?l.updateMsgIsPeerReadProp(s,o):(e=s.replace(k.CONV_C2C,""),t.getRemotePeerReadTime([e]).then((function(){l.updateMsgIsPeerReadProp(s,l.getPeerReadTime(s))}))),Mn(i)})).catch((function(e){return u.setMessage(c).setError(e).end(),we.w("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"_computeResult",value:function(e){var t=e.complete,n=(t=void 0===t?0:t,e.lastMessageTime);e=e.resultList,e={messageList:y(void 0===e?[]:e),isCompleted:!1,nextMessageTime:""};return 1===t?e.isCompleted=!0:e.nextMessageTime=n,e}},{key:"_modifyMessageList",value:function(e,t){if(e=this.get(11).getLocalConversation(e),e)for(var n=e.userProfile.nick,o=e.userProfile.avatar,i=(e=this.get(4).getNickAndAvatarByUserID(this.getMyUserID()),e.nick),r=e.avatar,a=t.length-1;0<=a;a--){var s=t[a];"in"===s.flow&&(s.nick!==n&&s.setNickAndAvatar({nick:n}),s.avatar!==o&&s.setNickAndAvatar({avatar:o})),"out"===s.flow&&(s.nick!==i&&s.setNickAndAvatar({nick:i}),s.avatar!==r&&s.setNickAndAvatar({avatar:r}))}}},{key:"getRemotePeerReadTime",value:function(e){var t=this,n="".concat(this._n,".").concat("getRemotePeerReadTime");if(je(e))return Promise.resolve();var o=new eo("getRemotePeerReadTime");return we.l("".concat(n," userIDList:").concat(e)),this.req({P:Fn.GET_C2C_PEER_READ_TIME,data:{userIDList:e}}).then((function(i){var r=i.data.peerReadTimeList;we.l("".concat(n," ok. peerReadTimeList:").concat(r));for(var a="",s=t.get(11),c=0;c<e.length;c++)a+="".concat(e[c],"-").concat(r[c]," "),0<r[c]&&s.recordPeerReadTime("".concat(k.CONV_C2C).concat(e[c]),r[c]);o.setMessage(a).end()})).catch((function(e){o.setError(e).end(),we.w("".concat(n," failed. error:"),e)}))}},{key:"sendReadReceipt",value:function(e){var t=e[0].conversationID.replace(k.CONV_C2C,""),n=new eo("sendReadReceipt"),o=(n.setMessage("peerAccount:".concat(t)),this.getMyUserID());e=e.filter((function(e){return e.from!==o&&!0===e.needReadReceipt})).map((function(e){return{fromAccount:e.from,toAccount:e.to,sequence:e.sequence,random:e.random,time:e.time,clientTime:e.clientTime}}));if(0===e.length)return Cn({code:Un.READ_RECEIPT_MSG_LIST_EMPTY});var i="".concat(this._n,".").concat("sendReadReceipt");return we.l("".concat(i,". peerAccount:").concat(t," length:").concat(e.length)),this.req({P:Fn.SEND_C2C_READ_RECEIPT,data:{peerAccount:t,messageInfoList:e}}).then((function(e){return n.end(),we.l("".concat(i," ok")),Mn()})).catch((function(e){return n.setError(e).end(),we.w("".concat(i," failed. error:"),e),Cn(e)}))}},{key:"getReadReceiptList",value:function(e){var t=e[0].conversationID.replace(k.CONV_C2C,"");return we.l("".concat(this._n,".getReadReceiptList peerAccount:").concat(t," msgCount:").concat(e.length)),In({messageList:e})}},{key:"getMessageExtensions",value:function(e,t){return we.l("".concat(this._n,".getMessageExtensions startSequence:").concat(t)),this.req({P:Fn.GET_C2C_MSG_EXT,data:{from:e.from,to:e.to,messageKey:this.getMessageKey(e),startSequence:t}})}},{key:"modifyMsgExts",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return we.l("".concat(this._n,".modifyMsgExts operateType:").concat(n)),this.req({P:Fn.MODIFY_C2C_MSG_EXT,data:{from:e.from,to:e.to,messageKey:this.getMessageKey(e),extensionList:t,operateType:n}})}},{key:"getMessageKey",value:function(e){var t=e.clientSequence,n=e.random;e=e.time;return"".concat(t,"_").concat(n,"_").concat(e)}},{key:"reset",value:function(){we.l("".concat(this._n,".reset")),this._msgFromUnreadDBMap.clear(),this._noticeFromUnreadDBList.length=0}}]);var Fo,qo=jo,Bo={A2KEY_AND_TINYID_UPDATED:"_inner".concat(1),CLOUD_CONFIG:"_inner".concat(2),PROFILE_UPDATED:"_inner".concat(3),CONV_SYNC_COMPLETED:"_inner".concat(4),C2C_UNREAD_HANDLE_COMPLETED:"_inner".concat(5)},Vo=(c(Ho,[{key:"_onCloudConfig",value:function(){var e=this._convM.getCloudConfig("topic_msg_limit");dt(e)||(this.TOPIC_MSG_LIMIT=Number(e)),we.l("".concat(this._n,"._onCloudConfig topicMsgLimit:").concat(this.TOPIC_MSG_LIMIT))}},{key:"onCheckTimer",value:function(e){if(e%20==0&&0<this._map.size){var t,n=S(this._map);try{for(n.s();!(t=n.n()).done;){var o=m(t.value,2),i=o[0],r=o[1];i.includes(Ve)&&r.size>=this.TOPIC_MSG_LIMIT&&this._convM.clearMemMsg(i,!0)}}catch(e){n.e(e)}finally{n.f()}}}},{key:"pushIn",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=e.conversationID,o=!0,i=(this._map.has(n)||this._map.set(n,new Map),this._getUniqueIDOfMsg(e));if(this._map.get(n).has(i)){var r=this._map.get(n).get(i);if(!t||!0===r.isModified)return!1}return this._map.get(n).set(i,e),this._setLatestMsgSentByPeer(n,e),this._setLatestMsgSentByMe(n,e),o}},{key:"unshift",value:function(e,t){var n;if(Xe(e)?0<e.length&&(n=e[0].conversationID,this._unshiftMultipleMsgs(e,t)):(n=e.conversationID,this._unshiftSingleMsg(e,t)),n){var o=Array.from(this._map.get(n).values());e=o.length;if(0!==e){for(var i=e-1;0<=i;i--)if("out"===o[i].flow){this._setLatestMsgSentByMe(n,o[i]);break}if(n.startsWith(k.CONV_C2C))for(var r=e-1;0<=r;r--)if("in"===o[r].flow){this._setLatestMsgSentByPeer(n,o[r]);break}}}}},{key:"_unshiftSingleMsg",value:function(e,t){var n=e.conversationID,o=this._getUniqueIDOfMsg(e);if(!this._map.has(n))return this._map.set(n,new Map),this._map.get(n).set(o,e),void t.push(e);var i=this._map.get(n),r=Array.from(i);i.has(o)||(r.unshift([o,e]),this._map.set(n,new Map(r)),t.push(e))}},{key:"_unshiftMultipleMsgs",value:function(e,t){for(var n=e.length,o=[],i=e[0].conversationID,r=this._map.get(i),a=this._map.has(i)?Array.from(r):[],s=0;s<n;s++){var c=this._getUniqueIDOfMsg(e[s]);r&&r.has(c)||(o.push([c,e[s]]),t.push(e[s]))}this._map.set(i,new Map(o.concat(a)))}},{key:"remove",value:function(e){var t=e.conversationID;e=this._getUniqueIDOfMsg(e);this._map.has(t)&&this._map.get(t).delete(e)}},{key:"revoke",value:function(e,t,n){var o;return this._map.has(e)?(o=this._map.get(e),this._updateMsgIsRevoked(o,t,n)):this._hoppingMsgMap.has(e)?(o=this._hoppingMsgMap.get(e),this._updateMsgIsRevoked(o,t,n)):null}},{key:"_updateMsgIsRevoked",value:function(e,t,n){var o,i=S(e);try{for(i.s();!(o=i.n()).done;){var r=m(o.value,2)[1];if(r.sequence===t&&(dt(n)||r.random===n))return r.isRevoked||(r.isRevoked=!0),r}}catch(e){i.e(e)}finally{i.f()}}},{key:"removeByConvID",value:function(e){var t=this._map.has(e);we.l("".concat(this._n,".removeByConvID convID:").concat(e," has:").concat(t)),t&&(this._map.delete(e),this._latestMsgSentByPeerMap.delete(e),this._latestMsgSentByMeMap.delete(e))}},{key:"findMessage",value:function(e){var t=null;return(t=this._findMsg(e,this._map))?t:this._findMsg(e,this._hoppingMsgMap)}},{key:"_findMsg",value:function(e,t){var n,o=null,i=S(t);try{for(i.s();!(n=i.n()).done;)for(var r=y(m(n.value,2)[1].values()),a=r.length,s=0;s<a;s++)if(r[s].ID===e){o=r[s];break}}catch(e){i.e(e)}finally{i.f()}return o}},{key:"updateMsgIsPeerReadProp",value:function(e,t){var n,o=[];return this._map.has(e)?(n=this._map.get(e),o=this._updateMsgIsPeerReadProp(n,t)):this._hoppingMsgMap.has(e)&&(n=this._hoppingMsgMap.get(e),o=this._updateMsgIsPeerReadProp(n,t)),we.l("".concat(this._n,".updateMsgIsPeerReadProp convID:").concat(e," peerReadTime:").concat(t," count:").concat(o.length)),o}},{key:"_updateMsgIsPeerReadProp",value:function(e,t){var n,o=[],i=S(e);try{for(i.s();!(n=i.n()).done;){var r=m(n.value,2)[1];r.time<=t&&!r.isPeerRead&&"out"===r.flow&&(r.isPeerRead=!0,o.push(r))}}catch(e){i.e(e)}finally{i.f()}return o}},{key:"updateMsgIsModifiedProp",value:function(e){var t=e.conversationID;this._map.has(t)&&(e=this._getUniqueIDOfMsg(e),(t=this._map.get(t).get(e))&&(t.isModified=!0))}},{key:"hasLocalMsgList",value:function(e){return this._map.has(e)}},{key:"getLocalMsgList",value:function(e){return this.hasLocalMsgList(e)?y(this._map.get(e).values()):[]}},{key:"getLocalMaxSeq",value:function(e){return this.hasLocalMsgList(e)?(e=y(this._map.get(e).values()).map((function(e){return e.sequence})),Math.max.apply(Math,y(e))):0}},{key:"getLocalMaxTime",value:function(e){return this.hasLocalMsgList(e)?(e=y(this._map.get(e).values()).map((function(e){return e.time})),Math.max.apply(Math,y(e))):0}},{key:"hasLocalMsg",value:function(e,t){for(var n=!1,o=this.getLocalMsgList(e),i=o.length,r=0;r<i;r++)o[r].ID===t&&(n=!0);return n}},{key:"getLocalMsg",value:function(e,t){for(var n=null,o=this.getLocalMsgList(e),i=o.length,r=0;r<i;r++)if(o[r].ID===t){n=o[r];break}return n}},{key:"getLocalLastMsg",value:function(e){return e=this.getLocalMsgList(e),e[e.length-1]}},{key:"getLocalSecondLastMsg",value:function(e){return e=this.getLocalMsgList(e),e[e.length-2]}},{key:"getLocalOldestMsg",value:function(e){return this.getLocalMsgList(e)[0]}},{key:"_setLatestMsgSentByPeer",value:function(e,t){e.startsWith(k.CONV_C2C)&&"in"===t.flow&&this._latestMsgSentByPeerMap.set(e,t)}},{key:"_setLatestMsgSentByMe",value:function(e,t){"out"===t.flow&&this._latestMsgSentByMeMap.set(e,t)}},{key:"getLatestMsgSentByPeer",value:function(e){return this._latestMsgSentByPeerMap.get(e)}},{key:"getLatestMsgSentByMe",value:function(e){return this._latestMsgSentByMeMap.get(e)}},{key:"modifyMsgSentByPeer",value:function(e){var t=e.conversationID,n=e.latestNick,o=e.latestAvatar;e=this._map.get(t);if(!je(e)){var i=Array.from(e.values());e=i.length;if(0!==e){for(var r=null,a=0,s=!1,c=e-1;0<=c;c--)"in"===i[c].flow&&((r=i[c]).nick!==n&&(r.setNickAndAvatar({nick:n}),s=!0),r.avatar!==o&&(r.setNickAndAvatar({avatar:o}),s=!0),s&&(a+=1));we.l("".concat(this._n,".modifyMsgSentByPeer convID:").concat(t," count:").concat(a))}}}},{key:"modifyMsgSentByMe",value:function(e){var t=e.conversationID,n=e.latestNick,o=e.latestAvatar;e=this._map.get(t);if(!je(e)){var i=Array.from(e.values());e=i.length;if(0!==e){for(var r=null,a=0,s=!1,c=e-1;0<=c;c--)"out"===i[c].flow&&((r=i[c]).nick!==n&&(r.setNickAndAvatar({nick:n}),s=!0),r.avatar!==o&&(r.setNickAndAvatar({avatar:o}),s=!0),s&&(a+=1));we.l("".concat(this._n,".modifyMsgSentByMe convID:").concat(t," count:").concat(a))}}}},{key:"getTopicConvIDList",value:function(e){return y(this._map.keys()).filter((function(t){return t.startsWith("".concat(k.CONV_GROUP).concat(e))}))}},{key:"onMsgModified",value:function(e,t){if(!this._map.has(e)&&!this._hoppingMsgMap.has(e))return{isUpdated:!1,message:null};var n="".concat(this._n,".onMsgModified"),o=this._getUniqueIDOfMsg(t),i=this._getTargetMsg(e,o),r=!!i;return we.l("".concat(n," convID:").concat(e," uniqueID:").concat(o," has:").concat(r)),r?(e=t.messageVersion,o=t.elements,r=t.cloudCustomData,t=t.checkResult,we.l("".concat(n," localVersion:").concat(i.version," remoteVersion:").concat(e)),i.version<e?(i.version=e,i._elements=JSON.parse(JSON.stringify(o)),i.payload=JSON.parse(JSON.stringify(o[0].content)),i.type=o[0].type,i.cloudCustomData=r,i.isModified=!0,i.hasRiskContent=zt(t),{isUpdated:!0,message:i}):{isUpdated:!1,message:i}):{isUpdated:!1,message:null}}},{key:"_getUniqueIDOfMsg",value:function(e){var t=e.from,n=e.to,o=e.random,i=e.sequence;e=e.time;return"".concat(t,"-").concat(n,"-").concat(o,"-").concat(i,"-").concat(e)}},{key:"_getTargetMsg",value:function(e,t){if(this._map.has(e))return this._map.get(e).get(t);var n=void 0;if(this._hoppingMsgMap.has(e))for(var o=y(this._hoppingMsgMap.get(e).values()),i=0;i<o.length;i++)if(this._getUniqueIDOfMsg(o[i])===t){n=o[i];break}return n}},{key:"storeHoppingMsgList",value:function(e){if(0!==e.length){var t=e[0].conversationID,n=e.length;this._hoppingMsgMap.has(t)||this._hoppingMsgMap.set(t,new Map);for(var o=this._hoppingMsgMap.get(t),i=0;i<n;i++){var r=e[i];o.has(r.ID)||o.set(r.ID,r)}}}},{key:"getHoppingMsg",value:function(e,t){if(this._hoppingMsgMap.has(e))return this._hoppingMsgMap.get(e).get(t)}},{key:"reset",value:function(){this._map.clear(),this._latestMsgSentByPeerMap.clear(),this._latestMsgSentByMeMap.clear(),this._hoppingMsgMap.clear()}}]),Ho);function Ho(e){r(this,Ho),this._convM=e,this._map=new Map,this._n="MsgListHandler",this._latestMsgSentByPeerMap=new Map,this._latestMsgSentByMeMap=new Map,this._hoppingMsgMap=new Map,this.TOPIC_MSG_LIMIT=1e3,this._convM.getIEmitInst().on(Bo.CLOUD_CONFIG,this._onCloudConfig,this)}function jo(e){return r(this,jo),(e=Fo.call(this,e))._n="C2CModule",e._msgFromUnreadDBMap=new Map,e._noticeFromUnreadDBList=[],e}function Ko(e){this.mixin(e)}function Wo(e,n,o){return dt(e)?{lastTime:0,lastSequence:0,fromAccount:"",messageForShow:"",payload:null,type:"",isRevoked:!1,cloudCustomData:"",onlineOnlyFlag:!1,nick:"",nameCard:"",version:0,isPeerRead:!1,revoker:null}:o&&e.ID||e instanceof So?{lastTime:e.time||0,lastSequence:e.sequence||0,fromAccount:e.from||"",messageForShow:qt(e.type,e.payload,n),payload:e.payload||null,type:e.type||null,isRevoked:e.isRevoked||!1,cloudCustomData:e.cloudCustomData||"",onlineOnlyFlag:e._onlineOnlyFlag||!1,nick:e.nick||"",nameCard:e.nameCard||"",version:e.version||0,isPeerRead:e.isPeerRead||!1,revoker:e.revoker||null}:t(t({},e),{},{messageForShow:qt(e.type,e.payload,n)})}function Yo(e,t){return je(e)?{lastTime:0,lastSequence:0,fromAccount:"",payload:null,type:"",messageForShow:"",nick:"",avatar:"",version:0,cloudCustomData:"",isRevoked:!1,revoker:null}:{lastTime:e.time||0,lastSequence:e.sequence||0,fromAccount:e.from||"",payload:e.payload||null,type:e.type||"",messageForShow:qt(e.type,e.payload,t),nick:e.nick||"",avatar:e.avatar||"",version:e.version||0,cloudCustomData:e.cloudCustomData||"",isRevoked:e.isRevoked||!1,revoker:e.revoker||null}}function zo(e){var t=String(e).replace(/[=]+$/,""),n="";if(t.length%4==1)return"";for(var o,i,r=0,a=0;i=t.charAt(a++);~i&&(o=r%4?64*o+i:i,r++%4)&&(n+=String.fromCharCode(255&o>>(-2*r&6))))i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);try{return decodeURIComponent(escape(n))}catch(e){return""}}Ko.mixin=function(e){e=e.prototype||e,e._isReady=!1,e.ready=function(e){if(e)return this._isReady?void(1<arguments.length&&void 0!==arguments[1]&&arguments[1]?e.call(this):setTimeout(e,1)):(this._readyQueue=this._readyQueue||[],void this._readyQueue.push(e))},e.triggerReady=function(){var e=this;this._isReady=!0,setTimeout((function(){var t=e._readyQueue;e._readyQueue=[],t&&0<t.length&&t.forEach((function(e){e.call(this)}),e)}),1)},e.resetReady=function(){this._isReady=!1,this._readyQueue=[]},e.isReady=function(){return this._isReady}};var $o,Xo,Jo,Qo,Zo,ei=["jpg","jpeg","gif","png","bmp","image","webp"],ti=["mp4","quicktime","mov"],ni=(c(rr,[{key:"validate",value:function(e){var t,n=!0,o="";if(je(e))return{valid:!1,tips:"empty options"};if(e.profileCustomField)for(var i=e.profileCustomField.length,r=null,a=0;a<i;a++){if(r=e.profileCustomField[a],!lt(r.key)||-1===r.key.indexOf("Tag_Profile_Custom"))return{valid:!1,tips:"The prefix of keys of the custom profile key-value pairs (which is profileCustomField) must be Tag_Profile_Custom"};if(!lt(r.value))return{valid:!1,tips:"The type of values of the custom profile key-value pairs (which is profileCustomField) must be String"}}for(t in e)if(Object.prototype.hasOwnProperty.call(e,t)){if("profileCustomField"===t)continue;if(je(e[t])&&!lt(e[t])&&!Ye(e[t])){o="key:"+t+", invalid value:"+e[t],n=!1;continue}switch(t){case"nick":lt(e[t])||(n=!(o="nick must be a string")),500<ot(e[t])&&(o="nick name limited: must less than or equal to ".concat(500," bytes, current size: ").concat(ot(e[t])," bytes"),n=!1);break;case"gender":at(Ue,e.gender)||(o="key:gender, invalid value:"+e.gender,n=!1);break;case"birthday":Ye(e.birthday)||(n=!(o="birthday must be a number"));break;case"location":lt(e.location)||(n=!(o="location must be a string"));break;case"selfSignature":lt(e.selfSignature)||(n=!(o="selfSignature must be a string"));break;case"allowType":at(Fe,e.allowType)||(o="key:allowType, invalid value:"+e.allowType,n=!1);break;case"language":Ye(e.language)||(n=!(o="language must be a number"));break;case"avatar":lt(e.avatar)||(n=!(o="avatar must be a string"));break;case"messageSettings":0!==e.messageSettings&&1!==e.messageSettings&&(n=!(o="messageSettings must be 0 or 1"));break;case"adminForbidType":at(xe,e.adminForbidType)||(o="key:adminForbidType, invalid value:"+e.adminForbidType,n=!1);break;case"level":Ye(e.level)||(n=!(o="level must be a number"));break;case"role":Ye(e.role)||(n=!(o="role must be a number"));break;default:o="unknown key:"+t+"  "+e[t],n=!1}}return{valid:n,tips:o}}}]),rr),oi=(c(ir,[{key:"set",value:function(e){var t;this.map.size>=this.MAX_LENGTH&&(t=this.map.entries().next().value[0],this.map.delete(t)),this.map.set(e,1)}},{key:"has",value:function(e){return this.map.has(e)}},{key:"delete",value:function(e){this.has(e)&&this.map.delete(e)}},{key:"reset",value:function(){this.map.clear()}}]),ir),ii=["groupID","name","avatar","type","introduction","notification","ownerID","selfInfo","createTime","infoSequence","lastInfoTime","lastMessage","nextMessageSeq","memberNum","maxMemberNum","memberList","joinOption","groupCustomField","muteAllMembers","isSupportTopic","inviteOption","_lastRevokedTime"],ri=(c(or,[{key:"memberNum",get:function(){return this.memberCount},set:function(e){}},{key:"maxMemberNum",get:function(){return this.maxMemberCount},set:function(e){}},{key:"_initGroup",value:function(e){for(var t in e)ii.indexOf(t)<0||("selfInfo"!==t?("memberNum"===t&&(this.memberCount=e[t]),"maxMemberNum"===t&&(this.maxMemberCount=e[t]),"isSupportTopic"!==t?this[t]=e[t]:this.isSupportTopic=1===e[t]):this.updateSelfInfo(e[t]))}},{key:"updateGroup",value:function(e){var t=this;e.appid=void 0,e.grossTopicNextMsgSeq=void 0,e.selfInfo&&(e.selfInfo.grossTopicReadSeq=void 0),e=JSON.parse(JSON.stringify(e));e.lastMsgTime&&(this.lastMessage.lastTime=e.lastMsgTime),dt(e.muteAllMembers)||("On"===e.muteAllMembers?e.muteAllMembers=!0:e.muteAllMembers=!1),e.groupCustomField&&yt(this.groupCustomField,e.groupCustomField),dt(e.memberNum)||(this.memberCount=e.memberNum),dt(e.maxMemberNum)||(this.maxMemberCount=e.maxMemberNum),dt(e.isSupportTopic)||(this.isSupportTopic=Ye(e.isSupportTopic)?1===e.isSupportTopic:e.isSupportTopic),et(this,e,["members","errorCode","lastMsgTime","groupCustomField","memberNum","maxMemberNum","isSupportTopic"]),Xe(e.members)&&0<e.members.length&&e.members.forEach((function(e){e.userID===t.selfInfo.userID&&et(t.selfInfo,e,["sequence"])}))}},{key:"updateSelfInfo",value:function(e){e={nameCard:e.nameCard,joinTime:e.joinTime,role:e.role,messageRemindType:e.messageRemindType,readedSequence:e.readedSequence,excludedUnreadSequenceList:e.excludedUnreadSequenceList},et(this.selfInfo,t({},e),[],["",null,void 0,0,NaN])}},{key:"setSelfNameCard",value:function(e){this.selfInfo.nameCard=e}}]),or),ai=(c(nr,[{key:"toAccount",get:function(){return this.conversationID.startsWith(k.CONV_C2C)?this.conversationID.replace(k.CONV_C2C,""):this.conversationID.startsWith(k.CONV_GROUP)?this.conversationID.replace(k.CONV_GROUP,""):""}},{key:"_initProfile",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case"userProfile":t.userProfile=e.userProfile;break;case"groupProfile":t.groupProfile=e.groupProfile}})),dt(this.userProfile)&&this.type===k.CONV_C2C?this.userProfile=new ni({userID:e.conversationID.replace("C2C","")}):dt(this.groupProfile)&&this.type===k.CONV_GROUP&&(this.groupProfile=new ri({groupID:e.conversationID.replace("GROUP","")}))}},{key:"updateUnreadCount",value:function(e){var t=e.nextUnreadCount,n=e.isFromGetConversations;e=e.isUnreadC2CMessage;dt(t)||(Ct(this.subType)?this.unreadCount=0:n&&this.type===k.CONV_GROUP||n&&this.type===k.CONV_TOPIC||e&&this.type===k.CONV_C2C?this.unreadCount=t:this.unreadCount=this.unreadCount+t)}},{key:"updateLastMessage",value:function(e){this.lastMessage=Wo(e)}},{key:"updateGroupAtInfoList",value:function(e){var t;this._isNeedMergeGroupAtInfo(e)||(-1!==(t=(M(t=e.groupAtType)||I(t)||C(t)||T()).slice(0)).indexOf(k.CONV_AT_ME)&&-1!==t.indexOf(k.CONV_AT_ALL)&&(t=[k.CONV_AT_ALL_AT_ME]),t={from:e.from,groupID:e.groupID,topicID:e.topicID,messageSequence:e.sequence,atTypeArray:t,__random:e.__random,__sequence:e.__sequence},this.groupAtInfoList.push(t))}},{key:"_isNeedMergeGroupAtInfo",value:function(e){var t=e.groupID,n=e.sequence;if(!bt({groupID:t}))return!1;var o=!1;return this.groupAtInfoList.forEach((function(t){t.messageSequence===n&&(-1<t.atTypeArray.indexOf(k.CONV_AT_ME)&&-1<e.groupAtType.indexOf(k.CONV_AT_ALL)&&(t.atTypeArray=[k.CONV_AT_ALL_AT_ME]),-1<t.atTypeArray.indexOf(k.CONV_AT_ALL)&&-1<e.groupAtType.indexOf(k.CONV_AT_ME)&&(t.atTypeArray=[k.CONV_AT_ALL_AT_ME],t.__random=e.__random,t.__sequence=e.__sequence),o=!0)})),o}},{key:"clearGroupAtInfoList",value:function(){this.groupAtInfoList.length=0}},{key:"reduceUnreadCount",value:function(){return 1<=this.unreadCount&&(--this.unreadCount,!0)}},{key:"isLastMessageRevoked",value:function(e){var t=e.sequence;e=e.time;return this.type===k.CONV_C2C&&t===this.lastMessage.lastSequence&&e===this.lastMessage.lastTime||this.type===k.CONV_GROUP&&t===this.lastMessage.lastSequence}},{key:"setLastMessageRevoked",value:function(e){this.lastMessage.isRevoked=e}},{key:"setLastMessageRevoker",value:function(e){this.lastMessage.revoker=e}},{key:"setDraftText",value:function(e){this.draftText=e}}]),nr),si=(u(te={},k.MSG_REMIND_ACPT_AND_NOTE,0),u(te,k.MSG_REMIND_DISCARD,1),u(te,k.MSG_REMIND_ACPT_NOT_NOTE,2),te),ci=(c(tr,[{key:"onAllRcvMsgOptNotify",value:function(e){e=this._handleResult(e),this._convM.emitOEvt(E.ALL_RECEIVE_MESSAGE_OPT_UPDATED,e)}},{key:"getC2CMsgRemindType",value:function(e){var t=this,n="".concat(this._n,".getC2CMsgRemindType");return this._convM.req({P:Fn.GET_C2C_PEER_MUTE_NOTIFICATIONS,data:{toAccount:this._convM.getMyUserID(),userIDList:e}}).then((function(o){we.l("".concat(n," ok. userIDList:").concat(e)),o=o.data.muteFlagList,t._convM.onC2CMsgRemindTypeFetched(o)})).catch((function(e){we.e("".concat(n," failed. error:"),e)}))}},{key:"set",value:function(e){return e.groupID?this._setGroupMsgRemindType(e):Xe(e.userIDList)?this._setC2CMsgRemindType(e):void 0}},{key:"_setGroupMsgRemindType",value:function(e){var t=this,n="".concat(this._n,".").concat("_setGroupMsgRemindType"),o=e.groupID,i=e.messageRemindType,r="groupID:".concat(o," messageRemindType:").concat(i),a=new eo("_setGroupMsgRemindType"),s=(a.setMessage(r),this._get(7));return s?s.modifyGroupMemberInfo({groupID:o,messageRemindType:i,userID:this._convM.getMyUserID()}).then((function(){a.end(),we.l("".concat(n," ok. ").concat(r));var o=t.onGroupMsgRemindTypeUpdated(e);return t._convM.onTotalUnreadCountUpdate(),Mn(o)})).catch((function(e){return a.setError(e).end(),we.e("".concat(n," failed. error:"),e),Cn(e)})):Cn({code:Un.NO_MODULE})}},{key:"onGroupMsgRemindTypeUpdated",value:function(e){var t,n,o=e.groupID,i=(e=e.messageRemindType,we.l("".concat(this._n,".onGroupMsgRemindTypeUpdated groupID:").concat(o," messageRemindType:").concat(e)),this._get(7).getLocalGroupProfile(o));return i&&(i.selfInfo.messageRemindType=e),Tt(o)?(t=Ft(n=o),(n=this._get(10).getLocalTopic(t,n))&&n.updateSelfInfo({messageRemindType:e})&&this._convM.emitOEvt(E.TOPIC_UPDATED,{groupID:t,topic:n}),{topic:n}):(this._convM.patchMsgRemindType({ID:o,isC2CConversation:!1,messageRemindType:e})&&this._emitConvUpdate(),{group:i})}},{key:"_setC2CMsgRemindType",value:function(e){var t=this,n="".concat(this._n,".").concat("_setC2CMsgRemindType"),o=e.userIDList,i=e.messageRemindType,r=o.slice(0,30),a=(e=si[i]||0,"userIDList:".concat(r," messageRemindType:").concat(i)),s=new eo("_setC2CMsgRemindType");return s.setMessage(a),this._convM.req({P:Fn.SET_C2C_PEER_MUTE_NOTIFICATIONS,data:{userIDList:r,muteFlag:e}}).then((function(e){s.end();e=e.data.errorList;var o=[],c=[],u=(e=(Xe(e)&&e.forEach((function(e){o.push(e.userID),c.push({userID:e.userID,code:e.errorCode})})),r.filter((function(e){return-1===o.indexOf(e)}))),we.l("".concat(n," ok. ").concat(a," successUserIDList:").concat(e," failureUserIDList:").concat(JSON.stringify(c))),0);return e.forEach((function(e){t._convM.patchMsgRemindType({ID:e,isC2CConversation:!0,messageRemindType:i})&&(u+=1)})),1<=u&&t._emitConvUpdate(),r.length=o.length=0,t._convM.onTotalUnreadCountUpdate(),In({successUserIDList:e.map((function(e){return{userID:e}})),failureUserIDList:c})})).catch((function(e){return s.setError(e).end(),we.e("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"_get",value:function(e){return this._convM.get(e)}},{key:"_emitConvUpdate",value:function(){this._convM.emitConvUpdate(!0,!1)}},{key:"setAllRcvMsgOpt",value:function(e){var t="".concat(this._n,".").concat("setAllRcvMsgOpt"),n=e.messageRemindType,o=(n=void 0===n?k.MSG_REMIND_ACPT_NOT_NOTE:n,e.isRepeated),i=(o=void 0===o||o,this._calcStartAndEndTime(e)),r=i.startTime,a=(r=void 0===r?0:r,i=i.endTime,i=void 0===i?0:i,e=JSON.stringify(e),new eo("setAllRcvMsgOpt"));return a.setMessage(e),we.l("".concat(t," options:").concat(e)),this._convM.req({P:Fn.SET_ALL_RECEIVE_MSG_OPT,data:{messageRemindType:si[n],startTime:r,endTime:i,isRepeated:o?1:0}}).then((function(e){return a.end(),we.l("".concat(t," ok.")),Mn(e)})).catch((function(e){return a.setError(e).end(),we.e("".concat(t," failed. error:"),e),Cn(e)}))}},{key:"_calcStartAndEndTime",value:function(e){var t=e.startHour,n=(t=void 0===t?0:t,e.startMinute),o=(n=void 0===n?0:n,e.startSecond),i=(o=void 0===o?0:o,e.duration),r=(i=void 0===i?0:i,e=e.isRepeated,e=void 0===e||e,new Date),a=r.getFullYear(),s=r.getMonth();r=r.getDate(),a=Math.round(new Date(a,s,r,t,n,o).getTime()/1e3);return{startTime:a,endTime:e&&86400<=i?a+86400:a+i}}},{key:"getAllRcvMsgOpt",value:function(){var e=this,t="".concat(this._n,".").concat("getAllRcvMsgOpt"),n=new eo("getAllRcvMsgOpt");return this._convM.req({P:Fn.GET_ALL_RECEIVE_MSG_OPT,data:{toAccount:this._convM.getMyUserID()}}).then((function(o){return o=o.data,n.setMessage(JSON.stringify(o)).end(),we.l("".concat(t," ok. data:").concat(JSON.stringify(o))),o=e._handleResult(o),Mn(o)})).catch((function(e){return n.setError(e).end(),we.e("".concat(t," failed. error:"),e),Cn(e)}))}},{key:"_handleResult",value:function(e){var t=e.messageRemindType,n=e.startTime,o=e.endTime,i=(e=e.isRepeated,k.MSG_REMIND_ACPT_AND_NOTE);return 1===t&&(i=k.MSG_REMIND_DISCARD),{messageRemindType:i=2===t?k.MSG_REMIND_ACPT_NOT_NOTE:i,startTime:n,endTime:o,isRepeated:1===e}}},{key:"reset",value:function(){we.l("".concat(this._n,".reset"))}}]),tr),ui=(c(er,[{key:"setConvCustomData",value:function(e){var t=this,n="".concat(this._n,".").concat("setConvCustomData"),o=e.conversationIDList,i=e.customData,r=(we.l("".concat(n," options:"),e),new eo("setConvCustomData")),a=(r.setMessage(JSON.stringify(e)),{fromAccount:this._getMyUserID(),itemList:[]}),s=[],c=[];return o.forEach((function(e){if(!t._hasLocalConv(e))return t._onConvNotFound(c,e),!0;if(!St(e)&&!Et(e))return t._onConvIDInvalid(c,e),!0;var n={operationType:2,contactItem:void 0,customMark:i};St(e)?n.contactItem={type:1,toAccount:e.replace(k.CONV_C2C,"")}:Et(e)&&(n.contactItem={type:2,groupID:e.replace(k.CONV_GROUP,"")}),a.itemList.push(n)})),c.length===o.length?In({successConversationIDList:s,failureConversationIDList:c}):this._convM.req({P:Fn.SET_CONV_CUSTOM_DATA,data:a}).then((function(e){r.end(),we.l("".concat(n," ok"));var o,a,u;e=e.data.resultItem;return Xe(e)&&(u=!1,e.forEach((function(e){o=t._concatConvID(e.contactItem),0===e.resultCode?(s.push(o),(a=t._getLocalConv(o))&&a.customData!==i&&(a.customData=i,u=!0)):c.push({conversationID:o,code:e.resultCode,message:e.resultInfo})})),!0===u&&t._emitConvUpdate()),Mn({successConversationIDList:s,failureConversationIDList:c})})).catch((function(e){return r.setError(e).end(),we.e("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"markConv",value:function(e){var t=this;if(!this._convM.canIUse(U.CONV_MARK))return this._convM.noUse("markConv");var n="".concat(this._n,".").concat("markConv"),o=e.conversationIDList,i=e.markType,r=e.enableMark,a=(we.l("".concat(n," options:"),e),new eo("markConv")),s=void a.setMessage(JSON.stringify(e)),c=void 0,u=(e=this._getFlagBit(i),!0===r?c=[e]:s=[e],{fromAccount:this._getMyUserID(),itemList:[]}),l=[],d=[];return o.forEach((function(e){if(!t._hasLocalConv(e))return t._onConvNotFound(d,e),!0;if(!St(e)&&!Et(e))return t._onConvIDInvalid(d,e),!0;var n={operationType:1,contactItem:void 0,clearMark:s,setMark:c};St(e)?n.contactItem={type:1,toAccount:e.replace(k.CONV_C2C,"")}:Et(e)&&(n.contactItem={type:2,groupID:e.replace(k.CONV_GROUP,"")}),u.itemList.push(n)})),d.length===o.length?In({successConversationIDList:l,failureConversationIDList:d}):this._convM.req({P:Fn.MARK_CONV,data:u}).then((function(e){a.end(),we.l("".concat(n," ok"));var o,s,c;e=e.data.resultItem;return Xe(e)&&(c=!1,e.forEach((function(e){var n;o=t._concatConvID(e.contactItem),0===e.resultCode?(l.push(o),(s=t._getLocalConv(o))&&(n=s.markList.indexOf(i),!0===r?-1===n&&(s.markList.push(i),c=!0):-1!==n&&(s.markList.splice(n,1),c=!0))):d.push({conversationID:o,code:e.resultCode,message:e.resultInfo})})),!0===c&&t._emitConvUpdate()),Mn({successConversationIDList:l,failureConversationIDList:d})})).catch((function(e){return a.setError(e).end(),we.e("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"getLocalConvGroupList",value:function(){var e=this;return we.l("".concat(this._n,".getLocalConvGroupList pagingStatus:").concat(this._pagingStatus)),this._pagingStatus===Ln?this.getRemoteConvGroupList().then((function(){return Mn(y(e._convGroupMap.values()))})):In(y(this._convGroupMap.values()))}},{key:"searchConvGroupAndMark",value:function(e,t){var n=this,o="".concat(this._n,".searchConvGroupAndMark"),i=[];return e.forEach((function(e){1===t?i.push({type:1,toAccount:e}):2===t&&i.push({type:2,groupID:e})})),we.l("".concat(o," type:").concat(t," list:"),e),this._convM.req({P:Fn.SEARCH_CONV_GRP_MARK,data:{fromAccount:this._getMyUserID(),contactItem:i}}).then((function(e){e=e.data;var t=e.contactItem;e=e.groupItem;we.l("".concat(o," ok. contactItem:"),t,"groupItem:",e),n._fillConvGroupMap(e),n._handleContactItem(t),n._emitConvUpdate()})).catch((function(e){we.w("".concat(o," failed. error:"),e)}))}},{key:"_fillConvGroupMap",value:function(e){var t=this;Xe(e)&&e.forEach((function(e){var n=e.convGroupID;e=e.groupName;t._convGroupMap.set(n,e)}))}},{key:"_handleContactItem",value:function(e){var t,n=this;Xe(e)&&e.forEach((function(e){var o=[],i=e.standardMark,r=e.customData,a=e.convGroupIDList;Xe(a)&&a.forEach((function(e){n._convGroupMap.has(e)&&o.push(n._convGroupMap.get(e))})),t=n._concatConvID(e),(t=n._getLocalConv(t))&&(t.markList=Vt(i),t.customData=r||"",t.conversationGroupList=[].concat(o))}))}},{key:"getRemoteConvGroupList",value:function(){var e=this,t="".concat(this._n,".getRemoteConvGroupList");return this._pagingStatus=Dn,this._convM.req({P:Fn.GET_CONV_GRP_LIST,data:{fromAccount:this._getMyUserID(),startIndex:this._startIndex}}).then((function(n){n=n.data;var o=n.completeFlag,i=n.contactItem,r=n.nextStartIndex;r=void 0===r?0:r,n=n.groupItem;if(e._startIndex=r,we.l("".concat(t," completeFlag:").concat(o," nextStartIndex:").concat(r,", groupItem:"),n,"contactItem:",i),e._fillConvGroupMap(n),e._handleContactItem(i),0===o)return e.getRemoteConvGroupList();1===o&&(e._pagingStatus=An,e._emitConvUpdate(),e._emitConvGroupListUpdate())})).catch((function(n){e._pagingStatus=Ln,we.w("".concat(t," failed. error:"),n)}))}},{key:"createConvGroup",value:function(e){var t=this;if(!this._convM.canIUse(U.CONV_GROUP))return this._convM.noUse("createConvGroup");var n="".concat(this._n,".").concat("createConvGroup"),o=(we.l("".concat(n," options:"),e),new eo("createConvGroup")),i=(o.setMessage(JSON.stringify(e)),e.groupName),r=(e=e.conversationIDList,{fromAccount:this._getMyUserID(),itemList:[{groupName:i,contactItem:[]}]}),a=[],s=[];return e.forEach((function(e){return t._hasLocalConv(e)?St(e)||Et(e)?void(St(e)?r.itemList[0].contactItem.push({type:1,toAccount:e.replace(k.CONV_C2C,"")}):Et(e)&&r.itemList[0].contactItem.push({type:2,groupID:e.replace(k.CONV_GROUP,"")})):(t._onConvIDInvalid(s,e),!0):(t._onConvNotFound(s,e),!0)})),s.length===e.length?In({successConversationIDList:a,failureConversationIDList:s}):this._convM.req({P:Fn.CREATE_CONV_GRP,data:r}).then((function(e){o.end(),we.l("".concat(n," ok"));e=e.data.groupResultItem[0];var r,c,u,l=e.groupItem;e=e.resultItem;return $e(l)&&(t._convGroupMap.set(l.convGroupID,l.groupName),t._emitConvGroupListUpdate()),Xe(e)&&(u=!1,e.forEach((function(e){r=t._concatConvID(e.contactItem),0===e.resultCode?(a.push(r),(c=t._getLocalConv(r))&&-1===c.conversationGroupList.indexOf(i)&&(c.conversationGroupList.push(i),u=!0)):s.push({conversationID:r,code:e.resultCode,message:e.resultInfo})})),!0===u&&(t._emitConvUpdate(),t._emitConvGroupListUpdate())),Mn({successConversationIDList:a,failureConversationIDList:s})})).catch((function(e){return o.setError(e).end(),we.e("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"deleteConvGroup",value:function(e){var t=this;if(!this._convM.canIUse(U.CONV_GROUP))return this._convM.noUse("deleteConvGroup");var n="".concat(this._n,".").concat("deleteConvGroup"),o=(we.l("".concat(n," groupName:").concat(e)),new eo("deleteConvGroup"));return o.setMessage(e),this._convM.req({P:Fn.DEL_CONV_GRP,data:{fromAccount:this._getMyUserID(),groupName:[e]}}).then((function(i){o.end(),we.l("".concat(n," ok"));var r;i=i.data.groupItem;Xe(i)&&(r=!1,i.forEach((function(e){t._convGroupMap.has(e.convGroupID)&&(t._convGroupMap.delete(e.convGroupID),r=!0)})),!0===r&&t._emitConvGroupListUpdate()),t._eraseFromConversationGroupList([e])})).catch((function(e){return o.setError(e).end(),we.e("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"renameConvGroup",value:function(e){var t=this;if(!this._convM.canIUse(U.CONV_GROUP))return this._convM.noUse("renameConvGroup");var n="".concat(this._n,".").concat("renameConvGroup"),o=(we.l("".concat(n," options:"),e),new eo("renameConvGroup")),i=(o.setMessage(JSON.stringify(e)),e.oldName),r=e.newName;return this._convM.req({P:Fn.RENAME_CONV_GRP,data:{fromAccount:this._getMyUserID(),updateType:1,updateGroup:{updateGroupType:1,oldName:i,newName:r}}}).then((function(e){o.end(),we.l("".concat(n," ok")),e=e.data.updateGroupResult.convGroupID,t._convGroupMap.set(e,r),t._emitConvGroupListUpdate();e=t._convM.getLocalConvList();var a,s,c=!1;e.forEach((function(e){a=e.conversationGroupList,-1!==(s=a.indexOf(i))&&(a.splice(s,1,r),c=!0)})),!0===c&&t._emitConvUpdate()})).catch((function(e){return o.setError(e).end(),we.e("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"addConvsToGroup",value:function(e){var t=this;if(!this._convM.canIUse(U.CONV_GROUP))return this._convM.noUse("addConvsToGroup");var n="".concat(this._n,".").concat("addConvsToGroup"),o=(we.l("".concat(n," options:"),e),new eo("addConvsToGroup")),i=(o.setMessage(JSON.stringify(e)),e.conversationIDList),r=e.groupName,a={fromAccount:this._getMyUserID(),updateType:1,updateGroup:{updateGroupType:2,groupName:r,updateItem:[]}},s=[],c=[];return i.forEach((function(e){return t._hasLocalConv(e)?St(e)||Et(e)?void(St(e)?a.updateGroup.updateItem.push({operationType:1,contactItem:{type:1,toAccount:e.replace(k.CONV_C2C,"")}}):Et(e)&&a.updateGroup.updateItem.push({operationType:1,contactItem:{type:2,groupID:e.replace(k.CONV_GROUP,"")}})):(t._onConvIDInvalid(c,e),!0):(t._onConvNotFound(c,e),!0)})),c.length===i.length?In({successConversationIDList:s,failureConversationIDList:c}):this._convM.req({P:Fn.ADD_CONV_TO_GRP,data:a}).then((function(e){o.end(),we.l("".concat(n," ok"));var i,a,u;e=e.data.updateGroupResult.contactResultItem;return Xe(e)&&(u=!1,e.forEach((function(e){i=t._concatConvID(e.contactItem),0===e.resultCode?(a=t._getLocalConv(i))&&-1===a.conversationGroupList.indexOf(r)&&(a.conversationGroupList.push(r),s.push(i),u=!0):c.push({conversationID:i,code:e.resultCode,message:e.resultInfo})})),!0===u&&(t._emitConvUpdate(),t._emitConvInGroupUpdate(r))),Mn({successConversationIDList:s,failureConversationIDList:c})})).catch((function(e){return o.setError(e).end(),we.e("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"deleteConvsFromGroup",value:function(e){var t=this,n="deleteConvsFromGroup";if(!this._convM.canIUse(U.CONV_GROUP))return this._convM.noUse(n);var o="".concat(this._n,".").concat(n),i=(we.l("".concat(o," options:"),e),new eo(n)),r=(n=(i.setMessage(JSON.stringify(e)),e.conversationIDList),e.groupName),a={fromAccount:this._getMyUserID(),updateType:1,updateGroup:{updateGroupType:2,groupName:r,updateItem:[]}},s=[],c=[];return n.forEach((function(e){return t._hasLocalConv(e)?St(e)||Et(e)?void(St(e)?a.updateGroup.updateItem.push({operationType:2,contactItem:{type:1,toAccount:e.replace(k.CONV_C2C,"")}}):Et(e)&&a.updateGroup.updateItem.push({operationType:2,contactItem:{type:2,groupID:e.replace(k.CONV_GROUP,"")}})):(t._onConvIDInvalid(c,e),!0):(t._onConvNotFound(c,e),!0)})),c.length===n.length?In({successConversationIDList:s,failureConversationIDList:c}):this._convM.req({P:Fn.DEL_CONV_FROM_GRP,data:a}).then((function(e){i.end(),we.l("".concat(o," ok"));var n,a,u;e=e.data.updateGroupResult.contactResultItem;return Xe(e)&&(u=!1,e.forEach((function(e){var o;n=t._concatConvID(e.contactItem),0===e.resultCode?!(a=t._getLocalConv(n))||-1!==(o=a.conversationGroupList.indexOf(r))&&(a.conversationGroupList.splice(o,1),s.push(n),u=!0):c.push({conversationID:n,code:e.resultCode,message:e.resultInfo})})),!0===u&&(t._emitConvUpdate(),t._emitConvInGroupUpdate(r))),Mn({successConversationIDList:s,failureConversationIDList:c})})).catch((function(e){return i.setError(e).end(),we.e("".concat(o," failed. error:"),e),Cn(e)}))}},{key:"onConvMarkUpdated",value:function(e){var t,n,o=this;je(e)||(we.l("".concat(this._n,".onConvMarkUpdated markItemList:"),e),n=!1,e.forEach((function(e){var i=e.recentContactItem,r=e.optType,a=e.standardMark;e=e.customMark;t=o._concatConvID(i),(t=o._getLocalConv(t))&&(1===r?n=o._diffStandardMark(t,a):2===r?n=o._diffCustomMark(t,e):3===r&&(n=o._diffStandardMark(t,a)||o._diffCustomMark(t,e)))})),!0===n&&this._emitConvUpdate())}},{key:"_diffStandardMark",value:function(e,t){t=Vt(t);var n=!1;return!0!==function(e,t){if(e===t)return!0;if(!e||!t)return!1;if(e.length!==t.length)return!1;for(var n=0,o=e.length;n<o;n++)if(e[n]!==t[n])return!1;return!0}(e.markList,t)&&(e.markList=t,n=!0),n}},{key:"_diffCustomMark",value:function(e,t){var n=!1;return e.customData!==t&&void 0!==t&&(e.customData=t,n=!0),n}},{key:"onConvGroupCreated",value:function(e){var t=this,n=(we.l("".concat(this._n,".onConvGroupCreated resultList:"),e),!1),o=!1;Xe(e)&&(e.forEach((function(e){var i=e.msgGroupItem,r=i.groupID,a=i.groupName;t._convGroupMap.get(r)!==a&&(t._convGroupMap.set(r,a),o=!0);var s;i=e.msgRecentContactItem;Xe(i)&&i.forEach((function(e){s=t._concatConvID(e),(s=t._getLocalConv(s))&&-1===s.conversationGroupList.indexOf(a)&&(s.conversationGroupList.push(a),n=!0)}))})),!0===n&&this._emitConvUpdate(),!0===o&&this._emitConvGroupListUpdate())}},{key:"onConvGroupDeleted",value:function(e){var t,n=this,o=(we.l("".concat(this._n,".onConvGroupDeleted groupItemList:"),e),[]);Xe(e)&&(t=!1,e.forEach((function(e){var i=e.groupID;e=e.groupName;n._convGroupMap.has(i)&&(n._convGroupMap.delete(i),t=!0,o.push(e))})),!0===t&&this._emitConvGroupListUpdate()),this._eraseFromConversationGroupList(o)}},{key:"_eraseFromConversationGroupList",value:function(e){je(e)||(this._convM.getLocalConvList().forEach((function(t){t.conversationGroupList=t.conversationGroupList.filter((function(t){return!e.includes(t)}))})),this._emitConvUpdate())}},{key:"onConvGroupNameUpdated",value:function(e){we.l("".concat(this._n,".onConvGroupNameUpdated options:"),e);var t,n,o,i=e.groupID,r=e.groupName,a=e.oldGroupName;this._convGroupMap.get(i)!==r&&(this._convGroupMap.set(i,r),this._emitConvGroupListUpdate(),e=this._convM.getLocalConvList(),o=!1,e.forEach((function(e){t=e.conversationGroupList,-1!==(n=t.indexOf(a))&&(t.splice(n,1,r),o=!0)})),!0===o&&this._emitConvUpdate())}},{key:"onConvInGroupUpdated",value:function(e){var t,n,o,i=this,r=(we.l("".concat(this._n,".onConvInGroupUpdated options:"),e),e.oldGroupName);e=e.recentContactUpdateGroupItem;Xe(e)&&(o=!1,e.forEach((function(e){var a=e.contactOptType;e=e.recentContactItem;t=i._concatConvID(e),(t=i._getLocalConv(t))&&(n=t.conversationGroupList.indexOf(r),1===a?-1===n&&(t.conversationGroupList.push(r),o=!0):2===a&&-1!==n&&(t.conversationGroupList.splice(n,1),o=!0))})),!0===o&&(this._emitConvUpdate(),this._emitConvInGroupUpdate(r)))}},{key:"onConvAddedToOrDeletedFromGroup",value:function(e){var t,n,o=this,i=(we.l("".concat(this._n,".onConvAddedToOrDeletedFromGroup options:"),e),e.msgRecentContactItem),r=(e=e.msgRecentContactUpdateContactItem,i=this._concatConvID(i),this._getLocalConv(i));r&&Xe(e)&&(n=!1,e.forEach((function(e){var i=e.groupOptType;e=e.recentContactGroupItem.groupName;t=r.conversationGroupList.indexOf(e),1===i?-1===t&&(r.conversationGroupList.push(e),n=!0):2===i&&-1!==t&&(r.conversationGroupList.splice(t,1),n=!0),!0===n&&o._emitConvInGroupUpdate(e)})),!0===n&&this._emitConvUpdate())}},{key:"onConvGroupListSynced",value:function(e){Xe(e)&&0!==e.length&&(we.l("".concat(this._n,".onConvGroupListSynced groupItem:"),e),this._fillConvGroupMap(e))}},{key:"getConvGroupListByID",value:function(e){var t,n=this;if(!je(e))return t=[],e.forEach((function(e){n._convGroupMap.has(e)&&t.push(n._convGroupMap.get(e))})),t}},{key:"_onConvNotFound",value:function(e,t){e.push({conversationID:t,code:Un.CONV_NOT_FOUND,message:this._convM.getErrMsg(Un.CONV_NOT_FOUND)})}},{key:"_onConvIDInvalid",value:function(e,t){e.push({conversationID:t,code:Un.INVALID_CONV_ID,message:this._convM.getErrMsg(Un.INVALID_CONV_ID)})}},{key:"_getFlagBit",value:function(e){for(var t=e.toString(2),n=t.length,o=n-1;0<=o;o--)if("1"===t[o])return n-o-1}},{key:"_concatConvID",value:function(e){var t,n=e.type,o=e.to,i=e.groupID;e=e.userID;return 1===n?dt(e)?dt(o)||(t="".concat(k.CONV_C2C).concat(o)):t="".concat(k.CONV_C2C).concat(e):2===n&&(t="".concat(k.CONV_GROUP).concat(i)),t}},{key:"_getMyUserID",value:function(){return this._convM.getMyUserID()}},{key:"_getLocalConv",value:function(e){return this._convM.getLocalConversation(e)}},{key:"_hasLocalConv",value:function(e){return this._convM.hasLocalConversation(e)}},{key:"_emitConvUpdate",value:function(){this._convM.emitConvUpdate(!0,!1)}},{key:"_emitConvGroupListUpdate",value:function(){this._convM.emitOEvt(E.CONVERSATION_GROUP_LIST_UPDATED,y(this._convGroupMap.values()))}},{key:"_emitConvInGroupUpdate",value:function(e){var t={groupName:e,conversationList:[]},n=this._convM.getLocalConvList();t.conversationList=n.filter((function(t){return t.conversationGroupList.includes(e)})),this._convM.emitOEvt(E.CONVERSATION_IN_GROUP_UPDATED,t)}},{key:"reset",value:function(){we.l("".concat(this._n,".reset")),this._convGroupMap.clear(),this._startIndex=0,this._pagingStatus=kn}}]),er),li=(l(Zi,Rn),Zo=v(Zi),c(Zi,[{key:"_initListeners",value:function(){var e=this.getIEmitInst();e.on(Bo.A2KEY_AND_TINYID_UPDATED,this._init,this),e.on(Bo.PROFILE_UPDATED,this._onProfileUpdated,this),e.on(Bo.CLOUD_CONFIG,this._onCloudConfig,this)}},{key:"_init",value:function(){var e=this,t=(we.l("".concat(this._n,"._init")),this.get(13).getItem("conversationMap")),n=this.isIntl(),o=this.isUsingChatCore();if(t){for(var i=t.length,r=0;r<i;r++){var a=t[r];if(a){if(this._isNonExistentAccount(a.conversationID))continue;if(a.groupProfile&&Ct(a.groupProfile.type))continue}this._convMap.set(a.conversationID,new ai(t[r],n,o))}this.emitConvUpdate(!0,!1)}this.ready((function(){0<e._tmpGroupList.length&&(e.updateConvGroupProfile(e._tmpGroupList),e._tmpGroupList.length=0)})),this.syncConvList()}},{key:"_isNonExistentAccount",value:function(e){var t;return"@TLS#ERROR"===(t=e.startsWith(k.CONV_C2C)?e.replace(k.CONV_C2C,""):t)||"@TLS#NOT_FOUND"===t}},{key:"onCheckTimer",value:function(e){this.isLoggedIn()&&this._msgListHandler.onCheckTimer(e)}},{key:"onMessageSent",value:function(e){this._onSendOrRcvMsg({conversationOptionsList:e.conversationOptionsList,isInstantMessage:!0})}},{key:"onNewMessage",value:function(e){this._onSendOrRcvMsg(e)}},{key:"_onSendOrRcvMsg",value:function(e){var t=this,n=e.conversationOptionsList,o=e.isInstantMessage,i=(o=void 0===o||o,e.isUnreadC2CMessage),r=(i=void 0!==i&&i,e.updateUnreadCount),a=(r=void 0===r||r,e.isSyncingEnded);a=void 0!==a&&a;this._isReady?0!==n.length?(!0===o&&this._checkNewConv(n),this._updateLocalConvList({conversationOptionsList:n,isInstantMessage:o,isUnreadC2CMessage:i,isFromGetConversations:!1,updateUnreadCount:r}),o||(this._convIDFromUnreadDBMap=new Map([].concat(y(this._convIDFromUnreadDBMap),y(n.map((function(e){return[e.conversationID,1]}))))),this._diffAndDeleteConv(),a&&this.emitIEvt(Bo.C2C_UNREAD_HANDLE_COMPLETED)),0<n.filter((function(e){return!t._isConvNeedShow(e.conversationID)})).length||this.emitConvUpdate()):a&&this.emitIEvt(Bo.C2C_UNREAD_HANDLE_COMPLETED):this.ready((function(){t._onSendOrRcvMsg(e)}))}},{key:"updateConvGroupProfile",value:function(e){var t,n=this;Xe(e)&&0===e.length||(0!==this._convMap.size?(t=!1,e.forEach((function(e){var o="".concat(k.CONV_GROUP).concat(e.groupID);n._convMap.has(o)&&(t=!0,(o=n._convMap.get(o)).groupProfile=JSON.parse(JSON.stringify(e)),o.lastMessage.lastSequence<e.nextMessageSeq&&(o.lastMessage.lastSequence=e.nextMessageSeq-1),o.subType||(o.subType=e.type))})),t&&this.emitConvUpdate(!0,!1)):this._tmpGroupList=e)}},{key:"onMessageRevoked",value:function(e,t){var n,o,i,r=this;0!==e.length&&(n=null,o=!1,i=[],e.forEach((function(e){(n=r._convMap.get(e.conversationID))&&(t&&n.reduceUnreadCount()&&(o=n.type!==k.CONV_TOPIC),n.type===k.CONV_TOPIC?i.push(e):n.isLastMessageRevoked({sequence:e.sequence,time:e.time})&&(n.setLastMessageRevoked(!0),n.setLastMessageRevoker(e.revoker),o=!0))})),this.get(10).onMessageRevoked(i),o&&this.emitConvUpdate(!0,!1))}},{key:"updateRevokerInfo",value:function(e){for(var t=new Set,n=0;n<e.length;n++){var o=e[n].revoker;t.add(o)}var i=y(t),r=this.get(4);return new Promise((function(t){r.getUserProfile({userIDList:i}).then((function(n){if(n=n.data,!Xe(n)||0===n.length)return t(e);var o,i={},r=S(n);try{for(r.s();!(o=r.n()).done;){var a=o.value,s=a.userID,c=a.nick,u=a.avatar;i[s]={nick:c,avatar:u}}}catch(n){r.e(n)}finally{r.f()}e.forEach((function(e){var t=e.revoker;i[t]&&(e.revokerInfo.nick=i[t].nick||"",e.revokerInfo.avatar=i[t].avatar||"")})),t(e)})).catch((function(){t(e)}))}))}},{key:"isLastMessageRevoked",value:function(e){var t=!1,n=e.conversationID,o=e.sequence,i=e.time,r=this._convMap.get(n);return r&&(t=r.type===k.CONV_TOPIC?this.get(10).isLastMessageRevoked({topicID:n.replace(k.CONV_GROUP,""),sequence:o}):r.isLastMessageRevoked({sequence:o,time:i})),we.l("".concat(this._n,".isLastMessageRevoked options:"),e,"ret:".concat(t)),t}},{key:"onMessageDeleted",value:function(e){var t=this;if(0!==e.length){var n=null;e.forEach((function(e){(n=t._msgListHandler.getLocalMsg(e.conversationID,e.ID))&&(n.isDeleted=!0),e!==n&&(e.isDeleted=!0)}));e=e[0].conversationID;for(var o=this._msgListHandler.getLocalMsgList(e),i={},r=o.length-1;0<=r;r--)if(!o[r].isDeleted){i=o[r];break}var a,s=this._convMap.get(e);s&&(a=!1,s.lastMessage.lastSequence===i.sequence&&s.lastMessage.lastTime===i.time||(je(i)&&(i=void 0),s.updateLastMessage(i),s.type!==k.CONV_TOPIC&&(a=!0),we.l("".concat(this._n,".onMessageDeleted. update convID:").concat(e," with lastMessage:"),s.lastMessage)),e.startsWith(k.CONV_C2C)&&this.updateUnreadCount(e),a&&this.emitConvUpdate(!0,!1))}}},{key:"onMessageModified",value:function(e){var t="".concat(this._n,".onMessageModified"),n=e.conversationType,o=e.from,i=e.to,r=e.time,a=e.sequence,s=e.elements,c=e.cloudCustomData,u=e.messageVersion,l=this.getMyUserID(),d="".concat(n).concat(i),f=(l=(i===l&&n===k.CONV_C2C&&(d="".concat(n).concat(o)),this._msgListHandler.onMsgModified(d,e)),n=l.isUpdated,l=l.message,!0===n&&this.emitOEvt(E.MESSAGE_MODIFIED,[l]),this._isTopicConv(d));return null===l?we.l("".concat(t," message is null! options:"),e):we.l("".concat(t," isUpdated:").concat(n," isTopicMessage:").concat(f," from:").concat(o," to:").concat(i," sequence:").concat(l.sequence," time:").concat(l.time)),f?this.get(10).onMessageModified(e):!(n=this._convMap.get(d))||(o=n.lastMessage)&&o.lastTime===r&&o.lastSequence===a&&o.version!==u&&(we.l("".concat(t," convID:").concat(d," lastMessage updated")),o.type=s[0].type,o.payload=s[0].content,o.messageForShow=qt(o.type,o.payload,this.isIntl()),o.cloudCustomData=c,o.version=u,this.emitConvUpdate(!0,!1)),l}},{key:"onNewGroupAtTips",value:function(e){var n=this,o=(e=e.dataList,null);e.forEach((function(e){e.groupAtTips?o=e.groupAtTips:e.elements?o=t(t({},e.elements),{},{sync:!0}):e.groupAtType&&(o=t(t({},e),{},{sync:!0})),o.__random=e.random,o.__sequence=e.clientSequence,n._tmpGroupAtTipsList.push(o)})),we.l("".concat(this._n,".onNewGroupAtTips isReady:").concat(this._isReady),this._tmpGroupAtTipsList),this._isReady&&this._handleGroupAtTipsList()}},{key:"_handleGroupAtTipsList",value:function(){var e,t=this;0!==this._tmpGroupAtTipsList.length&&(e=!1,this._tmpGroupAtTipsList.forEach((function(n){var o,i=n.groupID,r=n.from,a=n.topicID,s=(a=void 0===a?void 0:a,n.sync);s=void 0!==s&&s;r!==t.getMyUserID()&&(dt(a)?(r=t._convMap.get("".concat(k.CONV_GROUP).concat(i)))&&(r.updateGroupAtInfoList(n),e=!0):((i=t._convMap.get("".concat(k.CONV_GROUP).concat(a)))&&(i.updateGroupAtInfoList(n),r=t.get(10),o=i.groupAtInfoList,r.onAtInfoUpdated({topicID:a,groupAtInfoList:o})),je(i)&&s&&(t.updateTopicConversation([{conversationID:"".concat(k.CONV_GROUP).concat(a),type:k.CONV_TOPIC}]),t._convMap.get("".concat(k.CONV_GROUP).concat(a)).updateGroupAtInfoList(n))))})),e&&this.emitConvUpdate(!0,!1),this._tmpGroupAtTipsList.length=0)}},{key:"_checkNewConv",value:function(e){var t=this,n=[],o=[];e.forEach((function(e){t._convMap.has(e.conversationID)||(e.type===k.CONV_C2C?n.push(e.conversationID.replace(k.CONV_C2C,"")):e.type===k.CONV_GROUP&&o.push(e.conversationID.replace(k.CONV_GROUP,"")))})),0<n.length&&(this._onNewC2CConv(n),n=null),0<o.length&&(this._onNewGroupConv(o),o=null)}},{key:"_onNewC2CConv",value:function(e){var t=this.get(6);return Promise.all([t.getRemotePeerReadTime(e),this._msgRemindHandler.getC2CMsgRemindType(e),this._convGroupHandler.searchConvGroupAndMark(e,1)])}},{key:"_onNewGroupConv",value:function(e){var t=this.get(7);return t?Promise.all([t.getMsgRemindType(e),this._convGroupHandler.searchConvGroupAndMark(e,2)]):Promise.resolve()}},{key:"_setStorageConvList",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.getLocalConvList().filter((function(e){return e.type===k.CONV_C2C||e.type===k.CONV_GROUP&&e.lastMessage.type!==k.MSG_GRP_TIP})).slice(0,20).map((function(e){return{conversationID:e.conversationID,type:e.type,subType:e.subType,lastMessage:e.lastMessage,groupProfile:e.groupProfile,userProfile:e.userProfile}}));this.get(13).setItem("conversationMap",t,e)}},{key:"emitConvUpdate",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=this.getLocalConvList();!t||(t=this.get(7))&&t.updateGroupLastMessage(n),e&&(this.get(12).isPartialUpdatedConvs()?(this._diffConvMap(this._convMapForDiff,this._convMap),0<this._partialUpdatedConvMap.size&&(this.emitOEvt(E.CONVERSATION_LIST_UPDATED),this.onTotalUnreadCountUpdate(),this._convMapForDiff.clear(),this._convMapForDiff=nt(this._convMap,!0)),0===this._convMapForDiff.size&&(this._convMapForDiff=nt(this._convMap,!0))):(this.emitOEvt(E.CONVERSATION_LIST_UPDATED),this.onTotalUnreadCountUpdate()))}},{key:"_diffConvMap",value:function(e,t){var n,o=S(e);try{for(o.s();!(n=o.n()).done;){var i=m(n.value,2),r=i[0],a=i[1];t.has(r)&&a===JSON.stringify(t.get(r))||this._partialUpdatedConvMap.set(r,t.get(r))}}catch(e){o.e(e)}finally{o.f()}}},{key:"getPartialUpdatedConvs",value:function(){var e=y(nt(this._partialUpdatedConvMap,!1).values());return this._partialUpdatedConvMap.clear(),e}},{key:"getLocalConvList",value:function(){var e=this;return y(this._convMap.values()).filter((function(t){return e._isConvNeedShow(t.conversationID)}))}},{key:"getLocalConversation",value:function(e){return this._convMap.get(e)}},{key:"hasLocalConversation",value:function(e){return this._convMap.has(e)}},{key:"getLocalOldestMessage",value:function(e){return this._msgListHandler.getLocalOldestMsg(e)}},{key:"syncConvList",value:function(){var e=this,t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],n="syncConvList",o=new eo(n);return this._pagingStatus===kn&&this._convMap.clear(),this._pagingGetConvList(t).then((function(t){var i=Wt(e._pagingGetCostList),r=Kt(e._pagingGetCostList);e._pagingGetCostList.length=0,e._pagingStatus=An,e._diffAndDeleteConv(),e.emitConvUpdate(!0,!1),e._setStorageConvList(),e._handleC2CPeerReadTime(),e.emitIEvt(Bo.CONV_SYNC_COMPLETED),r="count:".concat(e._convMap.size," sum:").concat(r," avg:").concat(i);return we.l("".concat(e._n,".").concat(n,". ").concat(r)),o.setMessage(r).end(),t})).catch((function(t){return e._pagingStatus=Ln,o.setMessage(e._pagingTs).setError(t).end(),Cn(t)}))}},{key:"_diffAndDeleteConv",value:function(){var e,t=this;this._isSyncCompleted()&&(e=[],this._convMap.forEach((function(n,o){!t._pagingConvIDMap.has(o)&&t._convIDFromUnreadDBMap.has(o)&&(t._convMap.delete(o),e.push(o))})),we.l("".concat(this._n,"._diffAndDeleteConv list:").concat(e)),e=null)}},{key:"_pagingGetConvList",value:function(){var e=this,t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],n="".concat(this._n,"._pagingGetConvList"),o=(we.l("".concat(n," incrementalPullFlag:").concat(t," ts:").concat(this._pagingTs," startIdx:").concat(this._pagingStartIdx)+" pinnedTs:".concat(this._pagingPinnedTs," pinnedStartIdx:").concat(this._pagingPinnedStartIdx)),Date.now());return this._pagingStatus=Dn,this.req({P:Fn.PAGING_GET_CONV_LIST,data:{fromAccount:this.getMyUserID(),timeStamp:t?this._pagingTs:0,startIndex:t?this._pagingStartIdx:0,pinnedTimeStamp:t?this._pagingPinnedTs:0,pinnedStartIndex:t?this._pagingPinnedStartIdx:0,orderType:1}}).then((function(t){t=t.data;var i=t.completeFlag,r=t.conversations,a=(r=void 0===r?[]:r,t.timeStamp),s=t.startIndex,c=t.pinnedTimeStamp,u=t.pinnedStartIndex;t=t.groupItem;if(e._pagingGetCostList.push(Yt(o,!1)),we.l("".concat(n," ok. completeFlag:").concat(i," count:").concat(r.length," cost:").concat(Yt(o))),e._convGroupHandler.onConvGroupListSynced(t),0<r.length&&(t=e._getConvOptions(r),e._pagingConvIDMap=new Map([].concat(y(e._pagingConvIDMap),y(t.map((function(e){return[e.conversationID,1]}))))),e._updateLocalConvList({conversationOptionsList:t,isFromGetConversations:!0,updateUnreadCount:!0}),e.isLoggedIn()&&e.emitConvUpdate()),!e._isReady){if(!e.isLoggedIn())return In();e.triggerReady()}return e._pagingTs=a,e._pagingStartIdx=s,e._pagingPinnedTs=c,e._pagingPinnedStartIdx=u,1!==i?e._pagingGetConvList():(e._handleGroupAtTipsList(),e._convGroupHandler.getRemoteConvGroupList(),In())})).catch((function(t){throw e.isLoggedIn()&&(e._isReady||(we.w("".concat(n," failed. error:"),t),e.triggerReady())),t}))}},{key:"_updateLocalConvList",value:function(e){var t=e.isFromGetConversations,n=Date.now();e=this._getTmpConvListMapping(e).newConvList;this._convMap=new Map(this._sortConvList(y(this._convMap))),t||this._updateUserOrGroupProfile(e),we.l("".concat(this._n,"._updateLocalConvList cost:").concat(Yt(n)))}},{key:"_getTmpConvListMapping",value:function(e){for(var t=e.conversationOptionsList,n=e.isFromGetConversations,o=e.isInstantMessage,i=e.isUnreadC2CMessage,r=void 0!==i&&i,a=e.updateUnreadCount,s=[],c=[],u=this.get(7),l=this.get(8),d=this.isIntl(),f=this.isUsingChatCore(),p=0,h=t.length;p<h;p++){var g=new ai(t[p],d,f),_=g.conversationID,v=g.type;if(!this._isNonExistentAccount(_)){if(this._convMap.has(_)){var m=this._convMap.get(_);if(n){this._convMap.set(_,g),v===k.CONV_C2C&&(g.unreadCount=m.unreadCount);continue}var y=["unreadCount","allowType","adminForbidType","payload"],M=(!1===o&&y.push("lastMessage"),"boolean"==typeof o&&y.push("isPinned"),t[p].lastMessage),I=!dt(M);I||t[p].type===k.CONV_TOPIC||this._onLastMsgNotExist(t[p]),dt(o)&&I&&null===m.lastMessage.payload&&(m.lastMessage.payload=M.payload),je(m.lastMessage.revoker)||(m.lastMessage.revoker=null),et(m,g,y,[null,void 0,"",0,NaN]),!0===a&&m.updateUnreadCount({nextUnreadCount:g.unreadCount,isFromGetConversations:n,isUnreadC2CMessage:r}),o&&I&&(M.payload&&(m.lastMessage.payload=M.payload),m.type===k.CONV_GROUP&&(m.lastMessage.nameCard=M.nameCard,m.lastMessage.nick=M.nick)),I&&m.lastMessage.cloudCustomData!==M.cloudCustomData&&(m.lastMessage.cloudCustomData=M.cloudCustomData||"")}else v===k.CONV_GROUP&&u?(y=g.groupProfile.groupID,(I=u.getLocalGroupProfile(y))&&(g.groupProfile=I,!0===a&&g.updateUnreadCount({nextUnreadCount:0}))):v===k.CONV_C2C&&(m=_.replace(k.CONV_C2C,""),l&&l.isMyFriend(m)&&(g.remark=l.getFriendRemark(m))),s.push(g),this._convMap.set(_,g);this._convMap.get(_).type===k.CONV_TOPIC&&c.push(this._convMap.get(_))}}for(var C=this.get(10),b=0,T=c.length;b<T;b++){var S=c[b],E=S.conversationID;S=S.groupAtInfoList;je(S)||C.onAtInfoUpdated({topicID:E.replace(k.CONV_GROUP,""),groupAtInfoList:S})}return{newConvList:s}}},{key:"_onLastMsgNotExist",value:function(e){new eo("lastMsgNotExist").setMessage(JSON.stringify(e)).end()}},{key:"_sortConvList",value:function(e){var t=[],n=[],o=[],i=[];return e.forEach((function(e){(!0===e[1].isPinned?je(e[1].lastMessage.lastTime)?n:t:je(e[1].lastMessage.lastTime)?i:o).push(e)})),t.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime})).concat(n).concat(o.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime}))).concat(i)}},{key:"_sortConvListAndEmitEvent",value:function(){this._convMap=new Map(this._sortConvList(y(this._convMap))),this.emitConvUpdate(!0,!1)}},{key:"_updateUserOrGroupProfile",value:function(e){var t,n,o,i,r=this;0!==e.length&&(t=[],n=[],o=this.get(4),i=this.get(7),e.forEach((function(e){var o;e.type===k.CONV_C2C?t.push(e.toAccount):e.type===k.CONV_GROUP&&(o=e.toAccount,i.hasLocalGroup(o)?e.groupProfile=i.getLocalGroupProfile(o):n.push(o))})),we.l("".concat(this._n,"._updateUserOrGroupProfile userIDList:").concat(t," groupIDList:").concat(n)),0<t.length&&o.getUserProfile({userIDList:t}).then((function(e){e=e.data,Xe(e)?e.forEach((function(e){r._doUpdateUserProfile("".concat(k.CONV_C2C).concat(e.userID),e)})):r._doUpdateUserProfile("".concat(k.CONV_C2C).concat(e.userID),e)})),0<n.length&&i.getGroupProfileAdvance({groupIDList:n,responseFilter:{groupBaseInfoFilter:["Type","Name","FaceUrl"]}}).then((function(e){e=e.data.successGroupList;var t=!1;e.forEach((function(e){var n="".concat(k.CONV_GROUP).concat(e.groupID);r._convMap.has(n)&&(n=r._convMap.get(n),et(n.groupProfile,e,[],[null,void 0,"",0,NaN]),!n.subType&&e.type&&(n.subType=e.type),t=!0)})),t&&r.emitConvUpdate()})))}},{key:"_doUpdateUserProfile",value:function(e,t){this.hasLocalConversation(e)&&(this.getLocalConversation(e).userProfile=t,this.emitConvUpdate())}},{key:"_getConvOptions",value:function(e){var n=this,o=[],i=(e=e.filter((function(e){var t=e.type;e=e.userID;return 1===t&&!n._isNonExistentAccount(e)||2===t})),this.getMyUserID());e=e.map((function(e){var r;return dt(e.lastMsg)&&(e.lastMsg={elements:[]}),1===e.type?(r={userID:e.userID,nick:e.peerNick,avatar:e.peerAvatar},o.push(r),{conversationID:"".concat(k.CONV_C2C).concat(e.userID),type:k.CONV_C2C,lastMessage:{lastTime:e.time,lastSequence:e.sequence,fromAccount:e.lastC2CMsgFromAccount,type:e.lastMsg.elements[0]?e.lastMsg.elements[0].type:null,payload:e.lastMsg.elements[0]?n._amendLayersOverLimitProp(e.lastMsg.elements[0].content):null,cloudCustomData:e.lastMsg.cloudCustomData||"",isRevoked:8===e.lastMessageFlag,onlineOnlyFlag:!1,nick:"",nameCard:"",version:0,isPeerRead:e.lastC2CMsgFromAccount===i&&e.time<=e.c2cPeerReadTime,revoker:e.lastMsg.revokerInfo?e.lastMsg.revokerInfo.revoker:null},unreadCount:0,userProfile:new ni(r),peerReadTime:e.c2cPeerReadTime,isPinned:1===e.isPinned,customData:e.customMark||"",markList:Vt(e.standardMark),conversationGroupList:n._convGroupHandler.getConvGroupListByID(e.contactGroupId),remark:e.friendRemark||"",messageRemindType:n._transMsgRemindType(e.messageRemindType)}):{conversationID:"".concat(k.CONV_GROUP).concat(e.groupID),type:k.CONV_GROUP,lastMessage:t(t({lastTime:e.time,lastSequence:e.sequence,fromAccount:e.msgGroupFromAccount},n._patchTypeAndPayload(e)),{},{cloudCustomData:e.lastMsg.cloudCustomData||"",isRevoked:2===e.lastMessageFlag,onlineOnlyFlag:!1,nick:e.senderNick||"",nameCard:e.senderNameCard||"",revoker:e.lastMsg.revokerInfo?e.lastMsg.revokerInfo.revoker:null}),groupProfile:new ri({groupID:e.groupID,name:e.groupNick,avatar:e.groupImage,type:e.groupType,nextMessageSeq:e.nextMessageSeq}),unreadCount:n._computeGroupUnreadCount(e),peerReadTime:0,isPinned:1===e.isPinned,version:0,customData:e.customMark||"",markList:Vt(e.standardMark),conversationGroupList:n._convGroupHandler.getConvGroupListByID(e.contactGroupId),messageRemindType:n._transMsgRemindType(e.messageRemindType)}}));return 0<o.length&&this.get(4).onConvProfileUpdated(o),e}},{key:"_transMsgRemindType",value:function(e){var t="";return 0===e?t=k.MSG_REMIND_ACPT_AND_NOTE:1===e?t=k.MSG_REMIND_DISCARD:2===e?t=k.MSG_REMIND_ACPT_NOT_NOTE:3===e&&(t=k.NOT_RECEIVE_OFFLINE_PUSH_EXCEPT_AT),t}},{key:"_computeGroupUnreadCount",value:function(e){var t=e.unreadCount;e=e.noUnreadCount,t=(void 0===t?0:t)-(void 0===e?0:e);return 0<t?t:0}},{key:"_patchTypeAndPayload",value:function(e){e=e.lastMsg;var n=e.event,o=e.elements;o=void 0===o?[]:o,e=e.groupTips,e=void 0===e?{}:e;return dt(void 0===n?void 0:n)||je(e)?{type:o[0]?o[0].type:null,payload:o[0]?this._amendLayersOverLimitProp(o[0].content):null}:((n=new So(e)).setElement({type:k.MSG_GRP_TIP,content:t(t({},e.elements),{},{groupProfile:e.groupProfile})}),o=JSON.parse(JSON.stringify(n.payload)),n=null,{type:k.MSG_GRP_TIP,payload:o})}},{key:"_amendLayersOverLimitProp",value:function(e){var t=e.layersOverLimit;return 0===t?e.layersOverLimit=!1:1===t&&(e.layersOverLimit=!0),e}},{key:"getLocalMessageList",value:function(e){return this._msgListHandler.getLocalMsgList(e)}},{key:"deleteLocalMessage",value:function(e){e instanceof So&&this._msgListHandler.remove(e)}},{key:"onConvDeleted",value:function(e){Xe(e)&&(e=e.map((function(e){var t=e.type,n=e.userID;e=e.groupID;return 1===t?"".concat(k.CONV_C2C).concat(n):2===t?"".concat(k.CONV_GROUP).concat(e):void 0})),we.l("".concat(this._n,".onConvDeleted convIDList:").concat(e)),this.deleteLocalConvList(e))}},{key:"onConvPinnedStatus",value:function(e,t){var n,o=this;Xe(e)&&(n=!1,e.forEach((function(e){var i,r=e.type,a=e.userID;e=e.groupID;1===r?i=o.getLocalConversation("".concat(k.CONV_C2C).concat(a)):2===r&&(i=o.getLocalConversation("".concat(k.CONV_GROUP).concat(e))),i&&(we.l("".concat(o._n,".onConvPinnedStatus convID:").concat(i.conversationID," localPinned:").concat(i.isPinned," remotePinned:").concat(t)),t?i.isPinned||(i.isPinned=!0,n=!0):i.isPinned&&(i.isPinned=!1,n=!0))})),n&&this._sortConvListAndEmitEvent())}},{key:"getMessageList",value:function(e){var t=this,n=e.conversationID,o=e.nextReqMessageID,i=(e=e.count,"".concat(this._n,".getMessageList")),r=this.getLocalConversation(n),a="";if(r&&r.groupProfile&&(a=r.groupProfile.type),Ct(a))return we.l("".concat(i," not available in ").concat(a,". convID:").concat(n)),In({messageList:[],nextReqMessageID:"",isCompleted:!0});(dt(e)||15<e)&&(e=15),o||this._isMeInCommunity(n)||this.clearMemMsg(n);var s=this._computeRemainingCount({conversationID:n,nextReqMessageID:o});r=this._completedMap.has(n);return we.l("".concat(i," convID:").concat(n," isEverCleared:").concat(this._isEverCleared(n)," nextReqMessageID:").concat(o)+" remainingCount:".concat(s," count:").concat(e," isCompleted:").concat(r)),this._needGetHistory({conversationID:n,remainingCount:s,count:e})?this.getHistoryMessages({conversationID:n,nextReqMessageID:o,count:20}).then((function(e){var o=e.nextReqID,r=e.storedMessageList,a=e.assembledMessageList,c=(e=e.isPullingCompleted,t._completedMap.has(n)),u=r,l=(0<s&&(u=t._msgListHandler.getLocalMsgList(n).slice(0,r.length+s)),{nextReqMessageID:void 0,messageList:void 0,isCompleted:void 0});t._isEverCleared(n)?(l.nextReqMessageID=o,l.messageList=a,l.isCompleted=e):(l.nextReqMessageID=c?"":o,l.messageList=u,l.isCompleted=c),r=l.messageList.filter((function(e){return e.isRevoked}))||[],a=l.messageList.map((function(e){return e.sequence}));return we.l("".concat(i," ret.nextReqMessageID:").concat(l.nextReqMessageID," ret.isCompleted:").concat(l.isCompleted," sequenceList:"),a),Xe(r)&&0!==r.length?t.updateRevokerInfo(r).then((function(e){return e.forEach((function(e){var t=e.revokerInfo;l.messageList=l.messageList.map((function(n){return n.ID===e.ID&&t&&(n.revokeReason=t.reason||"",n.revokerInfo={userID:t.revoker||n.revoker,nick:t.nick,avatar:t.avatar}),n}))})),Mn(l)})):Mn(l)})):(this.modifyMessageList(n),a=this._getMsgListFromMem({conversationID:n,nextReqMessageID:o,count:e}),In(a))}},{key:"_isEverCleared",value:function(e){return this._everClearedMap.has(e)}},{key:"_getMsgListFromMem",value:function(e){var t=e.conversationID,n=e.nextReqMessageID,o=(e=e.count,"".concat(this._n,"._getMsgListFromMem")),i=this._msgListHandler.getLocalMsgList(t),r=i.length,a=St(t),s=0,c={isCompleted:!1,nextReqMessageID:"",messageList:[]};n?(s=a?i.findIndex((function(e){return e.ID===n})):i.findIndex((function(e){return e.sequence+""===n})))>e?(c.messageList=i.slice(s-e,s),c.nextReqMessageID=a?i[s-e].ID:i[s-e].sequence+""):(c.messageList=i.slice(0,s),c.isCompleted=!0):e<r?(c.messageList=i.slice(s=r-e,r),c.nextReqMessageID=a?i[s].ID:i[s].sequence+""):(c.messageList=i.slice(0,r),c.isCompleted=!0),e=c.messageList.map((function(e){return e.sequence}));return we.l("".concat(o," convID:").concat(t)+" ret.nextReqMessageID:".concat(c.nextReqMessageID," ret.isCompleted:").concat(c.isCompleted," sequenceList:").concat(e)),c}},{key:"getMessageListHopping",value:function(e){var t,n,o=e.conversationID,i=e.sequence,r=e.time,a=e.count;e=e.direction,e=void 0===e?0:e;return(dt(a)||15<a)&&(a=15),o.startsWith(k.CONV_C2C)?(t=this.get(6),n=o.replace(k.CONV_C2C,""),t.getRoamingMessagesHopping({peerAccount:n,time:r,count:a,direction:e})):o.startsWith(k.CONV_GROUP)?(t=this.get(7),n=o.replace(k.CONV_GROUP,""),t.getRoamingMessagesHopping({groupID:n,sequence:i,count:a,direction:e})):void 0}},{key:"_computeRemainingCount",value:function(e){var t=e.conversationID,n=e.nextReqMessageID,o=(e=this._msgListHandler.getLocalMsgList(t),e.length);return we.l("".concat(this._n,"._computeRemainingCount convID:").concat(t," nextReqMessageID:").concat(n," length:").concat(o)),n?(o=0,St(t)?o=e.findIndex((function(e){return e.ID===n})):Et(t)&&(o=-1!==n.indexOf("-")?e.findIndex((function(e){return e.ID===n})):e.findIndex((function(e){return e.sequence+""===n}))),-1===o?0:o):o}},{key:"_needGetHistory",value:function(e){var t=e.conversationID,n=e.remainingCount,o=(e=e.count,this.getLocalConversation(t)),i="";return o&&o.groupProfile&&(i=o.groupProfile.type),!kt(t)&&!Ct(i)&&(!!this._isEverCleared(t)||(o=n<=e&&!this._completedMap.has(t),we.l("".concat(this._n,"._needGetHistory convID:").concat(t," ret:").concat(o)),o))}},{key:"_isTopicConv",value:function(e){return e=e.replace(k.CONV_GROUP,""),Tt(e)}},{key:"getHistoryMessages",value:function(e){var t=e.conversationID,n=e.count;e=e.nextReqMessageID;if(t===k.CONV_SYSTEM)return In();var o=15;20<n&&(o=20),n=null;if(St(t))return i=this._roamingMsgKeyAndTimeMap.has(t),(n=this.get(6)).getRoamingMessage({conversationID:t,peerAccount:t.replace(k.CONV_C2C,""),count:o,lastMessageTime:i?this._roamingMsgKeyAndTimeMap.get(t).lastMessageTime:0,messageKey:i?this._roamingMsgKeyAndTimeMap.get(t).messageKey:""});if(Et(t)){if(!(n=this.get(7)))return Cn({code:Un.NO_MODULE});var i=t.replace(k.CONV_GROUP,""),r=null,a=(this._convMap.has(t)&&!Tt(i)&&(r=this._convMap.get(t).lastMessage),0);return e?a=Number(e):r&&(a=r.lastSequence),n.getRoamingMessage({conversationID:t,groupID:i,count:o,sequence:a})}return In()}},{key:"patchConvLastMessage",value:function(e){var t,n,o=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=this.getLocalConversation(e);i&&(t=(n=i.lastMessage).messageForShow,n=n.payload,!(je(t)||je(n)||o)||0!==(t=this._msgListHandler.getLocalMsgList(e)).length&&(n=t[t.length-1],we.l("".concat(this._n,".patchConvLastMessage bForceUpdate:").concat(o," convID:").concat(e," payload:"),n.payload),i.updateLastMessage(n)))}},{key:"onRoamingMessage",value:function(){var e,n,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=1<arguments.length?arguments[1]:void 0,r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],a=3<arguments.length?arguments[3]:void 0,s=i.startsWith(k.CONV_C2C)?k.CONV_C2C:k.CONV_GROUP,c=null,u=[],l=(i=[],0),d=o.length,f=s===k.CONV_GROUP,p=this.getFileDownloadProxy(),h=this.getDowloadFileAuthKey(),g=Xe(a),_=this.get(17).getFileDNList(),v=function(){f?--l:++l},m=function(){return f?d<=l:l<d};for(l=f?o.length-1:0,d=f?0:o.length;m();v())1!==o[l].isPlaceMessage&&((c=new So(o[l])).to=o[l].to,s!==k.CONV_GROUP||dt(o[l].topicID)||(c.to=o[l].topicID),c.isSystemMessage=!!o[l].isSystemMessage,c.conversationType=s,e=4===o[l].event?{type:k.MSG_GRP_TIP,content:t(t({},o[l].elements),{},{groupProfile:o[l].groupProfile})}:o[l].elements,f||c.setNickAndAvatar({nick:o[l].nick,avatar:o[l].avatar}),je(e)?((n=new eo("emptyMessageBody")).setMessage("from:".concat(c.from," to:").concat(c.to," sequence:").concat(c.sequence," event:").concat(o[l].event)),n.setLevel("warning").end()):(c.setElement(e,p,h,_),c.reInitialize(this.getMyUserID()),u.push(c),g&&a.push(c)));return v=m=null,r?(this._msgListHandler.unshift(u,i),u=null,i):(i=null,u)}},{key:"findMessage",value:function(e){return this._msgListHandler.findMessage(e)}},{key:"_isMeInCommunity",value:function(e){var t=!0;return this._isTopicConv(e)&&(e=Ft(e.replace(k.CONV_GROUP,"")),this.get(7).hasLocalGroup(e)||(t=!1,we.l("".concat(this._n,"._isMeInCommunity groupID:").concat(e," ret:").concat(t)))),t}},{key:"deleteTopicRoamingInfo",value:function(e){var t=this;bt({groupID:e})&&this._msgListHandler.getTopicConvIDList(e).forEach((function(e){t.clearMemMsg(e)}))}},{key:"deleteGroupRoamingInfo",value:function(e){e="".concat(k.CONV_GROUP).concat(e),0<this._msgListHandler.getLocalMsgList(e).length&&this.clearMemMsg(e)}},{key:"setMessageRead",value:function(e){var t=e.conversationID,n=this.getLocalConversation(t);e="".concat(this._n,".setMessageRead");if(we.l("".concat(e," convID:").concat(t," unreadCount:").concat(n?n.unreadCount:0)),!n)return In();if(n.type!==k.CONV_GROUP&&n.type!==k.CONV_TOPIC||je(n.groupAtInfoList)||this.deleteGroupAtTips(t),0===n.unreadCount)return In();var o=this._msgListHandler.getLocalLastMsg(t),i=n.lastMessage.lastTime,r=this._msgListHandler.getLocalMaxTime(t),a=(r=(i<r&&(we.l("".concat(e," update lastMessageTime from ").concat(i," to ").concat(r)),i=r),this._msgListHandler.getLocalMaxSeq(t)),n.lastMessage.lastSequence),s=(a<r&&(we.l("".concat(e," update lastMessageSeq from ").concat(a," to ").concat(r)),a=r),n.type===k.CONV_TOPIC&&dt(o)&&(e=this.get(10),o=Ft(r=t.replace(k.CONV_GROUP,"")),(e=e.getLocalTopic(o,r))&&(a=e.nextMessageSeq-1)),null);switch(n.type){case k.CONV_C2C:return(s=this.get(6))?s.setMessageRead({conversationID:t,lastMessageTime:i}):Cn({code:Un.NO_MODULE});case k.CONV_GROUP:case k.CONV_TOPIC:return(s=this.get(7))?s.setMessageRead({conversationID:t,lastMessageSeq:a}):Cn({code:Un.NO_MODULE});case k.CONV_SYSTEM:return n.unreadCount=0,this.emitConvUpdate(!0,!1),In();default:return In()}}},{key:"setAllMessageRead",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n="setAllMessageRead",o="".concat(this._n,".").concat(n),i=(t.scope||(t.scope=k.READ_ALL_MSG),we.l("".concat(o," options:"),t),this._createSetAllMessageReadPack(t));if(0===i.readAllC2CMessage&&0===i.groupMessageReadInfoList.length)return In();var r=new eo(n);return this.req({P:Fn.SET_ALL_MSG_READ,data:i}).then((function(n){return n=n.data,n=e._handleAllMsgRead(n),r.setMessage("scope:".concat(t.scope," failureGroups:").concat(JSON.stringify(n))).end(),In()})).catch((function(e){return r.setError(e).end(),we.w("".concat(o," failed. error:"),e),Cn({code:e&&e.code?e.code:Un.MSG_UNREAD_ALL_FAIL,message:e&&e.message?e.message:void 0})}))}},{key:"setConvCustomData",value:function(e){return this._convGroupHandler.setConvCustomData(e)}},{key:"markConv",value:function(e){return this._convGroupHandler.markConv(e)}},{key:"getConvGroupList",value:function(){return this._convGroupHandler.getLocalConvGroupList()}},{key:"createConvGroup",value:function(e){return this._convGroupHandler.createConvGroup(e)}},{key:"deleteConvGroup",value:function(e){return this._convGroupHandler.deleteConvGroup(e)}},{key:"renameConvGroup",value:function(e){return this._convGroupHandler.renameConvGroup(e)}},{key:"addConvsToGroup",value:function(e){return this._convGroupHandler.addConvsToGroup(e)}},{key:"deleteConvsFromGroup",value:function(e){return this._convGroupHandler.deleteConvsFromGroup(e)}},{key:"onConvMarkUpdated",value:function(e){this._convGroupHandler.onConvMarkUpdated(e)}},{key:"onConvGroupCreated",value:function(e){this._convGroupHandler.onConvGroupCreated(e)}},{key:"onConvGroupDeleted",value:function(e){this._convGroupHandler.onConvGroupDeleted(e)}},{key:"onConvGroupNameUpdated",value:function(e){this._convGroupHandler.onConvGroupNameUpdated(e)}},{key:"onConvInGroupUpdated",value:function(e){this._convGroupHandler.onConvInGroupUpdated(e)}},{key:"onConvAddedToOrDeletedFromGroup",value:function(e){this._convGroupHandler.onConvAddedToOrDeletedFromGroup(e)}},{key:"_getConvLastMessageSeq",value:function(e){var t=this._msgListHandler.getLocalLastMsg(e.conversationID);e=e.lastMessage.lastSequence;return t&&e<t.sequence?t.sequence:e}},{key:"_getConvLastMessageTime",value:function(e){var t=this._msgListHandler.getLocalLastMsg(e.conversationID);e=e.lastMessage.lastTime;return t&&e<t.time?t.time:e}},{key:"_createSetAllMessageReadPack",value:function(e){var t,n={readAllC2CMessage:0,groupMessageReadInfoList:[]},o=e.scope,i=S(this._convMap);try{for(i.s();!(t=i.n()).done;){var r,a=m(t.value,2)[1];if(0<a.unreadCount)if(a.type===k.CONV_C2C&&0===n.readAllC2CMessage){if(o===k.READ_ALL_MSG)n.readAllC2CMessage=1;else if(o===k.READ_ALL_C2C_MSG){n.readAllC2CMessage=1;break}}else a.type!==k.CONV_GROUP||o!==k.READ_ALL_GROUP_MSG&&o!==k.READ_ALL_MSG||(r=this._getConvLastMessageSeq(a),n.groupMessageReadInfoList.push({groupID:a.groupProfile.groupID,messageSequence:r}))}}catch(e){i.e(e)}finally{i.f()}return n}},{key:"onPushedAllMessageRead",value:function(e){this._handleAllMsgRead(e)}},{key:"_handleAllMsgRead",value:function(e){var t=e.groupMessageReadInfoList;e=e.readAllC2CMessage,t=this._parseGroupReadInfo(t);return 1<=this._updateAllConvUnreadCount({readAllC2CMessage:e})&&this.emitConvUpdate(!0,!1),t}},{key:"_parseGroupReadInfo",value:function(e){var t=[];if(e&&e.length)for(var n=0,o=e.length;n<o;n++){var i=e[n],r=i.groupID,a=i.sequence,s=i.retCode;i=i.lastMessageSeq;dt(s)?this._remoteGroupReadSeqMap.set(r,i):(this._remoteGroupReadSeqMap.set(r,a),0!==s&&t.push("".concat(r,"-").concat(a,"-").concat(s)))}return t}},{key:"_updateAllConvUnreadCount",value:function(e){var t,n=e.readAllC2CMessage,o=0,i=S(this._convMap);try{for(i.s();!(t=i.n()).done;){var r,a,s,c,u=m(t.value,2),l=u[0],d=u[1];1<=d.unreadCount&&(1===n&&d.type===k.CONV_C2C?(r=this._getConvLastMessageTime(d),this.updateIsReadAfterReadReport({conversationID:l,lastMessageTime:r})):d.type===k.CONV_GROUP&&(a=l.replace(k.CONV_GROUP,""),this._remoteGroupReadSeqMap.has(a)&&(s=this._remoteGroupReadSeqMap.get(a),c=this._getConvLastMessageSeq(d),this.updateIsReadAfterReadReport({conversationID:l,remoteReadSequence:s}),s<=c&&this._remoteGroupReadSeqMap.delete(a))),this.updateUnreadCount(l,!1)&&(o+=1))}}catch(t){i.e(t)}finally{i.f()}return o}},{key:"isRemoteRead",value:function(e){var t,n=e.conversationID,o=(e=e.sequence,n.replace(k.CONV_GROUP,"")),i=!1;return this._remoteGroupReadSeqMap.has(o)&&(e<=(t=this._remoteGroupReadSeqMap.get(o))&&(i=!0,we.l("".concat(this._n,".isRemoteRead convID:").concat(n," msgSeq:").concat(e," remoteReadSeq:").concat(t))),t+10<=e&&this._remoteGroupReadSeqMap.delete(o)),i}},{key:"updateIsReadAfterReadReport",value:function(e){var t=e.conversationID,n=e.lastMessageSeq,o=e.lastMessageTime,i=this._msgListHandler.getLocalMsgList(t);if(0!==i.length)for(var r,a=i.length-1;0<=a;a--)if(r=i[a],!(o&&r.time>o||n&&r.sequence>n)){if("in"===r.flow&&r.isRead)break;r.setIsRead(!0)}}},{key:"updateUnreadCount",value:function(e){var t,n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],o=!1,i=this.getLocalConversation(e),r=this._msgListHandler.getLocalMsgList(e);if(i)return(t=i.unreadCount)!==(r=r.filter((function(e){return!e.isRead&&!e._onlineOnlyFlag&&!e.isDeleted})).length)&&(i.unreadCount=r,o=!0,we.l("".concat(this._n,".updateUnreadCount from ").concat(t," to ").concat(r,", convID:").concat(e)),!0===n&&this.emitConvUpdate(!0,!1)),o&&i.type===k.CONV_TOPIC&&(t=i.unreadCount,r=this.get(10),n=e.replace(k.CONV_GROUP,""),r.onUnreadCountUpdatedFromConv(n,t)),o}},{key:"clearGroupAtInfoList",value:function(e){var t,n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],o=this.getLocalConversation(e);o&&0<o.groupAtInfoList.length&&(o.clearGroupAtInfoList(),we.l("".concat(this._n,".clearGroupAtInfoList convID:").concat(e)),o.type===k.CONV_TOPIC&&(o=o.groupAtInfoList,t=this.get(10),e=e.replace(k.CONV_GROUP,""),t.onAtInfoUpdated({topicID:e,groupAtInfoList:o})),!0===n&&this.emitConvUpdate(!0,!1))}},{key:"updateReadReceiptInfo",value:function(e){var t,n,o,i=this,r=e.userID,a=void 0===r?void 0:r,s=(r=e.groupID,void 0===r?void 0:r),c=(r=e.readReceiptList,e=e.timestamp,void 0===e?0:e);je(r)||(t=[],dt(a)?dt(s)||(n="".concat(k.CONV_GROUP).concat(s),r.forEach((function(e){var o=e.tinyID,r=e.clientTime,a=e.random,c=e.readCount;e=e.unreadCount,o="".concat(o,"-").concat(r,"-").concat(a),r=i._msgListHandler.getLocalMsg(n,o)||i._msgListHandler.getHoppingMsg(n,o),a={groupID:s,messageID:o,readCount:0,unreadCount:0};r&&(Ye(c)&&(r.readReceiptInfo.readCount=c,a.readCount=c),Ye(e)&&(r.readReceiptInfo.unreadCount=e,a.unreadCount=e),t.push(a))}))):(o="".concat(k.CONV_C2C).concat(a),r.forEach((function(e){var n=e.tinyID,r=e.clientTime;e=e.random,n="".concat(n,"-").concat(r,"-").concat(e),r=i._msgListHandler.getLocalMsg(o,n)||i._msgListHandler.getHoppingMsg(o,n);r&&!r.readReceiptInfo.isPeerRead&&(r.readReceiptInfo.isPeerRead=!0,r.readReceiptInfo.timestamp=c,t.push({userID:a,messageID:n,isPeerRead:!0,timestamp:c}))}))),0<t.length&&this.emitOEvt(E.MESSAGE_READ_RECEIPT_RECEIVED,t))}},{key:"updateIsRead",value:function(e){var t=this.getLocalConversation(e),n=this.getLocalMessageList(e);if(t&&0!==n.length&&!kt(t.type)){for(var o=[],i=0,r=n.length;i<r;i++)"in"!==n[i].flow?"out"!==n[i].flow||n[i].isRead||n[i].setIsRead(!0):o.push(n[i]);var a;a=t.type===k.CONV_C2C?(e=o.slice(-t.unreadCount).filter((function(e){return e.isRevoked})).length,o.length-t.unreadCount-e):o.length-t.unreadCount;for(var s=0;s<a&&!o[s].isRead;s++)o[s].setIsRead(!0)}}},{key:"deleteGroupAtTips",value:function(e){var t=this,n="".concat(this._n,".deleteGroupAtTips"),o=(we.l("".concat(n)),this._convMap.get(e));if(!o)return Promise.resolve();var i=o.groupAtInfoList;if(0===i.length)return Promise.resolve();o=void 0;var r=(e.startsWith(k.CONV_GROUP)&&(o=e.replace(k.CONV_GROUP,"")),y(i));if((bt({groupID:o})||Tt(o))&&0===(r=i.filter((function(e){return!e.atTypeArray.includes(k.CONV_AT_ALL)}))).length)return this.clearGroupAtInfoList(e,!1),Promise.resolve();var a=this.getMyUserID();return this.req({P:Fn.DEL_GROUP_AT_TIPS,data:{messageListToDelete:r.map((function(e){return{from:e.from,to:a,messageSeq:e.__sequence,messageRandom:e.__random,groupID:dt(e.topicID)?e.groupID:e.topicID}}))}}).then((function(){return we.l("".concat(n," ok. count:").concat(i.length)),t.clearGroupAtInfoList(e,!1),Promise.resolve()})).catch((function(e){return we.e("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"appendToMessageList",value:function(e){return this._msgListHandler.pushIn(e)}},{key:"setMessageRandom",value:function(e){this._sll.set(e.random)}},{key:"deleteMessageRandom",value:function(e){this._sll.delete(e.random)}},{key:"pushIntoMessageList",value:function(e,t,n){return!(!this._msgListHandler.pushIn(t,n)||this._sll.has(t.random)&&!n||(e.push(t),0))}},{key:"revoke",value:function(e,t,n){return this._msgListHandler.revoke(e,t,n)}},{key:"getPeerReadTime",value:function(e){return this._peerReadTimeMap.get(e)}},{key:"recordPeerReadTime",value:function(e,t){(!this._peerReadTimeMap.has(e)||this._peerReadTimeMap.get(e)<t)&&this._peerReadTimeMap.set(e,t)}},{key:"updateMsgIsPeerReadProp",value:function(e,t){var n;e.startsWith(k.CONV_C2C)&&0<t&&(0<(n=this._msgListHandler.updateMsgIsPeerReadProp(e,t)).length&&this.emitOEvt(E.MESSAGE_READ_BY_PEER,n),this._convMap.has(e)&&(je(n=this._convMap.get(e).lastMessage)||n.fromAccount===this.getMyUserID()&&n.lastTime<=t&&!n.isPeerRead&&(n.isPeerRead=!0,this.emitConvUpdate(!0,!1))))}},{key:"updateMsgIsModifiedProp",value:function(e){this._msgListHandler.updateMsgIsModifiedProp(e)}},{key:"setCompleted",value:function(e){we.l("".concat(this._n,".setCompleted convID:").concat(e)),this._completedMap.set(e,!0)}},{key:"updateRoamingMsgKeyAndTime",value:function(e,t,n){this._roamingMsgKeyAndTimeMap.set(e,{messageKey:t,lastMessageTime:n})}},{key:"getConvList",value:function(e){var t,n=this,o="".concat(this._n,".").concat("getConvList"),i="pagingStatus:".concat(this._pagingStatus,", local conversation count:").concat(this._convMap.size,", options:").concat(JSON.stringify(e));return we.l("".concat(o,". ").concat(i)),this._pagingStatus===Ln?((t=new eo("getConvList")).setMessage(i),this.syncConvList().then((function(){t.end();var o=n._getConvList(e);return Mn({conversationList:o,isSyncCompleted:n._isSyncCompleted()})})).catch((function(e){return t.setError(e).end(),we.e("".concat(o," failed. error:"),e),Cn(e)}))):(i=this._getConvList(e),we.l("".concat(o,". returned conversation count:").concat(i.length)),In({conversationList:i,isSyncCompleted:this._isSyncCompleted()}))}},{key:"_getConvList",value:function(e){var t,n,o,i,r,a=this;return dt(e)?this.getLocalConvList():Xe(e)?0===e.length?[]:this.getLocalConvList().filter((function(t){return e.includes(t.conversationID)})):$e(e)?(t=e.type,n=e.markType,o=e.groupName,i=e.hasUnreadCount,r=e.hasGroupAtInfo,this.getLocalConvList().filter((function(e){return a._filterType(e,t)&&a._filterMarkType(e,n)&&a._filterGroupName(e,o)&&a._filterUnreadCount(e,i)&&a._filterGroupAtInfo(e,r)}))):[]}},{key:"_filterType",value:function(e,t){return t!==k.CONV_C2C&&t!==k.CONV_GROUP||e.type===t}},{key:"_filterGroupName",value:function(e,t){return!lt(t)||(""===t?0===e.conversationGroupList.length:e.conversationGroupList.includes(t))}},{key:"_filterMarkType",value:function(e,t){return!Ye(t)||(0===t?0===e.markList.length:e.markList.includes(t))}},{key:"_filterUnreadCount",value:function(e,t){var n=!0;return!0===t?n=1<=e.unreadCount:!1===t&&(n=0===e.unreadCount),n}},{key:"_filterGroupAtInfo",value:function(e,t){var n=!0;return!0===t?n=1<=e.groupAtInfoList.length:!1===t&&(n=0===e.groupAtInfoList.length),n}},{key:"_handleC2CPeerReadTime",value:function(){var e,t=S(this._convMap);try{for(t.s();!(e=t.n()).done;){var n=m(e.value,2),o=n[0],i=n[1];i.type===k.CONV_C2C&&this.recordPeerReadTime(o,i.peerReadTime)}}catch(e){t.e(e)}finally{t.f()}}},{key:"_isPagingGetGroupListCompleted",value:function(){var e=this.get(7);return!e||e.isPagingGetCompleted()}},{key:"_getLocalGroupCount",value:function(){var e=this.get(7);return e?e.getLocalGroupList().length:0}},{key:"_hasLocalGroup",value:function(e){var t=this.get(7);return!!t&&t.hasLocalGroup(e.replace(k.CONV_GROUP,""))}},{key:"getConversationProfile",value:function(e){var t,n=this,o=!1;if(this._convMap.has(e)?t=this._convMap.get(e):(t=new ai({conversationID:e,type:St(e)?k.CONV_C2C:k.CONV_GROUP},this.isIntl(),this.isUsingChatCore()),o=!0),t._isInfoCompleted||t.type===k.CONV_SYSTEM)return In({conversation:t});if(Et(e)){if(!this.get(7))return Cn({code:Un.NO_MODULE});if(!this._hasLocalGroup(e))return In({conversation:t})}var i="".concat(this._n,".").concat("getConversationProfile"),r=new eo("getConversationProfile");return we.l("".concat(i,". convID:").concat(e," remark:").concat(t.remark," lastMessage:"),t.lastMessage),this._getUserOrGroupProfile(t).then((function(a){r.setMessage("convID:".concat(e," unreadCount:").concat(a.data.conversation.unreadCount)).end();var s,c=n.get(8);if(c&&t.type===k.CONV_C2C&&(s=e.replace(k.CONV_C2C,""),c.isMyFriend(s)&&(c=c.getFriendRemark(s),t.remark!==c&&(t.remark=c,we.l("".concat(i,". convID:").concat(e," patch remark:").concat(t.remark))))),we.l("".concat(i," ok. isNewConv:").concat(o," convID:").concat(e)),o){if(t.type===k.CONV_C2C)return n._onNewC2CConv([e.replace(k.CONV_C2C,"")]).then((function(){return In({conversation:t})}));if(t.type===k.CONV_GROUP)return n._onNewGroupConv([e.replace(k.CONV_GROUP,"")]).then((function(){return In({conversation:t})}))}return a})).catch((function(t){return r.setError(t).setMessage("convID:".concat(e)).end(),we.e("".concat(i," failed. error:"),t),Cn(t)}))}},{key:"_getUserOrGroupProfile",value:function(e){var t=this;return e.type===k.CONV_C2C?this.get(4).getUserProfile({userIDList:[e.toAccount]}).then((function(n){return n=n.data,0===n.length?Cn({code:Un.USER_OR_GRP_NOT_FOUND}):(e.userProfile=n[0],e._isInfoCompleted=!0,t._insertConvAfterTopmost(e),In({conversation:e}))})):this.get(7).getGroupProfile({groupID:e.toAccount}).then((function(n){return e.groupProfile=n.data.group,e._isInfoCompleted=!0,t._insertConvAfterTopmost(e),In({conversation:e})}))}},{key:"_insertConvAfterTopmost",value:function(e){var t,n;e instanceof ai&&!this._convMap.has(e.conversationID)&&(n=(t=y(this._convMap)).findIndex((function(e){return!1===e[1].isPinned})),t.splice(n,0,[e.conversationID,e]),this._convMap=new Map(t),this._setStorageConvList(),this.emitConvUpdate(!0,!1))}},{key:"_onProfileUpdated",value:function(e){var t=this;e.data.forEach((function(e){var n=e.userID;n===t.getMyUserID()?t._onMyProfileModified({latestNick:e.nick,latestAvatar:e.avatar}):(n=t._convMap.get("".concat(k.CONV_C2C).concat(n)))&&(n.userProfile=e)}))}},{key:"_onCloudConfig",value:function(e){"0"===this.getCloudConfig("pull_on_invite")&&(this._bPullOnInvite=!1),we.l("".concat(this._n,"._onCloudConfig bPullOnInvite:").concat(this._bPullOnInvite))}},{key:"disableMsgPullOnInvite",value:function(){this._bPullOnInvite=!1}},{key:"_isSyncCompleted",value:function(){return this._pagingStatus===An}},{key:"_errorLog",value:function(e,t,n,o){var i=new Error("Params validate failed."),r="".concat(this.getErrMsg("API_REFER")).concat(e);throw we.w("[".concat(e,"] | ").concat(t," | ").concat(this.getErrMsg(n,o),", ").concat(r)),we.e("[".concat(e,"] Invalid ").concat(t,": type check failed for ").concat(t,".")),i}},{key:"_isValidConvID",value:function(e){return St(e)||Et(e)||kt(e)}},{key:"deleteConversation",value:function(e){var t=this,n="deleteConversation";return lt(e)||ze(e)||this._errorLog(n,"options","StringOrObjectRequiredLog"),lt(e)?(this._isValidConvID(e)||this._errorLog(n,"options","InvalidConversationID",e),we.l("".concat(this._n,".").concat(n," convID:").concat(e)),this.deleteConvList({conversationIDList:[e],flag:1})):(Xe(e.conversationIDList)||this._errorLog(n,"conversationIDList","ArrayRequiredLog"),0===e.conversationIDList.length&&this._errorLog(n,"conversationIDList","NonEmptyArrayLog"),e.conversationIDList.forEach((function(e){t._isValidConvID(e)||t._errorLog(n,"conversationIDList","InvalidConversationID",e)})),"clearHistoryMessage"in e&&"boolean"!=typeof e.clearHistoryMessage&&this._errorLog(n,"clearHistoryMessage","BooleanRequiredLog"),100<e.conversationIDList.length&&(e.conversationIDList=e.conversationIDList.slice(0,100)),this.deleteConvList(e))}},{key:"deleteConvList",value:function(e){var t=e.conversationIDList,n=(t=void 0===t?[]:t,e.clearHistoryMessage),o=(n=void 0===n||n,e=e.flag,void 0===e?0:e),i="".concat(this._n,".").concat("deleteConvList"),r=(e="convIDList:".concat(t," clearHistoryMessage:").concat(n),we.l("".concat(i," ").concat(e)),new eo("deleteConvList"));return r.setMessage(e),Promise.all([this.rmLocalOnlyConvList(t),this.rmLocalAndRemoteConvList(t,n)]).then((function(e){return r.end(),e=[].concat(y(e[0]),y(e[1])),0===e.length?Cn(new Gn({code:Un.CONV_NOT_FOUND})):(we.l("".concat(i," ok")),In(1===o?{conversationID:e[0]}:{conversationIDList:e}))})).catch((function(e){return r.setError(e).end(),we.e("".concat(i," failed. error:"),e),Cn(e)}))}},{key:"rmLocalOnlyConvList",value:function(e){var t=this;return e.filter((function(e){if(!t._convMap.has(e))return!1;var n=t.getLocalConversation(e).type;return n!==k.CONV_GROUP||t._hasLocalGroup(e)?n===k.CONV_SYSTEM&&(t.get(7).deleteGroupSystemNotice({messageList:t._msgListHandler.getLocalMsgList(e)}),t.deleteLocalConv(e),!0):(t.deleteLocalConv(e),!0)}))}},{key:"rmLocalAndRemoteConvList",value:function(e,t){var n=this,o={fromAccount:this.getMyUserID(),conversationList:[],clearHistoryMessage:t?1:0};return e.forEach((function(e){var t;n._convMap.has(e)&&((t=n.getLocalConversation(e).type)===k.CONV_C2C?o.conversationList.push({toAccount:e.replace(t,""),type:1}):t===k.CONV_GROUP&&n._hasLocalGroup(e)&&o.conversationList.push({toGroupID:e.replace(t,""),type:2}))})),0===o.conversationList.length?[]:this.req({P:Fn.DEL_CONV,data:o}).then((function(e){var t=[];return 0<e.data.resultList.length&&e.data.resultList.map((function(e){0===e.code&&(e=1===e.type?"".concat(k.CONV_C2C).concat(e.to):"".concat(k.CONV_GROUP).concat(e.groupID),t.push(e))})),n.deleteLocalConvList(t),t}))}},{key:"setConvDraft",value:function(e){var t=e.conversationID,n=(e=e.draftText,"".concat(this._n,".").concat("setConvDraft"));return we.l("".concat(n," convID:").concat(t," draftText:").concat(e)),this._convMap.has(t)?(n=this._convMap.get(t),n.setDraftText(e),this.emitConvUpdate(),In({code:0,conversation:n})):Cn({code:Un.CONV_NOT_FOUND})}},{key:"clearHistoryMessage",value:function(e){var t=this,n={fromAccount:this.getMyUserID(),toAccount:void 0,type:void 0,toGroupID:void 0};if(!this._convMap.has(e))return Cn({code:Un.CONV_NOT_FOUND});var o=this._convMap.get(e).type;if(o===k.CONV_C2C)n.type=1,n.toAccount=e.replace(k.CONV_C2C,"");else{if(o!==k.CONV_GROUP)return o===k.CONV_SYSTEM?(this.get(7).deleteGroupSystemNotice({messageList:this._msgListHandler.getLocalMsgList(e)}),In({conversationID:e})):Cn({code:Un.CONV_UN_RECORDED_TYPE});n.type=2,n.toGroupID=e.replace(k.CONV_GROUP,"")}var i="".concat(this._n,".").concat("clearHistoryMessage"),r=new eo("clearHistoryMessage");return r.setMessage("convID:".concat(e)),we.l("".concat(i,". convID:").concat(e)),this.setMessageRead({conversationID:e}).then((function(){return t.req({P:Fn.CLEAR_HISTORY_MSG,data:n})})).then((function(){r.end(),we.l("".concat(i," ok")),t.clearMemMsg(e);var n=t.getLocalConversation(e);return n&&(n.updateLastMessage(),t._sortConvListAndEmitEvent()),In({conversationID:e})})).catch((function(e){return r.setError(e).end(),we.e("".concat(i," failed. error:"),e),Cn(e)}))}},{key:"pinConversation",value:function(e){var t=this,n=e.conversationID,o=e.isPinned,i=this.getLocalConversation(n);if(i&&i.isPinned===o)return In({conversationID:n});if(kt(n))return i&&(i.isPinned=o),this._sortConvListAndEmitEvent(),In({conversationID:n});if(e=null,St(n)?e={type:1,toAccount:n.replace(k.CONV_C2C,"")}:Et(n)&&(e={type:2,groupID:n.replace(k.CONV_GROUP,"")}),null===e)return Cn({code:Un.INVALID_CONV_ID});var r="".concat(this._n,".").concat("pinConversation"),a="convID:".concat(n," isPinned:").concat(o),s=new eo("pinConversation");return s.setMessage(a),we.l("".concat(r,". ").concat(a)),this.req({P:Fn.PIN_CONV,data:{fromAccount:this.getMyUserID(),operationType:!0===o?1:2,itemList:[e]}}).then((function(){return s.end(),we.l("".concat(r," ok")),i?i.isPinned!==o&&(i.isPinned=o):t._convMap.set(n,new ai({conversationID:n,type:St(n)?k.CONV_C2C:k.CONV_GROUP,isPinned:o},t.isIntl(),t.isUsingChatCore())),t._sortConvListAndEmitEvent(),Mn({conversationID:n})})).catch((function(e){return s.setError(e).end(),we.e("".concat(r," failed. error:"),e),Cn(e)}))}},{key:"setMessageRemindType",value:function(e){return this._msgRemindHandler.set(e)}},{key:"patchMsgRemindType",value:function(e){var t=e.ID,n=e.isC2CConversation,o=e.messageRemindType,i=!1;n=this.getLocalConversation("".concat(n?k.CONV_C2C:k.CONV_GROUP).concat(t));return n&&n.messageRemindType!==o&&(n.messageRemindType=o,i=!0),we.l("".concat(this._n,".patchMsgRemindType options:"),e,"ret:".concat(i)),i}},{key:"onC2CMsgRemindTypeFetched",value:function(e){var t,n=this;Xe(e)&&0<e.length&&(t=0,e.forEach((function(e){var o=e.userID;e=e.muteFlag,e=n._transMsgRemindType(e);!0===n.patchMsgRemindType({ID:o,isC2CConversation:!0,messageRemindType:e})&&(t+=1)})),we.l("".concat(this._n,".onC2CMsgRemindTypeFetched updateCount:").concat(t)),1<=t&&this.emitConvUpdate(!0,!1))}},{key:"onC2CMsgRemindTypeSynced",value:function(e){var t=this,n="".concat(this._n,".onC2CMsgRemindTypeSynced");e.dataList.forEach((function(e){var o;je(e.muteNotificationsSync)||(o=(e=e.muteNotificationsSync).to,e=e.muteFlag,e=t._transMsgRemindType(e),t.patchMsgRemindType({ID:o,isC2CConversation:!(o=0),messageRemindType:e})&&(o+=1),we.l("".concat(n," updateCount:").concat(o)),1<=o&&t.emitConvUpdate(!0,!1))}))}},{key:"onGroupMsgRemindTypeUpdated",value:function(e){this._msgRemindHandler.onGroupMsgRemindTypeUpdated(e)}},{key:"deleteLocalConv",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=this._convMap.has(e);we.l("".concat(this._n,".deleteLocalConv convID:").concat(e," has:").concat(n)),n&&(this._convMap.delete(e),this.clearMemMsg(e),this._setStorageConvList(),t)&&(n=!this._isTopicConv(e),this.emitConvUpdate(n,!1))}},{key:"pullMsgOnInvite",value:function(e){var t,n,o,i,r,a=this.get(7);a&&(t="".concat(this._n,".pullMsgOnInvite"),we.l("".concat(t," flag:").concat(this._bPullOnInvite)),this._bPullOnInvite&&(r=this.getLocalLastMessage(e),n=this.getLocalSecondLastMessage(e),i=o=1,r&&(o=r.sequence),n&&(i=n.sequence),r=a.getGroupRemoteLastSeq(e.replace(k.CONV_GROUP,"")),we.l("".concat(t," convID:").concat(e," localLastSeq:").concat(o," localSecondLastSeq:").concat(i," remoteLastSeq:").concat(r)),this.clearMemMsg(e),1<o-i?this._recursiveGetMsgList([],e,!1,o,i):1<r-o&&this._recursiveGetMsgList([],e,!0,r,o)))}},{key:"_recursiveGetMsgList",value:function(e,t,n,o,i,r){var a=this;this.getMessageList({conversationID:t,nextReqMessageID:r}).then((function(r){r=r.data.messageList;var s=r.filter((function(e){return n?e.sequence>i&&e.sequence<=o:e.sequence>i&&e.sequence<o}));e.unshift.apply(e,y(s)),0<r.length&&r[0].sequence>i&&e.length<100?a._recursiveGetMsgList(e,t,n,o,i,r[0].ID):a._emitMsgReceived(t,e)}))}},{key:"_emitMsgReceived",value:function(e,t){var n,o,i=this;0<t.length&&(n=this.hasLocalConversation(e),o=t.map((function(e){return e.sequence})),we.l("".concat(this._n,"._emitMsgReceived convID:").concat(e," has:").concat(n," count:").concat(o.length," sequenceList:"),o),this.emitOEvt(E.MESSAGE_RECEIVED,t),n?this.patchConvLastMessage(e,!0):this.getConversationProfile(e).then((function(){i.patchConvLastMessage(e,!0)})))}},{key:"deleteLocalConvList",value:function(e){var t=this,n=!1;e.forEach((function(e){t._convMap.has(e)&&(t.deleteLocalConv(e,!1),n=!0)})),we.l("".concat(this._n,".deleteLocalConvList convID:").concat(e," isConvIDExisted:").concat(n)),n&&this.emitConvUpdate(!0,!1)}},{key:"isMessageSentByCurrentInstance",value:function(e){return!(!this._msgListHandler.hasLocalMsg(e.conversationID,e.ID)&&!this._sll.has(e.random))}},{key:"modifyMessageList",value:function(e){var t,n;e.startsWith(k.CONV_C2C)&&this._convMap.has(e)&&(n=this._convMap.get(e),t=Date.now(),this._msgListHandler.modifyMsgSentByPeer({conversationID:e,latestNick:n.userProfile.nick,latestAvatar:n.userProfile.avatar}),n=this.get(4).getNickAndAvatarByUserID(this.getMyUserID()),this._msgListHandler.modifyMsgSentByMe({conversationID:e,latestNick:n.nick,latestAvatar:n.avatar}),we.l("".concat(this._n,".modifyMessageList convID:").concat(e," cost:").concat(Yt(t))))}},{key:"updateUserProfileSpecifiedKey",value:function(e){we.l("".concat(this._n,".updateUserProfileSpecifiedKey options:"),e);var t=e.conversationID,n=e.nick;e=e.avatar;this._convMap.has(t)&&(t=this._convMap.get(t).userProfile,lt(n)&&t.nick!==n&&(t.nick=n),lt(e)&&t.avatar!==e&&(t.avatar=e),this.emitConvUpdate(!0,!1))}},{key:"_onMyProfileModified",value:function(e){var n=this,o=this.getLocalConvList(),i=Date.now();o.forEach((function(o){n.modifyMessageSentByMe(t({conversationID:o.conversationID},e))})),we.l("".concat(this._n,"._onMyProfileModified. modify all messages sent by me, cost:").concat(Yt(i)))}},{key:"modifyMessageSentByMe",value:function(e){this._msgListHandler.modifyMsgSentByMe(e)}},{key:"getLatestMessageSentByMe",value:function(e){return this._msgListHandler.getLatestMsgSentByMe(e)}},{key:"modifyMessageSentByPeer",value:function(e){this._msgListHandler.modifyMsgSentByPeer(e)}},{key:"getLatestMessageSentByPeer",value:function(e){return this._msgListHandler.getLatestMsgSentByPeer(e)}},{key:"pushIntoNoticeResult",value:function(e,t){return!(!this._msgListHandler.pushIn(t)||this._sll.has(t.random)||(e.push(t),0))}},{key:"getLocalLastMessage",value:function(e){return this._msgListHandler.getLocalLastMsg(e)}},{key:"getLocalSecondLastMessage",value:function(e){return this._msgListHandler.getLocalSecondLastMsg(e)}},{key:"checkAndPatchRemark",value:function(){var e,t,n=this.get(8);0===this._convMap.size||!n||0!==(e=y(this._convMap.values()).filter((function(e){return e.type===k.CONV_C2C}))).length&&(t=0,e.forEach((function(e){var o=e.conversationID.replace(k.CONV_C2C,"");n.isMyFriend(o)&&(o=n.getFriendRemark(o),e.remark!==o&&(e.remark=o,t+=1))})),we.l("".concat(this._n,".checkAndPatchRemark. c2cConvCount:").concat(e.length," patchedCount:").concat(t)))}},{key:"updateTopicConversation",value:function(e){this._updateLocalConvList({conversationOptionsList:e,isFromGetConversations:!0,updateUnreadCount:!0})}},{key:"sendReadReceipt",value:function(e){var t=e[0],n=null;return t.conversationType===k.CONV_C2C?n=this._m.get(6):t.conversationType===k.CONV_GROUP&&(n=this._m.get(7)),n?n.sendReadReceipt(e):Cn({code:Un.NO_MODULE})}},{key:"getReadReceiptList",value:function(e){var t=e[0],n=null;return t.conversationType===k.CONV_C2C?n=this._m.get(6):t.conversationType===k.CONV_GROUP&&(n=this._m.get(7)),n?n.getReadReceiptList(e):Cn({code:Un.NO_MODULE})}},{key:"getLastMessageTime",value:function(e){return e=this.getLocalConversation(e),e?e.lastMessage.lastTime:0}},{key:"getTotalUnreadCount",value:function(){var e=this.getLocalConvList(),t=0;return e.forEach((function(e){e.type!==k.CONV_SYSTEM&&(""!==e.messageRemindType&&e.messageRemindType!==k.MSG_REMIND_ACPT_AND_NOTE||(t+=e.unreadCount))})),t}},{key:"onTotalUnreadCountUpdate",value:function(){var e=this.getTotalUnreadCount();this._convTotalUnreadCount!==e&&(we.l("".concat(this._n,".onTotalUnreadCountUpdate from ").concat(this._convTotalUnreadCount," to ").concat(e)),this._convTotalUnreadCount=e,this.emitOEvt(E.TOTAL_UNREAD_MESSAGE_COUNT_UPDATED))}},{key:"_isConvNeedShow",value:function(e){if(e=this.getLocalConversation(e),dt(e))return!0;var t=e.type===k.CONV_TOPIC,n=e.type===k.CONV_GROUP&&e.groupProfile.type===k.GRP_ROOM;e=e.type===k.CONV_GROUP&&e.groupProfile.type===k.GRP_LIVE;return!(t||n||e)}},{key:"setAllRcvMsgOpt",value:function(e){return this._msgRemindHandler.setAllRcvMsgOpt(e)}},{key:"getAllRcvMsgOpt",value:function(){return this._msgRemindHandler.getAllRcvMsgOpt()}},{key:"onAllRcvMsgOptNotify",value:function(e){this._msgRemindHandler.onAllRcvMsgOptNotify(e)}},{key:"clearUnreadCount",value:function(e){e=this.getLocalConversation(e),e&&0<e.unreadCount&&(e.unreadCount=0,this.emitConvUpdate(!0,!1))}},{key:"storeHoppingMessageList",value:function(e){this._msgListHandler.storeHoppingMsgList(e)}},{key:"clearMemMsg",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];we.l("".concat(this._n,".clearMemMsg convID:").concat(e," isOverLimit:").concat(t)),this._msgListHandler.removeByConvID(e),this._completedMap.delete(e),this._roamingMsgKeyAndTimeMap.delete(e),!0===t&&this._everClearedMap.set(e,1)}},{key:"reset",value:function(){we.l("".concat(this._n,".reset")),this._setStorageConvList(!0),this._pagingStatus=kn,this._msgListHandler.reset(),this._msgRemindHandler.reset(),this._roamingMsgKeyAndTimeMap.clear(),this._sll.reset(),this._peerReadTimeMap.clear(),this._completedMap.clear(),this._convMap.clear(),this._pagingTs=0,this._pagingStartIdx=0,this._pagingPinnedTs=0,this._pagingPinnedStartIdx=0,this._remoteGroupReadSeqMap.clear(),this._convTotalUnreadCount=0,this._pagingGetCostList.length=0,this._pagingConvIDMap.clear(),this._convIDFromUnreadDBMap.clear(),this._pagingGetCostList.length=0,this._convMapForDiff.clear(),this._partialUpdatedConvMap.clear(),this._everClearedMap.clear(),this._bPullOnInvite=!0,this.resetReady()}}]),Zi),di=(c(Qi,[{key:"onCheckTimer",value:function(e){e%1==0&&0<this._cachedGroupTipsMap.size&&this._checkCachedGroupTips()}},{key:"_checkCachedGroupTips",value:function(){var e=this;this._cachedGroupTipsMap.forEach((function(t,n){var o=e._checkCountMap.get(n),i=e._grpM.hasLocalGroup(n);we.l("".concat(e._n,"._checkCachedGroupTips groupID:").concat(n," hasLocalGroup:").concat(i," checkCount:").concat(o)),i?(e._notifyCachedGroupTips(n),e._checkCountMap.delete(n),e._grpM.deleteUnjoinedAVChatRoom(n)):o>=e.MAX_CHECK_COUNT?(e._deleteCachedGroupTips(n),e._checkCountMap.delete(n)):e._checkCountMap.set(n,++o)}))}},{key:"onNewGroupTips",value:function(e){we.l("".concat(this._n,".onNewGroupTips options:").concat(JSON.stringify(e.dataList)));e=this._assembly(e);var t=e.eventDataList,n=e.result;e=e.AVChatRoomMessageList;0<e.length&&this._grpM.onAVChatRoomMessage(e),0<n.length&&(this._grpM.emitOEvt(E.MESSAGE_RECEIVED,n),this._handleTips(n)),0<t.length&&(this._grpM.updateNextMessageSeq(t),this._grpM.get(11).onNewMessage({conversationOptionsList:t,isInstantMessage:!0}))}},{key:"_assembly",value:function(e){for(var n=e.event,o=e.dataList,i=null,r=[],a=[],s={},c=[],u=0,l=o.length;u<l;u++){var d=ct(o[u]);if(6===n){if(this._grpM.isGroupAttributesUpdatedNotice(d))continue;if(this._grpM.isGroupCountersNotice(d))continue}var f=d.groupProfile,p=f.groupID,h=f.communityType,g=(h=void 0===h?0:h,f.topicID),_=(g=void 0===g?void 0:g,f=f.invisible,void 0),v=this._grpM.isMessageFromTopic(h,g),m=(v&&(_=k.CONV_TOPIC,d.to=g),this._grpM.hasLocalGroup(p));if(m||!this._grpM.isUnjoinedAVChatRoom(p))if(m||v)if(this._grpM.isMessageFromOrToAVChatroom(p))d.event=n,c.push(d);else if(d.currentUser=this._grpM.getMyUserID(),d.conversationType=k.CONV_GROUP,(i=new So(d)).setElement({type:k.MSG_GRP_TIP,content:t(t({},d.elements),{},{groupProfile:d.groupProfile})}),i.isSystemMessage=!1,1!==f){m=this._grpM.get(11),v=i,f=v.conversationID,v=v.sequence;if(6===n)i._onlineOnlyFlag=!0,a.push(i);else if(!m.pushIntoNoticeResult(a,i))continue;this._grpM.isMessageFromCommunityOfTopic(h,g)||6===n&&m.getLocalConversation(f)||(6!==n&&this._qualityStat(i),h=m.isRemoteRead({conversationID:f,sequence:v}),dt(s[f])?(g=0,"in"===i.flow&&(i._isExcludedFromUnreadCount||i._onlineOnlyFlag||h||(g=1)),s[f]=r.push({conversationID:f,unreadCount:g,type:dt(_)?i.conversationType:_,subType:i.conversationSubType,lastMessage:i._isExcludedFromLastMessage?"":i})-1):(r[m=s[f]].type=i.conversationType,r[m].subType=i.conversationSubType,r[m].lastMessage=i._isExcludedFromLastMessage?"":i,"in"===i.flow&&(i._isExcludedFromUnreadCount||i._onlineOnlyFlag||h||r[m].unreadCount++)))}else this._qualityStat(i);else this._cacheGroupTipsAndProbe({groupID:p,event:n,item:d})}return{eventDataList:r,result:a,AVChatRoomMessageList:c}}},{key:"_qualityStat",value:function(e){this._grpM.get(26).addMessageSequence({key:Yn,message:e})}},{key:"_handleTips",value:function(e){var t=this;e.forEach((function(e){switch(e.payload.operationType){case 1:t._onNewMemberComeIn(e);break;case 2:t._onMemberQuit(e);break;case 3:t._onMemberKickedOut(e);break;case 4:t._onMemberSetAdmin(e);break;case 5:t._onMemberCancelledAdmin(e);break;case 6:t._onGroupProfileModified(e);break;case 7:t._onMemberInfoModified(e);break;case 8:t._onTopicProfileUpdated(e);break;default:we.w("".concat(t._n,"._handleTips unknown operationType:").concat(e.payload.operationType))}}))}},{key:"_onNewMemberComeIn",value:function(e){e=e.payload;var t=e.memberNum;e=e.groupProfile.groupID,e=this._grpM.getLocalGroupProfile(e);e&&Ye(t)&&e.memberCount!==t&&(e.memberCount=t,this._updateConvGroupProfile(e))}},{key:"_onMemberQuit",value:function(e){var t=e.payload,n=t.memberNum,o=(t=t.groupProfile.groupID,this._grpM.getLocalGroupProfile(t));o&&Ye(n)&&o.memberCount!==n&&(o.memberCount=n,this._updateConvGroupProfile(o)),this._grpM.getGroupMemberHandler().deleteLocalGroupMembers(t,e.payload.userIDList)}},{key:"_onMemberKickedOut",value:function(e){var t=e.payload,n=t.memberNum,o=(t=t.groupProfile.groupID,this._grpM.getLocalGroupProfile(t));o&&Ye(n)&&o.memberCount!==n&&(o.memberCount=n,this._updateConvGroupProfile(o)),this._grpM.getGroupMemberHandler().deleteLocalGroupMembers(t,e.payload.userIDList)}},{key:"_updateConvGroupProfile",value:function(e){this._grpM.get(11).updateConvGroupProfile([e])}},{key:"_onMemberSetAdmin",value:function(e){var t=e.payload.groupProfile.groupID,n=(e=e.payload.userIDList,this._grpM.getGroupMemberHandler());e.forEach((function(e){e=n.getLocalGroupMemberInfo(t,e),e&&e.updateRole(k.GRP_MBR_ROLE_ADMIN)}))}},{key:"_onMemberCancelledAdmin",value:function(e){var t=e.payload.groupProfile.groupID,n=(e=e.payload.userIDList,this._grpM.getGroupMemberHandler());e.forEach((function(e){e=n.getLocalGroupMemberInfo(t,e),e&&e.updateRole(k.GRP_MBR_ROLE_MEMBER)}))}},{key:"_onGroupProfileModified",value:function(e){var t=this,n=(e=e.payload,e.newGroupProfile),o=e.groupProfile,i=e.operatorInfo,r=(e=o.groupID,this._grpM.getLocalGroupProfile(e));Object.keys(n).forEach((function(e){switch(e){case"ownerID":t._ownerChanged(r,n);break;case"groupName":r.name=n[e];break;default:r[e]=n[e]}})),dt(i)||Object.keys(i).forEach((function(e){"nameCard"===e?r.updateSelfInfo({nameCard:i[e]}):"role"===e&&r.updateSelfInfo({role:i[e]})})),o=!r.isSupportTopic;this._grpM.emitGroupListUpdate(!0,o)}},{key:"_ownerChanged",value:function(e,t){e=e.groupID;var n=this._grpM.getLocalGroupProfile(e),o=this._grpM.getMyUserID();o===t.ownerID&&(n.updateGroup({selfInfo:{role:k.GRP_MBR_ROLE_OWNER}}),n=(t=this._grpM.getGroupMemberHandler()).getLocalGroupMemberInfo(e,o),o=this._grpM.getLocalGroupProfile(e).ownerID,t=t.getLocalGroupMemberInfo(e,o),n&&n.updateRole(k.GRP_MBR_ROLE_OWNER),t&&t.updateRole(k.GRP_MBR_ROLE_MEMBER))}},{key:"_onMemberInfoModified",value:function(e){var t=e.to,n=e.payload,o=n.groupProfile,i=(n=n.memberList,o.groupID),r=(Tt(t)&&this._updateTopicMuteTime(e),this._grpM.getGroupMemberHandler());n.forEach((function(e){var t=r.getLocalGroupMemberInfo(i,e.userID);t&&Ye(e.muteTime)&&t.updateMuteUntil(e.muteTime)}))}},{key:"_updateTopicMuteTime",value:function(e){var t=e.to,n=(e=e.payload,e.groupProfile),o=(e=e.memberList,void 0===e?[]:e),i=(e=this._grpM.get(10),n=n.groupID,e.getLocalTopic(n,t));if(i){for(var r=!1,a=0;a<o.length;a++){var s=o[a];if(s.userID===this._grpM.getMyUserID()&&0<=s.muteTime){i.updateSelfInfo({muteTime:s.muteTime}),r=!0;break}}r&&this._grpM.emitOEvt(E.TOPIC_UPDATED,{groupID:n,topic:i})}}},{key:"_onTopicProfileUpdated",value:function(e){var n=e.payload,o=n.groupProfile.groupID;n=n.newTopicInfo;this._grpM.get(10).onTopicProfileUpdated(t({groupID:o,topicID:e.to},n))}},{key:"_cacheGroupTips",value:function(e,t){this._cachedGroupTipsMap.has(e)||this._cachedGroupTipsMap.set(e,[]),this._cachedGroupTipsMap.get(e).push(t)}},{key:"_deleteCachedGroupTips",value:function(e){this._cachedGroupTipsMap.has(e)&&this._cachedGroupTipsMap.delete(e)}},{key:"_notifyCachedGroupTips",value:function(e){var t=this,n=this._cachedGroupTipsMap.get(e)||[];n.forEach((function(e){t.onNewGroupTips(e)})),this._deleteCachedGroupTips(e),we.l("".concat(this._n,"._notifyCachedGroupTips groupID:").concat(e," count:").concat(n.length))}},{key:"_cacheGroupTipsAndProbe",value:function(e){var t=this,n=e.groupID,o=e.event;e=e.item;this._cacheGroupTips(n,{event:o,dataList:[e]}),this._grpM.getGroupSimplifiedInfo(n).then((function(e){e.type===k.GRP_AVCHATROOM?t._grpM.hasLocalGroup(n)?t._notifyCachedGroupTips(n):t._grpM.setUnjoinedAVChatRoom(n):(t._grpM.updateGroupMap([e]),t._notifyCachedGroupTips(n))})),this._checkCountMap.has(n)||this._checkCountMap.set(n,0),we.l("".concat(this._n,"._cacheGroupTipsAndProbe groupID:").concat(n))}},{key:"reset",value:function(){this._cachedGroupTipsMap.clear(),this._checkCountMap.clear()}}]),Qi),fi=(c(Ji,[{key:"onCheckTimer",value:function(e){e%1==0&&0<this._cachedGroupMessageMap.size&&this._checkCachedGroupMessage()}},{key:"_checkCachedGroupMessage",value:function(){var e=this;this._cachedGroupMessageMap.forEach((function(t,n){var o=e._checkCountMap.get(n),i=e._grpM.hasLocalGroup(n);we.l("".concat(e._n,"._checkCachedGroupMessage groupID:").concat(n," hasLocalGroup:").concat(i," checkCount:").concat(o)),i?(e._notifyCachedGroupMessage(n),e._checkCountMap.delete(n),e._grpM.deleteUnjoinedAVChatRoom(n)):o>=e.MAX_CHECK_COUNT?(e._deleteCachedGroupMessage(n),e._checkCountMap.delete(n)):e._checkCountMap.set(n,++o)}))}},{key:"updateLastMsg",value:function(e){var n="".concat(this._n,".updateLastMsg");if(0!==this._grpM.getGroupMap().size){for(var o,i,r,a,s=!1,c=e.length,u=0;u<c;u++)(o=e[u]).type===k.CONV_GROUP&&0!==o.lastMessage.lastSequence&&null!==o.lastMessage.payload&&(i=o.conversationID.split(/^GROUP/)[1],(i=this._grpM.getLocalGroupProfile(i))&&(r=i.lastMessage,a=o.lastMessage,JSON.stringify(r)!==JSON.stringify(a)&&(i.lastMessage=t({},o.lastMessage),s=!0)));we.l("".concat(n," convCount:").concat(c," groupCount:").concat(this._grpM.getLocalGroupList().length," isUpdated:").concat(s)),s&&(this._grpM.sortLocalGroupList(),this._grpM.emitGroupListUpdate(!0,!1))}else this.tempConversationList=e}},{key:"onNewMessage",value:function(e){var t=this._assembly(e),n=t.conversationOptionsList,o=t.messageList;t=t.AVChatRoomMessageList,0<t.length&&this._grpM.onAVChatRoomMessage(t),t=Mt(o),0<t.length&&this._grpM.emitOEvt(E.MESSAGE_MODIFIED,t),0<n.length&&(this._grpM.get(11).onNewMessage({conversationOptionsList:n,isInstantMessage:!1!==e.isInstantMessage,updateUnreadCount:!1!==e.updateUnreadCount}),this._grpM.updateNextMessageSeq(n)),t=It(o);0<t.length&&this._grpM.emitOEvt(E.MESSAGE_RECEIVED,t),o.length=0}},{key:"_assembly",value:function(e){var t=e.dataList,n=e.event,o=e.isInstantMessage,i=null,r=[],a=[],s=[],c={},u=this._grpM.getFileDownloadProxy(),l=this._grpM.getDowloadFileAuthKey(),d=this._grpM.get(17).getFileDNList(),f=t.length;1<f&&t.sort((function(e,t){return e.sequence-t.sequence}));for(var p=this._grpM.get(11),h=this._grpM.get(4),g=0;g<f;g++){var _,v=ct(t[g]),m=v.groupProfile,y=m.groupID,M=m.communityType,I=(M=void 0===M?0:M,m.topicID),C=(I=void 0===I?void 0:I,m=m.invisible,void 0),b=this._grpM.isMessageFromTopic(M,I),T=(b&&(C=k.CONV_TOPIC,v.to=I),this._grpM.hasLocalGroup(y));!T&&this._grpM.isUnjoinedAVChatRoom(y)||(T||b?this._grpM.isMessageFromOrToAVChatroom(y)?(v.event=n,s.push(v)):(v.currentUser=this._grpM.getMyUserID(),v.conversationType=k.CONV_GROUP,v.isSystemMessage=!!v.isSystemMessage,(i=new So(v)).setElement(v.elements,u,l,d),1!==m?(T=1===t[g].isModified,p.isMessageSentByCurrentInstance(i)?i.isModified=T:T=!1,1===v.onlineOnlyFlag?(i._onlineOnlyFlag=!0,p.isMessageSentByCurrentInstance(i)||a.push(i)):this._grpM.isMessageFromCommunityOfTopic(M,I)?a.push(i):(i.from!==this._grpM.getMyUserID()||(b=p.getLatestMessageSentByMe(i.conversationID))&&(m=b.nick,M=b.avatar,m===i.nick&&M===i.avatar||(p.modifyMessageSentByMe({conversationID:_,latestNick:i.nick,latestAvatar:i.avatar}),h.mockOnNickAvatarModified(i.nick,i.avatar))),p.pushIntoMessageList(a,i,T)&&(this._qualityStat(o,i),_=(I=i).conversationID,b=I.sequence,m=p.isRemoteRead({conversationID:_,sequence:b}),dt(c[_])?(M=0,"in"===i.flow&&(i._isExcludedFromUnreadCount||m||(M=1)),c[_]=r.push({conversationID:_,unreadCount:M,type:dt(C)?i.conversationType:C,subType:i.conversationSubType,lastMessage:i._isExcludedFromLastMessage?"":i})-1):(r[T=c[_]].type=dt(C)?i.conversationType:C,r[T].subType=i.conversationSubType,r[T].lastMessage=i._isExcludedFromLastMessage?"":i,"in"===i.flow&&(i._isExcludedFromUnreadCount||m||r[T].unreadCount++))))):this._qualityStat(o,i)):this._cacheGroupMessageAndProbe({groupID:y,event:n,item:v}))}return{conversationOptionsList:r,messageList:a,AVChatRoomMessageList:s}}},{key:"_qualityStat",value:function(e,t){var n=this._grpM.get(26);n.addMessageSequence({key:Yn,message:t}),e&&0<t.clientTime&&n.addMessageDelay(t.clientTime)}},{key:"onMsgRevoked",value:function(e,t){var n=this,o=this._grpM.get(11),i=[],r=[];e.dataList.forEach((function(e){var t=e.elements.revokedInfos,n=e.revokerInfo,a=e.groupProfile,s=!1;a&&(s=bt({groupID:a.groupID})||!je(a.topicID)),dt(t)||t.forEach((function(e){var t,c=je(e.topicID)?"GROUP".concat(e.groupID):"GROUP".concat(e.topicID),u=o.getLocalConversation(c),l=e.revokerInfo&&e.revokerInfo.revoker||n&&n.revoker,d=n&&n.reason||"";u&&Ct(u.type)?t={conversationID:c,sequence:e.sequence,ID:"".concat(e.tinyID,"-").concat(e.clientTime,"-").concat(e.random)}:(u=o.revoke(c,e.sequence,e.random))?t=u:(t={conversationID:c,sequence:e.sequence},e.tinyID&&e.clientTime&&e.random&&(t.ID="".concat(e.tinyID,"-").concat(e.clientTime,"-").concat(e.random)),e.time&&(t.time=e.time)),t&&(t.revoker=l,t.revokeReason=d,t.revokerInfo={userID:l,nick:"",avatar:""},s?(t.revokerInfo.nick=a.nick,t.revokerInfo.avatar=a.avatar,i.push(t)):r.push(t))}))})),0===r.length&&0===i.length||(o.onMessageRevoked([].concat(i,r),t),0<i.length&&this._grpM.emitOEvt(E.MESSAGE_REVOKED,i),0<r.length&&o.updateRevokerInfo(r).then((function(e){n._grpM.emitOEvt(E.MESSAGE_REVOKED,e)})))}},{key:"_groupListTreeShaking",value:function(e){for(var t=new Map(y(this._grpM.getGroupMap())),n=0,o=e.length;n<o;n++)t.delete(e[n].groupID);this._grpM.hasJoinedAVChatRoom()&&this._grpM.getJoinedAVChatRoom().forEach((function(e){t.delete(e)})),this._grpM.getGroupMap().forEach((function(e,n){e.isSupportTopic&&t.delete(n)}));for(var i=y(t.keys()),r=0,a=i.length;r<a;r++)this._grpM.deleteGroup(i[r])}},{key:"syncGroupList",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=(this._pagingStatus===kn&&this._grpM.clearGroupMap(),y(F)),o=this.PAGING_GRP_COUNT_LIMIT,i=[];if(!0===t)return this._pagingGetGroupListWithTopic({limit:o,offset:0,groupBaseInfoFilter:n,groupList:i});t="syncGroupList";var r="".concat(this._n,".").concat(t),a=new eo(t);return this._pagingGetGroupList({limit:o,offset:0,groupBaseInfoFilter:n,groupList:i}).then((function(){var t=Wt(e._pagingGetCostList),n=Kt(e._pagingGetCostList),o=(e._pagingGetCostList.length=0,e._pagingStatus=An,e._groupListTreeShaking(i),e._grpM.updateGroupMap(i),e._grpM.getLocalGroupList().length);o="count:".concat(o," sum:").concat(n," avg:").concat(t);return we.l("".concat(r," ok. ").concat(o)),a.setMessage(o).end(),e.tempConversationList&&(e.updateLastMsg(e.tempConversationList),e.tempConversationList=null),e._grpM.emitGroupListUpdate(!0,!0),Mn({groupList:e._grpM.getLocalGroupList()})})).catch((function(t){return e._pagingStatus=Ln,a.setError(t).end(),we.e("".concat(r," failed. error:"),t),Cn(t)}))}},{key:"getGroupList",value:function(){var e=this,t="".concat(this._n,".").concat("getGroupList");if(we.l("".concat(t," pagingStatus:").concat(this._pagingStatus)),this._pagingStatus===Ln||this._pagingStatus===kn)return this.syncGroupList().then((function(){var t=e._grpM.getLocalGroupList();return Mn({groupList:t,isSyncCompleted:e.isPagingGetCompleted()})})).catch((function(e){return we.e("".concat(t," failed. error:"),e),Cn(e)}));var n=this._grpM.getLocalGroupList();return we.l("".concat(t,". returned group count:").concat(n.length)),In({groupList:n,isSyncCompleted:this.isPagingGetCompleted()})}},{key:"isPagingGetCompleted",value:function(){return this._pagingStatus===An}},{key:"_pagingGetGroupList",value:function(e){var t=this,n="".concat(this._n,".").concat("_pagingGetGroupList"),o=e.isCommunityRelay,i=void 0!==o&&o,r=e.limit,a=e.offset,s=e.groupBaseInfoFilter,c=e.groupList,u=Date.now();return this._grpM.req({P:Fn.GET_GRP_LIST,data:{type:i?k.GRP_COMMUNITY:void 0,memberAccount:this._grpM.getMyUserID(),limit:r,offset:a,responseFilter:{groupBaseInfoFilter:s,selfInfoFilter:["Role","JoinTime","MsgFlag","MsgSeq"]}}}).then((function(e){e=e.data;var o=e.groups,l=(o=void 0===o?[]:o,e=e.totalCount,o=(c.push.apply(c,y(o)),t._handleGroupAtInfoWithoutTopic(i,o),a+r),!(o<e));e="offset:".concat(a," limit:").concat(r," total:").concat(e," isCompleted:").concat(l," ")+"current:".concat(c.length," isCommunityRelay:").concat(i);return t._pagingGetCostList.push(Yt(u,!1)),we.l("".concat(n," ok. ").concat(e," cost:").concat(Yt(u))),i||l?!i&&l?(we.l("".concat(n," start to get community list")),a=0,t._pagingGetGroupList({limit:r,offset:a,groupBaseInfoFilter:s,groupList:c,isCommunityRelay:!0})):i&&!l?(a=o,t._pagingGetGroupList({limit:r,offset:a,groupBaseInfoFilter:s,groupList:c,isCommunityRelay:!0})):Mn({groupList:c}):(a=o,t._pagingGetGroupList({limit:r,offset:a,groupBaseInfoFilter:s,groupList:c}))})).catch((function(e){return 10018===e.code?(we.w("".concat(t.logPrefix," response size exceeds the limit, request count:").concat(r)),r=50,t._pagingGetGroupList({limit:r,offset:a,groupBaseInfoFilter:s,groupList:c,isCommunityRelay:i})):i?(11e3===e.code&&we.l("".concat(n," ok. community unavailable")),In({groupList:c})):Cn(e)}))}},{key:"_pagingGetGroupListWithTopic",value:function(e){var t=this,n="".concat(this._n,"._pagingGetGroupListWithTopic"),o=e.limit,i=e.offset,r=e.groupBaseInfoFilter,a=e.groupList,s=Date.now();return this._grpM.req({P:Fn.GET_GRP_LIST,data:{type:k.GRP_COMMUNITY,memberAccount:this._grpM.getMyUserID(),limit:o,offset:i,responseFilter:{groupBaseInfoFilter:r,selfInfoFilter:y(q)},isSupportTopic:1,needAppDefineData:1}}).then((function(e){e=e.data;var c=e.groups,u=(e=e.totalCount,c=(a.push.apply(a,y(void 0===c?[]:c)),i+o),!(c<e));return we.l("".concat(n," ok. offset:").concat(i," limit:").concat(o," totalCount:").concat(e," isCompleted:").concat(u," currentCount:").concat(a.length," cost:").concat(Yt(s))),u?(t._grpM.updateGroupMap(a),t._grpM.emitGroupListUpdate(!0,!1),e=t._grpM.getLocalGroupList().filter((function(e){return!0===e.isSupportTopic})),Mn({groupList:e})):(i=c,t._pagingGetGroupListWithTopic({limit:o,offset:i,groupBaseInfoFilter:r,groupList:a}))})).catch((function(e){return 10018===e.code?(we.w("".concat(t.logPrefix," response size exceeds the limit, request count:").concat(o)),o=50,t._pagingGetGroupListWithTopic({limit:o,offset:i,groupBaseInfoFilter:r,groupList:a})):Cn(e)}))}},{key:"_cacheGroupMessage",value:function(e,t){this._cachedGroupMessageMap.has(e)||this._cachedGroupMessageMap.set(e,[]),this._cachedGroupMessageMap.get(e).push(t)}},{key:"_deleteCachedGroupMessage",value:function(e){this._cachedGroupMessageMap.has(e)&&this._cachedGroupMessageMap.delete(e)}},{key:"_notifyCachedGroupMessage",value:function(e){var t=this,n=this._cachedGroupMessageMap.get(e)||[];n.forEach((function(e){t.onNewMessage(e)})),this._deleteCachedGroupMessage(e),we.l("".concat(this._n,"._notifyCachedGroupMessage groupID:").concat(e," count:").concat(n.length))}},{key:"_cacheGroupMessageAndProbe",value:function(e){var t=this,n=e.groupID,o=e.event;e=e.item;this._cacheGroupMessage(n,{event:o,dataList:[e]}),this._grpM.getGroupSimplifiedInfo(n).then((function(e){e.type===k.GRP_AVCHATROOM?t._grpM.hasLocalGroup(n)?t._notifyCachedGroupMessage(n):t._grpM.setUnjoinedAVChatRoom(n):(t._grpM.updateGroupMap([e]),t._notifyCachedGroupMessage(n))})),this._checkCountMap.has(n)||this._checkCountMap.set(n,0),we.l("".concat(this._n,"._cacheGroupMessageAndProbe groupID:").concat(n))}},{key:"_handleGroupAtInfoWithoutTopic",value:function(e,n){var o=this;e&&0!==n.length&&n.forEach((function(e){var n=e.groupID,i=(e=e.groupAtInfoList,[]);dt(e)||(e.forEach((function(e){i.push(t(t({},e),{},{groupID:n}))})),o._grpM.get(11).onNewGroupAtTips({dataList:i}))}))}},{key:"setPagingGroupCount",value:function(e){dt(e)||(this.PAGING_GRP_COUNT_LIMIT=parseInt(e,10))}},{key:"reset",value:function(){this.PAGING_GRP_COUNT_LIMIT=200,this._cachedGroupMessageMap.clear(),this._checkCountMap.clear(),this._pagingStatus=kn,this._pagingGetCostList=[]}}]),Ji),pi=(c(Xi,[{key:"_onCloudConfig",value:function(){var e=this._grpM.getCloudConfig("grp_attr_cache_time");dt(e)||(this.CACHE_EXPIRE_TIME=Number(e))}},{key:"updateLocalMainSequenceOnReconnected",value:function(){this._groupAttributesMap.forEach((function(e){e.localMainSequence=0}))}},{key:"isGroupAttributesUpdatedNotice",value:function(e){var t=e.to,n=(e=e.elements.newGroupProfile,!dt(e)&&!je(e.groupAttributeOption));return n&&this._onGroupAttributesUpdated({groupID:t,groupAttributeOption:e.groupAttributeOption}),n}},{key:"_onGroupAttributesUpdated",value:function(e){var t=this,n=e.groupID,o=(e=e.groupAttributeOption,e.mainSequence),i=e.isWithChangedAttributeInfo,r=e.groupAttributeList;r=void 0===r?[]:r,e=e.operationType;if(we.l("".concat(this._n,".onGroupAttributesUpdated. ")+"groupID:".concat(n," isWithChangedAttributeInfo:").concat(i," operationType:").concat(e)),!dt(e)){this._groupAttributesCopy=this._getCachedAttributes({groupID:n});var a=o-this._getLocalGroupAttributes(n).localMainSequence;if(0!=a){if(1===i&&1==a)return this._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:o,groupAttributeList:r,operationType:e}),void this._emitGroupAttributesUpdated(n);this._hasLocalGroupAttributes(n)&&(i=this._getLocalGroupAttributes(n).avChatRoomKey,this._getGroupAttributes({groupID:n,avChatRoomKey:i}).then((function(){t._emitGroupAttributesUpdated(n)})))}}}},{key:"initGroupAttributesCache",value:function(e){var t=e.groupID;e=e.avChatRoomKey,e=void 0===e?void 0:e;this._groupAttributesMap.set(t,{lastUpdateTime:0,localMainSequence:0,remoteMainSequence:0,attributes:new Map,avChatRoomKey:e}),we.l("".concat(this._n,".initGroupAttributesCache groupID:").concat(t," avChatRoomKey:").concat(e))}},{key:"initGroupAttributes",value:function(e){var t=this,n=e.groupID,o=e.groupAttributes,i=(e=this._getLocalGroupAttributes(n),e.remoteMainSequence),r=(e=e.avChatRoomKey,new eo("initGroupAttributes"));return r.setMessage("groupID:".concat(n," avChatRoomKey:").concat(e," mainSequence:").concat(i)),this._grpM.req({P:Fn.SET_GRP_ATTR,data:{groupID:n,avChatRoomKey:e,mainSequence:i,groupAttributeList:this._transformGroupAttributes(o)}}).then((function(e){we.l("".concat(t._n,".").concat("initGroupAttributes"," ok. groupID:").concat(n));e=e.data;var i=e.mainSequence;e=y(e.groupAttributeList);return e.forEach((function(e){e.value=o[e.key]})),t._groupAttributesCopy=t._getCachedAttributes({groupID:n}),t._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:i,groupAttributeList:e,operationType:1}),t._emitGroupAttributesUpdated(n),r.end(),Mn({groupAttributes:o})})).catch((function(e){return r.setError(e).end(),Cn(e)}))}},{key:"setGroupAttributes",value:function(e){var t=this,n="".concat(this._n,".").concat("setGroupAttributes"),o=e.groupID,i=e.groupAttributes,r=(e=this._getLocalGroupAttributes(o),e.remoteMainSequence),a=e.avChatRoomKey,s=e.attributes,c=(e=this._transformGroupAttributes(i),e.forEach((function(e){var t=e.key;e.sequence=0,s.has(t)&&(e.sequence=s.get(t).sequence)})),new eo("setGroupAttributes"));return c.setMessage("groupID:".concat(o," groupAttributes:").concat(JSON.stringify(i))),we.l("".concat(n,". groupID:").concat(o," mainSequence:").concat(r)),this._grpM.req({P:Fn.MODIFY_GRP_ATTR,data:{groupID:o,avChatRoomKey:a,mainSequence:r,groupAttributeList:e}}).then((function(e){we.l("".concat(n," ok."));e=e.data;var r=e.mainSequence;e=y(e.groupAttributeList);return e.forEach((function(e){e.value=i[e.key]})),t._groupAttributesCopy=t._getCachedAttributes({groupID:o}),t._refreshCachedGroupAttributes({groupID:o,remoteMainSequence:r,groupAttributeList:e,operationType:2}),t._emitGroupAttributesUpdated(o),c.end(),Mn({groupAttributes:i})})).catch((function(e){return c.setError(e).end(),Cn(e)}))}},{key:"deleteGroupAttributes",value:function(e){var t=this,n=e.groupID,o=(e=e.keyList,e=void 0===e?[]:e,this._getLocalGroupAttributes(n)),i=o.remoteMainSequence,r=o.avChatRoomKey,a=o.attributes,s=y(a.keys()),c=(o=Fn.CLEAR_GRP_ATTR,3),u=(r={groupID:n,avChatRoomKey:r,mainSequence:i},[]),l=(0<e.length&&(s=[],o=Fn.DEL_GRP_ATTR,c=4,e.forEach((function(e){var t=0;a.has(e)&&(t=a.get(e).sequence,s.push(e)),u.push({key:e,sequence:t})})),r.groupAttributeList=u),new eo("deleteGroupAttributes"));return l.setMessage("groupID:".concat(n," mainSequence:").concat(i," keyList:").concat(e," proto:").concat(o)),this._grpM.req({P:o,data:r}).then((function(e){return we.l("".concat(t._n,".").concat("deleteGroupAttributes"," ok. groupID:").concat(n)),e=e.data.mainSequence,t._groupAttributesCopy=t._getCachedAttributes({groupID:n}),t._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:e,groupAttributeList:u,operationType:c}),t._emitGroupAttributesUpdated(n),l.end(),Mn({keyList:s})})).catch((function(e){return l.setError(e).end(),Cn(e)}))}},{key:"getGroupAttributes",value:function(e){var t=this,n="".concat(this._n,".").concat("getGroupAttributes"),o=e.groupID,i=this._getLocalGroupAttributes(o),r=i.avChatRoomKey,a=i.lastUpdateTime,s=i.localMainSequence,c=(i=i.remoteMainSequence,new eo("getGroupAttributes"));return c.setMessage("groupID:".concat(o," localMainSequence:").concat(s," remoteMainSequence:").concat(i," keyList:").concat(e.keyList)),Date.now()-a>=this.CACHE_EXPIRE_TIME||s<i?this._getGroupAttributes({groupID:o,avChatRoomKey:r}).then((function(i){return c.setMoreMessage("get attributes from remote. count:".concat(i.length)).end(),we.l("".concat(n," from remote. groupID:").concat(o)),i=t._getCachedAttributes(e),Mn({groupAttributes:i})})).catch((function(e){return c.setError(e).end(),Cn(e)})):(c.setMoreMessage("get attributes from cache").end(),we.l("".concat(n," from cache. groupID:").concat(o)),a=this._getCachedAttributes(e),In({groupAttributes:a}))}},{key:"_getGroupAttributes",value:function(e){var n=this,o=0;return dt(e.avChatRoomKey)||(o=1),this._grpM.req({P:Fn.GET_GRP_ATTR,data:t(t({},e),{},{groupType:o})}).then((function(t){we.l("".concat(n._n,"._getGroupAttributes ok. groupID:").concat(e.groupID));t=t.data;var o=t.mainSequence,i=(t=t.groupAttributeList,y(t));return dt(o)||n._refreshCachedGroupAttributes({groupID:e.groupID,remoteMainSequence:o,groupAttributeList:i,operationType:5}),t})).catch((function(e){return Cn(e)}))}},{key:"_refreshCachedGroupAttributes",value:function(e){var t=e.groupID,n=e.remoteMainSequence,o=e.groupAttributeList;e=e.operationType;if(this._hasLocalGroupAttributes(t)){var i=this._getLocalGroupAttributes(t),r=i.localMainSequence;if(5===e||n-r==1)i.remoteMainSequence=n,i.localMainSequence=n,i.lastUpdateTime=Date.now(),this._updateCachedAttributes({groupAttributes:i,groupAttributeList:o,operationType:e});else{if(r===n)return;i.remoteMainSequence=n}this._groupAttributesMap.set(t,i),o="operationType:".concat(e," localMainSequence:").concat(r," remoteMainSequence:").concat(n),we.l("".concat(this._n,"._refreshCachedGroupAttributes. ").concat(o))}}},{key:"_getCachedAttributes",value:function(e){var t=e.groupID,n=(e=e.keyList,e=void 0===e?[]:e,{});if(this._hasLocalGroupAttributes(t)){var o=this._getLocalGroupAttributes(t).attributes;if(0<e.length)e.forEach((function(e){o.has(e)&&(n[e]=o.get(e).value)}));else{var i,r=S(o.keys());try{for(r.s();!(i=r.n()).done;){var a=i.value;n[a]=o.get(a).value}}catch(e){r.e(e)}finally{r.f()}}}return n}},{key:"_updateCachedAttributes",value:function(e){var t=e.groupAttributes,n=e.groupAttributeList;e=e.operationType;3!==e?4!==e?(1===e&&t.attributes.clear(),n.forEach((function(e){var n=e.key,o=e.value;e=e.sequence;t.attributes.set(n,{value:o,sequence:e})}))):n.forEach((function(e){t.attributes.delete(e.key)})):t.attributes.clear()}},{key:"_hasLocalGroupAttributes",value:function(e){return this._groupAttributesMap.has(e)}},{key:"_getLocalGroupAttributes",value:function(e){return this._hasLocalGroupAttributes(e)||this.initGroupAttributesCache({groupID:e}),this._groupAttributesMap.get(e)}},{key:"_transformGroupAttributes",value:function(e){var t=[];return Object.keys(e).forEach((function(n){t.push({key:n,value:e[n]})})),t}},{key:"_emitGroupAttributesUpdated",value:function(e){var t=this._getCachedAttributes({groupID:e}),n=this._computeAttrChangedInfo(t),o=n.updatedKeyList;n=n.deletedKeyList;we.l("".concat(this._n,"._emitGroupAttributesUpdated update:").concat(o.length,", delete:").concat(n.length)),0===o.length&&0===n.length||this._grpM.emitOEvt(E.GROUP_ATTRIBUTES_UPDATED,{groupID:e,groupAttributes:t,updatedKeyList:o,deletedKeyList:n})}},{key:"_computeAttrChangedInfo",value:function(e){var t=this,n=[],o=[];return Object.keys(e).forEach((function(o){e[o]!==t._groupAttributesCopy[o]&&n.push(o)})),Object.keys(this._groupAttributesCopy).forEach((function(t){dt(e[t])&&o.push(t)})),this._groupAttributesCopy={},{updatedKeyList:n,deletedKeyList:o}}},{key:"deleteLocalGroupAttributes",value:function(e){this._hasLocalGroupAttributes(e)&&this._groupAttributesMap.delete(e)}},{key:"reset",value:function(){this._groupAttributesMap.clear(),this._groupAttributesCopy={},this.CACHE_EXPIRE_TIME=3e4}}]),Xi),hi=(c($i,[{key:"_onCloudConfig",value:function(){var e=this._grpM.getCloudConfig("grp_counter_expire_time");dt(e)||(this.EXPIRE_TIME=Number(e))}},{key:"isGroupCountersNotice",value:function(e){var t=e.to,n=(e=e.elements.groupCounterInfo,!1);return je(e)||(this._onGroupCountersUpdated({groupID:t,groupCounterInfo:e}),n=!0),n}},{key:"_onGroupCountersUpdated",value:function(e){var t=this,n=e.groupID;e.groupCounterInfo.forEach((function(e){var o=e.type,i=e.groupCounterSeq;e=e.counterList,e=void 0===e?[]:e;0!==o&&2!==o||(t._updateLocalGroupCounters({groupID:n,groupCounterSeq:i,counterList:e}),e.forEach((function(e){t._grpM.emitOEvt(E.GROUP_COUNTER_UPDATED,{groupID:n,key:e.key,value:e.value})}))),1===o&&t._deleteLocalGroupCounters({groupID:n,groupCounterSeq:i,counterList:e})})),we.l("".concat(this._n,"._onGroupCountersUpdated groupID:").concat(n))}},{key:"initGroupCountersCache",value:function(e){var t=e.groupID;e=e.avChatRoomKey;this._groupCountersMap.set(t,{lastUpdateTime:0,groupCounterSeq:0,counters:new Map,avChatRoomKey:e}),we.l("".concat(this._n,".initGroupCountersCache groupID:").concat(t," avChatRoomKey:").concat(e))}},{key:"setGroupCounters",value:function(e){if(!this._grpM.canIUse(U.GRP_COUNTER))return this._grpM.noUse("setGroupCounters");var t="".concat(this._n,".").concat("setGroupCounters"),n=e.groupID,o=(e=e.counters,e=this._convertObjectToList(e),this._getLocalGroupCounters(n).avChatRoomKey),i="groupID:".concat(n," count:").concat(e.length),r=new eo("setGroupCounters");return r.setMessage("".concat(i)),we.l("".concat(t,". ").concat(i)),this._updateGroupCounters({groupID:n,counterList:e,avChatRoomKey:o,mode:"Set"}).then((function(e){return r.end(),we.l("".concat(t," ok.")),Mn({counters:e})})).catch((function(e){return r.setError(e).end(),we.e("".concat(t," failed. error:"),e),Cn(e)}))}},{key:"increaseGroupCounter",value:function(e){var t="increaseGroupCounter";if(!this._grpM.canIUse(U.GRP_COUNTER))return this._grpM.noUse(t);var n="".concat(this._n,".").concat(t),o=e.groupID,i=e.key,r=(e=e.value,this._getLocalGroupCounters(o).avChatRoomKey),a="groupID:".concat(o," key:").concat(i," value:").concat(e),s=new eo(t);return s.setMessage("".concat(a)),we.l("".concat(n,". ").concat(a)),this._updateGroupCounters({groupID:o,counterList:[{key:i,value:e}],avChatRoomKey:r,mode:"Increase"}).then((function(e){return s.end(),we.l("".concat(n," ok.")),Mn({counters:e})})).catch((function(e){return s.setError(e).end(),we.e("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"decreaseGroupCounter",value:function(e){var t="decreaseGroupCounter";if(!this._grpM.canIUse(U.GRP_COUNTER))return this._grpM.noUse(t);var n="".concat(this._n,".").concat(t),o=e.groupID,i=e.key,r=(e=e.value,this._getLocalGroupCounters(o).avChatRoomKey),a="groupID:".concat(o," key:").concat(i," value:").concat(e),s=new eo(t);return s.setMessage("".concat(a)),we.l("".concat(n,". ").concat(a)),this._updateGroupCounters({groupID:o,counterList:[{key:i,value:e}],avChatRoomKey:r,mode:"Decrease"}).then((function(e){return s.end(),we.l("".concat(n," ok.")),Mn({counters:e})})).catch((function(e){return s.setError(e).end(),we.e("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"getGroupCounters",value:function(e){var t=this;if(!this._grpM.canIUse(U.GRP_COUNTER))return this._grpM.noUse("getGroupCounters");var n="".concat(this._n,".").concat("getGroupCounters"),o=e.groupID,i=(e=e.keyList,void 0===e?[]:e),r=(e=this._getLocalGroupCounters(o),e.avChatRoomKey),a=(e=e.lastUpdateTime,new eo("getGroupCounters"));return a.setMessage("groupID:".concat(o)),Date.now()-e>=this.EXPIRE_TIME?this._getRemoteGroupCounters({groupID:o,avChatRoomKey:r}).then((function(e){return a.setMoreMessage("from remote. count:".concat(e.length)).end(),we.l("".concat(n," from remote. groupID:").concat(o)),e=t._getLocalCounters(o,i),Mn({counters:e})})).catch((function(e){return a.setError(e).end(),Cn(e)})):(a.setMoreMessage("from cache").end(),we.l("".concat(n," from cache. groupID:").concat(o)),e=this._getLocalCounters(o,i),In({counters:e}))}},{key:"_getRemoteGroupCounters",value:function(e){var n=this;return this._grpM.req({P:Fn.GET_GRP_COUNTER,data:t({},e)}).then((function(t){t=t.data;var o=t.counterList;o=void 0===o?[]:o,t=t.groupCounterSeq;return n._updateLocalGroupCounters({groupID:e.groupID,counterList:o,groupCounterSeq:t}),we.l("".concat(n._n,"._getRemoteGroupCounters ok. groupID:").concat(e.groupID)),o})).catch((function(e){return Cn(e)}))}},{key:"_convertObjectToList",value:function(e){var t=[];return Object.keys(e).forEach((function(n){t.push({key:n,value:e[n]})})),t}},{key:"_updateGroupCounters",value:function(e){var n="".concat(this._n,"._updateGroupCounters"),o=e.groupID,i=e.avChatRoomKey,r=e.mode;return we.l("".concat(n,". groupID:").concat(o," avChatRoomKey:").concat(i," mode:").concat(r)),this._grpM.req({P:Fn.UPDATE_GRP_COUNTER,data:t({},e)}).then((function(e){we.l("".concat(n," ok."));e=e.data.counterList;var t={};return(void 0===e?[]:e).forEach((function(e){var n=e.key;e=e.value;t[n]=e})),t})).catch((function(e){return Cn(e)}))}},{key:"_hasLocalGroupCounters",value:function(e){return this._groupCountersMap.has(e)}},{key:"_getLocalGroupCounters",value:function(e){return this._hasLocalGroupCounters(e)||this.initGroupCountersCache({groupID:e}),this._groupCountersMap.get(e)}},{key:"_updateLocalGroupCounters",value:function(e){var t,n,o,i=e.groupID,r=e.counterList;r=void 0===r?[]:r,e=e.groupCounterSeq;this._hasLocalGroupCounters(i)&&(o=this._getLocalGroupCounters(i),t=o.counters,n=o.avChatRoomKey,o=o.groupCounterSeq,0<e&&e<o||(r.forEach((function(e){var n=e.key;e=e.value;t.set(n,e)})),this._groupCountersMap.set(i,{lastUpdateTime:Date.now(),groupCounterSeq:e,counters:t,avChatRoomKey:n})))}},{key:"_deleteLocalGroupCounters",value:function(e){var t,n,o=e.groupID,i=e.counterList;i=void 0===i?[]:i,e=e.groupCounterSeq;this._hasLocalGroupCounters(o)&&(n=this._getLocalGroupCounters(o),t=n.counters,n=n.avChatRoomKey,i.forEach((function(e){t.delete(e.key)})),this._groupCountersMap.set(o,{lastUpdateTime:Date.now(),groupCounterSeq:e,counters:t,avChatRoomKey:n}))}},{key:"_getLocalCounters",value:function(e,t){var n={};if(!this._hasLocalGroupCounters(e))return n;var o=this._getLocalGroupCounters(e).counters;if(0<t.length)t.forEach((function(e){o.has(e)&&(n[e]=o.get(e))}));else{var i,r=S(o.keys());try{for(r.s();!(i=r.n()).done;){var a=i.value;n[a]=o.get(a)}}catch(e){r.e(e)}finally{r.f()}}return n}},{key:"reset",value:function(){this._groupCountersMap.clear(),this.EXPIRE_TIME=3e4}}]),$i),gi=(c(zi,[{key:"start",value:function(){var e=this._grpM.isLoggedIn();e||(this._proto=Fn.AV_NOAUTH_POLLING),we.l("".concat(this._n,".start pollingInterval:").concat(this._manager.getPollingInterval()," isLoggedIn:").concat(e)),this._isRunning=!0,this._request()}},{key:"isRunning",value:function(){return this._isRunning}},{key:"_request",value:function(){var e=this,t=this._onInit(this._groupID);this._grpM.req({P:this._proto,data:t}).then((function(t){e._onSuccess(e._groupID,t),e.isRunning()&&(clearTimeout(e._timeoutID),e._timeoutID=setTimeout(e._request.bind(e),e._manager.getPollingInterval()))})).catch((function(t){e._onFail(e._groupID,t),e.isRunning()&&(clearTimeout(e._timeoutID),e._timeoutID=setTimeout(e._request.bind(e),e._manager.MAX_POLLING_INTERVAL))}))}},{key:"stop",value:function(){we.l("".concat(this._n,".stop")),0<this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=-1),this._isRunning=!1}},{key:"getPollingTimerID",value:function(){return this._timeoutID}}]),zi),_i={3:!0,4:!0,5:!0,6:!0,17:!0,20:!0,21:!0,100:!0},vi=(c(Yi,[{key:"hasJoinedAVChatRoom",value:function(){var e=[];return 0<(e=0<this._joinedGroupMap.size?y(this._joinedGroupMap.values()).filter((function(e){return e.type===k.GRP_AVCHATROOM})):e).length}},{key:"getJoinedLiveList",value:function(){var e=[];return 0<this._joinedGroupMap.size?y(this._joinedGroupMap.values()).filter((function(e){return e.type===k.GRP_LIVE})):e}},{key:"checkJoinedAVChatRoomByID",value:function(e){return this._joinedGroupMap.has(e)}},{key:"getJoinedAVChatRoom",value:function(){return 0<this._joinedGroupMap.size?y(this._joinedGroupMap.keys()):[]}},{key:"_updatedata",value:function(e){var n=this._pollingRequestInfoMap.get(e);return e===y(this._pollingInstanceMap.keys())[0]?t(t({},n),{},{startBroadcastSeq:this._startBroadcastSeq,simplifiedMessage:this.DEFAULT_POLLING_SIMPLIFIED_MSG}):t(t({},n),{},{simplifiedMessage:this.DEFAULT_POLLING_SIMPLIFIED_MSG})}},{key:"_handleSuccess",value:function(e,t){var n,o=t.data,i=o.key,r=o.nextSeq,a=o.rspMsgList,s=o.errorCode,c=o.nextBroadcastSeq;o=o.broadcastMessageList;0!==s?(s=this._pollingRequestInfoMap.get(e),n=new eo("longPollingAVError"),s=s?"".concat(s.key,"-").concat(s.startSeq):"requestInfo is undefined",n.setMessage("".concat(e,"-").concat(s,"-").concat(t.errorInfo)).setCode(t.errorCode).end(!0)):this.checkJoinedAVChatRoomByID(e)&&(lt(i)&&Ye(r)&&this._pollingRequestInfoMap.set(e,{key:i,startSeq:r}),Ye(c)&&c>this._startBroadcastSeq&&(this._startBroadcastSeq=c),Xe(a)&&0<a.length?(a.forEach((function(e){e.to=e.groupID})),this.onMessage(a,e)):(this._pollingNoMessageCount+=1,this._pollingNoMessageCount===this.DEFAULT_POLLING_NO_MESSAGE_COUNT&&(this._pollingInterval=this.DEFAULT_POLLING_INTERVAL+this.DEFAULT_POLLING_INTERVAL_PLUS)),this._onBroadcastMessage(o))}},{key:"_handleFailure",value:function(e,t){}},{key:"onMessage",value:function(e,t){if(Xe(e)&&0!==e.length){var n="".concat(this._n,".onMessage"),o=(t&&(n+=" groupID:".concat(t)),0!==this._pollingNoMessageCount&&(this._pollingNoMessageCount=0,this._pollingInterval=this.DEFAULT_POLLING_INTERVAL),null),i=[],r=this._get(11),a=this._get(26),s=e.length,c=(1<s&&e.sort((function(e,t){return e.sequence-t.sequence})),this._get(12).isUnlimitedAVChatRoom()),u=!1;we.getLevel()<=0&&(t=e.map((function(e){return e.sequence})),we.l("".concat(n," count:").concat(t.length," sequenceList:").concat(t)),t.length=0);for(var l=0;l<s;l++){var d=this.restoreMessageFromSimplified(e[l]);if(_i[d.event]){if(6===d.event){if(this._grpM.isGroupAttributesUpdatedNotice(d))continue;if(this._grpM.isGroupCountersNotice(d))continue}if(20!==d.event)if(21!==d.event)if(100!==d.event){o=this.packMessage(d,d.event);var f=1===d.isModified;u=1===d.isHistoryMessage;if(!c){if(this._seqSll.has(o.sequence))continue;this._seqSll.set(o.sequence)}var p=this._IDSll.has(o.ID);p?we.w("".concat(n," ID:").concat(o.ID," has:").concat(p)):(this._IDSll.set(o.ID),p=!1,!u&&this._isMessageSentByCurrentInstance(o)?f&&(p=!0,o.isModified=f,r.updateMsgIsModifiedProp(o)):p=!0,p&&(o.conversationType===k.CONV_SYSTEM&&5===o.payload.operationType&&this._onGroupDismissed(o.payload.groupProfile.groupID),u||o.conversationType===k.CONV_SYSTEM||(f=o.conversationID.replace(k.CONV_GROUP,""),this._pollingInstanceMap.has(f)?this._grpM.isLoggedIn()&&a.addMessageSequence({key:$n,message:o}):(o.type!==k.MSG_GRP_TIP&&0<o.clientTime&&a.addMessageDelay(o.clientTime),a.addMessageSequence({key:zn,message:o}))),i.push(o)))}else this.onRoomCustomData(d);else this._get(34).onMessageReactionNotify({event:21,dataList:d.elements.messageReactionNotifyList});else this.handleMessageRevokedNotice(d)}else we.w("".concat(n,". unknown event:").concat(d.event))}0!==i.length&&(0<(t=Mt(i)).length&&this._grpM.emitOEvt(E.MESSAGE_MODIFIED,t),u||0<(t=this.packConversationOption(i)).length&&r.onNewMessage({conversationOptionsList:t,isInstantMessage:!0}),this._checkMessageStacked(i),0<(t=It(i)).length&&this._grpM.emitOEvt(E.MESSAGE_RECEIVED,t),i.length=0)}}},{key:"handleMessageRevokedNotice",value:function(e){var t=this,n=e.groupID,o=e.elements.revokeMsgList,i=e.revokerInfo,r=[];o.forEach((function(e){var t=e.tinyID,o=e.clientTime,a=e.random;e=e.sequence,t={conversationID:"".concat(k.CONV_GROUP).concat(n),ID:"".concat(t,"-").concat(o,"-").concat(a),revoker:i.revoker,revokeReason:i.reason||"",revokerInfo:{userID:i.revoker,nick:"",avatar:""},sequence:e};r.push(t)})),0!==r.length&&this._get(11).updateRevokerInfo(r).then((function(e){t._grpM.emitOEvt(E.MESSAGE_REVOKED,e)}))}},{key:"isBroadcastOrNormal",value:function(e){return 3===e||17===e}},{key:"isGroupTip",value:function(e){return 4===e||6===e}},{key:"isGroupSystemNotice",value:function(e){return 5===e}},{key:"restoreGroupTipElements",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.operatorInfo,n=(t=void 0===t?{}:t,e.operatorID),o=e.userIDList,i=(o=void 0===o?[]:o,e.operationType),r=(i=(Ye(e.groupJoinType)||1!==i&&2!==i||(e.groupJoinType=2===i?0:1),t.userID),t.avatar);t=t.nick,e.operatorInfo={userID:void 0===i?n:i,avatar:void 0===r?"":r,nick:void 0===t?"":t},n=o.map((function(e){return{userID:e}}));return e.memberInfoList=e.memberInfoList||n,e}},{key:"restoreMessageFromSimplified",value:function(e){var n,o,i,r=e.event;return this.isBroadcastOrNormal(r)&&(e.cloudCustomData=e.cloudCustomData||"",e.elements=e.elements.map((function(e){var n;return e.type===k.MSG_CUSTOM&&(n=e.content,e.content=t({data:"",description:"",extension:""},void 0===n?{}:n)),e}))),(this.isGroupTip(r)||this.isGroupSystemNotice(r))&&(e.from=e.from||"@TIM#SYSTEM"),this.isGroupTip(r)&&(e.elements=this.restoreGroupTipElements(e.elements),o=(i=void 0===(i=e.elements)?{}:i).operationType,n=i.operatorInfo,1===o&&(o=[{userID:(void 0===n?{}:n).userID}],i.memberInfoList=i.memberInfoList||o)),this.isGroupSystemNotice(r)&&(i=(n=e.elements).memberInfoList,o=n.operatorInfo,e.elements.memberInfoList=t({userID:e.elements.operatorID,avatar:"",nick:""},i=i||(void 0===o?{}:o)),e.elements=t({authentication:"",remarkInfo:"",messageKey:1e3*e.time},e.elements),r=Object.keys(e.elements).filter((function(e){return"operatorInfo"!==e})).reduce((function(n,o){return t(t({},n),{},u({},o,e.elements[o]))}),{}),e.elements=r),e}},{key:"_onGroupDismissed",value:function(e){we.l("".concat(this._n,"._onGroupDismissed groupID:").concat(e)),this._grpM.deleteLocalGroupAndConversation(e),this.reset(e)}},{key:"_checkMessageStacked",value:function(e){var t="MessageStacked";e=e.length;100<=e&&(this._grpM.warn(t,e),this._reportMessageStackedCount<5&&(new eo(t).setMessage("count:".concat(e," groupID:").concat(y(this._joinedGroupMap.keys()))).setLevel("warning").end(),this._reportMessageStackedCount+=1))}},{key:"_isMessageSentByCurrentInstance",value:function(e){return!!this._get(11).isMessageSentByCurrentInstance(e)}},{key:"packMessage",value:function(e,t){e.currentUser=this._grpM.getMyUserID(),e.conversationType=5===t?k.CONV_SYSTEM:k.CONV_GROUP,e.isSystemMessage=!!e.isSystemMessage;var n=new So(e),o=(e=this.packElements(e,t),t=this._grpM.getFileDownloadProxy(),this._grpM.getDowloadFileAuthKey()),i=this._get(17).getFileDNList();return n.setElement(e,t,o,i),n}},{key:"packElements",value:function(e,n){return 4===n||6===n?(this._updateMemberCountByGroupTips(e),{type:k.MSG_GRP_TIP,content:t(t({},e.elements),{},{groupProfile:e.groupProfile})}):5===n?{type:k.MSG_GRP_SYS_NOTICE,content:t(t({},e.elements),{},{groupProfile:t(t({},e.groupProfile),{},{groupID:e.groupID})})}:e.elements}},{key:"packConversationOption",value:function(e){for(var t=new Map,n=0;n<e.length;n++){var o,i=e[n],r=i.conversationID;t.has(r)?"in"===((o=t.get(r)).lastMessage=i).flow&&o.unreadCount++:t.set(r,{conversationID:i.conversationID,unreadCount:"out"===i.flow?0:1,type:i.conversationType,subType:i.conversationSubType,lastMessage:i})}return y(t.values())}},{key:"_updateMemberCountByGroupTips",value:function(e){var t,n,o,i=e.groupProfile.groupID;e=e.elements.onlineMemberInfo,e=void 0===e?void 0:e;je(e)||(t=void 0===(t=e.onlineMemberNum)?0:t,e=void 0===(e=e.expireTime)?this.DEFAULT_EXPIRE_TIME:e,n=this._onlineMemberCountMap.get(i)||{},o=Date.now(),je(n)?Object.assign(n,{lastReqTime:0,lastSyncTime:0,latestUpdateTime:o,memberCount:t,expireTime:e}):(n.latestUpdateTime=o,n.memberCount=t),this._onlineMemberCountMap.set(i,n))}},{key:"_onBroadcastMessage",value:function(e){if(!je(e)){for(var t=[],n=e.length,o=null,i=0;i<n;i++){var r=this.restoreMessageFromSimplified(e[i]);_i[r.event]?((o=this.packMessage(r,r.event)).isBroadcastMessage=!0,this._broadcastMessageIDMap.has(o.ID)||(t.push(o),this._broadcastMessageIDMap.set(o.ID,1))):we.w("".concat(this._n,"._onBroadcastMessage unknown event:").concat(r.event))}0<t.length&&this._grpM.emitOEvt(E.MESSAGE_RECEIVED,t)}}},{key:"start",value:function(e){var t;this._pollingInstanceMap.has(e)?(t=this._pollingInstanceMap.get(e)).isRunning()||t.start():((t=new gi({manager:this,groupID:e,onInit:this._updatedata.bind(this),onSuccess:this._handleSuccess.bind(this),onFail:this._handleFailure.bind(this)})).start(),this._pollingInstanceMap.set(e,t),we.l("".concat(this._n,".start groupID:").concat(e)))}},{key:"handleJoinResult",value:function(e){var t=this;return this._preCheck(e.group).then((function(){var n=e.longPollingKey,o=e.group,i=o.groupID;return t._joinedGroupMap.set(i,o),t._grpM.updateGroupMap([o]),t._grpM.deleteUnjoinedAVChatRoom(i),t._grpM.emitGroupListUpdate(!0,!1),dt(n)?In({status:qe,group:o}):Promise.resolve()}))}},{key:"startRunLoop",value:function(e){var t=this;return this.handleJoinResult(e).then((function(){var n=e.longPollingKey,o=e.group,i=e.startSeq,r=o.groupID;return t._pollingRequestInfoMap.set(r,{key:n,startSeq:void 0===i?0:i}),t.start(r),t._grpM.isLoggedIn()?In({status:qe,group:o}):In({status:qe})}))}},{key:"_preCheck",value:function(e){if(this._get(12).isUnlimitedAVChatRoom())return Promise.resolve();if(!this.hasJoinedAVChatRoom())return Promise.resolve();if(e.type===k.GRP_LIVE)return Promise.resolve();e=m(this._joinedGroupMap.entries().next().value,2);var t=e[0];e=e[1];if(this._grpM.isLoggedIn()){if(e.selfInfo.role!==k.GRP_MBR_ROLE_OWNER&&e.ownerID!==this._grpM.getMyUserID())return this._grpM.quitGroup(t);this._grpM.deleteLocalGroupAndConversation(t)}else this._grpM.deleteLocalGroupAndConversation(t);return this.reset(t),Promise.resolve()}},{key:"joinWithoutAuth",value:function(e){var t=this,n=e.groupID,o="".concat(this._n,".").concat("joinWithoutAuth"),i=new eo("joinWithoutAuth");return this._grpM.req({P:Fn.APPLY_JOIN_GRP_NOAUTH,data:e}).then((function(e){if(e=e.data.longPollingKey,i.setMessage("groupID:".concat(n," longPollingKey:").concat(e)).end(!0),dt(e))return Cn({code:Un.CANNOT_JOIN_NON_AV_WITHOUT_LOGIN});we.l("".concat(o," ok. groupID:").concat(n)),t._get(11).setCompleted("".concat(k.CONV_GROUP).concat(n));var r=new ri({groupID:n});return t.startRunLoop({group:r,longPollingKey:e}),Mn({status:qe})})).catch((function(e){return we.e("".concat(o," failed. groupID:").concat(n," error:"),e),i.setError(e).setMessage("groupID:".concat(n)).end(!0),Cn(e)})).finally((function(){t._grpM.get(14).reportAtOnce()}))}},{key:"getGroupOnlineMemberCount",value:function(e){var t=this._onlineMemberCountMap.get(e)||{},n=Date.now();return je(t)||n-t.lastSyncTime>1e3*t.expireTime&&1e4<n-t.latestUpdateTime&&3e3<n-t.lastReqTime?(t.lastReqTime=n,this._onlineMemberCountMap.set(e,t),this._getGroupOnlineMemberCount(e).then((function(e){return Mn({memberCount:e.memberCount})})).catch((function(e){return Cn(e)}))):In({memberCount:t.memberCount})}},{key:"_getGroupOnlineMemberCount",value:function(e){var t=this,n="".concat(this._n,".").concat("_getGroupOnlineMemberCount"),o=new eo("_getGroupOnlineMemberCount");return this._grpM.requestOnlineCount(e).then((function(o){var i=t._onlineMemberCountMap.get(e)||{},r=(o=o.data,o.memberCount),a=(r=void 0===r?0:r,o=o.expireTime,o=void 0===o?t.DEFAULT_EXPIRE_TIME:o,we.l("".concat(n," ok. groupID:").concat(e," memberCount:").concat(r," expireTime:").concat(o)),Date.now());return je(i)&&(i.lastReqTime=a),t._onlineMemberCountMap.set(e,Object.assign(i,{lastSyncTime:a,latestUpdateTime:a,memberCount:r,expireTime:o})),{memberCount:r}})).catch((function(t){return we.w("".concat(n," failed. error:"),t),o.setCode(t.code).setMessage("groupID:".concat(e," error:").concat(JSON.stringify(t))).end(),Promise.reject(t)}))}},{key:"_get",value:function(e){return this._grpM.get(e)}},{key:"setPollingInterval",value:function(e){dt(e)||(Ye(e)?this._pollingInterval=this.DEFAULT_POLLING_INTERVAL=e:this._pollingInterval=this.DEFAULT_POLLING_INTERVAL=parseInt(e,10))}},{key:"setPollingIntervalPlus",value:function(e){dt(e)||(Ye(e)?this.DEFAULT_POLLING_INTERVAL_PLUS=e:this.DEFAULT_POLLING_INTERVAL_PLUS=parseInt(e,10))}},{key:"setPollingNoMessageCount",value:function(e){dt(e)||(Ye(e)?this.DEFAULT_POLLING_NO_MESSAGE_COUNT=e:this.DEFAULT_POLLING_NO_MESSAGE_COUNT=parseInt(e,10))}},{key:"setPollingSimplifiedMessage",value:function(e){dt(e)||"0"!==e&&"1"!==e||(this.DEFAULT_POLLING_SIMPLIFIED_MSG=parseInt(e,10))}},{key:"getPollingInterval",value:function(){return this._pollingInterval}},{key:"onAVChatRoomMemberBanned",value:function(e){e=e.payload.groupProfile.groupID,we.l("".concat(this._n,".onAVChatRoomMemberBanned groupID:").concat(e)),this._grpM.deleteLocalGroupAndConversation(e),this.reset(e)}},{key:"restartPolling",value:function(){we.l("".concat(this._n,".restartPolling count:").concat(this._pollingInstanceMap.size));var e,t=S(this._pollingInstanceMap.values());try{for(t.s();!(e=t.n()).done;){var n=e.value;n.stop(),n.start()}}catch(e){t.e(e)}finally{t.f()}}},{key:"getPollingTimerID",value:function(e){if(!this._pollingInstanceMap.has(e))return-1;var t=this._pollingInstanceMap.get(e).getPollingTimerID();return we.l("".concat(this._n,".getPollingTimerID groupID:").concat(e," timerID:").concat(t)),t}},{key:"hasPollingInstance",value:function(e){return this._pollingInstanceMap.has(e)}},{key:"onRoomCustomData",value:function(e){var t=e.groupID,n=e.sequence,o=e.time;e=e.elements,e=e&&e.content;this._get(30).onRoomCustomDataReceived(e),we.l("".concat(this._n,".onRoomCustomData groupID:").concat(t," sequence:").concat(n," time:").concat(o," data:").concat(e))}},{key:"reset",value:function(e){if(e){we.l("".concat(this._n,".reset groupID:").concat(e));var t=this._pollingInstanceMap.get(e);t&&t.stop(),this._pollingInstanceMap.delete(e),this._joinedGroupMap.delete(e),this._pollingRequestInfoMap.delete(e),this._onlineMemberCountMap.delete(e)}else{we.l("".concat(this._n,".reset all"));var n,o=S(this._pollingInstanceMap.values());try{for(o.s();!(n=o.n()).done;)n.value.stop()}catch(e){o.e(e)}finally{o.f()}this._pollingInstanceMap.clear(),this._joinedGroupMap.clear(),this._pollingRequestInfoMap.clear(),this._onlineMemberCountMap.clear(),this._broadcastMessageIDMap.clear()}this._seqSll.reset(),this._IDSll.reset(),this._reportMessageStackedCount=0,this._pollingInterval=this.DEFAULT_POLLING_INTERVAL=300,this.DEFAULT_POLLING_NO_MESSAGE_COUNT=20,this.DEFAULT_POLLING_INTERVAL_PLUS=2e3,this._pollingNoMessageCount=0}}]),Yi),mi=(c(Wi,[{key:"updateMember",value:function(e){dt(e.onlineStatus)||(this.isOnline="Online"===e.onlineStatus);var t=[null,void 0,"",0,NaN];e.memberCustomField&&yt(this.memberCustomField,e.memberCustomField),et(this,e,["memberCustomField","marks","onlineStatus"],t)}},{key:"updateRole",value:function(e){["Owner","Admin","Member"].indexOf(e)<0||(this.role=e)}},{key:"updateMuteUntil",value:function(e){dt(e)||(this.muteUntil=Math.floor((Date.now()+1e3*e)/1e3))}},{key:"updateNameCard",value:function(e){dt(e)||(this.nameCard=e)}},{key:"updateMemberCustomField",value:function(e){e&&yt(this.memberCustomField,e)}}]),Wi),yi=(c(Ki,[{key:"_onProfileUpdated",value:function(e){for(var t=this,n=e.data,o=0;o<n.length;o++)!function(e){var o=n[e];t.groupMemberListMap.forEach((function(e){e.has(o.userID)&&e.get(o.userID).updateMember({nick:o.nick,avatar:o.avatar})}))}(o)}},{key:"deleteGroupMemberList",value:function(e){this.groupMemberListMap.delete(e)}},{key:"getGroupMemberList",value:function(e){var t,n=this,o=e.groupID,i=e.role,r=(i=void 0===i?void 0:i,e.offset),a=void 0===r?0:r,s=(r=e.count,void 0===r?15:r),c=(r=e.filter,e=void 0===r?void 0:r,"".concat(this._n,".").concat("getGroupMemberList"));r=this._grpM.hasLocalGroup(o);if(we.l("".concat(c," groupID:").concat(o," role:").concat(i," offset:").concat(a," count:").concat(s," hasLocalGroup:").concat(r)),!r)return In({memberList:[],offset:0});if(this._grpM.getLocalGroupProfile(o).type===k.GRP_AVCHATROOM){if(this._grpM.canIUse(U.AV_MBR_LIST))return this._getAVChatRoomMemberList({groupID:o,offset:a,filter:e});this._grpM.warn("LiveOnlineMember")}i!==k.GRP_MBR_ROLE_ADMIN&&i!==k.GRP_MBR_ROLE_OWNER&&i!==k.GRP_MBR_ROLE_MEMBER||(t=i);var u=new eo("getGroupMemberList"),l=0,d=(r={groupID:o,limit:100<s?100:s,memberRoleFilter:t?[t]:void 0,memberInfoFilter:this.DEFAULT_MEMBER_INFO_FILTER},bt({groupID:o})?r.next="".concat(a):(r.offset=a,l=a+s),[]);return this._grpM.req({P:Fn.GET_GRP_MBR_LIST,data:r}).then((function(e){e=e.data;var t=e.members,i=e.memberNum;e=e.next,e=void 0===e?void 0:e;return dt(e)||(l=je(e)?0:e),Xe(t)&&0!==t.length?(n._grpM.hasLocalGroup(o)&&(n._grpM.getLocalGroupProfile(o).memberNum=i),d=n._updateLocalGroupMemberMap(o,t),n._grpM.get(4).getUserProfile({userIDList:t.map((function(e){return e.userID})),tagList:[Pe.NICK,Pe.AVATAR]})):(l=0,Promise.resolve([]))})).then((function(e){return e=e.data,Xe(e)&&0!==e.length?(e=e.map((function(e){return{userID:e.userID,nick:e.nick,avatar:e.avatar}})),n._updateLocalGroupMemberMap(o,e),d.length<s&&(l=0),u.setMessage("groupID:".concat(o," offset:").concat(a," count:").concat(s)).end(),we.l("".concat(c," ok.")),Mn({memberList:d,offset:l})):In({memberList:[],offset:l})})).catch((function(e){return u.setError(e).end(),we.e("".concat(c," failed. error:"),e),Cn(e)}))}},{key:"_getAVChatRoomMemberList",value:function(e){var n=this,o=e.groupID,i=e.offset,r=(e=e.filter,"".concat(this._n,".").concat("_getAVChatRoomMemberList")),a=new eo("_getAVChatRoomMemberList");return a.setMessage("groupID:".concat(o," offset:").concat(i," filter:").concat(e)),this._grpM.req({P:Fn.GET_AV_MBR_LIST,data:{groupID:o,offset:i,filter:e}}).then((function(e){e=e.data;var i=e.memberList;i=void 0===i?[]:i,e=e.offset,e=void 0===e?0:e,a.end(),we.l("".concat(r," ok. member count:").concat(i.length,", next request timestamp:").concat(e)),i=i.map((function(e){return t(t({},e),{},{onlineStatus:"Online"})})),i=n._updateLocalGroupMemberMap(o,i);return Mn({memberList:i,offset:e})})).catch((function(e){return a.setError(e).end(),we.e("".concat(r," failed. error:"),e),Cn(e)}))}},{key:"getGroupMemberProfile",value:function(e){var n=this,o="getGroupMemberProfile",i="".concat(this._n,".").concat(o),r="groupID:".concat(e.groupID),a=(5<e.userIDList.length?r+=" userIDList.length:".concat(e.userIDList.length):r+=" userIDList:".concat(e.userIDList),we.l("".concat(i," ").concat(r)),50<e.userIDList.length&&(e.userIDList=e.userIDList.slice(0,50)),e.groupID),s=e.userIDList;i=this._grpM.getLocalGroupProfile(a);if(i&&Ct(i.type))return Cn({code:i=Un.OPERATION_NOT_SUPPORTED_IN_AV,message:this._grpM.getErrMsg(i,o)});var c=new eo(o);return c.setMessage(r),this._getGroupMemberProfileAdvance(t(t({},e),{},{userIDList:s})).then((function(e){return e=e.data.members,Xe(e)&&0!==e.length?(n._updateLocalGroupMemberMap(a,e),n._grpM.get(4).getUserProfile({userIDList:e.map((function(e){return e.userID})),tagList:[Pe.NICK,Pe.AVATAR]})):In([])})).then((function(e){return e=e.data.map((function(e){return{userID:e.userID,nick:e.nick,avatar:e.avatar}})),n._updateLocalGroupMemberMap(a,e),e=s.filter((function(e){return n.hasLocalGroupMember(a,e)})).map((function(e){return n.getLocalGroupMemberInfo(a,e)})),c.end(),Mn({memberList:e})}))}},{key:"addGroupMember",value:function(e){var t=this,n="".concat(this._n,".").concat("addGroupMember"),o=e.groupID,i=this._grpM.getLocalGroupProfile(o),r=i.type,a=new eo("addGroupMember");return a.setMessage("groupID:".concat(o," groupType:").concat(r)),Ct(r)?(r=new Gn({code:Un.CANNOT_ADD_MEMBER_IN_AV}),a.setError(r).end(),Cn(r)):(e.userIDList=e.userIDList.map((function(e){return{userID:e}})),we.l("".concat(n," groupID:").concat(o)),this._grpM.req({P:Fn.ADD_GRP_MBR,data:e}).then((function(o){o=o.data.members;var r=(we.l("".concat(n," ok")),o.filter((function(e){return 1===e.result})).map((function(e){return e.userID}))),s=o.filter((function(e){return 0===e.result})).map((function(e){return e.userID})),c=o.filter((function(e){return 2===e.result})).map((function(e){return e.userID})),u=(o=o.filter((function(e){return 4===e.result})).map((function(e){return e.userID})),"groupID:".concat(e.groupID,", ")+"successUserIDList:".concat(r,", ")+"failureUserIDList:".concat(s,", ")+"existedUserIDList:".concat(c,", ")+"overLimitUserIDList:".concat(o));return a.setMoreMessage(u).end(),0===r.length?Mn({successUserIDList:r,failureUserIDList:s,existedUserIDList:c,overLimitUserIDList:o}):(t._updateConvGroupProfile(i),Mn({successUserIDList:r,failureUserIDList:s,existedUserIDList:c,overLimitUserIDList:o,group:i}))})).catch((function(e){return a.setError(e).end(),we.e("".concat(n," failed. error:"),e),Cn(e)})))}},{key:"deleteGroupMember",value:function(e){var t=this,n="".concat(this._n,".").concat("deleteGroupMember"),o=e.groupID,i=e.userIDList,r=this._grpM.getLocalGroupProfile(o);if(dt(r))return Cn({code:Un.CANNOT_FIND_GRP});if(Ct(r.type))return this._grpM.canIUse(U.AV_BAN_MBR)?this._banAVChatRoomMember(e):this._grpM.noUse("deleteGroupMember");var a="groupID:".concat(o," ").concat(5<i.length?"userIDList.length:".concat(i.length):"userIDList:".concat(i)),s=(we.l("".concat(n," groupID:").concat(o," userIDList:"),i),new eo("deleteGroupMember"));return s.setMessage(a),this._grpM.req({P:Fn.DEL_GRP_MBR,data:e}).then((function(){return s.end(),we.l("".concat(n," ok")),t._updateConvGroupProfile(r),t.deleteLocalGroupMembers(o,i),Mn({group:r,userIDList:i})})).catch((function(e){return s.setError(e).end(),we.e("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"_updateConvGroupProfile",value:function(e){this._grpM.get(11).updateConvGroupProfile([e])}},{key:"_banAVChatRoomMember",value:function(e){var t=this,n="".concat(this._n,".").concat("_banAVChatRoomMember"),o=e.groupID,i=e.userIDList,r="groupID:".concat(o," ").concat(5<i.length?"userIDList.length:".concat(i.length):"userIDList:".concat(i)),a=new eo("_banAVChatRoomMember"),s=(a.setMessage(r),we.l("".concat(n," groupID:").concat(o," userIDList:"),i),this._grpM.getLocalGroupProfile(o));return dt(e.duration)||0===e.duration?Cn({code:Un.BAN_DURATION_INVALID}):this._grpM.req({P:Fn.BAN_AV_MBR,data:e}).then((function(){return a.end(),we.l("".concat(n," ok")),t.deleteLocalGroupMembers(o,i),Mn({group:s,userIDList:i})})).catch((function(e){return a.setError(e).end(),we.e("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"setGroupMemberMuteTime",value:function(e){var t=this,n=e.groupID,o=e.userID,i=(e=e.muteTime,"".concat(this._n,".").concat("setGroupMemberMuteTime"));if(o===this._grpM.getMyUserID())return Cn({code:Un.CANNOT_MUTE_SELF});var r="groupID:".concat(n," userID:").concat(o," muteTime:").concat(e),a=(we.l("".concat(i," ").concat(r)),new eo("setGroupMemberMuteTime"));return a.setMessage(r),this.modifyGroupMemberInfo({groupID:n,userID:o,muteTime:e}).then((function(e){a.end(),we.l("".concat(i," ok"));var o=t._grpM.getLocalGroupProfile(n);return Mn({group:o,member:e})})).catch((function(e){return a.setError(e).end(),we.e("".concat(i," failed. error:"),e),Cn(e)}))}},{key:"setGroupMemberRole",value:function(e){var t="".concat(this._n,".").concat("setGroupMemberRole"),n=e.groupID,o=e.userID,i=(e=e.role,"groupID:".concat(n," userID:").concat(o," role:").concat(e)),r=this._grpM.getLocalGroupProfile(n);if(!r||r.type===k.GRP_WORK||r.type===k.GRP_AVCHATROOM)return Cn({code:Un.CANNOT_SET_MEMBER_ROLE_IN_WORK_AND_AV});if(r&&r.selfInfo.role!==k.GRP_MBR_ROLE_OWNER)return Cn({code:Un.NOT_OWNER});var a=[k.GRP_MBR_ROLE_ADMIN,k.GRP_MBR_ROLE_MEMBER];if(bt({groupID:n})&&a.push(k.GRP_MBR_ROLE_CUSTOM),a.indexOf(e)<0)return Cn({code:Un.INVALID_MEMBER_ROLE});if(o===this._grpM.getMyUserID())return Cn({code:Un.CANNOT_SET_SELF_MEMBER_ROLE});var s=new eo("setGroupMemberRole");return s.setMessage(i),we.l("".concat(t," ").concat(i)),this.modifyGroupMemberInfo({groupID:n,userID:o,role:e}).then((function(e){return s.end(),we.l("".concat(t," ok")),Mn({group:r,member:e})})).catch((function(e){return s.setError(e).end(),we.e("".concat(t," failed. error:"),e),Cn(e)}))}},{key:"_filterProfanity",value:function(e,t){var n=this._grpM.get(29);if(!n)return!0;n=n.filterText(t[e],"group_member_profile");var o=n.isAllowedToSend;n=n.modifiedText;return!0===o&&(t[e]=n,!0)}},{key:"setGroupMemberNameCard",value:function(e){var t=this,n="setGroupMemberNameCard",o="".concat(this._n,".").concat(n);if(e.nameCard&&!1===this._filterProfanity("nameCard",e))return Cn({code:Un.PROFANITY_FOUND});var i=e.groupID,r=e.userID,a=void 0===r?this._grpM.getMyUserID():r,s=e.nameCard;r="groupID:".concat(i," userID:").concat(a," nameCard:").concat(s),we.l("".concat(o," ").concat(r)),e=this._grpM.getLocalGroupProfile(i);if(e&&Ct(e.type))return Cn({code:e=Un.OPERATION_NOT_SUPPORTED_IN_AV,message:this._grpM.getErrMsg(e,n)});var c=new eo(n);return c.setMessage(r),this.modifyGroupMemberInfo({groupID:i,userID:a,nameCard:s}).then((function(e){we.l("".concat(o," ok")),c.end();var n=t._grpM.getLocalGroupProfile(i);return a===t._grpM.getMyUserID()&&n&&n.setSelfNameCard(s),Mn({group:n,member:e})})).catch((function(e){return c.setError(e).end(),we.e("".concat(o," failed. error:"),e),Cn(e)}))}},{key:"setGroupMemberCustomField",value:function(e){var t=this,n="setGroupMemberCustomField",o="".concat(this._n,".").concat(n),i=e.groupID,r=e.userID,a=(r=void 0===r?this._grpM.getMyUserID():r,e=e.memberCustomField,"groupID:".concat(i," userID:").concat(r," memberCustomField:").concat(JSON.stringify(e))),s=(we.l("".concat(o," ").concat(a)),this._grpM.getLocalGroupProfile(i));if(s&&Ct(s.type))return Cn({code:s=Un.OPERATION_NOT_SUPPORTED_IN_AV,message:this._grpM.getErrMsg(s,n)});var c=new eo(n);return c.setMessage(a),this.modifyGroupMemberInfo({groupID:i,userID:r,memberCustomField:e}).then((function(e){c.end(),we.l("".concat(o," ok"));var n=t._grpM.getLocalGroupProfile(i);return Mn({group:n,member:e})})).catch((function(e){return c.setError(e).end(),we.e("".concat(o," failed. error:"),e),Cn(e)}))}},{key:"modifyGroupMemberInfo",value:function(e){var n=this,o=e.groupID,i=e.userID,r=void 0;return Tt(o)&&(o=Ft(r=o)),this._grpM.req({P:Fn.MODIFY_GRP_MBR_INFO,data:t(t({},e),{},{groupID:o,topicID:r})}).then((function(){if(n.hasLocalGroupMember(o,i))return t=n.getLocalGroupMemberInfo(o,i),dt(e.muteTime)||t.updateMuteUntil(e.muteTime),dt(e.role)||t.updateRole(e.role),dt(e.nameCard)||t.updateNameCard(e.nameCard),dt(e.memberCustomField)||t.updateMemberCustomField(e.memberCustomField),t;var t=n._grpM.getLocalGroupProfile(o);return t&&!Ct(t.type)?n.getGroupMemberProfile({groupID:o,userIDList:[i]}).then((function(e){return m(e.data.memberList,1)[0]})):void 0}))}},{key:"markGroupMemberList",value:function(e){var t="".concat(this._n,".").concat("markGroupMemberList"),n=e.groupID,o=e.markType,i=e.enableMark,r=(e=e.userIDList,void 0===e?[]:e),a=(e="groupID:".concat(n," markType:").concat(o," enableMark:").concat(i," userIDList count:").concat(r.length),we.l("".concat(t," ").concat(e)),2),s=[],c=(i=(!0===i&&(a=1),y(r)),500<r.length&&(i=r.slice(0,500),we.w("".concat(t," ").concat(jt(500)))),i.forEach((function(e){s.push({userID:e,markType:[o]})})),i=null,new eo("markGroupMemberList"));return c.setMessage(e),this._grpM.req({P:Fn.MARK_AV_MBR_INFO,data:{groupID:n,operationType:a,memberList:s}}).then((function(e){e=e.data.memberList,e=void 0===e?[]:e;var n=[],o=[];e.length===r.length?n.push.apply(n,y(r)):(e.forEach((function(e){n.push(e.userID)})),r.forEach((function(e){n.includes(e)||o.push(e)}))),e="success count:".concat(n.length," fail count:").concat(o.length);return c.setMessage(e).end(),we.l("".concat(t," ok. ").concat(e)),Mn({successUserIDList:n,failureUserIDList:o})})).catch((function(e){return c.setError(e).end(),we.e("".concat(t," failed. error:"),e),Cn(e)}))}},{key:"_getGroupMemberProfileAdvance",value:function(e){return this._grpM.req({P:Fn.GET_GRP_MBR_PROFILE,data:t(t({},e),{},{memberInfoFilter:e.memberInfoFilter||this.DEFAULT_MEMBER_INFO_FILTER})})}},{key:"_updateLocalGroupMemberMap",value:function(e,t){var n=this;return Xe(t)&&0!==t.length?t.map((function(t){return n.hasLocalGroupMember(e,t.userID)?n.getLocalGroupMemberInfo(e,t.userID).updateMember(t):n.setLocalGroupMember(e,new mi(t)),n.getLocalGroupMemberInfo(e,t.userID)})):[]}},{key:"deleteLocalGroupMembers",value:function(e,t){var n=this.groupMemberListMap.get(e);n&&t.forEach((function(e){n.delete(e)}))}},{key:"getLocalGroupMemberInfo",value:function(e,t){return this.groupMemberListMap.has(e)?this.groupMemberListMap.get(e).get(t):null}},{key:"setLocalGroupMember",value:function(e,t){this.groupMemberListMap.has(e)?this.groupMemberListMap.get(e).set(t.userID,t):(t=(new Map).set(t.userID,t),this.groupMemberListMap.set(e,t))}},{key:"getLocalGroupMemberList",value:function(e){return this.groupMemberListMap.get(e)}},{key:"hasLocalGroupMember",value:function(e,t){return this.groupMemberListMap.has(e)&&this.groupMemberListMap.get(e).has(t)}},{key:"hasLocalGroupMemberMap",value:function(e){return this.groupMemberListMap.has(e)}},{key:"reset",value:function(){this.groupMemberListMap.clear()}}]),Ki),Mi=[17,18,20],Ii=(c(ji,[{key:"onNewGroupSystemNotice",value:function(e){var t=e.dataList,n=e.isSyncingEnded,o=(e=e.isInstantMessage,t=(we.d("".concat(this._n,".onReceiveSystemNotice count:").concat(t.length)),this._assembly({notifiesList:t,isInstantMessage:e})),t.eventDataList);t=t.result;0<o.length&&(this._grpM.get(11).onNewMessage({conversationOptionsList:o,isInstantMessage:e}),this._onReceivedGroupSystemNotice({result:t,isInstantMessage:e})),e?0<t.length&&this._grpM.emitOEvt(E.MESSAGE_RECEIVED,t):!0===n&&this._clearGroupSystemNotice()}},{key:"_assembly",value:function(e){var n=e.notifiesList,o=e.isInstantMessage,i=null,r=n.length,a=0,s=[],c={conversationID:k.CONV_SYSTEM,unreadCount:0,type:k.CONV_SYSTEM,subType:null,lastMessage:null};for(a=0;a<r;a++){var u=n[a],l=u.groupProfile,d=l.communityType,f=(l=l.topicID,l=void 0===l?void 0:l,u.elements),p=f.topicIDList;p=void 0===p?void 0:p,f=f.operationType;if(!(2!==(void 0===d?0:d)||je(l)&&je(p))){if(Mi.includes(f)){this._handleTopicSystemNotice(u);continue}je(l)||(u.to=l)}15!==u.elements.operationType&&(u.currentUser=this._grpM.getMyUserID(),u.conversationType=k.CONV_SYSTEM,u.conversationID=k.CONV_SYSTEM,(i=new So(u)).setElement({type:k.MSG_GRP_SYS_NOTICE,content:t(t({},u.elements),{},{groupProfile:t({},u.groupProfile)})}),i.isSystemMessage=!0,(1===i.sequence&&1===i.random||2===i.sequence&&2===i.random)&&(i.sequence=it(),i.random=it(),i.generateMessageID(),we.l("".concat(this._n,"._assembly regenerate ID:").concat(i.ID))),this._grpM.get(11).pushIntoNoticeResult(s,i)&&(o?c.unreadCount++:i.setIsRead(!0),c.subType=i.conversationSubType))}return c.lastMessage=s[s.length-1],{eventDataList:0<s.length?[c]:[],result:s}}},{key:"_clearGroupSystemNotice",value:function(){var e=this;this._getPendencyList().then((function(t){t.forEach((function(t){e.pendencyMap.set("".concat(t.from,"_").concat(t.groupID,"_").concat(t.to),t)}));t=e._grpM.get(11).getLocalMessageList(k.CONV_SYSTEM);var n=[];t.forEach((function(t){var o=t.payload,i=o.operatorID,r=o.operationType;o=o.groupProfile;1===r&&(r="".concat(i,"_").concat(o.groupID,"_").concat(o.to),(i=e.pendencyMap.get(r))&&Ye(i.handled)&&0!==i.handled&&n.push(t))})),e.deleteGroupSystemNotice({messageList:n})}))}},{key:"deleteGroupSystemNotice",value:function(e){var t=this,n="".concat(this._n,".deleteGroupSystemNotice");return Xe(e.messageList)&&0!==e.messageList.length?(we.l("".concat(n," ")+e.messageList.map((function(e){return e.ID}))),this._grpM.req({P:Fn.DEL_GRP_SYSTEM_NOTICE,data:{messageListToDelete:e.messageList.map((function(e){return{from:k.CONV_SYSTEM,messageSeq:e.clientSequence,messageRandom:e.random}}))}}).then((function(){we.l("".concat(n," ok"));var o=t._grpM.get(11);return e.messageList.forEach((function(e){o.deleteLocalMessage(e)})),Mn()})).catch((function(e){return we.e("".concat(n," error:"),e),Cn(e)}))):In()}},{key:"_getPendencyList",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.type,o=t.startTime;t=t.limit;return this._grpM.req({P:Fn.GET_GRP_PENDENCY,data:{type:void 0===n?void 0:n,startTime:void 0===o?0:o,limit:void 0===t?20:t,handleAccount:this._grpM.getMyUserID()}}).then((function(t){var n=t.data.pendencyList;return 0!==t.data.nextStartTime?e._getPendencyList({startTime:t.data.nextStartTime}).then((function(e){return[].concat(y(n),y(e))})):n}))}},{key:"getGroupApplicationList",value:function(){var e=this;return this._getPendencyList().then((function(t){return e._getPendencyList({type:k.GRP_COMMUNITY}).then((function(n){return t.push.apply(t,y(n)),e._handlePendencyResult(t)})).catch((function(n){return e._handlePendencyResult(t)}))}))}},{key:"_handlePendencyResult",value:function(e){var t=this,n=[];return e.forEach((function(e){t.pendencyMap.set("".concat(e.from,"_").concat(e.groupID,"_").concat(e.to),e),0===e.handled&&n.push({applicant:e.from,applicantNick:e.fromUserNickName,groupName:e.groupName,groupID:e.groupID,authentication:e.authentication,messageKey:e.time,applicationType:e.applicationType,userID:e.userID,note:e.note})})),In({applicationList:n})}},{key:"_onReceivedGroupSystemNotice",value:function(e){var t=this,n=e.result;e.isInstantMessage&&n.forEach((function(e){switch(e.payload.operationType){case 1:break;case 2:t._onApplyJoinGroup(e);break;case 3:break;case 4:t._onMemberKicked(e);break;case 5:t._onGroupDismissed(e);break;case 6:break;case 7:t._onInviteGroup(e);break;case 8:t._onQuitGroup(e);break;case 9:t._onSetManager(e);break;case 10:t._onDeleteManager(e);break;case 11:case 12:case 15:break;case 20:t._onMessageRemindTypeSynced(e);break;case 21:t._grpM.onAVChatRoomMemberBanned(e)}}))}},{key:"_onApplyJoinGroup",value:function(e){var t=this,n=(e=e.payload.groupProfile,e.groupID),o=(e=e.groupType,this._grpM.hasLocalGroup(n));we.l("".concat(this._n,"._onApplyJoinGroup groupID:").concat(n," groupType:").concat(e," hasGroup:").concat(o)),o||Ct(e)||this._grpM.getGroupProfile({groupID:n}).then((function(e){e=e.data.group;e&&(t._grpM.updateGroupMap([e]),e=!e.isSupportTopic,t._grpM.emitGroupListUpdate(!0,e))}))}},{key:"_onMemberKicked",value:function(e){e=e.payload.groupProfile.groupID,this._grpM.hasLocalGroup(e)&&this._grpM.deleteLocalGroupAndConversation(e)}},{key:"_onGroupDismissed",value:function(e){e=e.payload.groupProfile.groupID;var t=(this._grpM.hasLocalGroup(e)&&this._grpM.deleteLocalGroupAndConversation(e),this._grpM._AVChatRoomHandler);t&&t.checkJoinedAVChatRoomByID(e)&&t.reset(e)}},{key:"_onInviteGroup",value:function(e){var t=this,n=e.payload.groupProfile.groupID;e=this._grpM.hasLocalGroup(n);we.l("".concat(this._n,"._onInviteGroup groupID:").concat(n," hasGroup:").concat(e)),this._grpM.getGroupProfile({groupID:n}).then((function(){t._grpM.emitGroupListUpdate(),t._grpM.get(11).pullMsgOnInvite("".concat(k.CONV_GROUP).concat(n))}))}},{key:"_onQuitGroup",value:function(e){e=e.payload.groupProfile;var t=e.groupID,n=(e=e.groupType,this._grpM.hasLocalGroup(t));we.l("".concat(this._n,"._onQuitGroup groupID:").concat(t," groupType:").concat(e," hasGroup:").concat(n)),n&&this._grpM.deleteLocalGroupAndConversation(t)}},{key:"_onSetManager",value:function(e){e=e.payload.groupProfile;var t=e.to;e=e.groupID,e=this._grpM.getGroupMemberHandler().getLocalGroupMemberInfo(e,t);e&&e.updateRole(k.GRP_MBR_ROLE_ADMIN)}},{key:"_onDeleteManager",value:function(e){e=e.payload.groupProfile;var t=e.to;e=e.groupID,e=this._grpM.getGroupMemberHandler().getLocalGroupMemberInfo(e,t);e&&e.updateRole(k.GRP_MBR_ROLE_MEMBER)}},{key:"_onMessageRemindTypeSynced",value:function(e){var t=e.payload.groupProfile.groupID;e=e.payload.messageRemindType;this._grpM.get(11).onGroupMsgRemindTypeUpdated({groupID:t,messageRemindType:e})}},{key:"_handleTopicSystemNotice",value:function(e){var t=e.groupProfile,n=t.groupID,o=(t=t.topicID,e=e.elements,e.operationType),i=e.topicIDList,r=(e=e.messageRemindType,this._grpM.get(10));17===o?r.onTopicCreated({groupID:n,topicID:t}):18===o?r.onTopicDeleted({groupID:n,topicIDList:i}):20===o&&r.onMessageRemindTypeUpdated({groupID:n,topicID:t,messageRemindType:e})}},{key:"reset",value:function(){this.pendencyMap.clear()}}]),ji),Ci=["relayFlag"],bi=(l(Hi,Rn),Qo=v(Hi),c(Hi,[{key:"_onCloudConfig",value:function(){var e=this.getCloudConfig("polling_interval"),t=this.getCloudConfig("polling_interval_plus"),n=this.getCloudConfig("polling_no_msg_count"),o=this.getCloudConfig("polling_simplified_msg"),i=this.getCloudConfig("paging_grp_count");we.l("".concat(this._n,"._onCloudConfig pollingInterval:").concat(e)+" pollingIntervalPlus:".concat(t," pollingNoMessageCount:").concat(n)+" pollingSimplifiedMessage:".concat(o," pagingGroupCount:").concat(i)),this._AVChatRoomHandler.setPollingInterval(e),this._AVChatRoomHandler.setPollingIntervalPlus(t),this._AVChatRoomHandler.setPollingNoMessageCount(n),this._AVChatRoomHandler.setPollingSimplifiedMessage(o),this._commonGroupHandler.setPagingGroupCount(i)}},{key:"onCheckTimer",value:function(e){this.isLoggedIn()&&(this._commonGroupHandler.onCheckTimer(e),this._groupTipsHandler.onCheckTimer(e))}},{key:"guardForAVChatRoom",value:function(e){var t,n=this;return e.conversationType===k.CONV_GROUP?(t=Tt(e.to)?Ft(e.to):e.to,this.hasLocalGroup(t)?In():this.getGroupProfile({groupID:t}).then((function(o){o=o.data.group.type;return we.l("".concat(n._n,".guardForAVChatRoom. groupID:").concat(t," type:").concat(o)),o===k.GRP_AVCHATROOM?Cn(new Gn({code:o=Un.MSG_SEND_FAIL_NOT_IN_AV,message:n.getErrMsg(o,e.from,t),data:{message:e}})):In()}))):In()}},{key:"checkJoinedAVChatRoomByID",value:function(e){return this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)}},{key:"onNewMessage",value:function(e){this._commonGroupHandler.onNewMessage(e)}},{key:"updateNextMessageSeq",value:function(e){var t,n=this;Xe(e)&&(t=this.get(10),e.forEach((function(e){var o=e.conversationID.replace(k.CONV_GROUP,"");Tt(o)&&t.updateUnreadCountAndLastMsg(o,e.lastMessage),n.groupMap.has(o)&&(n.groupMap.get(o).nextMessageSeq=e.lastMessage.sequence+1)})))}},{key:"onNewGroupTips",value:function(e){this._groupTipsHandler.onNewGroupTips(e)}},{key:"onMsgRevoked",value:function(e){this._commonGroupHandler.onMsgRevoked(e,!(1<arguments.length&&void 0!==arguments[1])||arguments[1])}},{key:"onNewGroupSystemNotice",value:function(e){this._groupSystemNoticeHandler.onNewGroupSystemNotice(e)}},{key:"onMsgReadNotice",value:function(e){var t=this;e.dataList.forEach((function(e){var n;e=e.elements.groupMessageReadNotice;dt(e)||(n=t.get(11),e.forEach((function(e){var o=e.groupID,i=e.topicID,r=(i=void 0===i?void 0:i,e=e.lastMessageSeq,o=(we.l("".concat(t._n,".onMsgReadNotice groupID:").concat(o," lastMessageSeq:").concat(e)),"".concat(k.CONV_GROUP).concat(o)),!0);je(i)||(o="".concat(k.CONV_GROUP).concat(i),r=!1),n.updateIsReadAfterReadReport({conversationID:o,lastMessageSeq:e}),n.updateUnreadCount(o,r),n.clearGroupAtInfoList(o,r)})))}))}},{key:"onReadReceiptList",value:function(e){var t=this;we.l("".concat(this._n,".onReadReceiptList options:"),e),e.dataList.forEach((function(e){var n=e.groupProfile,o=(e=e.elements,n=n.groupID,t.get(11));e=e.readReceiptList;o.updateReadReceiptInfo({groupID:n,readReceiptList:e})}))}},{key:"onMsgModified",value:function(e){we.l("".concat(this._n,".onMsgModified options:"),e);var n=this.get(11);e.dataList.forEach((function(e){n.onMessageModified(t(t({},e),{},{conversationType:k.CONV_GROUP,to:e.topicID||e.groupID}))}))}},{key:"deleteGroupSystemNotice",value:function(e){this._groupSystemNoticeHandler.deleteGroupSystemNotice(e)}},{key:"initGroupMap",value:function(e){this.groupMap.set(e.groupID,new ri(e))}},{key:"clearGroupMap",value:function(){this.groupMap.clear()}},{key:"deleteGroup",value:function(e){this.groupMap.delete(e)}},{key:"updateGroupMap",value:function(e){var t,n=this,o=this.get(11);e.forEach((function(e){t=e.groupID,n.groupMap.has(t)?n.groupMap.get(t).updateGroup(e):(n.groupMap.set(t,new ri(e)),o.deleteGroupRoamingInfo(t))}));var i,r=this.getMyUserID(),a=S(this.groupMap);try{for(a.s();!(i=a.n()).done;){var s=m(i.value,2)[1];s.selfInfo.userID=r,"Owner"===s.selfInfo.role&&(s.ownerID=r)}}catch(e){a.e(e)}finally{a.f()}}},{key:"getGroupMap",value:function(){return this.groupMap}},{key:"getLocalGroupList",value:function(){return y(this.groupMap.values()).filter((function(e){return e.type!==k.GRP_ROOM&&e.type!==k.GRP_LIVE}))}},{key:"getLocalGroupProfile",value:function(e){return this.groupMap.get(e)}},{key:"sortLocalGroupList",value:function(){var e=y(this.groupMap).filter((function(e){return e=m(e,2),e[0],!je(e[1].lastMessage)}));e.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime})),this.groupMap=new Map(y(e))}},{key:"updateGroupLastMessage",value:function(e){this._commonGroupHandler.updateLastMsg(e)}},{key:"emitGroupListUpdate",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=this.getLocalGroupList();e&&this.emitOEvt(E.GROUP_LIST_UPDATED),t&&(e=JSON.parse(JSON.stringify(n)),this.get(11).updateConvGroupProfile(e))}},{key:"getMyNameCardByGroupID",value:function(e){return e=this.getLocalGroupProfile(e),e?e.selfInfo.nameCard:""}},{key:"isPagingGetCompleted",value:function(){return this._commonGroupHandler.isPagingGetCompleted()}},{key:"getMsgRemindType",value:function(e){var t=this;return Xe(e)&&0!==e.length?(e=e.filter((function(e){return!Ct(t.getLocalGroupProfile(e).type)})),0===e.length?Promise.resolve():(we.l("".concat(this._n,".getMsgRemindType groupIDList:").concat(e)),this.getGroupProfileAdvance({groupIDList:e,responseFilter:{memberInfoFilter:["MsgFlag"]}}).then((function(e){e=e.data.successGroupList;var n=t.get(11);e.forEach((function(e){n.onGroupMsgRemindTypeUpdated({groupID:e.groupID,messageRemindType:Xe(e.members)?e.members[0].messageRemindType:""})}))})))):Promise.resolve()}},{key:"getGroupList",value:function(){return this._commonGroupHandler.getGroupList()}},{key:"syncCommunityWithTopic",value:function(){return this._commonGroupHandler.syncGroupList(!0)}},{key:"getGroupProfile",value:function(e){var t=this,n="".concat(this._n,".").concat("getGroupProfile"),o=new eo("getGroupProfile"),i=e.groupID,r=e.groupCustomFieldFilter;we.l("".concat(n," groupID:").concat(i)),r={groupIDList:[i],responseFilter:{groupBaseInfoFilter:y(F),groupCustomFieldFilter:r,memberInfoFilter:[].concat(y(q),["NameCard"])}};return this.getGroupProfileAdvance(r).then((function(e){e=e.data;var r=e.successGroupList;e=e.failureGroupList;return we.l("".concat(n," ok")),0<e.length?Cn(e[0]):((e=Ct(r[0].type)&&!t.hasLocalGroup(i)?new ri(r[0]):(t.updateGroupMap(r),t.getLocalGroupProfile(i))).isSupportTopic||t.get(11).updateConvGroupProfile([e]),o.setMessage("groupID:".concat(i," type:").concat(e.type," muteAllMembers:").concat(e.muteAllMembers," ownerID:").concat(e.ownerID)).end(),Mn({group:e}))})).catch((function(t){return o.setError(t).setMessage("groupID:".concat(e.groupID)).end(),we.e("".concat(n," failed. error:"),t),Cn(t)}))}},{key:"getGroupProfileAdvance",value:function(e){var n,o="".concat(this._n,".getGroupProfileAdvance"),i=e.groupIDList,r=(Xe(i)&&50<i.length&&(this.warn("GetGroupProfileLimit"),i.length=50),[]),a=[];i.forEach((function(e){(bt({groupID:e})?a:r).push(e)})),i=[];return 0<r.length&&(n=this._getGroupProfileAdvance(t(t({},e),{},{groupIDList:r})),i.push(n)),0<a.length&&(n=this._getGroupProfileAdvance(t(t({},e),{},{groupIDList:a,relayFlag:0<r.length})),i.push(n)),Promise.all(i).then((function(e){var t=[],n=[];return e.forEach((function(e){t.push.apply(t,y(e.successGroupList)),n.push.apply(n,y(e.failureGroupList))})),Mn({successGroupList:t,failureGroupList:n})})).catch((function(e){return we.e("".concat(o," failed. error:"),e),Cn(e)}))}},{key:"_getGroupProfileAdvance",value:function(e){var t=this,n=e.relayFlag,o=void 0!==n&&n,i=g(e,Ci);return this.req({P:Fn.GET_GRP_PROFILE,data:i}).then((function(e){return we.l("".concat(t._n,"._getGroupProfileAdvance ok. options:"),i),e=e.data.groups,{successGroupList:e.filter((function(e){return dt(e.errorCode)||0===e.errorCode})),failureGroupList:e.filter((function(e){return e.errorCode&&0!==e.errorCode})).map((function(e){return new Gn({code:e.errorCode,message:e.errorInfo,data:{groupID:e.groupID}})}))}})).catch((function(t){return o&&bt({groupID:e.groupIDList[0]})?{successGroupList:[],failureGroupList:[]}:Cn(t)}))}},{key:"createGroup",value:function(e){var n=this,o=[k.GRP_PUBLIC,k.GRP_WORK,k.GRP_MEETING,k.GRP_AVCHATROOM,k.GRP_COMMUNITY],i="".concat(this._n,".").concat("createGroup"),r=e.type,a=e.groupID;if(e.name&&!1===this._filterProfanity("name",e))return Cn({code:Un.PROFANITY_FOUND});if(e.introduction&&!1===this._filterProfanity("introduction",e))return Cn({code:Un.PROFANITY_FOUND});if(e.notification&&!1===this._filterProfanity("notification",e))return Cn({code:Un.PROFANITY_FOUND});if(!o.includes(r))return Cn({code:Un.ILLEGAL_GRP_TYPE});if(!bt({type:r})){if(!je(a)&&bt({groupID:a}))return Cn({code:Un.ILLEGAL_GRP_ID});e.isSupportTopic=void 0}if(Ct(r)&&!dt(e.memberList)&&0<e.memberList.length&&(e.memberList=void 0),this._canIUseJoinOption(r)||dt(e.joinOption)||(e.joinOption=void 0),bt({type:r})){if(!je(a)&&!bt({groupID:a}))return Cn({code:Un.ILLEGAL_GRP_ID});e.isSupportTopic=!0===e.isSupportTopic?1:0}var s=new eo("createGroup"),c=(we.l("".concat(i," options:"),e),null),u=[];return this.req({P:Fn.CREATE_GRP,data:t(t({},e),{},{ownerID:this.getMyUserID(),webPushFlag:1})}).then((function(o){o=o.data;var r=o.groupID,a=(o=o.overLimitUserIDList,void 0===o?[]:o);c=r,u=a,o="groupType:".concat(e.type," groupID:").concat(r," overLimitUserIDList:").concat(a);if(s.setMessage(o).end(),we.l("".concat(i," ok. ").concat(o)),e.type===k.GRP_AVCHATROOM)return n.getGroupProfile({groupID:r});if(e.type===k.GRP_COMMUNITY&&1===e.isSupportTopic)return n.getGroupProfile({groupID:r});je(e.memberList)||je(a)||(e.memberList=e.memberList.filter((function(e){return-1===a.indexOf(e.userID)}))),n.updateGroupMap([t(t({},e),{},{groupID:r})]);o=n.get(2);var l="",d=0,f=(e.type===k.GRP_COMMUNITY?(l=n.isIntl()?"Create Community":"创建社群",d=1):l=n.isIntl()?"Create Group":"创建群组",n.get(4).getMyNick());l=o.createCustomMessage({to:r,conversationType:k.CONV_GROUP,payload:{data:JSON.stringify({businessID:"group_create",content:l,cmd:d,opUser:f||n.getMyUserID(),version:4})}});return o.sendMessageInstance(l),n.emitGroupListUpdate(),n.getGroupProfile({groupID:r})})).then((function(e){e=e.data.group;var t=e.selfInfo,n=t.nameCard;t=t.joinTime;return e.updateSelfInfo({nameCard:n,joinTime:t,messageRemindType:k.MSG_REMIND_ACPT_AND_NOTE,role:k.GRP_MBR_ROLE_OWNER}),Mn({group:e,overLimitUserIDList:u})})).catch((function(o){var r;return s.setMessage("groupType:".concat(e.type)).setError(o).end(),10010===o.code||10007===o.code?(n._silentlyGetGroupProfile(o.code,c),n.updateGroupMap([t(t({},e),{},{groupID:c})]),(r=n.getLocalGroupProfile(c)).selfInfo.role=k.GRP_MBR_ROLE_OWNER,Mn({group:r,overLimitUserIDList:u})):(we.e("".concat(i," failed. error:"),o),Cn(o))}))}},{key:"dismissGroup",value:function(e){var t=this,n="".concat(this._n,".").concat("dismissGroup"),o="groupID:".concat(e),i=new eo("dismissGroup");return i.setMessage(o),we.l("".concat(n," ").concat(o)),this.req({P:Fn.DISMISS_GRP,data:{groupID:e}}).then((function(){return i.end(),we.l("".concat(n," ok")),t.deleteLocalGroupAndConversation(e),t.checkJoinedAVChatRoomByID(e)&&t._AVChatRoomHandler.reset(e),t._groupAttributesHandler.deleteLocalGroupAttributes(e),Mn({groupID:e})})).catch((function(e){return i.setError(e).end(),we.e("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"updateGroupProfile",value:function(e){var t,n=this,o="".concat(this._n,".").concat("updateGroupProfile");if(this.hasLocalGroup(e.groupID)&&(t=this.getLocalGroupProfile(e.groupID).type,this._canIUseJoinOption(t)||dt(e.joinOption)||(we.w("".concat(o," joinOption is unavailable for Work/Meeting/AVChatRoom")),e.joinOption=void 0)),dt(e.muteAllMembers)||(e.muteAllMembers?e.muteAllMembers="On":e.muteAllMembers="Off"),e.name&&!1===this._filterProfanity("name",e))return Cn({code:Un.PROFANITY_FOUND});if(e.introduction&&!1===this._filterProfanity("introduction",e))return Cn({code:Un.PROFANITY_FOUND});if(e.notification&&!1===this._filterProfanity("notification",e))return Cn({code:Un.PROFANITY_FOUND});var i=new eo("updateGroupProfile");return i.setMessage(JSON.stringify(e)),we.l("".concat(o," groupID:").concat(e.groupID)),this.req({P:Fn.UPDATE_GRP_PROFILE,data:e}).then((function(){return i.end(),we.l("".concat(o," ok")),n.hasLocalGroup(e.groupID)&&n.groupMap.get(e.groupID).updateGroup(e),Mn({group:n.groupMap.get(e.groupID)})})).catch((function(e){return i.setError(e).end(),we.l("".concat(o," failed. error:"),e),Cn(e)}))}},{key:"_filterProfanity",value:function(e,t){var n=this.get(29);if(!n)return!0;n=n.filterText(t[e],x);var o=n.isAllowedToSend;n=n.modifiedText;return!0===o&&(t[e]=n,!0)}},{key:"joinGroup",value:function(e){var t=this,n=e.groupID,o="".concat(this._n,".joinGroup");if(this.deleteUnjoinedAVChatRoom(n),this.hasLocalGroup(n)){if(!this.isLoggedIn())return In({status:k.JOIN_STATUS_ALREADY_IN_GROUP});var i=new eo("applyJoinGroup");return this.getGroupProfile({groupID:n}).then((function(){return i.setMessage("groupID:".concat(n," joinedStatus:").concat(k.JOIN_STATUS_ALREADY_IN_GROUP)).end(),In({status:k.JOIN_STATUS_ALREADY_IN_GROUP})})).catch((function(r){return i.setMessage("groupID:".concat(n," unjoined")).end(),we.w("".concat(o," ").concat(n," was unjoined, now join!")),t.groupMap.delete(n),t.applyJoinGroup(e)}))}return we.l("".concat(o," groupID:").concat(n)),this.isLoggedIn()?this.applyJoinGroup(e):this._AVChatRoomHandler.joinWithoutAuth(e)}},{key:"applyJoinGroup",value:function(e){var n=this,o="".concat(this._n,".").concat("applyJoinGroup"),i=e.groupID;if(!je(e.applyMessage)&&!1===this._filterProfanity("applyMessage",e))return Cn({code:Un.PROFANITY_FOUND});var r=new eo("applyJoinGroup"),a=(e=t({},e),this.canIUse(U.AV_HISTORY_MSG));return a&&(e.historyMessageFlag=1),this.get(11).deleteTopicRoamingInfo(i),this.req({P:Fn.APPLY_JOIN_GRP,data:e}).then((function(e){e=e.data;var t=e.joinedStatus,s=e.longPollingKey,c=e.startSeq,u=e.avChatRoomFlag,l=e.avChatRoomKey,d=e.messageList;e="groupID:".concat(i," joinedStatus:").concat(t," longPollingKey:").concat(s," startSeq:").concat(c)+" avChatRoomFlag:".concat(u," canGetAVChatRoomHistoryMsg:").concat(a,",")+" historyMsgCount:".concat(je(d)?0:d.length);switch(r.setMessage(e).end(),we.l("".concat(o," ok. ").concat(e)),t){case Be:return Mn({status:Be});case qe:return n.getGroupProfile({groupID:i}).then((function(e){return e=e.data.group,n._handleJoinResult({group:e,avChatRoomFlag:u,longPollingKey:s,startSeq:c,avChatRoomKey:l,messageList:d})})).catch((function(e){var t;return 10010===e.code||10007===e.code?(n._silentlyGetGroupProfile(e.code,i),t=new ri({groupID:i}),n.updateGroupMap([t]),n._handleJoinResult({group:t,avChatRoomFlag:u,longPollingKey:s,startSeq:c,avChatRoomKey:l,messageList:d})):(we.e("".concat(o," failed. error:"),e),Cn(e))}));default:var f=new Gn({code:Un.JOIN_GRP_FAIL});return we.e("".concat(o," failed. error:"),f),Cn(f)}})).catch((function(e){return r.setMessage("groupID:".concat(i)).setError(e).end(),we.e("".concat(o," failed. error:"),e),Cn(e)}))}},{key:"_handleJoinResult",value:function(e){var t=this,n=e.group,o=e.avChatRoomFlag,i=e.longPollingKey,r=e.startSeq,a=e.avChatRoomKey,s=e.messageList,c=n.groupID;return 1===o?(this.get(11).setCompleted("".concat(k.CONV_GROUP).concat(c)),this._groupAttributesHandler.initGroupAttributesCache({groupID:c,avChatRoomKey:a}),this._groupCountersHandler.initGroupCountersCache({groupID:c,avChatRoomKey:a}),(e=dt(i)?this._AVChatRoomHandler.handleJoinResult({group:n}):this._AVChatRoomHandler.startRunLoop({group:n,longPollingKey:i,startSeq:r})).then((function(){t._onAVChatRoomHistoryMessage(s,c)})),e):(this.emitGroupListUpdate(!0,!1),Mn({status:qe,group:n}))}},{key:"quitGroup",value:function(e){var t=this,n="".concat(this._n,".").concat("quitGroup"),o="groupID:".concat(e),i=(we.l("".concat(n," ").concat(o)),this.checkJoinedAVChatRoomByID(e));if(!i&&!this.hasLocalGroup(e))return Cn({code:Un.MEMBER_NOT_IN_GRP});if(i&&!this.isLoggedIn())return we.l("".concat(n," anonymously ok. ").concat(o)),this.deleteLocalGroupAndConversation(e),this._AVChatRoomHandler.reset(e),In({groupID:e});var r=new eo("quitGroup");return r.setMessage(o),this.req({P:Fn.QUIT_GRP,data:{groupID:e}}).then((function(){return r.end(),we.l("".concat(n," ok")),t.deleteLocalGroupAndConversation(e),i&&t._AVChatRoomHandler.reset(e),t._groupAttributesHandler.deleteLocalGroupAttributes(e),Mn({groupID:e})})).catch((function(e){return r.setError(e).end(),we.e("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"searchGroupByID",value:function(e){var t="".concat(this._n,".").concat("searchGroupByID"),n={groupIDList:[e]},o=new eo("searchGroupByID");return o.setMessage("groupID:".concat(e)),we.l("".concat(t," groupID:").concat(e)),this.req({P:Fn.SEARCH_GRP,data:n}).then((function(e){if(e=e.data.groupProfile,0!==e[0].errorCode)throw new Gn({code:e[0].errorCode,message:e[0].errorInfo});return o.end(),we.l("".concat(t," ok")),Mn({group:new ri(e[0])})})).catch((function(e){return o.setError(e).end(),we.w("".concat(t," failed. error:"),e),Cn(e)}))}},{key:"changeGroupOwner",value:function(e){var t=this,n="".concat(this._n,".").concat("changeGroupOwner");if(this.hasLocalGroup(e.groupID)&&this.getLocalGroupProfile(e.groupID).type===k.GRP_AVCHATROOM)return Cn({code:Un.CANNOT_CHANGE_OWNER_IN_AV});if(e.newOwnerID===this.getMyUserID())return Cn({code:Un.CANNOT_CHANGE_OWNER_TO_SELF});var o=new eo("changeGroupOwner");return o.setMessage("groupID:".concat(e.groupID," newOwnerID:").concat(e.newOwnerID)),we.l("".concat(n," groupID:").concat(e.groupID)),this.req({P:Fn.CHANGE_GRP_OWNER,data:e}).then((function(){o.end(),we.l("".concat(n," ok"));var i,r=e.groupID,a=e.newOwnerID,s=(t.groupMap.get(r).ownerID=a,t._groupMemberHandler.getLocalGroupMemberList(r));return s instanceof Map&&(i=s.get(t.getMyUserID()),dt(i)||(i.updateRole("Member"),t.groupMap.get(r).selfInfo.role="Member"),i=s.get(a),dt(i)||i.updateRole("Owner")),t.emitGroupListUpdate(!0,!1),Mn({group:t.groupMap.get(r)})})).catch((function(e){return o.setError(e).end(),we.e("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"getGroupApplicationList",value:function(){return this._groupSystemNoticeHandler.getGroupApplicationList()}},{key:"handleGroupApplication",value:function(e){var t,n,o,i,r,a=this,s="".concat(this._n,".").concat("handleGroupApplication"),c=e.handleAction,u=e.handleMessage,l=e.message,d=e.application,f=(l?(t=l.payload.operatorID,n=l.payload.groupProfile.groupID,o=l.payload.authentication,i=l.payload.messageKey):d&&(t=d.applicant,n=d.groupID,o=d.authentication,i=d.messageKey),Fn.HANDLE_GRP_APPLICATION),p=(d&&2===d.applicationType&&(f=Fn.HANDLE_INVITE_JOIN_GRP,r=d.userID),new eo("handleGroupApplication"));return p.setMessage("groupID:".concat(n)),we.l("".concat(s," groupID:").concat(n)),this.req({P:f,data:{handleAction:c,handleMessage:u,applicant:t,invitee:r,groupID:n,authentication:o,messageKey:i}}).then((function(){return p.end(),we.l("".concat(s," ok")),l&&a._groupSystemNoticeHandler.deleteGroupSystemNotice({messageList:[e.message]}),Mn({group:a.getLocalGroupProfile(n)})})).catch((function(e){return p.setError(e).end(),we.e("".concat(s," failed. error"),e),Cn(e)}))}},{key:"handleGroupInvitation",value:function(e){var n=this,o="".concat(this._n,".").concat("handleGroupInvitation"),i=e.message.payload,r=i.groupProfile.groupID,a=i.authentication,s=i.messageKey,c=(i=i.operatorID,e.handleAction),u=new eo("handleGroupInvitation");return u.setMessage("groupID:".concat(r," inviter:").concat(i," handleAction:").concat(c)),we.l("".concat(o," groupID:").concat(r," inviter:").concat(i," handleAction:").concat(c)),this.req({P:Fn.HANDLE_GRP_INVITATION,data:t(t({},e),{},{inviter:i,groupID:r,authentication:a,messageKey:s})}).then((function(){return u.end(),we.l("".concat(o," ok")),n._groupSystemNoticeHandler.deleteGroupSystemNotice({messageList:[e.message]}),Mn({group:n.getLocalGroupProfile(r)})})).catch((function(e){return u.setError(e).end(),we.e("".concat(o," failed. error"),e),Cn(e)}))}},{key:"getGroupOnlineMemberCount",value:function(e){var t=this,n="".concat(this._n,".getGroupOnlineMemberCount"),o=this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e),i=this.hasLocalGroup(e);if(we.l("".concat(n," groupID:").concat(e," isAVChatRoom:").concat(o," has:").concat(i)),o)return this._AVChatRoomHandler.getGroupOnlineMemberCount(e);if(!i)return In({memberCount:0});if(o=Date.now(),this._onlineMemberCountMap.has(e)){if(i=this._onlineMemberCountMap.get(e),o-i.lastReqTime<=6e4)return In({memberCount:i.memberCount});i.lastReqTime=o}return this.requestOnlineCount(e).then((function(o){return o=o.data.memberCount,o=void 0===o?0:o,t._onlineMemberCountMap.set(e,{lastReqTime:Date.now(),memberCount:o}),we.l("".concat(n," ok. groupID:").concat(e," memberCount:").concat(o)),In({memberCount:o})})).catch((function(e){return we.w("".concat(n," failed. error:"),e),Promise.reject(e)}))}},{key:"requestOnlineCount",value:function(e){return this.req({P:Fn.GET_ONLINE_MBR_NUM,data:{groupID:e}})}},{key:"hasLocalGroup",value:function(e){return this.groupMap.has(e)}},{key:"deleteLocalGroupAndConversation",value:function(e){var t,n=this.checkJoinedAVChatRoomByID(e),o=(we.l("".concat(this._n,".deleteLocalGroupAndConversation groupID:").concat(e," isJoinedAVChatRoom:").concat(n)),this.get(11)),i="".concat(k.CONV_GROUP).concat(e);n&&o.deleteLocalConv(i),bt({groupID:e})&&(t=this.getLocalGroupProfile(e))&&!0===t.isSupportTopic&&this.get(10).deleteTopicListInCommunity(e),o.clearUnreadCount(i),o.setCompleted(i),this._deleteLocalGroup(e),this._onlineMemberCountMap.delete(e),this.emitGroupListUpdate(!0,!1)}},{key:"_deleteLocalGroup",value:function(e){this.groupMap.delete(e),this._groupMemberHandler.deleteGroupMemberList(e)}},{key:"sendMessage",value:function(e,t){return Xe(e._receiverList)&&0<e._receiverList.length&&!this.canIUse(U.MSG_TO_SPECIFIED_GRP_MBR)?this.noUse("Targeted Group Message"):(e=this.createGroupMessagePack(e,t),this.req(e))}},{key:"createGroupMessagePack",value:function(e,t){var n=null,o=(t&&t.offlinePushInfo&&(n=t.offlinePushInfo),""),i=(lt(e.cloudCustomData)&&0<e.cloudCustomData.length&&(o=e.cloudCustomData),[]),r=void($e(t)&&$e(t.messageControlInfo)&&(r=(s=t.messageControlInfo).excludedFromUnreadCount,a=s.excludedFromLastMessage,s=s.excludedFromContentModeration,!0===r&&i.push("NoUnread"),!0===a&&i.push("NoLastMsg"),!0===s&&i.push("NoMsgCheck"))),a=(Xe(e._receiverList)&&0<e._receiverList.length&&(r=e._receiverList,50<e._receiverList.length&&(r=e._receiverList.slice(0,50),this.warn("ReceiverListLimit"))),this.isOnlineMessage(e,t)?1:0),s=JSON.parse(JSON.stringify(e.getElements())),c=(t=this.get(17).getFileDNList(),e.getGroupAtInfoList());s={fromAccount:this.getMyUserID(),groupID:e.to,msgBody:so(e.type,s,t),cloudCustomData:o,random:e.random,priority:e.priority,clientSequence:e.clientSequence,groupAtInfo:e.type!==k.MSG_TEXT||je(c)?void 0:c,onlineOnlyFlag:a,clientTime:e.clientTime,offlinePushInfo:xo(n),messageControlInfo:0==a?i:void 0,needReadReceipt:!0!==e.needReadReceipt||this.isMessageFromOrToAVChatroom(e.to)?0:1,receiverList:r,isSupportExtension:!0===e.isSupportExtension?1:0,isRelayMessage:!0===e._relayFlag?1:0,cmConfigID:e._cmConfigID};return Tt(e.to)&&(s.groupID=Ft(e.to),s.topicID=e.to),{P:Fn.SEND_GRP_MSG,tjgID:this.generateTjgID(e),data:s}}},{key:"revokeMessage",value:function(e){var t={groupID:e.to,msgSeqList:[{msgSeq:e.sequence}]};return Tt(e.to)&&(t.groupID=Ft(e.to),t.topicID=e.to),this.req({P:Fn.REVOKE_GRP_MSG,data:t})}},{key:"deleteMessage",value:function(e){var t=e.to;e=e.keyList,we.l("".concat(this._n,".deleteMessage groupID:").concat(t," count:").concat(e.length)),e={groupID:t,deleter:this.getMyUserID(),keyList:e};return Tt(t)&&(e.groupID=Ft(t),e.topicID=t),this.req({P:Fn.DEL_GRP_MSG,data:e})}},{key:"modifyRemoteMessage",value:function(e){var t=e.to,n=e.sequence,o=e.payload,i=e.type,r=e.version,a=(r=void 0===r?0:r,e=e.cloudCustomData,t),s=void 0;t=void(Tt(t)&&(a=Ft(t),s=t));return Bt(i)&&(t=[]).push({type:i,content:o}),this.req({P:Fn.MODIFY_GRP_MSG,data:{groupID:a,topicID:s,sequence:n,version:r,elements:t,cloudCustomData:e}})}},{key:"getRoamingMessage",value:function(e){var t=this,n="".concat(this._n,".").concat("getRoamingMessage"),o=e.conversationID,i=e.groupID,r=(e=e.sequence,new eo("getRoamingMessage")),a=0,s=void 0;return Tt(i)&&(i=Ft(s=i)),this._computeLastSequence({groupID:i,topicID:s,sequence:e}).then((function(e){return a=e,we.l("".concat(n," groupID:").concat(i," startSequence:").concat(a)),t.req({P:Fn.GET_GRP_ROAMING_MSG,data:{groupID:i,count:21,sequence:a,topicID:s}})})).then((function(e){var c=e.data,u=c.messageList,l=c.complete,d=(c=c.invisibleSequenceList,c=void 0===c?[]:c,e=e.data.nextSequence,e=void 0===e?0:e,dt(u)?we.l("".concat(n," ok. complete:").concat(l," nextSequence:").concat(e," but messageList is undefined!")):we.l("".concat(n," ok. complete:").concat(l," nextSequence:").concat(e," count:").concat(u.length)),r.setMessage("groupID:".concat(i," topicID:").concat(s," startSequence:").concat(a," complete:").concat(l," nextSequence:").concat(e)).end(),t.get(11)),f=[],p=[];je(u)||(f=d.onRoamingMessage(u,o,!0,p),d.updateIsRead(o),d.patchConvLastMessage(o)),u=2===l||e<1;return u&&(d.setCompleted(o),e=""),we.l("".concat(n," isPullingCompleted:").concat(u," nextReqID:").concat(e," storedMsgCount:").concat(f.length)+" invisibleSeqCount:".concat(c.length)),{nextReqID:e+"",storedMessageList:f,assembledMessageList:p,isPullingCompleted:u}})).catch((function(e){return r.setError(e).setMessage("groupID:".concat(i," topicID:").concat(s," startSequence:").concat(a)).end(),we.w("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"_getGroupIDOfMessage",value:function(e){return e.conversationID.replace(k.CONV_GROUP,"")}},{key:"getReadReceiptList",value:function(e){var t="".concat(this._n,".").concat("getReadReceiptList"),n=this._getGroupIDOfMessage(e[0]),o=this.getMyUserID(),i=e.filter((function(e){return e.from===o&&!0===e.needReadReceipt})).map((function(e){return{sequence:e.sequence}}));if(we.l("".concat(t," groupID:").concat(n," sequenceList:").concat(JSON.stringify(i))),0===i.length)return In({messageList:e});var r=new eo("getReadReceiptList");return r.setMessage("groupID:".concat(n)),this.req({P:Fn.GET_READ_RECEIPT,data:{groupID:n,sequenceList:i}}).then((function(n){return r.end(),we.l("".concat(t," ok")),n=n.data.readReceiptList,Xe(n)&&n.forEach((function(t){e.forEach((function(e){0===t.code&&t.sequence===e.sequence&&(e.readReceiptInfo.readCount=t.readCount,e.readReceiptInfo.unreadCount=t.unreadCount)}))})),Mn({messageList:e})})).catch((function(e){return r.setError(e).end(),we.w("".concat(t," failed. error:"),e),Cn(e)}))}},{key:"sendReadReceipt",value:function(e){var t="".concat(this._n,".").concat("sendReadReceipt"),n=this._getGroupIDOfMessage(e[0]),o=new eo("sendReadReceipt"),i=(o.setMessage("groupID:".concat(n)),this.getMyUserID());e=e.filter((function(e){return e.from!==i&&!0===e.needReadReceipt})).map((function(e){return{sequence:e.sequence}}));return 0===e.length?Cn({code:Un.READ_RECEIPT_MSG_LIST_EMPTY}):(we.l("".concat(t,". sequenceList:").concat(JSON.stringify(e))),this.req({P:Fn.SEND_READ_RECEIPT,data:{groupID:n,sequenceList:e}}).then((function(e){return o.end(),we.l("".concat(t," ok")),Mn()})).catch((function(e){return o.setError(e).end(),we.w("".concat(t," failed. error:"),e),Cn(e)})))}},{key:"getReadReceiptDetail",value:function(e){var t=this,n=e.message,o=e.filter,i=e.cursor,r=(e=e.count,this._getGroupIDOfMessage(n)),a=n.ID,s=(n=n.sequence,"".concat(this._n,".").concat("getReadReceiptDetail")),c=this._receiptDetailCompleteMap.get(a)||!1,u=0!==o&&1!==o?0:o,l=(o=lt(i)?i:"",i=!Ye(e)||e<=0||100<=e?100:e,e="groupID:".concat(r," sequence:").concat(n," cursor:").concat(o," filter:").concat(u," completeFlag:").concat(c),we.l("".concat(s," ").concat(e)),{cursor:"",isCompleted:!1,messageID:a,unreadUserIDList:[],readUserIDList:[]}),d=new eo("getReadReceiptDetail");return d.setMessage(e),this.req({P:Fn.GET_READ_RECEIPT_DETAIL,data:{groupID:r,sequence:n,flag:u,cursor:o,count:i}}).then((function(e){d.end();e=e.data;var n=e.cursor,o=e.isCompleted,i=e.unreadUserIDList;e=e.readUserIDList;return l.cursor=n,1===o&&(l.isCompleted=!0,t._receiptDetailCompleteMap.set(a,!0)),0===u?l.readUserIDList=e.map((function(e){return e.userID})):1===u&&(l.unreadUserIDList=i.map((function(e){return e.userID}))),we.l("".concat(s," ok")),Mn(l)})).catch((function(e){return d.setError(e).end(),we.w("".concat(s," failed. error:"),e),Cn(e)}))}},{key:"getRoamingMessagesHopping",value:function(e){var t=this,n="".concat(this._n,".").concat("getRoamingMessagesHopping"),o=e.groupID,i=e.count,r=e.sequence,a=e.direction,s=void 0;return dt(r)&&1===a?In({messageList:[],isCompleted:!0,nextMessageSeq:""}):(Tt(o)&&(o=Ft(s=o)),this._computeReqSeqHopping({groupID:o,topicID:s,sequence:r}).then((function(c){dt(r)||1!==a||(c=r+i-1);var u="".concat(s?"topicID:".concat(s):"groupID:".concat(o)," sequence:").concat(r," reqSeq:").concat(c," direction:").concat(a),l=(we.l("".concat(n," ").concat(u)),new eo("getRoamingMessagesHopping"));return t.req({P:Fn.GET_GRP_ROAMING_MSG,data:{groupID:o,topicID:s,count:i,sequence:c}}).then((function(o){o=o.data;var i=o.messageList,s=(i=void 0===i?[]:i,o.complete),c=o.nextSequence,d=(c=void 0===c?0:c,o=o.invisibleSequenceList,o=void 0===o?[]:o,"complete:".concat(s," nextSequence:").concat(c," remoteMsgCount:").concat(i.length," invisibleSequenceList:").concat(o)),f=(d=(l.setMessage("".concat(u," ").concat(d)).end(),we.l("".concat(n," ok. ").concat(d)),"".concat(k.CONV_GROUP).concat(e.groupID)),t.get(11));d=f.onRoamingMessage(i,d,!1),i=t._computeResult({groupID:e.groupID,direction:a,sequence:r,remoteMessageList:i,processedMessageList:d,complete:s,nextSequence:c,invisibleSequenceList:o});return f.storeHoppingMessageList(i.messageList),Mn(i)})).catch((function(e){return l.setError(e).setMessage("groupID:".concat(o," sequence:").concat(r," count:").concat(i)).end(),we.w("".concat(n," failed. error:"),e),Cn(e)}))})))}},{key:"_computeReqSeqHopping",value:function(e){var t=this,n=e.groupID,o=e.topicID;o=void 0===o?void 0:o,e=e.sequence,e=void 0===e?void 0:e;return 0<e?Promise.resolve(e):dt(o)?this.getGroupProfileAdvance({groupIDList:[n],responseFilter:{groupBaseInfoFilter:["NextMsgSeq"]}}).then((function(e){e=e.data.successGroupList;var o=0;return je(e)||(o=e[0].nextMessageSeq-1),we.l("".concat(t._n,"._computeReqSeqHopping groupID:").concat(n," lastSequence:").concat(o," from remote")),o})).catch((function(e){return Cn(e)})):Promise.resolve(0)}},{key:"_computeResult",value:function(e){var t={messageList:[],isCompleted:!1,nextMessageSeq:""},n=e.groupID,o=e.direction,i=e.sequence,r=e.remoteMessageList,a=(r=void 0===r?[]:r,e.processedMessageList),s=(a=void 0===a?[]:a,e.complete),c=e.nextSequence;e=e.invisibleSequenceList;if(0===o)return t.nextMessageSeq=c,(2===s||c<1)&&(t.isCompleted=!0,t.nextMessageSeq=""),t.messageList=a,t;if(1===o){if(je(r)){if(je(e))return t.isCompleted=!0,t.nextMessageSeq="",t;t.nextMessageSeq=e[0]+1}else s=r[0].sequence,c=e[0]||0,t.nextMessageSeq=c<s?s+1:c+1;return a.forEach((function(e){e.sequence>=i&&t.messageList.push(e)})),(bt({groupID:n})||Tt(n))&&0===t.messageList.length&&r[0].sequence<i&&(t.isCompleted=!0,t.nextMessageSeq=""),t}}},{key:"setMessageRead",value:function(e){var t=this,n=e.conversationID,o=e.lastMessageSeq,i="".concat(this._n,".").concat("setMessageRead"),r=(e="convID:".concat(n," lastMessageSeq:").concat(o),we.l("".concat(i," ").concat(e)),Ye(o)||this.warn("DoNotModifyLastSeq"),new eo("setMessageRead")),a=(r.setMessage(e),n.replace(k.CONV_GROUP,"")),s=void 0;return Tt(a)&&(a=Ft(s=a)),this.req({P:Fn.SET_GRP_MSG_READ,data:{groupID:a,topicID:s,messageReadSeq:o}}).then((function(){r.end(),we.l("".concat(i," ok"));var e,c=t.get(11),u=(c.updateIsReadAfterReadReport({conversationID:n,lastMessageSeq:o}),!0);return dt(s)||(u=!1,(e=t.get(10).getLocalTopic(a,s))&&e.updateSelfInfo({readedSequence:o})),c.updateUnreadCount(n,u),Mn()})).catch((function(e){return r.setError(e).end(),we.l("".concat(i," failed. error:"),e),Cn(e)}))}},{key:"_computeLastSequence",value:function(e){var t=e.groupID,n=e.topicID;n=void 0===n?void 0:n,e=e.sequence;return 0<e?Promise.resolve(e):dt(n)?this.getGroupLastSequence(t):Promise.resolve(0)}},{key:"getGroupLastSequence",value:function(e){var t="".concat(this._n,".").concat("getGroupLastSequence"),n=new eo("getGroupLastSequence"),o=0,i="",r="groupID:".concat(e);if(this.hasLocalGroup(e)){var a=this.getLocalGroupProfile(e),s=a.lastMessage;if(0<s.lastSequence&&!1===s.onlineOnlyFlag)return o=s.lastSequence,i="".concat(r,", ").concat(o," from group.lastMessage.lastSequence"),we.l("".concat(t," ").concat(i)),n.setMessage(i).end(),Promise.resolve(o);if(1<a.nextMessageSeq)return o=a.nextMessageSeq-1,i="".concat(r,", ").concat(o," from group.nextMessageSeq"),we.l("".concat(t," ").concat(i)),n.setMessage(i).end(),Promise.resolve(o)}return s=this.get(11).getLocalConversation("GROUP".concat(e)),s&&s.lastMessage.lastSequence&&!1===s.lastMessage.onlineOnlyFlag?(o=s.lastMessage.lastSequence,i="".concat(r,", ").concat(o," from conversation.lastMessage.lastSequence"),we.l("".concat(t," ").concat(i)),n.setMessage(i).end(),Promise.resolve(o)):this.getGroupProfileAdvance({groupIDList:[e],responseFilter:{groupBaseInfoFilter:["NextMsgSeq"]}}).then((function(e){return e=e.data.successGroupList,je(e)?we.w("".concat(t," ").concat(r,", empty successGroupList")):(o=e[0].nextMessageSeq-1,i="".concat(r,", ").concat(o," from remote"),we.l("".concat(t," ").concat(i))),n.setMessage(i).end(),o})).catch((function(e){return n.setError(e).setMessage(r).end(),we.w("".concat(t," failed. error:"),e),Cn(e)}))}},{key:"isMessageFromOrToAVChatroom",value:function(e){return this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)}},{key:"hasJoinedAVChatRoom",value:function(){return this._AVChatRoomHandler.hasJoinedAVChatRoom()}},{key:"getJoinedAVChatRoom",value:function(){return this._AVChatRoomHandler.getJoinedAVChatRoom()}},{key:"getGroupRemoteLastSeq",value:function(e){return e=this.getLocalGroupProfile(e),e?e.nextMessageSeq-1:1}},{key:"isOnlineMessage",value:function(e,t){return!(!this._canIUseOnlineOnlyFlag(e)||!t||!0!==t.onlineUserOnly)}},{key:"_canIUseOnlineOnlyFlag",value:function(e){var t=this.getJoinedAVChatRoom();return!t||!t.includes(e.to)||e.conversationType!==k.CONV_GROUP}},{key:"_onAVChatRoomHistoryMessage",value:function(e,n){var o;je(e)||(we.l("".concat(this._n,"._onAVChatRoomHistoryMessage groupID:").concat(n," count:").concat(e.length)),o=[],e.forEach((function(e){o.push(t(t({},e),{},{isHistoryMessage:1}))})),this.onAVChatRoomMessage(o,n))}},{key:"onAVChatRoomMessage",value:function(e){this._AVChatRoomHandler.onMessage(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:"")}},{key:"onAVChatRoomMemberBanned",value:function(e){this._AVChatRoomHandler.onAVChatRoomMemberBanned(e)}},{key:"getGroupSimplifiedInfo",value:function(e){var t=new eo("getGroupSimplifiedInfo");return this.getGroupProfileAdvance({groupIDList:[e],responseFilter:{groupBaseInfoFilter:["Type","Name"]}}).then((function(n){return n=n.data.successGroupList,t.setMessage("groupID:".concat(e," type:").concat(n[0].type)).end(),n[0]})).catch((function(n){t.setError(n).setMessage("groupID:".concat(e)).end()}))}},{key:"setUnjoinedAVChatRoom",value:function(e){this._unjoinedAVChatRoomList.set(e,1)}},{key:"deleteUnjoinedAVChatRoom",value:function(e){this._unjoinedAVChatRoomList.has(e)&&this._unjoinedAVChatRoomList.delete(e)}},{key:"isUnjoinedAVChatRoom",value:function(e){return this._unjoinedAVChatRoomList.has(e)}},{key:"isGroupAttributesUpdatedNotice",value:function(e){return this._groupAttributesHandler.isGroupAttributesUpdatedNotice(e)}},{key:"updateLocalMainSequenceOnReconnected",value:function(){this._groupAttributesHandler.updateLocalMainSequenceOnReconnected()}},{key:"initGroupAttributes",value:function(e){return this._groupAttributesHandler.initGroupAttributes(e)}},{key:"setGroupAttributes",value:function(e){return this._groupAttributesHandler.setGroupAttributes(e)}},{key:"deleteGroupAttributes",value:function(e){return this._groupAttributesHandler.deleteGroupAttributes(e)}},{key:"getGroupAttributes",value:function(e){return this._groupAttributesHandler.getGroupAttributes(e)}},{key:"isMessageFromTopic",value:function(e,t){return 2===e&&!je(t)}},{key:"isMessageFromCommunityOfTopic",value:function(e,t){return 2===e&&je(t)}},{key:"getMessageExtensions",value:function(e,t){return we.l("".concat(this._n,".getMessageExtensions startSequence:").concat(t)),this.req({P:Fn.GET_GRP_MSG_EXT,data:{groupID:e.to,messageSequence:e.sequence,startSequence:t}})}},{key:"modifyMsgExts",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return we.l("".concat(this._n,".modifyMsgExts operateType:").concat(n)),this.req({P:Fn.MODIFY_GRP_MSG_EXT,data:{groupID:e.to,messageSequence:e.sequence,extensionList:t,operateType:n}})}},{key:"_genNotifyReqList",value:function(e){for(var t,n,o,i,r=[],a=0,s=e.length;a<s;a++)t=e[a],i=this.getLocalGroupProfile(t).type,n=this._getGroupLastRevokedTime(t),o=1e3*Ae(),i={notifyType:1,limit:20,type:bt({type:i,groupID:t})?k.GRP_COMMUNITY:void 0,groupID:t,beginTime:n,endTime:o},r.push(i);return r}},{key:"getNotice",value:function(e){var t=this,n="".concat(this._n,".getNotice");e=e.filter((function(e){if(!t.hasLocalGroup(e))return!1;e=t.getLocalGroupProfile(e);var n=e.type;e=e.isSupportTopic;return!Ct(n)&&!e}));0!==e.length&&(we.l("".concat(n," list:").concat(e)),this.req({P:Fn.GET_GRP_NOTIFY,data:{notifyReqList:this._genNotifyReqList(e)}}).then((function(e){e=e.data.notifyRspList;var o,i,r=[];Xe(e)&&(o={dataList:[]},i="".concat(n," ok."),e.forEach((function(e){var n=e.nextRevokedTime,a=e.groupID,s=e.notifyList;i+=" groupID:".concat(a," nextRevokedTime:").concat(n," count:").concat(s.length,"\n"),o.dataList.push({elements:{revokedInfos:t._genRevokedInfos(e)}}),0!==n?(t._setGroupLastRevokedTime(a,n),r.push(a)):t._setGroupLastRevokedTime(a,1e3*Ae())})),we.l(i),t.onMsgRevoked(o,!1)),0<r.length&&t.getNotice(r)})).catch((function(e){we.e("".concat(n," failed. error:"),e)})))}},{key:"_genRevokedInfos",value:function(e){var n=e.notifyList,o=e.groupID,i=[];return Xe(n)&&n.forEach((function(e){i.push({groupID:o,sequence:e.sequence,random:e.random,revokerInfo:t({},e.revokerInfo)})})),i}},{key:"_getGroupLastRevokedTime",value:function(e){return this.hasLocalGroup(e)?this.getLocalGroupProfile(e)._lastRevokedTime:0}},{key:"_setGroupLastRevokedTime",value:function(e,t){this.hasLocalGroup(e)&&(this.getLocalGroupProfile(e)._lastRevokedTime=t)}},{key:"isGroupCountersNotice",value:function(e){return this._groupCountersHandler.isGroupCountersNotice(e)}},{key:"setGroupCounters",value:function(e){return this._groupCountersHandler.setGroupCounters(e)}},{key:"increaseGroupCounter",value:function(e){return this._groupCountersHandler.increaseGroupCounter(e)}},{key:"decreaseGroupCounter",value:function(e){return this._groupCountersHandler.decreaseGroupCounter(e)}},{key:"getGroupCounters",value:function(e){return this._groupCountersHandler.getGroupCounters(e)}},{key:"getGroupMemberHandler",value:function(){return this._groupMemberHandler}},{key:"getGroupMemberList",value:function(e){return this._groupMemberHandler.getGroupMemberList(e)}},{key:"getGroupMemberProfile",value:function(e){return this._groupMemberHandler.getGroupMemberProfile(e)}},{key:"addGroupMember",value:function(e){return this._groupMemberHandler.addGroupMember(e)}},{key:"deleteGroupMember",value:function(e){return this._groupMemberHandler.deleteGroupMember(e)}},{key:"setGroupMemberMuteTime",value:function(e){return this._groupMemberHandler.setGroupMemberMuteTime(e)}},{key:"setGroupMemberRole",value:function(e){return this._groupMemberHandler.setGroupMemberRole(e)}},{key:"setGroupMemberNameCard",value:function(e){return this._groupMemberHandler.setGroupMemberNameCard(e)}},{key:"setGroupMemberCustomField",value:function(e){return this._groupMemberHandler.setGroupMemberCustomField(e)}},{key:"markGroupMemberList",value:function(e){return this._groupMemberHandler.markGroupMemberList(e)}},{key:"modifyGroupMemberInfo",value:function(e){return this._groupMemberHandler.modifyGroupMemberInfo(e)}},{key:"restartPolling",value:function(){this._AVChatRoomHandler.restartPolling()}},{key:"getPollingTimerID",value:function(e){if(!e)return-1;var t=this.getLocalGroupProfile(e);return t&&Ct(t.type)?this._AVChatRoomHandler.getPollingTimerID(e):-1}},{key:"_canIUseJoinOption",value:function(e){return e===k.GRP_PUBLIC||bt({type:e})}},{key:"_silentlyGetGroupProfile",value:function(e,t){var n=setTimeout(this.getGroupProfile.bind(this,{groupID:t}),3e3);this._timeoutIDs.push(n),we.l("".concat(this._n,"._silentlyGetGroupProfile errorCode:").concat(e," groupID:").concat(t," timeoutIDs:").concat(this._timeoutIDs))}},{key:"_clearTimeoutIDs",value:function(){this._timeoutIDs.forEach((function(e){clearTimeout(e)})),this._timeoutIDs=[]}},{key:"startMessageLongPolling",value:function(e){var t=e.groupID,n=e.longPollingKey,o=(e=e.longPollingSequence,e=void 0===e?1:e,this.get(12).isUnlimitedAVChatRoom()),i=(this._AVChatRoomHandler.hasPollingInstance(t)&&this.stopMessageLongPolling({groupID:t}),this._AVChatRoomHandler.getJoinedLiveList());!o&&0<i.length&&this.stopMessageLongPolling({groupID:i[0]}),o=new ri({groupID:t,type:k.GRP_LIVE});return we.l("".concat(this._n,".startMessageLongPolling groupID:").concat(t," longPollingKey:").concat(n," longPollingSequence:").concat(e)),this._AVChatRoomHandler.startRunLoop({group:o,longPollingKey:n,startSeq:e})}},{key:"stopMessageLongPolling",value:function(e){e=e.groupID;var t=this.get(11);return this._AVChatRoomHandler.reset(e),this._deleteLocalGroup(e),t.deleteLocalConv("".concat(k.CONV_GROUP).concat(e)),we.l("".concat(this._n,".stopMessageLongPolling ok, groupID:").concat(e)),In({groupID:e})}},{key:"reset",value:function(){this.groupMap.clear(),this._unjoinedAVChatRoomList.clear(),this._receiptDetailCompleteMap.clear(),this._onlineMemberCountMap.clear(),this._commonGroupHandler.reset(),this._groupSystemNoticeHandler.reset(),this._groupTipsHandler.reset(),this._groupAttributesHandler.reset(),this._groupCountersHandler.reset(),this._AVChatRoomHandler.reset(),this._groupMemberHandler.reset(),this._clearTimeoutIDs()}}]),Hi),Ti=["topicID","topicName","avatar","introduction","notification","unreadCount","muteAllMembers","customData","groupAtInfoList","nextMessageSeq","selfInfo"],Si=(c(Vi,[{key:"_initTopic",value:function(e){for(var t in e)Ti.indexOf(t)<0||("selfInfo"===t?this.updateSelfInfo(e[t]):this[t]="muteAllMembers"===t?1===e[t]:e[t])}},{key:"updateUnreadCount",value:function(){this.unreadCount=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0}},{key:"updateNextMessageSeq",value:function(e){this.nextMessageSeq=e}},{key:"updateLastMessage",value:function(e){this.lastMessage=Yo(e)}},{key:"updateGroupAtInfoList",value:function(e){this.groupAtInfoList=JSON.parse(JSON.stringify(e))}},{key:"updateTopic",value:function(e){dt(e.selfInfo)||this.updateSelfInfo(e.selfInfo),dt(e.muteAllMembers)||(this.muteAllMembers=1===e.muteAllMembers),et(this,e,["groupID","lastMessageTime","selfInfo","muteAllMembers","lastMsg"])}},{key:"updateSelfInfo",value:function(e){return 0===et(this.selfInfo,e,[],[""])}},{key:"reduceUnreadCount",value:function(){return 1<=this.unreadCount&&(--this.unreadCount,!0)}},{key:"isLastMessageRevoked",value:function(e){return e.sequence===this.lastMessage.lastSequence}},{key:"setLastMessageRevoked",value:function(e){this.lastMessage.isRevoked=e}},{key:"setLastMessageRevoker",value:function(e){this.lastMessage.revoker=e}}]),Vi),Ei=(l(Bi,Rn),Jo=v(Bi),c(Bi,[{key:"_onCloudConfig",value:function(){var e=this.getCloudConfig("topic_cache_time"),t=this.getCloudConfig("topic_last_active_time");dt(e)||(this.TOPIC_CACHE_TIME=Number(e)),dt(t)||(this.TOPIC_LAST_ACTIVE_TIME=Number(t))}},{key:"onTopicCreated",value:function(e){var t=e.groupID;this.resetGetTopicTime(t),this.emitOEvt(E.TOPIC_CREATED,e)}},{key:"onTopicDeleted",value:function(e){var t=this,n=e.groupID,o=e.topicIDList;(void 0===o?[]:o).forEach((function(e){t._deleteLocalTopic(n,e)})),this.emitOEvt(E.TOPIC_DELETED,e)}},{key:"onTopicProfileUpdated",value:function(e){var t=e.groupID,n=e.topicID;n=this.getLocalTopic(t,n);n&&(n.updateTopic(e),this.emitOEvt(E.TOPIC_UPDATED,{groupID:t,topic:n}))}},{key:"onTopicLatestMsg",value:function(e){e=e||{};var t,n,o=e.topicLatestMessage;e=e.excludedUnreadSequenceList;je(o)||(t=o.groupProfile.topicID,o.conversationType=k.CONV_GROUP,o.to=t,(n=new So(o)).setElement(o.elements),this.updateUnreadCountAndLastMsg(t,n,e))}},{key:"onMessageRemindTypeUpdated",value:function(e){var t,n=e.groupID,o=e.topicID,i=(e=e.messageRemindType,this.getLocalTopic(n,o));i&&((t=i.updateSelfInfo({messageRemindType:e}))&&this.emitOEvt(E.TOPIC_UPDATED,{groupID:n,topic:i}),we.l("".concat(this._n,".onMessageRemindTypeUpdated topicID:").concat(o," messageRemindType:").concat(e," isUpdated:").concat(t)))}},{key:"onAtInfoUpdated",value:function(e){var t=e.topicID,n=(e=e.groupAtInfoList,Ft(t));t=this.getLocalTopic(n,t);t&&!dt(e)&&(t.updateGroupAtInfoList(e),this.emitOEvt(E.TOPIC_UPDATED,{groupID:n,topic:t}))}},{key:"onUnreadCountUpdatedFromConv",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=Ft(e);e=this.getLocalTopic(n,e);e&&e.unreadCount!==t&&(e.updateUnreadCount(t),0===t&&e.updateSelfInfo({readedSequence:e.lastMessage.lastSequence}),this.emitOEvt(E.TOPIC_UPDATED,{groupID:n,topic:e}))}},{key:"onMessageSent",value:function(e){var t,n,o=e.groupID,i=e.topicID;e=e.lastMessage,i=this.getLocalTopic(o,i);!i||(n=(t=void 0===(t=e.sequence)?0:t)+1)>i.nextMessageSeq&&(i.updateNextMessageSeq(n),i.updateLastMessage(e),i.updateSelfInfo({readedSequence:t}),i.updateUnreadCount(0),this.emitOEvt(E.TOPIC_UPDATED,{groupID:o,topic:i}))}},{key:"onMessageModified",value:function(e){var t,n=e.to,o=e.time,i=e.sequence,r=e.elements,a=e.cloudCustomData,s=e.messageVersion,c=Ft(n),u=this.getLocalTopic(c,n);u&&(t=u.lastMessage,we.d("".concat(this._n,".onMessageModified topicID:").concat(n," lastMessage:"),JSON.stringify(t),"options:",JSON.stringify(e)),t&&(null===t.payload||t.lastTime===o&&t.lastSequence===i&&t.version!==s)&&(t.type=r[0].type,t.payload=r[0].content,t.messageForShow=qt(t.type,t.payload,this.isIntl()),t.cloudCustomData=a,t.version=s,t.lastSequence=i,t.lastTime=o,this.emitOEvt(E.TOPIC_UPDATED,{groupID:c,topic:u})))}},{key:"onMessageRevoked",value:function(e){var t,n,o,i=this;0!==e.length&&(n=t=null,o=!1,e.forEach((function(e){var r=e.to;n=Ft(r),(t=i.getLocalTopic(n,r))&&(t.reduceUnreadCount()&&(o=!0),t.isLastMessageRevoked(e)&&(t.setLastMessageRevoked(!0),t.setLastMessageRevoker(e.revoker),o=!0),(r=t.selfInfo.excludedUnreadSequenceList||[]).push(e.sequence),t.updateSelfInfo({excludedUnreadSequenceList:r}))})),o&&this.emitOEvt(E.TOPIC_UPDATED,{groupID:n,topic:t}))}},{key:"isLastMessageRevoked",value:function(e){var t=e.topicID,n=(e=e.sequence,Ft(t));n=this.getLocalTopic(n,t),t=!1;return n?n.isLastMessageRevoked({sequence:e}):t}},{key:"updateUnreadCountAndLastMsg",value:function(e,t,n){var o,i=Ft(e),r=this.getLocalTopic(i,e);r&&(o=r.selfInfo.excludedUnreadSequenceList||[],dt(n)||(o=n),t._isExcludedFromUnreadCount&&o.push(t.sequence),r.updateSelfInfo({excludedUnreadSequenceList:o}),we.l("".concat(this._n,".updateUnreadCountAndLastMsg seq:").concat(t.sequence," lastSeq:").concat(r.lastMessage.lastSequence)),t.sequence>r.lastMessage.lastSequence&&(r.updateLastMessage(t),n=t.sequence+1,r.updateNextMessageSeq(n),o=this._computeUnreadCount(r),r.updateUnreadCount(o),(t=this.get(11).getLocalConversation("".concat(k.CONV_GROUP).concat(e)))&&t.updateUnreadCount({nextUnreadCount:o,isFromGetConversations:!0}),this.emitOEvt(E.TOPIC_UPDATED,{groupID:i,topic:r})))}},{key:"getJoinedCommunityList",value:function(){return this.get(7).syncCommunityWithTopic()}},{key:"createTopicInCommunity",value:function(e){var n=this,o="".concat(this._n,".").concat("createTopicInCommunity"),i=e.topicID;if(!dt(i)&&!Tt(i))return Cn({code:Un.ILLEGAL_TOPIC_ID});if(e.topicName&&!1===this._filterProfanity("topicName",e))return Cn({code:Un.PROFANITY_FOUND});if(e.introduction&&!1===this._filterProfanity("introduction",e))return Cn({code:Un.PROFANITY_FOUND});if(e.notification&&!1===this._filterProfanity("notification",e))return Cn({code:Un.PROFANITY_FOUND});var r=new eo("createTopicInCommunity");return this.req({P:Fn.CREATE_TOPIC,data:t({},e)}).then((function(i){return i=i.data.topicID,r.setMessage("topicID:".concat(i)).end(),we.l("".concat(o," ok. topicID:").concat(i)),n._updateTopicMap([t(t({},e),{},{topicID:i})]),Mn({topicID:i})})).catch((function(e){return r.setError(e).end(),we.e("".concat(o," failed. error:"),e),Cn(e)}))}},{key:"deleteTopicFromCommunity",value:function(e){var t=this,n="".concat(this._n,".").concat("deleteTopicFromCommunity"),o=e.groupID,i=(e=e.topicIDList,e=void 0===e?[]:e,new eo("deleteTopicFromCommunity"));return i.setMessage("groupID:".concat(o," topicIDList:").concat(e)),this.req({P:Fn.DEL_TOPIC,data:{groupID:o,topicIDList:e}}).then((function(e){e=e.data.resultList;var r=[],a=[];(void 0===e?[]:e).forEach((function(e){var t=e.topicID,n=e.errorCode;e=e.errorInfo;0===n?r.push({topicID:t}):a.push({topicID:t,code:n,message:e})})),e="success count:".concat(r.length,", fail count:").concat(a.length);return i.setMoreMessage(e).end(),we.l("".concat(n," ok. ").concat(e)),r.forEach((function(e){t._deleteLocalTopic(o,e.topicID)})),Mn({successTopicList:r,failureTopicList:a})})).catch((function(e){return i.setError(e).end(),we.e("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"updateTopicProfile",value:function(e){var n=this,o="".concat(this._n,".").concat("updateTopicProfile");if(we.l("".concat(o," options:"),e),e.topicName&&!1===this._filterProfanity("topicName",e))return Cn({code:Un.PROFANITY_FOUND});if(e.introduction&&!1===this._filterProfanity("introduction",e))return Cn({code:Un.PROFANITY_FOUND});if(e.notification&&!1===this._filterProfanity("notification",e))return Cn({code:Un.PROFANITY_FOUND});var i=new eo("updateTopicProfile");return i.setMessage("groupID:".concat(e.groupID," topicID:").concat(e.topicID)),dt(e.muteAllMembers)||(e.muteAllMembers=!0===e.muteAllMembers?"On":"Off"),this.req({P:Fn.UPDATE_TOPIC_PROFILE,data:t({},e)}).then((function(){return i.end(),we.l("".concat(o," ok")),n._updateTopicMap([e]),Mn({topic:n.getLocalTopic(e.groupID,e.topicID)})})).catch((function(e){return i.setError(e).end(),we.e("".concat(o," failed. error:"),e),Cn(e)}))}},{key:"getTopicList",value:function(e){var n=this,o="".concat(this._n,".").concat("getTopicList"),i=e.groupID,r=(e=e.topicIDList,e=void 0===e?[]:e,0===e.length),a=new eo("getTopicList");if(a.setMessage("groupID:".concat(i)),this._getTopicTimeMap.has(i)){var s=this._getTopicTimeMap.get(i),c=s.isGetAll;s=s.time;if((c||!c&&!r)&&Date.now()-s<1e3*this.TOPIC_CACHE_TIME&&(c=this._getLocalTopicList(i,e),r||c.length===e.length))return a.setMoreMessage("from cache, topic count:".concat(c.length)).end(),we.l("".concat(o," groupID:").concat(i," from cache, topic count:").concat(c.length)),In({successTopicList:c,failureTopicList:[]})}return this.req({P:Fn.GET_TOPIC_LIST,data:{groupID:i,topicIDList:e}}).then((function(e){e=e.data.topicInfoList;var s=[],c=[],u=[];(void 0===e?[]:e).forEach((function(e){var n=e.topic,o=e.selfInfo,i=e.errorCode,r=(e=e.errorInfo,n.topicID);0===i?(s.push(t(t({},n),{},{selfInfo:o})),c.push(r)):u.push({topicID:r,code:i,message:e})})),n._updateTopicMap(s),n._handleTopicAtInfo(s),e="success count:".concat(c.length,", fail count:").concat(u.length),a.setMoreMessage(e).end(),we.l("".concat(o," groupID:").concat(i," from remote, ").concat(e)),e=[];return je(c)||(n._getTopicTimeMap.set(i,{time:Date.now(),isGetAll:r}),e=n._getLocalTopicList(i,c)),Mn({successTopicList:e,failureTopicList:u})})).catch((function(e){return a.setError(e).end(),we.e("".concat(o," failed. error:"),e),Cn(e)}))}},{key:"hasLocalTopic",value:function(e,t){return!!this._topicMap.has(e)&&this._topicMap.get(e).has(t)}},{key:"getLocalTopic",value:function(e,t){var n=null;return this._topicMap.has(e)?this._topicMap.get(e).get(t):n}},{key:"_getLocalTopicList",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=(e=this._topicMap.get(e),[]);return e&&(n=y(e.values())),0===t.length?n:n.filter((function(e){return t.includes(e.topicID)}))}},{key:"_deleteLocalTopic",value:function(e,t){this._topicMap.has(e)&&this._topicMap.get(e).has(t)&&(this._topicMap.get(e).delete(t),we.l("".concat(this._n,"._deleteLocalTopic groupID:").concat(e," topicID:").concat(t)))}},{key:"_updateTopicMap",value:function(e){var t=this,n=[];e.forEach((function(e){var o=e.groupID,i=e.topicID,r=null;t._topicMap.has(o)||t._topicMap.set(o,new Map),t._topicMap.get(o).has(i)?(r=t._topicMap.get(o).get(i)).updateTopic(e):(t._getTopicLastMessage(e),r=new Si(e,t.isIntl()),t._topicMap.get(o).set(i,r)),e=t._computeUnreadCount(r);r.updateUnreadCount(e),n.push({conversationID:"".concat(k.CONV_GROUP).concat(i),type:k.CONV_TOPIC,unreadCount:e})})),0<n.length&&this.get(11).updateTopicConversation(n)}},{key:"resetGetTopicTime",value:function(e){var t=this;dt(e)?y(this._getTopicTimeMap.keys()).forEach((function(e){t._getTopicTimeMap.set(e,0)})):this._getTopicTimeMap.set(e,0)}},{key:"getTopicListOnReconnected",value:function(){var e=this,t=y(this._topicMap.keys()),n=[],o=this.get(11);t.forEach((function(t){var i=[],r=e._getLocalTopicList(t);o.deleteTopicRoamingInfo(t),r.forEach((function(t){var n=t.lastMessage.lastTime;n=void 0===n?0:n;Date.now()-1e3*n<1e3*e.TOPIC_LAST_ACTIVE_TIME&&i.push(t.topicID)})),0<i.length&&n.push({groupID:t,topicIDList:i})})),we.l("".concat(this._n,".getTopicListOnReconnected. active community count:").concat(n.length)),this._relayGetTopicList(n)}},{key:"_relayGetTopicList",value:function(e){var t,n,o,i=this;0!==e.length&&(n=5<(t=e.shift()).topicIDList.length?"topicIDList.length:".concat(t.topicIDList.length):"topicIDList:".concat(t.topicIDList),(o=new eo("relayGetTopicList")).setMessage(n),we.l("".concat(this._n,"._relayGetTopicList. ").concat(n)),this.getTopicList(t).then((function(){o.end(),i._relayGetTopicList(e)})).catch((function(t){o.setError(t).end(),i._relayGetTopicList(e)})))}},{key:"_handleTopicAtInfo",value:function(e){var n=this;0!==e.length&&e.forEach((function(e){var o=e.groupID,i=e.topicID,r=(e=e.groupAtInfoList,[]);dt(e)||(e.forEach((function(e){r.push(t(t({},e),{},{groupID:o,topicID:i}))})),n.get(11).onNewGroupAtTips({dataList:r}))}))}},{key:"_getTopicLastMessage",value:function(e){var t;dt(e.lastMsg)||(t={time:e.lastMsg.time,sequence:e.lastMsg.sequence,from:e.lastMsg.from,payload:e.lastMsg.elements[0]?e.lastMsg.elements[0].content:null,type:e.lastMsg.elements[0]?e.lastMsg.elements[0].type:"",nick:e.lastMsg.nick,avatar:e.lastMsg.avatar,version:e.lastMsg.messageVersion,cloudCustomData:e.lastMsg.cloudCustomData,isRevoked:2===e.lastMsg.isPlaceMessage,revoker:je(e.lastMsg.revokerInfo)?null:e.lastMsg.revokerInfo.revoker},e.lastMessage=t)}},{key:"deleteTopicListInCommunity",value:function(e){var t=this,n=this._getLocalTopicList(e),o=this.get(11);n.forEach((function(n){n=n.topicID,t._deleteLocalTopic(e,n),t._getTopicTimeMap.delete(e),o.deleteLocalConv("".concat(k.CONV_GROUP).concat(n))}))}},{key:"_computeUnreadCount",value:function(e){var t,n=e.selfInfo,o=n.excludedUnreadSequenceList,i=n.readedSequence;n=e.nextMessageSeq-e.selfInfo.readedSequence-1;return Xe(o)&&(t=0,o.forEach((function(n){i<n&&n<=e.nextMessageSeq-1&&(t+=1)})),1<=t&&(n-=t)),n<0?0:n}},{key:"_filterProfanity",value:function(e,t){var n=this.get(29);if(!n)return!0;n=n.filterText(t[e],x);var o=n.isAllowedToSend;n=n.modifiedText;return!0===o&&(t[e]=n,!0)}},{key:"getMessageExtensions",value:function(e,t){we.l("".concat(this._n,".getMessageExtensions startSequence:").concat(t));var n=Ft(e.to);return this.req({P:Fn.GET_GRP_MSG_EXT,data:{groupID:n,topicID:e.to,messageSequence:e.sequence,startSequence:t}})}},{key:"modifyMsgExts",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,o=(we.l("".concat(this._n,".modifyMsgExts operateType:").concat(n)),Ft(e.to));return this.req({P:Fn.MODIFY_GRP_MSG_EXT,data:{groupID:o,topicID:e.to,messageSequence:e.sequence,extensionList:t,operateType:n}})}},{key:"reset",value:function(){we.l("".concat(this._n,".reset")),this._topicMap.clear(),this._getTopicTimeMap.clear(),this.TOPIC_CACHE_TIME=300,this.TOPIC_LAST_ACTIVE_TIME=3600}}]),Bi),ki=(c(qi,[{key:"setExpirationTime",value:function(e){this.expirationTime=e}},{key:"getUserProfile",value:function(e){var t=this,n="".concat(this._n,".").concat("getUserProfile"),o=e.userIDList;e.fromAccount=this._userM.getMyAccount(),100<o.length&&(we.w("".concat(n," ").concat(jt(100))),o.length=100);for(var i,r=[],a=[],s=0,c=o.length;s<c;s++)i=o[s],this._userM.isMyFriend(i)&&this._contains(i)?a.push(this._getProfileFromMap(i)):r.push(i);if(0===r.length)return In(a);e.toAccount=r;var u=e.bFromGetMyProfile||!1,l=[],d=(e.toAccount.forEach((function(e){l.push({toAccount:e,standardSequence:0,customSequence:0})})),e.userItem=l,new eo("getUserProfile"));return d.setMessage(5<o.length?"userIDList.length:".concat(o.length):"userIDList:".concat(o)),this._userM.req({P:Fn.GET_USER_PROFILE,data:e}).then((function(e){return d.end(),we.i("".concat(n," ok")),e=t._handleResponse(e).concat(a),Mn(u?e[0]:e)})).catch((function(e){return d.setError(e).end(),we.e("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"getMyProfile",value:function(){var e,t=this._userM.getMyAccount(),n="".concat(this._n,".getMyProfile");return we.l("".concat(n," myAccount:").concat(t)),this._fill(),this._contains(t)?(e=this._getProfileFromMap(t),we.d("".concat(n," from cache, myProfile:").concat(JSON.stringify(e))),In(e)):this.getUserProfile({fromAccount:t,userIDList:[t],bFromGetMyProfile:!0})}},{key:"_handleResponse",value:function(e){var t=e.data.userProfileItem;if(!Xe(t))return[];for(var n=[],o=(e=Date.now(),0),i=t.length;o<i;o++){var r=t[o],a=r.to;r=r.profileItem;"@TLS#NOT_FOUND"!==a&&""!==a&&(a=this._update(a,this._getLatestProfileFromResponse(a,r)).latestProfile,n.push(a))}return we.l("".concat(this._n,"._handleResponse cost:").concat(Yt(e))),n}},{key:"_getLatestProfileFromResponse",value:function(e,t){var n={userID:e,profileCustomField:[]};if(!je(t))for(var o=0,i=t.length;o<i;o++)if(-1<t[o].tag.indexOf("Tag_Profile_Custom"))n.profileCustomField.push({key:t[o].tag,value:t[o].value});else switch(t[o].tag){case Pe.NICK:n.nick=t[o].value;break;case Pe.GENDER:n.gender=t[o].value;break;case Pe.BIRTHDAY:n.birthday=t[o].value;break;case Pe.LOCATION:n.location=t[o].value;break;case Pe.SELFSIGNATURE:n.selfSignature=t[o].value;break;case Pe.ALLOWTYPE:n.allowType=t[o].value;break;case Pe.LANGUAGE:n.language=t[o].value;break;case Pe.AVATAR:n.avatar=t[o].value;break;case Pe.MESSAGESETTINGS:n.messageSettings=t[o].value;break;case Pe.ADMINFORBIDTYPE:n.adminForbidType=t[o].value;break;case Pe.LEVEL:n.level=t[o].value;break;case Pe.ROLE:n.role=t[o].value;break;default:we.w("".concat(this._n,"._getLatestProfileFromResponse unknown tag:"),t[o].tag,t[o].value)}return n}},{key:"updateMyProfile",value:function(e){var t=this,n="".concat(this._n,".").concat("updateMyProfile");if(e.nick&&!1===this._userM.filterProfanity("nick",e))return Cn({code:Un.PROFANITY_FOUND});if(e.selfSignature&&!1===this._userM.filterProfanity("selfSignature",e))return Cn({code:Un.PROFANITY_FOUND});var o=new eo("updateMyProfile"),i=(o.setMessage(JSON.stringify(e)),(new ni).validate(e));if(!i.valid)return o.setCode(Un.UPDATE_PROFILE_INVALID_PARAM).setMoreMessage("info:".concat(i.tips)).end(),we.e("".concat(n," info:").concat(i.tips)),Cn({code:Un.UPDATE_PROFILE_INVALID_PARAM});var r,a=[];for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&("profileCustomField"===r?e.profileCustomField.forEach((function(e){a.push({tag:e.key,value:e.value})})):a.push({tag:Pe[r.toUpperCase()],value:e[r]}));if(0===a.length)return i=new Gn({code:Un.UPDATE_PROFILE_NO_KEY}),o.setError(i).end(),we.e("".concat(n," failed. error:"),i),Cn(i);var s=this._userM.getMyAccount();return this._userM.req({P:Fn.UPDATE_MY_PROFILE,data:{fromAccount:s,profileItem:a}}).then((function(i){o.end(),we.i("".concat(n," ok"));var r=t._update(s,e),a=r.isProfileUpdated;r=r.latestProfile;return!0===a&&t._userM.emitOEvt(E.PROFILE_UPDATED,[r]),In(r)})).catch((function(e){return o.setError(e).end(),we.e("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"onProfileModified",value:function(e){var t=e.dataList;if(!je(t)){var n=t.length;we.d("".concat(this._n,".onProfileModified count:").concat(n," dataList:"),e.dataList);for(var o=[],i=0;i<n;i++){var r=t[i].userID,a=(r=this._update(r,this._getLatestProfileFromResponse(r,t[i].profileList)),r.isProfileUpdated);r=r.latestProfile;!0===a&&o.push(r)}0<o.length&&(this._userM.emitIEvt(Bo.PROFILE_UPDATED,o),this._userM.emitOEvt(E.PROFILE_UPDATED,o))}}},{key:"_fill",value:function(){if(0===this.accountProfileMap.size){for(var e=this._getCachedProfiles(),t=Date.now(),n=0,o=e.length;n<o;n++)t-e[n].lastUpdatedTime<this.expirationTime&&this.accountProfileMap.set(e[n].userID,e[n]);we.l("".concat(this._n,"._fill from cache, size:").concat(this.accountProfileMap.size))}}},{key:"_update",value:function(e,t){var n,o=!1,i=Date.now();return this._contains(e)?(n=this._getProfileFromMap(e),t.profileCustomField&&!0===yt(n.profileCustomField,t.profileCustomField)&&(n.lastUpdatedTime=i,o=!0),0<et(n,t,["profileCustomField"])&&(n.lastUpdatedTime=i,o=!0)):(n=new ni(t),!this._userM.isMyFriend(e)&&e!==this._userM.getMyAccount()||(n.lastUpdatedTime=i,o=!0,this.accountProfileMap.set(e,n))),this._flush(e===this._userM.getMyAccount()),!0===o&&we.l("".concat(this._n,"._update account:").concat(e," isUpdated:").concat(o)),{isProfileUpdated:o,latestProfile:n}}},{key:"_flush",value:function(e){var t=y(this.accountProfileMap.values()),n=this._userM.getStorageModule();we.d("".concat(this._n,"._flush length:").concat(t.length," flushAtOnce:").concat(e)),n.setItem(this.TAG,t,e)}},{key:"_contains",value:function(e){return this.accountProfileMap.has(e)}},{key:"_getProfileFromMap",value:function(e){return this.accountProfileMap.get(e)}},{key:"_getCachedProfiles",value:function(){var e=this._userM.getStorageModule().getItem(this.TAG);return je(e)?[]:e}},{key:"onConvProfileUpdated",value:function(e){for(var t,n,o,i=[],r=0,a=e.length;r<a;r++)n=(t=e[r]).userID,this._userM.isMyFriend(n)&&(this._contains(n)?(o=this._getProfileFromMap(n),0<et(o,t)&&i.push(n)):i.push(t.userID));0!==i.length&&(we.l("".concat(this._n,".onConvProfileUpdated toAccountList:").concat(i)),this.getUserProfile({userIDList:i}))}},{key:"getNickAndAvatarByUserID",value:function(e){return this._contains(e)?{nick:(e=this._getProfileFromMap(e)).nick,avatar:e.avatar}:{nick:"",avatar:""}}},{key:"getUserNickAndAvatar",value:function(e){var t=this,n=y(new Set(e)),o=(we.l("".concat(this._n,".getUserNickAndAvatar userIDList.length:").concat(e.length," uniqueUserIDList.length:").concat(n.length)),[]);if(0===e.length)return Promise.resolve(o);e=this._createUserIDListGroup(n);var i=[];return e.forEach((function(e){i.push(t.getUserProfile({userIDList:e}))})),Promise.all(i).then((function(e){return e.forEach((function(e){e=e.data.map((function(e){return{userID:e.userID,nick:e.nick,avatar:e.avatar}})),o.push.apply(o,y(e))})),o}))}},{key:"_createUserIDListGroup",value:function(e){for(var t=[],n=0;n<e.length;)t.push(e.slice(n,n+=100));return t}},{key:"reset",value:function(){this._flush(!0),this.accountProfileMap.clear()}}]),qi),Di=c((function e(t){r(this,e)})),Ai=(c(Fi,[{key:"getLocalBlacklist",value:function(){return y(this._blacklistMap.keys())}},{key:"getBlacklist",value:function(){var e=this,t="".concat(this._n,".getBlacklist"),n={fromAccount:this._userM.getMyAccount(),maxLimited:this.maxLimited,startIndex:0,lastSequence:this.currentSequence},o=new eo("getBlacklist");return this._userM.req({P:Fn.GET_BL,data:n}).then((function(n){n=n.data;var i=n.blackListItem,r=(n=n.currentSequence,je(i)?0:i.length);o.setMessage("count:".concat(r)).end(),we.i("".concat(t," ok")),e.currentSequence=n,e._handleResponse(i,!0),e._userM.emitOEvt(E.BLACKLIST_UPDATED,y(e._blacklistMap.keys()))})).catch((function(e){return o.setError(e).end(),we.e("".concat(t," failed. error:"),e),Cn(e)}))}},{key:"addBlacklist",value:function(e){var t,n,o=this,i=new eo("addToBlacklist"),r="".concat(this._n,".addBlacklist"),a=this._userM.getMyAccount();return 1===e.userIDList.length&&e.userIDList[0]===a?(n=this._userM.getErrMsg(t=Un.CANNOT_ADD_SELF_TO_BLACKLIST),i.setCode(t).setMessage(n).end(),n=new Gn({code:t}),we.e("".concat(r," failed. error:"),n),Cn(n)):(e.userIDList.includes(a)&&(e.userIDList=e.userIDList.filter((function(e){return e!==a}))),e.fromAccount=this._userM.getMyAccount(),e.toAccount=e.userIDList,this._userM.req({P:Fn.ADD_TO_BL,data:e}).then((function(t){return i.setMessage(5<e.userIDList.length?"userIDList.length:".concat(e.userIDList.length):"userIDList:".concat(e.userIDList)).end(),we.i("".concat(r," ok")),o._handleResponse(t.resultItem,!0),Mn(y(o._blacklistMap.keys()))})).catch((function(e){return i.setError(e).end(),we.e("".concat(r," failed. error:"),e),Cn(e)})))}},{key:"_handleResponse",value:function(e,t){if(!je(e))for(var n,o,i,r=0,a=e.length;r<a;r++)o=e[r].to,i=e[r].resultCode,!dt(i)&&0!==i||(t?((n=this._blacklistMap.has(o)?this._blacklistMap.get(o):new Di).userID=o,je(e[r].addBlackTimeStamp)||(n.timeStamp=e[r].addBlackTimeStamp),this._blacklistMap.set(o,n)):this._blacklistMap.has(o)&&(n=this._blacklistMap.get(o),this._blacklistMap.delete(o)));we.l("".concat(this._n,"._handleResponse total:").concat(this._blacklistMap.size," bAdd:").concat(t))}},{key:"deleteBlacklist",value:function(e){var t=this,n="".concat(this._n,".deleteBlacklist"),o=new eo("removeFromBlacklist");return e.fromAccount=this._userM.getMyAccount(),e.toAccount=e.userIDList,this._userM.req({P:Fn.RM_FROM_BL,data:e}).then((function(i){return o.setMessage(5<e.userIDList.length?"userIDList.length:".concat(e.userIDList.length):"userIDList:".concat(e.userIDList)).end(),we.i("".concat(n," ok")),t._handleResponse(i.data.resultItem,!1),Mn(y(t._blacklistMap.keys()))})).catch((function(e){return o.setError(e).end(),we.e("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"onAccountDeleted",value:function(e){for(var t=0,n=e.length;t<n;t++){var o=e[t];this._blacklistMap.has(o)&&this._blacklistMap.delete(o)}var i=e.length;0<i&&(we.l("".concat(this._n,".onAccountDeleted count:").concat(i," ").concat(i<30?"userIDList:".concat(e):"")),this._userM.emitOEvt(E.BLACKLIST_UPDATED,y(this._blacklistMap.keys())))}},{key:"onAccountAdded",value:function(e){for(var t,n=[],o=0,i=e.length;o<i;o++)t=e[o],this._blacklistMap.has(t)||(this._blacklistMap.set(t,new Di({userID:t})),n.push(t));0<n.length&&(we.l("".concat(this._n,".onAccountAdded count:").concat(n.length," userIDList:"),n),this._userM.emitOEvt(E.BLACKLIST_UPDATED,y(this._blacklistMap.keys())))}},{key:"reset",value:function(){this._blacklistMap.clear(),this.startIndex=0,this.maxLimited=100,this.currentSequence=0}}]),Fi),Li=(c(xi,[{key:"_onCloudConfig",value:function(){var e=this._userM.getCloudConfig("status_query_count"),t=this._userM.getCloudConfig("status_sub_count"),n=this._userM.getCloudConfig("status_unsub_count");we.l("".concat(this._n,"._onCloudConfig statusQueryCount:").concat(e," statusSubscribeCount:").concat(t)+" statusUnsubscribeCount:".concat(n)),dt(e)||(this.MAX_QUERY_USER_COUNT=parseInt(e,10)),dt(e)||(this.MAX_SUBSCRIBE_USER_COUNT=parseInt(t,10)),dt(e)||(this.MAX_UNSUBSCRIBE_USER_COUNT=parseInt(n,10))}},{key:"onUserStatusUpdated",value:function(e){e=e.dataList;var t=this._userM.getMyUserID(),n=this._userM.get(12);e=e.map((function(e){var o=e.to,i=e.statusType;e=e.customStatus,e=zo(e);return o===t&&n.setCustomStatus(e),{userID:o,statusType:i,customStatus:e}}));we.l("".concat(this._n,".onUserStatusUpdated list:").concat(JSON.stringify(e))),this._userM.emitOEvt(E.USER_STATUS_UPDATED,e)}},{key:"setSelfStatus",value:function(e){var t=this,n="".concat(this._n,".setSelfStatus");if(!1===this._userM.filterProfanity("customStatus",e))return Cn({code:Un.PROFANITY_FOUND});var o=new eo("setSelfStatus"),i=e.customStatus;return this._userM.req({P:Fn.SET_SELF_STATUS,data:{customStatus:i}}).then((function(e){return o.setMessage("customStatus:".concat(i)).end(),we.l("".concat(n," ok. customStatus:").concat(i)),t._userM.get(12).setCustomStatus(i),Mn({userID:t._userM.getMyUserID(),statusType:1,customStatus:i})})).catch((function(e){return o.setError(e).end(),we.e("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"getUserStatus",value:function(e){var t="".concat(this._n,".").concat("getUserStatus"),n=(e=e.userIDList,void 0===e?[]:e),o=(e=this._userM.getMyUserID(),y(n)),i=void 0,r=o.indexOf(e);if(-1<r&&(o.splice(r,1),i={userID:e,statusType:1,customStatus:this._userM.get(12).getCustomStatus()}),0===o.length)return In({successUserList:[i],failureUserList:[]});if(!this._userM.canIUse(U.USER_STATUS))return this._userM.noUse("getUserStatus");o.length>this.MAX_QUERY_USER_COUNT&&(we.w("".concat(t," ").concat(jt(this.MAX_QUERY_USER_COUNT))),o=n.slice(0,this.MAX_QUERY_USER_COUNT));var a=new eo("getUserStatus");return this._userM.req({P:Fn.GET_USER_STATUS,data:{userIDList:o}}).then((function(e){e=e.data;var o=e.successUserList,r=(o=void 0===o?[]:o,e=e.failureUserList,e=void 0===e?[]:e,o=o.map((function(e){var t=e.userID,n=e.statusType;e=e.customStatus;return{userID:t,statusType:n,customStatus:zo(e)}})),e=e.map((function(e){var t=e.userID,n=e.invalidUserID,o=e.errorCode;e=e.errorInfo;return{userID:je(n)?t:n,code:o,message:e}})),dt(i)||o.unshift(i),"userID count:".concat(n.length,", success count:").concat(o.length,", fail count:").concat(e.length));return a.setMessage("".concat(r)).end(),we.l("".concat(t," ok. ").concat(r,".")),Mn({successUserList:o,failureUserList:e})})).catch((function(e){return a.setMessage("userID count:".concat(n.length)).setError(e).end(),we.e("".concat(t," failed. error:"),e),Cn(e)}))}},{key:"subscribeUserStatus",value:function(e){var t="subscribeUserStatus";if(!this._userM.canIUse(U.USER_STATUS))return this._userM.noUse(t);var n="".concat(this._n,".").concat(t),o=(e=e.userIDList,e=void 0===e?[]:e,y(e)),i=(o.length>this.MAX_SUBSCRIBE_USER_COUNT&&(we.w("".concat(n," ").concat(jt(this.MAX_SUBSCRIBE_USER_COUNT))),o=e.slice(0,this.MAX_SUBSCRIBE_USER_COUNT)),new eo(t)),r="userID count:".concat(e.length);return we.l("".concat(n," ").concat(r)),this._userM.req({P:Fn.SUB_USER_STATUS,data:{userIDList:o}}).then((function(e){return e=e.data.failureUserList,e=(void 0===e?[]:e).map((function(e){var t=e.userID,n=e.invalidUserID,o=e.errorCode;e=e.errorInfo;return{userID:je(n)?t:n,code:o,message:e}})),i.setMessage("".concat(r," fail count:").concat(e.length)).end(),we.l("".concat(n," ok. fail count:").concat(e.length,".")),Mn({failureUserList:e})})).catch((function(e){return i.setMessage(r).setError(e).end(),we.e("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"unsubscribeUserStatus",value:function(e){var t="unsubscribeUserStatus";if(!this._userM.canIUse(U.USER_STATUS))return this._userM.noUse(t);var n="".concat(this._n,".").concat(t),o=(e=(e||{}).userIDList,e=void 0===e?[]:e,y(e)),i=(e.length>this.MAX_UNSUBSCRIBE_USER_COUNT&&(we.w("".concat(n," ").concat(jt(this.MAX_UNSUBSCRIBE_USER_COUNT))),o=e.slice(0,this.MAX_UNSUBSCRIBE_USER_COUNT)),new eo(t)),r="userID count:".concat(e.length);we.l("".concat(n," ").concat(r)),t={userIDList:o};return 0===o.length&&(t.userIDList=void 0,t.unsubscribeAll=1),this._userM.req({P:Fn.UNSUB_USER_STATUS,data:t}).then((function(e){return e=e.data.failureUserList,e=(void 0===e?[]:e).map((function(e){var t=e.userID,n=e.invalidUserID,o=e.errorCode;e=e.errorInfo;return{userID:je(n)?t:n,code:o,message:e}})),i.setMessage("".concat(r," fail count:").concat(e.length)).end(),we.l("".concat(n," ok. fail count:").concat(e.length,".")),Mn({failureUserList:e})})).catch((function(e){return i.setMessage("".concat(r)).setError(e).end(),we.e("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"reset",value:function(){this.MAX_QUERY_USER_COUNT=500,this.MAX_SUBSCRIBE_USER_COUNT=100,this.MAX_UNSUBSCRIBE_USER_COUNT=100}}]),xi),Oi=(l(Ui,Rn),Xo=v(Ui),c(Ui,[{key:"onContextUpdated",value:function(e){this._profileHandler.getMyProfile(),this._blacklistHandler.getBlacklist()}},{key:"mockOnNickAvatarModified",value:function(e,t){we.l("".concat(this._n,"._mockOnNickAvatarModified nick:").concat(e," avatar:").concat(t)),this.onProfileModified({dataList:[{pushType:1,userID:this.getMyUserID(),profileList:[{tag:Pe.NICK,value:e},{tag:Pe.AVATAR,value:t}]}]})}},{key:"onProfileModified",value:function(e){this._profileHandler.onProfileModified(e)}},{key:"onRelationChainModified",value:function(e){var t,n;e=e.dataList;je(e)||(t=[],e.forEach((function(e){e.blackListDelAccount&&t.push.apply(t,y(e.blackListDelAccount))})),0<t.length&&this._blacklistHandler.onAccountDeleted(t),n=[],e.forEach((function(e){e.blackListAddAccount&&n.push.apply(n,y(e.blackListAddAccount))})),0<n.length&&this._blacklistHandler.onAccountAdded(n))}},{key:"onConvProfileUpdated",value:function(e){this._profileHandler.onConvProfileUpdated(e)}},{key:"getMyAccount",value:function(){return this.getMyUserID()}},{key:"getMyNick",value:function(){return this._profileHandler.getNickAndAvatarByUserID(this.getMyUserID()).nick}},{key:"getMyProfile",value:function(){return this._profileHandler.getMyProfile()}},{key:"getStorageModule",value:function(){return this.get(13)}},{key:"filterProfanity",value:function(e,t){var n=this.get(29);if(!n)return!0;n=n.filterText(t[e],"user_profile");var o=n.isAllowedToSend;n=n.modifiedText;return!0===o&&(t[e]=n,!0)}},{key:"isMyFriend",value:function(e){var t=this.get(8);return!!t&&t.isMyFriend(e)}},{key:"getUserProfile",value:function(e){return this._profileHandler.getUserProfile(e)}},{key:"updateMyProfile",value:function(e){return this._profileHandler.updateMyProfile(e)}},{key:"getNickAndAvatarByUserID",value:function(e){return this._profileHandler.getNickAndAvatarByUserID(e)}},{key:"getUserNickAndAvatar",value:function(e){return this._profileHandler.getUserNickAndAvatar(e)}},{key:"getLocalBlacklist",value:function(){var e=this._blacklistHandler.getLocalBlacklist();return In(e)}},{key:"addBlacklist",value:function(e){return this._blacklistHandler.addBlacklist(e)}},{key:"deleteBlacklist",value:function(e){return this._blacklistHandler.deleteBlacklist(e)}},{key:"onUserStatusUpdated",value:function(e){this._userStatusHandler.onUserStatusUpdated(e)}},{key:"setSelfStatus",value:function(e){return this._userStatusHandler.setSelfStatus(e)}},{key:"getUserStatus",value:function(e){return this._userStatusHandler.getUserStatus(e)}},{key:"subscribeUserStatus",value:function(e){return this._userStatusHandler.subscribeUserStatus(e)}},{key:"unsubscribeUserStatus",value:function(e){return this._userStatusHandler.unsubscribeUserStatus(e)}},{key:"reset",value:function(){we.l("".concat(this._n,".reset")),this._profileHandler.reset(),this._blacklistHandler.reset(),this._userStatusHandler.reset()}}]),Ui),Ri=(c(Gi,[{key:"isLoggedIn",value:function(){return this._isLoggedIn}},{key:"isOversea",value:function(){return this._oversea}},{key:"isPrivateNetWork",value:function(){return this._proxyServer}},{key:"isDevMode",value:function(){return this._isDevMode}},{key:"isTestEnv",value:function(){return this._isTestEnv}},{key:"isPartialUpdatedConvs",value:function(){return this._isPartialUpdatedConvs}},{key:"isSingaporeSite",value:function(){return 2e7<=this._SDKAppID&&this._SDKAppID<3e7||172e7<=this._SDKAppID&&this._SDKAppID<173e7}},{key:"isKoreaSite",value:function(){return 3e7<=this._SDKAppID&&this._SDKAppID<4e7||173e7<=this._SDKAppID&&this._SDKAppID<174e7}},{key:"isGermanySite",value:function(){return 4e7<=this._SDKAppID&&this._SDKAppID<5e7||174e7<=this._SDKAppID&&this._SDKAppID<175e7}},{key:"isIndiaSite",value:function(){return 5e7<=this._SDKAppID&&this._SDKAppID<6e7||175e7<=this._SDKAppID&&this._SDKAppID<176e7}},{key:"isJapanSite",value:function(){return 6e7<=this._SDKAppID&&this._SDKAppID<7e7||176e7<=this._SDKAppID&&this._SDKAppID<177e7}},{key:"isUSASite",value:function(){return 7e7<=this._SDKAppID&&this._SDKAppID<8e7||177e7<=this._SDKAppID&&this._SDKAppID<178e7}},{key:"isIndonesiaSite",value:function(){return 8e7<=this._SDKAppID&&this._SDKAppID<9e7||178e7<=this._SDKAppID&&this._SDKAppID<179e7}},{key:"isIntl",value:function(){return 0===(e=this._SDKAppID)||2e7<=e&&e<9e7||172e7<=e&&e<179e7;var e}},{key:"isUnlimitedAVChatRoom",value:function(){return this._unlimitedAVChatRoom}},{key:"isUsingChatCore",value:function(){return this._isUsingChatCore}},{key:"setUsingChatCore",value:function(e){this._isUsingChatCore=e}},{key:"getUIPlatform",value:function(){return this._uiPlatform}},{key:"setUIPlatform",value:function(e){this._uiPlatform=e}},{key:"setUserID",value:function(e){this._userID=e}},{key:"getUserID",value:function(){return this._userID}},{key:"setUserSig",value:function(e){this._userSig=e}},{key:"getUserSig",value:function(){return this._userSig}},{key:"getSDKAppID",value:function(){return this._SDKAppID}},{key:"setTinyID",value:function(e){this._tinyID=e,this._isLoggedIn=!0}},{key:"getTinyID",value:function(){return this._tinyID}},{key:"setCustomStatus",value:function(e){this._customStatus=e}},{key:"getCustomStatus",value:function(){return this._customStatus}},{key:"getScene",value:function(){return me?window.tencent_cloud_im_csig_flutter_for_web_25F_cy:this._isTUIKit()?"tuikit":this._scene}},{key:"getInstanceID",value:function(){return this._instanceID}},{key:"getStatusInstanceID",value:function(){return this._statusInstanceID}},{key:"setStatusInstanceID",value:function(e){this._statusInstanceID=e}},{key:"getVersion",value:function(){return this._version}},{key:"getA2Key",value:function(){return this._a2Key}},{key:"setA2Key",value:function(e){this._a2Key=e}},{key:"getContentType",value:function(){return this._contentType}},{key:"getProxyServer",value:function(){return this._proxyServer}},{key:"getFileUploadProxy",value:function(){return this._fileUploadProxy}},{key:"getFileDownloadProxy",value:function(){return this._fileDownloadProxy}},{key:"setApplicationID",value:function(e){this._applicationID=e}},{key:"getApplicationID",value:function(){return this._applicationID}},{key:"setDowloadFileAuthKey",value:function(e){this._authKey=e}},{key:"getDowloadFileAuthKey",value:function(){return this._authKey}},{key:"_isTUIKit",value:function(){var e=!1,t=!1,n=!1,o=!1,i=[];ee&&(i=Object.keys(ie));for(var r=0,a=(i=oe?Z?Object.keys(uni):Object.keys(window):i).length;r<a;r++)if(i[r].toLowerCase().includes("uikit")){e=!0;break}i=null;var s,c=(ee&&!Je(ie.createGamePortal)&&Je(getApp)&&!dt(getApp())&&(s=getApp().globalData,$e(s)&&!0===s.isTUIKit&&(t=!0)),!0===this._m.get(13).getStorageSync("TIM_".concat(this._SDKAppID,"_isTUIKit"))&&(n=!0),null);if(j&&!Y&&"undefined"==typeof uni&&__wxConfig&&(c=__wxConfig.pages),W&&"undefined"==typeof uni&&__qqConfig&&(c=__qqConfig.pages),Xe(c)&&0<c.length){for(var u=0,l=c.length;u<l;u++)if(c[u].toLowerCase().includes("tui")){o=!0;break}c=null}return e||t||n||o}},{key:"reset",value:function(){this._isLoggedIn=!1,this._userSig="",this._a2Key="",this._tinyID="",this._customStatus="",this._statusInstanceID=0}}]),Gi),wi={"k-vue2-pc":1,"k-vue2-h5":2,"k-vue2-h5-uni":3,"k-vue2-app-uni":4,"k-vue2-mp-uni":5,"k-vue2-pc-uni":6,"k-vue3-pc":7,"k-vue3-h5":8,"k-vue3-h5-uni":9,"k-vue3-app-uni":10,"k-vue3-mp-uni":11,"k-vue3-pc-uni":12},Ni=(l(Pi,Rn),$o=v(Pi),c(Pi,[{key:"onCheckTimer",value:function(e){this.isLoggedIn()&&e%this._helloInterval==0&&this._hello()}},{key:"getPushModule",value:function(){var e=void 0,t=this.get(36),n=this.get(28);return t.canIUseTIMPush()?e=t:n.canIUseOfflinePush()&&(e=n),e}},{key:"login",value:function(e){if(this.isLoggedIn())return t=this.getMyUserID(),(t=this.getErrMsg("RepeatLogin",t))&&we.w(t),In({actionStatus:"OK",errorCode:0,errorInfo:t,repeatLogin:!0});if(Date.now()-this._lastLoginTs<=15e3)return this.warn("LoggingIn",e.userID),Cn({code:Un.REPEAT_LOGIN});we.l("".concat(this._n,".login userID:").concat(e.userID));var t=this._checkLoginInfo(e);if(0!==t.code)return Cn(t);t=this.get(12);var n=e.userID;e=e.userSig;return t.setUserID(n),t.setUserSig(e),this.get(20).updateProtocolConfig(),this._login()}},{key:"_login",value:function(){var e=this,t=this.get(12),n=t.getScene(),o=0,i=n,r=(n&&n.startsWith("k-")&&(i=wi[n],n="tuikit"),new eo("login")),a=(r.setMessage("".concat(i)).setMoreMessage("identifier:".concat(this.getMyUserID())),"tuikit"===n),s=0,c=(a=(Z?s=a?3===i||4===i||5===i||6===i?31:9===i||10===i||11===i||12===i?32:4:3:ee?s=K?36:"tuikit"===n?12:11:oe&&(s=me?"flutter_web_uikit"===n?21:20:this._isReactUIKit()?ve?25:24:a?1===i||2===i?29:7===i||8===i?30:ve?17:14:ve?16:13),r.setUIPlatform(s),t.setUIPlatform(s),this.getPushModule()),a&&(this._isWebUniapp=a.getUniAppPlatform(),i=this._getStatusInstanceID(),t.setStatusInstanceID(i),this.get(20).updateProtocolConfig(),o=a.getDeviceBrand()),"".concat(this._n,"._login"));return this._lastLoginTs=Date.now(),this.req({P:Fn.LOGIN,data:{deviceBrand:o,isWebUniapp:this._isWebUniapp}}).then((function(o){e._lastLoginTs=0;var i=Date.now(),a=null,s=o.data,u=s.a2Key,l=s.tinyID,d=s.helloInterval,f=s.instanceID,p=s.timeStamp,h=s.customStatus,g=(h=void 0===h?"":h,s.purchaseBits),_=(s=s.authKey,s=void 0===s?"":s,1e3*p),v=i-r.getStartTs();v=_+parseInt(v/2)-i,i=r.getStartTs()+v;if(r.start(i),i=_,De=v,(_=new Date).setTime(i),we.i("baseTime from server:".concat(_," offset:").concat(De)),!l)throw a=new Gn({code:Un.NO_TINYID}),r.setError(a).end(),a;if(!u)throw a=new Gn({code:Un.NO_A2KEY}),r.setError(a).end(),a;return i=e.get(21).getSocketID(),_=zo(h),a="socketID:".concat(i," scene:").concat(n," helloInterval:").concat(d," instanceID:").concat(f," timeStamp:").concat(p)+" offset:".concat(v," customStatus:").concat(_),we.l("".concat(c," ok. ").concat(a)),h="",i="",j&&Je(ie.getAccountInfoSync)&&(p=ie.getAccountInfoSync().miniProgram)&&(h=p.appId,i=p.envVersion),r.setMoreMessage("".concat(a," href:").concat(oe?window.location.href:""," mpAppId:").concat(h," envVersion:").concat(i," authKey:").concat(s)).end(),t.setA2Key(u),t.setTinyID(l),t.setStatusInstanceID(f),t.setCustomStatus(_),t.setDowloadFileAuthKey(s),g&&e.get(27).onPushedConfig({errorCode:0,expiredTime:0,purchaseBits:g}),e.get(20).updateProtocolConfig(),e.emitIEvt(Bo.A2KEY_AND_TINYID_UPDATED),e._helloInterval=d,e.triggerReady(),v=e.getPushModule(),v&&(uni.setStorageSync("timUniAppInstanceID",f),v.init()),e._fetchCloudControlConfig(),e.get(29).init(),o})).catch((function(t){return r.setError(t).end(!0),e._m.setNotReadyReason(Un.LOGIN_FAILED),we.e("".concat(c," failed. error:"),t),e._lastLoginTs=0,e._m.onLoginFailed(),Cn(t)}))}},{key:"logout",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n="".concat(this._n,".logout"),o=this.isLoggedIn();return we.i("".concat(n," type:").concat(t," isLoggedIn:").concat(o)),o?(new eo("logout").setMessage("identifier:".concat(this.getMyUserID())).end(!0),0===t&&this._m.setNotReadyReason(Un.LOGGED_OUT),this.req({P:Fn.LOGOUT,data:{type:t}}).then((function(){return e.resetReady(),In({})})).catch((function(t){return we.e("".concat(n," error:"),t),e.resetReady(),In({})}))):Cn({code:Un.USER_NOT_LOGGED_IN})}},{key:"getLoginUser",value:function(){return this.isLoggedIn()?this.getMyUserID():""}},{key:"_fetchCloudControlConfig",value:function(){this.get(23).fetchConfig()}},{key:"_getStatusInstanceID",value:function(){return uni.getStorageSync("timUniAppInstanceID")||0}},{key:"_hello",value:function(){var e=this;this._lastWsHelloTs=Date.now(),this.req({P:Fn.HELLO,data:{isWebUniapp:this._isWebUniapp}}).catch((function(t){we.w("".concat(e._n,"._hello error:"),t)}))}},{key:"getLastWsHelloTs",value:function(){return this._lastWsHelloTs}},{key:"_checkLoginInfo",value:function(e){var t=0;return je(this.get(12).getSDKAppID())?t=Un.NO_SDKAPPID:je(e.userID)?t=Un.NO_IDENTIFIER:je(e.userSig)&&(t=Un.NO_USERSIG),{code:t}}},{key:"_isReactUIKit",value:function(){return oe&&void 0!==window.tencent_cloud_im_csig_react_uikit_23F_xa}},{key:"onMultipleAccountKickedOut",value:function(e){var t=this;new eo("kickedOut").setMessage("type:".concat(k.KICKED_OUT_MULT_ACCOUNT," newInstanceInfo:").concat(JSON.stringify(e))).end(!0),we.w("".concat(this._n,".onMultipleAccountKickedOut userID:").concat(this.getMyUserID()," newInstanceInfo:"),e),this.logout(1).then((function(){t.emitOEvt(E.KICKED_OUT,{type:k.KICKED_OUT_MULT_ACCOUNT}),t._m.setNotReadyReason(Un.KICKED_OUT_MULT_ACCOUNT),t._m.reset()}))}},{key:"onMultipleDeviceKickedOut",value:function(e){var t=this;new eo("kickedOut").setMessage("type:".concat(k.KICKED_OUT_MULT_DEVICE," newInstanceInfo:").concat(JSON.stringify(e))).end(!0),we.w("".concat(this._n,".onMultipleDeviceKickedOut userID:").concat(this.getMyUserID()," newInstanceInfo:"),e),this.logout(1).then((function(){t.emitOEvt(E.KICKED_OUT,{type:k.KICKED_OUT_MULT_DEVICE}),t._m.setNotReadyReason(Un.KICKED_OUT_MULT_DEVICE),t._m.reset()}))}},{key:"onUserSigExpired",value:function(){new eo("kickedOut").setMessage(k.KICKED_OUT_USERSIG_EXPIRED).end(!0),we.w("".concat(this._n,".onUserSigExpired userID:").concat(this.getMyUserID())),0!==this.get(12).getStatusInstanceID()&&(this.emitOEvt(E.KICKED_OUT,{type:k.KICKED_OUT_USERSIG_EXPIRED}),this._m.setNotReadyReason(Un.KICKED_OUT_USERSIG_EXPIRED),this._m.reset())}},{key:"onRestApiKickedOut",value:function(e){new eo("kickedOut").setMessage("type:".concat(k.KICKED_OUT_REST_API," newInstanceInfo:").concat(JSON.stringify(e))).end(!0),we.w("".concat(this._n,".onRestApiKickedOut userID:").concat(this.getMyUserID()," newInstanceInfo:"),e),0!==this.get(12).getStatusInstanceID()&&(this.emitOEvt(E.KICKED_OUT,{type:k.KICKED_OUT_REST_API}),this._m.setNotReadyReason(Un.KICKED_OUT_REST_API),this._m.reset(),this.get(21).onRestApiKickedOut())}},{key:"reset",value:function(){we.l("".concat(this._n,".reset")),this.resetReady(),this._helloInterval=120,this._lastLoginTs=0,this._lastWsHelloTs=0,this._isWebUniapp=0}}]),Pi);function Pi(e){return r(this,Pi),(e=$o.call(this,e))._n="SignModule",e._helloInterval=120,e._lastLoginTs=0,e._lastWsHelloTs=0,e._isWebUniapp=0,Ko.mixin(_(e)),e}function Gi(e,t){r(this,Gi),this._m=e,this._isLoggedIn=!1,this._SDKAppID=t.SDKAppID,this._userID=t.userID||"",this._userSig=t.userSig||"",this._version="3.4.3",this._a2Key="",this._tinyID="",this._customStatus="",this._contentType="json",this._unlimitedAVChatRoom=t.unlimitedAVChatRoom,this._scene=t.scene||"",this._oversea=t.oversea,this._instanceID=t.instanceID,this._statusInstanceID=0,this._isDevMode=t.devMode,this._isTestEnv=t.testEnv,this._proxyServer=t.proxyServer,this._fileUploadProxy=t.fileUploadProxy,this._fileDownloadProxy=t.fileDownloadProxy,this._applicationID=0,this._isPartialUpdatedConvs=t.partialUpdatedConversations,this._isUsingChatCore=!1,this._uiPlatform=0,this._authKey=""}function Ui(e){return r(this,Ui),(e=Xo.call(this,e))._n="UserModule",e._profileHandler=new ki(_(e)),e._blacklistHandler=new Ai(_(e)),e._userStatusHandler=new Li(_(e)),e.getIEmitInst().on(Bo.A2KEY_AND_TINYID_UPDATED,e.onContextUpdated,_(e)),e}function xi(e){r(this,xi),this._userM=e,this._n="UserStatusHandler",this.MAX_QUERY_USER_COUNT=500,this.MAX_SUBSCRIBE_USER_COUNT=100,this.MAX_UNSUBSCRIBE_USER_COUNT=100,this._userM.getIEmitInst().on(Bo.CLOUD_CONFIG,this._onCloudConfig,this)}function Fi(e){r(this,Fi),this._userM=e,this._n="BlacklistHandler",this._blacklistMap=new Map,this.startIndex=0,this.maxLimited=100,this.currentSequence=0}function qi(e){r(this,qi),this._userM=e,this._n="ProfileHandler",this.TAG="profile",this.accountProfileMap=new Map,this.expirationTime=864e5}function Bi(e){return r(this,Bi),(e=Jo.call(this,e))._n="TopicModule",e._topicMap=new Map,e._getTopicTimeMap=new Map,e.TOPIC_CACHE_TIME=300,e.TOPIC_LAST_ACTIVE_TIME=3600,e.getIEmitInst().on(Bo.CLOUD_CONFIG,e._onCloudConfig,_(e)),e}function Vi(e,t){r(this,Vi),this.topicID="",this.topicName="",this.avatar="",this.introduction="",this.notification="",this.unreadCount=0,this.muteAllMembers=!1,this.customData="",this.groupAtInfoList=[],this.nextMessageSeq=0,this.lastMessage=Yo(e.lastMessage,t),this.selfInfo={muteTime:0,readedSequence:0,messageRemindType:"",excludedUnreadSequenceList:void 0},this._initTopic(e)}function Hi(e){return r(this,Hi),(e=Qo.call(this,e))._n="GroupModule",e._commonGroupHandler=new fi(_(e)),e._groupAttributesHandler=new pi(_(e)),e._groupCountersHandler=new hi(_(e)),e._AVChatRoomHandler=new vi(_(e)),e._groupTipsHandler=new di(_(e)),e._groupSystemNoticeHandler=new Ii(_(e)),e._groupMemberHandler=new yi(_(e)),e.groupMap=new Map,e._unjoinedAVChatRoomList=new Map,e._receiptDetailCompleteMap=new Map,e._onlineMemberCountMap=new Map,e._timeoutIDs=[],e.getIEmitInst().on(Bo.CLOUD_CONFIG,e._onCloudConfig,_(e)),e}function ji(e){r(this,ji),this._grpM=e,this._n="GroupSystemNoticeHandler",this.pendencyMap=new Map}function Ki(e){r(this,Ki),this._grpM=e,this._n="GroupMemberHandler",this.groupMemberListMap=new Map,this.DEFAULT_MEMBER_INFO_FILTER=["Role","JoinTime","NameCard","ShutUpUntil","OnlineStatus"],this._grpM.getIEmitInst().on(Bo.PROFILE_UPDATED,this._onProfileUpdated,this)}function Wi(e){r(this,Wi),this.userID="",this.avatar="",this.nick="",this.role="",this.joinTime="",this.lastSendMsgTime="",this.nameCard="",this.muteUntil=0,this.memberCustomField=[],this.isOnline=!1,this.updateMember(e)}function Yi(e){r(this,Yi),this._grpM=e,this._n="AVChatRoomHandler",this._joinedGroupMap=new Map,this._pollingRequestInfoMap=new Map,this._pollingInstanceMap=new Map,this._seqSll=new oi(200),this._IDSll=new oi(100),this._reportMessageStackedCount=0,this._onlineMemberCountMap=new Map,this.DEFAULT_EXPIRE_TIME=60,this.DEFAULT_POLLING_INTERVAL=300,this.MAX_POLLING_INTERVAL=2e3,this._pollingInterval=this.DEFAULT_POLLING_INTERVAL,this.DEFAULT_POLLING_NO_MESSAGE_COUNT=20,this.DEFAULT_POLLING_INTERVAL_PLUS=2e3,this._pollingNoMessageCount=0,this._startBroadcastSeq=1,this._broadcastMessageIDMap=new Map,this.DEFAULT_POLLING_SIMPLIFIED_MSG=0}function zi(e){r(this,zi);var t=e.manager,n=e.groupID,o=e.onInit,i=e.onSuccess;e=e.onFail;this._n="Polling",this._manager=t,this._grpM=t._grpM,this._onInit=o,this._onSuccess=i,this._onFail=e,this._groupID=n,this._timeoutID=-1,this._isRunning=!1,this._proto=Fn.AV_POLLING}function $i(e){r(this,$i),this._grpM=e,this._n="GroupCountersHandler",this._groupCountersMap=new Map,this.EXPIRE_TIME=3e4,this._grpM.getIEmitInst().on(Bo.CLOUD_CONFIG,this._onCloudConfig,this)}function Xi(e){r(this,Xi),this._grpM=e,this._n="GroupAttributesHandler",this._groupAttributesMap=new Map,this._groupAttributesCopy={},this.CACHE_EXPIRE_TIME=3e4,this._grpM.getIEmitInst().on(Bo.CLOUD_CONFIG,this._onCloudConfig,this)}function Ji(e){r(this,Ji),this._grpM=e,this._n="CommonGroupHandler",this.tempConversationList=null,this._cachedGroupMessageMap=new Map,this._checkCountMap=new Map,this.MAX_CHECK_COUNT=4,this.PAGING_GRP_COUNT_LIMIT=200,this._pagingStatus=kn,this._pagingGetCostList=[],e.getIEmitInst().on(Bo.A2KEY_AND_TINYID_UPDATED,this.syncGroupList,this)}function Qi(e){r(this,Qi),this._grpM=e,this._n="GroupTipsHandler",this._cachedGroupTipsMap=new Map,this._checkCountMap=new Map,this.MAX_CHECK_COUNT=4}function Zi(e){return r(this,Zi),(e=Zo.call(this,e))._n="ConvModule",Ko.mixin(_(e)),e._msgListHandler=new Vo(_(e)),e._msgRemindHandler=new ci(_(e)),e._convGroupHandler=new ui(_(e)),e._sll=new oi(100),e._pagingStatus=kn,e._pagingTs=0,e._pagingStartIdx=0,e._pagingPinnedTs=0,e._pagingPinnedStartIdx=0,e._pagingConvIDMap=new Map,e._convIDFromUnreadDBMap=new Map,e._convMap=new Map,e._tmpGroupList=[],e._tmpGroupAtTipsList=[],e._peerReadTimeMap=new Map,e._completedMap=new Map,e._roamingMsgKeyAndTimeMap=new Map,e._remoteGroupReadSeqMap=new Map,e._convTotalUnreadCount=0,e._pagingGetCostList=[],e._convMapForDiff=new Map,e._partialUpdatedConvMap=new Map,e._everClearedMap=new Map,e._bPullOnInvite=!0,e._initListeners(),e}function er(e){r(this,er),this._convM=e,this._n="ConvGroupHandler",this._convGroupMap=new Map,this._startIndex=0,this._pagingStatus=kn}function tr(e){r(this,tr),this._convM=e,this._n="MsgRemindHandler"}function nr(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];r(this,nr),this.conversationID=e.conversationID||"",this.unreadCount=e.unreadCount||0,this.type=e.type||"",this.lastMessage=Wo(e.lastMessage,t,n),e.lastMsgTime&&(this.lastMessage.lastTime=e.lastMsgTime),this._isInfoCompleted=!1,this.peerReadTime=e.peerReadTime||0,this.groupAtInfoList=[],this.remark="",this.isPinned=e.isPinned||!1,this.messageRemindType=e.messageRemindType,this.markList=e.markList||[],this.customData=e.customData||"",this.conversationGroupList=e.conversationGroupList||[],this.draftText=e.draftText||"",this._initProfile(e),this.subType=this.groupProfile?this.groupProfile.type:""}function or(e){r(this,or),this.groupID="",this.name="",this.avatar="",this.type="",this.introduction="",this.notification="",this.ownerID="",this.createTime="",this.infoSequence="",this.lastInfoTime="",this.selfInfo={messageRemindType:"",joinTime:"",nameCard:"",role:"",userID:"",memberCustomField:void 0,readedSequence:0,excludedUnreadSequenceList:void 0},this.lastMessage={lastTime:"",lastSequence:"",fromAccount:"",messageForShow:""},this.nextMessageSeq="",this.memberNum="",this.memberCount="",this.maxMemberNum="",this.maxMemberCount="",this.joinOption="",this.inviteOption="",this.groupCustomField=[],this.muteAllMembers=!1,this.isSupportTopic=!1,this._lastRevokedTime=0,this._initGroup(e)}function ir(e){r(this,ir),this.MAX_LENGTH=e,this.map=new Map}function rr(e){var t=this;r(this,rr),je(e)||(this.userID=e.userID||"",this.nick=e.nick||"",this.gender=e.gender||"",this.birthday=e.birthday||0,this.location=e.location||"",this.selfSignature=e.selfSignature||"",this.allowType=e.allowType||k.ALLOW_TYPE_ALLOW_ANY,this.language=e.language||0,this.avatar=e.avatar||"",this.messageSettings=e.messageSettings||0,this.adminForbidType=e.adminForbidType||k.FORBID_TYPE_NONE,this.level=e.level||0,this.role=e.role||0,this.lastUpdatedTime=0,this.profileCustomField=[],je(e.profileCustomField)||e.profileCustomField.forEach((function(e){t.profileCustomField.push({key:e.key,value:e.value})})))}function ar(){return null}function sr(e){var t=e.get(12);return{SDKType:10,SDKAppID:t.getSDKAppID(),SDKVersion:t.getVersion(),tinyID:Number(t.getTinyID()),userID:t.getUserID(),platform:e.getPlatform(),instanceID:t.getInstanceID(),traceID:Ae()}}c(mr,[{key:"_errorTolerantHandle",value:function(){ee||"undefined"!=typeof window&&this._canIUseCookies()||(this.getItem=ar,this.setItem=ar,this.removeItem=ar,this.clear=ar)}},{key:"onCheckTimer",value:function(e){e%20==0&&0!==this._storageQueue.size&&this._doFlush()}},{key:"_doFlush",value:function(){try{var e,t=S(this._storageQueue);try{for(t.s();!(e=t.n()).done;){var n=m(e.value,2),o=n[0],i=n[1];this._setStorageSync(this._getKey(o),i)}}catch(e){t.e(e)}finally{t.f()}this._storageQueue.clear()}catch(e){we.w("".concat(this._n,"._doFlush error:"),e)}}},{key:"_getPrefix",value:function(){var e=this._m.get(12);return"TIM_".concat(e.getSDKAppID(),"_").concat(e.getUserID(),"_")}},{key:"_getKey",value:function(e){return"".concat(this._getPrefix()).concat(e)}},{key:"getItem",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];try{var n=t?this._getKey(e):e;return this.getStorageSync(n)}catch(e){return we.w("".concat(this._n,".getItem error:"),e),{}}}},{key:"setItem",value:function(e,t){var n;2<arguments.length&&void 0!==arguments[2]&&arguments[2]?(n=3<arguments.length&&void 0!==arguments[3]&&!arguments[3]?e:this._getKey(e),this._setStorageSync(n,t)):this._storageQueue.set(e,t)}},{key:"clear",value:function(){try{ee?ie.clearStorageSync():this._canIUseCookies()&&localStorage.clear()}catch(c){we.w("".concat(this._n,".clear error:"),c)}}},{key:"removeItem",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];try{var n=t?this._getKey(e):e;this._removeStorageSync(n)}catch(e){we.w("".concat(this._n,".removeItem error:"),e)}}},{key:"getSize",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"b";try{var o={size:0,limitSize:5242880,unit:n};if(Object.defineProperty(o,"leftSize",{enumerable:!0,get:function(){return o.limitSize-o.size}}),ee&&(o.limitSize=1024*ie.getStorageInfoSync().limitSize),e)o.size=JSON.stringify(this.getItem(e)).length+this._getKey(e).length;else if(ee)ie.getStorageInfoSync().keys.forEach((function(e){o.size+=JSON.stringify(t.getStorageSync(e)).length+t._getKey(e).length}));else if(this._canIUseCookies())for(var i in localStorage)localStorage.hasOwnProperty(i)&&(o.size+=localStorage.getItem(i).length+i.length);return this._convertUnit(o)}catch(e){we.w("".concat(this._n," error:"),e)}}},{key:"_convertUnit",value:function(e){var t,n={},o=e.unit;for(t in n.unit=o,e)"number"==typeof e[t]&&("kb"===o.toLowerCase()?n[t]=Math.round(e[t]/1024):"mb"===o.toLowerCase()?n[t]=Math.round(e[t]/1024/1024):n[t]=e[t]);return n}},{key:"_setStorageSync",value:function(e,t){ee?$?my.setStorageSync({key:e,data:t}):ie.setStorageSync(e,t):this._canIUseCookies()&&localStorage.setItem(e,JSON.stringify(t))}},{key:"getStorageSync",value:function(e){return ee?$?my.getStorageSync({key:e}).data:ie.getStorageSync(e):this._canIUseCookies()?JSON.parse(localStorage.getItem(e)):{}}},{key:"_removeStorageSync",value:function(e){ee?$?my.removeStorageSync({key:e}):ie.removeStorageSync(e):this._canIUseCookies()&&localStorage.removeItem(e)}},{key:"_canIUseCookies",value:function(){return"undefined"!=typeof window&&navigator&&navigator.cookieEnabled&&localStorage}},{key:"reset",value:function(){we.l("".concat(this._n,".reset")),this._doFlush()}}]);var cr,ur=mr,lr=(c(vr,[{key:"pushIn",value:function(e){we.d("".concat(this._n,".pushIn"),this._report.length,e),this._report.push(e)}},{key:"backfill",value:function(e){var t;Xe(e)&&0!==e.length&&(we.d("".concat(this._n,".backfill"),this._report.length,e.length),(t=this._report).unshift.apply(t,y(e)))}},{key:"getLogsNumInMemory",value:function(){return this._report.length}},{key:"isEmpty",value:function(){return 0===this._report.length}},{key:"_reset",value:function(){this._report.length=0,this._report=[]}},{key:"getLogsInMemory",value:function(){var e=this._report.slice();return this._reset(),e}}]),vr),dr=(l(_r,Rn),cr=v(_r),c(_r,[{key:"reportAtOnce",value:function(){this._report()}},{key:"_onLoginSuccess",value:function(){var e=this,t=this.get(13),n=t.getItem(this.TAG,!1);!je(n)&&Je(n.forEach)&&(we.l("".concat(this._n,"._onLoginSuccess. logs count:").concat(n.length)),n.forEach((function(t){e._reportBody.pushIn(t)})),t.removeItem(this.TAG,!1))}},{key:"_onCloudConfig",value:function(){var e=this.getCloudConfig("evt_rpt_threshold"),t=this.getCloudConfig("evt_rpt_waiting"),n=this.getCloudConfig("evt_rpt_level"),o=this.getCloudConfig("evt_rpt_sdkappid_bl"),i=this.getCloudConfig("evt_rpt_tinyid_wl");dt(e)||(this.MIN_THRESHOLD=Number(e)),dt(t)||(this.WAITING_TIME=Number(t)),dt(n)||(this.REPORT_LEVEL=n.split(",").map((function(e){return Number(e)}))),dt(o)||(this.REPORT_SDKAPPID_BLACKLIST=o.split(",").map((function(e){return Number(e)}))),dt(i)||(this.REPORT_TINYID_WHITELIST=i.split(","))}},{key:"pushIn",value:function(e){e instanceof eo&&(e.updateTimeStamp(),this._reportBody.pushIn(e),this._reportBody.getLogsNumInMemory()>=this.MIN_THRESHOLD&&this._report())}},{key:"onCheckTimer",value:function(){Date.now()<this._lastReportTime+this.WAITING_TIME||this._reportBody.isEmpty()||this._report()}},{key:"_filterLogs",value:function(e){var t=this,n=this.get(12),o=n.getSDKAppID();n=n.getTinyID();return Ut(this.REPORT_SDKAPPID_BLACKLIST,o)&&!xt(this.REPORT_TINYID_WHITELIST,n)?[]:e.filter((function(e){return t.REPORT_LEVEL.includes(e.level)}))}},{key:"_report",value:function(){var e,n,o=this;this._reportBody.isEmpty()||(e=this._reportBody.getLogsInMemory(),0!==(n=this._filterLogs(e)).length?(n={header:sr(this),event:n},this.req({P:Fn.SSO_STAT,data:t({},n)}).then((function(){o._lastReportTime=Date.now()})).catch((function(t){we.w("".concat(o._n,"._report failed. error:"),t),o._lastReportTime=Date.now(),o._reportBody.backfill(e),o._reportBody.getLogsNumInMemory()>o.MAX_THRESHOLD&&o._flushAtOnce()}))):this._lastReportTime=Date.now())}},{key:"_flushAtOnce",value:function(){var e=this.get(13),t=e.getItem(this.TAG,!1),n=this._reportBody.getLogsInMemory(),o="".concat(this._n,"._flushAtOnce");je(t)?(we.l("".concat(o," count:").concat(n.length)),e.setItem(this.TAG,n,!0,!1)):((n=n.concat(t)).length>this.MAX_THRESHOLD&&(n=n.slice(0,this.MAX_THRESHOLD)),we.l("".concat(o," count:").concat(n.length)),e.setItem(this.TAG,n,!0,!1))}},{key:"reset",value:function(){we.l("".concat(this._n,".reset")),this._lastReportTime=0,this._report(),this.REPORT_SDKAPPID_BLACKLIST=[],this.REPORT_TINYID_WHITELIST=[]}}]),_r),fr="none",pr="online",hr=(c(gr,[{key:"_startRN",value:function(){var e,t=this;!ne||(e=this._m.get(18).getPlugin("chat-network-monitor"))&&(this._removeListener=e.addEventListener((function(e){var n=e.isConnected;e=e.type;t._networkType!==e&&t._onNetworkStatusChange({isConnected:void 0!==n&&n,networkType:e})})))}},{key:"start",value:function(){var e=this,t="".concat(this._n,".start");ee?(ie.getNetworkType({success:function(n){e._networkType=n.networkType||n.subtype||"",n.networkType===fr?we.w("".concat(t," no network, please check!")):we.i("".concat(t," networkType:").concat(n.networkType))}}),this._mpNetworkStatusCallback=this._onNetworkStatusChange.bind(this),ie.onNetworkStatusChange(this._mpNetworkStatusCallback)):oe&&(this._networkType=pr,this._webOnlineCallback=this._onWebOnline.bind(this),this._webOfflineCallback=this._onWebOffline.bind(this),window.addEventListener("online",this._webOnlineCallback),window.addEventListener("offline",this._webOfflineCallback))}},{key:"_onWebOnline",value:function(){this._onNetworkStatusChange({isConnected:!0,networkType:pr})}},{key:"_onWebOffline",value:function(){this._onNetworkStatusChange({isConnected:!1,networkType:fr})}},{key:"_onNetworkStatusChange",value:function(e){var t=e.isConnected,n=(e=e.networkType,"".concat(this._n,"._onNetworkStatusChange")),o=!1,i="previous:".concat(this._networkType," current:").concat(e);t?(we.i("".concat(n," ").concat(i)),this._networkType!==e&&(o=!0,this._networkType=e,this._m.get(21).reConnect(!0))):this._networkType!==e&&(o=!0,this._networkType=e,we.w("".concat(n," no network, please check!")),this._m.get(21).offline()),o&&new eo("networkChange").setMessage("isConnected:".concat(t," ").concat(i)).end()}},{key:"isOnline",value:function(){return this._networkType!==fr}},{key:"getNetworkType",value:function(){return this._networkType}},{key:"reset",value:function(){we.l("".concat(this._n,".reset")),ee?null!==this._mpNetworkStatusCallback&&(ie.offNetworkStatusChange&&ie.offNetworkStatusChange(this._mpNetworkStatusCallback),this._mpNetworkStatusCallback=null):oe?(null!==this._webOnlineCallback&&(window.removeEventListener("online",this._webOnlineCallback),this._webOnlineCallback=null),null!==this._onWebOffline&&(window.removeEventListener("offline",this._webOfflineCallback),this._webOfflineCallback=null)):ne&&this._removeListener&&(this._removeListener(),this._removeListener=null)}}]),gr);function gr(e){r(this,gr),this._m=e,this._networkType=pr,this._n="NetMonitorModule",this._mpNetworkStatusCallback=null,this._webOnlineCallback=null,this._webOfflineCallback=null,this._removeListener=null,this._m.getIEmitInst().on(Bo.A2KEY_AND_TINYID_UPDATED,this._startRN,this)}function _r(e){r(this,_r),(e=cr.call(this,e))._n="EventStatModule",e.TAG="im-ssolog-event",e._reportBody=new lr,e.MIN_THRESHOLD=20,e.MAX_THRESHOLD=100,e.WAITING_TIME=6e4,e.REPORT_LEVEL=[4,5,6],e.REPORT_SDKAPPID_BLACKLIST=[],e.REPORT_TINYID_WHITELIST=[],e._lastReportTime=Date.now();var t=e.getIEmitInst();return t.on(Bo.A2KEY_AND_TINYID_UPDATED,e._onLoginSuccess,_(e)),t.on(Bo.CLOUD_CONFIG,e._onCloudConfig,_(e)),e}function vr(e){r(this,vr),this._n="SSOLogBody",this._report=[]}function mr(e){r(this,mr),this._m=e,this._n="StorageModule",this._storageQueue=new Map,this._errorTolerantHandle()}function yr(e,t){return e(t={exports:{}},t.exports),t.exports}var Mr,Ir=yr((function(e){var t=Object.prototype.hasOwnProperty,n="~";function o(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function r(e,t,o,r,a){if("function"!=typeof o)throw new TypeError("The listener must be a function");return o=new i(o,r||e,a),r=n?n+t:t,e._events[r]?e._events[r].fn?e._events[r]=[e._events[r],o]:e._events[r].push(o):(e._events[r]=o,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function s(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,o,i=[];if(0===this._eventsCount)return i;for(o in e=this._events)t.call(e,o)&&i.push(n?o.slice(1):o);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){e=n?n+e:e;var t=this._events[e];if(!t)return[];if(t.fn)return[t.fn];for(var o=0,i=t.length,r=new Array(i);o<i;o++)r[o]=t[o].fn;return r},s.prototype.listenerCount=function(e){return e=n?n+e:e,e=this._events[e],e?e.fn?1:e.length:0},s.prototype.emit=function(e,t,o,i,r,a){var s=n?n+e:e;if(!this._events[s])return!1;var c,u=this._events[s],l=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),l){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,o),!0;case 4:return u.fn.call(u.context,t,o,i),!0;case 5:return u.fn.call(u.context,t,o,i,r),!0;case 6:return u.fn.call(u.context,t,o,i,r,a),!0}for(p=1,c=new Array(l-1);p<l;p++)c[p-1]=arguments[p];u.fn.apply(u.context,c)}else for(var d,f=u.length,p=0;p<f;p++)switch(u[p].once&&this.removeListener(e,u[p].fn,void 0,!0),l){case 1:u[p].fn.call(u[p].context);break;case 2:u[p].fn.call(u[p].context,t);break;case 3:u[p].fn.call(u[p].context,t,o);break;case 4:u[p].fn.call(u[p].context,t,o,i);break;default:if(!c)for(d=1,c=new Array(l-1);d<l;d++)c[d-1]=arguments[d];u[p].fn.apply(u[p].context,c)}return!0},s.prototype.on=function(e,t,n){return r(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return r(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,o,i){if(e=n?n+e:e,!this._events[e])return this;if(!t)return a(this,e),this;var r=this._events[e];if(r.fn)r.fn!==t||i&&!r.once||o&&r.context!==o||a(this,e);else{for(var s=0,c=[],u=r.length;s<u;s++)(r[s].fn!==t||i&&!r[s].once||o&&r[s].context!==o)&&c.push(r[s]);c.length?this._events[e]=1===c.length?c[0]:c:a(this,e)}return this},s.prototype.removeAllListeners=function(e){return e?(e=n?n+e:e,this._events[e]&&a(this,e)):(this._events=new o,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,e.exports=s.EventEmitter=s})),Cr=["rich.my-imcloud.com","imrich.qcloud.com"],br=["requestSnapshotUrl"],Tr=(l(Lr,Rn),Mr=v(Lr),c(Lr,[{key:"_init",value:function(){this._fileDownloadProxy=this.getFileDownloadProxy(),this._authKey=this.getDowloadFileAuthKey();var e=this.get(18);this.TIMUploadPlugin=e.getPlugin("tim-upload-plugin"),this.TIMUploadPlugin?this._initUploaderMethod():(this.COSSDK=e.getPlugin(e=ee?"cos-wx-sdk":"cos-js-sdk"),this.COSSDK?(this._getAuthorizationKey(),this.warn("CosReplacement",e)):this.warn("PluginUndetected"))}},{key:"_onCloudConfig",value:function(){var e=this,t="".concat(this._n,"._onCloudConfig"),n=this.getCloudConfig("upload_size_limit"),o=this.getCloudConfig("simple_cos"),i=this.getCloudConfig("file_dn_list");if(we.l("".concat(t," uploadSizeLimit:").concat(n," simpleCos:").concat(o)),!dt(n))try{var r=JSON.parse(n);this.UPLOAD_SIZE_LIMIT={A:r.a?1048576*parseInt(r.a):this.UPLOAD_SIZE_LIMIT.A,F:r.f?1048576*parseInt(r.f):this.UPLOAD_SIZE_LIMIT.F,I:r.i?1048576*parseInt(r.i):this.UPLOAD_SIZE_LIMIT.I,V:r.v?1048576*parseInt(r.v):this.UPLOAD_SIZE_LIMIT.V}}catch(t){}if(dt(o)||(this.isSimpleCos="1"===o),!dt(i))try{JSON.parse(i).forEach((function(t){e._fileDNList.includes(t)||e._fileDNList.push(t)}))}catch(t){}}},{key:"_getAuthorizationKey",value:function(){var e=this,t="".concat(this._n,".").concat("_getAuthorizationKey"),n=new eo("_getAuthorizationKey"),o=Math.ceil(Date.now()/1e3);this.req({P:Fn.COS_SIGN,data:{duration:this.expiredTimeLimit}}).then((function(i){i=i.data;var r=(we.l("".concat(t," ok. data:"),i),i.expiredTime-o);n.setMessage("requestId:".concat(i.requestId," requestTime:").concat(o," expiredTime:").concat(i.expiredTime," diff:").concat(r,"s")).end(),!ee&&i.region&&(e.region=i.region),e.appid=i.appid,e.bucketName=i.bucketName,e.ciUrl=i.ciUrl,e.directory=i.directory,e.downloadUrl=i.downloadUrl,e.uploadUrl=i.uploadUrl,e.cosOptions={secretId:i.secretId,secretKey:i.secretKey,sessionToken:i.sessionToken,expiredTime:i.expiredTime},we.l("".concat(t," ok. region:").concat(e.region," bucketName:").concat(e.bucketName)),e._initUploaderMethod()})).catch((function(e){n.setError(e).end(),we.w("".concat(t," failed. error:"),e)}))}},{key:"_getCosPreSigUrl",value:function(e){var t=this,n="".concat(this._n,".").concat("_getCosPreSigUrl"),o=Math.ceil(Date.now()/1e3),i=new eo("_getCosPreSigUrl"),r={uploadMethod:e.uploadMethod,platform:this.getPlatform(),SDKAppID:this.getSDKAppID(),userID:e.userID,conversationType:e.conversationType,uploadConfig:[{fileID:1,fileType:e.fileType,fileName:e.fileName}]},a=Fn.SIMPLE_COS_PRE_SIG;return this.isSimpleCos||(r={fileType:e.fileType,fileName:e.fileName,uploadMethod:e.uploadMethod,duration:e.duration},a=Fn.COS_PRE_SIG),this.req({P:a,data:r}).then((function(e){t.tryCount=0;e=e.data||{};var r,a,s=we.l("".concat(n," ok. isSimpleCos:").concat(t.isSimpleCos," data:"),e);return s=t.isSimpleCos?(r=(a=e.preSig[0]).uploadUrl,a=a.fileKey,"uploadIP:".concat(e.uploadIP," uploadUrl:").concat(r," fileKey:").concat(a," cost:").concat(Yt(o))):"requestId:".concat(e.requestId," expiredTime:").concat(e.expiredTime," diff:").concat(e.expiredTime-o,"s"),i.setMessage(s).end(),e})).catch((function(o){return-1===o.code&&(o.code=Un.COS_GET_SIG_FAIL),i.setError(o).end(),we.w("".concat(n," failed. error:"),o),t.tryCount<1?(t.tryCount++,t._getCosPreSigUrl(e)):(t.tryCount=0,Cn({code:Un.COS_GET_SIG_FAIL}))}))}},{key:"_initUploaderMethod",value:function(){var e=this;if(this.TIMUploadPlugin)return this.timUploadPlugin=new this.TIMUploadPlugin,void(this._cosUploadMethod=function(t,n){e.timUploadPlugin.uploadFile(t,n)});this.appid&&(this.cos=ee?new this.COSSDK({ForcePathStyle:!0,getAuthorization:this._getAuthorization.bind(this)}):new this.COSSDK({getAuthorization:this._getAuthorization.bind(this)}),this._cosUploadMethod=ee?function(t,n){e.cos.postObject(t,n)}:function(t,n){e.cos.uploadFiles(t,n)})}},{key:"onCheckTimer",value:function(e){this.COSSDK&&(this.TIMUploadPlugin||this.isLoggedIn()&&e%60==0&&Math.ceil(Date.now()/1e3)>=this.cosOptions.expiredTime-120&&this._getAuthorizationKey())}},{key:"getFileDNList",value:function(){return this._fileDNList}},{key:"_getAuthorization",value:function(e,t){t({TmpSecretId:this.cosOptions.secretId,TmpSecretKey:this.cosOptions.secretKey,XCosSecurityToken:this.cosOptions.sessionToken,ExpiredTime:this.cosOptions.expiredTime})}},{key:"upload",value:function(e){if(!0===e._relayFlag)return Promise.resolve();var t=this.get(26);switch(e.type){case k.MSG_IMAGE:return t.addTotalCount(Wn),this._uploadImage(e);case k.MSG_FILE:return t.addTotalCount(Wn),this._uploadFile(e);case k.MSG_AUDIO:return t.addTotalCount(Wn),this._uploadAudio(e);case k.MSG_VIDEO:return t.addTotalCount(Wn),this._uploadVideo(e);default:return Promise.resolve()}}},{key:"_uploadImage",value:function(e){var n=this,o=this.get(2),i=e.getElements()[0],r=o.getMessageOption(e.clientSequence);return this.doUploadImage({file:r.payload.file,to:r.to,message:e,onProgress:function(e){if(i.updatePercent(e),Je(r.onProgress))try{r.onProgress(e)}catch(e){return Cn({code:Un.MSG_ONPROGRESS_ERR})}}}).then((function(o){var r=o.location,a=o.fileType,s=o.fileSize,c=o.width,u=o.height,l=o.smallImageUrl,d=o.smallImageWidth,f=o.smallImageHeight,p=o.largeImageUrl,h=o.largeImageWidth,g=o.largeImageHeight,_=o.imageInfoArray;o=n.isPrivateNetWork()?r:st(r);i.updateImageFormat(a);var v,m,y={size:s,url:o,width:c,height:u};if(_&&0<_.length)for(var M=0;M<_.length;M++){var I=_[M];1===I.type?v=I:2===I.type?m=I:y=t(t({},y),I)}else m=l&&p?(v={url:l,width:d,height:f},{url:p,width:h,height:g}):(v=wt({originUrl:o,originWidth:c,originHeight:u,min:198}),wt({originUrl:o,originWidth:c,originHeight:u,min:720}));return i.updateImageInfoArray([t({},y),t({},m),t({},v)]),e}))}},{key:"_uploadFile",value:function(e){var t=this,n=this.get(2),o=e.getElements()[0],i=n.getMessageOption(e.clientSequence);return this.doUploadFile({file:i.payload.file,to:i.to,message:e,onProgress:function(e){if(o.updatePercent(e),Je(i.onProgress))try{i.onProgress(e)}catch(e){return Cn({code:Un.MSG_ONPROGRESS_ERR})}}}).then((function(n){n=n.location;var i=n;return t.isPrivateNetWork()||(i=ao(i=st(n),t._fileDownloadProxy,t._authKey,t._fileDNList)),o.updateFileUrl(i),e}))}},{key:"_uploadAudio",value:function(e){var t=this,n=this.get(2),o=e.getElements()[0],i=n.getMessageOption(e.clientSequence);return this.doUploadAudio({file:i.payload.file,to:i.to,message:e,onProgress:function(e){if(o.updatePercent(e),Je(i.onProgress))try{i.onProgress(e)}catch(e){return Cn({code:Un.MSG_ONPROGRESS_ERR})}}}).then((function(n){return n=n.location,n=t.isPrivateNetWork()?n:st(n),o.updateAudioUrl(n),e}))}},{key:"_uploadVideo",value:function(e){var t=this,n=this.get(2),o=e.getElements()[0],i=n.getMessageOption(e.clientSequence);return this.doUploadVideo({file:i.payload.file,to:i.to,message:e,onProgress:function(e){if(o.updatePercent(e),Je(i.onProgress))try{i.onProgress(e)}catch(e){return Cn({code:Un.MSG_ONPROGRESS_ERR})}}}).then((function(n){var i=n.location;n=n.snapshotInfo,i=t.isPrivateNetWork()?i:st(i);return o.updateVideoUrl(i),je(n)||o.updateSnapshotInfo(n),e}))}},{key:"_checkSizeError",value:function(e){var t="";return"A"===e?t="audio":"I"===e?t="image":"V"===e?t="video":"F"===e&&(t="file"),Cn({code:Un["MSG_".concat(e,"_SIZE_LIMIT")],message:this.getErrMsg("UploadSizeLimit",t,"".concat(this.UPLOAD_SIZE_LIMIT[e]/1048576,"MB"))})}},{key:"doUploadImage",value:function(e){var t=this;if(!e.file||this._isEmptyFileList(e.file.files))return Cn({code:Un.MSG_I_SELECT_F_FIRST});var n=this._checkImageType(e.file);if(!0!==n)return n;if(n=this._checkImageSize(e.file),!0!==n)return n;var o=null;return this._setUploadFileType(1),this.uploadByCOS(e).then((function(n){if(o=n,t.isPrivateNetWork())return At(r);if(Xe(o.imageInfoArray)){var i=o.imageInfoArray.find((function(e){return 3===e.type}));if(i)return i}if(ne)return{width:e.file.width,height:e.file.height};var r=st(n.location);return t.COSSDK?At(r):At(r=ao(r,t._fileDownloadProxy,t._authKey,t._fileDNList))})).then((function(e){return o.width=e.width,o.height=e.height,Promise.resolve(o)}))}},{key:"_checkImageType",value:function(e){var t="";t=ee?e.url.slice(e.url.lastIndexOf(".")+1):ne?e.type.split("/")[1]:e.files[0].name.slice(e.files[0].name.lastIndexOf(".")+1);return 0<=ei.indexOf(t.toLowerCase())||Cn({code:Un.MSG_I_TYPES_LIMIT})}},{key:"_checkImageSize",value:function(e){return 0===(e=(ee||ne?e:e.files[0]).size)?Cn({code:Un.MSG_F_IS_EMPTY}):e<this.UPLOAD_SIZE_LIMIT.I||this._checkSizeError("I")}},{key:"doUploadFile",value:function(e){return!e.file||this._isEmptyFileList(e.file.files)?Cn({code:Un.MSG_F_SELECT_F_FIRST}):e.file.files[0].size>this.UPLOAD_SIZE_LIMIT.F?this._checkSizeError("F"):0===e.file.files[0].size?Cn({code:Un.MSG_F_IS_EMPTY}):(this._setUploadFileType(255),this.uploadByCOS(e))}},{key:"doUploadVideo",value:function(e){return e.file.videoFile.size>this.UPLOAD_SIZE_LIMIT.V?this._checkSizeError("V"):0===e.file.videoFile.size?Cn({code:Un.MSG_F_IS_EMPTY}):-1===ti.indexOf(e.file.videoFile.type)?Cn({code:Un.MSG_V_TYPES_LIMIT}):(this._setUploadFileType(2),ee||ne?this.handleVideoUpload(t(t({},e),{},{file:e.file.videoFile})):oe?this.handleVideoUpload(e):void 0)}},{key:"handleVideoUpload",value:function(e){var t=this;return new Promise((function(n,o){t.uploadByCOS(e).then((function(e){n(e)})).catch((function(){t.uploadByCOS(e).then((function(e){n(e)})).catch((function(){o(new Gn({code:Un.MSG_V_UPLOAD_FAIL}))}))}))}))}},{key:"doUploadAudio",value:function(e){return e.file?e.file.size>this.UPLOAD_SIZE_LIMIT.A?this._checkSizeError("A"):0===e.file.size?Cn({code:Un.MSG_F_IS_EMPTY}):(this._setUploadFileType(3),this.uploadByCOS(e)):Cn({code:Un.MSG_A_UPLOAD_FAIL})}},{key:"uploadByCOS",value:function(e){var t=this;if(!Je(this._cosUploadMethod))return this.warn("PluginUndetected"),Cn({code:Un.COS_UNDETECTED});if(this.timUploadPlugin)return this._uploadWithPreSigUrl(e);var n=new eo("upload"),o="".concat(this._n,".uploadByCOS"),i=Date.now(),r=this._getFile(e);return new Promise((function(a,s){var c=ee?t._createCosOptionsWXMiniApp(e):t._createCosOptionsWeb(e),u=t;t._cosUploadMethod(c,(function(e,c){var l=Object.create(null);if(c){if(e||Xe(c.files)&&c.files[0].error)return d=new Gn({code:Un.MSG_F_UPLOAD_FAIL}),n.setError(d).end(),we.l("".concat(o," failed. error:"),c.files[0].error),403===c.files[0].error.statusCode&&t._getAuthorizationKey(),void s(d);l.fileName=r.name,l.fileSize=r.size,l.fileType=r.type.slice(r.type.indexOf("/")+1).toLowerCase(),l.location=(ee?c:c.files[0].data).Location;var d=Date.now()-i,f=(c=u._formatFileSize(r.size),u._formatSpeed(1e3*r.size/d));c="size:".concat(c," time:").concat(d,"ms speed:").concat(f),f=(we.l("".concat(o," success. name:").concat(r.name," ").concat(c)),a(l),t.get(26));return f.addCost(Wn,d),f.addFileSize(Wn,r.size),void n.setMessage(c).end()}l=new Gn({code:Un.MSG_F_UPLOAD_FAIL}),n.setError(l).end(),we.w("".concat(o," failed. error:"),e),403===e.statusCode&&t._getAuthorizationKey(),s(l)}))}))}},{key:"_uploadWithPreSigUrl",value:function(e){var t=this,n="".concat(this._n,"._uploadWithPreSigUrl"),o=this._getFile(e);return this._createCosOptionsPreSigUrl(e).then((function(e){return new Promise((function(i,r){var a=new eo("upload"),s=e.requestSnapshotUrl,c=void 0===s?void 0:s,u=g(e,br),l=Date.now();t._cosUploadMethod(u,(function(s,d){var f,p,h;return s||403===d.statusCode?(a.setError(new Gn(s)).end(),p={HttpStatusCode:9999,CostTime:Yt(l,!1),error:s,url:e.url},d.data&&d.data.uploadIP&&(p.uploadIP=d.data.uploadIP),t._uploadSSOLog(p),we.l("".concat(n," failed, error:"),s),void r(new Gn({code:Un.MSG_F_UPLOAD_FAIL}))):(f=Object.create(null),p=d.data.location||"",t.isPrivateNetWork()||0!==p.indexOf("https://")&&0!==p.indexOf("http://")||(p=p.split("//")[1]),f.fileName=o.name,f.fileSize=o.size,f.fileType=o.type.slice(o.type.indexOf("/")+1).toLowerCase(),f.location=p,s=Yt(l,!1),p=t._formatFileSize(o.size),h=t._formatSpeed(1e3*o.size/s),p="size:".concat(p," time:").concat(s,"ms speed:").concat(h," res:").concat(JSON.stringify(d.data)),we.l("".concat(n," ok. name:").concat(o.name," ").concat(p)),a.setMessage(p).end(),h={HttpStatusCode:d.statusCode,FileSize:o.size,CostTime:s,url:e.url},d.data&&d.data.uploadIP&&(h.uploadIP=d.data.uploadIP),t._uploadSSOLog(h),(p=t.get(26)).addCost(Wn,s),p.addFileSize(Wn,o.size),h=[],u.thumbUrl&&u.largeUrl&&h.push.apply(h,[t._getSmallImageInfoByUrl(u.thumbUrl,f),t._getLargeImageInfoByUrl(u.largeUrl,f)]),1===t.uploadFileType&&t.isSimpleCos&&!t.isPrivateNetWork()&&(h.push(t._getImageInfoArray(u.downloadUrl,f)),d.data.uploadIP&&h.push(t._getDownloadIP(u.downloadUrl.split("//")[1].split("/")[0],f))),c&&h.push(t._getSnapshotInfoByUrl(c,f)),0<h.length?Promise.all(h).then((function(){i(f)})):void i(f))}))}))}))}},{key:"_getDownloadIP",value:function(e,t){var n="".concat(this._n,"._getDownloadIP"),o=Date.now();return this.req({P:Fn.GET_IP,data:{domainName:e}}).then((function(e){var i;e.data&&e.data.ip&&(we.l("".concat(n," ok. downloadIP:").concat(e.data.ip," cost:").concat(Yt(o))),(i=t.location.split("/"))[0]=e.data.ip,t.location=i.join("/"))})).catch((function(e){}))}},{key:"_getImageInfoArray",value:function(e,t){var n=this,o="".concat(this._n,"._getImageInfoArray"),i=Date.now();return this.req({P:Fn.GET_IMAGE_INFO,data:{imageUrl:e}}).then((function(e){return e=e.data||{},we.l("".concat(o," ok. data: ").concat(JSON.stringify(e)," cost:").concat(Yt(i))),t.imageInfoArray=e.imageInfoArray,e})).catch((function(o){t.imageInfoArray=void 0,n._uploadSSOLog({HttpStatusCode:1e4,CostTime:Yt(i,!1),url:e})}))}},{key:"_uploadSSOLog",value:function(e){var t,n;this.isSimpleCos&&((t=new eo).setEventType(18),e.error&&t.setError(new Gn(e.error)),n="HttpStatusCode:".concat(e.HttpStatusCode,"|CosRequestId:").concat(e.CosRequestId||"","|")+"FileAlreadyExist:".concat(e.FileAlreadyExist||0,"|FileSize:").concat(e.FileSize||0,"|CostTime:").concat(e.CostTime),e.uploadIP&&(n+="|FinalIP:".concat(e.uploadIP)),t.setMessage("OK").setMoreMessage(e.url).setExtension(n).end())}},{key:"_getRawOrUploadProxyUrl",value:function(e){var t=this.get(12).getFileUploadProxy(),n=e;return t?e.replace(/^https:\/\/[^/]+/,t):n}},{key:"_getFile",value:function(e){return Xe(e.file.files)||Qe(e.file.files)?e.file.files[0]:e.file}},{key:"_formatFileSize",value:function(e){return e<1024?e+"B":e<1048576?Math.floor(e/1024)+"KB":Math.floor(e/1048576)+"MB"}},{key:"_formatSpeed",value:function(e){return e<=1048576?Gt(e/1024,1)+"KB/s":Gt(e/1048576,1)+"MB/s"}},{key:"_createCosOptionsWeb",value:function(e){var t=this._getFile(e),n=t.name;n=n.slice(n.lastIndexOf(".")),n=this._genFileName("".concat(it(999999)).concat(n));return{files:[{Bucket:"".concat(this.bucketName,"-").concat(this.appid),Region:this.region,Key:"".concat(this.directory,"/").concat(n),Body:t}],SliceSize:1048576,onProgress:function(t){if("function"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(t){we.w("onProgress callback error:",t)}},onFileFinish:function(e,t,n){}}}},{key:"_createCosOptionsWXMiniApp",value:function(e){var t=this._getFile(e),n=this._genFileName(t.name);t=t.url;return{Bucket:"".concat(this.bucketName,"-").concat(this.appid),Region:this.region,Key:"".concat(this.directory,"/").concat(n),FilePath:t,onProgress:function(t){if(we.l(JSON.stringify(t)),"function"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(t){we.w("onProgress callback error:",t)}}}}},{key:"_createCosOptionsPreSigUrl",value:function(e){var t,n=this,o="",i="",r=this._getFile(e),a=ee||ne?(o=e.message.type===k.MSG_FILE?(t=(t=r.name).slice(t.lastIndexOf(".")),this._genFileName("".concat(it(999999)).concat(t))):this._genFileName(r.name),i=r.url,1):(t=(t=r.name).slice(t.lastIndexOf(".")),o=this._genFileName("".concat(it(999999)).concat(t)),i=r,0);return this._getCosPreSigUrl({fileType:this.uploadFileType,fileName:o,uploadMethod:a,duration:this.duration,userID:e.message.from,conversationType:St(e.message.conversationID)?1:2}).then((function(t){var r=n.isSimpleCos?t.preSig[0]:t,a=r.uploadUrl,s=r.downloadUrl,c=r.requestSnapshotUrl,u=(c=void 0===c?void 0:c,r.thumbUrl),l=r.largeUrl;r=r.fileKey,t=t.uploadIP,t=void 0===t?"":t;return{url:n._getRawOrUploadProxyUrl(a),fileType:n.uploadFileType,fileName:o,resources:i,downloadUrl:s,requestSnapshotUrl:c,thumbUrl:u,largeUrl:l,fileKey:r,uploadIP:!n.isPrivateNetWork()&&t,onProgress:function(t){if("function"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(t){we.w("onProgress callback error:",t),we.e(t)}}}}))}},{key:"_genFileName",value:function(e){return"".concat(Lt(),"-").concat(e)}},{key:"_setUploadFileType",value:function(e){this.uploadFileType=e}},{key:"_getSnapshotInfoByUrl",value:function(e,t){var n=this,o="_getSnapshotInfoByUrl",i=new eo(o);return this.req({P:Fn.VIDEO_COVER,data:{platform:this.getPlatform(),coverName:this._genFileName(it(99999)),requestSnapshotUrl:e}}).then((function(e){if(e=(e.data||{}).snapshotUrl,we.l("".concat(n._n,".").concat(o," ok. snapshotUrl:").concat(e)),i.setMessage("snapshotUrl:".concat(e)).end(),je(e))return{};var r=ao(e,n._fileDownloadProxy,n._authKey,n._fileDNList);return At(r).then((function(e){t.snapshotInfo={snapshotUrl:r,snapshotWidth:e.width,snapshotHeight:e.height}}))})).catch((function(e){return we.w("".concat(n._n,".").concat(o," failed. error:"),e),i.setCode(e.errorCode).setMessage(e.errorInfo).end(),{}}))}},{key:"_getSmallImageInfoByUrl",value:function(e,t){return At(ao(e,this._fileDownloadProxy,this._authKey,this._fileDNList)).then((function(n){t.smallImageUrl=e,t.smallImageWidth=n.width,t.smallImageHeight=n.height}))}},{key:"_getLargeImageInfoByUrl",value:function(e,t){return At(ao(e,this._fileDownloadProxy,this._authKey,this._fileDNList)).then((function(n){t.largeImageUrl=e,t.largeImageWidth=n.width,t.largeImageHeight=n.height}))}},{key:"_isEmptyFileList",value:function(e){return!(!Qe(e)||0!==e.length)}},{key:"reset",value:function(){we.l("".concat(this._n,".reset"))}}]),Lr),Sr=["downloadKey","pbDownloadKey","messageList"],Er=(c(Ar,[{key:"uploadMergerMessage",value:function(e,t){var n="".concat(this._n,".").concat("uploadMergerMessage"),o=(e=(we.d("".concat(n," message:"),e,"messageBytes:".concat(t)),JSON.parse(JSON.stringify(e.payload)).messageList),e.length),i=this._msgM.get(17).getFileDNList(),r=new eo("uploadMergerMessage");return e.forEach((function(e){so(e.messageBody[0].type,e.messageBody,i)})),this._msgM.req({P:Fn.UPLOAD_MERGER_MSG,data:{messageList:e}}).then((function(e){we.d("".concat(n," ok. response:"),e.data);e=e.data;var i=e.pbDownloadKey;e=e.downloadKey,i={pbDownloadKey:i,downloadKey:e,messageNumber:o};return r.setMessage("".concat(o,"-").concat(t,"-").concat(e)).end(),i})).catch((function(e){throw we.w("".concat(n," failed. error:"),e),r.setError(e).end(),e}))}},{key:"downloadMergerMessage",value:function(e){var n=this,o="".concat(this._n,".").concat("downloadMergerMessage"),i=(we.d("".concat(o," message:"),e),e.payload.downloadKey),r=this._msgM.getFileDownloadProxy(),a=this._msgM.getDowloadFileAuthKey(),s=new eo("downloadMergerMessage");return s.setMessage("downloadKey:".concat(i)),this._msgM.req({P:Fn.DOWNLOAD_MERGER_MSG,data:{downloadKey:i}}).then((function(i){we.d("".concat(o," ok. response:"),i.data);var c,u,l=n._msgM.get(17).getFileDNList();return Je(e.clearElement)?((c=e.payload).downloadKey,c.pbDownloadKey,c.messageList,c=g(c,Sr),e.clearElement(),e.setElement({type:e.type,content:t({messageList:i.data.messageList},c)},r,a,l)):(u=[],i.data.messageList.forEach((function(e){je(e)||(e=new Co(e,r,a,l),u.push(e))})),e.payload.messageList=u,e.payload.downloadKey="",e.payload.pbDownloadKey=""),s.end(),e})).catch((function(e){throw we.w("".concat(o," failed. key:").concat(i," error:"),e),s.setError(e).end(),e}))}},{key:"createMergerMessagePack",value:function(e,t,n){return e.conversationType===k.CONV_C2C?this._createC2CMergerMessagePack(e,t,n):this._createGroupMergerMessagePack(e,t,n)}},{key:"_createC2CMergerMessagePack",value:function(e,t,n){var o=null,i=(t&&(t.offlinePushInfo&&(o=t.offlinePushInfo),!0===t.onlineUserOnly&&(o?o.disablePush=!0:o={disablePush:!0})),[]),r=($e(t)&&$e(t.messageControlInfo)&&(r=(s=t.messageControlInfo).excludedFromUnreadCount,a=s.excludedFromLastMessage,s=s.excludedFromContentModeration,!0===r&&i.push("NoUnread"),!0===a&&i.push("NoLastMsg"),!0===s&&i.push("NoMsgCheck")),""),a=(lt(e.cloudCustomData)&&0<e.cloudCustomData.length&&(r=e.cloudCustomData),n.pbDownloadKey),s=n.downloadKey,c=(n=n.messageNumber,e.payload),u=c.title,l=c.abstractList,d=(c=c.compatibleText,this._msgM.get(6));d=d&&d.isOnlineMessage(e,t)?0:void 0;return{P:Fn.SEND_C2C_MSG,tjgID:this._msgM.generateTjgID(e),data:{fromAccount:this._msgM.getMyUserID(),toAccount:e.to,msgBody:[{msgType:e.type,msgContent:{pbDownloadKey:a,downloadKey:s,title:u,abstractList:l,compatibleText:c,messageNumber:n}}],cloudCustomData:r,clientTime:e.clientTime,msgSeq:e.sequence,msgRandom:e.random,msgLifeTime:d,offlinePushInfo:xo(o),messageControlInfo:0!==d?i:void 0,isSupportExtension:!0===e.isSupportExtension?1:0,isRelayMessage:!0===e._relayFlag?1:0}}}},{key:"_createGroupMergerMessagePack",value:function(e,t,n){var o=null,i=(t&&t.offlinePushInfo&&(o=t.offlinePushInfo),[]),r=($e(t)&&$e(t.messageControlInfo)&&(r=(s=t.messageControlInfo).excludedFromUnreadCount,a=s.excludedFromLastMessage,s=s.excludedFromContentModeration,!0===r&&i.push("NoUnread"),!0===a&&i.push("NoLastMsg"),!0===s&&i.push("NoMsgCheck")),""),a=(lt(e.cloudCustomData)&&0<e.cloudCustomData.length&&(r=e.cloudCustomData),n.pbDownloadKey),s=n.downloadKey,c=(n=n.messageNumber,e.payload),u=c.title,l=c.abstractList,d=(c=c.compatibleText,this._msgM.get(7));t=d&&d.isOnlineMessage(e,t)?1:0;return{P:Fn.SEND_GRP_MSG,tjgID:this._msgM.generateTjgID(e),data:{fromAccount:this._msgM.getMyUserID(),groupID:e.to,msgBody:[{msgType:e.type,msgContent:{pbDownloadKey:a,downloadKey:s,title:u,abstractList:l,compatibleText:c,messageNumber:n}}],random:e.random,priority:e.priority,clientSequence:e.clientSequence,groupAtInfo:void 0,cloudCustomData:r,onlineOnlyFlag:t,offlinePushInfo:xo(o),clientTime:e.clientTime,needReadReceipt:!0!==e.needReadReceipt||d.isMessageFromOrToAVChatroom(e.to)?0:1,messageControlInfo:0==t?i:void 0,isSupportExtension:!0===e.isSupportExtension?1:0,isRelayMessage:!0===e._relayFlag?1:0}}}}]),Ar),kr={ERR_SVR_COMM_SENSITIVE_TEXT:80001,ERR_SVR_COMM_BODY_SIZE_LIMIT:80002,OPEN_SERVICE_OVERLOAD_ERROR:60022,ERR_SVR_MSG_PKG_PARSE_FAILED:20001,ERR_SVR_MSG_INTERNAL_AUTH_FAILED:20002,ERR_SVR_MSG_INVALID_ID:20003,ERR_SVR_MSG_PUSH_DENY:20006,ERR_SVR_MSG_IN_PEER_BLACKLIST:20007,ERR_SVR_MSG_BOTH_NOT_FRIEND:20009,ERR_SVR_MSG_NOT_PEER_FRIEND:20010,ERR_SVR_MSG_NOT_SELF_FRIEND:20011,ERR_SVR_MSG_SHUTUP_DENY:20012,ERR_SVR_GROUP_INVALID_PARAMETERS:10004,ERR_SVR_GROUP_PERMISSION_DENY:10007,ERR_SVR_GROUP_NOT_FOUND:10010,ERR_SVR_GROUP_INVALID_GROUPID:10015,ERR_SVR_GROUP_REJECT_FROM_THIRDPARTY:10016,ERR_SVR_GROUP_SHUTUP_DENY:10017,MSG_SEND_FAIL:2100,OVER_FREQUENCY_LIMIT:2996},Dr=[Un.MSG_ONPROGRESS_ERR,Un.MSG_I_SELECT_F_FIRST,Un.MSG_I_TYPES_LIMIT,Un.MSG_F_IS_EMPTY,Un.MSG_I_SIZE_LIMIT,Un.MSG_F_SELECT_F_FIRST,Un.MSG_F_SIZE_LIMIT,Un.MSG_V_SIZE_LIMIT,Un.MSG_V_TYPES_LIMIT,Un.MSG_A_UPLOAD_FAIL,Un.MSG_A_SIZE_LIMIT,Un.COS_UNDETECTED];function Ar(e){r(this,Ar),this._n="MergerMessageHandler",this._msgM=e}function Lr(e){r(this,Lr),(e=Mr.call(this,e))._n="UploadModule",e.TIMUploadPlugin=null,e.timUploadPlugin=null,e.COSSDK=null,e._cosUploadMethod=null,e.expiredTimeLimit=600,e.appid=0,e.bucketName="",e.ciUrl="",e.directory="",e.downloadUrl="",e.uploadUrl="",e.region="ap-shanghai",e.cos=null,e.cosOptions={secretId:"",secretKey:"",sessionToken:"",expiredTime:0},e.uploadFileType="",e.duration=900,e.tryCount=0,e.UPLOAD_SIZE_LIMIT={A:20971520,F:104857600,I:20971520,V:104857600},e.isSimpleCos=!1,e._fileDownloadProxy="",e._authKey="",e._fileDNList=Cr;var t=e.getIEmitInst();return t.on(Bo.A2KEY_AND_TINYID_UPDATED,e._init,_(e)),t.on(Bo.CLOUD_CONFIG,e._onCloudConfig,_(e)),e}function Or(e){var t=!1;return Object.values(kr).includes(e)&&(t=!0),120001<=e&&e<=13e4||10100<=e&&e<=10200||t}var Rr,wr,Nr,Pr,Gr,Ur,xr=["conversationID","timePosition","timePeriod"],Fr=(l(Jr,Rn),Ur=v(Jr),c(Jr,[{key:"createTextMessage",value:function(e){var t=this.getMyUserID(),n=(e.currentUser=t,e.senderTinyID=this.getMyTinyID(),new So(e));e=lt(e.payload)?e.payload:e.payload.text,e=new to({text:e}),t=this._getNickAndAvatarByUserID(t);return n.setElement(e),n.setNickAndAvatar(t),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:"createImageMessage",value:function(e){var t=this.getMyUserID(),n=(e.currentUser=t,e.senderTinyID=this.getMyTinyID(),new So(e));if(ee){var o=e.payload.file;if(We(o))return void this.warn("FileUnsupportedInMP","createImageMessage");var i=o.tempFiles[0].path||o.tempFiles[0].tempFilePath;o={url:i,name:i.slice(i.lastIndexOf("/")+1),size:o.tempFiles&&o.tempFiles[0].size||1,type:i.slice(i.lastIndexOf(".")+1).toLowerCase()};e.payload.file=o}else ne?(o={url:(i=e.payload.file).uri,name:i.fileName,size:i.fileSize||1,type:i.type,width:i.width,height:i.height},e.payload.file=o):oe&&(We(e.payload.file)?(i=e.payload.file,e.payload.file={files:[i]}):$e(e.payload.file)&&"undefined"!=typeof uni&&(o=e.payload.file.tempFiles[0],e.payload.file={files:[o]}));return i=new lo({imageFormat:Ne.UNKNOWN,uuid:this._generateUUID(e.payload.file),file:e.payload.file}),o=this._getNickAndAvatarByUserID(t),n.setElement(i),n.setNickAndAvatar(o),n.setNameCard(this._getNameCardByGroupID(n)),this._messageOptionsMap.set(n.clientSequence,e),n}},{key:"createAudioMessage",value:function(e){var t=e.payload.file,n=(ee&&(n={url:t.tempFilePath,name:t.tempFilePath.slice(t.tempFilePath.lastIndexOf("/")+1),size:t.fileSize,second:parseInt(t.duration)/1e3,type:t.tempFilePath.slice(t.tempFilePath.lastIndexOf(".")+1).toLowerCase()},e.payload.file=n),ne&&(n={url:t.uri,name:t.uri.slice(t.uri.lastIndexOf("/")+1),size:t.fileSize||1,second:Math.floor(t.duration/1e3),type:t.uri.slice(t.uri.lastIndexOf(".")+1).toLowerCase()},e.payload.file=n),this.getMyUserID()),o=(e.currentUser=n,e.senderTinyID=this.getMyTinyID(),new So(e));t=new po({second:Math.floor(t.duration/1e3),size:t.fileSize||t.size||1,url:t.tempFilePath,uuid:this._generateUUID(e.payload.file)}),n=this._getNickAndAvatarByUserID(n);return o.setElement(t),o.setNickAndAvatar(n),o.setNameCard(this._getNameCardByGroupID(o)),this._messageOptionsMap.set(o.clientSequence,e),o}},{key:"createVideoMessage",value:function(e){var t=this.getMyUserID(),n=(e.currentUser=t,e.senderTinyID=this.getMyTinyID(),e.payload.file.thumbUrl="",e.payload.file.thumbSize=0,{});if(ee){if($)return void this.warn("VideoUnsupportedInAlipay");if(We(e.payload.file))return void this.warn("FileUnsupportedInMP","createVideoMessage");var o=e.payload.file;Xe(o.tempFiles)&&(o=o.tempFiles[0]),n.url=o.tempFilePath,n.name=o.tempFilePath.slice(o.tempFilePath.lastIndexOf("/")+1),n.size=o.size||1,n.second=o.duration||0,n.type=o.tempFilePath.slice(o.tempFilePath.lastIndexOf(".")+1).toLowerCase()}else ne?(o=e.payload.file,n.url=o.uri,n.name=o.fileName,n.size=o.fileSize||1,n.second=o.duration||0,n.type=o.type.split("/")[1]):oe&&(We(e.payload.file)?(o=e.payload.file,e.payload.file.files=[o]):$e(e.payload.file)&&"undefined"!=typeof uni&&(o=e.payload.file.tempFile,e.payload.file.files=[o]),o=e.payload.file,n.url=window.URL.createObjectURL(o.files[0]),n.name=o.files[0].name,n.size=o.files[0].size||1,n.second=o.files[0].duration||0,n.type=o.files[0].type.split("/")[1]);return e.payload.file.videoFile=n,o=new So(e),n=new Mo({videoFormat:n.type,videoSecond:Gt(n.second,0),videoSize:n.size,remoteVideoUrl:"",videoUrl:n.url,videoUUID:this._generateUUID(e.payload.file.videoFile),thumbUUID:this._generateUUID(e.payload.file.videoFile),thumbWidth:e.payload.file.width||200,thumbHeight:e.payload.file.height||200,thumbUrl:e.payload.file.thumbUrl,thumbSize:e.payload.file.thumbSize,thumbFormat:e.payload.file.thumbUrl.slice(e.payload.file.thumbUrl.lastIndexOf(".")+1).toLowerCase()}),t=this._getNickAndAvatarByUserID(t),o.setElement(n),o.setNickAndAvatar(t),o.setNameCard(this._getNameCardByGroupID(o)),this._messageOptionsMap.set(o.clientSequence,e),o}},{key:"createCustomMessage",value:function(e){var t=this.getMyUserID(),n=(e.currentUser=t,e.senderTinyID=this.getMyTinyID(),new So(e));e=new yo({data:e.payload.data,description:e.payload.description,extension:e.payload.extension}),t=this._getNickAndAvatarByUserID(t);return n.setElement(e),n.setNickAndAvatar(t),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:"createFaceMessage",value:function(e){var t=this.getMyUserID(),n=(e.currentUser=t,e.senderTinyID=this.getMyTinyID(),new So(e));e=new fo(e.payload),t=this._getNickAndAvatarByUserID(t);return n.setElement(e),n.setNickAndAvatar(t),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:"createMergerMessage",value:function(e){var t=this.getMyUserID(),n=(t=(e.currentUser=t,e.senderTinyID=this.getMyTinyID(),this._getNickAndAvatarByUserID(t)),new So(e));e=new bo(e.payload);return n.setElement(e),n.setNickAndAvatar(t),n.setNameCard(this._getNameCardByGroupID(n)),n.setRelayFlag(!0),n}},{key:"createForwardMessage",value:function(e){var t=e.to,n=e.conversationType,o=e.priority,i=e.payload,r=e.needReadReceipt,a=e.receiverList;if(!Xe(i._elements))return Cn({code:Un.MSG_FORWARD_INVALID_ELEMENTS});var s=this.getMyUserID(),c=this._getNickAndAvatarByUserID(s);return i.type===k.MSG_GRP_TIP?Cn({code:Un.MSG_FORWARD_TYPE_INVALID}):(n={to:t,conversationType:n,conversationID:"".concat(n).concat(t),priority:o,isPlaceMessage:0,status:Tn,currentUser:s,senderTinyID:this.getMyTinyID(),cloudCustomData:e.cloudCustomData||i.cloudCustomData||"",needReadReceipt:r,receiverList:a,isSupportExtension:e.isSupportExtension||!1},t=new So(n),t.setElement(i._elements[0]),t.setNickAndAvatar(c),t.setNameCard(this._getNameCardByGroupID(i)),t.setRelayFlag(!0),t)}},{key:"downloadMergerMessage",value:function(e){return this._mergerMessageHandler.downloadMergerMessage(e)}},{key:"createFileMessage",value:function(e){if(ee){if(!j&&!W&&!J)return;var n=ie.getSystemInfoSync().SDKVersion;if(j&&Rt(n,"2.5.0")<0)return void this.warn("WXChooseMessageFile");if(W&&Rt(n,"1.18.0")<0)return void this.warn("QQChooseMessageFile")}oe||J?We(e.payload.file)?(n=e.payload.file,e.payload.file={files:[n]}):$e(e.payload.file)&&"undefined"!=typeof uni&&(i=(n=e.payload.file).tempFiles,n=n.files,o=null,Xe(i)?o=i[0]:Xe(n)&&(o=n[0]),e.payload.file={files:[o]}):j||W?(n=t(t({},(i=e.payload.file.tempFiles)[0]),{},{url:i[0].path}),e.payload.file={files:[n]}):ne&&(i=t(t({},o=e.payload.file),{},{url:o.uri}),e.payload.file={files:[i]});n=this.getMyUserID();var o=(e.currentUser=n,e.senderTinyID=this.getMyTinyID(),new So(e)),i=new mo({uuid:this._generateUUID(e.payload.file),file:e.payload.file});n=this._getNickAndAvatarByUserID(n);return o.setElement(i),o.setNickAndAvatar(n),o.setNameCard(this._getNameCardByGroupID(o)),this._messageOptionsMap.set(o.clientSequence,e),o}},{key:"createLocationMessage",value:function(e){var t=this.getMyUserID(),n=(e.currentUser=t,e.senderTinyID=this.getMyTinyID(),new So(e));e=new Io(e.payload),t=this._getNickAndAvatarByUserID(t);return n.setElement(e),n.setNickAndAvatar(t),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:"_onNoModule",value:function(){return Cn({code:Un.NO_MODULE})}},{key:"sendMessageInstance",value:function(e,t){var n=this;if(!1===this.get(29).filterMessage(e,t))return e.hasRiskContent=!0,this._onSendMessageFailed(e,new Gn({code:Un.PROFANITY_FOUND}));var o=null;if(e.conversationType===k.CONV_C2C)o=this.get(6);else{if(e.conversationType!==k.CONV_GROUP)return Cn({code:Un.MSG_INVALID_CONV_TYPE});o=this.get(7)}if(!o)return this._onNoModule();var i,r="".concat(this._n,".sendMessageInstance"),a=this.get(11),s=o.isOnlineMessage(e,t);return this.get(17).upload(e).then((function(){return n._getSendMessageSpecifiedKey(e)===Kn&&n.get(26).addSuccessCount(Wn),n._guardForGroup(e).then((function(){if(!e.isSendable())return Cn({code:Un.MSG_F_URL_IS_EMPTY});n._addSendMessageTotalCount(e),i=Date.now();var r=function(e){var t="utf-8";oe&&document&&(t=document.charset.toLowerCase());var n,o=0,i=e.length;if("utf-8"===t||"utf8"===t)for(var r=0;r<i;r++)(n=e.codePointAt(r))<=127?o+=1:n<=2047?o+=2:n<=65535?o+=3:(o+=4,r++);else if("utf-16"===t||"utf16"===t)for(var a=0;a<i;a++)(n=e.codePointAt(a))<=65535?o+=2:(o+=4,a++);else o=e.replace(/[^\x00-\xff]/g,"aa").length;return o}(JSON.stringify(e));return e.type===k.MSG_MERGER&&11264<r?n._mergerMessageHandler.uploadMergerMessage(e,r).then((function(o){return o=n._mergerMessageHandler.createMergerMessagePack(e,t,o),n.req(o)})):(a.setMessageRandom(e),o.sendMessage(e,t))})).then((function(o){o=o.data;var c,u=o.time,l=o.sequence,d=o.readReceiptCode;o=o.messageDropReason,Ye(d)&&0!==d&&(new eo("sendMessageWithReceipt").setMessage("from:".concat(e.from," to:").concat(e.to," sequence:").concat(l," readReceiptCode:").concat(d)).end(),we.w("".concat(r," readReceiptCode:").concat(d," message:").concat(n.getErrMsg(d)))),o&&(d=new eo("messageDropReason"),o="from:".concat(e.from," to:").concat(e.to," sequence:").concat(l," messageDropReason:").concat(o),d.setMessage(o).end(),we.w("".concat(r," ").concat(o))),n._addSendMessageSuccessCount(e,i),n._messageOptionsMap.delete(e.clientSequence),!0===e.isResend&&(c=a.findMessage(e.ID))&&(we.l("".concat(r," resend ok. ID:").concat(c.ID)),a.deleteLocalMessage(c)),e.status=Sn,e.time=u,d=!1;return e.conversationType===k.CONV_GROUP?e.sequence=l:e.conversationType!==k.CONV_C2C||(o=a.getLatestMessageSentByMe(e.conversationID))&&(c=o.nick,u=o.avatar,c===e.nick&&u===e.avatar||(d=!0)),d&&a.modifyMessageSentByMe({conversationID:e.conversationID,latestNick:e.nick,latestAvatar:e.avatar}),!0===s?e._onlineOnlyFlag=!0:(a.appendToMessageList(e),l=e,$e(t)&&$e(t.messageControlInfo)&&(!0===t.messageControlInfo.excludedFromLastMessage&&(e._isExcludedFromLastMessage=!0,l=""),!0===t.messageControlInfo.excludedFromUnreadCount&&(e._isExcludedFromUnreadCount=!0)),o=e.conversationType,Tt(e.to)&&(o=k.CONV_TOPIC,n.get(10).onMessageSent({groupID:Ft(e.to),topicID:e.to,lastMessage:l})),a.onMessageSent({conversationOptionsList:[{conversationID:e.conversationID,unreadCount:0,type:o,subType:e.conversationSubType,lastMessage:l}]})),e._relayFlag||"TIMImageElem"!==e.type||Nt(e.payload.imageInfoArray),Mn({message:e})}))})).catch((function(t){return n._onSendMessageFailed(e,t,s)}))}},{key:"_guardForGroup",value:function(e){if(e.conversationType!==k.CONV_GROUP)return Promise.resolve();var t=this.get(7);if(!t)return this._onNoModule();if(bt({groupID:e.to})){var n=t.getLocalGroupProfile(e.to);if(n&&n.isSupportTopic)return Cn({code:Un.MSG_SEND_GRP_WITH_TOPIC_FAIL})}return t.guardForAVChatRoom(e)}},{key:"_onSendMessageFailed",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],o="".concat(this._n,"._onSendMessageFailed"),i=(e.status=En,80001!==t.code&&80004!==t.code||(e.hasRiskContent=!0),this.get(11)),r=(i.deleteMessageRandom(e),10100<=t.code&&t.code<=10200||120001<=t.code&&t.code<=13e4);n||r||!0===i.appendToMessageList(e)&&we.l("".concat(o," message stored, ID:").concat(e.ID)),this._addSendMessageFailCountOnUser(e,t),n=new eo("sendMessage"),r="tjg_id:".concat(this.generateTjgID(e)," type:").concat(e.type," from:").concat(e.from," to:").concat(e.to);return oe&&("connection"in navigator&&(i=navigator.connection,r+=" downlink:".concat(i.downlink," effectiveType:").concat(i.effectiveType," rtt:").concat(i.rtt)),"memory"in window.performance&&(i=window.performance.memory,r+=" usedJSHeapSize:".concat(i.usedJSHeapSize," totalJSHeapSize:").concat(i.totalJSHeapSize," jsHeapSizeLimit:").concat(i.jsHeapSizeLimit))),n.setMessage(r).setError(t).end(),we.e("".concat(o," error:"),t),Cn(new Gn({code:t&&t.code?t.code:Un.MSG_SEND_FAIL,message:t&&t.message?t.message:void 0,data:{message:e}}))}},{key:"_getSendMessageSpecifiedKey",value:function(e){if([k.MSG_IMAGE,k.MSG_AUDIO,k.MSG_VIDEO,k.MSG_FILE].includes(e.type))return Kn;if(e.conversationType===k.CONV_C2C)return Vn;if(e.conversationType===k.CONV_GROUP){var t=this.get(7);if(t&&(t=t.getLocalGroupProfile(e.to),t))return e=t.type,Ct(e)?jn:Hn}}},{key:"_addSendMessageTotalCount",value:function(e){e=this._getSendMessageSpecifiedKey(e),e&&this.get(26).addTotalCount(e)}},{key:"_addSendMessageSuccessCount",value:function(e,t){var n;e=this._getSendMessageSpecifiedKey(e);e&&((n=this.get(26)).addSuccessCount(e),n.addCost(e,Yt(t,!1)))}},{key:"_addSendMessageFailCountOnUser",value:function(e,t){t=t.code,t=void 0===t?-1:t;var n,o=this.get(26);e=this._getSendMessageSpecifiedKey(e);e===Kn&&(n=!1,n=!!Dr.includes(t)||n)?o.addFailedCountOfUserSide(Wn):Or(t)&&e&&o.addFailedCountOfUserSide(e)}},{key:"resendMessage",value:function(e,t){return e.isResend=!0,e.status=Tn,this.sendMessageInstance(e,t)}},{key:"revokeMessage",value:function(e){var t=this,n=null;if(e.conversationType===k.CONV_C2C?n=this.get(6):e.conversationType===k.CONV_GROUP&&(n=this.get(7)),!n)return this._onNoModule();var o=new eo("revokeMessage"),i=(o.setMessage("tjg_id:".concat(this.generateTjgID(e)," type:").concat(e.type," from:").concat(e.from," to:").concat(e.to)),"".concat(this._n,".").concat("revokeMessage"));return n.revokeMessage(e).then((function(n){n=n.data.recallRetList;return je(n)||0===n[0].retCode?(we.i("".concat(i," ok. ID:").concat(e.ID)),e.isRevoked=!0,o.end(),t.get(11).onMessageRevoked([e]),Mn({message:e})):(n=new Gn({code:n[0].retCode,data:{message:e}}),o.setCode(n.code).setMoreMessage(n.message).end(),Cn(n))})).catch((function(t){o.setError(t).end();var n=new Gn({code:t&&t.code?t.code:Un.MSG_REVOKE_FAIL,message:t&&t.message?t.message:void 0,data:{message:e}});return we.w("".concat(i," failed. error:"),t),Cn(n)}))}},{key:"deleteMessage",value:function(e){var t=this,n=null,o=e[0],i=o.conversationID,r="",a=[],s=[];if(o.conversationType===k.CONV_C2C)n=this.get(6),r=i.replace(k.CONV_C2C,""),e.forEach((function(e){e&&e.status===Sn&&e.conversationID===i&&(e._onlineOnlyFlag||a.push("".concat(e.sequence,"_").concat(e.random,"_").concat(e.time)),s.push(e))}));else if(o.conversationType===k.CONV_GROUP)n=this.get(7),r=i.replace(k.CONV_GROUP,""),e.forEach((function(e){e&&e.status===Sn&&e.conversationID===i&&(e._onlineOnlyFlag||a.push("".concat(e.sequence)),s.push(e))}));else if(o.conversationType===k.CONV_SYSTEM)return Cn({code:Un.CANNOT_DELETE_GRP_SYSTEM_NOTICE});if(!n)return this._onNoModule();if(0===a.length)return this._onMessageDeleted(s);30<a.length&&(a=a.slice(0,30),s=s.slice(0,30));var c=new eo("deleteMessage"),u=(c.setMessage("to:".concat(r," count:").concat(a.length)),"".concat(this._n,".").concat("deleteMessage"));return n.deleteMessage({to:r,keyList:a}).then((function(e){return c.end(),we.i("".concat(u," ok")),t._onMessageDeleted(s)})).catch((function(e){return c.setError(e).end(),we.w("".concat(u," failed. error:"),e),e=new Gn({code:e&&e.code?e.code:Un.MSG_DELETE_FAIL,message:e&&e.message?e.message:void 0}),Cn(e)}))}},{key:"_onMessageDeleted",value:function(e){return this.get(11).onMessageDeleted(e),In({messageList:e})}},{key:"translateText",value:function(e){var n="".concat(this._n,".").concat("translateText"),o=e.sourceTextList,i=e.sourceLanguage,r=(e=e.targetLanguage,new eo("translateText"));return r.setMessage("sourceLanguage:".concat(i," targetLanguage:").concat(e)),this.req({P:Fn.TRANSLATE_TEXT,data:{sourceTextList:o,source:i||"auto",target:e,from:this.getMyTinyID(),SDKAppID:this.getSDKAppID()}}).then((function(e){e=e.data;var o=e.error,i=e.requestID;e=e.translatedTextList;if(0===o.code)return r.end(),we.i("".concat(n," ok. requestID:").concat(i)),Mn({translatedTextList:e});throw t(t({},o),{},{requestID:i})})).catch((function(e){return r.setCode(e.code).setMoreMessage(e.requestID).end(),we.w("".concat(n," failed. error:"),e),Cn({code:Un.TRANSLATE_TEXT_FAIL})}))}},{key:"convertVoiceToText",value:function(e){var n=e.message,o=(e=e.language,n.payload.url);n.from===this.getMyUserID()&&"out"===n.flow&&(o=n.payload.remoteAudioUrl),n=/\.(wav|pcm|ogg-opus|speex|silk|mp3|m4a|aac|amr)/;if(!n.test(o))return Cn({code:Un.UNSUPPORTED_VOICE_FORMAT});n=n.exec(o)[1]||"mp3";var i="16k_zh-PY",r=(e=(e?"zh (cmn-Hans-CN)"===e?i="16k_zh":"en-US"===e?i="16k_en":"yue-Hant-HK"===e?i="16k_yue":"ja-JP"===e&&(i="16k_ja"):i="16k_zh-PY","serviceType:".concat(i," url:").concat(o)),"".concat(this._n,".").concat("convertVoiceToText")),a=(we.i("".concat(r," ").concat(e)),new eo("convertVoiceToText"));return a.setMessage(e),this.req({P:Fn.VOICE_TO_TEXT,data:{url:o,language:i,SDKAppID:this.getSDKAppID(),format:n}}).then((function(e){e=e.data;var n=e.error,o=e.requestID;e=e.result;if(0===n.code)return a.end(),we.i("".concat(r," ok. requestID:").concat(o)),Mn({result:e});throw t(t({},n),{},{requestID:o})})).catch((function(e){return a.setCode(e.code).setMoreMessage(e.requestID||"").end(),we.w("".concat(r," failed. error:"),e),Cn({code:Un.VOICE_TO_TEXT_FAIL})}))}},{key:"modifyRemoteMessage",value:function(e){var t=this,n=null,o=e.conversationType,i=e.to,r=this.get(7);if(!r)return this._onNoModule();if(r.isMessageFromOrToAVChatroom(i))return Cn({code:Un.MSG_MODIFY_DISABLED_IN_AV,data:{message:e}});if(!1===this.get(29).filterMessage(e))return e.hasRiskContent=!0,Cn({code:Un.PROFANITY_FOUND,data:{message:e}});o===k.CONV_C2C?n=this.get(6):o===k.CONV_GROUP&&(n=this.get(7));var a=new eo("modifyMessage"),s=(a.setMessage("to:".concat(i)),"".concat(this._n,".modifyRemoteMessage"));return n.modifyRemoteMessage(e).then((function(n){return a.end(),we.i("".concat(s," ok")),n=t._onModifyRemoteMessageResp(e,n.data),Mn({message:n})})).catch((function(n){var o;return a.setCode(n.code).setMoreMessage(n.message).end(),we.w("".concat(s," failed. error:"),n),20027===n.code?(o=t._onModifyRemoteMessageResp(e,n.data),Cn({code:Un.MSG_MODIFY_CONFLICT,data:{message:o}})):Cn({code:n.code,message:n.message,data:{message:e}})}))}},{key:"_generateSearchdata",value:function(e){var t=e.conversationID,n=e.timePosition,o=e.timePeriod;e=g(e,xr);return dt(t)||(St(t)&&(e.account=t.replace(k.CONV_C2C,"")),Et(t)&&(e.groupID=t.replace(k.CONV_GROUP,""))),Ye(o)&&0<o&&(Ye(n)&&0<n?e.startTime=n-o:e.startTime=Ee()-o),e.startTime&&e.startTime<0&&(e.startTime=void 0),Ye(n)&&0<n&&(e.endTime=n),e}},{key:"searchCloudMessages",value:function(e){var t=this,n="searchCloudMessages",o="".concat(this._n,".").concat(n);if(!e)return Cn({code:Un.OPTIONS_IS_EMPTY,message:this.getErrMsg(Un.OPTIONS_IS_EMPTY,n)});var i=e.keywordList,r=e.keywordListMatchType,a=e.conversationID,s=e.cursor,c=Xe(e.senderUserIDList)&&0<e.senderUserIDList.length,u=Xe(e.messageTypeList)&&0<e.messageTypeList.length;if(!i&&!c&&!u)throw we.e("[".concat(n,'] Missing required params: "keywordList".')),new Error("Params validate failed.");var l=Date.now(),d=new eo(n),f="keywordList:".concat(i," keywordListMatchType:").concat(r," ")+"convID:".concat(a," cursor:").concat(s);return we.l("".concat(o," ").concat(f)),this.req({P:Fn.MSG_CLOUD_SEARCH,data:this._generateSearchdata(e)}).then((function(n){var i=n.data,r=i.code;i=i.message;if(0!==r)return i=t.getErrMsg(60020===r?"SearchCloudMessagesUnavailable":r)||i,r=new Gn({code:r,message:i}),d.setMessage(f).setError(r).end(),Cn(r);t.get(27).isSearchCloudMessagesEnabled();i=n.data,r=i.cursor,n=i.totalCount,i=i.searchResult;var a="totalCount:".concat(n," cost:").concat(Yt(l));we.l("".concat(o," ok. cursor:").concat(r," ").concat(a)),d.setMessage("".concat(f," ").concat(a)).end(),a=t._handleSearchResults(i,!e.conversationID);return Mn({searchResultList:a,cursor:r,totalCount:n})})).catch((function(e){return d.setMessage(f).setError(e).end(),Cn(e)}))}},{key:"_handleSearchResults",value:function(e,t){var n=this.get(11);return Xe(e)&&0!==e.length?e.map((function(e){var o=e.groupID,i=e.userID,r=e.messageCount,a=(e=e.messageList,e=void 0===e?[]:e,i=o?"".concat(k.CONV_GROUP).concat(o):"".concat(k.CONV_C2C).concat(i),{conversationID:i,messageCount:r,messageList:[]});return t&&1<r||(r=e.filter((function(e){return!!e})),0<r.length&&(e=n.onRoamingMessage(r,i,!1),o&&e.reverse(),a.messageList=e,a.messageCount=e.length)),a})):[]}},{key:"_onModifyRemoteMessageResp",value:function(e,t){we.d("".concat(this._n,"._onModifyRemoteMessageResp options:"),t);var n=e.conversationType,o=e.from,i=e.to,r=e.random,a=e.sequence,s=(e=e.time,t.elements),c=t.messageVersion;t=t.cloudCustomData,t=void 0===t?"":t;return this.get(11).onMessageModified({conversationType:n,from:o,to:i,time:e,random:r,sequence:a,elements:s,cloudCustomData:t,messageVersion:c})}},{key:"_generateUUID",value:function(e){var t=this.get(12);t="".concat(t.getSDKAppID(),"-").concat(t.getUserID(),"-").concat(rt()),e=e.name||e.value||e.url||e.tempFilePath,e=e&&e.slice(e.lastIndexOf(".")+1);return e?"".concat(t,".").concat(e):t}},{key:"getMessageOption",value:function(e){return this._messageOptionsMap.get(e)}},{key:"_getNickAndAvatarByUserID",value:function(e){return this.get(4).getNickAndAvatarByUserID(e)}},{key:"_getNameCardByGroupID",value:function(e){if(e.conversationType===k.CONV_GROUP){var t=this.get(7);if(t)return t.getMyNameCardByGroupID(e.to)}return""}},{key:"reset",value:function(){we.l("".concat(this._n,".reset")),this._messageOptionsMap.clear()}}]),Jr),qr=(l(Xr,Rn),Gr=v(Xr),c(Xr,[{key:"onMsgExtNotify",value:function(e){var t=this,n=(e=e.dataList,e.messageInfo),o=e.operateType,i=e.operateResultList,r=e.tinyID,a=(e=e.globalSequence,n.clientTime),s=(n=n.random,"".concat(r,"-").concat(a,"-").concat(n)),c=[],u=[],l=(we.l("".concat(this._n,".onMsgExtNotify messageID:").concat(s," operateType:").concat(o," globalSequence:").concat(e)),this._updateGlobalSeq(s,e),!1),d=!1;i.forEach((function(e){var n=e.extensions,i=(n=void 0===n?[]:n,e.clearSequence);1===o?(l=!0,n.forEach((function(e){c.push({key:e.key,value:e.value})})),t._updateLocalExt(s,n)):2===o?(d=!0,n.forEach((function(e){u.push(e.key)})),t._updateLocalExt(s,n)):3===o&&(d=!0,t._hasLocalExt(s)&&t._getLocalExt(s).forEach((function(e,t){e.seq<=i&&!je(e.value)&&u.push(t)})),t._clearLocalExt(s,i))})),l&&this.emitOEvt(E.MESSAGE_EXTENSIONS_UPDATED,{messageID:s,extensions:c}),d&&this.emitOEvt(E.MESSAGE_EXTENSIONS_DELETED,{messageID:s,keyList:u})}},{key:"setMessageExtensions",value:function(e,t){var n="setMessageExtensions";if(!this.canIUse(U.MSG_EXT))return this.noUse(n);var o="".concat(this._n,".").concat(n),i=e.ID,r=e.conversationID,a=e.sequence,s=e.time,c=y(t),u=(t=(20<t.length&&(c=t.slice(0,20),we.w("".concat(o,". the length of extensions cannot exceed 20."))),"convID:".concat(r," messageID:").concat(i," sequence:").concat(a," time:").concat(s," count:").concat(c.length)),new eo(n));return u.setMessage(t),we.l("".concat(o," ").concat(t)),this._modifyMsgExts(e,c).then((function(e){var t=e.resultList,n=e.successCount;e=e.failureCount,n="successCount:".concat(n," failCount:").concat(e);return u.setMoreMessage(n).end(),we.l("".concat(o," ok. ").concat(n)),Mn({extensions:t})})).catch((function(e){return u.setError(e).end(),we.e("".concat(o," failed. error:"),e),Cn(e)}))}},{key:"getMessageExtensions",value:function(e){var t=this,n="getMessageExtensions";if(!this.canIUse(U.MSG_EXT))return this.noUse(n);var o="".concat(this._n,".").concat(n),i=e.ID,r=e.conversationID,a=e.sequence,s=e.time,c=(r="convID:".concat(r," messageID:").concat(i," sequence:").concat(a," time:").concat(s),new eo(n)),u=(c.setMessage(r),void we.l("".concat(o," ").concat(r)));return this.getMsgExtsMap.has(i)&&(u=this._getGlobalSeq(i)),this._getMsgExts(e,u).then((function(e){return c.end(),we.l("".concat(o," ok. extCount:").concat(e.length)),dt(u)&&0<e.length&&t.getMsgExtsMap.set(i,1),Mn({extensions:e})})).catch((function(e){return c.setError(e).end(),we.e("".concat(o," failed. error:"),e),Cn(e)}))}},{key:"deleteMessageExtensions",value:function(e,t){var n="deleteMessageExtensions";if(!this.canIUse(U.MSG_EXT))return this.noUse(n);var o="".concat(this._n,".").concat(n),i=[],r=3,a=(t=(je(t)||(r=2,t.forEach((function(e){i.push({key:e,value:"",seq:0})}))),e.ID),e.conversationID),s=e.sequence,c=e.time,u=(a="convID:".concat(a," messageID:").concat(t," sequence:").concat(s," time:").concat(c," operateType:").concat(r),new eo(n));return u.setMessage(a),we.l("".concat(o," ").concat(a)),this._modifyMsgExts(e,i,r).then((function(e){var t=e.resultList,n=e.successCount,i=(e=e.failureCount,"");return 2===r&&(i="success count:".concat(n," fail count:").concat(e)),u.setMoreMessage("".concat(i)).end(),we.l("".concat(o," ok. ").concat(i)),Mn({extensions:t})})).catch((function(e){return u.setError(e).end(),we.e("".concat(o," failed. error:"),e),Cn(e)}))}},{key:"_modifyMsgExts",value:function(e,t){var n=this,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,i=Tt(e.to)?k.CONV_TOPIC:e.conversationType,r=void 0,a=(3!==o&&(r=this._getReqExts(e,t)),null);switch(i){case k.CONV_C2C:a=this.get(6);break;case k.CONV_GROUP:a=this.get(7);break;case k.CONV_TOPIC:a=this.get(10);break;default:return Cn({code:Un.NO_MODULE})}return a.modifyMsgExts(e,r,o).then((function(t){t=t.data;var o=t.extensions,i=(t=t.seq,[]),r=0,a=0,s=[];return(o=je(o)?[]:o).forEach((function(e){var t=e.errorCode,n=(e=e.extension,e.key),o=e.value;e=e.seq;i.push({code:t,key:n,value:o}),0===t?r++:a++,s.push({key:n,value:o,seq:e})})),n._updateGlobalSeq(e.ID,t),0<s.length&&(n._updateLocalExt(e.ID,s),s=null),{resultList:i,successCount:r,failureCount:a}})).catch((function(e){return Cn(e)}))}},{key:"_getReqExts",value:function(e,t){var n,o=[];return this._hasLocalExt(e.ID)?(n=this._getLocalExt(e.ID),t.forEach((function(e){var t=e.key,i=(e=e.value,0);n.has(t)&&(i=n.get(t).seq),o.push({key:t,value:e,seq:i})}))):t.forEach((function(e){var t=e.key;e=e.value;o.push({key:t,value:e,seq:0})})),o}},{key:"_getMsgExts",value:function(e,t){var n=this,o="".concat(this._n,"._getMsgExts"),i=e.ID,r=e.to,a=null;switch(Tt(r)?k.CONV_TOPIC:e.conversationType){case k.CONV_C2C:a=this.get(6);break;case k.CONV_GROUP:a=this.get(7);break;case k.CONV_TOPIC:a=this.get(10);break;default:return Cn({code:Un.NO_MODULE})}return a.getMessageExtensions(e,t).then((function(t){t=t.data;var r=t.extensions,a=t.completeFlag,s=t.globalSequence;t=t.clearSequence,r=je(r)?[]:r;return we.l("".concat(o," ok. completeFlag:").concat(a," globalSequence:").concat(s," clearSequence:").concat(t," count:").concat(r.length)),n._updateLocalExt(i,r),n._clearLocalExt(i,t),n._updateGlobalSeq(i,s),1!==a?(t=r.slice(-1)[0].seq+1,n._getMsgExts(e,t)):n._getLocalExtList(i)})).catch((function(e){return Cn(e)}))}},{key:"_hasLocalExt",value:function(e){return this.msgExtMap.has(e)}},{key:"_getLocalExt",value:function(e){return this.msgExtMap.get(e)}},{key:"_updateLocalExt",value:function(e,t){this._hasLocalExt(e)||this.msgExtMap.set(e,new Map);var n=this._getLocalExt(e);t.forEach((function(e){var t=e.key,o=e.value;e=e.seq;n.set(t,{value:void 0===o?"":o,seq:e})}))}},{key:"_clearLocalExt",value:function(e,t){var n;t<=0||!this._hasLocalExt(e)||(n=this._getLocalExt(e)).forEach((function(e,o){e.seq<=t&&n.delete(o)}))}},{key:"_getLocalExtList",value:function(e){var t=[];return this._hasLocalExt(e)&&this._getLocalExt(e).forEach((function(e,n){e=e.value,je(e)||t.push({key:n,value:e})})),t}},{key:"_getGlobalSeq",value:function(e){return this.globalSeqMap.get(e)}},{key:"_updateGlobalSeq",value:function(e,t){this.globalSeqMap.set(e,t)}},{key:"reset",value:function(){we.l("".concat(this._n,".reset")),this.msgExtMap.clear(),this.globalSeqMap.clear(),this.getMsgExtsMap.clear()}}]),Xr),Br=(l($r,Rn),Pr=v($r),c($r,[{key:"onReactionNotifyList",value:function(e){var n=this;e=(e||{}).dataList;(void 0===e?[]:e).forEach((function(e){var o=e.C2CMessageInfo,i=e.groupMessageInfo,r=(i=void 0===i?{}:i,e=e.reactionList,e=void 0===e?[]:e,o=t(t({},void 0===o?{}:o),i),i=o.tinyID,o.clientTime),a=(o=o.random,i="".concat(i,"-").concat(r,"-").concat(o),[]);e.forEach((function(e){dt(e.userIDList)&&(e.userIDList=[],e.count=0),a.push.apply(a,y(e.userIDList))})),we.l("".concat(n._n,".onReactionNotifyList messageID:").concat(i," reactionList:").concat(e.length)),n._handleReactionSummary([{messageID:i,reactionList:e}],a).then((function(e){n.emitOEvt(E.MESSAGE_REACTIONS_UPDATED,t({},e[0]))}))}))}},{key:"onReactionNotify",value:function(e){e=e.dataList||{};var n=e.C2CMessageInfo,o=e.groupMessageInfo,i=(o=void 0===o?{}:o,e.reactionID),r=(e=e.operateType,n=t(t({},void 0===n?{}:n),o),o=n.tinyID,n.clientTime);n=n.random,o="".concat(o,"-").concat(r,"-").concat(n),we.l("".concat(this._n,".onReactionNotify messageID:").concat(o," reactionID:").concat(i," operateType:").concat(e)),1===e?this._addReactedByMyselfMap(o,i):this._removeReactedByMyselfMap(o,i),r="".concat(o,"-").concat(i);this._reactionInfoMap.has(r)&&((n=this._reactionInfoMap.get(r)).reactedByMyself=1===e,this.emitOEvt(E.MESSAGE_REACTIONS_UPDATED,{messageID:o,reactionList:[n]}))}},{key:"addMessageReaction",value:function(e,t){var n=this,o="addMessageReaction";if(!this.canIUse(U.MSG_REACTION))return this.noUse(o);var i="".concat(this._n,".").concat(o),r=e.ID,a=e.conversationID,s=(a="convID:".concat(a," messageID:").concat(r," reactionID:").concat(t),new eo(o));s.setMessage(a),we.l("".concat(i," ").concat(a)),r=this._createReactionOperationPack(e,t,1);return this._addReactedByMyselfMap(e.ID,t),this.req(r).then((function(){return s.end(),we.l("".concat(i," ok.")),Mn()})).catch((function(o){return n._removeReactedByMyselfMap(e.ID,t),s.setError(o).end(),we.e("".concat(i," failed. error:"),o),Cn(o)}))}},{key:"removeMessageReaction",value:function(e,t){var n="removeMessageReaction";if(!this.canIUse(U.MSG_REACTION))return this.noUse(n);var o="".concat(this._n,".").concat(n),i=e.ID,r=e.conversationID,a=(r="convID:".concat(r," messageID:").concat(i," reactionID:").concat(t),new eo(n));a.setMessage(r),we.l("".concat(o," ").concat(r)),i=this._createReactionOperationPack(e,t,2);return this._removeReactedByMyselfMap(e.ID,t),this.req(i).then((function(){return a.end(),we.l("".concat(o," ok.")),Mn()})).catch((function(e){return a.setError(e).end(),we.e("".concat(o," failed. error:"),e),Cn(e)}))}},{key:"getMessageReactions",value:function(e){var n=this,o="getMessageReactions";if(!this.canIUse(U.MSG_REACTION))return this.noUse(o);var i="".concat(this._n,".").concat(o),r=e.messageList,a=e.maxUserCountPerReaction,s=r[0].conversationID,c=(s="convID:".concat(s," maxUserCountPerReaction:").concat(a," msgCount:").concat(r.length),new eo(o)),u=(c.setMessage(s),we.l("".concat(i," ").concat(s)),new Map);a=this._createReactionSummaryPack(t(t({},e),{},{messageIDMap:u}));return this.req(a).then((function(e){e=e.data.resultList;var t=[],o=[];return(void 0===e?[]:e).forEach((function(e){var n=e.messageKey,i=(n=void 0===n?void 0:n,e.messageSequence);i=void 0===i?void 0:i,e=e.reactionList,e=void 0===e?[]:e,i=dt(n)?u.get(i):u.get(n);t.push({messageID:i,reactionList:e}),e.forEach((function(e){o.push.apply(o,y(e.userIDList))}))})),n._handleReactionSummary(t,o)})).then((function(e){return c.end(),we.l("".concat(i," ok.")),u.clear(),Mn({resultList:e})})).catch((function(e){return c.setError(e).end(),we.e("".concat(i," failed. error:"),e),Cn(e)}))}},{key:"getAllUserListOfMessageReaction",value:function(e){var t=this,n="getAllUserListOfMessageReaction";if(!this.canIUse(U.MSG_REACTION))return this.noUse(n);var o="".concat(this._n,".").concat(n),i=e.message,r=e.reactionID,a=e.nextSeq,s=e.count,c=i.ID,u=(i=i.conversationID,i="convID:".concat(i," messageID:").concat(c," reactionID:").concat(r," nextSeq:").concat(a," count:").concat(s),new eo(n)),l=(u.setMessage(i),we.l("".concat(o," ").concat(i)),{userList:[],nextSeq:0,isCompleted:!1});c=this._createReactionUserListPack(e);return this.req(c).then((function(e){e=e.data;var n=e.userIDList;n=void 0===n?[]:n,e=e.nextSeq,e=void 0===e?0:e;return l.nextSeq=e,l.isCompleted=0===e,t.get(4).getUserNickAndAvatar(n)})).then((function(e){return l.userList=e,u.end(),we.l("".concat(o," ok.")),Mn(l)})).catch((function(e){return u.setError(e).end(),we.e("".concat(o," failed. error:"),e),Cn(e)}))}},{key:"_createReactionOperationPack",value:function(e,t,n){var o,i,r=void 0;t={reactionID:t,userIDList:[this.getMyUserID()]};return e.conversationType===k.CONV_C2C&&(o=this.get(6),r=1===n?Fn.ADD_C2C_MSG_REACTION:Fn.RM_C2C_MSG_REACTION,t.from=e.from,t.to=e.to,t.messageKey=o.getMessageKey(e)),e.conversationType===k.CONV_GROUP&&(o=void 0,i=e.to,Tt(e.to)&&(i=Ft(o=e.to)),r=1===n?Fn.ADD_GRP_MSG_REACTION:Fn.RM_GRP_MSG_REACTION,t.groupID=i,t.topicID=o,t.messageSequence=e.sequence),{P:r,data:t}}},{key:"_createReactionSummaryPack",value:function(e){var t,n,o,i=e.messageList,r=e.maxUserCountPerReaction,a=(r=void 0===r?10:r,e.messageIDMap),s=(e=i[0],void 0),c=void 0;return e.conversationType===k.CONV_C2C&&(t=this.get(6),n=i.map((function(e){var n=t.getMessageKey(e);return a.set(n,e.ID),n})),s=Fn.GET_C2C_MSG_REACTIONS,c={from:e.from,to:e.to,messageKeyList:n,count:r}),e.conversationType===k.CONV_GROUP&&(n=void 0,o=e.to,Tt(e.to)&&(o=Ft(n=e.to)),e=i.map((function(e){return a.set(e.sequence,e.ID),e.sequence})),s=Fn.GET_GRP_MSG_REACTIONS,c={groupID:o,topicID:n,messageSequenceList:e,count:r}),{P:s,data:c}}},{key:"_createReactionUserListPack",value:function(e){var t=e.message,n=e.reactionID,o=e.nextSeq,i=(e=e.count,e=void 0===e?100:e,void 0);n={reactionID:n,nextSeq:void 0===o?0:o,count:100<e?100:e};return t.conversationType===k.CONV_C2C&&(o=this.get(6),i=Fn.GET_C2C_MSG_REACTION_USER_LIST,n.from=t.from,n.to=t.to,n.messageKey=o.getMessageKey(t)),t.conversationType===k.CONV_GROUP&&(e=void 0,o=t.to,Tt(t.to)&&(o=Ft(e=t.to)),i=Fn.GET_GRP_MSG_REACTION_USER_LIST,n.groupID=o,n.topicID=e,n.messageSequence=t.sequence),{P:i,data:n}}},{key:"_handleReactionSummary",value:function(e,t){var n=this;return this.get(4).getUserNickAndAvatar(t).then((function(t){var o=[];return e.forEach((function(e){var i=[];e.reactionList.forEach((function(o){var r=o.reactionID,a=o.count,s=o.userIDList,c=(o=o.reactedByMyself,o=void 0===o?void 0:o,[]);s.forEach((function(e){t.forEach((function(t){e===t.userID&&c.push(t)}))})),s={reactionID:r,totalUserCount:a,partialUserList:c,reactedByMyself:n._computeReactedByMyself({reactedByMyself:o,messageID:e.messageID,reactionID:r})};i.push(s),dt(o)&&!n._reactedByMyselfMap.has(e.messageID)&&(a="".concat(e.messageID,"-").concat(r),n._reactionInfoMap.set(a,s))})),o.push({messageID:e.messageID,reactionList:i})})),o}))}},{key:"_addReactedByMyselfMap",value:function(e,t){this._reactedByMyselfMap.has(e)||this._reactedByMyselfMap.set(e,[]),e=this._reactedByMyselfMap.get(e),-1===e.indexOf(t)&&e.push(t)}},{key:"_removeReactedByMyselfMap",value:function(e,t){!this._reactedByMyselfMap.has(e)||-1<(t=(e=this._reactedByMyselfMap.get(e)).indexOf(t))&&e.splice(t,1)}},{key:"_computeReactedByMyself",value:function(e){var t=e.reactedByMyself,n=e.messageID;e=e.reactionID;return dt(t)?!!this._reactedByMyselfMap.has(n)&&this._reactedByMyselfMap.get(n).includes(e):1===t}},{key:"reset",value:function(){we.l("".concat(this._n,".reset")),this._reactedByMyselfMap.clear(),this._reactionInfoMap.clear()}}]),$r),Vr=(l(zr,Rn),Nr=v(zr),c(zr,[{key:"sendMessage",value:function(e){var t=this,n=this._createMsg(e);if(null===n)return Cn({code:Un.MSG_SEND_FAIL});this._addSendMessageTotalCount(n);var o=Date.now();return this.get(11).setMessageRandom(n),this._sendComboMessage(n,e).then((function(e){e=e.data;var i=e.time,r=e.sequence;e=e.readReceiptCode,Ye(e)&&0!==e&&(new eo("sendMessageWithReceipt").setMessage("from:".concat(n.from," to:").concat(n.to," sequence:").concat(r," readReceiptCode:").concat(e)).end(),we.w("".concat(t._n,".sendMessage readReceiptCode:").concat(e," message:").concat(t.getErrMsg(e)))),t._addSendMessageSuccessCount(n,o),e=t.get(11),n.status=Sn,n.time=i,n.conversationType===k.CONV_GROUP&&(n.sequence=r),e.appendToMessageList(n),i=n;return!0===n._isExcludedFromLastMessage&&(i=""),e.onMessageSent({conversationOptionsList:[{conversationID:n.conversationID,unreadCount:0,type:n.conversationType,subType:n.conversationSubType,lastMessage:i}]}),Mn({message:n})})).catch((function(e){return t._onSendMessageFailed(n,e)}))}},{key:"_sendComboMessage",value:function(e,t){var n=this._m.get(20),o="";return e.conversationType===k.CONV_C2C&&(o="".concat(G.NAME.OPEN_IM,".").concat(Fn.SEND_C2C_MSG)),e.conversationType===k.CONV_GROUP&&(o="".concat(G.NAME.GRP,".").concat(Fn.SEND_GRP_MSG)),n.sendComboMessage({servcmd:o,data:t})}},{key:"_createMsg",value:function(e){var t="".concat(this._n,"._createMsg"),n=null;try{var o,i=this.getMyUserID(),r={};r.senderTinyID=this.getMyTinyID(),r.currentUser=i,r.from=e.From_Account||i,e.GroupId?(r.conversationID="".concat(k.CONV_GROUP).concat(e.GroupId),r.conversationType=k.CONV_GROUP,r.to=e.GroupId):e.To_Account&&(r.conversationID="".concat(k.CONV_C2C).concat(e.To_Account),r.conversationType=k.CONV_C2C,r.to=e.To_Account),r.time=e.MsgTimeStamp||0,r.random=e.Random||e.MsgRandom||0,r.priority=e.MsgPriority,lt(e.CloudCustomData)&&0<e.CloudCustomData.length&&(r.cloudCustomData=e.CloudCustomData),Xe(e.SendMsgControl)&&(r.messageControlInfo={},e.SendMsgControl.includes("NoUnread")&&(r.messageControlInfo.excludedFromUnreadCount=1),e.SendMsgControl.includes("NoLastMsg")&&(r.messageControlInfo.excludedFromLastMessage=1)),r.conversationType===k.CONV_GROUP&&Xe(e.To_Account)&&0<e.To_Account.length&&(o=e.To_Account,50<e.To_Account.length&&(o=e.To_Account.slice(0,50),we.w("".concat(t," To_Account must be less than or equal to 50."))),r.receiverList=y(o),e.To_Account=y(o)),1!==e.IsNeedReadReceipt&&1!==e.NeedReadReceipt||(r.needReadReceipt=!0),1===e.SupportMessageExtension&&(r.isSupportExtension=!0),(n=new So(r)).status=Tn,e.MsgClientTime=n.clientTime,n.conversationType===k.CONV_C2C&&(e.MsgSeq=n.sequence);for(var a,s=e.MsgBody.length,c=0;c<s;c++)"TIMTextElem"===(a=e.MsgBody[c]).MsgType?n.setTextElement(a.MsgContent.Text):"TIMCustomElem"===a.MsgType?n.setCustomElement({data:a.MsgContent.Data||"",description:a.MsgContent.Desc||"",extension:a.MsgContent.Ext||""}):"TIMFaceElem"===a.MsgType&&n.setFaceElement({index:a.MsgContent.Index,data:a.MsgContent.Data});var u=n.getElements();n.payload=u[0].content,n.type=u[0].type}catch(e){n=null,we.e("".concat(t," failed. error:"),e)}return n}},{key:"_onSendMessageFailed",value:function(e,t){return e.status=En,this.get(11).deleteMessageRandom(e),this._addSendMessageFailCountOnUser(e,t),new eo("sendMessage").setMessage("tjg_id:".concat(this.generateTjgID(e)," type:").concat(e.type," from:").concat(e.from," to:").concat(e.to)).setError(t).end(),we.e("".concat(this._n,"._onSendMessageFailed error:"),t),Cn(new Gn({code:t&&t.code?t.code:Un.MSG_SEND_FAIL,message:t&&t.message?t.message:void 0,data:{message:e}}))}},{key:"_getSendMessageSpecifiedKey",value:function(e){if(e.conversationType===k.CONV_C2C)return Vn;if(e.conversationType===k.CONV_GROUP){e=this.get(7).getLocalGroupProfile(e.to);if(e)return e=e.type,Ct(e)?jn:Hn}}},{key:"_addSendMessageTotalCount",value:function(e){e=this._getSendMessageSpecifiedKey(e),e&&this.get(26).addTotalCount(e)}},{key:"_addSendMessageSuccessCount",value:function(e,t){var n;e=this._getSendMessageSpecifiedKey(e);e&&((n=this.get(26)).addSuccessCount(e),n.addCost(e,Yt(t,!1)))}},{key:"_addSendMessageFailCountOnUser",value:function(e,t){t=t.code,t=void 0===t?-1:t;var n=this.get(26);e=this._getSendMessageSpecifiedKey(e);Or(t)&&e&&n.addFailedCountOfUserSide(e)}}]),zr),Hr=(l(Yr,Rn),wr=v(Yr),c(Yr,[{key:"registerPlugin",value:function(e){var t=this,n="0";Object.keys(e).forEach((function(o){t.plugins[o]=e[o],"tim-upload-plugin"===o&&"function"==typeof e[o].getVersion&&(n=e[o].getVersion())})),new eo("registerPlugin").setMessage("".concat(Object.keys(e))).setMoreMessage("version:".concat(n)).end()}},{key:"getPlugin",value:function(e){return this.plugins[e]}},{key:"reset",value:function(){}}]),Yr),jr=(l(Wr,Rn),Rr=v(Wr),c(Wr,[{key:"_init",value:function(){this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:0})}},{key:"_startSync",value:function(e){var n=this,o=e.cookie,i=e.syncFlag,r=e.isOnlineSync,a="".concat(this._n,"._startSync");we.l("".concat(a," options:"),e),this.req({P:Fn.SYNC_UNREAD_MSG,data:{cookie:o,syncFlag:i,isOnlineSync:r}}).then((function(e){var o=e.data,i=o.cookie;o=o.syncFlag;we.l("".concat(a," ok. cookie:").concat(i," syncFlag:").concat(o)),je(n._cookie=i)||(0===o||1===o?(n._dispatch(t(t({},e.data),{},{isSyncingEnded:!1})),n._startSync({cookie:i,syncFlag:o,isOnlineSync:0})):2===o&&n._dispatch(t(t({},e.data),{},{isSyncingEnded:!0})))})).catch((function(e){we.e("".concat(a," failed. error:"),e)}))}},{key:"_dispatch",value:function(e){e.eventArray&&this.get(20).onMessage({head:{},body:{eventArray:e.eventArray,isInstantMessage:this._onlineSyncFlag,isSyncingEnded:e.isSyncingEnded}}),this.get(6).onNewMessage({dataList:e.messageList,isInstantMessage:!!e.isSyncingEnded&&this._onlineSyncFlag,C2CRemainingUnreadList:e.C2CRemainingUnreadList,C2CPairUnreadList:e.C2CPairUnreadList,isSyncingEnded:e.isSyncingEnded})}},{key:"syncOnNeed",value:function(){we.l("".concat(this._n,".syncOnNeed cookie:").concat(this._cookie)),this._onlineSyncFlag=!0,this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:1})}},{key:"syncOnReconnected",value:function(){we.l("".concat(this._n,".syncOnReconnected cookie:").concat(this._cookie)),this._onlineSyncFlag=!0,this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:0})}},{key:"reset",value:function(){we.l("".concat(this._n,".reset")),this._onlineSyncFlag=!1,this._cookie=""}}]),Wr),Kr={req:{toAccount:"To_Account",fromAccount:"From_Account",to:"To_Account",from:"From_Account",groupID:"GroupId",groupAtUserID:"GroupAt_Account",extension:"Ext",data:"Data",description:"Desc",elements:"MsgBody",sizeType:"Type",downloadFlag:"Download_Flag",thumbUUID:"ThumbUUID",videoUUID:"VideoUUID",remoteAudioUrl:"Url",remoteVideoUrl:"VideoUrl",videoUrl:"",imageUrl:"URL",fileUrl:"Url",uuid:"UUID",priority:"MsgPriority",receiverUserID:"To_Account",receiverGroupID:"GroupId",messageSender:"SenderId",messageReceiver:"ReceiverId",nick:"From_AccountNick",avatar:"From_AccountHeadurl",messageNumber:"MsgNum",pbDownloadKey:"PbMsgKey",downloadKey:"JsonMsgKey",applicationType:"PendencyType",userIDList:"To_Account",groupNameList:"GroupName",userID:"To_Account",groupAttributeList:"GroupAttr",mainSequence:"AttrMainSeq",avChatRoomKey:"BytesKey",attributeControl:"AttrControl",sequence:"seq",messageControlInfo:"SendMsgControl",updateSequence:"UpdateSeq",clientTime:"MsgClientTime",sequenceList:"MsgSeqList",topicID:"TopicId",customData:"CustomString",isSupportTopic:"SupportTopic",isWebUniapp:"is_web_uniapp",isSupportExtension:"SupportMessageExtension",messageSequence:"MsgSeq",messageKey:"MsgKey",startSequence:"startSeq",simplifiedMessage:"DownsizeFlag",isRelayMessage:"IsRelayMsg",reactionID:"Reaction",messageSequenceList:"MsgSeqList",messageKeyList:"MsgKeyList",cmConfigID:"CustomModerationConfigID"},res:{MsgPriority:"priority",ThumbUUID:"thumbUUID",VideoUUID:"videoUUID",Download_Flag:"downloadFlag",GroupId:"groupID",Member_Account:"userID",MsgList:"messageList",SyncFlag:"syncFlag",To_Account:"to",From_Account:"from",MsgSeq:"sequence",MsgRandom:"random",MsgTime:"time",MsgTimeStamp:"time",MsgContent:"content",MsgBody:"elements",From_AccountNick:"nick",From_AccountHeadurl:"avatar",GroupWithdrawInfoArray:"revokedInfos",GroupReadInfoArray:"groupMessageReadNotice",LastReadMsgSeq:"lastMessageSeq",WithdrawC2cMsgNotify:"c2cMessageRevokedNotify",C2cWithdrawInfoArray:"revokedInfos",C2cReadedReceipt:"c2cMessageReadReceipt",ReadC2cMsgNotify:"c2cMessageReadNotice",LastReadTime:"peerReadTime",MsgRand:"random",MsgType:"type",MsgShow:"messageShow",NextMsgSeq:"nextMessageSeq",FaceUrl:"avatar",ProfileDataMod:"profileModify",Profile_Account:"userID",ValueBytes:"value",ValueNum:"value",NoticeSeq:"noticeSequence",NotifySeq:"notifySequence",MsgFrom_AccountExtraInfo:"messageFromAccountExtraInformation",Operator_Account:"operatorID",OpType:"operationType",ReportType:"operationType",UserId:"userID",User_Account:"userID",List_Account:"userIDList",MsgOperatorMemberExtraInfo:"operatorInfo",MsgMemberExtraInfo:"memberInfoList",ImageUrl:"avatar",NickName:"nick",MsgGroupNewInfo:"newGroupProfile",MsgAppDefinedData:"groupCustomField",Owner_Account:"ownerID",GroupFaceUrl:"avatar",GroupIntroduction:"introduction",GroupNotification:"notification",GroupApplyJoinOption:"joinOption",MsgKey:"messageKey",GroupInfo:"groupProfile",ShutupTime:"muteTime",Desc:"description",Ext:"extension",GroupAt_Account:"groupAtUserID",MsgNum:"messageNumber",PbMsgKey:"pbDownloadKey",JsonMsgKey:"downloadKey",MsgModifiedFlag:"isModified",PendencyItem:"applicationItem",PendencyType:"applicationType",AddTime:"time",AddSource:"source",AddWording:"wording",ProfileImImage:"avatar",PendencyAdd:"friendApplicationAdded",FrienPencydDel_Account:"friendApplicationDeletedUserIDList",Peer_Account:"userID",GroupAttr:"groupAttributeList",GroupAttrAry:"groupAttributeList",AttrMainSeq:"mainSequence",seq:"sequence",GroupAttrOption:"groupAttributeOption",BytesChangedKeys:"changedKeyList",GroupAttrInfo:"groupAttributeList",GroupAttrSeq:"mainSequence",PushChangedAttrValFlag:"isWithChangedAttributeInfo",SubKeySeq:"sequence",Val:"value",MsgGroupFromCardName:"senderNameCard",MsgGroupFromNickName:"senderNick",C2cNick:"peerNick",C2cImage:"peerAvatar",SendMsgControl:"messageControlInfo",NoLastMsg:"excludedFromLastMessage",NoUnread:"excludedFromUnreadCount",UpdateSeq:"updateSequence",MuteNotifications:"muteFlag",MsgClientTime:"clientTime",TinyId:"tinyID",GroupMsgReceiptList:"readReceiptList",ReadNum:"readCount",UnreadNum:"unreadCount",TopicId:"topicID",MillionGroupFlag:"communityType",SupportTopic:"isSupportTopic",MsgTopicNewInfo:"newTopicInfo",ShutupAll:"muteAllMembers",CustomString:"customData",TopicFaceUrl:"avatar",TopicIntroduction:"introduction",TopicNotification:"notification",TopicIdArray:"topicIDList",MsgVersion:"messageVersion",C2cMsgModNotifys:"c2cMessageModified",GroupMsgModNotifys:"groupMessageModified",ApplyJoinOption:"joinOption",MsgFlag:"messageRemindType",AtInfoList:"groupAtInfoList",AtFlagList:"groupAtType",AtMsgSeq:"sequence",BanDuration:"duration",BanDescription:"reason",NotVisible:"invisible",BytesTag:"tag",BytesValue:"value",RptBytesValue:"value",LatestSeq:"globalSequence",ClearSeq:"clearSequence",SupportMessageExtension:"isSupportExtension",ExtensionList:"extensions",GroupCounter:"counterList",Revoker_Account:"revoker",MsgExtensionNotify:"messageExtensionNotify",ExtensionC2cMsgInfo:"messageInfo",ExtensionGroupMsgInfo:"messageInfo",MsgOptType:"operateType",SetKVInfo:"operateResultList",DeleteKVInfo:"operateResultList",ClearKVInfo:"operateResultList",MsgKeyValue:"extensions",ClearMsgSeq:"clearSequence",MsgLastSeq:"globalSequence",InviteJoinOption:"inviteOption",MemberList_Account:"inviteeList",MsgMemberExtraInfoList:"inviteeInfoList",E:"event",GInf:"groupProfile",MCT:"clientTime",MR:"random",MP:"priority",MTS:"time",GId:"groupID",MS:"sequence",CCD:"cloudCustomData",F_Account:"from",F_Hd:"avatar",F_NN:"nick",GN:"groupName",GT:"groupType",IsSys:"isSystemMessage",OpInf:"operatorInfo",Img:"avatar",NN:"nick",OnlineInf:"onlineMemberInfo",ET:"expireTime",Num:"onlineMemberNum",Opt:"operationType",O_Account:"operatorID",RT:"operationType",UDF:"userDefinedField",L_Account:"userIDList",IsPlaceMsg:"isPlaceMessage",MsgCheckResult:"checkResult",Results:"resultList",Reaction:"reactionID",Reaction_Account:"userIDList",MsgReactionNotifyList:"messageReactionNotifyList",MsgReactionNotify:"messageReactionNotify",MsgReactionSummary:"reactionList",C2CMsgInfo:"C2CMessageInfo",GroupMsgInfo:"groupMessageInfo",int32_err_code:"errorCode",str_err_msg:"errorMsg",MsgDropReason:"messageDropReason",ReactedByMe:"reactedByMyself",Level:"messageRemindType",PeerReadTime:"timestamp",NoUnreadSeqList:"excludedUnreadSequenceList",NewMsg:"topicLatestMessage"},ignoreKeyWord:["C2C","ID","USP"]};function Wr(e){return r(this,Wr),(e=Rr.call(this,e))._n="SyncUnreadMsgModule",e._cookie="",e._onlineSyncFlag=!1,e.getIEmitInst().on(Bo.A2KEY_AND_TINYID_UPDATED,e._init,_(e)),e}function Yr(e){return r(this,Yr),(e=wr.call(this,e))._n="PluginModule",e.plugins={},e}function zr(e){return r(this,zr),(e=Nr.call(this,e))._n="ComboMsgModule",e}function $r(e){return r(this,$r),(e=Pr.call(this,e))._n="MsgReactionModule",e._reactedByMyselfMap=new Map,e._reactionInfoMap=new Map,e}function Xr(e){return r(this,Xr),(e=Gr.call(this,e))._n="MsgExtModule",e.msgExtMap=new Map,e.globalSeqMap=new Map,e.getMsgExtsMap=new Map,e}function Jr(e){return r(this,Jr),(e=Ur.call(this,e))._n="MessageModule",e._messageOptionsMap=new Map,e._mergerMessageHandler=new Er(_(e)),e}function Qr(e,t){if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("Expected the input to be `string | string[]`");return t=Object.assign({pascalCase:!1},t),0===(e=Array.isArray(e)?e.map((function(e){return e.trim()})).filter((function(e){return e.length})).join("-"):e.trim()).length?"":1===e.length?t.pascalCase?e.toUpperCase():e.toLowerCase():(e=e=(e=e!==e.toLowerCase()?Zr(e):e).replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(function(e,t){return t.toUpperCase()})).replace(/\d+(\w|$)/g,(function(e){return e.toUpperCase()})),t.pascalCase?e.charAt(0).toUpperCase()+e.slice(1):e)}var Zr=function(e){for(var t=!1,n=!1,o=!1,i=0;i<e.length;i++){var r=e[i];t&&/[a-zA-Z]/.test(r)&&r.toUpperCase()===r?(e=e.slice(0,i)+"-"+e.slice(i),o=n,n=!(t=!1),i++):n&&o&&/[a-zA-Z]/.test(r)&&r.toLowerCase()===r?(e=e.slice(0,i-1)+"-"+e.slice(i-1),o=n,t=!(n=!1)):(t=r.toLowerCase()===r&&r.toUpperCase()!==r,o=n,n=r.toUpperCase()===r&&r.toLowerCase()!==r)}return e};for(var ea,ta=String.fromCharCode,na=function(e){var t=0|e.charCodeAt(0);if(55296<=t)if(t<56320)if(e=0|e.charCodeAt(1),56320<=e&&e<=57343){if(65535<(t=(t<<10)+e-56613888|0))return ta(240|t>>>18,128|t>>>12&63,128|t>>>6&63,128|63&t)}else t=65533;else t<=57343&&(t=65533);return t<=2047?ta(192|t>>>6,128|63&t):ta(224|t>>>12,128|t>>>6&63,128|63&t)},oa=function(e){for(var t=void 0===e?"":(""+e).replace(/[\x80-\uD7ff\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,na),n=0|t.length,o=new Uint8Array(n),i=0;i<n;i=i+1|0)o[i]=0|t.charCodeAt(i);return o},ia=(c(ka,[{key:"getID",value:function(){return this._id}},{key:"_onOpen",value:function(e){this._handler.onOpen({id:this._id,res:JSON.stringify(e)})}},{key:"_onClose",value:function(e){this._handler.onClose({id:this._id,e:e})}},{key:"_onMessage",value:function(e){e=this._canIUseBinaryFrame?this._isAppCompressedData(e.data)?this._handler.inflate(e.data):function(e){for(var t=new Uint8Array(e),n="",o=0,i=t.length;o<i;){var r=t[o],a=0,s=0;if(r<=127?(a=0,s=255&r):r<=223?(a=1,s=31&r):r<=239?(a=2,s=15&r):r<=244&&(a=3,s=7&r),0<i-o-a)for(var c=0;c<a;)s=s<<6|63&(r=t[o+c+1]),c+=1;else s=65533,a=i-o;n+=String.fromCodePoint(s),o+=a+1}return n}(e.data):e.data,this._handler.onMessage({data:e})}},{key:"_isAppCompressedData",value:function(e){return e=new Uint8Array(e),67===e[0]&&79===e[1]&&77===e[2]&&80===e[3]}},{key:"_onError",value:function(e){this._handler.onError({id:this._id,e:e})}},{key:"setIsWorkerEnabled",value:function(e){this._isWorkerEnabled=!0}},{key:"close",value:function(e){if(this._workerSocket&&(this._workerSocket.postMessage({cmd:"stop",code:e}),this._workerSocket.terminate(),this._workerSocket=null),$)return ie.offSocketClose(),ie.offSocketMessage(),ie.offSocketOpen(),ie.offSocketError(),void ie.closeSocket();this._socket&&(ee?(this._socket.onClose((function(){})),this._socket.onOpen((function(){})),this._socket.onMessage((function(){})),this._socket.onError((function(){}))):(this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null),z?this._socket.close({code:e}):this._socket.close(e),this._socket=null)}},{key:"send",value:function(e){this._workerSocket?this._workerSocket.postMessage({cmd:"sendMessage",data:this._canIUseBinaryFrame?oa(e.data).buffer:e.data}):$?ie.sendSocketMessage({data:e.data,fail:function(){e.fail&&e.requestID&&e.fail(e.requestID)}}):this._socket&&(ee?this._socket.send({data:this._canIUseBinaryFrame?oa(e.data).buffer:e.data,fail:function(){e.fail&&e.requestID&&e.fail(e.requestID)}}):this._socket.send(this._canIUseBinaryFrame?oa(e.data):e.data))}}]),ka),ra=["keyMap"],aa=["keyMap"],sa="connected",ca="connecting",ua="disconnected",la=(c(Ea,[{key:"_setWebsocketHost",value:function(){var e=this._chM.get(12);this._currentSite=P,this._chM.isOversea()&&(this._currentSite="OVERSEA"),e.isSingaporeSite()?this._currentSite="SINGAPORE":e.isKoreaSite()?this._currentSite="KOREA":e.isGermanySite()?this._currentSite="GERMANY":e.isIndiaSite()?this._currentSite="IND":e.isJapanSite()?this._currentSite="JPN":e.isUSASite()?this._currentSite="USA":e.isIndonesiaSite()&&(this._currentSite="INDONESIA"),G.HOST.setCurrent(this._currentSite)}},{key:"_initConnection",value:function(){dt(G.HOST.CURRENT.BACKUP)||""===this._url?this._url=G.HOST.CURRENT.DEFAULT:this._url===G.HOST.CURRENT.DEFAULT?this._url=G.HOST.CURRENT.BACKUP:this._url===G.HOST.CURRENT.BACKUP?this._url=this._canIUseAnyCast()?G.HOST.CURRENT.ANYCAST:G.HOST.CURRENT.DEFAULT:this._url===G.HOST.CURRENT.ANYCAST&&(G.HOST.CURRENT.ANYCAST="",this._url=G.HOST.CURRENT.DEFAULT);var e=this._chM.get(12),t=e.getProxyServer();je(t)||(this._url=t),e.isTestEnv()&&(this._url=O.TEST[this._currentSite].DEFAULT),this._connect(),this._nextPingTs=0}},{key:"_canIUseAnyCast",value:function(){return oe&&G.HOST.CURRENT.ANYCAST}},{key:"onCheckTimer",value:function(e){e%1==0&&(this._checkPromiseMap(),this._checkNativeAppWS())}},{key:"_checkPromiseMap",value:function(){var e=this;0!==this._promiseMap.size&&this._promiseMap.forEach((function(t,n){var o=t.reject,i=(t=t.timestamp,15e3);-1!==n.indexOf(Fn.LOGIN)?i=9e4:-1!==n.indexOf(Fn.PING)&&(i=3e3),Date.now()-t>=i&&(we.l("".concat(e._n,"._checkPromiseMap request timeout, delete requestID:").concat(n)),e._promiseMap.delete(n),o(new Gn({code:Un.NETWORK_TIMEOUT})),e._chM.onRequestTimeout())}))}},{key:"_checkNativeAppWS",value:function(){J&&!this.isConnected()&&this._reConnect()}},{key:"onOpen",value:function(e){var t,n;this._readyState!==ua&&(this._onOpenTs=Date.now(),n=e.id,e=e.res,this._socketID=n,t=Yt(this._startTs,!1),n="socketID:".concat(n," res:").concat(e),we.l("".concat(this._n,"._onOpen cost:").concat(t," ms. ").concat(n)),new eo("wsOnOpen").setMessage(t).setCostTime(t).setMoreMessage(n).end(),this._readyState=sa,this._reConnectCount=0,this._resend(),!0===this._reConnectFlag&&(this._chM.onReconnected(),this._reConnectFlag=!1),this._chM.onOpen())}},{key:"onClose",value:function(e){var t=new eo("wsOnClose"),n=e.id,o=(e=e.e,"sourceSocketID:".concat(n," currentSocketID:").concat(this._socketID," code:").concat(e.code," reason:").concat(e.reason)),i=0;0!==this._onOpenTs&&(i=Date.now()-this._onOpenTs),t.setMessage(i).setCostTime(i).setMoreMessage(o).setCode(e.code).end(!0),we.l("".concat(this._n,"._onClose ").concat(o," onlineTime:").concat(i)),n===this._socketID&&(this._readyState=ua,i<1e3?this._chM.onReconnectFailed():this._chM.onClose())}},{key:"onError",value:function(e){var t=e.id,n=(e=e.e,"sourceSocketID:".concat(t," currentSocketID:").concat(this._socketID));new eo("wsOnError").setMessage(e.errMsg||gt(e)).setMoreMessage(n).setLevel("error").end(!0),we.w("".concat(this._n,"._onError"),e,n),t===this._socketID&&(this._readyState=ua,this._chM.onError())}},{key:"onMessage",value:function(e){var t;try{t=JSON.parse(e.data)}catch(t){new eo("jsonParseError").setMessage(e.data).end()}if(t&&t.head){e=this._getRequestIDFromHead(t.head);var n,o,i,r=t.body;if(this._chM.get(30).isTRTCCommand(e)||(i=Pt(t.head),r=function e(t,n){return Xe(t)?t.map((function(t){return ze(t)?e(t,n):t})):ze(t)?(o=t,i=function(e,t){return dt(n[t])?Qr(t):n[t]},r={},Object.keys(o).forEach((function(e){r[i(o[e],e)]=o[e]})),Dt(r,(function(t){return Xe(t)||ze(t)?e(t,n):t}))):void 0;var o,i,r}(t.body,this._getResKeyMap(i))),we.d("".concat(this._n,".onMessage ret:").concat(JSON.stringify(r)," requestID:").concat(e," has:").concat(this._promiseMap.has(e))),this._setNextPingTs(),this._promiseMap.has(e))return n=(i=this._promiseMap.get(e)).resolve,o=i.reject,i=i.timestamp,this._promiseMap.delete(e),this._calcRTT(i),void(r.errorCode&&0!==r.errorCode?(this._chM.onErrorCodeNotZero(r),o(new Gn({code:r.errorCode,message:r.errorInfo||"",data:e.includes(Fn.MODIFY_C2C_MSG)||e.includes(Fn.MODIFY_GRP_MSG)?{elements:r.elements,messageVersion:r.messageVersion,cloudCustomData:r.cloudCustomData}:void 0}))):n(Mn(r)));this._chM.onMessage({head:t.head,body:r})}}},{key:"_calcRTT",value:function(e){e=Date.now()-e,this._chM.get(26).addRTT(e)}},{key:"_connect",value:function(){this._readyState!==ca&&this._readyState!==sa&&(this._startTs=Date.now(),this._onOpenTs=0,this._readyState=ca,this._socket=new ia(this),this._socketID=this._socket.getID(),we.l("".concat(this._n,"._connect isWorkerEnabled:").concat(this.getIsWorkerEnabled()," socketID:").concat(this._socketID," url:").concat(this.getURL())),new eo("wsConnect").setMessage("socketID:".concat(this._socketID," url:").concat(this.getURL())).end())}},{key:"getURL",value:function(){this._chM.isDevMode()&&(this._canIUseBinaryFrame=!1);var e=Ot(),t=(($||j&&"windows"===e||J)&&(this._canIUseBinaryFrame=!1),-1),n=("ios"===e?t=ce||-1:"android"===e&&(t=le||-1),this._chM.get(12)),o=this._chM.getPlatform(),i=n.getSDKAppID();n=n.getInstanceID(),i="sdkappid=".concat(i,"&instanceid=").concat(n,"&random=").concat(this._getRandom(),"&platform=").concat(o,"&host=").concat(e)+"&version=".concat(t,"&sdkversion=").concat("3.4.3");return K&&(i+="&isminigame=1"),this._chM.canIUseInflate()&&(i+="&compress=gzip"),(this._canIUseBinaryFrame?"".concat(this._url,"/binfo?"):"".concat(this._url,"/info?")).concat(i)}},{key:"_closeConnection",value:function(e){we.l("".concat(this._n,"._closeConnection socketID:").concat(this._socketID)),this._socket&&(this._socket.close(e),this._socketID=-1,this._socket=null,this._readyState=ua)}},{key:"_resend",value:function(){var e=this;if(we.l("".concat(this._n,"._resend reConnectFlag:").concat(this._reConnectFlag),"promiseMap.size:".concat(this._promiseMap.size," simpleRequestMap.size:").concat(this._simpleRequestMap.size)),0<this._promiseMap.size&&this._promiseMap.forEach((function(t,n){var o=t.uplinkData,i=t.resolve;t=t.reject;-1!==n.indexOf(Fn.AV_POLLING)?e._promiseMap.delete(n):(e._promiseMap.set(n,{resolve:i,reject:t,timestamp:Date.now(),uplinkData:o}),e._execute(n,o))})),0<this._simpleRequestMap.size){var t,n=S(this._simpleRequestMap);try{for(n.s();!(t=n.n()).done;){var o=m(t.value,2),i=o[0],r=o[1];this._execute(i,r)}}catch(t){n.e(t)}finally{n.f()}this._simpleRequestMap.clear()}}},{key:"send",value:function(e){var t=this,n=(e.head.seq=this._getSequence(),e.head.reqtime=Math.floor(Date.now()/1e3),e.keyMap,g(e,ra)),o=this._getRequestIDFromHead(e.head),i=JSON.stringify(n);return new Promise((function(e,r){t._promiseMap.set(o,{resolve:e,reject:r,timestamp:Date.now(),uplinkData:i}),we.d("".concat(t._n,".send uplinkData:").concat(JSON.stringify(n)," requestID:").concat(o," readyState:").concat(t._readyState)),t._readyState!==sa?t._reConnect():(t._execute(o,i),t._chM.get(26).addRequestCount())}))}},{key:"simplySend",value:function(e){e.head.seq=this._getSequence(),e.head.reqtime=Math.floor(Date.now()/1e3),e.keyMap;var t=g(e,aa);e=this._getRequestIDFromHead(e.head),t=JSON.stringify(t);this._readyState!==sa?(this._simpleRequestMap.size<this.MAX_SIZE?this._simpleRequestMap.set(e,t):we.l("".concat(this._n,".simplySend. simpleRequestMap is full, drop request!")),this._reConnect()):this._execute(e,t)}},{key:"_execute",value:function(e,t){this._socket.send({data:t,fail:ee?this._onSendFail.bind(this):void 0,requestID:e})}},{key:"_onSendFail",value:function(e){we.l("".concat(this._n,"._onSendFail requestID:").concat(e)),this._chM.onSendFail()}},{key:"_getSequence",value:function(){var e;if(this._startSequence<2415919103)return e=this._startSequence,this._startSequence+=1,2415919103===this._startSequence&&(this._startSequence=it()),e}},{key:"_getRequestIDFromHead",value:function(e){return e.servcmd+e.seq}},{key:"_getResKeyMap",value:function(e){return e=this._chM.getKeyMap(e),t(t({},Kr.res),e.res)}},{key:"_reConnect",value:function(){this._readyState!==sa&&this._readyState!==ca&&this.forcedReconnect()}},{key:"forcedReconnect",value:function(){var e="".concat(this._n,".forcedReconnect");we.l("".concat(e," count:").concat(this._reConnectCount," readyState:").concat(this._readyState)),this._reConnectFlag=!0,this._resetRandom(),this._reConnectCount<this.MAX_RECONNECT_COUNT?(this._reConnectCount+=1,this._closeConnection(4001),this._initConnection()):(this._reConnectCount=0,this._chM.get(15).isOnline()?(we.w("".concat(e," disconnected from wsserver but network is ok, continue...")),this._closeConnection(4001),this._initConnection()):this._chM.onReconnectFailed())}},{key:"getReconnectFlag",value:function(){return this._reConnectFlag}},{key:"_setNextPingTs",value:function(){this._nextPingTs=J?Date.now()+5e3:Date.now()+1e4}},{key:"getNextPingTs",value:function(){return this._nextPingTs}},{key:"isConnected",value:function(){return this._readyState===sa}},{key:"canIUseBinaryFrame",value:function(){return this._canIUseBinaryFrame}},{key:"getSocketID",value:function(){return this._socketID}},{key:"inflate",value:function(e){if(this._chM.canIUseInflate())return this._chM.get(37).inflate(e)}},{key:"setIsWorkerEnabled",value:function(e){we.l("".concat(this._n,".setIsWorkerEnabled flag:").concat(e)),this._isWorkerEnabled=e}},{key:"getIsWorkerEnabled",value:function(){return this._isWorkerEnabled&&_e}},{key:"_getRandom",value:function(){return 0===this._random&&(this._random=Math.random()),this._random}},{key:"_resetRandom",value:function(){this._random=0}},{key:"close",value:function(){we.l("".concat(this._n,".close")),this._closeConnection(4e3),this._promiseMap.clear(),this._startSequence=it(),this._readyState=ua,this._simpleRequestMap.clear(),this._reConnectFlag=!1,this._reConnectCount=0,this._onOpenTs=0,this._url="",this._random=0,this._canIUseBinaryFrame=!0,this._isWorkerEnabled=!0}}]),Ea),da=function(e,t,n){return new Promise((function(o,i){var r,a,s="application/x-www-form-urlencoded;charset=UTF-8";ee?ie.request({url:t,data:n,method:e,timeout:3e3,header:{"content-type":s},success:function(e){e&&e.data&&e.data.NetCheckInfo&&we.l("".concat("getconninfo ok in"," miniapp. ret:"),e.data),o()},fail:function(){i(new Gn({code:Un.NETWORK_ERROR}))}}):(r=new XMLHttpRequest,a=setTimeout((function(){r.abort(),i(new Gn({code:Un.NETWORK_TIMEOUT}))}),3e3),r.onreadystatechange=function(){4===r.readyState&&(clearTimeout(a),200===r.status||304===r.status?(r.responseText&&-1<r.responseText.indexOf("NetCheckInfo")&&we.l("".concat("getconninfo ok in"," web. ret:"),JSON.parse(r.responseText)),o()):i(new Gn({code:Un.NETWORK_ERROR})))},r.open(e,t,!0),r.setRequestHeader("Content-type",s),n?r.send(n):r.send())}))},fa=(l(Sa,Rn),ea=v(Sa),c(Sa,[{key:"onCheckTimer",value:function(e){this._socketHandler&&(this.isLoggedIn()?(0<this._timerForNotLoggedIn&&(clearInterval(this._timerForNotLoggedIn),this._timerForNotLoggedIn=-1),this._socketHandler.onCheckTimer(e)):this._socketHandler.onCheckTimer(1),this._checkNextPing())}},{key:"onErrorCodeNotZero",value:function(e){this.get(20).onErrorCodeNotZero(e)}},{key:"onMessage",value:function(e){this.get(20).onMessage(e)}},{key:"send",value:function(e){return this._socketHandler?this._previousState!==k.NET_STATE_CONNECTED&&e.head.servcmd.includes(Fn.SSO_STAT)?(this.reConnect(),this.isPrivateNetWork()?Promise.resolve():this._sendLogViaHTTP(e)):this._socketHandler.send(e):Promise.reject()}},{key:"_sendLogViaHTTP",value:function(e){var t=G.HOST.CURRENT.STAT;t="".concat(t,"/v4/imopenstat/tim_web_report_v2?sdkappid=").concat(e.head.sdkappid,"&reqtime=").concat(Date.now()),e=JSON.stringify(e.body);return da("POST",t,e)}},{key:"simplySend",value:function(e){return this._socketHandler?this._socketHandler.simplySend(e):Promise.reject()}},{key:"onOpen",value:function(){this._ping()}},{key:"onClose",value:function(){this._socketHandler&&this._socketHandler.getReconnectFlag()&&this._emitNetStateChangeEvent(k.NET_STATE_DISCONNECTED),this.reConnect()}},{key:"onError",value:function(){ee&&!J&&this.warn("DomainNameInMP"),this._emitNetStateChangeEvent(k.NET_STATE_DISCONNECTED)}},{key:"getKeyMap",value:function(e){return this.get(20).getKeyMap(e)}},{key:"onRequestTimeout",value:function(){3e4<=Date.now()-this._lastDiagnoseTS&&this.diagnose()}},{key:"onSendFail",value:function(){this._emitNetStateChangeEvent(k.NET_STATE_DISCONNECTED)}},{key:"onReconnected",value:function(){we.l("".concat(this._n,".onReconnected cost:").concat(Yt(this._disconnectedTS,!0,!0))),this._m.restartTimer(),this.get(20).onReconnected(Yt(this._disconnectedTS,!1,!1)),this._disconnectedTS=0,this._emitNetStateChangeEvent(k.NET_STATE_CONNECTED)}},{key:"onReconnectFailed",value:function(){we.l("".concat(this._n,".onReconnectFailed")),this._emitNetStateChangeEvent(k.NET_STATE_DISCONNECTED)}},{key:"setIsWorkerEnabled",value:function(e){this._socketHandler&&this._socketHandler.setIsWorkerEnabled(!1)}},{key:"offline",value:function(){this._emitNetStateChangeEvent(k.NET_STATE_DISCONNECTED)}},{key:"reConnect",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=!1,n=(this._socketHandler&&(t=this._socketHandler.getReconnectFlag()),"forcedFlag:".concat(e," fatalErrorFlag:").concat(this._fatalErrorFlag," previousState:").concat(this._previousState," reconnectFlag:").concat(t));if(we.l("".concat(this._n,".reConnect ").concat(n)),!this._fatalErrorFlag&&this._socketHandler){if(!0===e)this._socketHandler.forcedReconnect();else{if(this._previousState===k.NET_STATE_CONNECTING&&t)return;this._socketHandler.forcedReconnect()}this._emitNetStateChangeEvent(k.NET_STATE_CONNECTING)}}},{key:"_emitNetStateChangeEvent",value:function(e){this._previousState!==e&&(we.l("".concat(this._n,"._emitNetStateChangeEvent from ").concat(this._previousState," to ").concat(e)),e===k.NET_STATE_DISCONNECTED&&0===this._disconnectedTS&&(this._disconnectedTS=Date.now(),this.diagnose()),this._previousState=e,this.emitOEvt(E.NET_STATE_CHANGE,{state:e}))}},{key:"_ping",value:function(){var e,t=this;!0!==this._probing&&(this._probing=!0,e=this.get(20).getProtocolData({P:Fn.PING}),this.send(e).then((function(){t._probing=!1})).catch((function(e){t._probing=!1;var n=t.get(15).isOnline();if(we.w("".concat(t._n,"._ping failed. bOnline:").concat(n," error:"),e),e&&60002===e.code)return new eo("error").setMessage("code:".concat(e.code," message:").concat(e.message)).end(),t._fatalErrorFlag=!0,void t._emitNetStateChangeEvent(k.NET_STATE_DISCONNECTED);n?t.reConnect():t._emitNetStateChangeEvent(k.NET_STATE_DISCONNECTED)})))}},{key:"_checkNextPing",value:function(){this._socketHandler&&this._socketHandler.isConnected()&&Date.now()>=this._socketHandler.getNextPingTs()&&this._ping()}},{key:"dealloc",value:function(){this._socketHandler&&(this._socketHandler.close(),this._socketHandler=null),-1<this._timerForNotLoggedIn&&clearInterval(this._timerForNotLoggedIn)}},{key:"onRestApiKickedOut",value:function(){this._socketHandler&&(this._socketHandler.close(),this.reConnect(!0))}},{key:"canIUseInflate",value:function(){return this._m.canIUseInflate()}},{key:"getSocketID",value:function(){if(this._socketHandler)return this._socketHandler.getSocketID()}},{key:"diagnose",value:function(){this.isPrivateNetWork()||(this._lastDiagnoseTS=Date.now(),this._diagnoseBySSO(),this._diagnoseByCDN())}},{key:"_diagnoseBySSO",value:function(){var e=this,t=this._socketHandler.getURL(),n=t.split("/")[2];n.startsWith("ws")&&(t=t.slice(t.indexOf("info?")+5),n="https://".concat(n,"/v3/netcheck/getconninfo?").concat(t,"&reqtime=").concat(Date.now()),da("GET",n).catch((function(t){we.w("".concat(e._n,"._diagnoseBySSO failed. error:"),t)})))}},{key:"_diagnoseByCDN",value:function(){var e=this,t=this._socketHandler.getURL();t=t.slice(t.indexOf("info?")+5),t="https://boce-cdn.my-imcloud.com/v3/netcheck/getconninfo?".concat(t,"&reqtime=").concat(Date.now());da("GET",t).catch((function(t){we.w("".concat(e._n,"._diagnoseByCDN failed. error:"),t)}))}},{key:"reset",value:function(){we.l("".concat(this._n,".reset")),this._previousState=k.NET_STATE_CONNECTED,this._probing=!1,this._fatalErrorFlag=!1,this._timerForNotLoggedIn=setInterval(this.onCheckTimer.bind(this),1e3),this._disconnectedTS=0,this._lastDiagnoseTS=0}}]),Sa),pa=["a2","tinyid"],ha=["a2","tinyid"],ga=(c(Ta,[{key:"_fillMap",value:function(){this._map.clear();var e=this._sessionM.genCommonHead(),n=this._sessionM.genCosSpecifiedHead(),o=this._sessionM.genSSOReportHead();this._map.set(Fn.LOGIN,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.IM_OPEN_STATUS,".").concat(Fn.LOGIN)}),body:{state:"Online",isWebUniapp:0,deviceBrand:0},keyMap:{req:{deviceBrand:"InstType"},res:{InstId:"instanceID",HelloInterval:"helloInterval",RichMsgAuthKey:"authKey"}}}),this._map.set(Fn.LOGOUT,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.IM_OPEN_STATUS,".").concat(Fn.LOGOUT)}),body:{type:0},keyMap:{req:{type:"wslogout_type"}}}),this._map.set(Fn.HELLO,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.IM_OPEN_STATUS,".").concat(Fn.HELLO)}),body:{isWebUniapp:0},keyMap:{res:{NewInstInfo:"newInstanceInfo"}}}),this._map.set(Fn.KICK_OTHER,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.STAT_SERVICE,".").concat(Fn.KICK_OTHER)}),body:{}}),this._map.set(Fn.COS_SIGN,{head:t(t({},n),{},{servcmd:"".concat(G.NAME.IM_COS_SIGN,".").concat(Fn.COS_SIGN)}),body:{cmd:"open_im_cos_svc",subCmd:"get_cos_token",duration:300,version:2},keyMap:{req:{userSig:"usersig",subCmd:"sub_cmd",cmd:"cmd",duration:"duration",version:"version"},res:{expired_time:"expiredTime",bucket_name:"bucketName",session_token:"sessionToken",tmp_secret_id:"secretId",tmp_secret_key:"secretKey"}}}),this._map.set(Fn.COS_PRE_SIG,{head:t(t({},n),{},{servcmd:"".concat(G.NAME.CUSTOM_UPLOAD,".").concat(Fn.COS_PRE_SIG)}),body:{fileType:void 0,fileName:void 0,uploadMethod:0,duration:900},keyMap:{req:{userSig:"usersig",fileType:"file_type",fileName:"file_name",uploadMethod:"upload_method"},res:{expired_time:"expiredTime",request_id:"requestId",head_url:"headUrl",upload_url:"uploadUrl",download_url:"downloadUrl",ci_url:"ciUrl",snapshot_url:"requestSnapshotUrl"}}}),this._map.set(Fn.SIMPLE_COS_PRE_SIG,{head:t(t({},n),{},{servcmd:"".concat(G.NAME.CUSTOM_UPLOAD,".").concat(Fn.SIMPLE_COS_PRE_SIG)}),body:{uploadMethod:0,platform:2,SDKAppID:0,userID:"",conversationType:1,uploadConfig:[{fileID:1,fileType:1,fileName:""}]},keyMap:{req:{platform:"uint32_platform",SDKAppID:"uint32_sdkappid",userID:"str_user_id",uploadMethod:"uint32_upload_method",conversationType:"uint32_scene",uploadConfig:"rpt_upload_object",fileID:"uint32_file_id",fileType:"uint32_file_type",fileName:"str_file_name"},res:{str_final_ip:"uploadIP",rpt_pre_sig:"preSig",uint32_file_id:"fileID",uint32_exist_flag:"existFlag",str_download_url:"downloadUrl",str_upload_url:"uploadUrl",str_snapshot_url:"requestSnapshotUrl",str_file_key:"fileKey"}}}),this._map.set(Fn.GET_IMAGE_INFO,{head:t(t({},n),{},{servcmd:"".concat(G.NAME.CUSTOM_UPLOAD,".").concat(Fn.GET_IMAGE_INFO)}),body:{imageUrl:""},keyMap:{req:{imageUrl:"str_image_url"},res:{rpt_msg_image_info:"imageInfoArray",uint32_image_type:"type",str_url:"url",uint32_width:"width",uint32_height:"height",str_image_format:"imageFormat"}}}),this._map.set(Fn.GET_IP,{head:t(t({},n),{},{servcmd:"".concat(G.NAME.CUSTOM_UPLOAD,".").concat(Fn.GET_IP)}),body:{domainName:""},keyMap:{req:{domainName:"str_domain"},res:{str_final_ip:"ip"}}}),this._map.set(Fn.VIDEO_COVER,{head:t(t({},n),{},{servcmd:"".concat(G.NAME.CUSTOM_UPLOAD,".").concat(Fn.VIDEO_COVER)}),body:{version:1,platform:void 0,coverName:void 0,requestSnapshotUrl:void 0},keyMap:{req:{version:"version",platform:"platform",coverName:"cover_name",requestSnapshotUrl:"snapshot_url"},res:{error_code:"errorCode",error_msg:"errorInfo",download_url:"snapshotUrl"}}}),this._map.set(Fn.FETCH_COMMERCIAL_CONFIG,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.IM_CONFIG_MANAGER,".").concat(Fn.FETCH_COMMERCIAL_CONFIG)}),body:{SDKAppID:0},keyMap:{req:{SDKAppID:"uint32_sdkappid"},res:{int32_error_code:"errorCode",str_error_message:"errorMessage",str_purchase_bits:"purchaseBits",uint32_expired_time:"expiredTime"}}}),this._map.set(Fn.PUSHED_COMMERCIAL_CONFIG,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.IM_CONFIG_MANAGER,".").concat(Fn.PUSHED_COMMERCIAL_CONFIG)}),body:{},keyMap:{res:{int32_error_code:"errorCode",str_error_message:"errorMessage",str_purchase_bits:"purchaseBits",uint32_expired_time:"expiredTime"}}}),this._map.set(Fn.FETCH_CLOUD_CTRL_CONFIG,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.IM_CONFIG_MANAGER,".").concat(Fn.FETCH_CLOUD_CTRL_CONFIG)}),body:{SDKAppID:0,version:0},keyMap:{req:{SDKAppID:"uint32_sdkappid",version:"uint64_version"},res:{int32_error_code:"errorCode",str_error_message:"errorMessage",str_json_config:"cloudControlConfig",uint32_expired_time:"expiredTime",uint32_sdkappid:"SDKAppID",uint64_version:"version"}}}),this._map.set(Fn.PUSHED_CLOUD_CTRL_CONFIG,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.IM_CONFIG_MANAGER,".").concat(Fn.PUSHED_CLOUD_CTRL_CONFIG)}),body:{},keyMap:{res:{int32_error_code:"errorCode",str_error_message:"errorMessage",str_json_config:"cloudControlConfig",uint32_expired_time:"expiredTime",uint32_sdkappid:"SDKAppID",uint64_version:"version"}}}),this._map.set(Fn.OVERLOAD_NOTIFY,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OVERLOAD_PUSH,".").concat(Fn.OVERLOAD_NOTIFY)}),body:{},keyMap:{res:{OverLoadServCmd:"overloadCommand",DelaySecs:"waitingTime"}}}),this._map.set(Fn.SYNC_UNREAD_MSG,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OPEN_IM,".").concat(Fn.SYNC_UNREAD_MSG)}),body:{cookie:"",syncFlag:0,needAbstract:1,isOnlineSync:0,needSignaling:1,needCachedMsg:1},keyMap:{req:{fromAccount:"From_Account",toAccount:"To_Account",from:"From_Account",to:"To_Account",time:"MsgTimeStamp",sequence:"MsgSeq",random:"MsgRandom",elements:"MsgBody"},res:{MsgList:"messageList",SyncFlag:"syncFlag",To_Account:"to",From_Account:"from",ClientSeq:"clientSequence",MsgSeq:"sequence",NoticeSeq:"noticeSequence",NotifySeq:"notifySequence",MsgRandom:"random",MsgTimeStamp:"time",MsgContent:"content",ToGroupId:"to",MsgKey:"messageKey",GroupTips:"groupTips",MsgBody:"elements",MsgType:"type",C2CRemainingUnreadCount:"C2CRemainingUnreadList",C2CPairUnreadCount:"C2CPairUnreadList"}}}),this._map.set(Fn.GET_PROFANITY_LIST,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.IM_MSG_AUDIT_MGR,".").concat(Fn.GET_PROFANITY_LIST)}),body:{version:0,deviceID:"",startIndex:void 0},keyMap:{req:{version:"uint64_version",deviceID:"str_device_id",startIndex:"uint64_start_index"},res:{msg_cmd_error_code:"errorInfo",str_err_msg:"errorMessage",uint32_code:"errorCode",msg_scene_ctl_config:"filterConfig",uint64_c2c_custom_msg_flag:"c2c_custom_message",uint64_c2c_text_msg_flag:"c2c_text_message",uint64_group_custom_msg_flag:"group_custom_message",uint64_group_text_msg_flag:"group_text_message",uint64_group_info_flag:"group_profile",uint64_group_member_info_flag:"group_member_profile",uint64_relation_chain_flag:"sns",uint64_user_info_flag:"user_profile",rpt_msg_dirty_word:"lexicon",str_dirty_word:"profanity",str_replaced_content:"replacement",uint64_filter_type:"filterType",uint64_id:"id",uint64_word_type:"profanityType",uint64_complete_flag:"completeFlag",uint64_next_start_index:"nextStartIndex",uint64_version:"version",uint64_expired_time:"expiredTime"}}}),this._map.set(Fn.SEND_C2C_MSG,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OPEN_IM,".").concat(Fn.SEND_C2C_MSG)}),body:{fromAccount:"",toAccount:"",msgSeq:0,msgRandom:0,msgBody:[],cloudCustomData:void 0,nick:"",avatar:"",msgLifeTime:void 0,offlinePushInfo:{pushFlag:0,title:"",desc:"",ext:"",apnsInfo:{sound:"",badgeMode:0,isVoipPush:void 0,image:""},androidInfo:{sound:"",XiaoMiChannelID:"",OPPOChannelID:"",GoogleChannelID:"",VIVOClassification:1,VIVOCategory:"",HuaWeiCategory:"",HuaWeiImage:"",HonorImage:"",GoogleImage:""}},messageControlInfo:void 0,clientTime:void 0,needReadReceipt:0,isSupportExtension:0,isRelayMessage:0,cmConfigID:void 0},keyMap:{req:{fromAccount:"From_Account",toAccount:"To_Account",msgTimeStamp:"MsgTimeStamp",msgSeq:"MsgSeq",msgRandom:"MsgRandom",msgBody:"MsgBody",count:"MaxCnt",lastMessageTime:"LastMsgTime",messageKey:"MsgKey",peerAccount:"Peer_Account",data:"Data",description:"Desc",extension:"Ext",type:"MsgType",content:"MsgContent",sizeType:"Type",uuid:"UUID",url:"",imageUrl:"URL",fileUrl:"Url",remoteAudioUrl:"Url",remoteVideoUrl:"VideoUrl",thumbUUID:"ThumbUUID",videoUUID:"VideoUUID",videoUrl:"",downloadFlag:"Download_Flag",nick:"From_AccountNick",avatar:"From_AccountHeadurl",from:"From_Account",time:"MsgTimeStamp",messageRandom:"MsgRandom",messageSequence:"MsgSeq",elements:"MsgBody",clientSequence:"ClientSeq",payload:"MsgContent",messageList:"MsgList",messageNumber:"MsgNum",abstractList:"AbstractList",messageBody:"MsgBody",needReadReceipt:"IsNeedReadReceipt",GoogleChannelID:"GoogleChannelID",XiaoMiChannelID:"XiaoMiChannelID"}}}),this._map.set(Fn.SEND_GRP_MSG,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.SEND_GRP_MSG)}),body:{fromAccount:"",groupID:"",random:0,clientSequence:0,priority:"",msgBody:[],cloudCustomData:void 0,onlineOnlyFlag:0,offlinePushInfo:{pushFlag:0,title:"",desc:"",ext:"",apnsInfo:{sound:"",badgeMode:0,isVoipPush:void 0,image:""},androidInfo:{sound:"",XiaoMiChannelID:"",OPPOChannelID:"",GoogleChannelID:"",VIVOClassification:1,VIVOCategory:"",HuaWeiCategory:"",HuaWeiImage:"",HonorImage:"",GoogleImage:""}},groupAtInfo:[],messageControlInfo:void 0,clientTime:void 0,needReadReceipt:0,topicID:void 0,receiverList:void 0,isSupportExtension:0,isRelayMessage:0,cmConfigID:void 0},keyMap:{req:{to:"GroupId",extension:"Ext",data:"Data",description:"Desc",random:"Random",sequence:"ReqMsgSeq",count:"ReqMsgNumber",type:"MsgType",priority:"MsgPriority",content:"MsgContent",elements:"MsgBody",sizeType:"Type",uuid:"UUID",url:"",imageUrl:"URL",fileUrl:"Url",remoteAudioUrl:"Url",remoteVideoUrl:"VideoUrl",thumbUUID:"ThumbUUID",videoUUID:"VideoUUID",videoUrl:"",downloadFlag:"Download_Flag",clientSequence:"ClientSeq",from:"From_Account",time:"MsgTimeStamp",messageRandom:"MsgRandom",messageSequence:"MsgSeq",payload:"MsgContent",messageList:"MsgList",messageNumber:"MsgNum",abstractList:"AbstractList",messageBody:"MsgBody",needReadReceipt:"NeedReadReceipt",receiverList:"To_Account",GoogleChannelID:"GoogleChannelID",XiaoMiChannelID:"XiaoMiChannelID"},res:{MsgTime:"time",MsgSeq:"sequence"}}}),this._map.set(Fn.REVOKE_C2C_MSG,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OPEN_IM,".").concat(Fn.REVOKE_C2C_MSG)}),body:{msgInfo:{fromAccount:"",toAccount:"",msgTimeStamp:0,msgSeq:0,msgRandom:0}},keyMap:{req:{msgInfo:"MsgInfo",msgTimeStamp:"MsgTimeStamp",msgSeq:"MsgSeq",msgRandom:"MsgRandom"}}}),this._map.set(Fn.REVOKE_GRP_MSG,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.REVOKE_GRP_MSG)}),body:{groupID:"",msgSeqList:void 0,topicID:""},keyMap:{req:{msgSeqList:"MsgSeqList",msgSeq:"MsgSeq"}}}),this._map.set(Fn.GET_C2C_ROAMING_MSG,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OPEN_IM,".").concat(Fn.GET_C2C_ROAMING_MSG)}),body:{peerAccount:"",count:15,lastMessageTime:0,messageKey:"",withRecalledMessage:1,direction:0},keyMap:{req:{messageKey:"MsgKey",peerAccount:"Peer_Account",count:"MaxCnt",lastMessageTime:"LastMsgTime",withRecalledMessage:"WithRecalledMsg",direction:"GetDirection"},res:{LastMsgTime:"lastMessageTime",IsNeedReadReceipt:"needReadReceipt",IsPeerRead:"readReceiptSentByPeer"}}}),this._map.set(Fn.MODIFY_C2C_MSG,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OPEN_IM,".").concat(Fn.MODIFY_C2C_MSG)}),body:{from:"",to:"",sequence:0,random:0,time:0,version:0,elements:void 0,cloudCustomData:void 0},keyMap:{req:{sequence:"MsgSeq",random:"MsgRandom",time:"MsgTime",version:"MsgVersion",type:"MsgType",content:"MsgContent"}}}),this._map.set(Fn.GET_GRP_ROAMING_MSG,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.GET_GRP_ROAMING_MSG)}),body:{withRecalledMsg:1,groupID:"",count:15,sequence:"",topicID:void 0},keyMap:{req:{sequence:"ReqMsgSeq",count:"ReqMsgNumber",withRecalledMessage:"WithRecalledMsg"},res:{Random:"random",MsgTime:"time",MsgSeq:"sequence",ReqMsgSeq:"sequence",RspMsgList:"messageList",IsSystemMsg:"isSystemMessage",ToGroupId:"to",EnumFrom_AccountType:"fromAccountType",EnumTo_AccountType:"toAccountType",GroupCode:"groupCode",MsgPriority:"priority",MsgBody:"elements",MsgType:"type",MsgContent:"content",IsFinished:"complete",Download_Flag:"downloadFlag",ClientSeq:"clientSequence",ThumbUUID:"thumbUUID",VideoUUID:"videoUUID",ToTopicId:"topicID",InvisibleMsgSeq:"invisibleSequenceList",NextReqMsgSeq:"nextSequence"}}}),this._map.set(Fn.SET_C2C_MSG_READ,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OPEN_IM,".").concat(Fn.SET_C2C_MSG_READ)}),body:{C2CMsgReaded:void 0},keyMap:{req:{lastMessageTime:"LastedMsgTime"}}}),this._map.set(Fn.SET_C2C_PEER_MUTE_NOTIFICATIONS,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OPEN_IM,".").concat(Fn.SET_C2C_PEER_MUTE_NOTIFICATIONS)}),body:{userIDList:void 0,muteFlag:0},keyMap:{req:{userIDList:"Peer_Account",muteFlag:"Mute_Notifications"}}}),this._map.set(Fn.GET_C2C_PEER_MUTE_NOTIFICATIONS,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OPEN_IM,".").concat(Fn.GET_C2C_PEER_MUTE_NOTIFICATIONS)}),body:{toAccount:void 0,userIDList:void 0},keyMap:{req:{userIDList:"Peer_Account"},res:{MuteNotificationsList:"muteFlagList"}}}),this._map.set(Fn.SET_GRP_MSG_READ,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.SET_GRP_MSG_READ)}),body:{groupID:void 0,messageReadSeq:void 0,topicID:void 0},keyMap:{req:{messageReadSeq:"MsgReadedSeq"}}}),this._map.set(Fn.SET_ALL_MSG_READ,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OPEN_IM,".").concat(Fn.SET_ALL_MSG_READ)}),body:{readAllC2CMessage:0,groupMessageReadInfoList:[]},keyMap:{req:{readAllC2CMessage:"C2CReadAllMsg",groupMessageReadInfoList:"GroupReadInfo",messageSequence:"MsgSeq"},res:{C2CReadAllMsg:"readAllC2CMessage",GroupReadInfoArray:"groupMessageReadInfoList"}}}),this._map.set(Fn.DEL_C2C_MSG,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OPEN_IM,".").concat(Fn.DEL_C2C_MSG)}),body:{fromAccount:"",to:"",keyList:void 0},keyMap:{req:{keyList:"MsgKeyList"}}}),this._map.set(Fn.DEL_GRP_MSG,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.DEL_GRP_MSG)}),body:{groupID:"",deleter:"",keyList:void 0,topicID:void 0},keyMap:{req:{deleter:"Deleter_Account",keyList:"Seqs"}}}),this._map.set(Fn.TRANSLATE_TEXT,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.IM_OPEN_TRANSLATE,".").concat(Fn.TRANSLATE_TEXT)}),body:{sourceTextList:void 0,SDKAppID:0,from:0,source:"",target:""},keyMap:{req:{sourceTextList:"SourceText",SDKAppID:"SdkAppId",from:"FromAccount"},res:{TargetText:"translatedTextList",RequestId:"requestID",CmdErrorCode:"error",ErrorCode:"code",ErrorInfo:"message"}}}),this._map.set(Fn.VOICE_TO_TEXT,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.IM_OPEN_SPEECH,".").concat(Fn.VOICE_TO_TEXT)}),body:{url:"",SDKAppID:0,format:"",sourceType:0,language:""},keyMap:{req:{url:"BytesUrl",SDKAppID:"Uint32Sdkappid",format:"BytesVoiceFormat",sourceType:"Uint64SourceType",language:"BytesEngServiceType"},res:{BytesRequestid:"requestID",BytesResult:"result",CmdErrorCode:"error",ErrorCode:"code",ErrorInfo:"message"}}}),this._map.set(Fn.MODIFY_GRP_MSG,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OPEN_IM,".").concat(Fn.MODIFY_GRP_MSG)}),body:{groupID:"",topicID:void 0,sequence:0,version:0,elements:void 0,cloudCustomData:void 0},keyMap:{req:{sequence:"MsgSeq",version:"MsgVersion",type:"MsgType",content:"MsgContent"}}}),this._map.set(Fn.GET_READ_RECEIPT,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.GET_READ_RECEIPT)}),body:{groupID:"",sequenceList:void 0},keyMap:{req:{sequence:"MsgSeq"}}}),this._map.set(Fn.SEND_C2C_READ_RECEIPT,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OPEN_IM,".").concat(Fn.SEND_C2C_READ_RECEIPT)}),body:{peerAccount:"",messageInfoList:void 0},keyMap:{req:{peerAccount:"Peer_Account",messageInfoList:"C2CMsgInfo",fromAccount:"From_Account",toAccount:"To_Account",sequence:"MsgSeq",random:"MsgRandom",time:"MsgTime",clientTime:"MsgClientTime"}}}),this._map.set(Fn.SEND_READ_RECEIPT,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.SEND_READ_RECEIPT)}),body:{groupID:"",sequenceList:void 0},keyMap:{req:{sequenceList:"MsgSeqList",sequence:"MsgSeq"}}}),this._map.set(Fn.GET_READ_RECEIPT_DETAIL,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.GET_READ_RECEIPT_DETAIL)}),body:{groupID:"",sequence:void 0,flag:0,cursor:0,count:0},keyMap:{req:{sequence:"MsgSeq",count:"Num"},res:{ReadList:"readUserIDList",Read_Account:"userID",UnreadList:"unreadUserIDList",Unread_Account:"userID",IsFinish:"isCompleted"}}}),this._map.set(Fn.MODIFY_C2C_MSG_EXT,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OPEN_IM_MSG_EXT,".").concat(Fn.MODIFY_C2C_MSG_EXT)}),body:{from:void 0,to:void 0,messageKey:void 0,operateType:void 0,extensionList:void 0}}),this._map.set(Fn.GET_C2C_MSG_EXT,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OPEN_IM_MSG_EXT,".").concat(Fn.GET_C2C_MSG_EXT)}),body:{from:void 0,to:void 0,messageKey:void 0,startSequence:void 0}}),this._map.set(Fn.MODIFY_GRP_MSG_EXT,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OPEN_IM_MSG_EXT,".").concat(Fn.MODIFY_GRP_MSG_EXT)}),body:{groupID:void 0,topicID:void 0,messageSequence:void 0,operateType:void 0,extensionList:void 0}}),this._map.set(Fn.GET_GRP_MSG_EXT,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OPEN_IM_MSG_EXT,".").concat(Fn.GET_GRP_MSG_EXT)}),body:{groupID:void 0,topicID:void 0,messageSequence:void 0,startSequence:void 0}}),this._map.set(Fn.MSG_CLOUD_SEARCH,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.MSG_SEARCH,".").concat(Fn.MSG_CLOUD_SEARCH)}),body:{keywordList:void 0,keywordListMatchType:"or",account:void 0,groupID:void 0,count:100,cursor:void 0,messageTypeList:void 0,senderUserIDList:void 0,startTime:void 0,endTime:void 0},keyMap:{req:{keywordListMatchType:"MatchType",account:"PeerAccount",groupID:"GroupID",messageTypeList:"MsgTypeList",senderUserIDList:"SendUserIDList"},res:{GroupID:"groupID",UserID:"userID",Count:"messageCount",LastMsgTime:"lastMessageTime",ConversationMsgs:"searchResult",IsNeedReadReceipt:"needReadReceipt",IsPeerRead:"readReceiptSentByPeer",MsgSeq:"sequence",ReqMsgSeq:"sequence",IsSystemMsg:"isSystemMessage",ToGroupId:"to",EnumFrom_AccountType:"fromAccountType",EnumTo_AccountType:"toAccountType",GroupCode:"groupCode",MsgContent:"content",ClientSeq:"clientSequence",ToTopicId:"topicID",InvisibleMsgSeq:"invisibleSequenceList",ErrorCode:"code",ErrorInfo:"message"}}}),this._map.set(Fn.ADD_C2C_MSG_REACTION,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OPEN_IM_MSG_EXT,".").concat(Fn.ADD_C2C_MSG_REACTION)}),body:{from:void 0,to:void 0,reactionID:void 0,messageKey:void 0,userIDList:void 0},keyMap:{req:{userIDList:"Add_Account"}}}),this._map.set(Fn.RM_C2C_MSG_REACTION,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OPEN_IM_MSG_EXT,".").concat(Fn.RM_C2C_MSG_REACTION)}),body:{from:void 0,to:void 0,reactionID:void 0,messageKey:void 0,userIDList:void 0},keyMap:{req:{userIDList:"Del_Account"}}}),this._map.set(Fn.GET_C2C_MSG_REACTIONS,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OPEN_IM_MSG_EXT,".").concat(Fn.GET_C2C_MSG_REACTIONS)}),body:{from:void 0,to:void 0,messageKeyList:void 0,count:void 0}}),this._map.set(Fn.GET_C2C_MSG_REACTION_USER_LIST,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OPEN_IM_MSG_EXT,".").concat(Fn.GET_C2C_MSG_REACTION_USER_LIST)}),body:{from:void 0,to:void 0,reactionID:void 0,messageKey:void 0,count:void 0}}),this._map.set(Fn.ADD_GRP_MSG_REACTION,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OPEN_IM_MSG_EXT,".").concat(Fn.ADD_GRP_MSG_REACTION)}),body:{groupID:void 0,topicID:void 0,reactionID:void 0,messageSequence:void 0,userIDList:void 0},keyMap:{req:{userIDList:"Add_Account"}}}),this._map.set(Fn.RM_GRP_MSG_REACTION,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OPEN_IM_MSG_EXT,".").concat(Fn.RM_GRP_MSG_REACTION)}),body:{groupID:void 0,topicID:void 0,reactionID:void 0,messageSequence:void 0,userIDList:void 0},keyMap:{req:{userIDList:"Del_Account"}}}),this._map.set(Fn.GET_GRP_MSG_REACTIONS,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OPEN_IM_MSG_EXT,".").concat(Fn.GET_GRP_MSG_REACTIONS)}),body:{groupID:void 0,topicID:void 0,messageSequenceList:void 0,count:void 0},keyMap:{res:{MsgSeq:"messageSequence"}}}),this._map.set(Fn.GET_GRP_MSG_REACTION_USER_LIST,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OPEN_IM_MSG_EXT,".").concat(Fn.GET_GRP_MSG_REACTION_USER_LIST)}),body:{groupID:void 0,topicID:void 0,reactionID:void 0,messageSequence:void 0,nextSeq:void 0,count:void 0}}),this._map.set(Fn.GET_C2C_PEER_READ_TIME,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OPEN_IM,".").concat(Fn.GET_C2C_PEER_READ_TIME)}),body:{userIDList:void 0},keyMap:{req:{userIDList:"To_Account"},res:{ReadTime:"peerReadTimeList"}}}),this._map.set(Fn.PAGING_GET_CONV_LIST,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.RECENT_CONTACT,".").concat(Fn.PAGING_GET_CONV_LIST)}),body:{fromAccount:void 0,timeStamp:void 0,startIndex:void 0,pinnedTimeStamp:void 0,pinnedStartIndex:void 0,orderType:void 0,messageAssistFlag:15,assistFlag:31},keyMap:{req:{messageAssistFlag:"MsgAssistFlags",assistFlag:"AssistFlags",pinnedTimeStamp:"TopTimeStamp",pinnedStartIndex:"TopStartIndex"},res:{SessionItem:"conversations",ToAccount:"groupID",To_Account:"userID",UnreadMsgCount:"unreadCount",MsgGroupReadedSeq:"messageReadSeq",C2cPeerReadTime:"c2cPeerReadTime",LastMsgFlags:"lastMessageFlag",TopFlags:"isPinned",TopTimeStamp:"pinnedTimeStamp",TopStartIndex:"pinnedStartIndex",GroupId:"convGroupID",C2cRemark:"friendRemark",MsgRecvOption:"messageRemindType",GroupIgnoredUnreadSeqCount:"noUnreadCount",GroupNextMsgSeq:"nextMessageSeq"}}}),this._map.set(Fn.DEL_CONV,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.RECENT_CONTACT,".").concat(Fn.DEL_CONV)}),body:{fromAccount:"",conversationList:void 0,clearHistoryMessage:void 0},keyMap:{req:{toGroupID:"ToGroupid",clearHistoryMessage:"ClearRamble",conversationList:"ContactItem"},res:{ResultItem:"resultList",ToGroupid:"groupID",ResultCode:"code",ResultInfo:"info"}}}),this._map.set(Fn.CLEAR_HISTORY_MSG,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.RECENT_CONTACT,".").concat(Fn.CLEAR_HISTORY_MSG)}),body:{fromAccount:"",toAccount:void 0,type:1,toGroupID:void 0},keyMap:{req:{toGroupID:"ToGroupid"}}}),this._map.set(Fn.PIN_CONV,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.RECENT_CONTACT,".").concat(Fn.PIN_CONV)}),body:{fromAccount:"",operationType:1,itemList:void 0},keyMap:{req:{itemList:"RecentContactItem"}}}),this._map.set(Fn.DEL_GROUP_AT_TIPS,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OPEN_IM,".").concat(Fn.DEL_GROUP_AT_TIPS)}),body:{messageListToDelete:void 0},keyMap:{req:{messageListToDelete:"DelMsgList",messageSeq:"MsgSeq",messageRandom:"MsgRandom"}}}),this._map.set(Fn.SET_CONV_CUSTOM_DATA,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.RECENT_CONTACT,".").concat(Fn.MARK_CONV)}),body:{fromAccount:"",itemList:void 0},keyMap:{req:{itemList:"MarkItem",operationType:"OptType",groupID:"ToGroupId"},res:{ToGroupId:"groupID",OptType:"operationType"}}}),this._map.set(Fn.MARK_CONV,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.RECENT_CONTACT,".").concat(Fn.MARK_CONV)}),body:{fromAccount:"",itemList:void 0},keyMap:{req:{itemList:"MarkItem",operationType:"OptType",groupID:"ToGroupId"},res:{ToGroupId:"groupID",OptType:"operationType"}}}),this._map.set(Fn.CREATE_CONV_GRP,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.RECENT_CONTACT,".").concat(Fn.CREATE_CONV_GRP)}),body:{fromAccount:"",itemList:void 0},keyMap:{req:{itemList:"GroupContactItem",groupID:"ToGroupId"},res:{GroupId:"convGroupID",ToGroupId:"groupID",OptType:"operationType"}}}),this._map.set(Fn.DEL_CONV_GRP,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.RECENT_CONTACT,".").concat(Fn.DEL_CONV_GRP)}),body:{fromAccount:"",groupName:void 0},keyMap:{res:{GroupId:"convGroupID"}}}),this._map.set(Fn.RENAME_CONV_GRP,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.RECENT_CONTACT,".").concat(Fn.RENAME_CONV_GRP)}),body:{fromAccount:"",updateType:void 0,updateGroup:void 0},keyMap:{req:{oldName:"OldGroupName",newName:"NewGroupName",groupID:"ToGroupId",operationType:"ContactOptType",groupName:"OldGroupName",updateItem:"ContactUpdateItem"},res:{ContactOptType:"operationType",ToGroupId:"groupID",GroupId:"convGroupID"}}}),this._map.set(Fn.ADD_CONV_TO_GRP,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.RECENT_CONTACT,".").concat(Fn.RENAME_CONV_GRP)}),body:{fromAccount:"",updateType:void 0,updateGroup:{groupName:void 0,updateGroupType:void 0,updateItem:void 0}}}),this._map.set(Fn.DEL_CONV_FROM_GRP,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.RECENT_CONTACT,".").concat(Fn.RENAME_CONV_GRP)}),body:{fromAccount:"",updateType:void 0,updateGroup:void 0}}),this._map.set(Fn.GET_CONV_GRP_LIST,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.RECENT_CONTACT,".").concat(Fn.GET_CONV_GRP_LIST)}),body:{fromAccount:"",startIndex:void 0},keyMap:{res:{GroupId:"convGroupID",ToGroupId:"groupID",OptType:"operationType",CustomMark:"customData",ContactGroupId:"convGroupIDList"}}}),this._map.set(Fn.SEARCH_CONV_GRP_MARK,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.RECENT_CONTACT,".").concat(Fn.SEARCH_CONV_GRP_MARK)}),body:{fromAccount:"",contactItem:void 0},keyMap:{req:{groupID:"ToGroupId"},res:{GroupId:"convGroupID",ToGroupId:"groupID",OptType:"operationType",CustomMark:"customData",ContactGroupId:"convGroupIDList",ContactResultItem:"contactItem"}}}),this._map.set(Fn.GET_USER_PROFILE,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.PROFILE,".").concat(Fn.GET_USER_PROFILE)}),body:{fromAccount:"",userItem:[]},keyMap:{req:{toAccount:"To_Account",standardSequence:"StandardSequence",customSequence:"CustomSequence"}}}),this._map.set(Fn.UPDATE_MY_PROFILE,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.PROFILE,".").concat(Fn.UPDATE_MY_PROFILE)}),body:{fromAccount:"",profileItem:[{tag:Pe.NICK,value:""},{tag:Pe.GENDER,value:""},{tag:Pe.ALLOWTYPE,value:""},{tag:Pe.AVATAR,value:""}]},keyMap:{req:{toAccount:"To_Account",standardSequence:"StandardSequence",customSequence:"CustomSequence"}}}),this._map.set(Fn.GET_BL,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.FD,".").concat(Fn.GET_BL)}),body:{fromAccount:"",startIndex:0,maxLimited:30,lastSequence:0},keyMap:{res:{CurruentSequence:"currentSequence"}}}),this._map.set(Fn.ADD_TO_BL,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.FD,".").concat(Fn.ADD_TO_BL)}),body:{fromAccount:"",toAccount:[]}}),this._map.set(Fn.RM_FROM_BL,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.FD,".").concat(Fn.RM_FROM_BL)}),body:{fromAccount:"",toAccount:[]}}),this._map.set(Fn.SET_SELF_STATUS,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.IM_OPEN_STATUS,".").concat(Fn.SET_SELF_STATUS)}),body:{customStatus:""}}),this._map.set(Fn.GET_USER_STATUS,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.IM_OPEN_STATUS,".").concat(Fn.GET_USER_STATUS)}),body:{userIDList:void 0},keyMap:{res:{UserStatusList:"successUserList",ErrorList:"failureUserList",To_Account:"userID",Invalid_Account:"invalidUserID",Status:"statusType"}}}),this._map.set(Fn.SUB_USER_STATUS,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.IM_OPEN_STATUS,".").concat(Fn.SUB_USER_STATUS)}),body:{userIDList:void 0},keyMap:{res:{ErrorList:"failureUserList",To_Account:"userID",Invalid_Account:"invalidUserID"}}}),this._map.set(Fn.UNSUB_USER_STATUS,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.IM_OPEN_STATUS,".").concat(Fn.UNSUB_USER_STATUS)}),body:{userIDList:void 0,unsubscribeAll:void 0},keyMap:{res:{ErrorList:"failureUserList",To_Account:"userID",Invalid_Account:"invalidUserID"}}}),this._map.set(Fn.GET_FD_LIST,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.FD,".").concat(Fn.GET_FD_LIST)}),body:{fromAccount:"",startIndex:0,standardSequence:0,customSequence:0},keyMap:{res:{FriendNum:"friendCount",UserDataItem:"resultList",ValueItem:"tagValueList"}}}),this._map.set(Fn.ADD_FD,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.FD,".").concat(Fn.ADD_FD)}),body:{fromAccount:"",addFriendItem:[],type:""},keyMap:{req:{source:"AddSource",wording:"AddWording",type:"AddType"},res:{ResultItem:"resultList"}}}),this._map.set(Fn.UPDATE_FD,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.FD,".").concat(Fn.UPDATE_FD)}),body:{fromAccount:"",updateItem:void 0},keyMap:{req:{snsItem:"SnsItem"},res:{ResultItem:"resultList"}}}),this._map.set(Fn.DEL_FD,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.FD,".").concat(Fn.DEL_FD)}),body:{fromAccount:"",userIDList:[],type:""},keyMap:{req:{type:"DeleteType"},res:{ResultItem:"resultList"}}}),this._map.set(Fn.GET_FD_PROFILE,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.FD,".").concat(Fn.GET_FD_PROFILE)}),body:{fromAccount:"",userIDList:void 0},keyMap:{res:{InfoItem:"resultList",SnsProfileItem:"tagValueList"}}}),this._map.set(Fn.CHECK_FD,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.FD,".").concat(Fn.CHECK_FD)}),body:{fromAccount:"",userIDList:[],type:""},keyMap:{req:{type:"CheckType"},res:{InfoItem:"resultList"}}}),this._map.set(Fn.GET_FD_APPLICATION_LIST,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.FD,".").concat(Fn.GET_FD_APPLICATION_LIST)}),body:{fromAccount:"",applicationType:"",startTime:0,maxLimited:0,lastSequence:0},keyMap:{res:{PendencyItem:"resultList",AddSource:"source",AddTime:"time",AddWording:"wording",Image:"avatar",UnreadPendencyCount:"unreadCount",To_Account:"userID",PendencyType:"type"}}}),this._map.set(Fn.RESPOND_FD_APPLICATION,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.FD,".").concat(Fn.RESPOND_FD_APPLICATION)}),body:{fromAccount:"",responseFriendItem:[]},keyMap:{req:{tag:"TagName",action:"ResponseAction"},res:{ResultItem:"resultList"}}}),this._map.set(Fn.DEL_FD_APPLICATION,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.FD,".").concat(Fn.DEL_FD_APPLICATION)}),body:{fromAccount:"",type:"",userIDList:void 0},keyMap:{req:{type:"PendencyType",userIDList:"To_Account"},res:{ResultItem:"resultList"}}}),this._map.set(Fn.REPORT_FD_APPLICATION,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.FD,".").concat(Fn.REPORT_FD_APPLICATION)}),body:{fromAccount:"",latestTimeStamp:""},keyMap:{req:{latestTimeStamp:"LatestPendencyTimeStamp"}}}),this._map.set(Fn.CREATE_FD_GRP,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.FD,".").concat(Fn.CREATE_FD_GRP)}),body:{fromAccount:"",groupName:void 0,userIDList:void 0},keyMap:{req:{groupName:"GroupName",userIDList:"To_Account"},res:{ResultItem:"resultList"}}}),this._map.set(Fn.DEL_FD_GRP,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.FD,".").concat(Fn.DEL_FD_GRP)}),body:{fromAccount:"",nameList:void 0},keyMap:{req:{nameList:"GroupName"}}}),this._map.set(Fn.GET_FD_GRP_LIST,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.FD,".").concat(Fn.GET_FD_GRP_LIST)}),body:{fromAccount:"",lastSequence:0,needFriend:"Need_Friend_Type_Yes"},keyMap:{res:{ResultItem:"resultList",GroupName:"name",FriendNumber:"friendCount",To_Account:"userIDList"}}}),this._map.set(Fn.UPDATE_FD_GRP,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.FD,".").concat(Fn.UPDATE_FD_GRP)}),body:{fromAccount:"",oldName:"",newName:void 0,updateGroupItem:void 0},keyMap:{req:{oldName:"GroupOldName",newName:"GroupNewName"},res:{UpdateType:"type",ResultItem:"resultList"}}}),this._map.set(Fn.GET_GRP_LIST,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.GET_GRP_LIST)}),body:{memberAccount:"",limit:void 0,offset:void 0,groupType:void 0,responseFilter:{groupBaseInfoFilter:void 0,selfInfoFilter:void 0},isSupportTopic:0,needAppDefineData:1},keyMap:{req:{memberAccount:"Member_Account"},res:{GroupIdList:"groups",MsgSeq:"readedSequence",LastRecallTime:"_lastRevokedTime",AppDefinedData:"groupCustomField"}}}),this._map.set(Fn.GET_GRP_PROFILE,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.GET_GRP_PROFILE)}),body:{groupIDList:void 0,responseFilter:{groupBaseInfoFilter:void 0,groupCustomFieldFilter:void 0,memberInfoFilter:void 0,memberCustomFieldFilter:void 0}},keyMap:{req:{groupIDList:"GroupIdList",groupCustomField:"AppDefinedData",memberCustomField:"AppMemberDefinedData",groupCustomFieldFilter:"AppDefinedDataFilter_Group",memberCustomFieldFilter:"AppDefinedDataFilter_GroupMember"},res:{GroupIdList:"groups",AppDefinedData:"groupCustomField",AppMemberDefinedData:"memberCustomField",AppDefinedDataFilter_Group:"groupCustomFieldFilter",AppDefinedDataFilter_GroupMember:"memberCustomFieldFilter",InfoSeq:"infoSequence",MemberList:"members",GroupInfo:"groups",ShutUpUntil:"muteUntil",ShutUpAllMember:"muteAllMembers"}}}),this._map.set(Fn.CREATE_GRP,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.CREATE_GRP)}),body:{type:void 0,name:void 0,groupID:void 0,ownerID:void 0,introduction:void 0,notification:void 0,maxMemberNum:void 0,joinOption:void 0,memberList:void 0,groupCustomField:void 0,memberCustomField:void 0,webPushFlag:1,avatar:"",isSupportTopic:void 0,inviteOption:void 0},keyMap:{req:{ownerID:"Owner_Account",userID:"Member_Account",avatar:"FaceUrl",maxMemberNum:"MaxMemberCount",joinOption:"ApplyJoinOption",groupCustomField:"AppDefinedData",memberCustomField:"AppMemberDefinedData",inviteOption:"InviteJoinOption"},res:{HugeGroupFlag:"avChatRoomFlag",OverJoinedGroupLimit_Account:"overLimitUserIDList"}}}),this._map.set(Fn.DISMISS_GRP,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.DISMISS_GRP)}),body:{groupID:void 0}}),this._map.set(Fn.UPDATE_GRP_PROFILE,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.UPDATE_GRP_PROFILE)}),body:{groupID:void 0,name:void 0,introduction:void 0,notification:void 0,avatar:void 0,joinOption:void 0,groupCustomField:void 0,muteAllMembers:void 0,inviteOption:void 0},keyMap:{req:{groupCustomField:"AppDefinedData",muteAllMembers:"ShutUpAllMember",joinOption:"ApplyJoinOption",avatar:"FaceUrl",inviteOption:"InviteJoinOption"},res:{AppDefinedData:"groupCustomField",ShutUpAllMember:"muteAllMembers"}}}),this._map.set(Fn.APPLY_JOIN_GRP,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.APPLY_JOIN_GRP)}),body:{groupID:void 0,applyMessage:void 0,userDefinedField:void 0,webPushFlag:1,historyMessageFlag:void 0},keyMap:{req:{applyMessage:"ApplyMsg",historyMessageFlag:"HugeGroupHistoryMsgFlag"},res:{HugeGroupFlag:"avChatRoomFlag",AVChatRoomKey:"avChatRoomKey",RspMsgList:"messageList",ToGroupId:"to"}}}),this._map.set(Fn.APPLY_JOIN_GRP_NOAUTH,(e.a2,e.tinyid,{head:t(t({},g(e,pa)),{},{servcmd:"".concat(G.NAME.BIG_GRP_NO_AUTH,".").concat(Fn.APPLY_JOIN_GRP)}),body:{groupID:void 0,applyMessage:void 0,userDefinedField:void 0,webPushFlag:1},keyMap:{req:{applyMessage:"ApplyMsg"},res:{HugeGroupFlag:"avChatRoomFlag"}}})),this._map.set(Fn.QUIT_GRP,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.QUIT_GRP)}),body:{groupID:void 0}}),this._map.set(Fn.SEARCH_GRP,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.SEARCH_GRP)}),body:{groupIDList:void 0,responseFilter:{groupBasePublicInfoFilter:["Type","Name","Introduction","Notification","FaceUrl","CreateTime","Owner_Account","LastInfoTime","LastMsgTime","NextMsgSeq","MemberNum","MaxMemberNum","ApplyJoinOption","InviteJoinOption"]}}}),this._map.set(Fn.CHANGE_GRP_OWNER,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.CHANGE_GRP_OWNER)}),body:{groupID:void 0,newOwnerID:void 0},keyMap:{req:{newOwnerID:"NewOwner_Account"}}}),this._map.set(Fn.HANDLE_GRP_APPLICATION,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.HANDLE_GRP_APPLICATION)}),body:{groupID:void 0,applicant:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,messageKey:void 0,userDefinedField:void 0},keyMap:{req:{applicant:"Applicant_Account",handleAction:"HandleMsg",handleMessage:"ApprovalMsg",messageKey:"MsgKey"}}}),this._map.set(Fn.HANDLE_INVITE_JOIN_GRP,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.HANDLE_INVITE_JOIN_GRP)}),body:{groupID:void 0,applicant:void 0,invitee:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,userDefinedField:void 0},keyMap:{req:{applicant:"Applicant_Account",invitee:"Invited_Account",handleAction:"HandleMsg",handleMessage:"ApprovalMsg"}}}),this._map.set(Fn.HANDLE_GRP_INVITATION,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.HANDLE_GRP_INVITATION)}),body:{groupID:void 0,inviter:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,messageKey:void 0,userDefinedField:void 0},keyMap:{req:{inviter:"Inviter_Account",handleAction:"HandleMsg",handleMessage:"ApprovalMsg",messageKey:"MsgKey"}}}),this._map.set(Fn.GET_GRP_PENDENCY,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.GET_GRP_PENDENCY)}),body:{startTime:void 0,limit:void 0,handleAccount:void 0},keyMap:{req:{handleAccount:"Handle_Account"},res:{To_Account:"userID",ApplyInviteMsg:"note"}}}),this._map.set(Fn.DEL_GRP_SYSTEM_NOTICE,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OPEN_IM,".").concat(Fn.DEL_GRP_SYSTEM_NOTICE)}),body:{messageListToDelete:void 0},keyMap:{req:{messageListToDelete:"DelMsgList",messageSeq:"MsgSeq",messageRandom:"MsgRandom"}}}),this._map.set(Fn.AV_POLLING,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.BIG_GRP_POLLING,".").concat(Fn.AV_POLLING)}),body:{USP:1,startSeq:1,startBroadcastSeq:void 0,holdTime:90,key:void 0,simplifiedMessage:void 0},keyMap:{req:{USP:"USP"},res:{ToGroupId:"groupID",RspBroadcastMsgList:"broadcastMessageList",IsSystemMsg:"isSystemMessage"}}}),this._map.set(Fn.AV_NOAUTH_POLLING,(e.a2,e.tinyid,{head:t(t({},g(e,ha)),{},{servcmd:"".concat(G.NAME.BIG_GRP_POLLING_NO_AUTH,".").concat(Fn.AV_POLLING)}),body:{USP:1,startSeq:1,holdTime:90,key:void 0,simplifiedMessage:void 0},keyMap:{req:{USP:"USP"},res:{ToGroupId:"groupID",RspBroadcastMsgList:"broadcastMessageList",IsSystemMsg:"isSystemMessage"}}})),this._map.set(Fn.GET_ONLINE_MBR_NUM,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.GET_ONLINE_MBR_NUM)}),body:{groupID:void 0},keyMap:{res:{OnlineMemberNum:"memberCount"}}}),this._map.set(Fn.SET_GRP_ATTR,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.SET_GRP_ATTR)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:["RaceConflict"]},keyMap:{req:{key:"key",value:"value"}}}),this._map.set(Fn.MODIFY_GRP_ATTR,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.MODIFY_GRP_ATTR)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:["RaceConflict"]},keyMap:{req:{key:"key",value:"value"}}}),this._map.set(Fn.DEL_GRP_ATTR,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.DEL_GRP_ATTR)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:["RaceConflict"]},keyMap:{req:{key:"key"}}}),this._map.set(Fn.CLEAR_GRP_ATTR,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.CLEAR_GRP_ATTR)}),body:{groupID:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:["RaceConflict"]}}),this._map.set(Fn.GET_GRP_ATTR,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP_ATTR,".").concat(Fn.GET_GRP_ATTR)}),body:{groupID:void 0,avChatRoomKey:void 0,groupType:1},keyMap:{req:{avChatRoomKey:"Key",groupType:"GroupType"}}}),this._map.set(Fn.GET_GRP_NOTIFY,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.GET_GRP_NOTIFY)}),body:{notifyReqList:[]},keyMap:{req:{notifyReqList:"NotifyReqList"},res:{NextMsgTime:"nextRevokedTime",NotifyMsgList:"notifyList",NotifyRspList:"notifyRspList"}}}),this._map.set(Fn.UPDATE_GRP_COUNTER,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.UPDATE_GRP_COUNTER)}),body:{groupID:void 0,counterList:void 0,avChatRoomKey:void 0,mode:void 0},keyMap:{req:{counterList:"GroupCounter"}}}),this._map.set(Fn.GET_GRP_COUNTER,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.GET_GRP_COUNTER)}),body:{groupID:void 0,keyList:[],avChatRoomKey:void 0},keyMap:{req:{keyList:"GroupCounterKeys"}}}),this._map.set(Fn.CREATE_TOPIC,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP_COMMUNITY,".").concat(Fn.CREATE_TOPIC)}),body:{groupID:void 0,topicName:void 0,avatar:void 0,customData:void 0,topicID:void 0,notification:void 0,introduction:void 0},keyMap:{req:{avatar:"FaceUrl"}}}),this._map.set(Fn.DEL_TOPIC,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP_COMMUNITY,".").concat(Fn.DEL_TOPIC)}),body:{groupID:void 0,topicIDList:void 0},keyMap:{req:{topicIDList:"TopicIdList"},res:{DestroyResultItem:"resultList"}}}),this._map.set(Fn.UPDATE_TOPIC_PROFILE,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP_COMMUNITY,".").concat(Fn.UPDATE_TOPIC_PROFILE)}),body:{groupID:void 0,topicID:void 0,avatar:void 0,customData:void 0,notification:void 0,introduction:void 0,muteAllMembers:void 0,topicName:void 0},keyMap:{req:{avatar:"FaceUrl",muteAllMembers:"ShutUpAllMember"}}}),this._map.set(Fn.GET_TOPIC_LIST,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP_COMMUNITY,".").concat(Fn.GET_TOPIC_LIST)}),body:{groupID:void 0,topicIDList:void 0,MemberInfoFilter:["NoUnreadSeqList"]},keyMap:{req:{topicIDList:"TopicIdList"},res:{TopicAndSelfInfo:"topicInfoList",TopicInfo:"topic",GroupID:"groupID",ShutUpTime:"muteTime",ShutUpAllFlag:"muteAllMembers",LastMsgTime:"lastMessageTime",MsgSeq:"readedSequence",LastMsgSeq:"sequence"}}}),this._map.set(Fn.GET_GRP_MBR_LIST,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.GET_GRP_MBR_LIST)}),body:{groupID:void 0,limit:0,offset:void 0,next:void 0,memberRoleFilter:void 0,memberInfoFilter:void 0,memberCustomFieldFilter:void 0},keyMap:{req:{memberCustomFieldFilter:"AppDefinedDataFilter_GroupMember"},res:{AppMemberDefinedData:"memberCustomField",AppDefinedDataFilter_GroupMember:"memberCustomFieldFilter",MemberList:"members",ShutUpUntil:"muteUntil"}}}),this._map.set(Fn.GET_AV_MBR_LIST,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP_AV,".").concat(Fn.GET_AV_MBR_LIST)}),body:{groupID:void 0,offset:void 0,filter:void 0},keyMap:{req:{offset:"Timestamp",filter:"Mark"},res:{NextTimestamp:"offset"}}}),this._map.set(Fn.GET_GRP_MBR_PROFILE,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.GET_GRP_MBR_PROFILE)}),body:{groupID:void 0,userIDList:void 0,memberInfoFilter:void 0,memberCustomFieldFilter:void 0},keyMap:{req:{userIDList:"Member_List_Account",memberCustomFieldFilter:"AppDefinedDataFilter_GroupMember"},res:{MemberList:"members",ShutUpUntil:"muteUntil",AppDefinedDataFilter_GroupMember:"memberCustomFieldFilter",AppMemberDefinedData:"memberCustomField"}}}),this._map.set(Fn.ADD_GRP_MBR,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.ADD_GRP_MBR)}),body:{groupID:void 0,silence:void 0,userIDList:void 0},keyMap:{req:{userID:"Member_Account",userIDList:"MemberList"},res:{MemberList:"members"}}}),this._map.set(Fn.DEL_GRP_MBR,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.DEL_GRP_MBR)}),body:{groupID:void 0,userIDList:void 0,reason:void 0},keyMap:{req:{userIDList:"MemberToDel_Account"}}}),this._map.set(Fn.BAN_AV_MBR,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.BAN_AV_MBR)}),body:{groupID:void 0,userIDList:void 0,duration:void 0,reason:""},keyMap:{req:{userIDList:"Members_Account",duration:"Duration",reason:"Description"}}}),this._map.set(Fn.MODIFY_GRP_MBR_INFO,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP,".").concat(Fn.MODIFY_GRP_MBR_INFO)}),body:{groupID:void 0,topicID:void 0,userID:void 0,messageRemindType:void 0,nameCard:void 0,role:void 0,memberCustomField:void 0,muteTime:void 0},keyMap:{req:{userID:"Member_Account",memberCustomField:"AppMemberDefinedData",muteTime:"ShutUpTime",messageRemindType:"MsgFlag"}}}),this._map.set(Fn.MARK_AV_MBR_INFO,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.GRP_AV,".").concat(Fn.MARK_AV_MBR_INFO)}),body:{groupID:void 0,operationType:1,memberList:[]},keyMap:{req:{operationType:"CommandType",memberList:"MemberList",markType:"Marks",userID:"Member_Account"},res:{CommandType:"operationType",Marks:"markType",Member_Account:"userID"}}}),this._map.set(Fn.SSO_STAT,{head:t(t({},o),{},{servcmd:"".concat(G.NAME.IM_OPEN_STAT,".").concat(Fn.SSO_STAT)}),body:{header:{},event:[],quality:[]},keyMap:{req:{SDKType:"sdk_type",SDKVersion:"sdk_version",deviceType:"device_type",platform:"platform",instanceID:"instance_id",traceID:"trace_id",SDKAppID:"sdk_app_id",userID:"user_id",tinyID:"tiny_id",extension:"extension",timestamp:"timestamp",networkType:"network_type",eventType:"event_type",code:"error_code",message:"error_message",moreMessage:"more_message",duplicate:"duplicate",costTime:"cost_time",level:"level",qualityType:"quality_type",reportIndex:"report_index",wholePeriod:"whole_period",totalCount:"total_count",rttCount:"success_count_business",successRateOfRequest:"percent_business",countLessThan1Second:"success_count_business",percentOfCountLessThan1Second:"percent_business",countLessThan3Second:"success_count_platform",percentOfCountLessThan3Second:"percent_platform",successCountOfBusiness:"success_count_business",successRateOfBusiness:"percent_business",successCountOfPlatform:"success_count_platform",successRateOfPlatform:"percent_platform",successCountOfMessageReceived:"success_count_business",successRateOfMessageReceived:"percent_business",avgRTT:"average_value",avgDelay:"average_value",avgValue:"average_value",uiPlatform:"ui_platform"}}}),this._map.set(Fn.PING,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.HEARTBEAT,".").concat(Fn.PING)}),body:{}}),this._map.set(Fn.MSG_PUSH,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.IM_OPEN_PUSH,".").concat(Fn.MSG_PUSH)}),body:{},keyMap:{res:{C2cMsgArray:"C2CMessageArray",GroupMsgArray:"groupMessageArray",GroupTips:"groupTips",C2cNotifyMsgArray:"C2CNotifyMessageArray",C2cMsgInfo:"C2CReadReceiptArray",ClientSeq:"clientSequence",MsgPriority:"priority",NoticeSeq:"noticeSequence",MsgContent:"content",MsgType:"type",MsgBody:"elements",ToGroupId:"to",Desc:"description",Ext:"extension",IsSyncMsg:"isSyncMessage",Flag:"needSync",NeedAck:"needAck",PendencyAdd_Account:"userID",ProfileImNick:"nick",PendencyType:"applicationType",C2CReadAllMsg:"readAllC2CMessage",IsNeedReadReceipt:"needReadReceipt",Status:"statusType",CurrFollowType:"followType",Follow_Account:"userID"}}}),this._map.set(Fn.MULTI_MSG_PUSH,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.IM_OPEN_PUSH,".").concat(Fn.MULTI_MSG_PUSH)}),body:{},keyMap:{res:{GroupMsgArray:"groupMessageArray",GroupTips:"groupTips",ClientSeq:"clientSequence",MsgPriority:"priority",NoticeSeq:"noticeSequence",MsgContent:"content",MsgType:"type",MsgBody:"elements",ToGroupId:"to",Desc:"description",Ext:"extension",IsSyncMsg:"isSyncMessage",Flag:"needSync",NeedAck:"needAck",PendencyType:"applicationType"}}}),this._map.set(Fn.MSG_PUSH_ACK,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OPEN_IM,".").concat(Fn.MSG_PUSH_ACK)}),body:{sessionData:void 0},keyMap:{req:{sessionData:"SessionData"}}}),this._map.set(Fn.STATUS_FORCE_OFFLINE,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.IM_OPEN_STATUS,".").concat(Fn.STATUS_FORCE_OFFLINE)}),body:{},keyMap:{res:{C2cNotifyMsgArray:"C2CNotifyMessageArray",NoticeSeq:"noticeSequence",KickoutMsgNotify:"kickoutMsgNotify",NewInstInfo:"newInstanceInfo"}}}),this._map.set(Fn.DOWNLOAD_MERGER_MSG,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.IM_LONG_MSG,".").concat(Fn.DOWNLOAD_MERGER_MSG)}),body:{downloadKey:""},keyMap:{res:{Data:"data",Desc:"description",Ext:"extension",Download_Flag:"downloadFlag",ThumbUUID:"thumbUUID",VideoUUID:"videoUUID"}}}),this._map.set(Fn.UPLOAD_MERGER_MSG,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.IM_LONG_MSG,".").concat(Fn.UPLOAD_MERGER_MSG)}),body:{messageList:[]},keyMap:{req:{fromAccount:"From_Account",toAccount:"To_Account",msgTimeStamp:"MsgTimeStamp",msgSeq:"MsgSeq",msgRandom:"MsgRandom",msgBody:"MsgBody",type:"MsgType",content:"MsgContent",data:"Data",description:"Desc",extension:"Ext",sizeType:"Type",uuid:"UUID",url:"",imageUrl:"URL",fileUrl:"Url",remoteAudioUrl:"Url",remoteVideoUrl:"VideoUrl",thumbUUID:"ThumbUUID",videoUUID:"VideoUUID",videoUrl:"",downloadFlag:"Download_Flag",from:"From_Account",time:"MsgTimeStamp",messageRandom:"MsgRandom",messageSequence:"MsgSeq",elements:"MsgBody",clientSequence:"ClientSeq",payload:"MsgContent",messageList:"MsgList",messageNumber:"MsgNum",abstractList:"AbstractList",messageBody:"MsgBody"}}}),this._map.set(Fn.FOLLOW,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.FOLLOW,".").concat(Fn.FOLLOW)}),body:{fromAccount:"",userIDList:[]},keyMap:{req:{userIDList:"FollowItem"},res:{ResultItem:"resultList",To_Account:"userID"}}}),this._map.set(Fn.UNFOLLOW,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.FOLLOW,".").concat(Fn.UNFOLLOW)}),body:{fromAccount:"",userIDList:[]},keyMap:{req:{userIDList:"To_Account"},res:{ResultItem:"resultList",To_Account:"userID"}}}),this._map.set(Fn.GET_FOLLOW_INFO,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.FOLLOW,".").concat(Fn.GET_FOLLOW_INFO)}),body:{fromAccount:"",userIDList:[]},keyMap:{req:{userIDList:"To_Account"},res:{FollowInfo:"followInfoList",To_Account:"userID",FollowerCount:"followersCount",FollowingCount:"followingCount",MutualFollowingCount:"mutualFollowersCount"}}}),this._map.set(Fn.GET_FOLLOW,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.FOLLOW,".").concat(Fn.GET_FOLLOW)}),body:{fromAccount:"",type:1,nextCursor:"",count:500},keyMap:{req:{type:"FollowType",nextCursor:"StartCursor",count:"WantNum"},res:{FollowItem:"resultList",To_Account:"userID",ProfileItem:"profileList"}}}),this._map.set(Fn.CHECK_FOLLOW_TYPE,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.FOLLOW,".").concat(Fn.CHECK_FOLLOW_TYPE)}),body:{fromAccount:"",userIDList:[]},keyMap:{req:{userIDList:"To_Account"},res:{ResultItem:"resultList",To_Account:"userID"}}}),this._map.set(Fn.SET_TOKEN,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.IM_OPEN_STATUS,".").concat(Fn.SET_TOKEN)}),body:{tokenID:"",pushMsg:0,sdkAppID:0,businessID:"",deviceBrand:"",deviceToken:"",isTpns:0,isWebUniapp:0,notificationStatus:0,deviceModel:"",systemVersion:"",pushVersion:""},keyMap:{req:{tokenID:"TokenID",pushMsg:"PushMsg",sdkAppID:"EnterVersion",businessID:"BusiID",deviceBrand:"InstType",deviceToken:"VarToken",isTpns:"IsTpns",notificationStatus:"NotificationStatus",deviceModel:"DeviceModel",systemVersion:"SystemVersion",pushVersion:"PushPluginVersion"}}}),this._map.set(Fn.STAT_FOREGROUND,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.IM_OPEN_STATUS,".").concat(Fn.STAT_FOREGROUND)}),body:{isWebUniapp:0}}),this._map.set(Fn.STAT_BACKGROUND,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.IM_OPEN_STATUS,".").concat(Fn.STAT_BACKGROUND)}),body:{C2CUnread:0,GroupUnread:0,isWebUniapp:0},keyMap:{req:{c2cUnreadCount:"C2cUnread",groupUnreadCount:"GrpUnread"}}}),this._map.set(Fn.PUSH_REPORT,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.OFFLINE_PUSH_REPORT,".").concat(Fn.PUSH_REPORT)}),body:{eventList:[]},keyMap:{req:{eventList:"UinappPushEvents",type:"EventType",time:"EventTime",pushId:"ClickExt"}}}),this._map.set(Fn.SET_ALL_RECEIVE_MSG_OPT,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.IM_MSG_LOGIC,".").concat(Fn.SET_ALL_RECEIVE_MSG_OPT)}),body:{startTime:0,endTime:0,isRepeated:0,messageRemindType:0},keyMap:{req:{messageRemindType:"Level"}}}),this._map.set(Fn.GET_ALL_RECEIVE_MSG_OPT,{head:t(t({},e),{},{servcmd:"".concat(G.NAME.IM_MSG_LOGIC,".").concat(Fn.GET_ALL_RECEIVE_MSG_OPT)}),body:{toAccount:void 0}})}},{key:"has",value:function(e){return this._map.has(e)}},{key:"get",value:function(e){return this._map.get(e)}},{key:"update",value:function(){this._fillMap()}},{key:"getKeyMap",value:function(e){return this.has(e)?this.get(e).keyMap||{}:(we.w("".concat(this._n,".getKeyMap unknown P:").concat(e)),{})}},{key:"getProtocolData",value:function(e){var t=e.P,n=e.data;e=this.get(t),t=null;if(n){var o,i=this._simpleDeepCopy(e),r=(i=this._updateService(n,i),i.body),a=Object.create(null);for(o in r)if(Object.prototype.hasOwnProperty.call(r,o)){if(a[o]=r[o],void 0===n[o])continue;a[o]=n[o]}i.body=a,t=this._getUplinkData(i)}else t=this._getUplinkData(e);return t}},{key:"_getUplinkData",value:function(e){e=this._dataCleaner(e);var t=Pt(e.head);t=function(e,t){var n=0;return function e(t,o){return 100<++n?(n--,t):Xe(t)?(i=t.map((function(t){return ze(t)?e(t,o):t})),n--,i):ze(t)?(r=t,a=function(e,t){if(!Ze(t))return!1;if(t!==Qr(t))for(var n=0;n<Kr.ignoreKeyWord.length&&!t.includes(Kr.ignoreKeyWord[n]);n++);var i;return dt(o[t])?"OPPOChannelID"===(i=t)?i:i[0].toUpperCase()+Qr(i).slice(1):o[t]},s=Object.create(null),Object.keys(r).forEach((function(e){var t=a(r[e],e);t&&(s[t]=r[e])})),i=Dt(i=s,(function(t,n){return Xe(t)||ze(t)?e(t,o):t})),n--,i):void 0;var i,r,a,s}(e,t)}(e.body,this._getReqKeyMap(t));return e.body=t,e}},{key:"_updateService",value:function(e,t){var n,o,i=Pt(t.head);return this._isFromGroupRequest(t)&&(n=e.type,o=e.groupID,e=void 0===(e=e.groupIDList)?[]:e,dt(o=void 0===o?void 0:o)&&(o=e[0]||""),bt({type:n,groupID:o})&&(t.head.servcmd="".concat(G.NAME.GRP_COMMUNITY,".").concat(i))),t}},{key:"_isFromGroupRequest",value:function(e){return e.head.servcmd.includes(G.NAME.GRP)||e.head.servcmd.includes(G.NAME.GRP_ATTR)}},{key:"_getReqKeyMap",value:function(e){return e=this.getKeyMap(e),t(t({},Kr.req),e.req)}},{key:"_dataCleaner",value:function(e){var t,o=Array.isArray(e)?[]:Object.create(null);for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&Ze(t)&&null!==e[t]&&void 0!==e[t]&&("object"!==n(e[t])?o[t]=e[t]:o[t]=this._dataCleaner.bind(this)(e[t]));return o}},{key:"_simpleDeepCopy",value:function(e){for(var t,n=Object.keys(e),o={},i=0,r=n.length;i<r;i++)t=n[i],Xe(e[t])?o[t]=Array.from(e[t]):ze(e[t])?o[t]=this._simpleDeepCopy(e[t]):o[t]=e[t];return o}}]),Ta),_a=[Fn.MSG_PUSH_ACK],va=(c(ba,[{key:"_onC2CMsgArray",value:function(e){var t=this._sessionM.get(6);e.dataList.forEach((function(e){var t;1===e.isSyncMessage&&(t=e.from,e.from=e.to,e.to=t)})),1===e.needSync&&this._sessionM.get(19).syncOnNeed(),t.onNewMessage({dataList:e.dataList,isInstantMessage:!0})}},{key:"_onC2CMsgModified",value:function(e){this._sessionM.get(6).onMsgModified(e)}},{key:"_onGroupMsgArray",value:function(e){var t=this._sessionM.get(7);t&&t.onNewMessage({event:e.event,dataList:e.dataList,isInstantMessage:!0})}},{key:"_onGroupMsgModified",value:function(e){var t=this._sessionM.get(7);t&&t.onMsgModified(e)}},{key:"_onGroupTips",value:function(e){var t=this._sessionM.get(7);if(t){var n=e.event,o=e.dataList,i=e.isInstantMessage,r=void 0===i||i,a=e.isSyncingEnded;switch(n){case 4:case 6:t.onNewGroupTips({event:n,dataList:o});break;case 5:for(var s=0;s<o.length;s++)if(Xe(o[s].elements.revokedInfos))t.onMsgRevoked({dataList:o});else if(Xe(o[s].elements.groupMessageReadNotice))t.onMsgReadNotice({dataList:o});else{if(!Xe(o[s].elements.readReceiptList)){t.onNewGroupSystemNotice({dataList:o,isInstantMessage:r,isSyncingEnded:a});break}t.onReadReceiptList({dataList:o})}break;case 12:this._sessionM.get(11).onNewGroupAtTips({dataList:o});break;default:we.l("".concat(this._n,"._onGroupTips unknown event:").concat(n," dataList:"),o)}}}},{key:"_onC2CNotifyMsgArray",value:function(e){var t,n=this,o=e.dataList;Xe(o)&&(t=this._sessionM.get(6),o.forEach((function(e){var i,r;$e(e)&&(e.hasOwnProperty("kickoutMsgNotify")?(i=(r=e.kickoutMsgNotify).kickType,r=void 0===(r=r.newInstanceInfo)?{}:r,1===i?n._sessionM.onMultipleAccountKickedOut(r):2===i?n._sessionM.onMultipleDeviceKickedOut(r):3===i&&n._sessionM.onRestApiKickedOut(r)):e.hasOwnProperty("c2cMessageRevokedNotify")?t&&t.onMsgRevoked({dataList:o}):e.hasOwnProperty("c2cMessageReadReceipt")?t&&t.onMsgReadReceipt({dataList:o}):e.hasOwnProperty("c2cMessageReadNotice")?t&&t.onMsgReadNotice({dataList:o}):e.hasOwnProperty("muteNotificationsSync")&&n._sessionM.get(11).onC2CMsgRemindTypeSynced({dataList:o}))})))}},{key:"_onC2CReadReceiptArray",value:function(e){this._sessionM.get(6).onReadReceiptList(e)}},{key:"_onProfileModified",value:function(e){this._sessionM.get(4).onProfileModified({dataList:e.dataList});var t=this._sessionM.get(8);t&&t.onFriendProfileModified({dataList:e.dataList})}},{key:"_onRelationChainModified",value:function(e){this._sessionM.get(4).onRelationChainModified({dataList:e.dataList});var t=this._sessionM.get(8);t&&t.onRelationChainModified({dataList:e.dataList})}},{key:"_onRecentContact",value:function(e){var t;e=e.dataList;!Xe(e)||(t=this._sessionM.get(11))&&e.forEach((function(e){var n,o,i=e.pushType;1===i?(n=e.recentContactDeleteItem,t.onConvDeleted(n.recentContactList)):2===i?(n=e.recentContactTopItem,t.onConvPinnedStatus(n.recentContactList,!0)):3===i?(n=e.recentContactTopItem,t.onConvPinnedStatus(n.recentContactList,!1)):4===i?(n=e.recentContactMarkContact,t.onConvMarkUpdated(n.recentContactMarkContactItem)):5===i?(n=e.recentContactCreateContactGroup,t.onConvGroupCreated(n.msgContactGroupContactItem)):6===i?(n=e.recentContactDelContactGroup,t.onConvGroupDeleted(n.msgGroupItem)):7===i&&(i=(n=e.recentContactUpdateContactGroup).updateType,e=n.msgUpdateGroup,n=n.msgUpdateContact,1===i?1===(o=e.updateGroupType)?t.onConvGroupNameUpdated(e):2===o&&t.onConvInGroupUpdated(e):2===i&&t.onConvAddedToOrDeletedFromGroup(n))}))}},{key:"_onAllMsgRead",value:function(e){e=e.dataList;var t=this._sessionM.get(11);t&&t.onPushedAllMessageRead(e)}},{key:"_onUserStatusList",value:function(e){this._sessionM.get(4).onUserStatusUpdated(e)}},{key:"_onMsgExtNotify",value:function(e){this._sessionM.get(3).onMsgExtNotify(e)}},{key:"_onMsgReactionNotifyList",value:function(e){this._sessionM.get(34).onReactionNotifyList(e)}},{key:"_onMsgReactionNotify",value:function(e){this._sessionM.get(34).onReactionNotify(e)}},{key:"_onFollowInfo",value:function(e){this._sessionM.get(35).onFollowInfoNotify(e)}},{key:"_onTopicLatestMsg",value:function(e){this._sessionM.get(10).onTopicLatestMsg(e)}},{key:"onMessage",value:function(e){var t=this,n=e.body;if(this._filterMsgFromIMOpenPush(e)){var o,i=n.eventArray,r=n.isInstantMessage,a=n.isSyncingEnded,s=n.needSync;if(Xe(i))for(var c,u,l,d=0,f=i.length;d<f;d++)100!==(l=(c=i[d]).event)?24!==l?26!==l?(o=Object.keys(c).find((function(e){return-1!==t._keys.indexOf(e)})))?(u=14===l?{readAllC2CMessage:c[o],groupMessageReadInfoList:c.groupMessageReadNotice||[]}:16===l?{userID:c.userID,timestamp:c.timestamp,readReceiptList:c[o]}:c[o],this._eventHandlerMap.get(o)({event:l,dataList:u,isInstantMessage:r,isSyncingEnded:a,needSync:s})):we.l("".concat(this._n,".onMessage unknown eventItem:").concat(c)):this._onTopicLatestMsg(c):this._onAllRcvMsgOptNotify(c):this._onRoomCustomData(c.content)}}},{key:"_onRoomCustomData",value:function(e){this._sessionM.get(30).onRoomCustomDataReceived(e),we.l("".concat(this._n,"._onRoomCustomData data:").concat(e))}},{key:"_onAllRcvMsgOptNotify",value:function(e){this._sessionM.get(11).onAllRcvMsgOptNotify(e)}},{key:"_filterMsgFromIMOpenPush",value:function(e){var t=e.head,n=(e=e.body,t=t.servcmd,!1);return!(n=dt(t)?n:t.includes(G.NAME.IM_CONFIG_MANAGER)||t.includes(G.NAME.OVERLOAD_PUSH)||t.includes(G.NAME.STAT_SERVICE))||(t.includes(Fn.PUSHED_CLOUD_CTRL_CONFIG)?this._sessionM.get(23).onPushedConfig(e):t.includes(Fn.PUSHED_COMMERCIAL_CONFIG)?this._sessionM.get(27).onPushedConfig(e):t.includes(Fn.OVERLOAD_NOTIFY)?this._sessionM.onPushedServerOverload(e):t.includes(Fn.KICK_OTHER)&&(n=Date.now(),this._sessionM.reLoginOnKickOther(),e=new eo("kickOther"),n-=t=this._sessionM.get(1).getLastWsHelloTs(),e.setMessage("last wshello time:".concat(t," diff:").concat(n,"ms")).end()),!1)}}]),ba),ma=[{cmd:Fn.GET_GRP_PROFILE,interval:1,count:8},{cmd:Fn.UPDATE_GRP_PROFILE,interval:1,count:8},{cmd:Fn.GET_AV_MBR_LIST,interval:3,count:1},{cmd:Fn.GET_GRP_PENDENCY,interval:1,count:15},{cmd:Fn.GET_TOPIC_LIST,interval:1,count:10},{cmd:Fn.SET_GRP_ATTR,interval:5,count:10},{cmd:Fn.MODIFY_GRP_ATTR,interval:5,count:10},{cmd:Fn.DEL_GRP_ATTR,interval:5,count:10},{cmd:Fn.CLEAR_GRP_ATTR,interval:5,count:10},{cmd:Fn.GET_GRP_ATTR,interval:5,count:20},{cmd:Fn.UPDATE_GRP_COUNTER,interval:5,count:20},{cmd:Fn.GET_GRP_COUNTER,interval:5,count:20},{cmd:Fn.SET_ALL_MSG_READ,interval:1,count:1},{cmd:Fn.GET_USER_STATUS,interval:5,count:20},{cmd:Fn.SUB_USER_STATUS,interval:5,count:20},{cmd:Fn.UNSUB_USER_STATUS,interval:5,count:20},{cmd:Fn.MSG_CLOUD_SEARCH,interval:1,count:2},{cmd:Fn.CHECK_FOLLOW_TYPE,interval:5,count:20},{cmd:Fn.GET_GRP_ROAMING_MSG,interval:1,count:20},{cmd:Fn.GET_C2C_ROAMING_MSG,interval:1,count:20}],ya=new Map,Ma=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],Ia=0,Ca=Ma.length;Ia<Ca;Ia++)ya.set(Ia,Ma[Ia]);function ba(e){r(this,ba),this._sessionM=e,this._n="MsgDispatcher",this._eventHandlerMap=new Map,this._eventHandlerMap.set("C2CMessageArray",this._onC2CMsgArray.bind(this)),this._eventHandlerMap.set("groupMessageArray",this._onGroupMsgArray.bind(this)),this._eventHandlerMap.set("groupTips",this._onGroupTips.bind(this)),this._eventHandlerMap.set("C2CNotifyMessageArray",this._onC2CNotifyMsgArray.bind(this)),this._eventHandlerMap.set("C2CReadReceiptArray",this._onC2CReadReceiptArray.bind(this)),this._eventHandlerMap.set("profileModify",this._onProfileModified.bind(this)),this._eventHandlerMap.set("friendListMod",this._onRelationChainModified.bind(this)),this._eventHandlerMap.set("recentContactMod",this._onRecentContact.bind(this)),this._eventHandlerMap.set("readAllC2CMessage",this._onAllMsgRead.bind(this)),this._eventHandlerMap.set("c2cMessageModified",this._onC2CMsgModified.bind(this)),this._eventHandlerMap.set("groupMessageModified",this._onGroupMsgModified.bind(this)),this._eventHandlerMap.set("userStatusList",this._onUserStatusList.bind(this)),this._eventHandlerMap.set("messageExtensionNotify",this._onMsgExtNotify.bind(this)),this._eventHandlerMap.set("messageReactionNotifyList",this._onMsgReactionNotifyList.bind(this)),this._eventHandlerMap.set("messageReactionNotify",this._onMsgReactionNotify.bind(this)),this._eventHandlerMap.set("follow",this._onFollowInfo.bind(this)),this._keys=y(this._eventHandlerMap.keys())}function Ta(e){r(this,Ta),this._n="PHandler",this._sessionM=e,this._map=new Map,this._fillMap()}function Sa(e){return r(this,Sa),(e=ea.call(this,e))._n="ChannelModule",e._socketHandler=new la(_(e)),e._probing=!1,e._isAppShowing=!0,e._previousState=k.NET_STATE_CONNECTED,e._timerForNotLoggedIn=-1,e._timerForNotLoggedIn=setInterval(e.onCheckTimer.bind(_(e)),1e3),e._fatalErrorFlag=!1,e._disconnectedTS=0,e._lastDiagnoseTS=0,e}function Ea(e){r(this,Ea),this._chM=e,this._n="SocketHandler",this._promiseMap=new Map,this._readyState=ua,this._simpleRequestMap=new Map,this.MAX_SIZE=100,this._startSequence=it(),this._startTs=0,this._reConnectFlag=!1,this._nextPingTs=0,this._reConnectCount=0,this.MAX_RECONNECT_COUNT=3,this._socketID=-1,this._random=0,this._socket=null,this._url="",this._onOpenTs=0,this._canIUseBinaryFrame=!0,this._isWorkerEnabled=!0,this._currentSite=P,this._setWebsocketHost(),this._initConnection()}function ka(e){r(this,ka);var t,n,o=(this._handler=e).getURL();this._socket=null,this._workerSocket=null,this._id=it(),this._handler.getIsWorkerEnabled()?(t=URL.createObjectURL(new Blob([';let _socket = null;onmessage = function(event) {  if (event.data.cmd === "start") {    const url = event.data.url;    _socket = new WebSocket(url);    _socket.binaryType = "arraybuffer";    _socket.onopen = function() {      postMessage({ callback: "onOpen", extensions: _socket.extensions });    };    _socket.onclose = function(e) {      postMessage({ callback: "onOpen", e: { code: e.code, reason: e.reason } });    };    _socket.onmessage = function(e) {      postMessage({ callback: "onMessage", data: e.data });    };    _socket.onerror = function(e) {      postMessage({ callback: "onError", e: { isTrusted: "true" } });    };  } else if (event.data.cmd === "sendMessage") {    if (_socket !== null) {      _socket.send(event.data.data);    }  } else if (event.data.cmd === "stop") {    if (_socket !== null) {      _socket.close(event.data.code);      _socket = null;    }  }};'],{type:"application/javascript; charset=utf-8"})),this._workerSocket=new Worker(t),(n=this)._workerSocket.onmessage=function(e){var t=e.data,o=t.callback,i=t.e;t=t.extensions;"onOpen"===o?n._onOpen(t):"onClose"===o?n._onClose(i):"onError"===o?n._onError(i):"onMessage"===o&&n._onMessage(e.data)},this._workerSocket.postMessage({cmd:"start",id:this._id,url:o})):ee?$?(ie.connectSocket({url:o,header:{"content-type":"application/json"}}),ie.onSocketClose(this._onClose.bind(this)),ie.onSocketOpen(this._onOpen.bind(this)),ie.onSocketMessage(this._onMessage.bind(this)),ie.onSocketError(this._onError.bind(this))):(this._socket=ie.connectSocket({url:o,header:{"content-type":"application/json"},complete:function(){}}),this._socket.onClose(this._onClose.bind(this)),this._socket.onOpen(this._onOpen.bind(this)),this._socket.onMessage(this._onMessage.bind(this)),this._socket.onError(this._onError.bind(this))):(this._socket=new WebSocket(o),this._socket.binaryType="arraybuffer",this._socket.onopen=this._onOpen.bind(this,this._socket.extensions),this._socket.onmessage=this._onMessage.bind(this),this._socket.onclose=this._onClose.bind(this),this._socket.onerror=this._onError.bind(this)),this._canIUseBinaryFrame=e.canIUseBinaryFrame()}function Da(e){for(var t,n,o=e,i="",r=0,a=(o=e.length%8!=0?"0".repeat(8-e.length%8)+e:o).length;r<a;r+=8)t=parseInt(o.slice(r,r+4),2),n=parseInt(o.slice(r+4,r+8),2),i+=ya.get(t)+ya.get(n);return i}function Aa(e){if(e<0||53<e)return NaN;var t=0|1073741824*Math.random();return 30<e?t+1073741824*(0|Math.random()*(1<<e-30)):t>>>30-e}function La(e,t){for(var n=e.toString(16),o=t-n.length,i="0";0<o;o>>>=1,i+=i)1&o&&(n=i+n);return n}l(zs,Rn),Ba=v(zs),c(zs,[{key:"_init",value:function(){this._updateCmdFreqLimitMap(ma)}},{key:"_onCloudConfig",value:function(){var e=this.getCloudConfig("cmd_frequency_limit");dt(e)||(e=JSON.parse(e),this._updateCmdFreqLimitMap(e))}},{key:"_updateCmdFreqLimitMap",value:function(e){var t=this;e.forEach((function(e){t._cmdFreqLimitMap.set(e.cmd,{interval:e.interval,count:e.count})}))}},{key:"updateProtocolConfig",value:function(){this._pHandler.update()}},{key:"req",value:function(e){we.d("".concat(this._n,".req options:"),e);var t=e.P,n=e.tjgID;if(!this._pHandler.has(t))return we.w("".concat(this._n,".req unknown P:").concat(t)),Cn({code:Un.NO_PROTOCOL});e=this.getProtocolData(e);var o=e.head.servcmd;if(this._isFreqOverLimit(o))return Cn({code:i=Un.OVER_FREQUENCY_LIMIT,message:this.getErrMsg(i,this._getCmd(o))});if(this._isServerOverload(o))return Cn({code:i=Un.OPEN_SERVICE_OVERLOAD_ERROR,message:this.getErrMsg(i,this._getCmd(o))});je(n)||(e.head.tjgID=n);var i=this.get(21);return _a.includes(t)?i.simplySend(e):i.send(e)}},{key:"getKeyMap",value:function(e){return this._pHandler.getKeyMap(e)}},{key:"genCommonHead",value:function(){var e=this.get(12);return{ver:"v4",platform:this._platform,websdkappid:N,websdkversion:w,a2:e.getA2Key()||void 0,tinyid:e.getTinyID()||void 0,status_instid:e.getStatusInstanceID(),sdkappid:e.getSDKAppID(),contenttype:e.getContentType(),reqtime:0,identifier:e.getA2Key()?void 0:e.getUserID(),usersig:e.getA2Key()?void 0:e.getUserSig(),sdkability:4386675,sdkability_ext:Da(""),cappid:e.getApplicationID(),tjgID:""}}},{key:"genCosSpecifiedHead",value:function(){var e=this.get(12);return{ver:"v4",platform:this._platform,websdkappid:N,websdkversion:w,sdkappid:e.getSDKAppID(),contenttype:e.getContentType(),reqtime:0,identifier:e.getUserID(),usersig:e.getUserSig(),status_instid:e.getStatusInstanceID(),sdkability:4386675,sdkability_ext:Da(""),cappid:e.getApplicationID()}}},{key:"genSSOReportHead",value:function(){var e=this.get(12);return{ver:"v4",platform:this._platform,websdkappid:N,websdkversion:w,sdkappid:e.getSDKAppID(),contenttype:"",reqtime:0,identifier:"",usersig:"",status_instid:e.getStatusInstanceID(),sdkability:4386675,sdkability_ext:Da(""),cappid:e.getApplicationID()}}},{key:"getProtocolData",value:function(e){return this._pHandler.getProtocolData(e)}},{key:"trans",value:function(e){var n=e.servcmd;e=e.data,n={head:t(t({},this.genCommonHead()),{},{servcmd:n}),body:e};return this.get(21).send(n)}},{key:"sendComboMessage",value:function(e){var n=e.servcmd;e=e.data,n={head:t(t({},this.genCommonHead()),{},{servcmd:n}),body:e};return this.get(21).send(n)}},{key:"onErrorCodeNotZero",value:function(e){var t,n=e.errorCode;n===Un.HELLO_ANSWER_KICKED_OUT&&(t=e.kickType,e=void 0===(e=e.newInstanceInfo)?{}:e,1===t?this.onMultipleAccountKickedOut(e):2===t?this.onMultipleDeviceKickedOut(e):3===t&&this.onRestApiKickedOut(e)),n!==Un.MSG_A2KEY_EXPIRED&&n!==Un.ACCOUNT_A2KEY_EXPIRED||(this._onUserSigExpired(),this.get(21).reConnect())}},{key:"onMessage",value:function(e){var t=e.body,n=t.needAck;t=t.sessionData;1===(void 0===n?0:n)&&this._sendACK(t),this._msgDispatcher.onMessage(e)}},{key:"onReconnected",value:function(e){this._incrementalPullContactFlag=e<=300,this._reLoginOnReconnected()}},{key:"reLoginOnKickOther",value:function(){we.l("".concat(this._n,".reLoginOnKickOther")),this._reLogin()}},{key:"_reLoginOnReconnected",value:function(){we.l("".concat(this._n,"._reLoginOnReconnected")),this._reLogin()}},{key:"_reLogin",value:function(){var e,t,n,o=this,i="".concat(this._n,"._reLogin");this.isLoggedIn()&&(e=0,(t=this.get(1).getPushModule())&&(e=t.getUniAppPlatform()),n=new eo("reLogin"),this.req({P:Fn.LOGIN,data:{isWebUniapp:e}}).then((function(e){e=e.data;var t=e.instanceID,r=(e=e.customStatus,o.get(12)),a=zo(e),s=(r.setStatusInstanceID(t),o.get(21)),c=s.getSocketID();c="socketID:".concat(c," instanceID:").concat(t," customStatus:").concat(a),n.setMessage(c).end(!0),we.l("".concat(i," ok. ").concat(c)),r.getCustomStatus()!==a&&o.get(4).onUserStatusUpdated({dataList:[{to:o.getMyUserID(),statusType:k.USER_STATUS_ONLINE,customStatus:e}]}),s.diagnose(),o.get(11).syncConvList(o._incrementalPullContactFlag).then((function(){we.l("".concat(i,", sync conv list ok.")),o.get(25).start()})),t=o.get(7),t&&t.updateLocalMainSequenceOnReconnected(),c=o.get(10),c.resetGetTopicTime(),c.getTopicListOnReconnected(),r=o.get(35);r&&r.clearCacheOnReconnected()})))}},{key:"onMultipleAccountKickedOut",value:function(e){this.get(1).onMultipleAccountKickedOut(e)}},{key:"onMultipleDeviceKickedOut",value:function(e){this.get(1).onMultipleDeviceKickedOut(e)}},{key:"_onUserSigExpired",value:function(){this.get(1).onUserSigExpired()}},{key:"onRestApiKickedOut",value:function(e){this.get(1).onRestApiKickedOut(e)}},{key:"_sendACK",value:function(e){this.req({P:Fn.MSG_PUSH_ACK,data:{sessionData:e}})}},{key:"_isFreqOverLimit",value:function(e){if(e=e.split(".")[1],!this._cmdFreqLimitMap.has(e))return!1;if(!this._cmdReqInfoMap.has(e))return this._cmdReqInfoMap.set(e,{startTime:Date.now(),requestCount:1}),!1;var t=this._cmdFreqLimitMap.get(e),n=t.count,o=(t=t.interval,this._cmdReqInfoMap.get(e)),i=o.startTime;o=o.requestCount;return Date.now()-i>1e3*t?(this._cmdReqInfoMap.set(e,{startTime:Date.now(),requestCount:1}),!1):(this._cmdReqInfoMap.set(e,{startTime:i,requestCount:o+=1}),n<o)}},{key:"_isServerOverload",value:function(e){if(!this._serverOverloadInfoMap.has(e))return!1;var t=this._serverOverloadInfoMap.get(e),n=t.overloadTime;t=t.waitingTime;return Date.now()-n<=1e3*t||(this._serverOverloadInfoMap.delete(e),!1)}},{key:"_getCmd",value:function(e){var t="";if(!e.includes("."))return t;var n,o=e.split(".")[1];for(n in Fn)if(Fn[n]===o){t=n;break}return t}},{key:"onPushedServerOverload",value:function(e){var t=e.overloadCommand;e=e.waitingTime;this._serverOverloadInfoMap.set(t,{overloadTime:Date.now(),waitingTime:e}),we.w("".concat(this._n,".onPushedServerOverload waitingTime:").concat(e,"s cmd:").concat(this._getCmd(t)))}},{key:"reset",value:function(){we.l("".concat(this._n,".reset")),this._updateCmdFreqLimitMap(ma),this._cmdReqInfoMap.clear(),this._serverOverloadInfoMap.clear(),this._incrementalPullContactFlag=!0}}]);var Oa,Ra,wa,Na,Pa,Ga,Ua,xa,Fa,qa,Ba,Va=zs,Ha=(l(Ys,Rn),qa=v(Ys),c(Ys,[{key:"getCloudConfig",value:function(e){return dt(e)?this._cloudConfig:this._cloudConfig.has(e)?this._cloudConfig.get(e):void 0}},{key:"getServerConfig",value:function(e){var t={code:0,data:""};return!dt(e)&&this._cloudConfig.has(e)&&(t.data=this._cloudConfig.get(e)),Promise.resolve(t)}},{key:"_canFetch",value:function(){return this.isLoggedIn()&&!this._isFetching&&Date.now()>=this._expiredTime}},{key:"fetchConfig",value:function(){var e,t=this,n="".concat(this._n,".fetchConfig"),o=this._canFetch();we.l("".concat(n," canFetch:").concat(o)),o&&(e=new eo("fetchCloudCtrlConfig"),o=this.get(12).getSDKAppID(),this._isFetching=!0,this.req({P:Fn.FETCH_CLOUD_CTRL_CONFIG,data:{SDKAppID:o,version:this._version}}).then((function(o){t._isFetching=!1;var i=o.data,r=i.version;i=i.cloudControlConfig;e.setMessage("version:".concat(t._version," newVersion:").concat(r," config:").concat(i)).end(),we.l("".concat(n," ok")),t._parse(o.data)})).catch((function(o){t._isFetching=!1,e.setError(o).end(),we.l("".concat(n," failed. error:"),o),t._setExpiredTime(12e4)})))}},{key:"onPushedConfig",value:function(e){we.l("".concat(this._n,".onPushedConfig config:"),e),new eo("pushedCloudCtrlConfig").setMessage("newVersion:".concat(e.version," config:").concat(e.cloudControlConfig)).end(),this._parse(e)}},{key:"onCheckTimer",value:function(e){this._canFetch()&&this.fetchConfig()}},{key:"_parse",value:function(e){var t=this,n="".concat(this._n,"._parse"),o=e.errorCode,i=e.errorMessage,r=e.cloudControlConfig,a=e.version,s=e.expiredTime;if(0===o){if(this._version!==a){var c=null;try{c=JSON.parse(r)}catch(e){this.isPrivateNetWork()||we.e("".concat(n," failed. config:"),r)}c&&(this._cloudConfig.clear(),Object.keys(c).forEach((function(e){t._cloudConfig.set(e,c[e])})),this._version=a,this.emitIEvt(Bo.CLOUD_CONFIG))}this._setExpiredTime(1e3*s)}else dt(o)?(we.l("".concat(n," failed. Invalid message format:"),e),this._setExpiredTime(36e5)):(we.e("".concat(n," errorCode:").concat(o," errorMessage:").concat(i)),this._setExpiredTime(12e4))}},{key:"_setExpiredTime",value:function(e){this._expiredTime=Date.now()+e}},{key:"reset",value:function(){we.l("".concat(this._n,".reset")),this._cloudConfig.clear(),this._expiredTime=0,this._version=0,this._isFetching=!1}}]),Ys),ja=(l(Ws,Rn),Fa=v(Ws),c(Ws,[{key:"start",value:function(){this._recoverGroupChat(),this._recoverC2CChat()}},{key:"_recoverGroupChat",value:function(){var e,t,n,o,i=this,r=this._getLocalConvList().filter((function(e){return e.type===k.CONV_GROUP&&e.groupProfile.type!==k.GRP_AVCHATROOM})),a=this.get(11),s=[];r.forEach((function(r){var c=r.conversationID;r=r.lastMessage;e=c.replace(k.CONV_GROUP,""),t=a.getLocalLastMessage(c),r&&0!==r.lastSequence&&t?(n=r.lastSequence,t=t.sequence,o=n-t,0<t&&1<=o&&o<300?i._recoverGroupMsg({groupID:e,localLastMessageSequence:t,remoteLastMessageSequence:n}):s.push(e)):s.push(e)})),this._getGroupNotice(s)}},{key:"_recoverC2CChat",value:function(){var e,t,n,o=this,i=this._getLocalConvList().filter((function(e){return e.type===k.CONV_C2C})),r=this.get(11),a=[Promise.resolve()];i.forEach((function(i){var s=i.conversationID;i=i.lastMessage;e=r.getLocalLastMessage(s),i&&0!==i.lastTime&&e&&(t=i.lastTime,e=e.time,n=t-e,0<e&&1<=n&&n<=600&&a.push(o._recoverC2CMsg({conversationID:s,localLastMessageTime:e,remoteLastMessageTime:t})))})),Promise.all(a).then((function(){we.l("".concat(o._n,"._recoverC2CChat all done")),o.get(19).syncOnReconnected()}))}},{key:"_getLocalConvList",value:function(){return this.get(11).getLocalConvList()}},{key:"_recoverGroupMsg",value:function(e){var t=this,n="".concat(this._n,".").concat("_recoverGroupMsg"),o=(we.l("".concat(n," options:"),e),e.groupID),i=e.localLastMessageSequence,r=e.remoteLastMessageSequence,a=JSON.stringify(e),s=new eo("_recoverGroupMsg");s.setMessage(a),this._getGroupRoamingMsg({groupID:o,sequence:i}).then((function(e){e=e.data;var c=e.complete,u=e.messageList;if(!dt(u)){e=u[0].sequence;var l=u.map((function(e){return e.sequence})),d=(l="".concat(a," complete:").concat(c," sequenceList:").concat(l),we.l("".concat(n," ").concat(l)),e!==i&&e<r&&2!==c&&t._recoverGroupMsg({groupID:o,localLastMessageSequence:e,remoteLastMessageSequence:r}),s.setMessage(l).end(),t.get(7));1<u.length&&u.sort((function(e,t){return e.sequence-t.sequence}));for(var f=!1,p=0,h=u.length;p<h;p++)if(u[p].from===k.CONV_SYSTEM){f=!0;break}if(f)for(var g=0,_=u.length;g<_;g++){var v=u[g];v.from!==k.CONV_SYSTEM?d.onNewMessage({dataList:[v],isInstantMessage:!1,updateUnreadCount:!1}):d.onNewGroupTips({event:v.event,dataList:[v]})}else d.onNewMessage({dataList:u,isInstantMessage:!1,updateUnreadCount:!1})}})).catch((function(e){s.setError(e).end(),we.w("".concat(n," failed. error:"),e)}))}},{key:"_getGroupNotice",value:function(e){var t=e.length;if(we.l("".concat(this._n,"._getGroupNotice length:").concat(t)),0!==t){var n=this.get(7);if(t<=10)n.getNotice(e);else{var o=Math.floor(t/10);5<=o&&(o=5);for(var i=0;i<=o;i++)n.getNotice(e.slice(10*i,10*(i+1)))}}}},{key:"_getGroupRoamingMsg",value:function(e){var t=e.groupID;e=e.sequence;return this.req({P:Fn.GET_GRP_ROAMING_MSG,data:{groupID:t,count:this.PULL_LIMIT_COUNT,sequence:e+this.PULL_LIMIT_COUNT-1}})}},{key:"_recoverC2CMsg",value:function(e){var t=this,n="".concat(this._n,".").concat("_recoverC2CMsg"),o=(we.l("".concat(n," options:"),e),e.conversationID),i=e.localLastMessageTime,r=e.remoteLastMessageTime,a=JSON.stringify(e),s=new eo("_recoverC2CMsg");return s.setMessage(a),this._getC2CRoamingMsg({conversationID:o,time:i}).then((function(e){e=e.data;var i=e.complete;e=e.messageList;if(!dt(e)){var c=e.length;c=(t.get(6).onNewMessage({dataList:e,isInstantMessage:!0}),e[c-1].time),e=e.map((function(e){return e.random})),e="".concat(a," complete:").concat(i," randomList:").concat(e);if(we.l("".concat(n," ").concat(e)),s.setMessage(e).end(),c<r&&1!==i)return t._recoverC2CMsg({conversationID:o,localLastMessageTime:c,remoteLastMessageTime:r})}})).catch((function(e){s.setError(e).end(),we.w("".concat(n," failed. error:"),e)}))}},{key:"_getC2CRoamingMsg",value:function(e){var t=e.conversationID;e=e.time;return this.req({P:Fn.GET_C2C_ROAMING_MSG,data:{peerAccount:t.replace(k.CONV_C2C,""),count:this.PULL_LIMIT_COUNT+1,lastMessageTime:e,direction:1}})}},{key:"reset",value:function(){we.l("".concat(this._n,".reset"))}}]),Ws),Ka=(c(Ks,[{key:"addMessageDelay",value:function(e){e=Ee()-e,0<=e&&this._e2eDelayArray.push(e)}},{key:"_calcAvg",value:function(e,t){if(0===t)return 0;var n=0;return e.forEach((function(e){n+=e})),Gt(n/t,1)}},{key:"_calcCountWithLimit",value:function(e){var t=e.e2eDelayArray,n=e.min,o=e.max;return t.filter((function(e){return n<=e&&e<o})).length}},{key:"_calcPercent",value:function(e,t){return e=Gt(e/t*100,2),100<e?100:e}},{key:"_checkE2EDelayException",value:function(e,t){var n,o,i,r=e.filter((function(e){return t<e}));0<r.length&&(n=r.length,o=Math.min.apply(Math,y(r)),i=Math.max.apply(Math,y(r)),r=this._calcAvg(r,n),50<(e=Gt(n/e.length*100,2))&&new eo("messageE2EDelayException").setMessage("count:".concat(n," min:").concat(o," max:").concat(i," avg:").concat(r," percent:").concat(e)).setLevel("warning").end())}},{key:"getStatResult",value:function(){var e=this._e2eDelayArray.length;if(0===e)return null;var t=y(this._e2eDelayArray),n=this._calcCountWithLimit({e2eDelayArray:t,min:0,max:1}),o=this._calcCountWithLimit({e2eDelayArray:t,min:1,max:3}),i=this._calcPercent(n,e),r=this._calcPercent(o,e),a=this._calcAvg(t,e);return this._checkE2EDelayException(t,3),t.length=0,this.reset(),{totalCount:e,countLessThan1Second:n,percentOfCountLessThan1Second:i,countLessThan3Second:o,percentOfCountLessThan3Second:r,avgDelay:a}}},{key:"reset",value:function(){this._e2eDelayArray.length=0}}]),Ks),Wa=(c(js,[{key:"addRequestCount",value:function(){this._requestCount+=1}},{key:"addRTT",value:function(e){this._rttArray.push(e)}},{key:"_calcTotalCount",value:function(){return this._requestCount}},{key:"_calcRTTCount",value:function(e){return e.length}},{key:"_calcSuccessRateOfRequest",value:function(e,t){return 0===t?0:(e=Gt(e/t*100,2),100<e?100:e)}},{key:"_calcAvg",value:function(e,t){if(0===t)return 0;var n=0;return e.forEach((function(e){n+=e})),parseInt(n/t)}},{key:"_calcMax",value:function(){return Math.max.apply(Math,y(this._rttArray))}},{key:"_calcMin",value:function(){return Math.min.apply(Math,y(this._rttArray))}},{key:"getStatResult",value:function(){var e=this._calcTotalCount(),t=y(this._rttArray);if(0===e)return null;var n=this._calcRTTCount(t),o=this._calcSuccessRateOfRequest(n,e);t=this._calcAvg(t,n);return we.l("".concat(this._n,".getStatResult max:").concat(this._calcMax()," min:").concat(this._calcMin()," avg:").concat(t)),this.reset(),{totalCount:e,rttCount:n,successRateOfRequest:o,avgRTT:t}}},{key:"reset",value:function(){this._requestCount=0,this._rttArray.length=0}}]),js),Ya=(c(Hs,[{key:"initMap",value:function(e){var t=this;e.forEach((function(e){t._map.set(e,{totalCount:0,successCount:0,failedCountOfUserSide:0,costArray:[],fileSizeArray:[]})}))}},{key:"addTotalCount",value:function(e){return!(dt(e)||!this._map.has(e)||(this._map.get(e).totalCount+=1,0))}},{key:"addSuccessCount",value:function(e){return!(dt(e)||!this._map.has(e)||(this._map.get(e).successCount+=1,0))}},{key:"addFailedCountOfUserSide",value:function(e){return!(dt(e)||!this._map.has(e)||(this._map.get(e).failedCountOfUserSide+=1,0))}},{key:"addCost",value:function(e,t){return!(dt(e)||!this._map.has(e)||(this._map.get(e).costArray.push(t),0))}},{key:"addFileSize",value:function(e,t){return!(dt(e)||!this._map.has(e)||(this._map.get(e).fileSizeArray.push(t),0))}},{key:"_calcSuccessRateOfBusiness",value:function(e){return dt(e)||!this._map.has(e)?-1:(e=this._map.get(e),e=Gt(e.successCount/e.totalCount*100,2),100<e?100:e)}},{key:"_calcSuccessRateOfPlatform",value:function(e){if(dt(e)||!this._map.has(e))return-1;var t=this._map.get(e);e=this._calcSuccessCountOfPlatform(e)/t.totalCount*100;return 100<(e=Gt(e,2))?100:e}},{key:"_calcTotalCount",value:function(e){return dt(e)||!this._map.has(e)?-1:this._map.get(e).totalCount}},{key:"_calcSuccessCountOfBusiness",value:function(e){return dt(e)||!this._map.has(e)?-1:this._map.get(e).successCount}},{key:"_calcSuccessCountOfPlatform",value:function(e){return dt(e)||!this._map.has(e)?-1:(e=this._map.get(e),e.successCount+e.failedCountOfUserSide)}},{key:"_calcAvg",value:function(e){return dt(e)||!this._map.has(e)?-1:e===Wn?this._calcAvgSpeed(e):this._calcAvgCost(e)}},{key:"_calcAvgCost",value:function(e){var t=this._map.get(e).costArray.length;if(0===t)return 0;var n=0;return this._map.get(e).costArray.forEach((function(e){n+=e})),parseInt(n/t)}},{key:"_calcAvgSpeed",value:function(e){var t=0,n=0;return this._map.get(e).costArray.forEach((function(e){t+=e})),this._map.get(e).fileSizeArray.forEach((function(e){n+=e})),parseInt(1e3*n/t)}},{key:"getStatResult",value:function(e){var t=this._calcTotalCount(e);if(0===t)return null;var n=this._calcSuccessCountOfBusiness(e),o=this._calcSuccessRateOfBusiness(e),i=this._calcSuccessCountOfPlatform(e),r=this._calcSuccessRateOfPlatform(e),a=this._calcAvg(e);return this.reset(e),{totalCount:t,successCountOfBusiness:n,successRateOfBusiness:o,successCountOfPlatform:i,successRateOfPlatform:r,avgValue:a}}},{key:"reset",value:function(e){dt(e)?this._map.clear():this._map.set(e,{totalCount:0,successCount:0,failedCountOfUserSide:0,costArray:[],fileSizeArray:[]})}}]),Hs),za=(c(Vs,[{key:"initMap",value:function(e){var t=this;e.forEach((function(e){t._lastMap.set(e,new Map),t._currentMap.set(e,new Map)}))}},{key:"addMessageSequence",value:function(e){var t=e.key,n=e.message;if(dt(t)||!this._lastMap.has(t)||!this._currentMap.has(t))return!1;var o,i,r=n.conversationID;n=n.sequence,r=r.replace(k.CONV_GROUP,"");return 0!==this._lastMap.get(t).size&&this._lastMap.get(t).has(r)?(i=(o=this._lastMap.get(t).get(r)).length-1,n>o[0]&&n<o[i]?(o.push(n),o.sort(),this._lastMap.get(t).set(r,o)):this._addCurrentMap(e)):this._addCurrentMap(e),!0}},{key:"_addCurrentMap",value:function(e){var t=e.key,n=(e=e.message,e.conversationID);e=e.sequence,n=n.replace(k.CONV_GROUP,"");this._currentMap.get(t).has(n)||this._currentMap.get(t).set(n,[]),this._currentMap.get(t).get(n).push(e)}},{key:"_copyData",value:function(e){if(!dt(e)){this._lastMap.set(e,new Map);var t,n=this._lastMap.get(e),o=S(this._currentMap.get(e));try{for(o.s();!(t=o.n()).done;){var i=m(t.value,2),r=i[0],a=i[1];n.set(r,a)}}catch(e){o.e(e)}finally{o.f()}n=null,this._currentMap.set(e,new Map)}}},{key:"getStatResult",value:function(e){if(dt(this._currentMap.get(e))||dt(this._lastMap.get(e)))return null;if(0===this._lastMap.get(e).size)return this._copyData(e),null;var t=0,n=0;if(this._lastMap.get(e).forEach((function(e,o){e=y(e.values());var i=e.length;e=e[i-1]-e[0]+1;t+=e,n+=i})),0===t)return null;var o=Gt(n/t*100,2);return 100<o&&(o=100),this._copyData(e),{totalCount:t,successCountOfMessageReceived:n,successRateOfMessageReceived:o}}},{key:"reset",value:function(){this._currentMap.clear(),this._lastMap.clear()}}]),Vs),$a=(l(Bs,Rn),xa=v(Bs),c(Bs,[{key:"_onLoginSuccess",value:function(){var e=this,t=(this._rateMessageSent.initMap(this._messageSentItems),this._rateMessageReceived.initMap(this._messageReceivedItems),this.get(13)),n=t.getItem(this.TAG,!1);!je(n)&&Je(n.forEach)&&(we.l("".concat(this._n,"._onLoginSuccess. logs count:").concat(n.length)),n.forEach((function(t){e._statInfoArr.push(t)})),t.removeItem(this.TAG,!1))}},{key:"_onCloudConfig",value:function(){var e=this.getCloudConfig("q_rpt_interval"),t=this.getCloudConfig("q_rpt_sdkappid_bl"),n=this.getCloudConfig("q_rpt_tinyid_wl");dt(e)||(this.REPORT_INTERVAL=Number(e)),dt(t)||(this.REPORT_SDKAPPID_BLACKLIST=t.split(",").map((function(e){return Number(e)}))),dt(n)||(this.REPORT_TINYID_WHITELIST=n.split(","))}},{key:"onCheckTimer",value:function(e){this.isLoggedIn()&&e%this.REPORT_INTERVAL==0&&(this.wholePeriod=!0,this._report())}},{key:"addRequestCount",value:function(){this._avgRTT.addRequestCount()}},{key:"addRTT",value:function(e){this._avgRTT.addRTT(e)}},{key:"addMessageDelay",value:function(e){this._avgE2EDelay.addMessageDelay(e)}},{key:"addTotalCount",value:function(e){this._rateMessageSent.addTotalCount(e)||we.w("".concat(this._n,".addTotalCount invalid key:"),e)}},{key:"addSuccessCount",value:function(e){this._rateMessageSent.addSuccessCount(e)||we.w("".concat(this._n,".addSuccessCount invalid key:"),e)}},{key:"addFailedCountOfUserSide",value:function(e){this._rateMessageSent.addFailedCountOfUserSide(e)||we.w("".concat(this._n,".addFailedCountOfUserSide invalid key:"),e)}},{key:"addCost",value:function(e,t){this._rateMessageSent.addCost(e,t)||we.w("".concat(this._n,".addCost invalid key or cost:"),e,t)}},{key:"addFileSize",value:function(e,t){this._rateMessageSent.addFileSize(e,t)||we.w("".concat(this._n,".addFileSize invalid key or size:"),e,t)}},{key:"addMessageSequence",value:function(e){this._rateMessageReceived.addMessageSequence(e)||we.w("".concat(this._n,".addMessageSequence invalid key:"),e.key)}},{key:"_getQualityItem",value:function(e){var n={},o=Qn[this.get(15).getNetworkType()];dt(o)&&(o=8),o={qualityType:Xn[e],timestamp:Ae(),networkType:o,extension:""};switch(e){case qn:n=this._avgRTT.getStatResult();break;case Bn:n=this._avgE2EDelay.getStatResult();break;case Vn:case Hn:case jn:case Kn:case Wn:n=this._rateMessageSent.getStatResult(e);break;case Yn:case zn:case $n:n=this._rateMessageReceived.getStatResult(e)}return null===n?null:t(t({},o),n)}},{key:"_report",value:function(e){var t=this,n=[],o=null,i=(e=(dt(e)?this._qualityItems.forEach((function(e){null!==(o=t._getQualityItem(e))&&(o.reportIndex=t.reportIndex,o.wholePeriod=t.wholePeriod,n.push(o))})):null!==(o=this._getQualityItem(e))&&(o.reportIndex=this.reportIndex,o.wholePeriod=this.wholePeriod,n.push(o)),we.d("".concat(this._n,"._report"),n),0<this._statInfoArr.length&&(n=n.concat(this._statInfoArr),this._statInfoArr=[]),this.get(12)),e.getSDKAppID());e=e.getTinyID();0<(n=Ut(this.REPORT_SDKAPPID_BLACKLIST,i)&&!xt(this.REPORT_TINYID_WHITELIST,e)?[]:n).length&&this._doReport(n)}},{key:"_doReport",value:function(e){var n=this,o={header:sr(this),quality:e};this.req({P:Fn.SSO_STAT,data:t({},o)}).then((function(){n.reportIndex++,n.wholePeriod=!1})).catch((function(t){we.w("".concat(n._n,"._doReport failed. error:"),t),n._statInfoArr=n._statInfoArr.concat(e),n._flushAtOnce()}))}},{key:"_flushAtOnce",value:function(){var e=this.get(13),t=e.getItem(this.TAG,!1),n=this._statInfoArr,o="".concat(this._n,"._flushAtOnce");je(t)?(we.l("".concat(o," count:").concat(n.length)),e.setItem(this.TAG,n,!0,!1)):(10<(n=n.concat(t)).length&&(n=n.slice(0,10)),we.l("".concat(o," count:").concat(n.length)),e.setItem(this.TAG,n,!0,!1)),this._statInfoArr=[]}},{key:"reset",value:function(){we.l("".concat(this._n,".reset")),this._report(),this.reportIndex=0,this.wholePeriod=!1,this.REPORT_SDKAPPID_BLACKLIST=[],this.REPORT_TINYID_WHITELIST=[],this._avgRTT.reset(),this._avgE2EDelay.reset(),this._rateMessageSent.reset(),this._rateMessageReceived.reset()}}]),Bs),Xa=c((function e(t){r(this,e),je(t)||(this.userID=t.userID||"",this.nick=t.nick||"",this.avatar=t.avatar||"",this.time=t.time||0,this.source=t.source||"",this.wording=t.wording||"",this.type=t.type||"")})),Ja=(c(qs,[{key:"getLocalApplicationList",value:function(){return{friendApplicationList:y(this._map.values()),unreadCount:this._unreadCount}}},{key:"_onApplicationListUpdated",value:function(){this._snsM.emitOEvt(E.FRIEND_APPLICATION_LIST_UPDATED,{friendApplicationList:y(this._map.values()),unreadCount:this._unreadCount})}},{key:"onApplicationRead",value:function(){this._unreadCount=0,this._onApplicationListUpdated()}},{key:"onApplicationAdded",value:function(e,n){var o,i,r=this;je(e)||("",o=n===this._snsM.getMyUserID()?k.SNS_APPLICATION_SENT_BY_ME:k.SNS_APPLICATION_SENT_TO_ME,i=!1,e.forEach((function(e){var n="".concat(e.userID,"_").concat(o);o!==k.SNS_APPLICATION_SENT_TO_ME||r._map.has(n)||(r._unreadCount+=1),r._map.set(n,new Xa(t(t({},e),{},{type:o}))),i=!0})),i&&this._onApplicationListUpdated())}},{key:"onApplicationDeleted",value:function(e){je(e)||(this._startTime=0,this._currentSeq=0,this.getApplicationList())}},{key:"getApplicationList",value:function(){var e=this,t="".concat(this._n,".").concat("getApplicationList"),n=new eo("getApplicationList");return this._snsM.req({P:Fn.GET_FD_APPLICATION_LIST,data:{applicationType:k.SNS_APPLICATION_TYPE_BOTH,fromAccount:this._snsM.getMyUserID(),maxLimited:this._maxLimited,startTime:this._startTime,lastSequence:this._currentSeq}}).then((function(o){o=o.data;var i=o.resultList,r=o.unreadCount,a=o.startTime,s=(o=o.currentSequence,e._startTime=a,e._currentSeq=o,e._unreadCount=r,Xe(i)?i.length:0);s="applicationCount:".concat(s," unreadCount:").concat(r," startTime:").concat(a," currentSequence:").concat(o);n.setMessage(s).end(),we.i("".concat(t," ok. ").concat(s)),e._map.clear(),Xe(i)&&i.forEach((function(t){var n=t.userID,o=t.type;t=new Xa(t);e._map.set("".concat(n,"_").concat(o),t)})),e._onApplicationListUpdated()})).catch((function(e){return n.setError(e).end(),we.w("".concat(t," failed. error:"),e),Cn(e)}))}},{key:"deleteApplication",value:function(e){var t="".concat(this._n,".").concat("deleteApplication"),n=e.userID,o=e.type;if(o&&(o===k.SNS_APPLICATION_SENT_BY_ME||o===k.SNS_APPLICATION_SENT_TO_ME)||(o=k.SNS_APPLICATION_SENT_TO_ME),!this._map.has("".concat(n,"_").concat(o)))return Cn({code:Un.FRIEND_APPLICATION_NOT_EXIST});var i=new eo("deleteApplication");return i.setMessage("userID:".concat(n," type:").concat(o)),this._snsM.req({P:Fn.DEL_FD_APPLICATION,data:{fromAccount:this._snsM.getMyUserID(),userIDList:[n],type:o}}).then((function(e){e=e.data.resultList;var r=e[0],a=r.to,s=r.resultCode;r=r.resultInfo;return i.setMoreMessage("resultList:".concat(JSON.stringify(e))).end(),we.i("".concat(t," ok. userID:").concat(n," type:").concat(o)),0===s?Mn():Cn({userID:a,code:s,message:r})})).catch((function(e){return i.setError(e).end(),we.w("".concat(t," failed. error:"),e),Cn(e)}))}},{key:"acceptApplication",value:function(e){var t="".concat(this._n,".").concat("acceptApplication"),n=e.userID,o=e.remark,i=e.tag,r=e.type,a=(r&&(r===k.SNS_APPLICATION_AGREE||r===k.SNS_APPLICATION_AGREE_AND_ADD)||(r=k.SNS_APPLICATION_AGREE_AND_ADD),new eo("acceptApplication"));return a.setMessage("userID:".concat(n," type:").concat(r)),this._snsM.req({P:Fn.RESPOND_FD_APPLICATION,data:{fromAccount:this._snsM.getMyUserID(),responseFriendItem:[{userID:n,remark:o,tag:i,action:r}]}}).then((function(e){a.end();e=e.data.resultList[0];var o=e.resultCode;e=e.resultInfo;if(0!==o)return Cn({code:o,message:e});we.i("".concat(t," ok. userID:").concat(n," type:").concat(r))})).catch((function(e){return a.setError(e).end(),we.w("".concat(t," failed. error:"),e),Cn(e)}))}},{key:"refuseApplication",value:function(e){var t="".concat(this._n,".").concat("refuseApplication"),n=e.userID,o=new eo("refuseApplication");return o.setMessage("userID:".concat(n)),this._snsM.req({P:Fn.RESPOND_FD_APPLICATION,data:{fromAccount:this._snsM.getMyUserID(),responseFriendItem:[{userID:n,action:"Response_Action_Reject"}]}}).then((function(e){o.end();e=e.data.resultList[0];var i=e.resultCode;e=e.resultInfo;if(0!==i)return Cn({code:i,message:e});we.i("".concat(t," ok. userID:").concat(n))})).catch((function(e){return o.setError(e).end(),we.w("".concat(t," failed. error:"),e),Cn(e)}))}},{key:"setApplicationRead",value:function(){var e=this,t="".concat(this._n,".").concat("setApplicationRead"),n=new eo("setApplicationRead");return this._snsM.req({P:Fn.REPORT_FD_APPLICATION,data:{fromAccount:this._snsM.getMyUserID(),latestTimeStamp:Gt(Ae()/1e3,0)}}).then((function(o){n.end(),we.i("".concat(t," ok")),e._unreadCount=0})).catch((function(e){return n.setError(e).end(),we.w("".concat(t," failed. error:"),e),Cn(e)}))}},{key:"reset",value:function(){this._maxLimited=100,this._currentSeq=0,this._unreadCount=0,this._map.clear()}}]),qs),Qa=(c(Fs,[{key:"validate",value:function(e){var t,n=!0,o="";if(je(e))return{valid:!1,tips:"empty options"};if(e.profileCustomField)for(var i=e.profileCustomField.length,r=null,a=0;a<i;a++){if(r=e.profileCustomField[a],!lt(r.key)||-1===r.key.indexOf("Tag_Profile_Custom"))return{valid:!1,tips:"The prefix of keys of the custom profile key-value pairs (which is profileCustomField) must be Tag_Profile_Custom"};if(!lt(r.value))return{valid:!1,tips:"The type of values of the custom profile key-value pairs (which is profileCustomField) must be String"}}for(t in e)if(Object.prototype.hasOwnProperty.call(e,t)){if("profileCustomField"===t)continue;if(je(e[t])&&!lt(e[t])&&!Ye(e[t])){o="key:"+t+", invalid value:"+e[t],n=!1;continue}switch(t){case"nick":lt(e[t])||(n=!(o="nick must be a string")),500<ot(e[t])&&(o="nick name limited: must less than or equal to ".concat(500," bytes, current size: ").concat(ot(e[t])," bytes"),n=!1);break;case"gender":at(Ue,e.gender)||(o="key:gender, invalid value:"+e.gender,n=!1);break;case"birthday":Ye(e.birthday)||(n=!(o="birthday must be a number"));break;case"location":lt(e.location)||(n=!(o="location must be a string"));break;case"selfSignature":lt(e.selfSignature)||(n=!(o="selfSignature must be a string"));break;case"allowType":at(Fe,e.allowType)||(o="key:allowType, invalid value:"+e.allowType,n=!1);break;case"language":Ye(e.language)||(n=!(o="language must be a number"));break;case"avatar":lt(e.avatar)||(n=!(o="avatar must be a string"));break;case"messageSettings":0!==e.messageSettings&&1!==e.messageSettings&&(n=!(o="messageSettings must be 0 or 1"));break;case"adminForbidType":at(xe,e.adminForbidType)||(o="key:adminForbidType, invalid value:"+e.adminForbidType,n=!1);break;case"level":Ye(e.level)||(n=!(o="level must be a number"));break;case"role":Ye(e.role)||(n=!(o="role must be a number"));break;default:o="unknown key:"+t+"  "+e[t],n=!1}}return{valid:n,tips:o}}},{key:"update",value:function(e){var t,n="",o=[];this.friendCustomField.forEach((function(e){o.push(e.key)}));for(var i=0,r=e.length;i<r;i++)if(n=e[i].tag,t=e[i].value,-1<n.indexOf("Tag_SNS_Custom"))-1<o.indexOf(n)?this.friendCustomField.forEach((function(e){e.key===n&&(e.value=t)})):this.friendCustomField.push({key:n,value:t});else if(-1<n.indexOf("Tag_Profile_Custom")){var a=!1;this.profile.profileCustomField.forEach((function(e){e.key===n&&(e.value=t,a=!0)})),a||this.profile.profileCustomField.push({key:n,value:t})}else switch(n){case Pe.NICK:this.profile.nick=t;break;case Pe.GENDER:this.profile.gender=t;break;case Pe.BIRTHDAY:this.profile.birthday=t;break;case Pe.LOCATION:this.profile.location=t;break;case Pe.SELFSIGNATURE:this.profile.selfSignature=t;break;case Pe.ALLOWTYPE:this.profile.allowType=t;break;case Pe.LANGUAGE:this.profile.language=t;break;case Pe.AVATAR:this.profile.avatar=t;break;case Pe.MESSAGESETTINGS:this.profile.messageSettings=t;break;case Pe.ADMINFORBIDTYPE:this.profile.adminForbidType=t;break;case Pe.LEVEL:this.profile.level=t;break;case Pe.ROLE:this.profile.role=t;break;case Ge.REMARK:this.remark=t;break;case Ge.ADDTIME:this.addTime=t;break;case Ge.GROUP:this.groupList=JSON.parse(JSON.stringify(t));break;case Ge.ADDSOURCE:this.source=t;break;case Ge.ADDWORDING:break;default:we.d("snsProfileItem unkown tag->",e[i].tag)}this.timestamp=Date.now(),o.length=0}},{key:"updateProfile",value:function(e){this.profile=JSON.parse(JSON.stringify(e)),this.timestamp=Date.now()}},{key:"addToGroupList",value:function(e){-1===this.groupList.indexOf(e)&&(this.groupList.push(e),this.count=this.groupList.length)}},{key:"removeFromGroupList",value:function(e){e=this.groupList.indexOf(e),-1<e&&(this.groupList.splice(e,1),this.count=this.groupList.length)}}]),Fs),Za=(c(xs,[{key:"getLocalFriendList",value:function(){return y(this._map.values())}},{key:"getFriendRemark",value:function(e){return this._map.has(e)?this._map.get(e).remark:""}},{key:"onFriendProfileModified",value:function(e){var t,n=this;e=e.dataList;je(e)||(t=this._snsM.get(11),e.forEach((function(e){var o,i=e.userID;e=e.profileList;n.isMyFriend(i)&&(we.l("".concat(n._n,".onFriendProfileModified. friend account:").concat(i,", profileList:").concat(JSON.stringify(e))),(o=n._map.get(i)).update(e),t.modifyMessageSentByPeer({conversationID:"".concat(k.CONV_C2C).concat(i),latestNick:o.profile.nick,latestAvatar:o.profile.avatar}))})),this._onFriendListUpdated())}},{key:"onFriendAdded",value:function(e){var t=this;0!==e.length&&(we.l("".concat(this._n,".onFriendAdded userIDList:").concat(e)),e.forEach((function(e){t._map.set(e,new Qa(e))})),this.getFriendProfile({userIDList:e}).then((function(n){e.forEach((function(e){var n=t._map.get(e);0<n.groupList.length&&t._snsM.updateWhenFriendAdded({nameList:n.groupList,userID:e})})),t._onFriendListUpdated()})))}},{key:"onFriendDeleted",value:function(e){var t=this;0!==e.length&&(we.l("".concat(this._n,".onFriendDeleted userIDList:").concat(e)),e.forEach((function(e){var n=t._map.get(e);0<n.groupList.length&&t._snsM.updateWhenFriendDeleted({nameList:n.groupList,userID:e}),t._map.delete(e)})),this._onFriendListUpdated())}},{key:"_onFriendListUpdated",value:function(){this._snsM.emitOEvt(E.FRIEND_LIST_UPDATED),this._snsM.get(11).checkAndPatchRemark()}},{key:"getFriendProfile",value:function(e){var t=this,n="".concat(this._n,".").concat("getFriendProfile"),o=(e=e.userIDList,[]),i=[],r=[];if(e.forEach((function(e){var n;t._map.has(e)?(n=t._map.get(e),Date.now()-n.timestamp<t._expirationTime?i.push(n):r.push(e)):o.push({userID:e,code:Un.NOT_MY_FRIEND,message:t._snsM.getErrMsg(Un.NOT_MY_FRIEND)})})),0===r.length)return we.i("".concat(n," newUserIDList is empty")),In({friendList:i,failureUserIDList:o});var a=new eo("getFriendProfile");return a.setMessage("userIDList:".concat(r)),we.i("".concat(n," userIDList:").concat(r)),this._snsM.req({P:Fn.GET_FD_PROFILE,data:{fromAccount:this._snsM.getMyUserID(),userIDList:r}}).then((function(e){return a.end(),we.i("".concat(n," ok")),e.data.resultList.forEach((function(e){var n,r=e.to,a=e.resultCode,s=e.resultInfo;e=e.tagValueList;dt(a)||0===a?(t._map.has(r)?(n=t._map.get(r)).update(e):(n=new Qa(r,e),t._map.set(r,n)),i.push(n)):o.push({userID:r,code:a,message:s})})),Mn({friendList:i,failureUserIDList:o})})).catch((function(e){return a.setError(e).end(),we.w("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"isMyFriend",value:function(e){return this._map.has(e)}},{key:"pagingGetFriendList",value:function(){var e=this,t="".concat(this._n,".").concat("getFriendList"),n=new eo("getFriendList"),o=Date.now();this._snsM.req({P:Fn.GET_FD_LIST,data:{fromAccount:this._snsM.getMyUserID(),startIndex:this._startIdx,standardSequence:this._standardSeq,customSequence:this._customSeq}}).then((function(i){i=i.data;var r=i.friendCount,a=i.resultList,s=i.nextStartIndex,c=i.standardSequence,u=i.customSequence;i=i.completeFlag,e._startIdx=s,e._standardSeq=c,e._customSeq=u,r="friendCount:".concat(r," nextStartIndex:").concat(s," standardSequence:").concat(c," ")+"customSequence:".concat(u," completeFlag:").concat(i," cost:").concat(Yt(o));n.setMessage(r).end(),we.i("".concat(t," ok."),r),je(a)||a.forEach((function(t){var n=t.to;t=t.tagValueList;e._map.set(n,new Qa(n,t))})),0===i?e.pagingGetFriendList():(e._snsM.emitOEvt(E.FRIEND_LIST_UPDATED),e._pagingGetFriendProfile())})).catch((function(e){return n.setError(e).end(),we.w("".concat(t," failed. error:"),e),Cn(e)}))}},{key:"_pagingGetFriendProfile",value:function(){var e=this,t=y(this._map.keys()),n=this._snsM.get(4),o=t.length,i=o<=100?1:Math.ceil(o/100);we.l("".concat(this._n,"._pagingGetFriendProfile friendCount:").concat(o," pageCount:").concat(i));for(var r=0;r<i;r++)n.getUserProfile({userIDList:t.slice(100*r,100*(r+1))}).then((function(t){t.data.forEach((function(t){var n=e._map.get(t.userID);n&&n.updateProfile(t)})),e._onFriendListUpdated()}))}},{key:"addFriend",value:function(e){var t=this,n="".concat(this._n,".").concat("addFriend");if(this._map.has(e.to))return Cn({code:Un.ALREADY_MY_FRIEND});if(e.wording&&!1===this._snsM.filterProfanity("wording",e))return Cn({code:Un.PROFANITY_FOUND});var o=e.to,i=e.source,r=e.type,a=e.wording,s=e.remark,c=(e=e.groupName,r),u=(c&&(c===k.SNS_ADD_TYPE_SINGLE||c===k.SNS_ADD_TYPE_BOTH)||(c=k.SNS_ADD_TYPE_BOTH),new eo("addFriend"));return u.setMessage("to:".concat(o," source:").concat(i," type:").concat(c)),this._snsM.req({P:Fn.ADD_FD,data:{fromAccount:this._snsM.getMyUserID(),addFriendItem:[{to:o,source:i,wording:a,remark:s,groupName:e}],type:c}}).then((function(e){e=e.data.resultList,u.setMoreMessage("resultList:".concat(JSON.stringify(e))).end(),e=e[0];var o=e.to,i=e.resultCode;e=e.resultInfo;return we.i("".concat(n," ok. to:").concat(o," type:").concat(c," code:").concat(i)),dt(i)||0===i?Mn({userID:o,code:0}):30539===i?Mn({userID:o,code:i,message:t._snsM.getErrMsg(i)}):Cn({userID:o,code:i,message:t._snsM.getErrMsg(i)||e})})).catch((function(e){return u.setError(e).end(),we.w("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"deleteFriend",value:function(e){var t=this,n="".concat(this._n,".").concat("deleteFriend"),o=e.userIDList,i=(e=e.type,1e3<o.length&&(we.w("".concat(n," ").concat(jt(1e3))),o.length=1e3),[]),r=[],a=[];if(o.forEach((function(e){t._map.has(e)?a.push(e):i.push({userID:e,code:Un.NOT_MY_FRIEND,message:t._snsM.getErrMsg(Un.NOT_MY_FRIEND)})})),0===a.length)return In({successUserIDList:r,failureUserIDList:i});o=e;var s=(o&&(o===k.SNS_DELETE_TYPE_SINGLE||o===k.SNS_DELETE_TYPE_BOTH)||(o=k.SNS_DELETE_TYPE_BOTH),new eo("deleteFriend"));return s.setMessage("userIDList:".concat(a," type:").concat(o)),this._snsM.req({P:Fn.DEL_FD,data:{fromAccount:this._snsM.getMyUserID(),userIDList:a,type:o}}).then((function(e){return s.end(),we.i("".concat(n," ok")),e=e.data.resultList,je(e)||e.forEach((function(e){var t=e.to,n=e.resultCode;e=e.resultInfo;dt(n)||0===n?r.push({userID:t}):i.push({userID:t,code:n,message:e})})),Mn({successUserIDList:r,failureUserIDList:i})})).catch((function(e){return s.setError(e).end(),we.w("".concat(n," error:"),e),Cn(e)}))}},{key:"updateFriend",value:function(e){var t=this,n=e.userID,o=e.remark,i=e.friendCustomField;if(!this._map.has(n))return Cn({code:Un.NOT_MY_FRIEND});var r="".concat(this._n,".").concat("updateFriend"),a=new eo("updateFriend"),s=(a.setMessage("userID:".concat(n," remark:").concat(o," friendCustomField:").concat(i)),[]);return dt(o)||s.push({tag:Ge.REMARK,value:o}),Xe(i)&&0<i.length&&i.forEach((function(e){s.push({tag:e.key,value:e.value})})),this._snsM.req({P:Fn.UPDATE_FD,data:{fromAccount:this._snsM.getMyUserID(),updateItem:[{to:n,snsItem:s}]}}).then((function(e){a.end(),we.i("".concat(r," ok"));e=e.data.resultList[0];var n=e.to,s=e.resultCode;e=e.resultInfo;return dt(s)||0===s?((n=t._map.get(n))&&(dt(o)||(n.remark=o),Xe(i)&&0<i.length&&yt(n.friendCustomField,i),t._onFriendListUpdated()),Mn(n)):Cn({code:s,message:e})})).catch((function(e){return a.setError(e).end(),we.w("".concat(r," failed. error:"),e),Cn(e)}))}},{key:"checkFriend",value:function(e){var t="".concat(this._n,".").concat("checkFriend"),n=e.userIDList,o=e.type,i=(o&&(o===k.SNS_CHECK_TYPE_SINGLE||o===k.SNS_CHECK_TYPE_BOTH)||(o=k.SNS_CHECK_TYPE_BOTH),new eo("checkFriend"));return i.setMessage("userIDList:".concat(n," type:").concat(o)),this._snsM.req({P:Fn.CHECK_FD,data:{fromAccount:this._snsM.getMyUserID(),userIDList:n,type:o}}).then((function(e){i.end(),we.i("".concat(t," ok. userIDList:").concat(n," type:").concat(o));var r=[],a=[];e=e.data.resultList;return Xe(e)&&e.forEach((function(e){var t=e.to,n=e.relation,o=e.resultCode;e=e.resultInfo;dt(o)||0===o?r.push({userID:t,code:0,relation:n}):a.push({userID:t,code:o,message:e})})),Mn({successUserIDList:r,failureUserIDList:a})})).catch((function(e){return i.setError(e).end(),we.w("".concat(t," failed. error:"),e),Cn(e)}))}},{key:"onAddedToFriendGroup",value:function(e){var t=this,n=e.name;e=e.userIDList;we.l("".concat(this._n,".onAddedToFriendGroup groupName:").concat(n," userIDList:").concat(e)),n&&!je(e)&&e.forEach((function(e){t._map.has(e)&&t._map.get(e).addToGroupList(n)}))}},{key:"onRemovedFromFriendGroup",value:function(e){var t=this,n=e.name;e=e.userIDList;we.l("".concat(this._n,".onRemovedFromFriendGroup groupName:").concat(n," userIDList:").concat(e)),n&&!je(e)&&e.forEach((function(e){t._map.has(e)&&t._map.get(e).removeFromGroupList(n)}))}},{key:"reset",value:function(){this._map.clear(),this._startIdx=0,this._standardSeq=0,this._customSeq=0}}]),xs),es=(c(Us,[{key:"addToUserIDList",value:function(e){-1===this.userIDList.indexOf(e)&&(this.userIDList.push(e),this.count=this.userIDList.length)}},{key:"removeFromUserIDList",value:function(e){e=this.userIDList.indexOf(e),-1<e&&(this.userIDList.splice(e,1),this.count=this.userIDList.length)}}]),Us),ts=(c(Gs,[{key:"getLocalGroupList",value:function(){return y(this._map.values())}},{key:"_onGroupListUpdated",value:function(){var e=y(this._map.values());this._snsM.emitOEvt(E.FRIEND_GROUP_LIST_UPDATED,e)}},{key:"getGroupList",value:function(){var e=this,t="".concat(this._n,".").concat("getGroupList"),n=new eo("getGroupList");return this._snsM.req({P:Fn.GET_FD_GRP_LIST,data:{fromAccount:this._snsM.getMyUserID()}}).then((function(o){n.end(),o=o.data.resultList,je(o)?we.i("".concat(t," ok. count:0")):(we.i("".concat(t," ok. count:").concat(o.length)),e._map.clear(),o.forEach((function(t){var n=new es(t);e._map.set(t.name,n)})),e._onGroupListUpdated())})).catch((function(e){return n.setError(e).end(),we.w("".concat(t," error:"),e),Cn(e)}))}},{key:"createGroup",value:function(e){var t=this,n="".concat(this._n,".").concat("createGroup"),o=e.name;e=e.userIDList;if(this._map.has(o))return Cn({code:Un.FRIEND_GRP_EXISTED});var i="name:".concat(o," userIDList:").concat(e),r=new eo("createGroup");return r.setMessage(i),this._snsM.req({P:Fn.CREATE_FD_GRP,data:{fromAccount:this._snsM.getMyUserID(),groupName:[o],userIDList:Xe(e)?e:void 0}}).then((function(e){r.end(),we.l("".concat(n," ok. ").concat(i));e=e.data.resultList;var a=[],s=[];e&&e.forEach((function(e){var t=e.to,n=e.resultCode,o=e.resultInfo;dt(n)||0===n?a.push(t):(t={userID:e.to,code:n,message:o},s.push(t))})),e=new es({name:o,userIDList:a});return t._map.set(o,e),t._snsM.onAddedToFriendGroup({name:o,userIDList:a}),t._onGroupListUpdated(),Mn({friendGroup:e,failureUserIDList:s})})).catch((function(e){return r.setError(e).end(),we.w("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"deleteGroup",value:function(e){var t=this,n="".concat(this._n,".").concat("deleteGroup"),o=e.name;if(!this._map.has(o))return this._onGroupNotExist();var i="name:".concat(o),r=new eo("deleteGroup");return r.setMessage(i),this._snsM.req({P:Fn.DEL_FD_GRP,data:{fromAccount:this._snsM.getMyUserID(),nameList:[o]}}).then((function(e){r.end(),we.l("".concat(n," ok. ").concat(i));var a=t._map.get(o);return a&&(t._snsM.onRemovedFromFriendGroup({name:o,userIDList:a.userIDList}),t._map.delete(o),a.userIDList.length=0),t._onGroupListUpdated(),Mn(a)})).catch((function(e){return r.setError(e).end(),we.w("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"renameGroup",value:function(e){var t=this,n="".concat(this._n,".").concat("renameGroup"),o=e.oldName,i=e.newName;if(!this._map.has(o))return this._onGroupNotExist();var r="oldName:".concat(o," newName:").concat(i),a=new eo("renameGroup");return a.setMessage(r),this._snsM.req({P:Fn.UPDATE_FD_GRP,data:{fromAccount:this._snsM.getMyUserID(),oldName:o,newName:i}}).then((function(){var e;return a.end(),we.l("".concat(n," ok. ").concat(r)),t._map.has(o)?((e=t._map.get(o)).name=i,t._map.delete(o),t._map.set(i,e),t._snsM.onRemovedFromFriendGroup({name:o,userIDList:e.userIDList}),t._snsM.onAddedToFriendGroup({name:i,userIDList:e.userIDList}),t._onGroupListUpdated(),Mn(e)):Mn()})).catch((function(e){return a.setError(e).end(),we.w("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"addToGroup",value:function(e){var t=this,n="".concat(this._n,".").concat("addToGroup"),o=e.name;e=e.userIDList;if(!this._map.has(o))return this._onGroupNotExist();var i="name:".concat(o," userIDList:").concat(e),r=new eo("addToGroup");return r.setMessage(i),this._snsM.req({P:Fn.UPDATE_FD_GRP,data:{fromAccount:this._snsM.getMyUserID(),oldName:o,updateGroupItem:e.filter((function(e){return t._snsM.isMyFriend(e)})).map((function(e){return{to:e,updateType:"Update_Type_Add"}}))}}).then((function(e){return r.end(),we.l("".concat(n," ok. ").concat(i)),t._onGroupUpdated(o,e)})).catch((function(e){return r.setError(e).end(),we.w("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"removeFromGroup",value:function(e){var t=this,n="".concat(this._n,".").concat("removeFromGroup"),o=e.name;e=e.userIDList;if(!this._map.has(o))return this._onGroupNotExist();var i="name:".concat(o," userIDList:").concat(e),r=new eo("removeFromGroup");return r.setMessage(i),this._snsM.req({P:Fn.UPDATE_FD_GRP,data:{fromAccount:this._snsM.getMyUserID(),oldName:o,updateGroupItem:e.filter((function(e){return t._snsM.isMyFriend(e)})).map((function(e){return{to:e,updateType:"Update_Type_Delete"}}))}}).then((function(e){return r.end(),we.l("".concat(n," ok. ").concat(i)),t._onGroupUpdated(o,e)})).catch((function(e){return r.setError(e).end(),we.w("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"_onGroupUpdated",value:function(e,t){t=t.data.resultList;var n=this._map.get(e),o=[],i=[],r=[];return Xe(t)&&t.forEach((function(e){var t=e.to,a=e.resultCode,s=e.resultInfo,c=e.type;0===a?"Update_Type_Add"===c?n&&(n.addToUserIDList(t),i.push(t)):"Update_Type_Delete"===c&&n&&(n.removeFromUserIDList(t),r.push(t)):o.push({to:e.to,code:a,message:s})})),we.l("".concat(this._n,"._onGroupUpdated name:").concat(e," userIDList:").concat(n.userIDList)),0<i.length&&this._snsM.onAddedToFriendGroup({name:e,userIDList:i}),0<r.length&&this._snsM.onRemovedFromFriendGroup({name:e,userIDList:r}),Mn({friendGroup:n,failureUserIDList:o})}},{key:"updateWhenFriendAdded",value:function(e){var t=this,n=e.nameList,o=e.userID;we.l("".concat(this._n,".updateWhenFriendAdded userID:").concat(o," nameList:").concat(n)),je(n)||n.forEach((function(e){t._map.has(e)&&t._map.get(e).addToUserIDList(o)}))}},{key:"updateWhenFriendDeleted",value:function(e){var t=this,n=e.nameList,o=e.userID;we.l("".concat(this._n,".updateWhenFriendDeleted userID:").concat(o," nameList:").concat(n)),je(n)||n.forEach((function(e){t._map.has(e)&&t._map.get(e).removeFromUserIDList(o)}))}},{key:"_onGroupNotExist",value:function(e){return Cn({code:Un.FRIEND_GRP_NOT_EXIST})}},{key:"reset",value:function(){this._map.clear()}}]),Gs),ns=(l(Ps,Rn),Ua=v(Ps),c(Ps,[{key:"onContextUpdated",value:function(e){this._friendHandler.pagingGetFriendList(),this._friendGroupHandler.getGroupList(),this._friendApplicationHandler.getApplicationList()}},{key:"onRelationChainModified",value:function(e){var t,n,o,i,r,a,s=this;e=e.dataList;je(e)||(t=[],n=[],o=[],r=!(i=[]),a="",e.forEach((function(e){var c;3!==e.pushType&&4!==e.pushType||!e.from||(a=e.from),e.friendAddAccount&&(t.push.apply(t,y(e.friendAddAccount)),i.push.apply(i,y(e.friendAddAccount))),e.friendDelAccount&&n.push.apply(n,y(e.friendDelAccount)),e.friendApplicationAdded&&o.push.apply(o,y(e.friendApplicationAdded)),e.friendApplicationDeletedUserIDList&&i.push.apply(i,y(e.friendApplicationDeletedUserIDList)),e.reportTime&&7===e.pushType&&(r=!0),e.friendUpInfo&&(c={dataList:[]},e.friendUpInfo.forEach((function(e){c.dataList.push({userID:e.friendAccount,profileList:y(e.sns)})})),s.onFriendProfileModified(c))})),r&&this._friendApplicationHandler.onApplicationRead(),this._friendApplicationHandler.onApplicationAdded(o,a),this._friendApplicationHandler.onApplicationDeleted(i),this._friendHandler.onFriendAdded(t),this._friendHandler.onFriendDeleted(n))}},{key:"isMyFriend",value:function(e){return this._friendHandler.isMyFriend(e)}},{key:"filterProfanity",value:function(e,t){var n=this.get(29);if(!n)return!0;n=n.filterText(t[e],"sns");var o=n.isAllowedToSend;n=n.modifiedText;return!0===o&&(t[e]=n,!0)}},{key:"onFriendProfileModified",value:function(e){this._friendHandler.onFriendProfileModified(e)}},{key:"getLocalFriendList",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=this._friendHandler.getLocalFriendList();return e?In(t):t}},{key:"getFriendRemark",value:function(e){return this._friendHandler.getFriendRemark(e)}},{key:"getFriendList",value:function(){return this._friendHandler.pagingGetFriendList()}},{key:"addFriend",value:function(e){return this._friendHandler.addFriend(e)}},{key:"deleteFriend",value:function(e){return this._friendHandler.deleteFriend(e)}},{key:"checkFriend",value:function(e){return this._friendHandler.checkFriend(e)}},{key:"getFriendProfile",value:function(e){return this._friendHandler.getFriendProfile(e)}},{key:"updateFriend",value:function(e){return this._friendHandler.updateFriend(e)}},{key:"onAddedToFriendGroup",value:function(e){this._friendHandler.onAddedToFriendGroup(e)}},{key:"onRemovedFromFriendGroup",value:function(e){this._friendHandler.onRemovedFromFriendGroup(e)}},{key:"getLocalFriendApplicationList",value:function(){var e=this._friendApplicationHandler.getLocalApplicationList();return In(e)}},{key:"deleteFriendApplication",value:function(e){return this._friendApplicationHandler.deleteApplication(e)}},{key:"refuseFriendApplication",value:function(e){return this._friendApplicationHandler.refuseApplication(e)}},{key:"acceptFriendApplication",value:function(e){return this._friendApplicationHandler.acceptApplication(e)}},{key:"setFriendApplicationRead",value:function(e){return this._friendApplicationHandler.setApplicationRead(e)}},{key:"getLocalFriendGroupList",value:function(){var e=this._friendGroupHandler.getLocalGroupList();return In(e)}},{key:"createFriendGroup",value:function(e){return this._friendGroupHandler.createGroup(e)}},{key:"deleteFriendGroup",value:function(e){return this._friendGroupHandler.deleteGroup(e)}},{key:"addToFriendGroup",value:function(e){return this._friendGroupHandler.addToGroup(e)}},{key:"removeFromFriendGroup",value:function(e){return this._friendGroupHandler.removeFromGroup(e)}},{key:"renameFriendGroup",value:function(e){return this._friendGroupHandler.renameGroup(e)}},{key:"updateWhenFriendAdded",value:function(e){this._friendGroupHandler.updateWhenFriendAdded(e)}},{key:"updateWhenFriendDeleted",value:function(e){this._friendGroupHandler.updateWhenFriendDeleted(e)}},{key:"reset",value:function(){we.l("".concat(this._n,".reset")),this._friendHandler.reset(),this._friendGroupHandler.reset(),this._friendApplicationHandler.reset()}}]),Ps),os=(l(Ns,Rn),Ga=v(Ns),c(Ns,[{key:"isWorkerEnabled",value:function(){return this._isWorkerEnabled&&_e}},{key:"startWorkerTimer",value:function(){we.l("".concat(this._n,".startWorkerTimer")),this._workerTimer&&this._workerTimer.postMessage("start")}},{key:"stopWorkerTimer",value:function(){we.l("".concat(this._n,".stopWorkerTimer")),this._workerTimer&&this._workerTimer.postMessage("stop")}},{key:"_init",value:function(){var e,t;_e&&(e=URL.createObjectURL(new Blob(['let interval = -1;onmessage = function(event) {  if (event.data === "start") {    if (interval > 0) {      clearInterval(interval);    }    interval = setInterval(() => {      postMessage("");    }, 1000);    postMessage(interval);  } else if (event.data === "stop") {    clearInterval(interval);    interval = -1;  }};'],{type:"application/javascript; charset=utf-8"})),this._workerTimer=new Worker(e),(t=this)._workerTimer.onmessage=function(e){e.data?(t._timerID=e.data,we.l("".concat(t._n,"._init seed:").concat(t._timerID))):t._m.onCheckTimer()})}},{key:"_onCloudConfig",value:function(){var e=this.getCloudConfig("enable_worker");we.l("".concat(this._n,"._onCloudConfig enableWorker:").concat(e)),dt(e)||"1"===e?!this._isWorkerEnabled&&_e&&(this._isWorkerEnabled=!0,this.startWorkerTimer(),this._m.onWorkerTimerEnabled()):this._isWorkerEnabled&&_e&&(this._isWorkerEnabled=!1,this.stopWorkerTimer(),this._m.onWorkerTimerDisabled())}},{key:"terminate",value:function(){we.l("".concat(this._n,".terminate")),this._workerTimer&&(this._workerTimer.terminate(),this._workerTimer=null,this._timerID=-1)}},{key:"getTimerID",value:function(){return this._timerID}},{key:"reset",value:function(){we.l("".concat(this._n,".reset"))}}]),Ns),is=(c(ws,[{key:"isValidPurchaseBits",value:function(e){return e&&"string"==typeof e&&1<=e.length&&e.length<=64&&/[01]{1,64}/.test(e)}},{key:"parsePurchaseBits",value:function(e){if(this.isValidPurchaseBits(e)){this._featureMap.clear();for(var t,n=e.length-1,o=0;0<=n;n--,o++)t=(o<32?new L(0,Math.pow(2,o)):new L(Math.pow(2,o-32),0)).toString(),"1"===e[n]?this._featureMap.set(t,!0):this._featureMap.set(t,!1)}else we.w("".concat(this._n,".parsePurchaseBits invalid purchasebits:").concat(e))}},{key:"hasPurchasedFeature",value:function(e){return!!this._featureMap.get(e)}},{key:"isFeatureEnabled",value:function(e){for(var t=parseInt(e).toString(2),n=void 0,o=!0,i=t.length-1,r=0;0<=i;i--,r++)if("1"===t.charAt(i)&&(n=(r<32?new L(0,Math.pow(2,r)):new L(Math.pow(2,r-32),0)).toString(),!this._featureMap.get(n))){o=!1;break}return we.l("".concat(this._n,".isFeatureEnabled decimalNumber:").concat(e," key:").concat(n," ret:").concat(o)),In({enabled:o})}},{key:"isFeatureEnabledForStat",value:function(e){for(var t=parseInt(e).toString(2),n=t.length-1,o=0;0<=n;n--,o++)if("1"===t.charAt(n)){if(i=(o<32?new L(0,Math.pow(2,o)):new L(Math.pow(2,o-32),0)).toString(),!this._featureMap.get(i))break;var i,r="",a=0;i===U.PLUGIN_TRANSLATE?(r="plugin_translate",a=16):i===U.PLUGIN_VOICE_TO_TEXT?(r="plugin_voice_to_text",a=17):i===U.PLUGIN_CS?(r="plugin_cs",a=14):i===U.PLUGIN_PUSH?(r="plugin_push",a=13):i===U.PLUGIN_BOT?(r="plugin_bot",a=15):i===U.MSG_REACTION&&(r="plugin_emoji_reaction",a=18),""!==r&&(i=this._commercialConfigM.get(12).getUIPlatform(),new eo(r).setCode(a).setUIPlatform(i).end(),we.l("".concat(this._n,".isFeatureEnabledForStat ").concat(r," code:").concat(a," uiPlatform:").concat(i)))}}},{key:"isSearchCloudMessagesEnabled",value:function(){var e;this._isSCMReported||(e=this._commercialConfigM.get(12).getUIPlatform(),new eo("plugin_search").setCode(6).setUIPlatform(e).end(),this._isSCMReported=!0)}},{key:"clear",value:function(){this._featureMap.clear(),this._isSCMReported=!1}}]),ws),rs=(c(Rs,[{key:"_canFetch",value:function(){return this.get(12).isLoggedIn()?!this._isFetching&&Date.now()>=this._expiredTime:(this._expiredTime=Date.now()+2e3,!1)}},{key:"onCheckTimer",value:function(e){this._canFetch()&&this.fetchConfig()}},{key:"fetchConfig",value:function(){var e,t,n=this,o=this._canFetch(),i="".concat(this._n,".fetchConfig");we.l("".concat(i," canFetch:").concat(o)),o&&(e=new eo("fetchCommercialConfig"),o=this.get(12).getSDKAppID(),t=this.get(20),this._isFetching=!0,t.req({P:Fn.FETCH_COMMERCIAL_CONFIG,data:{SDKAppID:o}}).then((function(t){e.setMessage("purchaseBits:".concat(t.data.purchaseBits)).end(),we.l("".concat(i," ok.")),n._parseConfig(t.data),n._isFetching=!1})).catch((function(t){e.setError(t).end(),n._isFetching=!1})))}},{key:"onPushedConfig",value:function(e){var t="".concat(this._n,".onPushedConfig data:").concat(JSON.stringify(e));we.l("".concat(t)),new eo("pushedCommercialConfig").setMessage("purchaseBits:".concat(e.purchaseBits)).end(),this._parseConfig(e)}},{key:"_parseConfig",value:function(e){var t="".concat(this._n,"._parseConfig"),n=e.errorCode,o=e.errorMessage,i=e.purchaseBits,r=e.expiredTime;0===n?(this._purchasedFeatureHandler.parsePurchaseBits(i),this._expiredTime=Date.now()+1e3*r):dt(n)?(we.l("".concat(t," failed. Invalid message format:"),e),this._setExpiredTimeOnResponseError(36e5)):(we.e("".concat(t," errorCode:").concat(n," errorMessage:").concat(o)),this._setExpiredTimeOnResponseError(12e4))}},{key:"_setExpiredTimeOnResponseError",value:function(e){this._expiredTime=Date.now()+e}},{key:"canIUse",value:function(e){return this._purchasedFeatureHandler.hasPurchasedFeature(e)}},{key:"isFeatureEnabled",value:function(e){return this._purchasedFeatureHandler.isFeatureEnabled(e)}},{key:"isFeatureEnabledForStat",value:function(e){this._purchasedFeatureHandler.isFeatureEnabledForStat(e)}},{key:"isSearchCloudMessagesEnabled",value:function(){this._purchasedFeatureHandler.isSearchCloudMessagesEnabled()}},{key:"get",value:function(e){return this._m.get(e)}},{key:"reset",value:function(){we.l("".concat(this._n,".reset")),this._expiredTime=0,this._isFetching=!1,this._purchasedFeatureHandler.clear()}}]),Rs),as=(l(Os,Rn),Pa=v(Os),c(Os,[{key:"registerPlugin",value:function(e){var t,n,o,i,r,a,s,c,u,l,d,f,p;J?(this._offlinePushPlugin=e["tim-offline-push-plugin"],t=(p=e.offlinePushConfig||{}).huaweiBusinessID,n=p.xiaomiBusinessID,o=p.xiaomiAppID,i=p.xiaomiAppKey,r=p.meizuBusinessID,a=p.meizuAppID,s=p.meizuAppKey,c=p.vivoBusinessID,u=p.oppoBusinessID,l=p.oppoAppKey,d=p.oppoAppSecret,f=p.honorBusinessID,p=p.iosBusinessID,this._androidPushConfig.huaweiPushBussinessId=t,this._androidPushConfig.xiaomiPushBussinessId=n,this._androidPushConfig.xiaomiPushAppId=o,this._androidPushConfig.xiaomiPushAppKey=i,this._androidPushConfig.meizuPushBussinessId=r,this._androidPushConfig.meizuPushAppId=a,this._androidPushConfig.meizuPushAppKey=s,this._androidPushConfig.vivoPushBussinessId=c,this._androidPushConfig.oppoPushBussinessId=u,this._androidPushConfig.oppoPushAppKey=l,this._androidPushConfig.oppoPushAppSecret=d,this._androidPushConfig.honorPushBussinessId=f,new eo("registerPlugin").setMessage("tim-offline-push-plugin").setMoreMessage("isExist:".concat(!dt(this._offlinePushPlugin))).end(!0),we.l("".concat(this._n,".").concat("registerPlugin"," ok. offlinePushConfig:").concat(JSON.stringify(e.offlinePushConfig))),this._iosBusinessID=p,this._setAppShowListener()):this.warn("OfflinePushInUniapp")}},{key:"init",value:function(){this._isWebUniapp=this.getUniAppPlatform(),this._getDeviceToken()}},{key:"_getDeviceToken",value:function(){var e,t=this,n="".concat(this._n,".").concat("_getDeviceToken");Je(this._offlinePushPlugin.getDeviceToken)?(e="androidPushConfig:".concat(JSON.stringify(this._androidPushConfig),", iosBusinessID:").concat(this._iosBusinessID),we.l("".concat(n," start. ").concat(e)),new eo("_getDeviceToken").setMessage("".concat(e)).end(!0),this._offlinePushPlugin.getDeviceToken(this._androidPushConfig,(function(o){var i,r,a,s,c=new eo("getDeviceTokenRes"),u=o.code,l=o.msg;0===u?(i=(s=o.data).deviceToken,r=s.deviceBrand,a=s.deviceType,s=s.bussinessId,t._deviceToken=i,t._businessID=s||t._iosBusinessID,e="deviceToken:".concat(i,", deviceBrand:").concat(r||a,", businessID:").concat(t._businessID),we.l("".concat(n," ok. ").concat(e)),c.setMessage(e).end(!0),t._setToken()):(c.setMessage("code:".concat(u,", msg:").concat(l)).end(!0),we.e("".concat(n," failed. error:"),o))}))):we.e("".concat(n," getDeviceToken is not a function"))}},{key:"canIUseOfflinePush",value:function(){return J&&!dt(this._offlinePushPlugin)}},{key:"_setAppShowListener",value:function(){var e=this,t="".concat(this._n,".").concat("_setAppShowListener");dt(this._offlinePushPlugin)?we.e("".concat(t," offlinePushPlugin is undefined")):Je(this._offlinePushPlugin.setAppShowListener)?(new eo("_setAppShowListener").end(!0),we.l("".concat(t," start")),this._offlinePushPlugin.setAppShowListener((function(n){n=(n||{}).appShow,new eo("setAppShowListenerRes").setMessage("appShow:".concat(n)).end(!0),we.l("".concat(t," ok. appShow:").concat(n)),e._m.isReady()&&(0===n?(e._getConvUnreadCount(),e._onBackground()):1===n&&e._onForeground())}))):we.e("".concat(t," setAppShowListener is not a function"))}},{key:"getDeviceBrand",value:function(){var e;if(!dt(this._offlinePushPlugin)&&Je(this._offlinePushPlugin.getDeviceType))return e=(this._offlinePushPlugin.getDeviceType()||{}).deviceType,we.l("".concat(this._n,".getDeviceBrand ok. deviceType:").concat(e)),e}},{key:"_setToken",value:function(){var e="".concat(this._n,"._setToken"),t=this.get(12),n=1,o="",i="",r=(je(this._deviceToken)&&(n=0),this.getUniAppPlatform()),a=this.getDeviceBrand(),s=(r===R.IOS||r===R.IPAD||r===R.MAC?i=this._deviceToken:r===R.ANDROID&&(o=this._deviceToken),new eo("offlinePushSetToken"));r="deviceToken:".concat(i||o,", businessID:").concat(this._businessID,", ")+"deviceBrand:".concat(a,", isWebUniapp:").concat(this._isWebUniapp,", pushMsg:").concat(n,", platform:").concat(r);return s.setMessage("".concat(r)),we.l("".concat(e," ").concat(r)),this.req({P:Fn.SET_TOKEN,data:{tokenID:o,pushMsg:n,sdkAppID:t.getSDKAppID(),businessID:parseInt(this._businessID),deviceBrand:a,deviceToken:i,isWebUniapp:this._isWebUniapp}}).then((function(t){return s.end(),we.l("".concat(e," ok")),t})).catch((function(t){return s.setError(t).end(),we.e("".concat(e," failed. error:"),t),Cn(t)}))}},{key:"_getConvUnreadCount",value:function(){var e=this;this._c2cUnreadCount=0,this._groupUnreadCount=0,this.get(11).getLocalConvList().forEach((function(t){t.type===k.CONV_C2C&&(e._c2cUnreadCount+=t.unreadCount),t.type===k.CONV_GROUP&&(e._groupUnreadCount+=t.unreadCount)}))}},{key:"_onBackground",value:function(){var e=this,t="".concat(this._n,".").concat("_onBackground"),n=new eo("_onBackground");this.req({P:Fn.STAT_BACKGROUND,data:{c2cUnreadCount:this._c2cUnreadCount,groupUnreadCount:this._groupUnreadCount,isWebUniapp:this._isWebUniapp}}).then((function(o){return n.setMessage("c2cUnreadCount: ".concat(e._c2cUnreadCount,", groupUnreadCount: ").concat(e._groupUnreadCount)).end(),we.l("".concat(t," ok")),o})).catch((function(e){n.setError(e).end(),we.e("".concat(t," failed. error:"),e)}))}},{key:"_onForeground",value:function(){var e="".concat(this._n,".").concat("_onForeground"),t=new eo("_onForeground");this.req({P:Fn.STAT_FOREGROUND,data:{isWebUniapp:this._isWebUniapp}}).then((function(n){return t.end(),we.l("".concat(e," ok")),n})).catch((function(n){t.setError(n).end(),we.e("".concat(e," failed. error:"),n)}))}},{key:"getUniAppPlatform",value:function(){var e=uni.getSystemInfoSync().platform,t=this.getDeviceBrand();return"ios"===e?R.IOS:"android"===e?R.ANDROID:1002===t?R.IPAD:1001===t?R.MAC:void 0}},{key:"reset",value:function(){this._deviceToken="",this._businessID=0,this._c2cUnreadCount=0,this._groupUnreadCount=0,this._isWebUniapp=0,we.l("".concat(this._n,".reset"))}}]),Os),ss=(l(Ls,Rn),Na=v(Ls),c(Ls,[{key:"registerPlugin",value:function(e){var t,n,o;J?(t="".concat(this._n,".").concat("registerPlugin"),this._pushPlugin=e["tim-push"],this._getDeviceInfo(),n=(o=e.pushConfig||{}).androidConfig,o=o.iOSConfig,ze(n)&&(this._androidPushConfig=n[this._deviceInfo.packageName]),n=(o||{}).iOSBusinessID,this._iOSBusinessID=n,o=!dt(this._pushPlugin),new eo("registerPlugin").setMessage(this._pluginName).setMoreMessage("isExisted:".concat(o)).end(!0),we.l("".concat(t," ok. pushConfig:").concat(JSON.stringify(e.pushConfig))),o?(this._setAppShowListener(),this._setPushEventReportListener()):we.e("".concat(t," ").concat(this._pluginName," is undefined"))):this.warn("TIMPushInUniapp")}},{key:"init",value:function(){this._isWebUniapp=this.getUniAppPlatform(),this._reportEventCacheList(),this._getDeviceToken(),this.get(27).isFeatureEnabledForStat(Math.pow(2,41))}},{key:"_reportEventCacheList",value:function(){var e=this,n="".concat(this._n,".").concat("_reportEventCacheList");Je(this._pushPlugin.getPushEventCacheList)?(new eo("_reportEventCacheList").end(!0),this._pushPlugin.getPushEventCacheList((function(o){var i=o.code,r=o.data.eventList,a=new eo("getPushEventCacheListRes");if(a.setCode(i),0!==i)a.setMessage("res:".concat(JSON.stringify(o))).end(!0),we.e("".concat(n," failed. error:").concat(JSON.stringify(o)));else{i=r.length<10?"eventList:".concat(JSON.stringify(r)):"eventList.length:".concat(r.length),we.l("".concat(n," ok. ").concat(i)),a.setMessage(i).end(!0);for(var s=t(t({},o.data),{},{eventList:[]});0<r.length;)s.eventList=r.splice(0,40),e._pushReport(s)}}))):we.e("".concat(this._pluginName,".getPushEventCacheList is not a function"))}},{key:"_getDeviceToken",value:function(){var e,t=this,n="".concat(this._n,".").concat("_getDeviceToken");Je(this._pushPlugin.getDeviceToken)?(e="androidPushConfig:".concat(JSON.stringify(this._androidPushConfig)," iOSBusinessID:").concat(this._iOSBusinessID),we.l("".concat(n," start. ").concat(e)),new eo("_getDeviceToken").setMessage("".concat(e)).end(!0),this._pushPlugin.getDeviceToken(this._androidPushConfig,(function(o){var i,r,a,s=o.code,c=o.msg,u=new eo("getDeviceTokenRes");if(u.setCode(s),0===s)return i=(s=o.data).deviceToken,r=s.deviceBrand,a=s.deviceType,s=s.bussinessId,t._deviceToken=i,t._businessID=s||t._iOSBusinessID,e="deviceToken:".concat(i," deviceBrand:").concat(r||a," businessID:").concat(t._businessID),we.l("".concat(n," ok. ").concat(e)),u.setMessage(e).end(!0),void t._setToken();u.setMessage(c).end(!0),we.e("".concat(n," failed. error:").concat(JSON.stringify(o)))}))):we.e("".concat(this._pluginName,".getDeviceToken is not a function"))}},{key:"_getDeviceInfo",value:function(){var e="".concat(this._n,".").concat("_getDeviceInfo");if(Je(this._pushPlugin.getDeviceInfo)){var n=this._pushPlugin.getDeviceInfo(),o=n.code,i=n.data,r=new eo("_getDeviceInfo");if(r.setCode(o),0===o)return this._deviceInfo=t(t({},this._deviceInfo),i),this._deviceInfo.pushVersion||(this._deviceInfo.pushVersion="1.0.1"),o="deviceInfo:".concat(JSON.stringify(this._deviceInfo)),we.l("".concat(e," ok. ").concat(o)),void r.setMessage(o).end(!0);r.setMessage("deviceInfoRes:".concat(JSON.stringify(n))).end(!0),we.e("".concat(e," failed. error:").concat(JSON.stringify(n)))}else we.e("".concat(this._pluginName,".getDeviceInfo is not a function"))}},{key:"canIUseTIMPush",value:function(){return J&&!dt(this._pushPlugin)}},{key:"_setAppShowListener",value:function(){var e=this,t="".concat(this._n,".").concat("_setAppShowListener");Je(this._pushPlugin.setAppShowListener)?(new eo("_setAppShowListener").end(!0),we.l("".concat(t," start")),this._pushPlugin.setAppShowListener((function(n){n=(n||{}).appShow,new eo("setAppShowListenerRes").setMessage("appShow:".concat(n)).end(!0),we.l("".concat(t," ok. appShow:").concat(n)),e._m.isReady()&&(0===n?(e._getConvUnreadCount(),e._onBackground()):1===n&&e._onForeground())}))):we.e("".concat(this._pluginName,".setAppShowListener is not a function"))}},{key:"_setPushEventReportListener",value:function(){var e=this,t="".concat(this._n,".").concat("_setPushEventReportListener");Je(this._pushPlugin.setPushEventReportListener)?(new eo("_setPushEventReportListener").end(!0),this._pushPlugin.setPushEventReportListener((function(n){var o=n.code,i=n.data,r=i.eventList,a=new eo("setPushEventReportListenerRes");if(a.setCode(o),0===o)return o="eventList:".concat(JSON.stringify(r)),we.l("".concat(t," ok. ").concat(o)),a.setMessage(o).end(!0),void(e._m.isReady()&&Xe(r)&&0<r.length&&e._pushReport(i));a.setMessage("res:".concat(JSON.stringify(n))).end(!0),we.e("".concat(t," failed. error:").concat(JSON.stringify(n)))}))):we.e("".concat(this._pluginName,".setPushEventReportListener is not a function"))}},{key:"getDeviceBrand",value:function(){var e;if(!dt(this._pushPlugin)&&Je(this._pushPlugin.getDeviceType))return e=(this._pushPlugin.getDeviceType()||{}).deviceType,we.l("".concat(this._n,".getDeviceBrand ok. deviceType:").concat(e)),e}},{key:"_setToken",value:function(){var e="".concat(this._n,".").concat("_setToken"),n=this.get(12),o=1,i="",r="",a=(je(this._deviceToken)&&(o=0),this.getUniAppPlatform()),s=this.getDeviceBrand(),c=(a=(a===R.IOS||a===R.IPAD||a===R.MAC?r=this._deviceToken:a===R.ANDROID&&(i=this._deviceToken),t({tokenID:i,pushMsg:o,sdkAppID:n.getSDKAppID(),businessID:parseInt(this._businessID),deviceBrand:s,deviceToken:r,isWebUniapp:this._isWebUniapp},this._deviceInfo)),new eo("_setToken"));i="data:".concat(JSON.stringify(a));c.setMessage("".concat(i)),we.l("".concat(e," ").concat(i)),this.req({P:Fn.SET_TOKEN,data:a}).then((function(){c.end(),we.w("".concat(e," ok"))})).catch((function(t){c.setError(t).end(),we.e("".concat(e," failed. error:"),t),Cn(t)}))}},{key:"_getConvUnreadCount",value:function(){var e=this;this._c2cUnreadCount=0,this._groupUnreadCount=0,this.get(11).getLocalConvList().forEach((function(t){t.type===k.CONV_C2C&&(e._c2cUnreadCount+=t.unreadCount),t.type===k.CONV_GROUP&&(e._groupUnreadCount+=t.unreadCount)}))}},{key:"_onBackground",value:function(){var e=this,t="".concat(this._n,".").concat("_onBackground"),n=new eo("_onBackground");this.req({P:Fn.STAT_BACKGROUND,data:{c2cUnreadCount:this._c2cUnreadCount,groupUnreadCount:this._groupUnreadCount,isWebUniapp:this._isWebUniapp}}).then((function(){n.setMessage("c2cUnreadCount:".concat(e._c2cUnreadCount," groupUnreadCount:").concat(e._groupUnreadCount)).end(),we.l("".concat(t," ok"))})).catch((function(e){n.setError(e).end(),we.e("".concat(t," failed. error:"),e)}))}},{key:"_onForeground",value:function(){var e="".concat(this._n,".").concat("_onForeground"),t=new eo("_onForeground");this.req({P:Fn.STAT_FOREGROUND,data:{isWebUniapp:this._isWebUniapp}}).then((function(){t.end(),we.l("".concat(e," ok"))})).catch((function(n){t.setError(n).end(),we.e("".concat(e," failed. error:"),n)}))}},{key:"_pushReport",value:function(e){var t=this,n="".concat(this._n,".").concat("_pushReport"),o=new eo("_pushReport");this.req({P:Fn.PUSH_REPORT,data:{eventList:e.eventList}}).then((function(){o.end(),t._notifyReportSuccess(e)})).catch((function(e){o.setError(e).end(),we.e("".concat(n," failed. error:"),e)}))}},{key:"_notifyReportSuccess",value:function(e){!dt(this._pushPlugin)&&Je(this._pushPlugin.notifyReportSuccess)&&(this._pushPlugin.notifyReportSuccess(e),we.l("".concat(this._n,"._notifyReportSuccess ok")))}},{key:"getUniAppPlatform",value:function(){var e=uni.getSystemInfoSync().platform,t=this.getDeviceBrand();return"ios"===e?R.IOS:"android"===e?R.ANDROID:1002===t?R.IPAD:1001===t?R.MAC:void 0}},{key:"reset",value:function(){this._deviceToken="",this._businessID=0,this._c2cUnreadCount=0,this._groupUnreadCount=0,this._isWebUniapp=0,we.l("".concat(this._n,".reset"))}}]),Ls),cs=(l(As,Rn),wa=v(As),c(As,[{key:"init",value:function(){var e=this.get(18).getPlugin("tim-profanity-filter-plugin");e&&(this._plugin=new e({logger:we,isArray:Xe,isMap:Ke,isDevMode:this.isDevMode()}),this._getLexicon())}},{key:"onCheckTimer",value:function(){this._plugin&&this._canIUseLexicon&&this.isLoggedIn()&&!this._isFetching&&Date.now()>=this._expiredTime&&this._getLexicon()}},{key:"filterMessage",value:function(e,t){var n=!0;if(!this._plugin||!this._canIUseLexicon)return n;if(t&&t.messageControlInfo&&!0===t.messageControlInfo.excludedFromContentModeration)return n;t=e.type;var o=e.conversationType;if(t!==k.MSG_TEXT&&t!==k.MSG_CUSTOM)return n;var i,r="".concat(this._n,".filterMessage");if(we.l("".concat(r)),t===k.MSG_TEXT){if(o===k.CONV_C2C?i="c2c_text_message":o===k.CONV_GROUP&&(i="group_text_message"),!this._isConfigOn(i))return n;var a=this._plugin.filter(e.payload.text),s=a.type;a=a.modifiedText;1===s?n=!1:2===s&&(e.payload.text=a)}else if(t===k.MSG_CUSTOM){if(o===k.CONV_C2C?i="c2c_custom_message":o===k.CONV_GROUP&&(i="group_custom_message"),!this._isConfigOn(i))return n;s=this._plugin.filter(e.payload.data),a=this._plugin.filter(e.payload.description),t=this._plugin.filter(e.payload.extension),1===s.type||1===a.type||1===t.type?n=!1:(2===s.type&&(e.payload.data=s.modifiedText),2===a.type&&(e.payload.description=a.modifiedText),2===t.type&&(e.payload.extension=t.modifiedText))}return we.l("".concat(r," done. isAllowedToSend:").concat(n)),n}},{key:"filterText",value:function(e,t){var n="".concat(this._n,".filterText"),o={isAllowedToSend:!0,modifiedText:e};return this._plugin&&this._canIUseLexicon&&this._isConfigOn(t)?(we.l("".concat(n)),t=this._plugin.filter(e),e=t.type,t=t.modifiedText,1===e?o.isAllowedToSend=!1:2===e&&(o.modifiedText=t),we.l("".concat(n," done. ret:"),o),o):o}},{key:"_getLexicon",value:function(){var e=this,t=new eo("profanityFilter"),n="".concat(this._n,"._getLexicon");this._isFetching=!0,this.req({P:Fn.GET_PROFANITY_LIST,data:{startIndex:this._startIndex,version:this._version}}).then((function(o){o=o.data;var i=o.errorInfo,r=o.filterConfig,a=o.lexicon,s=o.strToken,c=o.completeFlag,u=o.nextStartIndex,l=o.version,d=(o=o.expiredTime,i.errorCode),f=i.errorMessage;return 0!==d?(e._isFetching=!1,we.w("".concat(n," failed. error:"),i),void t.setCode(d).setMessage(f).end()):(e._onFilterConfig(r),e._getToken(s),1===c?(we.l("".concat(n," done. version:").concat(l," expiredTime:").concat(o)),e._version=l,e._canIUseLexicon=!0,e._isFetching=!1,e._expiredTime=Date.now()+1e3*o,void e._plugin.onLexiconCompleted(a)):(e._startIndex=u,e._plugin.onLexiconSliced(a),void e._getLexicon()))})).catch((function(o){t.setError(o).end(),e._isFetching=!1,we.l("".concat(n," failed. error:"),o)}))}},{key:"_onFilterConfig",value:function(e){var t=this;je(e)||(this._filterConfigMap.clear(),Object.keys(e).forEach((function(n){t._filterConfigMap.set(n,e[n])})),we.l("".concat(this._n,"._onFilterConfig. keys:").concat(Array.from(this._filterConfigMap.keys())," values:").concat(Array.from(this._filterConfigMap.values()))))}},{key:"_isConfigOn",value:function(e){return 1===this._filterConfigMap.get(e)}},{key:"_getToken",value:function(e){if(lt(e)){var t=e.length,n="";if(t%2==0)for(var o=0;o<=t-1;o+=2)n=(n+=e[o+1])+e[o];else{for(var i=0;i<t-1;i+=2)n=(n+=e[i+1])+e[i];n+=e[t-1]}this._plugin.onToken(n)}}},{key:"reset",value:function(){we.l("".concat(this._n,".reset")),this._plugin&&(this._plugin.reset(),this._plugin=null),this._filterConfigMap.clear(),this._startIndex=0,this._version=0,this._canIUseLexicon=!1,this._isFetching=!1,this._expiredTime=0}}]),As),us=(c(Ds,[{key:"_onCloudConfig",value:function(){var e=this,t=this._m.get(23).getCloudConfig("rtc_cmd");dt(t)||((t=JSON.parse(t)).forEach((function(t){e._TRTCCommandList.includes(t)||e._TRTCCommandList.push(t)})),this._setTRTCCommandMap())}},{key:"_setTRTCCommandMap",value:function(){for(var e,t=0,n=this._TRTCCommandList.length;t<n;t++)e=this._TRTCCommandList[t].split(".")[0],this._TRTCCommandMap.set(e,1)}},{key:"onRoomCustomDataReceived",value:function(e){this._m.getOEmitInst().emit(E.ROOM_CUSTOM_DATA_RECEIVED,e)}},{key:"sendTRTCCustomData",value:function(e){var t=e.serviceCommand,n=(e=e.data,"".concat(G.NAME.TUIROOM_SVR,".*"));return dt(t)||(n=t),this._isValidServiceCommand(n)?this._trans({servcmd:n,data:e}):Cn({code:Un.INVALID_TRTC_CMD})}},{key:"_trans",value:function(e){we.d("".concat(this._n,"._trans. options:").concat(JSON.stringify(e)));var t=e.servcmd;e=e.data;return this._m.get(20).trans({servcmd:t,data:lt(e)?JSON.parse(e):e})}},{key:"_isValidServiceCommand",value:function(e){return e.endsWith(".*")?this._TRTCCommandList.includes(e):(e=e.split(".")[0],this._TRTCCommandMap.has(e))}},{key:"isTRTCCommand",value:function(e){return e=e.split(".")[0],this._TRTCCommandMap.has(e)}},{key:"reset",value:function(){we.l("".concat(this._n,".reset"))}}]),Ds),ls=(c(ks,[{key:"_init",value:function(){var e,t=this._getStorageModule().getItem(this.TIM_ERROR_ASSISTANCE,!1);if(t){try{e=JSON.parse(t)}catch(e){this._getStorageModule().removeItem(this.TIM_ERROR_ASSISTANCE,!1),we.w("".concat(this._n,"._init error:"),e)}e&&(this._needToUpdate(e)?this._fetch():this._fillMap(e.message))}else this._fetch()}},{key:"_needToUpdate",value:function(e){var t=e.localSavedTime;e=e.localSavedVersion,t=t&&(new Date).getTime()-t>=this.STORAGE_EXPIRES_TIME,e=!e||"3.4.3"!==e;return we.l("".concat(this._n,"._needToUpdate isTimeout:").concat(t," isDifferentVersion:").concat(e)),t||e}},{key:"_fetch",value:function(){var e,t,n,o,i,r;this._m.get(12).isPrivateNetWork()||(e="https://web.sdk.qcloud.com/im/download/error-message/v3/0.0.5/tim-error-message.txt",t="application/x-www-form-urlencoded;charset=UTF-8",n="".concat(this._n,"._fetch ok in"),o=this,ee?ie.request({url:e,method:"GET",timeout:3e3,header:{"content-type":t},dataType:"text",success:function(e){o._fillAndSave(e.data),we.l("".concat(n," mini program"))},fail:function(){}}):(i=new XMLHttpRequest,r=setTimeout((function(){i.abort()}),3e3),i.onreadystatechange=function(){4===i.readyState&&(clearTimeout(r),200!==i.status&&304!==i.status||(we.l("".concat(n," browser")),o._fillAndSave(i.responseText)))},i.open("GET",e,!0),i.setRequestHeader("Content-type",t),i.send()))}},{key:"_fillAndSave",value:function(e){this._fillMap(e),this._getStorageModule().setItem(this.TIM_ERROR_ASSISTANCE,JSON.stringify({message:e,localSavedTime:(new Date).getTime(),localSavedVersion:"3.4.3"}),!0,!1)}},{key:"_getStorageModule",value:function(){return this._m.get(13)}},{key:"_fillMap",value:function(e){this._map.clear();for(var t,n,o=e.split(";\n"),i=o.length,r=new RegExp(/'/g),a=0;a<i;a++)if(n=o[a].indexOf(":"),t=o[a].slice(0,n),n=o[a].slice(n+1,o[a].length),!t.startsWith("//")){if(dt(n))continue;this._map.set(t,n.replace(r,""))}}},{key:"get",value:function(e){var t=e.isIntl,n=e.key,o=e.replacement1;e=e.replacement2,t="".concat(n,t?"_en":"_cn"),!this._map.has(t)&&this._map.has(n)&&(t=n),n="";return this._map.has(t)&&(n=this._map.get(t),dt(o)||(n=n.replace("$replacement1",o)),dt(e)||(n=n.replace("$replacement2",e))),n}},{key:"reset",value:function(){we.l("".concat(this._n,".reset"))}}]),ks),ds=(c(Es,[{key:"onNewMessageList",value:function(e){var t=this;e.forEach((function(e){var n=t.getPayloadData(e);n&&t._handleActionType(n,e)}))}},{key:"onMessageModified",value:function(e){var t=this;e.forEach((function(e){var n=t.getPayloadData(e);n&&t._onInvitationModified(n,e)}))}},{key:"getPayloadData",value:function(e){var t="".concat(this._n,".getPayloadData");e=e.payload.data;try{return JSON.parse(e)}catch(c){return we.e("".concat(t," JSON parse error. signalingData:").concat(e)),null}}},{key:"_handleActionType",value:function(e,t){switch(e.actionType){case D.ACTION_TYPE_INVITE:this._onNewInvitationReceived(e,t);break;case D.ACTION_TYPE_REJECT_INVITE:this._onInviteeRejected(e);break;case D.ACTION_TYPE_ACCEPT_INVITE:this._onInviteeAccepted(e);break;case D.ACTION_TYPE_CANCEL_INVITE:this._onInvitationCancelled(e);break;case D.ACTION_TYPE_INVITE_TIMEOUT:this._onInvitationTimeout(e)}}},{key:"_genBaseEmitData",value:function(e){return{inviteID:e.inviteID,inviter:e.inviter,groupID:e.groupID,data:e.data||""}}},{key:"_onNewInvitationReceived",value:function(e,n){var o="".concat(this._n,"._onNewInvitationReceived"),i=e.inviteID,r=e.inviteeList,a=e.groupID,s=e.inviter,c=this._sigM.getMyUserID(),u=r.includes(c),l=e.timeout,d=(Te().getTime()-1e3*n.time)/1e3;0<l&&0<d&&d<l&&(l-=d),o="".concat(o," myselfIncluded:").concat(u," groupID:").concat(a," signalObj:").concat(JSON.stringify(e));we.l("".concat(o," timeout:").concat(l,"s delta:").concat(d,"s")),(a&&u||!a)&&((o=this._sigM.getInviteInfo(i))&&o===e||(o||this._sigM.setInviteInfo(i,t(t({},e),{},{message:n})),this._sigM.emitEvent(D.NEW_INVITATION_RECEIVED,t(t({},this._genBaseEmitData(e)),{},{inviteeList:r})),s!==c&&this._sigM.startTimer(t(t({},e),{},{timeout:l}))))}},{key:"_onInviteeRejected",value:function(e){var n="".concat(this._n,"._onInviteeRejected"),o=e.inviteID,i=e.inviter,r=e.groupID,a=this._sigM.hasInviteInfo(o);we.l("".concat(n," inviteID:").concat(o," hasInviteID:").concat(a," inviter:").concat(i," groupID:").concat(r)),a&&(this._sigM.updateInviteInfo(e),this._sigM.emitEvent(D.INVITEE_REJECTED,t(t({},this._genBaseEmitData(e)),{},{invitee:e.inviteeList[0]})))}},{key:"_onInviteeAccepted",value:function(e){var n="".concat(this._n,"._onInviteeAccepted"),o=e.inviteID,i=e.inviter,r=e.groupID,a=this._sigM.hasInviteInfo(o);we.l("".concat(n," inviteID:").concat(o," hasInviteID:").concat(a," inviter:").concat(i," groupID:").concat(r)),a&&(this._sigM.updateInviteInfo(e),this._sigM.emitEvent(D.INVITEE_ACCEPTED,t(t({},this._genBaseEmitData(e)),{},{invitee:e.inviteeList[0]})))}},{key:"_onInvitationCancelled",value:function(e){var t="".concat(this._n,"._onInvitationCancelled"),n=e.inviteID,o=e.inviter,i=e.groupID,r=this._sigM.hasInviteInfo(n);we.l("".concat(t," inviteID:").concat(n," hasInviteID:").concat(r," inviter:").concat(o," groupID:").concat(i)),r&&(this._sigM.deleteInviteInfo(n),this._sigM.emitEvent(D.INVITATION_CANCELLED,this._genBaseEmitData(e)))}},{key:"_onInvitationTimeout",value:function(e){var n="".concat(this._n,"._onInvitationTimeout"),o=e.inviteID,i=e.inviter,r=e.groupID,a=e.inviteeList,s=this._sigM.hasInviteInfo(o);we.l("".concat(n," inviteID:").concat(o," hasInviteID:").concat(s," inviter:").concat(i," groupID:").concat(r,"  data:").concat(e.data)),s&&(this._sigM.updateInviteInfo(e),this._sigM.emitEvent(D.INVITATION_TIMEOUT,t(t({},this._genBaseEmitData(e)),{},{inviteeList:a,isSelfTimeout:!1})))}},{key:"_onInvitationModified",value:function(e,n){var o="".concat(this._n,"._onInvitationModified"),i=e.inviteID,r=e.data;we.l("".concat(o," inviteID:").concat(i," data:").concat(r)),this._sigM.setInviteInfo(i,t(t({},e),{},{message:n})),this._sigM.emitEvent(D.INVITATION_MODIFIED,{inviteID:i,data:r})}}]),Es),fs=(c(Ss,[{key:"generateInviteID",value:function(){var e,t=(t=La)((e=Aa)(32),8)+"-"+t(e(16),4)+"-"+t(16384|e(12),4)+"-"+t(32768|e(14),4)+"-"+t(e(48),12);return we.l("".concat(this._n,".generateInviteID inviteID:").concat(t)),t}},{key:"createInviteInfo",value:function(e){var n=this.generateInviteID(),o=(e=this.createInviteCustomData(t(t({},e),{},{inviteID:n})),e.groupID),i=e.inviteeList;o=o||i[0];return{customData:e,message:this._sigM.createSignaling(e,o),inviteID:n}}},{key:"_genBaseCustomData",value:function(e){var t=e.data,n=e.inviteID;e=e.groupID;return{businessID:1,timeout:0,data:void 0===t?"":t,inviteID:void 0===n?"":n,groupID:void 0===e?"":e}}},{key:"createInviteCustomData",value:function(e){var n=e.userID,o=e.timeout,i=(o=void 0===o?0:o,e.groupID),r=(i=void 0===i?"":i,this._sigM.getMyUserID());r=t(t({},this._genBaseCustomData(e)),{},{actionType:D.ACTION_TYPE_INVITE,inviter:r,inviteeList:i?e.inviteeList:[n],timeout:o});return we.l("".concat(this._n,".createInviteCustomData customData:"),r),r}},{key:"createCancelCustomData",value:function(e){var n,o="".concat(this._n,".createCancelCustomData"),i=e.inviteID,r=this._sigM.getMyUserID(),a=(i=this._sigM.getInviteInfo(i),i.inviteeList),s=i.groupID;i=i.inviter;return i===r?n=t(t({},this._genBaseCustomData(e)),{},{actionType:D.ACTION_TYPE_CANCEL_INVITE,groupID:s,inviter:r,inviteeList:a}):we.e("".concat(o," unmatched inviter:").concat(i," and my userID:").concat(r)),we.l("".concat(o," customData:"),n),n}},{key:"createAcceptCustomData",value:function(e){var n,o="".concat(this._n,".createAcceptCustomData"),i=e.inviteID,r=this._sigM.getMyUserID(),a=this._sigM.getInviteInfo(i),s=a.inviter,c=a.groupID;return a.inviteeList.includes(r)?n=t(t({},this._genBaseCustomData(e)),{},{actionType:D.ACTION_TYPE_ACCEPT_INVITE,groupID:c,inviter:s,inviteeList:[r]}):we.e("".concat(o," userID:").concat(r," not in inviteeList. inviteID:").concat(i," groupID:").concat(c)),we.l("".concat(o," customData:"),n),n}},{key:"createRejectCustomData",value:function(e){var n,o="".concat(this._n,".createRejectCustomData"),i=e.inviteID,r=this._sigM.getMyUserID(),a=this._sigM.getInviteInfo(i),s=a.inviter,c=a.groupID;return a.inviteeList.includes(r)?n=t(t({},this._genBaseCustomData(e)),{},{actionType:D.ACTION_TYPE_REJECT_INVITE,groupID:c,inviter:s,inviteeList:[r]}):we.e("".concat(o," userID:").concat(r," not in inviteeList. inviteID:").concat(i," groupID:").concat(c)),we.l("".concat(o," customData:"),n),n}},{key:"createTimeoutCustomData",value:function(e){var n="".concat(this._n,".createTimeoutCustomData"),o=e.inviteeList,i=e.inviter,r=e.isInviter,a=(r=void 0!==r&&r,this._sigM.getMyUserID());e=t(t({},this._genBaseCustomData(e)),{},{actionType:D.ACTION_TYPE_INVITE_TIMEOUT,inviter:i,inviteeList:r?o:[a]});return we.l("".concat(n," customData:"),e),e}}]),Ss),ps=(c(Ts,[{key:"setCloudConfig",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:20,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:300;this.COUNT=e,this.EXPIRED_TIME=t,we.l("".concat(this._n,".setCloudConfig count:").concat(e,", time:").concat(t))}},{key:"getHistorySignaling",value:function(){var e=this,t=this._sigM.get(11).getLocalConvList();je(t)||(this._getC2CSignalingList(),t=this._getValidGroupConvList(t),this._getGroupSignalingList(t).then((function(t){e._handleSignalingList(t)})))}},{key:"_getC2CSignalingList",value:function(){var e=this._sigM.get(6).getMessageListFromUnreadDB();e=this._sigM.filterMessageList(e);this._getRelatedToMeMap(e)}},{key:"_getGroupSignalingList",value:function(e){var t=this;e=this._createPromiseList(e);return 0===e.length?Promise.resolve(this._sortSignaling(this._relatedToMeMap)):this._concurrentGetMessageList(e).then((function(e){var n=new Map;return e.forEach((function(e){e=e.list,e=t._getRelatedToMeMap(e),n=new Map([].concat(y(n),y(e)))})),t._sortSignaling(n)}))}},{key:"_handleSignalingList",value:function(e){je(e)||this._sigM.onNewMessageList(e)}},{key:"_getValidGroupConvList",value:function(e){for(var t=[],n=0,o=e.length;n<o;n++){var i=e[n],r=i.type,a=i.unreadCount;i=i.lastMessage,r=r===k.CONV_GROUP,i=this._isNotExpired(i);r&&a&&i&&t.push(e[n])}return t}},{key:"_isNotExpired",value:function(e){return!(!e||!e.lastTime)&&e.lastTime>Ee()-this.EXPIRED_TIME}},{key:"_createPromiseList",value:function(e){for(var t=[],n=0;n<e.length;n++){var o=e[n],i=o.conversationID;o=o.unreadCount,o=o<this.COUNT?o:this.COUNT,o=(this._map.set(i,{msgCount:o,list:[]}),this._sigM.get(11).getMessageList({conversationID:i}));t.push(o)}return t}},{key:"_concurrentGetMessageList",value:function(e){var t=this,n=[];return Promise.all(e).then((function(e){for(var o=0;o<e.length;o++){var i=e[o],r=i.code;i=i.data;0===r&&0!==i.messageList.length&&(t._handleMessageList(i.messageList),(r=t._relayGetMessageList(i))&&n.push(r))}return 0<n.length?t._concurrentGetMessageList(n):t._map}))}},{key:"_relayGetMessageList",value:function(e){var t=e.messageList,n=e.nextReqMessageID;e=e.isCompleted;if(0===t.length)return null;t=t[0].conversationID;var o=this._map.get(t).msgCount;return 0===o||e?null:this._sigM.get(11).getMessageList({conversationID:t,nextReqMessageID:n,count:o})}},{key:"_handleMessageList",value:function(e){var t=e.length,n=e[0].conversationID,o=this._map.get(n),i=o.msgCount;o=o.list;this._map.set(n,{msgCount:0<i-t?i-t:0,list:o.concat(this._sigM.filterMessageList(e))})}},{key:"_getRelatedToMeMap",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];this._saveRelatedToMe(n)}return this._relatedToMeMap}},{key:"_saveRelatedToMe",value:function(e){var t=this._sigM.getPayloadData(e)||{},n=t.actionType,o=(t=t.inviteID,void 0===t?"":t);switch(void 0===n?"":n){case D.ACTION_TYPE_INVITE:this._setHistoryInvite(e);break;case D.ACTION_TYPE_REJECT_INVITE:case D.ACTION_TYPE_ACCEPT_INVITE:this._updateHistoryInvite(e);break;case D.ACTION_TYPE_CANCEL_INVITE:this._delHistoryInvite(o);break;case D.ACTION_TYPE_INVITE_TIMEOUT:this._updateHistoryInvite(e)}}},{key:"_setHistoryInvite",value:function(e){var n=this._sigM.getPayloadData(e)||{},o=n.inviteID,i=(o=void 0===o?"":o,n.inviteeList),r=(i=void 0===i?[]:i,n.timeout),a=(r=void 0===r?0:r,this._sigM.getMyUserID());i.includes(a)&&(i=Ee()-e.time,0<r&&r<i&&0!==r||this._relatedToMeMap.set(o,t(t({},n),{},{messageList:[e]})))}},{key:"_delHistoryInvite",value:function(e){this._relatedToMeMap.has(e)&&this._relatedToMeMap.delete(e)}},{key:"_updateHistoryInvite",value:function(e){var t=this._sigM.getPayloadData(e)||{},n=t.inviteID,o=(n=void 0===n?"":n,t=t.inviteeList,void 0===t?[]:t);if(this._relatedToMeMap.has(n)){t=this._relatedToMeMap.get(n);for(var i=t.inviteeList,r=(t=t.messageList,0);r<o.length;r++){var a=o[r];i.includes(a)&&i.splice(i.indexOf(a),1)}0===i.length?this._delHistoryInvite(n):t.push(e)}else this._delHistoryInvite(n)}},{key:"_sortSignaling",value:function(e){var t=[];return e.forEach((function(e){t=[].concat(y(t),y(e.messageList))})),t.sort((function(e,t){return e.time-t.time}))}},{key:"reset",value:function(){this._map.clear(),this._relatedToMeMap.clear()}}]),Ts),hs=c((function e(t,n){r(this,e),this.businessID=t.businessID||1,this.inviteID=t.inviteID,this.groupID=t.groupID||"",this.inviter=t.inviter||"",this.inviteeList=t.inviteeList||[],this.data=t.data||"",this.actionType=t.actionType||D.ACTION_TYPE_INVITE,this.timeout=t.timeout||0})),gs=["message"],_s=["message"],vs=(l(bs,Rn),Ra=v(bs),c(bs,[{key:"onC2CUnreadHandleCompleted",value:function(){this._isC2CUnreadHandleCompleted=!0,this._isCloudConfigCompleted&&this._isConvSyncCompleted&&!this._isSyncCompleted&&this.onReady()}},{key:"onConvSyncCompleted",value:function(){this._isConvSyncCompleted=!0,this._isC2CUnreadHandleCompleted&&this._isCloudConfigCompleted&&!this._isSyncCompleted&&this.onReady()}},{key:"onCloudConfig",value:function(){this._isCloudConfigCompleted=!0;var e=this.getCloudConfig("history_s_count"),t=this.getCloudConfig("history_s_time");dt(e)||(e=Number(e)),dt(t)||(t=Number(t)),this._historySignalingHandler.setCloudConfig(e,t),this._isC2CUnreadHandleCompleted&&this._isConvSyncCompleted&&!this._isSyncCompleted&&this.onReady()}},{key:"_isListenerExisted",value:function(){return-1<this._m.getOEmitInst().eventNames().indexOf(D.NEW_INVITATION_RECEIVED)}},{key:"onReady",value:function(){this._isSyncCompleted=!0;var e=this._isListenerExisted();we.l("".concat(this._n,".onReady. isListenerExisted: ").concat(e)),e&&this._historySignalingHandler.getHistorySignaling()}},{key:"onNewMessageList",value:function(e){if(e=this.filterMessageList(e),0<e.length)return this._remoteSignalingHandler.onNewMessageList(e)}},{key:"onMessageModified",value:function(e){if(e=this.filterMessageList(e),0<e.length)return this._remoteSignalingHandler.onMessageModified(e)}},{key:"hasInviteInfo",value:function(e){return this._inviteInfoMap.has(e)}},{key:"getInviteInfo",value:function(e){return this._inviteInfoMap.get(e)}},{key:"setInviteInfo",value:function(e,n){var o=n.message;n=g(n,gs);we.l("".concat(this._n,".setInviteInfo inviteID:").concat(e," data:"),n),this._inviteInfoMap.set(e,t(t({},n),{},{message:o}))}},{key:"deleteInviteInfo",value:function(e){this.hasInviteInfo(e)&&(we.l("".concat(this._n,".deleteInviteInfo inviteID:").concat(e,".")),this._inviteInfoMap.delete(e))}},{key:"updateInviteInfo",value:function(e){var t="".concat(this._n,".updateInviteInfo"),n=e.inviteID,o=e.inviter,i=e.inviteeList;e=e.groupID;we.l("".concat(t," inviteID:").concat(n," inviter:").concat(o," groupID:").concat(e)),e&&this.hasInviteInfo(n)?(o=i[0],(e=this.getInviteInfo(n).inviteeList).includes(o)&&(e.splice(e.indexOf(o),1),we.l("".concat(t," remove ").concat(o,". localInviteeList.length:").concat(e.length))),0===e.length&&this.deleteInviteInfo(n)):this.deleteInviteInfo(n)}},{key:"canIUseSignaling",value:function(){return this._canIUseSignaling}},{key:"emitEvent",value:function(e,t){this.emitOEvt(e,t)}},{key:"addSignalingListener",value:function(e,t,n){this._canIUseSignaling||(this._canIUseSignaling=!0),this._m.getOEmitInst().on(e,t,n)}},{key:"removeSignalingListener",value:function(e,t,n){this._m.getOEmitInst().off(e,t,n),this._isListenerExisted()||(this._canIUseSignaling=!1)}},{key:"invite",value:function(e){var n=this,o="".concat(this._n,".").concat("invite"),i=this._localSignalingHandler.createInviteInfo(e),r=i.message,a=i.customData,s=i.inviteID;return we.l("".concat(o," options:").concat(JSON.stringify(e)," inviteID:").concat(s)),this.sendSignaling(r,e).then((function(e){return e&&0===e.code?(n.setInviteInfo(s,t(t({},a),{},{message:r})),n.startTimer(t(t({},a),{},{inviteID:s})),t(t({},e),{},{inviteID:s})):e})).catch((function(e){return Cn(e)}))}},{key:"inviteSync",value:function(e,n,o){var i=this,r="".concat(this._n,".").concat("inviteSync"),a=this._localSignalingHandler.createInviteInfo(e),s=a.message,c=a.customData,u=a.inviteID;return we.l("".concat(r," options:").concat(JSON.stringify(e)," inviteID:").concat(u)),this.sendSignaling(s,e).then((function(e){if(e&&0===e.code)return i.setInviteInfo(u,t(t({},c),{},{message:s})),i.startTimer(t(t({},c),{},{inviteID:u})),n&&n({inviteID:u}),{inviteID:u};o&&o(0===e.code,e.message||"")})).catch((function(e){return o&&o(e.code,e.message),Cn(e)})),u}},{key:"_handleImResponse",value:function(e,t,n){t&&0===t.code&&(this._isHandling=!1,n?this.deleteInviteInfo(e.inviteID):this.updateInviteInfo(e))}},{key:"cancel",value:function(e){var n=this,o="".concat(this._n,".").concat("cancel");if(we.l("".concat(o," options:").concat(JSON.stringify(e))),!this.hasInviteInfo(e.inviteID)||this._isHandling)return Cn({code:Un.INVALID_CANCEL_MESSAGE});this._isHandling=!0;var i=this._localSignalingHandler.createCancelCustomData(e);if(!i)return this._isHandling=!1,Cn({code:Un.SIGNALING_NO_PERMISSION});o=i.groupID;var r=i.inviteeList;o=o||r[0],r=this.createSignaling(i,o);return this.sendSignaling(r,e).then((function(o){return n._handleImResponse(i,o,!0),0===o.code?t(t({},o),{},{inviteID:e.inviteID}):o})).catch((function(e){return Cn(e)}))}},{key:"accept",value:function(e){var n=this,o="".concat(this._n,".").concat("accept");if(we.l("".concat(o," options:").concat(JSON.stringify(e))),!this.hasInviteInfo(e.inviteID)||this._isHandling)return Cn({code:Un.SIGNALING_INVALID_INVITE_ID});this._isHandling=!0;var i=this._localSignalingHandler.createAcceptCustomData(e);return i?(o=this.createSignaling(i),this.sendSignaling(o,e).then((function(o){return n._handleImResponse(i,o),0===o.code?t(t({},o),{},{inviteID:e.inviteID}):o})).catch((function(e){return Cn(e)}))):(this._isHandling=!1,Cn({code:Un.SIGNALING_NO_PERMISSION}))}},{key:"reject",value:function(e){var n=this,o="".concat(this._n,".").concat("reject");if(we.l("".concat(o," options:").concat(JSON.stringify(e))),!this.hasInviteInfo(e.inviteID)||this._isHandling)return Cn({code:Un.SIGNALING_INVALID_INVITE_ID});this._isHandling=!0;var i=this._localSignalingHandler.createRejectCustomData(e);return i?(o=this.createSignaling(i),this.sendSignaling(o,e).then((function(o){return n._handleImResponse(i,o,!0),0===o.code?t(t({},o),{},{inviteID:e.inviteID}):o})).catch((function(e){return Cn(e)}))):(this._isHandling=!1,Cn({code:Un.SIGNALING_NO_PERMISSION}))}},{key:"getSignalingInfo",value:function(e){var t="".concat(this._n,".getSignalingInfo"),n=e.ID,o=e.from,i=e.to,r=this._filterSignaling(e),a=null;r&&(e=this.getPayloadData(e),a=new hs(e)),e=r?"actionType:".concat(a.actionType):"";return we.l("".concat(t," messageID:").concat(n," from:").concat(o," to:").concat(i," ")+"".concat(e," isSignaling:").concat(r)),a}},{key:"modifyInvitation",value:function(e){var n=this,o=e.inviteID,i=e.data;if(!this.hasInviteInfo(e.inviteID)||this._isHandling)return Cn({code:Un.SIGNALING_INVALID_INVITE_ID});this._isHandling=!0;e=this.getInviteInfo(o);var r=e.message,a=g(e,_s),s=r.payload.data;return a.data=i,r.payload.data=JSON.stringify(a),this.get(2).modifyRemoteMessage(r).then((function(e){return n.setInviteInfo(o,t(t({},a),{},{message:r})),n._isHandling=!1,e})).catch((function(e){return n._isHandling=!1,r.payload.data=s,Cn(e)}))}},{key:"_genMsgCtrlInfo",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=(t=void 0===t?"":t,e.onlineUserOnly),o=e.inviteID,i=(o=void 0===o?"":o,e.offlinePushInfo),r=(e=e.actionType,{_onlineOnlyFlag:!1});o={onlineUserOnly:(r=o&&this.getInviteInfo(o)?this.getInviteInfo(o).message:r)._onlineOnlyFlag||n||!1,offlinePushInfo:i,messageControlInfo:{excludedFromContentModeration:!0,excludedFromUnreadCount:!1,excludedFromLastMessage:!1}};return e===D.ACTION_TYPE_INVITE_TIMEOUT?(r=!!t.match(/excludeTimeoutSignalingFromHistoryMessage/),o.messageControlInfo.excludedFromUnreadCount=r,o.messageControlInfo.excludedFromLastMessage=r,o):(n=!!t.match(/excludeFromHistoryMessage/),i=!!t.match(/excludeOriginalSignalingFromHistoryMessage/),o.messageControlInfo.excludedFromUnreadCount=n||i,o.messageControlInfo.excludedFromLastMessage=n||i,o)}},{key:"sendSignaling",value:function(e,t){var n=this;return this.get(2).sendMessageInstance(e,this._genMsgCtrlInfo(t)).catch((function(e){return n._isHandling=!1,Cn(e)}))}},{key:"filterMessageList",value:function(e){var t=this;return e.filter((function(e){return t._filterSignaling(e)}))}},{key:"getPayloadData",value:function(e){return this._remoteSignalingHandler.getPayloadData(e)}},{key:"createSignaling",value:function(e,t){var n=e.groupID,o=e.inviter;t={to:t||n||o,conversationType:n?k.CONV_GROUP:k.CONV_C2C,priority:k.MSG_PRIORITY_HIGH,payload:{data:JSON.stringify(e)}},o=this.get(2).createCustomMessage(t);return we.l("".concat(this._n,".createSignaling. message:"),o),o}},{key:"_filterSignaling",value:function(e){var t,n,o=!1;return e.type&&e.type===k.MSG_CUSTOM&&(t=e.cloudCustomData,e=void 0===(e=e.payload.data)?"":e,t=(void 0===t?"":t).match(/"type":"tsignaling"/),n=e.match(/inviteID/),e=e.match(/actionType/),o=t||n&&e),!!o}},{key:"startTimer",value:function(e){var t,n,o,i=this,r="".concat(this._n,".startTimer"),a=e.timeout,s=e.inviteID,c=e.inviter,u=e.groupID,l=c===this.getMyUserID();we.l("".concat(r," timeout:").concat(a," isInviter:").concat(l," groupID:").concat(u)),a<=0||(t=l?a+5:a,n=1,o=setInterval((function(){var a=i._hasLocalInviteInfo(e,l);n<t&&a?++n:(a&&i._sendTimeoutNotice(s,l),we.l("".concat(r," end.")),clearInterval(o))}),1e3))}},{key:"_hasLocalInviteInfo",value:function(e,t){var n=e.inviteID;e=e.groupID;if(!this.hasInviteInfo(n))return!1;var o="".concat(this._n,"._hasLocalInviteInfo"),i=this.getInviteInfo(n).inviteeList;return we.l("".concat(o," inviteID:").concat(n," inviteeList:").concat(i," groupID:").concat(e)),!e||(t?0<i.length:0<i.length&&i.includes(this.getMyUserID()))}},{key:"_getReceiver",value:function(e,t){var n=t.groupID,o=t.inviteeList;t=t.inviter;return e?n||o[0]:n||t}},{key:"_sendTimeoutNotice",value:function(e,n){var o=this,i=this.getInviteInfo(e),r=this._getReceiver(n,i),a=(we.l("".concat(this._n,"._sendTimeoutNotice inviteID:").concat(e," to:").concat(r," isInviter:").concat(n)),this._localSignalingHandler.createTimeoutCustomData(t(t({},i),{},{isInviter:n}))),s=this.createSignaling(a,r);return this.sendSignaling(s,a).then((function(t){var i,r,c;t&&0===t.code&&(t=a.data,i=a.groupID,r=a.inviteeList,c=a.inviter,o.emitEvent(D.INVITATION_TIMEOUT,{data:t,groupID:i,inviteID:e,inviteeList:r,inviter:c,isSelfTimeout:!0,message:s}),n?o.deleteInviteInfo(e):o.updateInviteInfo(a))}))}},{key:"reset",value:function(){we.l("".concat(this._n,".reset")),this._inviteInfoMap.clear(),this._canIUseSignaling=!1,this._isHandling=!1,this._historySignalingHandler.reset(),this._isC2CUnreadHandleCompleted=!1,this._isConvSyncCompleted=!1,this._isSyncCompleted=!1,this._isCloudConfigCompleted=!1}}]),bs),ms=["followTypeList"],ys={NONE:0,FOLLOWERS:1,FOLLOWING:2,MUTUAL:3},Ms=(l(Cs,Rn),Oa=v(Cs),c(Cs,[{key:"_onCloudConfig",value:function(){var e=this.getCloudConfig("follow_req_count");dt(e)||(e=Number(e),this.DEFAULT_COUNT=e>this.MAX_COUNT?this.MAX_COUNT:e,this._clearFollowList())}},{key:"clearCacheOnReconnected",value:function(){this._clearFollowList(),this._followType.clear()}},{key:"onFollowInfoNotify",value:function(e){e=e.dataList||{};var t=e.followAddList,n=(t=void 0===t?[]:t,e.followDeleteList),o=(n=void 0===n?[]:n,e=e.pushType,this._initFollowInfo());1===e?this._handleFollowAddList({followAddList:t,followInfo:o}):this._handleFollowDeleteList({followDeleteList:n,followInfo:o}),this._emitEvent(o),we.l("".concat(this._n,".onFollowInfoNotify pushType:").concat(e," followAddList:").concat(t.length," followDeleteList:").concat(n.length))}},{key:"_initFollowInfo",value:function(){var e={};return Object.values(ys).forEach((function(t){t!==ys.NONE&&(e[t]={userInfoList:[],isAdd:!1})})),e}},{key:"_handleFollowAddList",value:function(e){var t=this,n=e.followAddList,o=e.followInfo;n.forEach((function(e){var n=e.followTypeList,i=(n=void 0===n?[]:n,g(e,ms));n.forEach((function(e){o[e].userInfoList.push(i),o[e].isAdd=!0})),t._setFollowType(e.userID,e.followType)}))}},{key:"_handleFollowDeleteList",value:function(e){var t=this,n=e.followDeleteList,o=e.followInfo;n.forEach((function(e){var n=e.followTypeList,i=(n=void 0===n?[]:n,e.userID);n.forEach((function(e){o[e].userInfoList.push(i),o[e].isAdd=!1})),t._setFollowType(e.userID,e.followType)}))}},{key:"_emitEvent",value:function(e){var t=this;Object.keys(e).forEach((function(n){n=Number(n);var o=e[n];0<o.userInfoList.length&&(n===ys.FOLLOWERS&&(t._clearFollowList(ys.FOLLOWERS),t.emitOEvt(E.MY_FOLLOWERS_LIST_UPDATED,o)),n===ys.FOLLOWING&&(t._clearFollowList(ys.FOLLOWING),t.emitOEvt(E.MY_FOLLOWING_LIST_UPDATED,o)),n===ys.MUTUAL&&(t._clearFollowList(ys.MUTUAL),t.emitOEvt(E.MUTUAL_FOLLOWERS_LIST_UPDATED,o)))}))}},{key:"followUser",value:function(e){if(!this.canIUse(U.FOLLOW))return this.noUse("followUser");var t="".concat(this._n,".").concat("followUser"),n="userIDList:".concat(e.length),o=new eo("followUser");return o.setMessage(n),we.l("".concat(t," ").concat(n)),this.req({P:Fn.FOLLOW,data:{fromAccount:this.getMyUserID(),userIDList:e.map((function(e){return{userID:e}}))}}).then((function(e){return o.end(),we.l("".concat(t," ok.")),Mn(e.data.resultList)})).catch((function(e){return o.setError(e).end(),we.e("".concat(t," failed. error:"),e),Cn(e)}))}},{key:"unfollowUser",value:function(e){if(!this.canIUse(U.FOLLOW))return this.noUse("unfollowUser");var t="".concat(this._n,".").concat("unfollowUser"),n="userIDList:".concat(e.length),o=new eo("unfollowUser");return o.setMessage(n),we.l("".concat(t," ").concat(n)),this.req({P:Fn.UNFOLLOW,data:{fromAccount:this.getMyUserID(),userIDList:e}}).then((function(e){return o.end(),we.l("".concat(t," ok.")),Mn(e.data.resultList)})).catch((function(e){return o.setError(e).end(),we.e("".concat(t," failed. error:"),e),Cn(e)}))}},{key:"getMyFollowersList",value:function(){var e=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",o="getMyFollowersList";if(!this.canIUse(U.FOLLOW))return this.noUse(o);var i=n||this.FIRST_PAGE_INDEX;if(this._myFollowersList.has(i)){var r=this._myFollowersList.get(i),a=r.resultList,s=r.nextCursor;r=r.lastUpdateTime;if(Date.now()-r<this.MAX_CATCH_TIME&&0<a.length)return we.l("".concat(this._n,".").concat(o," nextCursor:").concat(n," from local.")),In({resultList:a,nextCursor:s})}return this._getFollowList(n,ys.FOLLOWERS).then((function(r){return e._myFollowersList.set(i,t(t({},r),{},{lastUpdateTime:Date.now()})),we.l("".concat(e._n,".").concat(o," nextCursor:").concat(n," from remote.")),Mn(r)}))}},{key:"getMyFollowingList",value:function(){var e=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",o="getMyFollowingList";if(!this.canIUse(U.FOLLOW))return this.noUse(o);var i=n||this.FIRST_PAGE_INDEX;if(this._myFollowingList.has(i)){var r=this._myFollowingList.get(i),a=r.resultList,s=r.nextCursor;r=r.lastUpdateTime;if(Date.now()-r<this.MAX_CATCH_TIME&&0<a.length)return we.l("".concat(this._n,".").concat(o," nextCursor:").concat(n," from local.")),In({resultList:a,nextCursor:s})}return this._getFollowList(n,ys.FOLLOWING).then((function(r){return e._myFollowingList.set(i,t(t({},r),{},{lastUpdateTime:Date.now()})),we.l("".concat(e._n,".").concat(o," nextCursor:").concat(n," from remote.")),Mn(r)}))}},{key:"getMutualFollowersList",value:function(){var e=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",o="getMutualFollowersList";if(!this.canIUse(U.FOLLOW))return this.noUse(o);var i=n||this.FIRST_PAGE_INDEX;if(this._myMutualFollowersList.has(i)){var r=this._myMutualFollowersList.get(i),a=r.resultList,s=r.nextCursor;r=r.lastUpdateTime;if(Date.now()-r<this.MAX_CATCH_TIME&&0<a.length)return we.l("".concat(this._n,".").concat(o," nextCursor:").concat(n," from local.")),In({resultList:a,nextCursor:s})}return this._getFollowList(n,ys.MUTUAL).then((function(r){return e._myMutualFollowersList.set(i,t(t({},r),{},{lastUpdateTime:Date.now()})),we.l("".concat(e._n,".").concat(o," nextCursor:").concat(n," from remote.")),Mn(r)}))}},{key:"_getFollowList",value:function(e,n){var o=this,i=new eo("_getFollowList");return i.setMessage("nextCursor:".concat(e," type:").concat(n)),this.req({P:Fn.GET_FOLLOW,data:{fromAccount:this.getMyUserID(),count:this.DEFAULT_COUNT,nextCursor:e,type:n}}).then((function(e){i.end();e=e.data;var n=e.resultList,r=(n=void 0===n?[]:n,e=e.nextCursor,e=void 0===e?"":e,[]);return n.forEach((function(e){var n=e.userID,i=e.followTime;e=e.profileList;r.push(t({userID:n,followTime:i},o._handleProfileItem(void 0===e?[]:e)))})),{resultList:r,nextCursor:e}})).catch((function(e){return i.setError(e).end(),we.e("".concat(o._n,"._getFollowList failed. error:"),e),Cn(e)}))}},{key:"_handleProfileItem",value:function(e){var t={};return e.forEach((function(e){switch(e.tag){case Pe.NICK:t.nick=e.value;break;case Pe.GENDER:t.gender=e.value;break;case Pe.BIRTHDAY:t.birthday=e.value;break;case Pe.LOCATION:t.location=e.value;break;case Pe.SELFSIGNATURE:t.selfSignature=e.value;break;case Pe.ALLOWTYPE:t.allowType=e.value;break;case Pe.LANGUAGE:t.language=e.value;break;case Pe.AVATAR:t.avatar=e.value;break;case Pe.MESSAGESETTINGS:t.messageSettings=e.value;break;case Pe.ADMINFORBIDTYPE:t.adminForbidType=e.value;break;case Pe.LEVEL:t.level=e.value;break;case Pe.ROLE:t.role=e.value;break;default:t[e.tag]=e.value}})),t}},{key:"getUserFollowInfo",value:function(e){if(!this.canIUse(U.FOLLOW))return this.noUse("getUserFollowInfo");var t=e,n=!1,o=(dt(e)&&(t=[this.getMyUserID()],n=!0),"".concat(this._n,".").concat("getUserFollowInfo")),i=(e="userIDList:".concat(t.length," isGetMyFollowInfo:").concat(n),new eo("getUserFollowInfo"));return i.setMessage(e),we.l("".concat(o," ").concat(e)),this.req({P:Fn.GET_FOLLOW_INFO,data:{fromAccount:this.getMyUserID(),userIDList:t}}).then((function(e){i.end(),we.l("".concat(o," ok."));e=e.data.followInfoList;var t=[];return(void 0===e?[]:e).forEach((function(e){var n=e.followersCount,o=e.followingCount;e=e.mutualFollowersCount;t.push({followersCount:n,followingCount:o,mutualFollowersCount:e})})),Mn(t)})).catch((function(e){return i.setError(e).end(),we.e("".concat(o," failed. error:"),e),Cn(e)}))}},{key:"checkFollowType",value:function(e){var t=this;if(!this.canIUse(U.FOLLOW))return this.noUse("checkFollowType");100<e.length&&(e=e.slice(0,100),we.w("".concat(n," ").concat(jt(100))));var n="".concat(this._n,".").concat("checkFollowType"),o="userIDList length:".concat(e.length," "),i=new eo("checkFollowType"),r=(i.setMessage(o),we.l("".concat(n," ").concat(o)),[]),a=[];return e.forEach((function(e){var n;t._followType.has(e)?(n=t._followType.get(e),r.push({userID:e,followType:n})):a.push(e)})),we.l("".concat(n," from local count:").concat(r.length,", from remote count:").concat(a.length,".")),0===a.length?In(r):this.req({P:Fn.CHECK_FOLLOW_TYPE,data:{fromAccount:this.getMyUserID(),userIDList:a}}).then((function(e){return i.end(),we.l("".concat(n," ok.")),e=e.data.resultList,(void 0===e?[]:e).forEach((function(e){var n=e.userID;e=e.followType;t._setFollowType(n,e),r.push({userID:n,followType:e})})),Mn(r)})).catch((function(e){return i.setError(e).end(),we.e("".concat(n," failed. error:"),e),Cn(e)}))}},{key:"_setFollowType",value:function(e,t){this._followType.set(e,t)}},{key:"_clearFollowList",value:function(e){if(dt(e))return this._myFollowersList.clear(),this._myFollowingList.clear(),void this._myMutualFollowersList.clear();e!==ys.FOLLOWERS?e!==ys.FOLLOWING?e!==ys.MUTUAL||this._myMutualFollowersList.clear():this._myFollowingList.clear():this._myFollowersList.clear()}},{key:"reset",value:function(){we.l("".concat(this._n,".reset")),this._clearFollowList(),this._followType.clear()}}]),Cs),Is=yr((function(e,t){var o="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t,o,i=Array.prototype.slice.call(arguments,1);i.length;){var r=i.shift();if(r){if("object"!==n(r))throw new TypeError(r+"must be non-object");for(var a in r)t=r,o=a,Object.prototype.hasOwnProperty.call(t,o)&&(e[a]=r[a])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,o,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+o),i);else for(var r=0;r<o;r++)e[i+r]=t[n+r]},flattenChunks:function(e){for(var t,n,o,i=0,r=0,a=e.length;r<a;r++)i+=e[r].length;for(o=new Uint8Array(i),r=t=0,a=e.length;r<a;r++)n=e[r],o.set(n,t),t+=n.length;return o}},r={arraySet:function(e,t,n,o,i){for(var r=0;r<o;r++)e[i+r]=t[n+r]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,i)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,r))},t.setTyped(o)}));function Cs(e){return r(this,Cs),(e=Oa.call(this,e))._n="FollowModule",e._myFollowersList=new Map,e._myFollowingList=new Map,e._myMutualFollowersList=new Map,e._followType=new Map,e.MAX_CATCH_TIME=6e5,e.FIRST_PAGE_INDEX=rt(),e.DEFAULT_COUNT=500,e.MAX_COUNT=1e3,e.getIEmitInst().on(Bo.CLOUD_CONFIG,e._onCloudConfig,_(e)),e}function bs(e){r(this,bs),(e=Ra.call(this,e))._n="SignalingModule",e._inviteInfoMap=new Map,e._canIUseSignaling=!1,e._isHandling=!1,e._remoteSignalingHandler=new ds(_(e)),e._localSignalingHandler=new fs(_(e)),e._historySignalingHandler=new ps(_(e)),e._isC2CUnreadHandleCompleted=!1,e._isConvSyncCompleted=!1,e._isSyncCompleted=!1,e._isCloudConfigCompleted=!1;var t=e.getIEmitInst();return t.on(Bo.C2C_UNREAD_HANDLE_COMPLETED,e.onC2CUnreadHandleCompleted,_(e)),t.on(Bo.CONV_SYNC_COMPLETED,e.onConvSyncCompleted,_(e)),t.on(Bo.CLOUD_CONFIG,e.onCloudConfig,_(e)),e}function Ts(e){r(this,Ts),this._n="HistorySignalingHandler",this._sigM=e,this.COUNT=20,this.EXPIRED_TIME=300,this._map=new Map,this._relatedToMeMap=new Map}function Ss(e){r(this,Ss),this._n="LocalSignalingHandler",this._sigM=e}function Es(e){r(this,Es),this._n="RemoteSignalingHandler",this._sigM=e}function ks(e){r(this,ks),this._m=e,this._n="ErrMsgModule",this.TIM_ERROR_ASSISTANCE="tim_error_assistance",this.STORAGE_EXPIRES_TIME=6048e5,this._map=new Map,this._init()}function Ds(e){r(this,Ds),this._m=e,this._n="TransCmdModule",this._TRTCCommandList=["tui_room_svr.*","callkit_records_svr.*","room_engine_srv.*","room_engine_http_srv.*","room_engine_mic.*","live_engine_srv.*","live_engine_http_srv.*","live_engine_pk.*"],this._TRTCCommandMap=new Map,this._setTRTCCommandMap(),this._m.getIEmitInst().on(Bo.CLOUD_CONFIG,this._onCloudConfig,this)}function As(e){return r(this,As),(e=wa.call(this,e))._n="ProfanityFilterModule",e._plugin=null,e._filterConfigMap=new Map,e._startIndex=0,e._version=0,e._canIUseLexicon=!1,e._isFetching=!1,e._expiredTime=0,e}function Ls(e){var t;return r(this,Ls),(t=Na.call(this,e))._m=e,t._n="TIMPushModule",t._pluginName="TIMPush",t._pushPlugin=void 0,t._androidPushConfig={},t._deviceToken="",t._businessID=0,t._iOSBusinessID=0,t._c2cUnreadCount=0,t._groupUnreadCount=0,t._isWebUniapp=0,t._deviceInfo={notificationStatus:0,deviceModel:"",systemVersion:"",pushVersion:"1.0.1",packageName:""},t}function Os(e){var t;return r(this,Os),(t=Pa.call(this,e))._m=e,t._n="OfflinePushModule",t._offlinePushPlugin=void 0,t._androidPushConfig={huaweiPushBussinessId:"",xiaomiPushBussinessId:"",xiaomiPushAppId:"",xiaomiPushAppKey:"",meizuPushBussinessId:"",meizuPushAppId:"",meizuPushAppKey:"",vivoPushBussinessId:"",fcmPushBussinessId:"",oppoPushBussinessId:"",oppoPushAppKey:"",oppoPushAppSecret:"",honorPushBussinessId:""},t._deviceToken="",t._businessID=0,t._iosBusinessID=0,t._c2cUnreadCount=0,t._groupUnreadCount=0,t._isWebUniapp=0,t}function Rs(e){r(this,Rs),this._m=e,this._n="CommercialConfigModule",this._expiredTime=0,this._isFetching=!1,this._purchasedFeatureHandler=new is(this)}function ws(e){r(this,ws),this._commercialConfigM=e,this._n="PurchasedFeatureHandler",this._isSCMReported=!1,this._featureMap=new Map}function Ns(e){return r(this,Ns),(e=Ga.call(this,e))._n="WorkerTimerModule",e._isWorkerEnabled=!0,e._workerTimer=null,e._timerID=-1,e._init(),e.getIEmitInst().on(Bo.CLOUD_CONFIG,e._onCloudConfig,_(e)),e}function Ps(e){return r(this,Ps),(e=Ua.call(this,e))._n="SnsModule",e._friendHandler=new Za(_(e)),e._friendApplicationHandler=new Ja(_(e)),e._friendGroupHandler=new ts(_(e)),e.getIEmitInst().on(Bo.A2KEY_AND_TINYID_UPDATED,e.onContextUpdated,_(e)),e}function Gs(e){r(this,Gs),this._snsM=e,this._n="FriendGroupHandler",this._map=new Map}function Us(e){r(this,Us),je(e)||(this.name=e.name||"",this.userIDList=e.userIDList||[],this.count=this.userIDList.length||0)}function xs(e){r(this,xs),this._snsM=e,this._n="FriendHandler",this._map=new Map,this._startIdx=0,this._standardSeq=0,this._customSeq=0,this._expirationTime=18e4}function Fs(e,n){r(this,Fs),this.userID=e,this.remark="",this.groupList=[],this.source="",this.addTime=0,this.friendCustomField=[],this.timestamp=0;var o={},i=[];if(o.userID=e,!je(n))for(var a,s="",c=0,u=n.length;c<u;c++)if(s=n[c].tag,a=n[c].value,-1<s.indexOf("Tag_SNS_Custom"))this.friendCustomField.push({key:s,value:a});else if(-1<s.indexOf("Tag_Profile_Custom"))i.push({key:s,value:a});else switch(s){case Pe.NICK:o.nick=a;break;case Pe.GENDER:o.gender=a;break;case Pe.BIRTHDAY:o.birthday=a;break;case Pe.LOCATION:o.location=a;break;case Pe.SELFSIGNATURE:o.selfSignature=a;break;case Pe.ALLOWTYPE:o.allowType=a;break;case Pe.LANGUAGE:o.language=a;break;case Pe.AVATAR:o.avatar=a;break;case Pe.MESSAGESETTINGS:o.messageSettings=a;break;case Pe.ADMINFORBIDTYPE:o.adminForbidType=a;break;case Pe.LEVEL:o.level=a;break;case Pe.ROLE:o.role=a;break;case Ge.REMARK:this.remark=a;break;case Ge.ADDTIME:this.addTime=a;break;case Ge.GROUP:this.groupList=JSON.parse(JSON.stringify(a));break;case Ge.ADDSOURCE:this.source=a;break;case Ge.ADDWORDING:break;default:we.l("snsProfileItem unknown tag->",n[c].tag)}this.profile=new ni(t(t({},o),{},{profileCustomField:i}))}function qs(e){r(this,qs),this._snsM=e,this._n="FriendApplicationHandler",this._startTime=0,this._maxLimited=100,this._currentSeq=0,this._map=new Map,this._unreadCount=0}function Bs(e){r(this,Bs),(e=xa.call(this,e))._n="QualityStatModule",e.TAG="im-ssolog-quality-stat",e.reportIndex=0,e.wholePeriod=!1,e._qualityItems=[qn,Bn,Vn,Hn,jn,Kn,Wn,Yn,zn,$n],e._messageSentItems=[Vn,Hn,jn,Kn,Wn],e._messageReceivedItems=[Yn,zn,$n],e.REPORT_INTERVAL=120,e.REPORT_SDKAPPID_BLACKLIST=[],e.REPORT_TINYID_WHITELIST=[],e._statInfoArr=[],e._avgRTT=new Wa,e._avgE2EDelay=new Ka,e._rateMessageSent=new Ya,e._rateMessageReceived=new za;var t=e.getIEmitInst();return t.on(Bo.A2KEY_AND_TINYID_UPDATED,e._onLoginSuccess,_(e)),t.on(Bo.CLOUD_CONFIG,e._onCloudConfig,_(e)),e}function Vs(){r(this,Vs),this._lastMap=new Map,this._currentMap=new Map}function Hs(){r(this,Hs),this._map=new Map}function js(){r(this,js),this._n="AvgRTT",this._requestCount=0,this._rttArray=[]}function Ks(){r(this,Ks),this._n="AvgE2EDelay",this._e2eDelayArray=[]}function Ws(e){return r(this,Ws),(e=Fa.call(this,e))._n="RecoverMsgModule",e.PULL_LIMIT_COUNT=15,e}function Ys(e){return r(this,Ys),(e=qa.call(this,e))._n="CloudControlModule",e._cloudConfig=new Map,e._expiredTime=0,e._version=0,e._isFetching=!1,e}function zs(e){return r(this,zs),(e=Ba.call(this,e))._n="SessionModule",e._platform=e.getPlatform(),e._pHandler=new ga(_(e)),e._msgDispatcher=new va(_(e)),e._cmdFreqLimitMap=new Map,e._cmdReqInfoMap=new Map,e._serverOverloadInfoMap=new Map,e._incrementalPullContactFlag=!0,e._init(),e.getIEmitInst().on(Bo.CLOUD_CONFIG,e._onCloudConfig,_(e)),e}function $s(e,t,n,o){for(var i=65535&e|0,r=e>>>16&65535|0,a=0;0!==n;){for(n-=a=2e3<n?2e3:n;r=r+(i=i+t[o++]|0)|0,--a;);i%=65521,r%=65521}return i|r<<16|0}function Xs(e,t,n,o){var i=Qs,r=o+n;e^=-1;for(var a=o;a<r;a++)e=e>>>8^i[255&(e^t[a])];return-1^e}function Js(e,t,n,o,i,r,a,s){var c,u,l,d,f,p,h,g,_,v=s.bits,m=0,y=0,M=0,I=0,C=0,b=0,T=0,S=0,E=0,k=0,D=null,A=0,L=new Is.Buf16(16),O=new Is.Buf16(16),R=null,w=0;for(m=0;m<=15;m++)L[m]=0;for(y=0;y<o;y++)L[t[n+y]]++;for(C=v,I=15;1<=I&&0===L[I];I--);if(I<C&&(C=I),0===I)return i[r++]=20971520,i[r++]=20971520,s.bits=1,0;for(M=1;M<I&&0===L[M];M++);for(C<M&&(C=M),m=S=1;m<=15;m++)if((S=(S<<1)-L[m])<0)return-1;if(0<S&&(0===e||1!==I))return-1;for(O[1]=0,m=1;m<15;m++)O[m+1]=O[m]+L[m];for(y=0;y<o;y++)0!==t[n+y]&&(a[O[t[n+y]]++]=y);if(p=0===e?(D=R=a,19):1===e?(D=Zs,A-=257,R=ec,w-=257,256):(D=tc,R=nc,-1),m=M,f=r,T=y=k=0,l=-1,d=(E=1<<(b=C))-1,1===e&&852<E||2===e&&592<E)return 1;for(;;){for(_=a[y]<p?(g=0,a[y]):a[y]>p?(g=R[w+a[y]],D[A+a[y]]):(g=96,0),c=1<<(h=m-T),M=u=1<<b;i[f+(k>>T)+(u-=c)]=h<<24|g<<16|_|0,0!==u;);for(c=1<<m-1;k&c;)c>>=1;if(k=0!==c?(k&c-1)+c:0,y++,0==--L[m]){if(m===I)break;m=t[n+a[y]]}if(C<m&&(k&d)!==l){for(f+=M,S=1<<(b=m-(T=0===T?C:T));b+T<I&&!((S-=L[b+T])<=0);)b++,S<<=1;if(E+=1<<b,1===e&&852<E||2===e&&592<E)return 1;i[l=k&d]=C<<24|b<<16|f-r|0}}return 0!==k&&(i[f+k]=m-T<<24|64<<16|0),s.bits=C,0}Is.assign,Is.shrinkBuf,Is.setTyped,Is.Buf8,Is.Buf16,Is.Buf32;var Qs=function(){for(var e=[],t=0;t<256;t++){for(var n=t,o=0;o<8;o++)n=1&n?3988292384^n>>>1:n>>>1;e[t]=n}return e}(),Zs=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],ec=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],tc=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],nc=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function oc(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function ic(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Is.Buf16(320),this.work=new Is.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function rc(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Is.Buf32(852),t.distcode=t.distdyn=new Is.Buf32(592),t.sane=1,t.back=-1,0):-2}function ac(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,rc(e)):-2}function sc(e,t){var n,o;return e&&e.state?(o=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?-2:(null!==o.window&&o.wbits!==t&&(o.window=null),o.wrap=n,o.wbits=t,ac(e))):-2}function cc(e,t){var n;return e?(n=new ic,(e.state=n).window=null,0!==(n=sc(e,t))&&(e.state=null),n):-2}var uc,lc,dc=!0;function fc(e,t,n,o){var i;e=e.state;return null===e.window&&(e.wsize=1<<e.wbits,e.wnext=0,e.whave=0,e.window=new Is.Buf8(e.wsize)),o>=e.wsize?(Is.arraySet(e.window,t,n-e.wsize,e.wsize,0),e.wnext=0,e.whave=e.wsize):((i=e.wsize-e.wnext)>o&&(i=o),Is.arraySet(e.window,t,n-o,i,e.wnext),(o-=i)?(Is.arraySet(e.window,t,n-o,o,0),e.wnext=o,e.whave=e.wsize):(e.wnext+=i,e.wnext===e.wsize&&(e.wnext=0),e.whave<e.wsize&&(e.whave+=i))),0}var pc={inflateReset:ac,inflateReset2:sc,inflateResetKeep:rc,inflateInit:function(e){return cc(e,15)},inflateInit2:cc,inflate:function(e,t){var n,o,i,r,a,s,c,u,l,d,f,p,h,g,_,v,m,y,M,I,C,b,T,S,E=0,k=new Is.Buf8(4),D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return-2;12===(n=e.state).mode&&(n.mode=13),a=e.next_out,i=e.output,c=e.avail_out,r=e.next_in,o=e.input,s=e.avail_in,u=n.hold,l=n.bits,d=s,f=c,b=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;l<16;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}if(2&n.wrap&&35615===u){k[n.check=0]=255&u,k[1]=u>>>8&255,n.check=Xs(n.check,k,2,0),l=u=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&u)){e.msg="unknown compression method",n.mode=30;break}if(l-=4,C=8+(15&(u>>>=4)),0===n.wbits)n.wbits=C;else if(C>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<C,e.adler=n.check=1,n.mode=512&u?10:12,l=u=0;break;case 2:for(;l<16;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}if(n.flags=u,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&(k[0]=255&u,k[1]=u>>>8&255,n.check=Xs(n.check,k,2,0)),l=u=0,n.mode=3;case 3:for(;l<32;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}n.head&&(n.head.time=u),512&n.flags&&(k[0]=255&u,k[1]=u>>>8&255,k[2]=u>>>16&255,k[3]=u>>>24&255,n.check=Xs(n.check,k,4,0)),l=u=0,n.mode=4;case 4:for(;l<16;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&(k[0]=255&u,k[1]=u>>>8&255,n.check=Xs(n.check,k,2,0)),l=u=0,n.mode=5;case 5:if(1024&n.flags){for(;l<16;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&(k[0]=255&u,k[1]=u>>>8&255,n.check=Xs(n.check,k,2,0)),l=u=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((p=(p=n.length)>s?s:p)&&(n.head&&(C=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),Is.arraySet(n.head.extra,o,r,p,C)),512&n.flags&&(n.check=Xs(n.check,o,p,r)),s-=p,r+=p,n.length-=p),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===s)break e;for(p=0;C=o[r+p++],n.head&&C&&n.length<65536&&(n.head.name+=String.fromCharCode(C)),C&&p<s;);if(512&n.flags&&(n.check=Xs(n.check,o,p,r)),s-=p,r+=p,C)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===s)break e;for(p=0;C=o[r+p++],n.head&&C&&n.length<65536&&(n.head.comment+=String.fromCharCode(C)),C&&p<s;);if(512&n.flags&&(n.check=Xs(n.check,o,p,r)),s-=p,r+=p,C)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;l<16;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}if(u!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}l=u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;l<32;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}e.adler=n.check=oc(u),l=u=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=a,e.avail_out=c,e.next_in=r,e.avail_in=s,n.hold=u,n.bits=l,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){u>>>=7&l,l-=7&l,n.mode=27;break}for(;l<3;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}switch(n.last=1&u,--l,3&(u>>>=1)){case 0:n.mode=14;break;case 1:A=L=void 0;var A,L=n;if(dc){for(uc=new Is.Buf32(512),lc=new Is.Buf32(32),A=0;A<144;)L.lens[A++]=8;for(;A<256;)L.lens[A++]=9;for(;A<280;)L.lens[A++]=7;for(;A<288;)L.lens[A++]=8;for(Js(1,L.lens,0,288,uc,0,L.work,{bits:9}),A=0;A<32;)L.lens[A++]=5;Js(2,L.lens,0,32,lc,0,L.work,{bits:5}),dc=!1}if(L.lencode=uc,L.lenbits=9,L.distcode=lc,L.distbits=5,n.mode=20,6!==t)break;u>>>=2,l-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}u>>>=2,l-=2;break;case 14:for(u>>>=7&l,l-=7&l;l<32;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}if((65535&u)!=(u>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&u,l=u=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(p=n.length){if(0===(p=c<(p=s<p?s:p)?c:p))break e;Is.arraySet(i,o,r,p,a),s-=p,r+=p,c-=p,a+=p,n.length-=p;break}n.mode=12;break;case 17:for(;l<14;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}if(n.nlen=257+(31&u),u>>>=5,l-=5,n.ndist=1+(31&u),u>>>=5,l-=5,n.ncode=4+(15&u),u>>>=4,l-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;l<3;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}n.lens[D[n.have++]]=7&u,u>>>=3,l-=3}for(;n.have<19;)n.lens[D[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,T={bits:n.lenbits},b=Js(0,n.lens,0,19,n.lencode,0,n.work,T),n.lenbits=T.bits,b){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;v=(E=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,m=65535&E,!((_=E>>>24)<=l);){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}if(m<16)u>>>=_,l-=_,n.lens[n.have++]=m;else{if(16===m){for(S=_+2;l<S;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}if(u>>>=_,l-=_,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}C=n.lens[n.have-1],p=3+(3&u),u>>>=2,l-=2}else if(17===m){for(S=_+3;l<S;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}C=0,p=3+(7&(u>>>=_)),u>>>=3,l=l-_-3}else{for(S=_+7;l<S;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}C=0,p=11+(127&(u>>>=_)),u>>>=7,l=l-_-7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;p--;)n.lens[n.have++]=C}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,T={bits:n.lenbits},b=Js(1,n.lens,0,n.nlen,n.lencode,0,n.work,T),n.lenbits=T.bits,b){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,T={bits:n.distbits},b=Js(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,T),n.distbits=T.bits,b){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=s&&258<=c){e.next_out=a,e.avail_out=c,e.next_in=r,e.avail_in=s,n.hold=u,n.bits=l,j=G=P=N=w=R=O=Z=Q=H=q=F=void 0;var O,R,w,N,P,G,U=e,x=f,F=U.state,q=U.next_in,B=U.input,V=q+(U.avail_in-5),H=U.next_out,j=U.output,K=H-(x-U.avail_out),W=H+(U.avail_out-257),Y=F.dmax,z=F.wsize,$=F.whave,X=F.wnext,J=F.window,Q=F.hold,Z=F.bits,ee=F.lencode,te=F.distcode,ne=(1<<F.lenbits)-1,oe=(1<<F.distbits)-1;t:do{for(Z<15&&(Q+=B[q++]<<Z,Z+=8,Q+=B[q++]<<Z,Z+=8),O=ee[Q&ne];;){if(Q>>>=R=O>>>24,Z-=R,0==(R=O>>>16&255))j[H++]=65535&O;else{if(!(16&R)){if(0==(64&R)){O=ee[(65535&O)+(Q&(1<<R)-1)];continue}if(32&R){F.mode=12;break t}U.msg="invalid literal/length code",F.mode=30;break t}for(w=65535&O,(R&=15)&&(Z<R&&(Q+=B[q++]<<Z,Z+=8),w+=Q&(1<<R)-1,Q>>>=R,Z-=R),Z<15&&(Q+=B[q++]<<Z,Z+=8,Q+=B[q++]<<Z,Z+=8),O=te[Q&oe];;){if(Q>>>=R=O>>>24,Z-=R,!(16&(R=O>>>16&255))){if(0==(64&R)){O=te[(65535&O)+(Q&(1<<R)-1)];continue}U.msg="invalid distance code",F.mode=30;break t}if(N=65535&O,Z<(R&=15)&&(Q+=B[q++]<<Z,(Z+=8)<R&&(Q+=B[q++]<<Z,Z+=8)),(N+=Q&(1<<R)-1)>Y){U.msg="invalid distance too far back",F.mode=30;break t}if(Q>>>=R,Z-=R,N>(R=H-K)){if((R=N-R)>$&&F.sane){U.msg="invalid distance too far back",F.mode=30;break t}if(G=J,(P=0)===X){if(P+=z-R,R<w){for(w-=R;j[H++]=J[P++],--R;);P=H-N,G=j}}else if(X<R){if(P+=z+X-R,(R-=X)<w){for(w-=R;j[H++]=J[P++],--R;);if(P=0,X<w){for(w-=R=X;j[H++]=J[P++],--R;);P=H-N,G=j}}}else if(P+=X-R,R<w){for(w-=R;j[H++]=J[P++],--R;);P=H-N,G=j}for(;2<w;)j[H++]=G[P++],j[H++]=G[P++],j[H++]=G[P++],w-=3;w&&(j[H++]=G[P++],1<w&&(j[H++]=G[P++]))}else{for(P=H-N;j[H++]=j[P++],j[H++]=j[P++],j[H++]=j[P++],2<(w-=3););w&&(j[H++]=j[P++],1<w&&(j[H++]=j[P++]))}break}}break}}while(q<V&&H<W);q-=w=Z>>3,Q&=(1<<(Z-=w<<3))-1,U.next_in=q,U.next_out=H,U.avail_in=q<V?V-q+5:5-(q-V),U.avail_out=H<W?W-H+257:257-(H-W),F.hold=Q,F.bits=Z,a=e.next_out,i=e.output,c=e.avail_out,r=e.next_in,o=e.input,s=e.avail_in,u=n.hold,l=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;v=(E=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,m=65535&E,!((_=E>>>24)<=l);){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}if(v&&0==(240&v)){for(y=_,M=v,I=m;v=(E=n.lencode[I+((u&(1<<y+M)-1)>>y)])>>>16&255,m=65535&E,!(y+(_=E>>>24)<=l);){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}u>>>=y,l-=y,n.back+=y}if(u>>>=_,l-=_,n.back+=_,n.length=m,0===v){n.mode=26;break}if(32&v){n.back=-1,n.mode=12;break}if(64&v){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&v,n.mode=22;case 22:if(n.extra){for(S=n.extra;l<S;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,l-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;v=(E=n.distcode[u&(1<<n.distbits)-1])>>>16&255,m=65535&E,!((_=E>>>24)<=l);){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}if(0==(240&v)){for(y=_,M=v,I=m;v=(E=n.distcode[I+((u&(1<<y+M)-1)>>y)])>>>16&255,m=65535&E,!(y+(_=E>>>24)<=l);){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}u>>>=y,l-=y,n.back+=y}if(u>>>=_,l-=_,n.back+=_,64&v){e.msg="invalid distance code",n.mode=30;break}n.offset=m,n.extra=15&v,n.mode=24;case 24:if(n.extra){for(S=n.extra;l<S;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,l-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===c)break e;if(n.offset>(p=f-c)){if((p=n.offset-p)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}h=p>n.wnext?(p-=n.wnext,n.wsize-p):n.wnext-p,p>n.length&&(p=n.length),g=n.window}else g=i,h=a-n.offset,p=n.length;for(c-=p=c<p?c:p,n.length-=p;i[a++]=g[h++],--p;);0===n.length&&(n.mode=21);break;case 26:if(0===c)break e;i[a++]=n.length,c--,n.mode=21;break;case 27:if(n.wrap){for(;l<32;){if(0===s)break e;s--,u|=o[r++]<<l,l+=8}if(f-=c,e.total_out+=f,n.total+=f,f&&(e.adler=n.check=(n.flags?Xs:$s)(n.check,i,f,a-f)),f=c,(n.flags?u:oc(u))!==n.check){e.msg="incorrect data check",n.mode=30;break}l=u=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;l<32;){if(0===s)break e;s--,u+=o[r++]<<l,l+=8}if(u!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}l=u=0}n.mode=29;case 29:b=1;break e;case 30:b=-3;break e;case 31:return-4;default:return-2}return e.next_out=a,e.avail_out=c,e.next_in=r,e.avail_in=s,n.hold=u,n.bits=l,(n.wsize||f!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&fc(e,e.output,e.next_out,f-e.avail_out),d-=e.avail_in,f-=e.avail_out,e.total_in+=d,e.total_out+=f,n.total+=f,n.wrap&&f&&(e.adler=n.check=(n.flags?Xs:$s)(n.check,i,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==d&&0===f||4===t)&&0===b?-5:b},inflateEnd:function(e){if(!e||!e.state)return-2;var t=e.state;return t.window&&(t.window=null),e.state=null,0},inflateGetHeader:function(e,t){var n;return e&&e.state&&0!=(2&(n=e.state).wrap)?((n.head=t).done=!1,0):-2},inflateSetDictionary:function(e,t){var n,o=t.length;return!e||!e.state||0!==(n=e.state).wrap&&11!==n.mode?-2:11===n.mode&&$s(1,t,o,0)!==n.check?-3:fc(e,t,o,o)?(n.mode=31,-4):(n.havedict=1,0)},inflateInfo:"pako inflate (from Nodeca project)"},hc=!0,gc=!0;try{String.fromCharCode.apply(null,[0])}catch(c){hc=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(c){gc=!1}for(var _c=new Is.Buf8(256),vc=0;vc<256;vc++)_c[vc]=252<=vc?6:248<=vc?5:240<=vc?4:224<=vc?3:192<=vc?2:1;function mc(e,t){for(var n,o,i=t||e.length,r=new Array(2*i),a=0,s=0;s<i;)if((n=e[s++])<128)r[a++]=n;else if(4<(o=_c[n]))r[a++]=65533,s+=o-1;else{for(n&=2===o?31:3===o?15:7;1<o&&s<i;)n=n<<6|63&e[s++],o--;1<o?r[a++]=65533:n<65536?r[a++]=n:(n-=65536,r[a++]=55296|n>>10&1023,r[a++]=56320|1023&n)}var c=r,u=a;if(u<65534&&(c.subarray&&gc||!c.subarray&&hc))return String.fromCharCode.apply(null,Is.shrinkBuf(c,u));for(var l="",d=0;d<u;d++)l+=String.fromCharCode(c[d]);return l}function yc(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function Mc(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}_c[254]=_c[254]=1;var Ic={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Cc={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},bc=Object.prototype.toString;function Tc(e){if(!(this instanceof Tc))return new Tc(e);this.options=Is.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new yc,this.strm.avail_out=0,e=pc.inflateInit2(this.strm,t.windowBits);if(e!==Ic.Z_OK)throw new Error(Cc[e]);if(this.header=new Mc,pc.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=function(e){for(var t,n,o,i,r=e.length,a=0,s=0;s<r;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<r&&56320==(64512&(o=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(o-56320),s++),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Is.Buf8(a),s=i=0;i<a;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<r&&56320==(64512&(o=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(o-56320),s++),n<128?t[i++]=n:(n<2048?t[i++]=192|n>>>6:(n<65536?t[i++]=224|n>>>12:(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63),t[i++]=128|n>>>6&63),t[i++]=128|63&n);return t}(t.dictionary):"[object ArrayBuffer]"===bc.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=pc.inflateSetDictionary(this.strm,t.dictionary))!==Ic.Z_OK))throw new Error(Cc[e])}function Sc(e,t){if(t=new Tc(t),t.push(e,!0),t.err)throw t.msg||Cc[t.err];return t.result}Tc.prototype.push=function(e,t){var n,o,i,r,a,s=this.strm,c=this.options.chunkSize,u=this.options.dictionary,l=!1;if(this.ended)return!1;o=t===~~t?t:!0===t?Ic.Z_FINISH:Ic.Z_NO_FLUSH,"string"==typeof e?s.input=function(e){for(var t=new Is.Buf8(e.length),n=0,o=t.length;n<o;n++)t[n]=e.charCodeAt(n);return t}(e):"[object ArrayBuffer]"===bc.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new Is.Buf8(c),s.next_out=0,s.avail_out=c),(n=(n=pc.inflate(s,Ic.Z_NO_FLUSH))===Ic.Z_NEED_DICT&&u?pc.inflateSetDictionary(this.strm,u):n)===Ic.Z_BUF_ERROR&&!0===l&&(n=Ic.Z_OK,l=!1),n!==Ic.Z_STREAM_END&&n!==Ic.Z_OK)return this.onEnd(n),!(this.ended=!0);s.next_out&&(0!==s.avail_out&&n!==Ic.Z_STREAM_END&&(0!==s.avail_in||o!==Ic.Z_FINISH&&o!==Ic.Z_SYNC_FLUSH)||("string"===this.options.to?(i=function(e,t){for(var n=(t=(t=t||e.length)>e.length?e.length:t)-1;0<=n&&128==(192&e[n]);)n--;return!(n<0||0===n)&&n+_c[e[n]]>t?n:t}(s.output,s.next_out),r=s.next_out-i,a=mc(s.output,i),s.next_out=r,s.avail_out=c-r,r&&Is.arraySet(s.output,s.output,i,r,0),this.onData(a)):this.onData(Is.shrinkBuf(s.output,s.next_out)))),0===s.avail_in&&0===s.avail_out&&(l=!0)}while((0<s.avail_in||0===s.avail_out)&&n!==Ic.Z_STREAM_END);return(o=n===Ic.Z_STREAM_END?Ic.Z_FINISH:o)===Ic.Z_FINISH?(n=pc.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===Ic.Z_OK):o!==Ic.Z_SYNC_FLUSH||(this.onEnd(Ic.Z_OK),!(s.avail_out=0))},Tc.prototype.onData=function(e){this.chunks.push(e)},Tc.prototype.onEnd=function(e){e===Ic.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Is.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};X={};var Ec=((0,Is.assign)(X,{Inflate:Tc,inflate:Sc,inflateRaw:function(e,t){return(t=t||{}).raw=!0,Sc(e,t)},ungzip:Sc},Ic),X),kc=(c(Pc,[{key:"inflate",value:function(e){e=new Uint8Array(e).slice(4);var t,n=Date.now();try{t=Ec.inflate(e,{to:"string"}),this._bLogForInflateOK||(this._bLogForInflateOK=!0,new eo("inflateOK").end())}catch(e){return this._bLogForInflateError?void 0:(this._bLogForInflateError=!0,void new eo("inflateError").setMessage(e).end())}e=e.length+4;var o=t.length;return we.d("inflate ok. zipped:".concat(e," unzipped:").concat(o)+" compression ratio:".concat(Math.round(100*(o-e)/o),"% cost:").concat(Date.now()-n)),t}},{key:"reset",value:function(){we.l("".concat(this._n,".reset")),this._bLogForInflateOK=!1,this._bLogForInflateError=!1}}]),Pc),Dc=(c(Nc,[{key:"_startTimer",value:function(){var e=this._map.get(24),t=e.isWorkerEnabled();we.l("".concat(this._n,".startTimer isWorkerEnabled:").concat(t," seed:").concat(this._checkTimer)),t?e.startWorkerTimer():this._startMainThreadTimer()}},{key:"_startMainThreadTimer",value:function(){this._checkTimer<0&&(this._checkTimer=setInterval(this.onCheckTimer.bind(this),1e3)),we.l("".concat(this._n,"._startMainThreadTimer seed:").concat(this._checkTimer))}},{key:"stopTimer",value:function(){var e=this._map.get(24),t=e.isWorkerEnabled();we.l("".concat(this._n,".stopTimer isWorkerEnabled:").concat(t," seed:").concat(this._checkTimer)),t?e.stopWorkerTimer():this._stopMainThreadTimer()}},{key:"_stopMainThreadTimer",value:function(){we.l("".concat(this._n,"._stopMainThreadTimer")),0<this._checkTimer&&(clearInterval(this._checkTimer),this._checkTimer=-1,this._checkCount=0)}},{key:"_stopMainThreadSocket",value:function(){we.l("".concat(this._n,"._stopMainThreadSocket"));var e=this._map.get(21);e.setIsWorkerEnabled(!0),e.reConnect()}},{key:"_startMainThreadSocket",value:function(){we.l("".concat(this._n,"._startMainThreadSocket"));var e=this._map.get(21);e.setIsWorkerEnabled(!1),e.reConnect()}},{key:"onWorkerTimerEnabled",value:function(){we.l("".concat(this._n,".onWorkerTimerEnabled, disable main thread timer and socket")),this._stopMainThreadTimer(),this._stopMainThreadSocket()}},{key:"onWorkerTimerDisabled",value:function(){we.l("".concat(this._n,".onWorkerTimerDisabled, enable main thread timer and socket")),this._startMainThreadTimer(),this._startMainThreadSocket()}},{key:"onCheckTimer",value:function(){this._checkCount+=1;var e,t=S(this._map);try{for(t.s();!(e=t.n()).done;){var n=m(e.value,2)[1];n.onCheckTimer&&n.onCheckTimer(this._checkCount)}}catch(e){t.e(e)}finally{t.f()}}},{key:"_initReadyList",value:function(){var e=this;this._readyList=[this._map.get(1)],this._readyList.forEach((function(t){t.ready((function(){return e._onModuleReady()}))}))}},{key:"_onModuleReady",value:function(){var e,t,n=!0;this._readyList.forEach((function(e){e.isReady()||(n=!1)})),n&&!this._isReady&&(this._isReady=!0,this._oEmitter.emit(E.SDK_READY),e=Date.now()-this._startLoginTs,we.w("SDK is ready. cost ".concat(e," ms")),this._startLoginTs=Date.now(),t=this._ssoLogForReady.getStartTs()+De,this._ssoLogForReady.setMessage(e).start(t).end())}},{key:"login",value:function(){0===this._startLoginTs&&(Se(),this._startLoginTs=Date.now(),this._startTimer(),this._map.get(15).start(),this._ssoLogForReady=new eo("sdkReady"),this._reason=Un.LOGGING_IN)}},{key:"onLoginFailed",value:function(){this._startLoginTs=0}},{key:"getOEmitInst",value:function(){return null===this._oEmitter&&(this._oEmitter=new Ir,e=this._oEmitter,xn=e,this._oEmitter._emit=this._oEmitter.emit,this._oEmitter.emit=function(e,t){var n,o,i=this;this._canIUseSignaling()&&(e===E.MESSAGE_RECEIVED&&this.get(33).onNewMessageList(t),e===E.MESSAGE_MODIFIED&&this.get(33).onMessageModified(t)),e===E.CONVERSATION_LIST_UPDATED||e===E.FRIEND_LIST_UPDATED||e===E.GROUP_LIST_UPDATED||e===E.TOTAL_UNREAD_MESSAGE_COUNT_UPDATED?!1!==this._eventThrottling?this._eventThrottleMap.has(e)?(n=Date.now())-(o=this._eventThrottleMap.get(e)).last<=1e3?(o.timeoutID&&clearTimeout(o.timeoutID),o.timeoutID=setTimeout((function(){o.last=Date.now(),i._oEmitter._emit.apply(i._oEmitter,[e,{name:e,data:i._getEventData(e)}])}),1e3)):(o.last=n,this._oEmitter._emit.apply(this._oEmitter,[e,{name:e,data:this._getEventData(e)}])):(this._eventThrottleMap.set(e,{last:Date.now(),timeoutID:-1}),this._oEmitter._emit.apply(this._oEmitter,[e,{name:e,data:this._getEventData(e)}])):this._oEmitter._emit.apply(this._oEmitter,[e,{name:e,data:this._getEventData(e)}]):this._oEmitter._emit.apply(this._oEmitter,[e,{name:e,data:t}])}.bind(this)),this._oEmitter;var e}},{key:"_canIUseSignaling",value:function(){var e=this.get(33);return!!e&&e.canIUseSignaling()}},{key:"_getEventData",value:function(e){return e===E.CONVERSATION_LIST_UPDATED?this._map.get(12).isPartialUpdatedConvs()?this._map.get(11).getPartialUpdatedConvs():this._map.get(11).getLocalConvList():e===E.FRIEND_LIST_UPDATED?this._map.get(8).getLocalFriendList(!1):e===E.GROUP_LIST_UPDATED?this._map.get(7).getLocalGroupList():e===E.TOTAL_UNREAD_MESSAGE_COUNT_UPDATED?this._map.get(11).getTotalUnreadCount():e===E.CONVERSATION_ID_LIST_UPDATED?this._map.get(11).getUpdatedConvIDList():void 0}},{key:"getIEmitInst",value:function(){return null===this._iEmitter&&(this._iEmitter=new Ir,this._iEmitter._emit=this._iEmitter.emit,this._iEmitter.emit=function(e,t){e=$e(t)&&t.data?[e,{name:e,data:t.data}]:[e,{name:e,data:t}],this._iEmitter._emit.apply(this._iEmitter,e)}.bind(this)),this._iEmitter}},{key:"hasModule",value:function(e){return this._map.has(e)}},{key:"get",value:function(e){return this._map.get(e)}},{key:"canIUseModule",value:function(e){return!this._map.get(12).isUsingChatCore()||this._optionalModuleMap.has(e)}},{key:"canIUseInflate",value:function(){return!!this._map.get(37)}},{key:"isReady",value:function(){return this._isReady}},{key:"isIntl",value:function(){return this.get(12).isIntl()}},{key:"getNotReadyReason",value:function(){return this._reason}},{key:"setNotReadyReason",value:function(e){this._reason=e}},{key:"getErrMsg",value:function(e,t,n){return this._map.get(32).get({key:e,replacement1:t,replacement2:n,isIntl:this.isIntl()})}},{key:"warn",value:function(e,t,n){e=this.getErrMsg(e,t,n),e&&we.w(e)}},{key:"onError",value:function(e){var t="code:".concat(e.code," message:").concat(e.message);we.w("Oops! ".concat(t)),new eo("error").setMessage(t).setLevel("error").end(),this.getOEmitInst().emit(E.ERROR,e)}},{key:"restartTimer",value:function(){we.l("".concat(this._n,".restartTimer")),this.stopTimer(),this._startTimer();var e=this.get(7);e&&e.restartPolling()}},{key:"getTimerID",value:function(){var e=this._map.get(24);return e.isWorkerEnabled()?e.getTimerID():this._checkTimer}},{key:"getPollingTimerID",value:function(e){return this._map.get(7).getPollingTimerID(e)}},{key:"reset",value:function(){we.l("".concat(this._n,".reset")),Se();var e,t=S(this._map);try{for(t.s();!(e=t.n()).done;){var n=m(e.value,2)[1];n.reset&&n.reset()}}catch(e){t.e(e)}finally{t.f()}this._startLoginTs=0,this._initReadyList(),this._isReady=!1,this.stopTimer(),this._oEmitter.emit(E.SDK_NOT_READY);var o,i=S(this._eventThrottleMap);try{for(i.s();!(o=i.n()).done;){var r=m(o.value,2)[1];r.timeoutID&&clearTimeout(r.timeoutID)}}catch(e){i.e(e)}finally{i.f()}this._eventThrottleMap.clear()}}]),Nc),Ac=(c(wc,[{key:"defense",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;if("string"!=typeof e)return null;if(0===e.length)return null;if("function"!=typeof t)return null;if(this._funcMap.has(e)&&this._funcMap.get(e).has(t))return this._funcMap.get(e).get(t);this._funcMap.has(e)||this._funcMap.set(e,new Map);var o=null;return this._funcMap.get(e).has(t)?o=this._funcMap.get(e).get(t):(o=this._pack(e,t,n),this._funcMap.get(e).set(t,o)),o}},{key:"defenseOnce",value:function(e,t){return"function"!=typeof t?null:this._pack(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0)}},{key:"find",value:function(e,t){return"string"!=typeof e||0===e.length||"function"!=typeof t?null:this._funcMap.has(e)&&this._funcMap.get(e).has(t)?this._funcMap.get(e).get(t):(this._m.warn("ListenerFnNotFound",e),null)}},{key:"delete",value:function(e,t){return"function"==typeof t&&!!this._funcMap.has(e)&&!!this._funcMap.get(e).has(t)&&(this._funcMap.get(e).delete(t),0===this._funcMap.get(e).size&&this._funcMap.delete(e),!0)}},{key:"_pack",value:function(e,t,n){var o=this;return function(){try{t.apply(n,Array.from(arguments))}catch(t){var i=Object.values(E).indexOf(e),r="CallbackError";-1!==i&&(i=Object.keys(E)[i],o._m.warn(r,i,t)),o._reportCount<5&&(new eo(r).setMessage("eventName:".concat(e)).setMoreMessage(t.message).end(),o._reportCount+=1)}}}},{key:"destroy",value:function(){this._funcMap.clear()}},{key:"reset",value:function(){we.l("".concat(this._n,".reset")),this._reportCount=0}}]),wc),Lc=(c(Rc,[{key:"onError",value:function(e){this._m.onError(e)}},{key:"login",value:function(e){return this._m.login(),this._get(1).login(e)}},{key:"logout",value:function(){var e=this;return this._get(1).logout().then((function(t){return e._safetyCallbackFactory.reset(),e._m.reset(),t}))}},{key:"getLoginUser",value:function(){return this._get(1).getLoginUser()}},{key:"isReady",value:function(){return this._m.isReady()}},{key:"isIntl",value:function(){return this._m.isIntl()}},{key:"getNotReadyReason",value:function(){return this._m.getNotReadyReason()}},{key:"getErrMsg",value:function(e,t,n){return this._m.getErrMsg(e,t,n)}},{key:"_get",value:function(e){return this._m.get(e)}},{key:"destroy",value:function(){var e=this,t=this._get(12),n=t.getSDKAppID();return we.w("destroy ".concat(n," ").concat(t.getInstanceID())),this.logout().finally((function(){e._safetyCallbackFactory.destroy(),e._m.stopTimer(),e._get(24).terminate(),e._get(21).dealloc(),e._m.getOEmitInst().emit(E.SDK_DESTROY,{SDKAppID:n})}))}},{key:"on",value:function(e,t,n){we.d("on","eventName:".concat(e)),this._m.getOEmitInst().on(e,this._safetyCallbackFactory.defense(e,t,n),n)}},{key:"once",value:function(e,t,n){we.d("once","eventName:".concat(e)),this._m.getOEmitInst().once(e,this._safetyCallbackFactory.defenseOnce(e,t,n),n||this)}},{key:"off",value:function(e,t,n,o){we.d("off","eventName:".concat(e));var i=this._safetyCallbackFactory.find(e,t);null!==i&&(this._m.getOEmitInst().off(e,i,n,o),this._safetyCallbackFactory.delete(e,t))}},{key:"registerPlugin",value:function(e){(dt(e["tim-push"])?dt(e["tim-offline-push-plugin"])?this._get(18):this._get(28):this._get(36)).registerPlugin(e)}},{key:"setLogLevel",value:function(e){var t;e<=0&&((t=this.getErrMsg("TIM_ASCII_ART"))&&i.log(t),(t=this.getErrMsg("API_REFER"))&&(Ht()?i.log("%c ".concat("IM SDK API ->"," %c"),"background:#ff9d00; padding:1px; border-radius:3px; color: #fff","background:transparent",t):i.log("IM SDK API ->",t)),(t=this.getErrMsg("DOCS_GUIDE"))&&i.log(t),t=this.getErrMsg("IOS_WEBVIEW_WARNING"),ye&&t&&i.warn(t)),we.setLevel(e)}},{key:"createTextMessage",value:function(e){return this._get(2).createTextMessage(e)}},{key:"createTextAtMessage",value:function(e){return this._get(2).createTextMessage(e)}},{key:"createImageMessage",value:function(e){return this._get(2).createImageMessage(e)}},{key:"createAudioMessage",value:function(e){return this._get(2).createAudioMessage(e)}},{key:"createVideoMessage",value:function(e){return this._get(2).createVideoMessage(e)}},{key:"createCustomMessage",value:function(e){return this._get(2).createCustomMessage(e)}},{key:"createFaceMessage",value:function(e){return this._get(2).createFaceMessage(e)}},{key:"createFileMessage",value:function(e){return this._get(2).createFileMessage(e)}},{key:"createLocationMessage",value:function(e){return this._get(2).createLocationMessage(e)}},{key:"createMergerMessage",value:function(e){return this._get(2).createMergerMessage(e)}},{key:"downloadMergerMessage",value:function(e){return e.type!==k.MSG_MERGER?Cn({code:Un.MSG_MERGER_TYPE_INVALID}):je(e.payload.downloadKey)?Cn({code:Un.MSG_MERGER_KEY_INVALID}):this._get(2).downloadMergerMessage(e).catch((function(e){return Cn({code:Un.MSG_MERGER_DOWNLOAD_FAIL})}))}},{key:"createForwardMessage",value:function(e){return this._get(2).createForwardMessage(e)}},{key:"sendMessage",value:function(e,t){return e instanceof So?this._get(2).sendMessageInstance(e,t):Cn({code:Un.MSG_INSTANCE_REQUIRED})}},{key:"searchCloudMessages",value:function(e){return this._get(2).searchCloudMessages(e)}},{key:"callExperimentalAPI",value:function(e,t){return"sendComboMessage"===e?this._get(31).sendMessage(t):"handleGroupInvitation"===e?this._get(7).handleGroupInvitation(t):"isCommercialAbilityEnabled"===e?this._get(27).isFeatureEnabled(t):"isFeatureEnabledForStat"===e?this._get(27).isFeatureEnabledForStat(t):"isIntl"===e?this.isIntl():"sendTRTCCustomData"===e||"sendRoomCustomData"===e?this._get(30).sendTRTCCustomData(t):"getTimerID"===e?this._m.getTimerID():"getPollingTimerID"===e?this._m.getPollingTimerID(t):"setApplicationID"===e?(this._get(12).setApplicationID(t),void this._get(20).updateProtocolConfig()):"getServerConfig"===e?this._get(23).getServerConfig(t):"canIUseModule"===e?this._m.canIUseModule(t):"startMessageLongPolling"===e?this._get(7).startMessageLongPolling(t):"stopMessageLongPolling"===e?this._get(7).stopMessageLongPolling(t):"disableMessagePullOnInvite"===e?this._get(11).disableMsgPullOnInvite(t):Cn({code:Un.INVALID_OPERATION})}},{key:"revokeMessage",value:function(e){return this._get(2).revokeMessage(e)}},{key:"resendMessage",value:function(e,t){return e instanceof So?this._get(2).resendMessage(e,t):Cn({code:Un.MSG_INSTANCE_REQUIRED})}},{key:"deleteMessage",value:function(e){return this._get(2).deleteMessage(e)}},{key:"translateText",value:function(e){return this._get(2).translateText(e)}},{key:"convertVoiceToText",value:function(e){return this._get(2).convertVoiceToText(e)}},{key:"setMessageExtensions",value:function(e,t){return this._get(3).setMessageExtensions(e,t)}},{key:"getMessageExtensions",value:function(e){return this._get(3).getMessageExtensions(e)}},{key:"deleteMessageExtensions",value:function(e,t){return this._get(3).deleteMessageExtensions(e,t)}},{key:"addMessageReaction",value:function(e,t){return this._get(34).addMessageReaction(e,t)}},{key:"removeMessageReaction",value:function(e,t){return this._get(34).removeMessageReaction(e,t)}},{key:"getMessageReactions",value:function(e){return this._get(34).getMessageReactions(e)}},{key:"getAllUserListOfMessageReaction",value:function(e){return this._get(34).getAllUserListOfMessageReaction(e)}},{key:"modifyMessage",value:function(e){return this._get(2).modifyRemoteMessage(e)}},{key:"getMessageList",value:function(e){return this._get(11).getMessageList(e)}},{key:"getMessageListHopping",value:function(e){return this._get(11).getMessageListHopping(e)}},{key:"sendMessageReadReceipt",value:function(e){return this._get(11).sendReadReceipt(e)}},{key:"getMessageReadReceiptList",value:function(e){return this._get(11).getReadReceiptList(e)}},{key:"getGroupMessageReadMemberList",value:function(e){var t=this._get(7);return t?t.getReadReceiptDetail(e):Cn({code:Un.NO_MODULE})}},{key:"findMessage",value:function(e){return this._get(11).findMessage(e)}},{key:"setMessageRead",value:function(e){return this._get(11).setMessageRead(e)}},{key:"getConversationList",value:function(e){return this._get(11).getConvList(e)}},{key:"getConversationProfile",value:function(e){return this._get(11).getConversationProfile(e)}},{key:"deleteConversation",value:function(e){return this._get(11).deleteConversation(e)}},{key:"setConversationDraft",value:function(e){return this._get(11).setConvDraft(e)}},{key:"clearHistoryMessage",value:function(e){return this._get(11).clearHistoryMessage(e)}},{key:"pinConversation",value:function(e){return this._get(11).pinConversation(e)}},{key:"setAllMessageRead",value:function(e){return this._get(11).setAllMessageRead(e)}},{key:"setMessageRemindType",value:function(e){return this._get(11).setMessageRemindType(e)}},{key:"setAllReceiveMessageOpt",value:function(e){return this._get(11).setAllRcvMsgOpt(e)}},{key:"getAllReceiveMessageOpt",value:function(){return this._get(11).getAllRcvMsgOpt()}},{key:"getTotalUnreadMessageCount",value:function(){return this._get(11).getTotalUnreadCount()}},{key:"setConversationCustomData",value:function(e){return this._get(11).setConvCustomData(e)}},{key:"markConversation",value:function(e){return this._get(11).markConv(e)}},{key:"getConversationGroupList",value:function(){return this._get(11).getConvGroupList()}},{key:"createConversationGroup",value:function(e){return this._get(11).createConvGroup(e)}},{key:"deleteConversationGroup",value:function(e){return this._get(11).deleteConvGroup(e)}},{key:"renameConversationGroup",value:function(e){return this._get(11).renameConvGroup(e)}},{key:"addConversationsToGroup",value:function(e){return this._get(11).addConvsToGroup(e)}},{key:"deleteConversationsFromGroup",value:function(e){return this._get(11).deleteConvsFromGroup(e)}},{key:"getMyProfile",value:function(){return this._get(4).getMyProfile()}},{key:"getUserProfile",value:function(e){return this._get(4).getUserProfile(e)}},{key:"updateMyProfile",value:function(e){return this._get(4).updateMyProfile(e)}},{key:"getBlacklist",value:function(){return this._get(4).getLocalBlacklist()}},{key:"addToBlacklist",value:function(e){return this._get(4).addBlacklist(e)}},{key:"removeFromBlacklist",value:function(e){return this._get(4).deleteBlacklist(e)}},{key:"setSelfStatus",value:function(e){return this._get(4).setSelfStatus(e)}},{key:"getUserStatus",value:function(e){return this._get(4).getUserStatus(e)}},{key:"subscribeUserStatus",value:function(e){return this._get(4).subscribeUserStatus(e)}},{key:"unsubscribeUserStatus",value:function(e){return this._get(4).unsubscribeUserStatus(e)}},{key:"getFriendList",value:function(){var e=this._get(8);return e?e.getLocalFriendList():Cn({code:Un.NO_MODULE})}},{key:"addFriend",value:function(e){var t=this._get(8);return t?t.addFriend(e):Cn({code:Un.NO_MODULE})}},{key:"deleteFriend",value:function(e){var t=this._get(8);return t?t.deleteFriend(e):Cn({code:Un.NO_MODULE})}},{key:"checkFriend",value:function(e){var t=this._get(8);return t?t.checkFriend(e):Cn({code:Un.NO_MODULE})}},{key:"getFriendProfile",value:function(e){var t=this._get(8);return t?t.getFriendProfile(e):Cn({code:Un.NO_MODULE})}},{key:"updateFriend",value:function(e){var t=this._get(8);return t?t.updateFriend(e):Cn({code:Un.NO_MODULE})}},{key:"getFriendApplicationList",value:function(){var e=this._get(8);return e?e.getLocalFriendApplicationList():Cn({code:Un.NO_MODULE})}},{key:"acceptFriendApplication",value:function(e){var t=this._get(8);return t?t.acceptFriendApplication(e):Cn({code:Un.NO_MODULE})}},{key:"refuseFriendApplication",value:function(e){var t=this._get(8);return t?t.refuseFriendApplication(e):Cn({code:Un.NO_MODULE})}},{key:"deleteFriendApplication",value:function(e){var t=this._get(8);return t?t.deleteFriendApplication(e):Cn({code:Un.NO_MODULE})}},{key:"setFriendApplicationRead",value:function(){var e=this._get(8);return e?e.setFriendApplicationRead():Cn({code:Un.NO_MODULE})}},{key:"getFriendGroupList",value:function(){var e=this._get(8);return e?e.getLocalFriendGroupList():Cn({code:Un.NO_MODULE})}},{key:"createFriendGroup",value:function(e){var t=this._get(8);return t?t.createFriendGroup(e):Cn({code:Un.NO_MODULE})}},{key:"deleteFriendGroup",value:function(e){var t=this._get(8);return t?t.deleteFriendGroup(e):Cn({code:Un.NO_MODULE})}},{key:"addToFriendGroup",value:function(e){var t=this._get(8);return t?t.addToFriendGroup(e):Cn({code:Un.NO_MODULE})}},{key:"removeFromFriendGroup",value:function(e){var t=this._get(8);return t?t.removeFromFriendGroup(e):Cn({code:Un.NO_MODULE})}},{key:"renameFriendGroup",value:function(e){var t=this._get(8);return t?t.renameFriendGroup(e):Cn({code:Un.NO_MODULE})}},{key:"followUser",value:function(e){var t=this._get(35);return t?t.followUser(e):Cn({code:Un.NO_MODULE})}},{key:"unfollowUser",value:function(e){var t=this._get(35);return t?t.unfollowUser(e):Cn({code:Un.NO_MODULE})}},{key:"getMyFollowersList",value:function(e){var t=this._get(35);return t?t.getMyFollowersList(e):Cn({code:Un.NO_MODULE})}},{key:"getMyFollowingList",value:function(e){var t=this._get(35);return t?t.getMyFollowingList(e):Cn({code:Un.NO_MODULE})}},{key:"getMutualFollowersList",value:function(e){var t=this._get(35);return t?t.getMutualFollowersList(e):Cn({code:Un.NO_MODULE})}},{key:"getUserFollowInfo",value:function(e){var t=this._get(35);return t?t.getUserFollowInfo(e):Cn({code:Un.NO_MODULE})}},{key:"checkFollowType",value:function(e){var t=this._get(35);return t?t.checkFollowType(e):Cn({code:Un.NO_MODULE})}},{key:"getGroupList",value:function(){var e=this._get(7);return e?e.getGroupList():Cn({code:Un.NO_MODULE})}},{key:"getGroupProfile",value:function(e){var t=this._get(7);return t?t.getGroupProfile(e):Cn({code:Un.NO_MODULE})}},{key:"createGroup",value:function(e){var t=this._get(7);return t?t.createGroup(e):Cn({code:Un.NO_MODULE})}},{key:"dismissGroup",value:function(e){var t=this._get(7);return t?t.dismissGroup(e):Cn({code:Un.NO_MODULE})}},{key:"updateGroupProfile",value:function(e){var t=this._get(7);return t?t.updateGroupProfile(e):Cn({code:Un.NO_MODULE})}},{key:"joinGroup",value:function(e){var t=this._get(7);return t?t.joinGroup(e):Cn({code:Un.NO_MODULE})}},{key:"quitGroup",value:function(e){var t=this._get(7);return t?t.quitGroup(e):Cn({code:Un.NO_MODULE})}},{key:"searchGroupByID",value:function(e){var t=this._get(7);return t?t.searchGroupByID(e):Cn({code:Un.NO_MODULE})}},{key:"getGroupOnlineMemberCount",value:function(e){var t=this._get(7);return t?t.getGroupOnlineMemberCount(e):Cn({code:Un.NO_MODULE})}},{key:"changeGroupOwner",value:function(e){var t=this._get(7);return t?t.changeGroupOwner(e):Cn({code:Un.NO_MODULE})}},{key:"getGroupApplicationList",value:function(){var e=this._get(7);return e?e.getGroupApplicationList():Cn({code:Un.NO_MODULE})}},{key:"handleGroupApplication",value:function(e){var t=this._get(7);return t?t.handleGroupApplication(e):Cn({code:Un.NO_MODULE})}},{key:"initGroupAttributes",value:function(e){var t=this._get(7);return t?t.initGroupAttributes(e):Cn({code:Un.NO_MODULE})}},{key:"setGroupAttributes",value:function(e){var t=this._get(7);return t?t.setGroupAttributes(e):Cn({code:Un.NO_MODULE})}},{key:"deleteGroupAttributes",value:function(e){var t=this._get(7);return t?t.deleteGroupAttributes(e):Cn({code:Un.NO_MODULE})}},{key:"getGroupAttributes",value:function(e){var t=this._get(7);return t?t.getGroupAttributes(e):Cn({code:Un.NO_MODULE})}},{key:"setGroupCounters",value:function(e){var t=this._get(7);return t?t.setGroupCounters(e):Cn({code:Un.NO_MODULE})}},{key:"increaseGroupCounter",value:function(e){var t=this._get(7);return t?t.increaseGroupCounter(e):Cn({code:Un.NO_MODULE})}},{key:"decreaseGroupCounter",value:function(e){var t=this._get(7);return t?t.decreaseGroupCounter(e):Cn({code:Un.NO_MODULE})}},{key:"getGroupCounters",value:function(e){var t=this._get(7);return t?t.getGroupCounters(e):Cn({code:Un.NO_MODULE})}},{key:"getGroupMemberList",value:function(e){var t=this._get(7);return t?t.getGroupMemberList(e):Cn({code:Un.NO_MODULE})}},{key:"getGroupMemberProfile",value:function(e){var t=this._get(7);return t?t.getGroupMemberProfile(e):Cn({code:Un.NO_MODULE})}},{key:"addGroupMember",value:function(e){var t=this._get(7);return t?t.addGroupMember(e):Cn({code:Un.NO_MODULE})}},{key:"deleteGroupMember",value:function(e){var t=this._get(7);return t?t.deleteGroupMember(e):Cn({code:Un.NO_MODULE})}},{key:"setGroupMemberMuteTime",value:function(e){var t=this._get(7);return t?t.setGroupMemberMuteTime(e):Cn({code:Un.NO_MODULE})}},{key:"setGroupMemberRole",value:function(e){var t=this._get(7);return t?t.setGroupMemberRole(e):Cn({code:Un.NO_MODULE})}},{key:"setGroupMemberNameCard",value:function(e){var t=this._get(7);return t?t.setGroupMemberNameCard(e):Cn({code:Un.NO_MODULE})}},{key:"setGroupMemberCustomField",value:function(e){var t=this._get(7);return t?t.setGroupMemberCustomField(e):Cn({code:Un.NO_MODULE})}},{key:"markGroupMemberList",value:function(e){var t=this._get(7);return t?t.markGroupMemberList(e):Cn({code:Un.NO_MODULE})}},{key:"getJoinedCommunityList",value:function(){return this._get(10).getJoinedCommunityList()}},{key:"createTopicInCommunity",value:function(e){return this._get(10).createTopicInCommunity(e)}},{key:"deleteTopicFromCommunity",value:function(e){return this._get(10).deleteTopicFromCommunity(e)}},{key:"updateTopicProfile",value:function(e){return this._get(10).updateTopicProfile(e)}},{key:"getTopicList",value:function(e){return this._get(10).getTopicList(e)}},{key:"addSignalingListener",value:function(e,t,n){var o=this._get(33);o&&o.addSignalingListener(e,this._safetyCallbackFactory.defense(e,t,n),n)}},{key:"removeSignalingListener",value:function(e,t,n){var o,i=this._safetyCallbackFactory.find(e,t);null===i||(o=this._get(33))&&(o.removeSignalingListener(e,i,n),this._safetyCallbackFactory.delete(e,t))}},{key:"invite",value:function(e){var t=this._get(33);return t?t.invite(e):Cn({code:Un.NO_MODULE})}},{key:"inviteSync",value:function(e,t,n){var o=this._get(33);return o?o.inviteSync(e,t,n):""}},{key:"inviteInGroup",value:function(e){var t=this._get(33);return t?t.invite(e):Cn({code:Un.NO_MODULE})}},{key:"inviteInGroupSync",value:function(e,t,n){var o=this._get(33);return o?o.inviteSync(e,t,n):""}},{key:"cancel",value:function(e){var t=this._get(33);return t?t.cancel(e):Cn({code:Un.NO_MODULE})}},{key:"accept",value:function(e){var t=this._get(33);return t?t.accept(e):Cn({code:Un.NO_MODULE})}},{key:"reject",value:function(e){var t=this._get(33);return t?t.reject(e):Cn({code:Un.NO_MODULE})}},{key:"getSignalingInfo",value:function(e){var t=this._get(33);return t?t.getSignalingInfo(e):null}},{key:"modifyInvitation",value:function(e){var t=this._get(33);return t?t.modifyInvitation(e):Cn({code:Un.NO_MODULE})}}]),Rc),Oc={login:1,logout:1,getLoginUser:1,destroy:1,on:1,off:1,ready:1,setLogLevel:1,joinGroup:1,quitGroup:1,registerPlugin:1,getGroupOnlineMemberCount:1,isReady:1,addSignalingListener:1,removeSignalingListener:1,callExperimentalAPI:1};function Rc(e){r(this,Rc),e={SDKAppID:e.SDKAppID,unlimitedAVChatRoom:e.unlimitedAVChatRoom||!1,scene:e.scene||"",oversea:e.oversea||!1,instanceID:Lt(),devMode:e.devMode||!1,testEnv:e.testEnv||!1,proxyServer:e.proxyServer||void 0,fileUploadProxy:e.fileUploadProxy||void 0,fileDownloadProxy:e.fileDownloadProxy||e.fileUploadProxy||void 0,eventThrottling:!1!==e.eventThrottling,partialUpdatedConversations:!0===e.partialUpdatedConversations,modules:e.modules||void 0},this._m=new Dc(e),this._safetyCallbackFactory=new Ac(this._m)}function wc(e){r(this,wc),this._funcMap=new Map,this._m=e,this._n="SafetyCallback",this._reportCount=0}function Nc(e){var t=this;r(this,Nc);var n,o=new eo("sdkConstruct"),i=(this._n="ModuleManager",this._isReady=!1,this._reason=Un.USER_NOT_LOGGED_IN,this._startLoginTs=0,this._map=new Map,this._optionalModuleMap=new Map,this._iEmitter=null,this._oEmitter=null,this._checkCount=0,this._checkTimer=-1,this._map.set(12,new Ri(this,e)),this._map.set(37,new kc(this)),this._map.set(15,new hr(this)),this._map.set(27,new rs(this)),this._map.set(23,new Ha(this)),this._map.set(24,new os(this)),this._map.set(26,new $a(this)),this._map.set(21,new fa(this)),this._map.set(20,new Va(this)),this._map.set(1,new Ni(this)),this._map.set(2,new Fr(this)),this._map.set(3,new qr(this)),this._map.set(34,new Br(this)),this._map.set(31,new Vr(this)),this._map.set(4,new Oi(this)),this._map.set(6,new qo(this)),this._map.set(11,new li(this)),this._map.set(7,new bi(this)),this._map.set(10,new Ei(this)),this._map.set(13,new ur(this)),this._map.set(32,new ls(this)),this._map.set(14,new dr(this)),this._map.set(17,new Tr(this)),this._map.set(18,new Hr(this)),this._map.set(19,new jr(this)),this._map.set(25,new ja(this)),this._map.set(8,new ns(this)),this._map.set(28,new as(this)),this._map.set(36,new ss(this)),this._map.set(29,new cs(this)),this._map.set(30,new us(this)),this._map.set(33,new vs(this)),this._map.set(35,new Ms(this)),this._eventThrottleMap=new Map,this._eventThrottling=e.eventThrottling,$e(e.modules)?(Object.keys(e.modules).forEach((function(o){n=e.modules[o],"group-module"===o?t._map.set(7,new n(t)):"relationship-module"===o?t._map.set(8,new n(t)):"signaling-module"===o?t._map.set(33,new n(t)):"follow-module"===o&&t._map.set(35,new n(t)),t._optionalModuleMap.set(o,1)})),this._map.get(12).setUsingChatCore(!0)):this._map.has(7)||this._map.get(12).setUsingChatCore(!0),e.instanceID),a=e.SDKAppID,s=this._map.get(12).isIntl(),c=this._map.get(12).isUsingChatCore();i="instanceID:".concat(i," SDKAppID:").concat(a," isIntl:").concat(s," isUsingChatCore:").concat(c," host:").concat(Ot())+" isIOSWebView:".concat(ye," platform:").concat(ae," canIUseInflate:").concat(this.canIUseInflate())+" workerAvailable:".concat(_e," UserAgent:").concat(re);eo.bindEventStatModule(this._map.get(14)),eo.bindNetMonitorModule(this._map.get(15)),o.setMessage("".concat(i," ").concat(function(){var e="";if(ee)try{var t=ie.getSystemInfoSync(),n=t.model,o=t.version,i=t.system,r=t.platform,a=t.SDKVersion;e="model:".concat(n," version:").concat(o," system:").concat(i," platform:").concat(r," SDKVersion:").concat(a)}catch(t){e=""}return e}())).end(),we.i("SDK ".concat(i)),Gn.prototype._getErrMsg=this.getErrMsg.bind(this),this._readyList=void 0,this._ssoLogForReady=null,this._initReadyList()}function Pc(e){r(this,Pc),this._m=e,this._n="InflateModule",this._bLogForInflateOK=!1,this._bLogForInflateError=!1}var Gc={};Q={create:function(e){var n="TencentCloudChat.create",o=0,i=e.SDKAppID;if(Ye(i))o=i;else if(o=parseInt(i),isNaN(i))return we.e("".concat(n," failed. Failed to parse the SDKAppID, please check the arguments")),null;if(o&&Gc[o])return Gc[o];we.l("".concat(n));var r,a;i=new Lc(t(t({},e),{},{SDKAppID:o})),i.on(E.SDK_DESTROY,(function(e){Gc[e.data.SDKAppID]=null,delete Gc[e.data.SDKAppID]})),r=i,a=Object.create(null),Object.keys(Pn).forEach((function(e){var t;r[e]&&(t=new A,a[e]=function(){var n=Array.from(arguments);return t.use((function(t,n){var o=function(e,t){if(e.isReady()||1===Oc[t])return!0;var n={code:n=e.getNotReadyReason(),message:"".concat(e.getErrMsg(n)," | ").concat(t," | ").concat(e.getErrMsg(Un.SDK_IS_NOT_READY))};return e.onError(n),n}(r,e);return!0===o?n():Cn(o)})).use((function(t,n){if(!0===function(e,t,n){if(void 0===t)return!0;var o=!0;if($e(t))Object.keys(t).forEach((function(i){var r=1===e.length?e[0][i]:void 0;o=!!$t(r,t[i],n,i)&&o}));else if(Xe(t))for(var i=0;i<t.length;i++)o=!!$t(e[i],t[i],n,t[i].name)&&o;if(o)return o;throw new Error("Params validate failed.")}(t,Nn[e],e))return n()})).use((function(t,n){return r[e].apply(r,t)})),t.run(n)})})),e=a;return Gc[o]=e,Nn.hookGetAPITips(i.getErrMsg.bind(i)),we.l("".concat(n," ok")),e}};return Q.TYPES=k,Q.EVENT=E,Q.TSignaling=D,Q.VERSION="3.4.3",we.l("TencentCloudChat.VERSION:".concat(Q.VERSION)),Q}))}).call(this,n("0ee4"),n("ba7c")["default"])},"59d2":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("017d"));t.default=function(e){return(0,i.default)(e)}},"59df":function(e,t,n){"use strict";n.r(t);var o=n("cb37");for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var r=n("828b"),a=Object(r["a"])(o["default"],void 0,void 0,!1,null,null,null,!1,void 0,void 0);t["default"]=a.exports},"59f8":function(e,t,n){var o=n("3c5d"),i=n("d47e"),r=n("83b3").CONSTRUCTOR;e.exports=r||!i((function(e){o.all(e).then(void 0,(function(){}))}))},"5a56":function(e,t,n){"use strict";var o=n("8bdb"),i=n("85c1"),r=n("6aa6"),a=n("0b5a"),s=n("d6b1").f,c=n("338c"),u=n("b720"),l=n("dcda"),d=n("e7da"),f=n("e6a2"),p=n("7e87"),h=n("ab4a"),g=n("a734"),_=r("Error"),v=r("DOMException"),m=function(){u(this,y);var e=arguments.length,t=d(e<1?void 0:arguments[0]),n=d(e<2?void 0:arguments[1],"Error"),o=new v(t,n),i=new _(t);return i.name="DOMException",s(o,"stack",a(1,p(i.stack,1))),l(o,this,m),o},y=m.prototype=v.prototype,M="stack"in new _("DOMException"),I="stack"in new v(1,2),C=v&&h&&Object.getOwnPropertyDescriptor(i,"DOMException"),b=!!C&&!(C.writable&&C.configurable),T=M&&!b&&!I;o({global:!0,constructor:!0,forced:g||T},{DOMException:T?m:v});var S=r("DOMException"),E=S.prototype;if(E.constructor!==S)for(var k in g||s(E,"constructor",a(1,S)),f)if(c(f,k)){var D=f[k],A=D.s;c(S,A)||s(S,A,a(6,D.c))}},"5ac7":function(e,t,n){"use strict";var o=n("8bdb"),i=n("bb80"),r=n("b6a1"),a=n("862c"),s=n("9e70"),c=n("0931"),u=i("".indexOf);o({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~u(s(a(this)),s(r(e)),arguments.length>1?arguments[1]:void 0)}})},"5b1a":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={code:{seconds:60,startText:"获取验证码",changeText:"X秒重新获取",endText:"重新获取",keepRunning:!1,uniqueKey:""}}},"5b2c":function(e,t,n){"use strict";var o=n("af71");e.exports=o&&!!Symbol["for"]&&!!Symbol.keyFor},"5b55":function(e,t,n){"use strict";n.r(t);var o=n("659dc"),i=n("1e3f");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a=n("828b"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},"5c0d":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={columnNotice:{text:"",icon:"volume",mode:"",color:"#f9ae3d",bgColor:"#fdf6ec",fontSize:14,speed:80,step:!1,duration:1500,disableTouch:!0}}},"5c47":function(e,t,n){"use strict";var o=n("8bdb"),i=n("9ad8");o({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},"5cc2":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("64aa"),n("4626"),n("5ac7"),n("c223"),n("5ef2"),n("e838");var o=n("c47d"),i=["done","go","next","search","send"],r=["none","text","decimal","numeric","tel","search","email","url"],a={name:"Textarea",mixins:[o.field],props:{name:{type:String,default:""},maxlength:{type:[Number,String],default:140},placeholder:{type:String,default:""},disabled:{type:[Boolean,String],default:!1},placeholderClass:{type:String,default:"textarea-placeholder"},placeholderStyle:{type:String,default:""},autoHeight:{type:[Boolean,String],default:!1},confirmType:{type:String,default:"return",validator:function(e){return i.concat("return").includes(e)}},inputmode:{type:String,default:void 0,validator:function(e){return!!~r.indexOf(e)}},cursorColor:{type:String,default:""}},data:function(){return{valueComposition:"",height:0,focusChangeSource:"",fixMargin:0===String(navigator.platform).indexOf("iP")&&0===String(navigator.vendor).indexOf("Apple")&&"(prefers-color-scheme: dark)"!==window.matchMedia("(prefers-color-scheme: dark)").media}},computed:{maxlengthNumber:function(){var e=Number(this.maxlength);return isNaN(e)?140:e},valueCompute:function(){return(this.composing?this.valueComposition:this.valueSync).split("\n")},isDone:function(){return i.includes(this.confirmType)}},watch:{focus:function(e){e&&(this.focusChangeSource="focus")},height:function(e){var t=parseFloat(getComputedStyle(this.$el).lineHeight);isNaN(t)&&(t=this.$refs.line.offsetHeight);var n=Math.round(e/t);this.$trigger("linechange",{},{height:e,heightRpx:750/window.innerWidth*e,lineCount:n}),this.autoHeight&&(this.$el.style.height="auto",this.$refs.wrapper.style.height=this.height+"px")}},created:function(){this.$dispatch("Form","uni-form-group-update",{type:"add",vm:this})},mounted:function(){this._resize({height:this.$refs.sensor.$el.offsetHeight});var e=this;while(e){var t=e.$options._scopeId;t&&this.$refs.placeholder.setAttribute(t,""),e=e.$parent}},beforeDestroy:function(){this.$dispatch("Form","uni-form-group-update",{type:"remove",vm:this})},methods:{_onKeyDownEnter:function(e){this.isDone&&e.preventDefault()},_onKeyUpEnter:function(e){this.isDone&&(this._confirm(e),!this.confirmHold&&this.$refs.textarea.blur())},_onComposition:function(e){switch(e.type){case"compositionstart":this.composing=!0;break;case"compositionend":this.composing&&(this.composing=!1,this._onInput(e));break}!this.ignoreCompositionEvent&&this.$trigger(e.type,e,{data:e.data})},_confirm:function(e){this.$trigger("confirm",e,{value:this.valueSync})},_linechange:function(e){this.$trigger("linechange",e,{value:this.valueSync})},_onTouchstart:function(){this.focusChangeSource="touch"},_resize:function(e){var t=e.height;this.height=t},_onInput:function(e,t){this.composing&&this.ignoreCompositionEvent?this.valueComposition=e.target.value:(this.ignoreCompositionEvent||(this.valueSync=this.$refs.textarea.value),this.$triggerInput(e,{value:this.valueSync,cursor:this.$refs.textarea.selectionEnd},t))},_getFormData:function(){return{value:this.valueSync,key:this.name}},_resetFormData:function(){this.valueSync=""}}};t.default=a},"5d09":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={toast:{zIndex:10090,loading:!1,text:"",icon:"",type:"",loadingMode:"",show:"",overlay:!1,position:"center",params:function(){},duration:2e3,isTab:!1,url:"",callback:null,back:!1}}},"5d56":function(e,t,n){"use strict";var o=n("bb80"),i=n("ac5f"),r=n("474f"),a=n("ada5"),s=n("9e70"),c=o([].push);e.exports=function(e){if(r(e))return e;if(i(e)){for(var t=e.length,n=[],o=0;o<t;o++){var u=e[o];"string"==typeof u?c(n,u):"number"!=typeof u&&"Number"!==a(u)&&"String"!==a(u)||c(n,s(u))}var l=n.length,d=!0;return function(e,t){if(d)return d=!1,t;if(i(this))return t;for(var o=0;o<l;o++)if(n[o]===e)return t}}}},"5d6b":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!e)return;if("string"===typeof e)return(0,o.default)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return(0,o.default)(e,t)},n("f7a5"),n("bf0f"),n("08eb"),n("18f7"),n("5c47"),n("0506");var o=function(e){return e&&e.__esModule?e:{default:e}}(n("8d0b"))},"5d6e":function(e,t,n){"use strict";var o=n("af9e");e.exports=o((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},"5de6":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,o.default)(e)||(0,i.default)(e,t)||(0,r.default)(e,t)||(0,a.default)()};var o=s(n("6242")),i=s(n("1d18")),r=s(n("5d6b")),a=s(n("b7b1"));function s(e){return e&&e.__esModule?e:{default:e}}},"5dfa":function(e,t,n){"use strict";var o=n("e7e3"),i=n("5ee2"),r=n("1eb8"),a=n("8c08"),s=a("species");e.exports=function(e,t){var n,a=o(e).constructor;return void 0===a||r(n=o(a)[s])?t:i(n)}},"5e54":function(e,t,n){"use strict";var o=n("7ddb"),i=n("4d16").map,r=n("323c"),a=o.aTypedArray,s=o.exportTypedArrayMethod;s("map",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(r(e))(t)}))}))},"5e58":function(e,t,n){"use strict";(function(e){var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("bf0f"),n("2797"),n("5ef2"),n("f7a5"),n("5c47"),n("af8f"),n("2c10"),n("aa9c"),n("dc8a"),n("c223"),n("6a54");var i=o(n("bcdb")),r=n("c9ac"),a=n("71b7"),s=n("4984"),c=n("cb4b"),u=n("2f47"),l=n("c182"),d=n("1ffa");function f(e){var t=0;return e.forEach((function(e){e.meta.id&&t++})),t}function p(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":decodeURI(e.slice(t+1))}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=decodeURI(window.location.pathname),n=window.location.search,o=window.location.hash;return"/"===e[e.length-1]&&t===e.substring(0,e.length-1)&&(t=e,window.history.replaceState({},"",e+n+o)),e&&0===t.indexOf(e)&&(t=t.slice(e.length)),(t||"/")+n+o}var g={install:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.routes;t.config.devtools&&"undefined"!==typeof window&&-1!==window.navigator.userAgent.toLowerCase().indexOf("hbuilderx")&&(t.config.devtools=!1),(0,u.initPolyfill)(t),(0,c.lifecycleMixin)(t),(0,d.uniIdMixin)(t),"undefined"!==typeof __UNI_ROUTER_BASE__&&(__uniConfig.router.base=__UNI_ROUTER_BASE__);var g=f(o),_=new i.default({id:g,mode:__uniConfig.router.mode,base:__uniConfig.router.base,routes:o,scrollBehavior:function(e,t,n){if(n)return n;if(e&&t&&e.meta.isTabBar&&t.meta.isTabBar){var o=(0,l.getTabBarScrollPosition)(e.params.__id__);if(o)return o}return{x:0,y:0}}}),v=[],m=_.match("history"===__uniConfig.router.mode?h(__uniConfig.router.base):p());if(m.meta.name&&(m.meta.id?v.push(m.meta.name+"-"+m.meta.id):v.push(m.meta.name+"-"+(g+1))),m.meta&&m.meta.name&&(document.body.className="uni-body "+m.meta.name,m.meta.isNVue)){var y="nvue-dir-"+__uniConfig.nvue["flex-direction"];document.body.setAttribute("nvue",""),document.body.setAttribute(y,"")}t.mixin({beforeCreate:function(){var n=this.$options;if("app"===n.mpType){n.data=function(){return{keepAliveInclude:v}};var i=(0,a.createAppMixin)(t,o,m);Object.keys(i).forEach((function(e){n[e]=n[e]?[].concat(i[e],n[e]):[i[e]]})),n.router=_,Array.isArray(n.onError)&&0!==n.onError.length||(n.onError=[function(t){e.error(t)}])}else if((0,r.isPage)(this)){var c=(0,s.createPageMixin)();Object.keys(c).forEach((function(e){n.mpOptions?n[e]=n[e]?[].concat(n[e],c[e]):[c[e]]:n[e]=n[e]?[].concat(c[e],n[e]):[c[e]]}))}else this.$parent&&this.$parent.__page__&&(this.__page__=this.$parent.__page__)}}),Object.defineProperty(t.prototype,"$page",{get:function(){return this.__page__}}),t.prototype.createSelectorQuery=function(){return uni.createSelectorQuery().in(this)},t.prototype.createIntersectionObserver=function(e){return uni.createIntersectionObserver(this,e)},t.prototype.createMediaQueryObserver=function(e){return uni.createMediaQueryObserver(this,e)},t.use(i.default)}};t.default=g}).call(this,n("ba7c")["default"])},"5e74":function(e,t,n){(function(o){var i,r,a,s=n("bdbb").default;n("4085"),n("4db2"),n("bf0f"),n("295e"),n("4d8f"),n("7b97"),n("668a"),n("c5b7"),n("8ff5"),n("2378"),n("641a"),n("64e0"),n("cce3"),n("efba"),n("d009"),n("bd7d"),n("7edd"),n("d798"),n("f547"),n("5e54"),n("b60a"),n("8c18"),n("12973"),n("f991"),n("198e"),n("8557"),n("63b1"),n("1954"),n("1cf1"),n("7a76"),n("c9b5"),n("ab80"),n("f7a5"),n("aa9c"),n("e966"),n("c223"),n("dd2b"),function(n,o){"object"===s(t)?e.exports=t=o():(r=[],i=o,a="function"===typeof i?i.apply(t,r):i,void 0===a||(e.exports=a))}(0,(function(){var e=e||function(e,t){var i;if("undefined"!==typeof window&&window.crypto&&(i=window.crypto),"undefined"!==typeof self&&self.crypto&&(i=self.crypto),"undefined"!==typeof globalThis&&globalThis.crypto&&(i=globalThis.crypto),!i&&"undefined"!==typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&"undefined"!==typeof o&&o.crypto&&(i=o.crypto),!i)try{i=n(1)}catch(v){}var r=function(){if(i){if("function"===typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(v){}if("function"===typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(v){}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),s={},c=s.lib={},u=c.Base=function(){return{extend:function(e){var t=a(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),l=c.WordArray=u.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||f).stringify(this)},concat:function(e){var t=this.words,n=e.words,o=this.sigBytes,i=e.sigBytes;if(this.clamp(),o%4)for(var r=0;r<i;r++){var a=n[r>>>2]>>>24-r%4*8&255;t[o+r>>>2]|=a<<24-(o+r)%4*8}else for(var s=0;s<i;s+=4)t[o+s>>>2]=n[s>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=u.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(r());return new l.init(t,e)}}),d=s.enc={},f=d.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],i=0;i<n;i++){var r=t[i>>>2]>>>24-i%4*8&255;o.push((r>>>4).toString(16)),o.push((15&r).toString(16))}return o.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o+=2)n[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new l.init(n,t/2)}},p=d.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],i=0;i<n;i++){var r=t[i>>>2]>>>24-i%4*8&255;o.push(String.fromCharCode(r))}return o.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o++)n[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new l.init(n,t)}},h=d.Utf8={stringify:function(e){try{return decodeURIComponent(escape(p.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return p.parse(unescape(encodeURIComponent(e)))}},g=c.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,o=this._data,i=o.words,r=o.sigBytes,a=this.blockSize,s=4*a,c=r/s;c=t?e.ceil(c):e.max((0|c)-this._minBufferSize,0);var u=c*a,d=e.min(4*u,r);if(u){for(var f=0;f<u;f+=a)this._doProcessBlock(i,f);n=i.splice(0,u),o.sigBytes-=d}return new l.init(n,d)},clone:function(){var e=u.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),_=(c.Hasher=g.extend({cfg:u.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new _.HMAC.init(e,n).finalize(t)}}}),s.algo={});return s}(Math);return e}))}).call(this,n("0ee4"))},"5ee2":function(e,t,n){"use strict";var o=n("8ae2"),i=n("52df"),r=TypeError;e.exports=function(e){if(o(e))return e;throw new r(i(e)+" is not a constructor")}},"5eef":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("bf0f"),n("aa9c"),n("5ef2"),n("dd2b");var o,i=n("1ffa"),r=!i.supportsPassive||{passive:!0,capture:!0},a=[],s=0;function c(e){a.forEach((function(t){return t.userInteract=e}))}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!o){var t=["touchstart","touchmove","touchend","mousedown","mouseup"];t.forEach((function(e){document.addEventListener(e,(function(){!s&&c(!0),s++,setTimeout((function(){!--s&&c(!1)}),0)}),r)})),o=!0}a.push(e)}var l={data:function(){return{userInteract:!1}},mounted:function(){u(this)},beforeDestroy:function(){(function(e){var t=a.indexOf(e);t>=0&&a.splice(t,1)})(this)},addInteractListener:u,getStatus:function(){return!!s}};t.default=l},"5ef2":function(e,t,n){"use strict";var o=n("8bdb"),i=n("9f69"),r=n("036b").indexOf,a=n("2b04"),s=i([].indexOf),c=!!s&&1/s([1],1,-0)<0,u=c||!a("indexOf");o({target:"Array",proto:!0,forced:u},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return c?s(this,e,t)||0:r(this,e,t)}})},"5f00":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("bf0f"),n("2797"),n("473f"),n("e838"),n("aa9c"),n("c223");var o=n("1ffa"),i=n("1d16");function r(e){return Math.sqrt(e.x*e.x+e.y*e.y)}var a={name:"MovableArea",props:{scaleArea:{type:Boolean,default:!1}},data:function(){return{width:0,height:0,items:[]}},created:function(){this.gapV={x:null,y:null},this.pinchStartLen=null},mounted:function(){this._resize(),(0,i.initScrollBounce)()},methods:{_resize:function(){this._getWH(),this.items.forEach((function(e,t){e.componentInstance.setParent()}))},_find:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.items,n=this.$el;function o(e){for(var i=0;i<t.length;i++){var r=t[i];if(e===r.componentInstance.$el)return r}return e===n||e===document.body||e===document?null:o(e.parentNode)}return o(e)},_touchstart:function(e){(0,i.disableScrollBounce)({disable:!0});var t=e.touches;if(t&&t.length>1){var n={x:t[1].pageX-t[0].pageX,y:t[1].pageY-t[0].pageY};if(this.pinchStartLen=r(n),this.gapV=n,!this.scaleArea){var o=this._find(t[0].target),a=this._find(t[1].target);this._scaleMovableView=o&&o===a?o:null}}},_touchmove:function(e){var t=e.touches;if(t&&t.length>1){e.preventDefault();var n={x:t[1].pageX-t[0].pageX,y:t[1].pageY-t[0].pageY};if(null!==this.gapV.x&&this.pinchStartLen>0){var o=r(n)/this.pinchStartLen;this._updateScale(o)}this.gapV=n}},_touchend:function(e){(0,i.disableScrollBounce)({disable:!1});var t=e.touches;t&&t.length||e.changedTouches&&(this.gapV.x=0,this.gapV.y=0,this.pinchStartLen=null,this.scaleArea?this.items.forEach((function(e){e.componentInstance._endScale()})):this._scaleMovableView&&this._scaleMovableView.componentInstance._endScale())},_updateScale:function(e){e&&1!==e&&(this.scaleArea?this.items.forEach((function(t){t.componentInstance._setScale(e)})):this._scaleMovableView&&this._scaleMovableView.componentInstance._setScale(e))},_getWH:function(){var e=window.getComputedStyle(this.$el),t=this.$el.getBoundingClientRect();this.width=t.width-["Left","Right"].reduce((function(t,n){return t+parseFloat(e["border"+n+"Width"])+parseFloat(e["padding"+n])}),0),this.height=t.height-["Top","Bottom"].reduce((function(t,n){return t+parseFloat(e["border"+n+"Width"])+parseFloat(e["padding"+n])}),0)}},render:function(e){var t=this,n=[],i=this.$slots.default&&(0,o.deepClone)(this.$slots.default,e);i&&i.forEach((function(e){e.componentOptions&&"v-uni-movable-view"===e.componentOptions.tag&&n.push(e)})),this.items=n;var r=Object.assign({},this.$listeners);return["touchstart","touchmove","touchend"].forEach((function(e){var n=r[e],o=t["_".concat(e)];r[e]=n?[].concat(n,o):o})),e("uni-movable-area",{on:r},[e("v-uni-resize-sensor",{on:{resize:this._resize}}),i])}};t.default=a},"5fd9":function(e,t,n){"use strict";var o=n("29d8"),i=o.match(/firefox\/(\d+)/i);e.exports=!!i&&+i[1]},"60bc":function(e,t,n){"use strict";var o=n("7992"),i=n("1eb8");e.exports=function(e,t){var n=e[t];return i(n)?void 0:o(n)}},"60bf":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.UNI_STORAGE_LOCALE=t.TABBAR_HEIGHT=t.RESPONSIVE_MIN_WIDTH=t.ON_THEME_CHANGE=t.NAVBAR_HEIGHT=void 0;t.NAVBAR_HEIGHT=44;t.TABBAR_HEIGHT=50;t.RESPONSIVE_MIN_WIDTH=768;t.UNI_STORAGE_LOCALE="UNI_LOCALE";t.ON_THEME_CHANGE="onThemeChange"},"60d7":function(e,t,n){"use strict";(function(e){n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.destroyMediaQueryObserver=function(t){var n=t.reqId,r=i[n],a=o[n];a&&(a.removeListener(r),delete o[n],e.publishHandler("onRequestMediaQueryObserver",{reqId:n,reqEnd:!0}))},t.requestMediaQueryObserver=function(t){var n=t.reqId,a=t.options,s=o[n]=window.matchMedia(function(e){for(var t=[],n=0,o=["width","minWidth","maxWidth","height","minHeight","maxHeight","orientation"];n<o.length;n++){var i=o[n];"orientation"!==i&&""!==e[i]&&Number(e[i])>=0&&t.push("(".concat(r(i),": ").concat(Number(e[i]),"px)")),"orientation"===i&&e[i]&&t.push("(".concat(r(i),": ").concat(e[i],")"))}return t=t.join(" and "),t}(a)),c=i[n]=function(t){e.publishHandler("onRequestMediaQueryObserver",{reqId:n,res:t.matches})};c(s),s.addListener(c)},n("64aa"),n("aa9c"),n("c223"),n("5c47"),n("a1c1");var o={},i={};function r(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}}).call(this,n("b8be"))},6158:function(e,t,n){"use strict";var o=n("ae5c"),i=n("7e41"),r=n("1099"),a=n("1fc1"),s=function(e){var t=1===e;return function(n,s,c){var u,l,d=r(n),f=i(d),p=a(f),h=o(s,c);while(p-- >0)if(u=f[p],l=h(u,p,d),l)switch(e){case 0:return u;case 1:return p}return t?-1:void 0}};e.exports={findLast:s(0),findLastIndex:s(1)}},6175:function(e,t,n){"use strict";n.r(t);var o=n("bae6"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},"61a3":function(e,t,n){"use strict";var o=n("508d"),i=n("d7b8"),r=n("f439"),a=n("83b3").CONSTRUCTOR;o({target:"Promise",stat:!0,forced:a},{reject:function(e){var t=r.f(this);return i(t.reject,void 0,e),t.promise}})},6228:function(e,t,n){"use strict";n.r(t);var o=n("1415"),i=n("b2a9");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a=n("828b"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},6242:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(Array.isArray(e))return e}},"629a":function(e,t,n){"use strict";var o;n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.uniIdMixin=function(e){e.prototype.uniIDHasRole=function(e){var t=a(),n=t.role;return n.indexOf(e)>-1},e.prototype.uniIDHasPermission=function(e){var t=a(),n=t.permission;return this.uniIDHasRole("admin")||n.indexOf(e)>-1},e.prototype.uniIDTokenValid=function(){var e=a(),t=e.tokenExpired;return t>Date.now()}},n("c9b5"),n("15d1"),n("d5c6"),n("5a56"),n("f074"),n("5c47"),n("a1c1"),n("0506"),n("7a76"),n("fd3c"),n("f7a5"),n("bf0f"),n("ab80"),n("5ef2");var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/;function a(){var e,t=uni.getStorageSync("uni_id_token")||"",n=t.split(".");if(!t||3!==n.length)return{uid:null,role:[],permission:[],tokenExpired:0};try{e=JSON.parse(function(e){return decodeURIComponent(o(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}(n[1]))}catch(i){throw new Error("获取当前用户信息出错，详细错误信息为："+i.message)}return e.tokenExpired=1e3*e.exp,delete e.exp,delete e.iat,e}o="function"!==typeof atob?function(e){if(e=String(e).replace(/[\t\n\f\r ]+/g,""),!r.test(e))throw new Error("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");var t;e+="==".slice(2-(3&e.length));for(var n,o,a="",s=0;s<e.length;)t=i.indexOf(e.charAt(s++))<<18|i.indexOf(e.charAt(s++))<<12|(n=i.indexOf(e.charAt(s++)))<<6|(o=i.indexOf(e.charAt(s++))),a+=64===n?String.fromCharCode(t>>16&255):64===o?String.fromCharCode(t>>16&255,t>>8&255):String.fromCharCode(t>>16&255,t>>8&255,255&t);return a}:atob},"62f7":function(e,t,n){"use strict";e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6314:function(e,t,n){var o=n("c86b"),i=n("d10a"),r=n("00ca"),a=n("ed01"),s=n("d191"),c=i([].concat);e.exports=o("Reflect","ownKeys")||function(e){var t=r.f(s(e)),n=a.f;return n?c(t,n(e)):t}},"632d":function(e,t,n){var o=n("1faa"),i=n("7aa6");e.exports=o&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},"637e":function(e,t,n){"use strict";(function(e){n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.tryCatch=function(t){return function(){try{return t.apply(t,arguments)}catch(n){e.error(n)}}},t.tryCatchFramework=function(t){return function(){try{return t.apply(t,arguments)}catch(n){e.error(n)}}}}).call(this,n("ba7c")["default"])},"63b1":function(e,t,n){"use strict";var o=n("85c1"),i=n("9f69"),r=n("af9e"),a=n("7992"),s=n("b643"),c=n("7ddb"),u=n("5fd9"),l=n("8d24"),d=n("0173"),f=n("a700"),p=c.aTypedArray,h=c.exportTypedArrayMethod,g=o.Uint16Array,_=g&&i(g.prototype.sort),v=!!_&&!(r((function(){_(new g(2),null)}))&&r((function(){_(new g(2),{})}))),m=!!_&&!r((function(){if(d)return d<74;if(u)return u<67;if(l)return!0;if(f)return f<602;var e,t,n=new g(516),o=Array(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,o[e]=e-2*t+3;for(_(n,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==o[e])return!0}));h("sort",(function(e){return void 0!==e&&a(e),m?_(this,e):s(p(this),function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!==n?-1:t!==t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}}(e))}),!m||v)},"63b7":function(e,t,n){"use strict";n.r(t);var o=n("5472"),i=n("7e63");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a=n("828b"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},"641a":function(e,t,n){"use strict";var o=n("7ddb"),i=n("4d16").findIndex,r=o.aTypedArray,a=o.exportTypedArrayMethod;a("findIndex",(function(e){return i(r(this),e,arguments.length>1?arguments[1]:void 0)}))},"643c":function(e,t,n){"use strict";(function(e){n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("1ffa"),i={data:function(){return{previewImage:{visible:!1}}},created:function(){var t=this;e.on("onShowPreviewImage",(function(e,n){t.previewImage=Object.assign({},e,{visible:!0}),(0,o.isFn)(n)&&t.$nextTick(n)})),e.on("onClosePreviewImage",(function(e){t._onPreviewClose(),(0,o.isFn)(e)&&t.$nextTick(e)})),e.on("onHidePopup",(function(e){t.previewImage.visible=!1}))},methods:{_onPreviewClose:function(e){this.previewImage.visible=!1}}};t.default=i}).call(this,n("ef66"))},6451:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("5c47"),n("0506"),n("bf0f");var i=o(n("2634")),r=o(n("2fdc")),a=o(n("80b1")),s=o(n("efe5")),c=function(){function e(){(0,a.default)(this,e),this.config={type:"navigateTo",url:"",delta:1,params:{},animationType:"pop-in",animationDuration:300,intercept:!1},this.route=this.route.bind(this)}return(0,s.default)(e,[{key:"addRootPath",value:function(e){return"/"===e[0]?e:"/".concat(e)}},{key:"mixinParam",value:function(e,t){e=e&&this.addRootPath(e);var n="";return/.*\/.*\?.*=.*/.test(e)?(n=uni.$u.queryParams(t,!1),e+"&".concat(n)):(n=uni.$u.queryParams(t),e+n)}},{key:"route",value:function(){var e=(0,r.default)((0,i.default)().mark((function e(){var t,n,o,r,a=arguments;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},o={},"string"===typeof t?(o.url=this.mixinParam(t,n),o.type="navigateTo"):(o=uni.$u.deepMerge(this.config,t),o.url=this.mixinParam(t.url,t.params)),o.url!==uni.$u.page()){e.next=6;break}return e.abrupt("return");case 6:if(n.intercept&&(this.config.intercept=n.intercept),o.params=n,o=uni.$u.deepMerge(this.config,o),"function"!==typeof uni.$u.routeIntercept){e.next=16;break}return e.next=12,new Promise((function(e,t){uni.$u.routeIntercept(o,e)}));case 12:r=e.sent,r&&this.openPage(o),e.next=17;break;case 16:this.openPage(o);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"openPage",value:function(e){var t=e.url,n=(e.type,e.delta),o=e.animationType,i=e.animationDuration;"navigateTo"!=e.type&&"to"!=e.type||uni.navigateTo({url:t,animationType:o,animationDuration:i}),"redirectTo"!=e.type&&"redirect"!=e.type||uni.redirectTo({url:t}),"switchTab"!=e.type&&"tab"!=e.type||uni.switchTab({url:t}),"reLaunch"!=e.type&&"launch"!=e.type||uni.reLaunch({url:t}),"navigateBack"!=e.type&&"back"!=e.type||uni.navigateBack({delta:n})}}]),e}(),u=(new c).route;t.default=u},"64aa":function(e,t,n){"use strict";var o=n("8bdb"),i=n("a734"),r=n("ab4a"),a=n("85c1"),s=n("a1d4"),c=n("bb80"),u=n("8466"),l=n("338c"),d=n("dcda"),f=n("1297"),p=n("ddd3"),h=n("c215"),g=n("af9e"),_=n("80bb").f,v=n("1ded").f,m=n("d6b1").f,y=n("83fa"),M=n("ee98").trim,I=a["Number"],C=s["Number"],b=I.prototype,T=a.TypeError,S=c("".slice),E=c("".charCodeAt),k=function(e){var t=h(e,"number");return"bigint"==typeof t?t:D(t)},D=function(e){var t,n,o,i,r,a,s,c,u=h(e,"number");if(p(u))throw new T("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=M(u),t=E(u,0),43===t||45===t){if(n=E(u,2),88===n||120===n)return NaN}else if(48===t){switch(E(u,1)){case 66:case 98:o=2,i=49;break;case 79:case 111:o=8,i=55;break;default:return+u}for(r=S(u,2),a=r.length,s=0;s<a;s++)if(c=E(r,s),c<48||c>i)return NaN;return parseInt(r,o)}return+u},A=u("Number",!I(" 0o1")||!I("0b1")||I("+0x1")),L=function(e){return f(b,e)&&g((function(){y(e)}))},O=function(e){var t=arguments.length<1?0:I(k(e));return L(this)?d(Object(t),this,O):t};O.prototype=b,A&&!i&&(b.constructor=O),o({global:!0,constructor:!0,wrap:!0,forced:A},{Number:O});var R=function(e,t){for(var n,o=r?_(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),i=0;o.length>i;i++)l(t,n=o[i])&&!l(e,n)&&m(e,n,v(t,n))};i&&C&&R(s["Number"],C),(A||i)&&R(s["Number"],I)},"64e0":function(e,t,n){"use strict";var o=n("7ddb"),i=n("6158").findLast,r=o.aTypedArray,a=o.exportTypedArrayMethod;a("findLast",(function(e){return i(r(this),e,arguments.length>1?arguments[1]:void 0)}))},6541:function(e,t,n){"use strict";(function(e){n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("4626"),n("64aa"),n("5ef2");var i=n("1ffa"),r=o(n("f709")),a=o(n("1f18")),s=o(n("5eef"));e.subscribe("getSelectedTextRange",(function(t){var n=t.pageId,o=t.callbackId,i=document.activeElement,r=i.tagName.toLowerCase(),a={};["input","textarea"].includes(r)?(a.errMsg="getSelectedTextRange:ok",a.start=i.selectionStart,a.end=i.selectionEnd):a.errMsg="getSelectedTextRange:fail no focused",e.publishHandler("onGetSelectedTextRange",{callbackId:o,data:a},n)}));var c,u={name:"Field",mixins:[r.default,a.default,s.default],model:{prop:"value",event:"update:value"},props:{value:{type:[String,Number],default:""},autoFocus:{type:[Boolean,String],default:!1},focus:{type:[Boolean,String],default:!1},cursor:{type:[Number,String],default:-1},selectionStart:{type:[Number,String],default:-1},selectionEnd:{type:[Number,String],default:-1},confirmHold:{type:Boolean,default:!1},ignoreCompositionEvent:{type:Boolean,default:!0}},data:function(){return{composing:!1,valueSync:this._getValueString(this.value,this.type),focusSync:this.focus,fixColor:0===String(navigator.vendor).indexOf("Apple")&&CSS.supports("image-orientation:from-image")}},watch:{focus:function(e){e?this._focus():this._blur()},focusSync:function(e){this.$emit("update:focus",e)},cursorNumber:function(){this._checkCursor()},selectionStartNumber:function(){this._checkSelection()},selectionEndNumber:function(){this._checkSelection()}},computed:{needFocus:function(){return this.autoFocus||this.focus},cursorNumber:function(){var e=Number(this.cursor);return isNaN(e)?-1:e},selectionStartNumber:function(){var e=Number(this.selectionStart);return isNaN(e)?-1:e},selectionEndNumber:function(){var e=Number(this.selectionEnd);return isNaN(e)?-1:e}},created:function(){var e=this,t=this.__valueChange=(0,i.debounce)((function(t){e.valueSync=e._getValueString(t,e.type)}),100);this.$watch("value",t),this.__triggerInput=(0,i.throttle)((function(t,n){e.__valueChange.cancel(),e.$emit("update:value",n.value),e.$trigger("input",t,n)}),100),this.$triggerInput=function(t,n,o){e.__valueChange.cancel(),e.__triggerInput(t,n),o&&e.__triggerInput.flush()}},beforeDestroy:function(){this.__valueChange.cancel(),this.__triggerInput.cancel()},directives:{field:{inserted:function(e,t,n){n.context._initField(e)}}},methods:{_getValueString:function(e,t){return"number"===t&&isNaN(Number(e))&&(e=""),null===e?"":String(e)},_initField:function(e){var t=this;this._field=e,c=c||Date.now(),this.needFocus&&setTimeout((function(){t._focus()}))},_focus:function(){if(this.needFocus){var e=this._field;if(e)e.focus();else setTimeout(this._focus.bind(this),100)}},_blur:function(){var e=this._field;e&&e.blur()},_onFocus:function(e){this.focusSync=!0,this.$trigger("focus",e,{value:this.valueSync}),this._checkSelection(),this._checkCursor()},_onBlur:function(e){this.composing&&(this.composing=!1,this._onInput(e,!0)),this.focusSync=!1;var t,n=e.target;"number"===n.type?(n.type="text",t=n.selectionEnd,n.type="number"):t=n.selectionEnd,this.$trigger("blur",e,{value:this.valueSync,cursor:t})},_checkSelection:function(){var e=this._field;this.focusSync&&this.selectionStartNumber>-1&&this.selectionEndNumber>-1&&"number"!==e.type&&(e.selectionStart=this.selectionStartNumber,e.selectionEnd=this.selectionEndNumber)},_checkCursor:function(){var e=this._field;this.focusSync&&this.selectionStartNumber<0&&this.selectionEndNumber<0&&this.cursorNumber>-1&&"number"!==e.type&&(e.selectionEnd=e.selectionStart=this.cursorNumber)}}};t.default=u}).call(this,n("b8be"))},6545:function(e,t,n){"use strict";(function(e){n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.createScrollListener=function(t,n){var a=n.enablePageScroll,s=n.enablePageReachBottom,c=n.onReachBottomDistance,u=n.enableTransparentTitleNView,l=!1,d=!1,f=!0;function p(){var n=getCurrentPages();if(n.length&&n[n.length-1].$page.id===t){var p=window.pageYOffset;a&&(0,i.publishHandler)("onPageScroll",{scrollTop:p},t),u&&e.emit("onPageScroll",{scrollTop:p}),s&&f&&(h()||(o=setTimeout(h,300))),l=!1}function h(){if(function(){var e=document.documentElement.scrollHeight,t=window.innerHeight,n=window.scrollY,o=n>0&&e>t&&n+t+c>=e,i=Math.abs(e-r)>c;return!o||d&&!i?(!o&&d&&(d=!1),!1):(r=e,d=!0,!0)}())return(0,i.publishHandler)("onReachBottom",{},t),f=!1,setTimeout((function(){f=!0}),350),!0}}return function(){clearTimeout(o),l||requestAnimationFrame(p),l=!0}},t.disableScroll=function(e){e.preventDefault()},t.pageScrollTo=function(e){var t=e.scrollTop,n=e.selector,o=e.duration;if("undefined"===typeof t){var i=document.querySelector(n);if(i){var r=i.getBoundingClientRect(),a=r.top,s=r.height;t=a+window.pageYOffset,t-=s}}var c=document.documentElement,u=c.clientHeight,l=c.scrollHeight;if(t=Math.min(t,l-u),0===o)return void(c.scrollTop=document.body.scrollTop=t);if(window.scrollY===t)return;(function e(n){if(n<=0)window.scrollTo(0,t);else{var o=t-window.scrollY;requestAnimationFrame((function(){window.scrollTo(0,window.scrollY+o/n*10),e(n-10)}))}})(o)};var o,i=n("eb6d");var r=0}).call(this,n("b8be"))},6556:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={listItem:{anchor:""}}},6559:function(e,t,n){"use strict";var o=n("f5bd").default;n("c223"),n("aa9c");var i=o(n("9b8e")),r=o(n("e944")),a=o(n("d8ca")),s=o(n("8566")),c=o(n("59df")),u=o(n("e4a8")),l=o(n("9c40")),d=o(n("2d3a")),f=o(n("afe8")),p=o(n("77aa")),h=o(n("6de6")),g=o(n("ff07")),_=o(n("fe64")),v=o(n("979b")),m=o(n("f153")),y=o(n("906a")),M=o(n("57d9")),I=o(n("ab4b")),C=o(n("50f0")),b=o(n("dd88")),T=o(n("4370")),S=o(n("17cb")),E=o(n("6b16"));s.default.name="VUniAudio",s.default.mixins=s.default.mixins?[].concat(r.default,s.default.mixins):[r.default],s.default.mixins.push(a.default),i.default.component(s.default.name,s.default),c.default.name="VUniButton",c.default.mixins=c.default.mixins?[].concat(r.default,c.default.mixins):[r.default],c.default.mixins.push(a.default),i.default.component(c.default.name,c.default),u.default.name="VUniCoverImage",u.default.mixins=u.default.mixins?[].concat(r.default,u.default.mixins):[r.default],u.default.mixins.push(a.default),i.default.component(u.default.name,u.default),l.default.name="VUniCoverView",l.default.mixins=l.default.mixins?[].concat(r.default,l.default.mixins):[r.default],l.default.mixins.push(a.default),i.default.component(l.default.name,l.default),d.default.name="VUniImage",d.default.mixins=d.default.mixins?[].concat(r.default,d.default.mixins):[r.default],d.default.mixins.push(a.default),i.default.component(d.default.name,d.default),f.default.name="VUniInput",f.default.mixins=f.default.mixins?[].concat(r.default,f.default.mixins):[r.default],f.default.mixins.push(a.default),i.default.component(f.default.name,f.default),p.default.name="VUniMovableArea",p.default.mixins=p.default.mixins?[].concat(r.default,p.default.mixins):[r.default],p.default.mixins.push(a.default),i.default.component(p.default.name,p.default),h.default.name="VUniMovableView",h.default.mixins=h.default.mixins?[].concat(r.default,h.default.mixins):[r.default],h.default.mixins.push(a.default),i.default.component(h.default.name,h.default),g.default.name="VUniPickerView",g.default.mixins=g.default.mixins?[].concat(r.default,g.default.mixins):[r.default],g.default.mixins.push(a.default),i.default.component(g.default.name,g.default),_.default.name="VUniPickerViewColumn",_.default.mixins=_.default.mixins?[].concat(r.default,_.default.mixins):[r.default],_.default.mixins.push(a.default),i.default.component(_.default.name,_.default),v.default.name="VUniResizeSensor",v.default.mixins=v.default.mixins?[].concat(r.default,v.default.mixins):[r.default],v.default.mixins.push(a.default),i.default.component(v.default.name,v.default),m.default.name="VUniRichText",m.default.mixins=m.default.mixins?[].concat(r.default,m.default.mixins):[r.default],m.default.mixins.push(a.default),i.default.component(m.default.name,m.default),y.default.name="VUniScrollView",y.default.mixins=y.default.mixins?[].concat(r.default,y.default.mixins):[r.default],y.default.mixins.push(a.default),i.default.component(y.default.name,y.default),M.default.name="VUniSwiper",M.default.mixins=M.default.mixins?[].concat(r.default,M.default.mixins):[r.default],M.default.mixins.push(a.default),i.default.component(M.default.name,M.default),I.default.name="VUniSwiperItem",I.default.mixins=I.default.mixins?[].concat(r.default,I.default.mixins):[r.default],I.default.mixins.push(a.default),i.default.component(I.default.name,I.default),C.default.name="VUniText",C.default.mixins=C.default.mixins?[].concat(r.default,C.default.mixins):[r.default],C.default.mixins.push(a.default),i.default.component(C.default.name,C.default),b.default.name="VUniTextarea",b.default.mixins=b.default.mixins?[].concat(r.default,b.default.mixins):[r.default],b.default.mixins.push(a.default),i.default.component(b.default.name,b.default),T.default.name="VUniVideo",T.default.mixins=T.default.mixins?[].concat(r.default,T.default.mixins):[r.default],T.default.mixins.push(a.default),i.default.component(T.default.name,T.default),S.default.name="VUniView",S.default.mixins=S.default.mixins?[].concat(r.default,S.default.mixins):[r.default],S.default.mixins.push(a.default),i.default.component(S.default.name,S.default),E.default.name="VUniWebView",E.default.mixins=E.default.mixins?[].concat(r.default,E.default.mixins):[r.default],E.default.mixins.push(a.default),i.default.component(E.default.name,E.default)},"656c":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={skeleton:{loading:!0,animate:!0,rows:0,rowsWidth:"100%",rowsHeight:18,title:!0,titleWidth:"50%",titleHeight:18,avatar:!1,avatarSize:32,avatarShape:"circle"}}},"659d":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("64aa");var o={data:function(){return{hovering:!1}},props:{hoverClass:{type:String,default:"none"},hoverStopPropagation:{type:Boolean,default:!1},hoverStartTime:{type:[Number,String],default:50},hoverStayTime:{type:[Number,String],default:400}},methods:{_hoverTouchStart:function(e){e.touches.length>1||this._handleHoverStart(e)},_hoverMousedown:function(e){this._hoverTouch||(this._handleHoverStart(e),window.addEventListener("mouseup",this._hoverMouseup))},_handleHoverStart:function(e){var t=this;e._hoverPropagationStopped||this.hoverClass&&"none"!==this.hoverClass&&!this.disabled&&(this.hoverStopPropagation&&(e._hoverPropagationStopped=!0),this._hoverTouch=!0,this._hoverStartTimer=setTimeout((function(){t.hovering=!0,t._hoverTouch||t._hoverReset()}),this.hoverStartTime))},_hoverMouseup:function(){this._hoverTouch&&(this._handleHoverEnd(),window.removeEventListener("mouseup",this._hoverMouseup))},_hoverTouchEnd:function(){this._handleHoverEnd()},_handleHoverEnd:function(){this._hoverTouch=!1,this.hovering&&this._hoverReset()},_hoverReset:function(){var e=this;requestAnimationFrame((function(){clearTimeout(e._hoverStayTimer),e._hoverStayTimer=setTimeout((function(){e.hovering=!1}),e.hoverStayTime)}))},_hoverTouchCancel:function(){this._hoverTouch=!1,this.hovering=!1,clearTimeout(this._hoverStartTimer)}}};t.default=o},"659dc":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("uni-app",{class:{"uni-app--showtabbar":e.showTabBar,"uni-app--maxwidth":e.showMaxWidth}},[n("layout",{ref:"layout",attrs:{"router-key":e.key,"keep-alive-include":e.keepAliveInclude},on:{maxWidth:e.onMaxWidth,layout:e.onLayout}}),e.hasTabBar?n("tab-bar",e._b({directives:[{name:"show",rawName:"v-show",value:e.showTabBar,expression:"showTabBar"}],ref:"tabBar"},"tab-bar",e.tabBarOptions,!1)):e._e(),e.$options.components.Toast?n("toast",e._b({},"toast",e.showToast,!1)):e._e(),e.$options.components.ActionSheet?n("action-sheet",e._b({on:{close:e._onActionSheetClose}},"action-sheet",e.showActionSheet,!1)):e._e(),e.$options.components.Modal?n("modal",e._b({on:{close:e._onModalClose}},"modal",e.showModal,!1)):e._e(),e.$options.components.PreviewImage?n("preview-image",e._b({on:{close:e._onPreviewClose}},"preview-image",e.previewImage,!1)):e._e(),e.sysComponents&&e.sysComponents.length?e._l(e.sysComponents,(function(e,t){return n(e,{key:t,tag:"component"})})):e._e()],2)},i=[]},"65a1":function(e,t,n){var o,i,r,a=n("bdbb").default;n("aa9c"),n("5ef2"),function(s,c){"object"===a(t)?e.exports=t=c(n("5e74")):(i=[n("5e74")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))}(0,(function(e){return function(){var t=e,n=t.lib,o=n.WordArray,i=t.enc;i.Base64url={stringify:function(e,t){void 0===t&&(t=!0);var n=e.words,o=e.sigBytes,i=t?this._safe_map:this._map;e.clamp();for(var r=[],a=0;a<o;a+=3)for(var s=n[a>>>2]>>>24-a%4*8&255,c=n[a+1>>>2]>>>24-(a+1)%4*8&255,u=n[a+2>>>2]>>>24-(a+2)%4*8&255,l=s<<16|c<<8|u,d=0;d<4&&a+.75*d<o;d++)r.push(i.charAt(l>>>6*(3-d)&63));var f=i.charAt(64);if(f)while(r.length%4)r.push(f);return r.join("")},parse:function(e,t){void 0===t&&(t=!0);var n=e.length,i=t?this._safe_map:this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var a=0;a<i.length;a++)r[i.charCodeAt(a)]=a}var s=i.charAt(64);if(s){var c=e.indexOf(s);-1!==c&&(n=c)}return function(e,t,n){for(var i=[],r=0,a=0;a<t;a++)if(a%4){var s=n[e.charCodeAt(a-1)]<<a%4*2,c=n[e.charCodeAt(a)]>>>6-a%4*2,u=s|c;i[r>>>2]|=u<<24-r%4*8,r++}return o.create(i,r)}(e,n,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),e.enc.Base64url}))},"65c8":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.setClipboardData=void 0;var o=n("1909"),i={data:{type:String,required:!0},showToast:{type:Boolean,default:!0},beforeSuccess:function(e,t){if(t.showToast){var n=(0,o.t)("uni.setClipboardData.success");n&&uni.showToast({title:n,icon:"success",mask:!1,style:{width:void 0}})}}};t.setClipboardData=i},"65f2":function(e,t,n){var o,i,r,a=n("bdbb").default;n("c223"),function(s,c,u){"object"===a(t)?e.exports=t=c(n("5e74"),n("f794")):(i=[n("5e74"),n("f794")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))}(0,(function(e){return e.pad.Iso10126={pad:function(t,n){var o=4*n,i=o-t.sigBytes%o;t.concat(e.lib.WordArray.random(i-1)).concat(e.lib.WordArray.create([i<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126}))},6640:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("uni-resize-sensor",{on:{"~animationstart":function(t){return e.update(t)}}},[n("div",{on:{scroll:e.update}},[n("div")]),n("div",{on:{scroll:e.update}},[n("div")])])},i=[]},"667b":function(e,t,n){var o,i,r,a=n("bdbb").default;(function(s,c,u){"object"===a(t)?e.exports=t=c(n("5e74"),n("f794")):(i=[n("5e74"),n("f794")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))})(0,(function(e){return e.mode.ECB=function(){var t=e.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t}(),e.mode.ECB}))},"668a":function(e,t,n){"use strict";var o=n("7ddb"),i=n("4d16").every,r=o.aTypedArray,a=o.exportTypedArrayMethod;a("every",(function(e){return i(r(this),e,arguments.length>1?arguments[1]:void 0)}))},"66b1":function(e,t,n){var o=n("57e2");e.exports=function(e){var t=+e;return t!==t||0===t?0:o(t)}},"66ee":function(e,t,n){var o=n("7aa6");e.exports=!o((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},6730:function(e,t,n){"use strict";var o=n("8bdb"),i=n("71e9");o({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return i(URL.prototype.toString,this)}})},"679f":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={subsection:{list:[],current:0,activeColor:"#3c9cff",inactiveColor:"#303133",mode:"button",fontSize:12,bold:!0,bgColor:"#eeeeef",keyName:"name"}}},6833:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={cell:{customClass:"",title:"",label:"",value:"",icon:"",disabled:!1,border:!0,center:!1,url:"",linkType:"navigateTo",clickable:!1,isLink:!1,required:!1,arrowDirection:"",iconStyle:{},rightIconStyle:{},rightIcon:"arrow-right",titleStyle:{},size:"",stop:!0,name:""}}},"68fd":function(e,t,n){"use strict";var o=n("8e02");e.exports=function(e){var t=o(e);return"BigInt64Array"===t||"BigUint64Array"===t}},6994:function(e,t,n){"use strict";var o=n("8bdb"),i=n("af71"),r=n("af9e"),a=n("7d3c"),s=n("1099"),c=!i||r((function(){a.f(1)}));o({target:"Object",stat:!0,forced:c},{getOwnPropertySymbols:function(e){var t=a.f;return t?t(s(e)):[]}})},"69fa":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={grid:{col:3,border:!1,align:"left"}}},"6a2b":function(e,t,n){"use strict";var o=n("1099"),i=n("e34c"),r=n("1fc1"),a=n("a830"),s=Math.min;e.exports=[].copyWithin||function(e,t){var n=o(this),c=r(n),u=i(e,c),l=i(t,c),d=arguments.length>2?arguments[2]:void 0,f=s((void 0===d?c:i(d,c))-l,c-u),p=1;l<u&&u<l+f&&(p=-1,l+=f-1,u+=f-1);while(f-- >0)l in n?n[u]=n[l]:a(n,u),u+=p,l+=p;return n}},"6a50":function(e,t,n){"use strict";var o=n("8bdb"),i=n("85c1"),r=n("71e9"),a=n("ab4a"),s=n("9839"),c=n("7ddb"),u=n("efa5"),l=n("b720"),d=n("0b5a"),f=n("6aca"),p=n("f221"),h=n("c435"),g=n("cc36"),_=n("1c16"),v=n("7df8"),m=n("f9ed"),y=n("338c"),M=n("8e02"),I=n("1c06"),C=n("ddd3"),b=n("e37c"),T=n("1297"),S=n("8c4f"),E=n("80bb").f,k=n("b32e"),D=n("4d16").forEach,A=n("437f"),L=n("e4ca"),O=n("d6b1"),R=n("1ded"),w=n("ac38"),N=n("235c"),P=n("dcda"),G=N.get,U=N.set,x=N.enforce,F=O.f,q=R.f,B=i.RangeError,V=u.ArrayBuffer,H=V.prototype,j=u.DataView,K=c.NATIVE_ARRAY_BUFFER_VIEWS,W=c.TYPED_ARRAY_TAG,Y=c.TypedArray,z=c.TypedArrayPrototype,$=c.isTypedArray,X=function(e,t){L(e,t,{configurable:!0,get:function(){return G(this)[t]}})},J=function(e){var t;return T(H,e)||"ArrayBuffer"===(t=M(e))||"SharedArrayBuffer"===t},Q=function(e,t){return $(e)&&!C(t)&&t in e&&p(+t)&&t>=0},Z=function(e,t){return t=m(t),Q(e,t)?d(2,e[t]):q(e,t)},ee=function(e,t,n){return t=m(t),!(Q(e,t)&&I(n)&&y(n,"value"))||y(n,"get")||y(n,"set")||n.configurable||y(n,"writable")&&!n.writable||y(n,"enumerable")&&!n.enumerable?F(e,t,n):(e[t]=n.value,e)};a?(K||(R.f=Z,O.f=ee,X(z,"buffer"),X(z,"byteOffset"),X(z,"byteLength"),X(z,"length")),o({target:"Object",stat:!0,forced:!K},{getOwnPropertyDescriptor:Z,defineProperty:ee}),e.exports=function(e,t,n){var a=e.match(/\d+/)[0]/8,c=e+(n?"Clamped":"")+"Array",u="get"+e,d="set"+e,p=i[c],m=p,y=m&&m.prototype,M={},C=function(e,t){F(e,t,{get:function(){return function(e,t){var n=G(e);return n.view[u](t*a+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,o){var i=G(e);i.view[d](t*a+i.byteOffset,n?v(o):o,!0)}(this,t,e)},enumerable:!0})};K?s&&(m=t((function(e,t,n,o){return l(e,y),P(function(){return I(t)?J(t)?void 0!==o?new p(t,_(n,a),o):void 0!==n?new p(t,_(n,a)):new p(t):$(t)?w(m,t):r(k,m,t):new p(g(t))}(),e,m)})),S&&S(m,Y),D(E(p),(function(e){e in m||f(m,e,p[e])})),m.prototype=y):(m=t((function(e,t,n,o){l(e,y);var i,s,c,u=0,d=0;if(I(t)){if(!J(t))return $(t)?w(m,t):r(k,m,t);i=t,d=_(n,a);var f=t.byteLength;if(void 0===o){if(f%a)throw new B("Wrong length");if(s=f-d,s<0)throw new B("Wrong length")}else if(s=h(o)*a,s+d>f)throw new B("Wrong length");c=s/a}else c=g(t),s=c*a,i=new V(s);U(e,{buffer:i,byteOffset:d,byteLength:s,length:c,view:new j(i)});while(u<c)C(e,u++)})),S&&S(m,Y),y=m.prototype=b(z)),y.constructor!==m&&f(y,"constructor",m),x(y).TypedArrayConstructor=m,W&&f(y,W,c);var T=m!==p;M[c]=m,o({global:!0,constructor:!0,forced:T,sham:!K},M),"BYTES_PER_ELEMENT"in m||f(m,"BYTES_PER_ELEMENT",a),"BYTES_PER_ELEMENT"in y||f(y,"BYTES_PER_ELEMENT",a),A(c)}):e.exports=function(){}},"6a54":function(e,t,n){"use strict";var o=n("8bdb"),i=n("ab4a"),r=n("d6b1").f;o({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!i},{defineProperty:r})},"6a88":function(e,t,n){"use strict";var o=n("8bdb"),i=n("6aa6"),r=n("9f9e"),a=n("8598"),s=n("5ee2"),c=n("e7e3"),u=n("1c06"),l=n("e37c"),d=n("af9e"),f=i("Reflect","construct"),p=Object.prototype,h=[].push,g=d((function(){function e(){}return!(f((function(){}),[],e)instanceof e)})),_=!d((function(){f((function(){}))})),v=g||_;o({target:"Reflect",stat:!0,forced:v,sham:v},{construct:function(e,t){s(e),c(t);var n=arguments.length<3?e:s(arguments[2]);if(_&&!g)return f(e,t,n);if(e===n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var o=[null];return r(h,o,t),new(r(a,e,o))}var i=n.prototype,d=l(u(i)?i:p),v=r(e,d,t);return u(v)?v:d}})},"6aa6":function(e,t,n){"use strict";var o=n("85c1"),i=n("474f"),r=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?r(o[e]):o[e]&&o[e][t]}},"6ac4":function(e,t,n){var o=n("c646"),i=TypeError;e.exports=function(e){if(o(e))throw i("Can't call method on "+e);return e}},"6ac9":function(e,t,n){"use strict";var o=n("6aa6"),i=n("bb80"),r=n("80bb"),a=n("7d3c"),s=n("e7e3"),c=i([].concat);e.exports=o("Reflect","ownKeys")||function(e){var t=r.f(s(e)),n=a.f;return n?c(t,n(e)):t}},"6aca":function(e,t,n){"use strict";var o=n("ab4a"),i=n("d6b1"),r=n("0b5a");e.exports=o?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},"6ad1":function(e,t,n){"use strict";n("18f7");var o,i=n("8bdb"),r=n("ab4a"),a=n("266a"),s=n("85c1"),c=n("ae5c"),u=n("bb80"),l=n("81a9"),d=n("e4ca"),f=n("b720"),p=n("338c"),h=n("eb9a"),g=n("3d77"),_=n("37ad"),v=n("03a0").codeAt,m=n("49fc"),y=n("9e70"),M=n("181d"),I=n("7f28"),C=n("e7d8"),b=n("235c"),T=b.set,S=b.getterFor("URL"),E=C.URLSearchParams,k=C.getState,D=s.URL,A=s.TypeError,L=s.parseInt,O=Math.floor,R=Math.pow,w=u("".charAt),N=u(/./.exec),P=u([].join),G=u(1..toString),U=u([].pop),x=u([].push),F=u("".replace),q=u([].shift),B=u("".split),V=u("".slice),H=u("".toLowerCase),j=u([].unshift),K=/[a-z]/i,W=/[\d+-.a-z]/i,Y=/\d/,z=/^0x/i,$=/^[0-7]+$/,X=/^\d+$/,J=/^[\da-f]+$/i,Q=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Z=/[\0\t\n\r #/:<>?@[\\\]^|]/,ee=/^[\u0000-\u0020]+/,te=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,ne=/[\t\n\r]/g,oe=function(e){var t,n,o,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)j(t,e%256),e=O(e/256);return P(t,".")}if("object"==typeof e){for(t="",o=function(e){for(var t=null,n=1,o=null,i=0,r=0;r<8;r++)0!==e[r]?(i>n&&(t=o,n=i),o=null,i=0):(null===o&&(o=r),++i);return i>n&&(t=o,n=i),t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),o===n?(t+=n?":":"::",i=!0):(t+=G(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},ie={},re=h({},ie,{" ":1,'"':1,"<":1,">":1,"`":1}),ae=h({},re,{"#":1,"?":1,"{":1,"}":1}),se=h({},ae,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ce=function(e,t){var n=v(e,0);return n>32&&n<127&&!p(t,e)?e:encodeURIComponent(e)},ue={ftp:21,file:null,http:80,https:443,ws:80,wss:443},le=function(e,t){var n;return 2===e.length&&N(K,w(e,0))&&(":"===(n=w(e,1))||!t&&"|"===n)},de=function(e){var t;return e.length>1&&le(V(e,0,2))&&(2===e.length||"/"===(t=w(e,2))||"\\"===t||"?"===t||"#"===t)},fe=function(e){return"."===e||"%2e"===H(e)},pe=function(e){return e=H(e),".."===e||"%2e."===e||".%2e"===e||"%2e%2e"===e},he={},ge={},_e={},ve={},me={},ye={},Me={},Ie={},Ce={},be={},Te={},Se={},Ee={},ke={},De={},Ae={},Le={},Oe={},Re={},we={},Ne={},Pe=function(e,t,n){var o,i,r,a=y(e);if(t){if(i=this.parse(a),i)throw new A(i);this.searchParams=null}else{if(void 0!==n&&(o=new Pe(n,!0)),i=this.parse(a,null,o),i)throw new A(i);r=k(new E),r.bindURL(this),this.searchParams=r}};Pe.prototype={type:"URL",parse:function(e,t,n){var i,r,a,s,c=this,u=t||he,l=0,d="",f=!1,h=!1,v=!1;e=y(e),t||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=F(e,ee,""),e=F(e,te,"$1")),e=F(e,ne,""),i=g(e);while(l<=i.length){switch(r=i[l],u){case he:if(!r||!N(K,r)){if(t)return"Invalid scheme";u=_e;continue}d+=H(r),u=ge;break;case ge:if(r&&(N(W,r)||"+"===r||"-"===r||"."===r))d+=H(r);else{if(":"!==r){if(t)return"Invalid scheme";d="",u=_e,l=0;continue}if(t&&(c.isSpecial()!==p(ue,d)||"file"===d&&(c.includesCredentials()||null!==c.port)||"file"===c.scheme&&!c.host))return;if(c.scheme=d,t)return void(c.isSpecial()&&ue[c.scheme]===c.port&&(c.port=null));d="","file"===c.scheme?u=ke:c.isSpecial()&&n&&n.scheme===c.scheme?u=ve:c.isSpecial()?u=Ie:"/"===i[l+1]?(u=me,l++):(c.cannotBeABaseURL=!0,x(c.path,""),u=Re)}break;case _e:if(!n||n.cannotBeABaseURL&&"#"!==r)return"Invalid scheme";if(n.cannotBeABaseURL&&"#"===r){c.scheme=n.scheme,c.path=_(n.path),c.query=n.query,c.fragment="",c.cannotBeABaseURL=!0,u=Ne;break}u="file"===n.scheme?ke:ye;continue;case ve:if("/"!==r||"/"!==i[l+1]){u=ye;continue}u=Ce,l++;break;case me:if("/"===r){u=be;break}u=Oe;continue;case ye:if(c.scheme=n.scheme,r===o)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=_(n.path),c.query=n.query;else if("/"===r||"\\"===r&&c.isSpecial())u=Me;else if("?"===r)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=_(n.path),c.query="",u=we;else{if("#"!==r){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=_(n.path),c.path.length--,u=Oe;continue}c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=_(n.path),c.query=n.query,c.fragment="",u=Ne}break;case Me:if(!c.isSpecial()||"/"!==r&&"\\"!==r){if("/"!==r){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,u=Oe;continue}u=be}else u=Ce;break;case Ie:if(u=Ce,"/"!==r||"/"!==w(d,l+1))continue;l++;break;case Ce:if("/"!==r&&"\\"!==r){u=be;continue}break;case be:if("@"===r){f&&(d="%40"+d),f=!0,a=g(d);for(var m=0;m<a.length;m++){var M=a[m];if(":"!==M||v){var I=ce(M,se);v?c.password+=I:c.username+=I}else v=!0}d=""}else if(r===o||"/"===r||"?"===r||"#"===r||"\\"===r&&c.isSpecial()){if(f&&""===d)return"Invalid authority";l-=g(d).length+1,d="",u=Te}else d+=r;break;case Te:case Se:if(t&&"file"===c.scheme){u=Ae;continue}if(":"!==r||h){if(r===o||"/"===r||"?"===r||"#"===r||"\\"===r&&c.isSpecial()){if(c.isSpecial()&&""===d)return"Invalid host";if(t&&""===d&&(c.includesCredentials()||null!==c.port))return;if(s=c.parseHost(d),s)return s;if(d="",u=Le,t)return;continue}"["===r?h=!0:"]"===r&&(h=!1),d+=r}else{if(""===d)return"Invalid host";if(s=c.parseHost(d),s)return s;if(d="",u=Ee,t===Se)return}break;case Ee:if(!N(Y,r)){if(r===o||"/"===r||"?"===r||"#"===r||"\\"===r&&c.isSpecial()||t){if(""!==d){var C=L(d,10);if(C>65535)return"Invalid port";c.port=c.isSpecial()&&C===ue[c.scheme]?null:C,d=""}if(t)return;u=Le;continue}return"Invalid port"}d+=r;break;case ke:if(c.scheme="file","/"===r||"\\"===r)u=De;else{if(!n||"file"!==n.scheme){u=Oe;continue}switch(r){case o:c.host=n.host,c.path=_(n.path),c.query=n.query;break;case"?":c.host=n.host,c.path=_(n.path),c.query="",u=we;break;case"#":c.host=n.host,c.path=_(n.path),c.query=n.query,c.fragment="",u=Ne;break;default:de(P(_(i,l),""))||(c.host=n.host,c.path=_(n.path),c.shortenPath()),u=Oe;continue}}break;case De:if("/"===r||"\\"===r){u=Ae;break}n&&"file"===n.scheme&&!de(P(_(i,l),""))&&(le(n.path[0],!0)?x(c.path,n.path[0]):c.host=n.host),u=Oe;continue;case Ae:if(r===o||"/"===r||"\\"===r||"?"===r||"#"===r){if(!t&&le(d))u=Oe;else if(""===d){if(c.host="",t)return;u=Le}else{if(s=c.parseHost(d),s)return s;if("localhost"===c.host&&(c.host=""),t)return;d="",u=Le}continue}d+=r;break;case Le:if(c.isSpecial()){if(u=Oe,"/"!==r&&"\\"!==r)continue}else if(t||"?"!==r)if(t||"#"!==r){if(r!==o&&(u=Oe,"/"!==r))continue}else c.fragment="",u=Ne;else c.query="",u=we;break;case Oe:if(r===o||"/"===r||"\\"===r&&c.isSpecial()||!t&&("?"===r||"#"===r)){if(pe(d)?(c.shortenPath(),"/"===r||"\\"===r&&c.isSpecial()||x(c.path,"")):fe(d)?"/"===r||"\\"===r&&c.isSpecial()||x(c.path,""):("file"===c.scheme&&!c.path.length&&le(d)&&(c.host&&(c.host=""),d=w(d,0)+":"),x(c.path,d)),d="","file"===c.scheme&&(r===o||"?"===r||"#"===r))while(c.path.length>1&&""===c.path[0])q(c.path);"?"===r?(c.query="",u=we):"#"===r&&(c.fragment="",u=Ne)}else d+=ce(r,ae);break;case Re:"?"===r?(c.query="",u=we):"#"===r?(c.fragment="",u=Ne):r!==o&&(c.path[0]+=ce(r,ie));break;case we:t||"#"!==r?r!==o&&("'"===r&&c.isSpecial()?c.query+="%27":c.query+="#"===r?"%23":ce(r,ie)):(c.fragment="",u=Ne);break;case Ne:r!==o&&(c.fragment+=ce(r,re));break}l++}},parseHost:function(e){var t,n,o;if("["===w(e,0)){if("]"!==w(e,e.length-1))return"Invalid host";if(t=function(e){var t,n,o,i,r,a,s,c=[0,0,0,0,0,0,0,0],u=0,l=null,d=0,f=function(){return w(e,d)};if(":"===f()){if(":"!==w(e,1))return;d+=2,u++,l=u}while(f()){if(8===u)return;if(":"!==f()){t=n=0;while(n<4&&N(J,f()))t=16*t+L(f(),16),d++,n++;if("."===f()){if(0===n)return;if(d-=n,u>6)return;o=0;while(f()){if(i=null,o>0){if(!("."===f()&&o<4))return;d++}if(!N(Y,f()))return;while(N(Y,f())){if(r=L(f(),10),null===i)i=r;else{if(0===i)return;i=10*i+r}if(i>255)return;d++}c[u]=256*c[u]+i,o++,2!==o&&4!==o||u++}if(4!==o)return;break}if(":"===f()){if(d++,!f())return}else if(f())return;c[u++]=t}else{if(null!==l)return;d++,u++,l=u}}if(null!==l){a=u-l,u=7;while(0!==u&&a>0)s=c[u],c[u--]=c[l+a-1],c[l+--a]=s}else if(8!==u)return;return c}(V(e,1,-1)),!t)return"Invalid host";this.host=t}else if(this.isSpecial()){if(e=m(e),N(Q,e))return"Invalid host";if(t=function(e){var t,n,o,i,r,a,s,c=B(e,".");if(c.length&&""===c[c.length-1]&&c.length--,t=c.length,t>4)return e;for(n=[],o=0;o<t;o++){if(i=c[o],""===i)return e;if(r=10,i.length>1&&"0"===w(i,0)&&(r=N(z,i)?16:8,i=V(i,8===r?1:2)),""===i)a=0;else{if(!N(10===r?X:8===r?$:J,i))return e;a=L(i,r)}x(n,a)}for(o=0;o<t;o++)if(a=n[o],o===t-1){if(a>=R(256,5-t))return null}else if(a>255)return null;for(s=U(n),o=0;o<n.length;o++)s+=n[o]*R(256,3-o);return s}(e),null===t)return"Invalid host";this.host=t}else{if(N(Z,e))return"Invalid host";for(t="",n=g(e),o=0;o<n.length;o++)t+=ce(n[o],ie);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return p(ue,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"===this.scheme&&1===t&&le(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,o=e.password,i=e.host,r=e.port,a=e.path,s=e.query,c=e.fragment,u=t+":";return null!==i?(u+="//",e.includesCredentials()&&(u+=n+(o?":"+o:"")+"@"),u+=oe(i),null!==r&&(u+=":"+r)):"file"===t&&(u+="//"),u+=e.cannotBeABaseURL?a[0]:a.length?"/"+P(a,"/"):"",null!==s&&(u+="?"+s),null!==c&&(u+="#"+c),u},setHref:function(e){var t=this.parse(e);if(t)throw new A(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"===e)try{return new Ge(e.path[0]).origin}catch(n){return"null"}return"file"!==e&&this.isSpecial()?e+"://"+oe(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(y(e)+":",he)},getUsername:function(){return this.username},setUsername:function(e){var t=g(y(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=ce(t[n],se)}},getPassword:function(){return this.password},setPassword:function(e){var t=g(y(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=ce(t[n],se)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?oe(e):oe(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Te)},getHostname:function(){var e=this.host;return null===e?"":oe(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Se)},getPort:function(){var e=this.port;return null===e?"":y(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(e=y(e),""===e?this.port=null:this.parse(e,Ee))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+P(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Le))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){e=y(e),""===e?this.query=null:("?"===w(e,0)&&(e=V(e,1)),this.query="",this.parse(e,we)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){e=y(e),""!==e?("#"===w(e,0)&&(e=V(e,1)),this.fragment="",this.parse(e,Ne)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Ge=function(e){var t=f(this,Ue),n=I(arguments.length,1)>1?arguments[1]:void 0,o=T(t,new Pe(e,!1,n));r||(t.href=o.serialize(),t.origin=o.getOrigin(),t.protocol=o.getProtocol(),t.username=o.getUsername(),t.password=o.getPassword(),t.host=o.getHost(),t.hostname=o.getHostname(),t.port=o.getPort(),t.pathname=o.getPathname(),t.search=o.getSearch(),t.searchParams=o.getSearchParams(),t.hash=o.getHash())},Ue=Ge.prototype,xe=function(e,t){return{get:function(){return S(this)[e]()},set:t&&function(e){return S(this)[t](e)},configurable:!0,enumerable:!0}};if(r&&(d(Ue,"href",xe("serialize","setHref")),d(Ue,"origin",xe("getOrigin")),d(Ue,"protocol",xe("getProtocol","setProtocol")),d(Ue,"username",xe("getUsername","setUsername")),d(Ue,"password",xe("getPassword","setPassword")),d(Ue,"host",xe("getHost","setHost")),d(Ue,"hostname",xe("getHostname","setHostname")),d(Ue,"port",xe("getPort","setPort")),d(Ue,"pathname",xe("getPathname","setPathname")),d(Ue,"search",xe("getSearch","setSearch")),d(Ue,"searchParams",xe("getSearchParams")),d(Ue,"hash",xe("getHash","setHash"))),l(Ue,"toJSON",(function(){return S(this).serialize()}),{enumerable:!0}),l(Ue,"toString",(function(){return S(this).serialize()}),{enumerable:!0}),D){var Fe=D.createObjectURL,qe=D.revokeObjectURL;Fe&&l(Ge,"createObjectURL",c(Fe,D)),qe&&l(Ge,"revokeObjectURL",c(qe,D))}M(Ge,"URL"),i({global:!0,constructor:!0,forced:!a,sham:!r},{URL:Ge})},"6afb":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("uni-input",e._g({},e.$listeners),[n("div",{ref:"wrapper",staticClass:"uni-input-wrapper"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showPlaceholder,expression:"showPlaceholder"}],ref:"placeholder",staticClass:"uni-input-placeholder",class:e.placeholderClass,style:e.placeholderStyle,domProps:{textContent:e._s(e.placeholder)}}),"checkbox"!==e.inputType||e.disabled&&e.fixColor?"radio"!==e.inputType||e.disabled&&e.fixColor?e.disabled&&e.fixColor?e._e():n("input",{directives:[{name:"model",rawName:"v-model",value:e.valueSync,expression:"valueSync"},{name:"keyboard",rawName:"v-keyboard"},{name:"field",rawName:"v-field"}],ref:"input",staticClass:"uni-input-input",style:e.cursorColor?{caretColor:e.cursorColor}:{},attrs:{disabled:e.disabled,maxlength:e.maxlength,step:e._step,enterkeyhint:e.confirmType,pattern:"number"===e.type?"[0-9]*":null,autocomplete:e.autocomplete,inputmode:e.inputmode,type:e.inputType},domProps:{value:e.valueSync},on:{change:function(e){e.stopPropagation()},focus:e._onFocus,blur:e._onBlur,input:[function(t){t.target.composing||(e.valueSync=t.target.value)},function(t){return t.stopPropagation(),e._onInput(t)}],compositionstart:function(t){return t.stopPropagation(),e._onComposition(t)},compositionend:function(t){return t.stopPropagation(),e._onComposition(t)},compositionupdate:function(t){return t.stopPropagation(),e._onComposition(t)},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),e._onKeyup(t))}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.valueSync,expression:"valueSync"},{name:"keyboard",rawName:"v-keyboard"},{name:"field",rawName:"v-field"}],ref:"input",staticClass:"uni-input-input",style:e.cursorColor?{caretColor:e.cursorColor}:{},attrs:{disabled:e.disabled,maxlength:e.maxlength,step:e._step,enterkeyhint:e.confirmType,pattern:"number"===e.type?"[0-9]*":null,autocomplete:e.autocomplete,inputmode:e.inputmode,type:"radio"},domProps:{checked:e._q(e.valueSync,null)},on:{change:[function(t){e.valueSync=null},function(e){e.stopPropagation()}],focus:e._onFocus,blur:e._onBlur,input:function(t){return t.stopPropagation(),e._onInput(t)},compositionstart:function(t){return t.stopPropagation(),e._onComposition(t)},compositionend:function(t){return t.stopPropagation(),e._onComposition(t)},compositionupdate:function(t){return t.stopPropagation(),e._onComposition(t)},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),e._onKeyup(t))}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.valueSync,expression:"valueSync"},{name:"keyboard",rawName:"v-keyboard"},{name:"field",rawName:"v-field"}],ref:"input",staticClass:"uni-input-input",style:e.cursorColor?{caretColor:e.cursorColor}:{},attrs:{disabled:e.disabled,maxlength:e.maxlength,step:e._step,enterkeyhint:e.confirmType,pattern:"number"===e.type?"[0-9]*":null,autocomplete:e.autocomplete,inputmode:e.inputmode,type:"checkbox"},domProps:{checked:Array.isArray(e.valueSync)?e._i(e.valueSync,null)>-1:e.valueSync},on:{change:[function(t){var n=e.valueSync,o=t.target,i=!!o.checked;if(Array.isArray(n)){var r=e._i(n,null);o.checked?r<0&&(e.valueSync=n.concat([null])):r>-1&&(e.valueSync=n.slice(0,r).concat(n.slice(r+1)))}else e.valueSync=i},function(e){e.stopPropagation()}],focus:e._onFocus,blur:e._onBlur,input:function(t){return t.stopPropagation(),e._onInput(t)},compositionstart:function(t){return t.stopPropagation(),e._onComposition(t)},compositionend:function(t){return t.stopPropagation(),e._onComposition(t)},compositionupdate:function(t){return t.stopPropagation(),e._onComposition(t)},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),e._onKeyup(t))}}}),e.disabled&&e.fixColor?n("input",{ref:"input",staticClass:"uni-input-input",style:e.cursorColor?{caretColor:e.cursorColor}:{},attrs:{tabindex:"-1",readonly:e.disabled,type:e.inputType,maxlength:e.maxlength,step:e._step},domProps:{value:e.valueSync},on:{focus:function(e){return e.target.blur()}}}):e._e()])])},i=[]},"6b16":function(e,t,n){"use strict";n.r(t);var o=n("fed6"),i=n("8e7f");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a=n("828b"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},"6bfa":function(e,t,n){"use strict";var o=n("f660"),i=n("1cb5"),r=n("799d"),a=n("235c"),s=n("d6b1").f,c=n("0cc2"),u=n("97ed"),l=n("a734"),d=n("ab4a"),f=a.set,p=a.getterFor("Array Iterator");e.exports=c(Array,"Array",(function(e,t){f(this,{type:"Array Iterator",target:o(e),index:0,kind:t})}),(function(){var e=p(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=void 0,u(void 0,!0);switch(e.kind){case"keys":return u(n,!1);case"values":return u(t[n],!1)}return u([n,t[n]],!1)}),"values");var h=r.Arguments=r.Array;if(i("keys"),i("values"),i("entries"),!l&&d&&"values"!==h.name)try{s(h,"name",{value:"values"})}catch(g){}},"6c13":function(e,t,n){var o=n("c86b");e.exports=o("navigator","userAgent")||""},"6c7d":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var o=t[e],i=!(0,r.hasOwn)(n,e),a=n[e],c=function(e,t){if(!Array.isArray(t))return u(t,e)?0:-1;for(var n=0,o=t.length;n<o;n++)if(u(t[n],e))return n;return-1}(Boolean,o.type);c>-1&&i&&!(0,r.hasOwn)(o,"default")&&(a=!1);if(void 0===a&&(0,r.hasOwn)(o,"default")){var d=o.default;a=(0,r.isFn)(d)?d():d,n[e]=a}return function(e,t,n,o,i){if(e.required&&o)return"Missing required parameter `".concat(t,"`");if(null==n&&!e.required){var a=e.validator;return a?a(n,i):void 0}var c=e.type,u=!c||!0===c,d=[];if(c){Array.isArray(c)||(c=[c]);for(var p=0;p<c.length&&!u;p++){var h=s(n,c[p]);d.push(h.expectedType||""),u=h.valid}}if(!u)return function(e,t,n){var o="parameter `".concat(e,"`.")+" Expected ".concat(n.join(", ")),i=n[0],a=(0,r.toRawType)(t),s=l(t,i),c=l(t,a);1===n.length&&f(i)&&!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some((function(e){return"boolean"===e.toLowerCase()}))}(i,a)&&(o+=" with value ".concat(s));o+=", got ".concat(a," "),f(a)&&(o+="with value ".concat(c,"."));return o}(t,n,d);var g=e.validator;if(g)return g(n,i)}(o,e,a,i,n)};var i=o(n("fcf3"));n("aa9c"),n("5c47"),n("0506"),n("2c10"),n("c9b5"),n("bf0f"),n("ab80"),n("64aa");var r=n("1ffa");var a=/^(String|Number|Boolean|Function|Symbol)$/;function s(e,t){var n,o=c(t);if(a.test(o)){var s=(0,i.default)(e);n=s===o.toLowerCase(),n||"object"!==s||(n=e instanceof t)}else n=e.byteLength>=0||("Object"===o?(0,r.isPlainObject)(e):"Array"===o?Array.isArray(e):e instanceof t||(0,r.toRawType)(e)===c(t));return{valid:n,expectedType:o}}function c(e){var t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:""}function u(e,t){return c(e)===c(t)}function l(e,t){return"String"===t?'"'.concat(e,'"'):"".concat("Number"===t?Number(e):e)}var d=["string","number","boolean"];function f(e){return d.some((function(t){return e.toLowerCase()===t}))}},"6d22":function(e,t,n){"use strict";(function(e){n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("bf0f"),n("e966");var i,r=o(n("9b8e")),a=n("1ffa"),s=n("60bf"),c=["top","left","right"],u=document.documentElement;function l(e,t){i||(i=u.style),i.setProperty(e,t)}var d={name:"Layout",props:{routerKey:{type:String,default:""},keepAliveInclude:{type:Array,default:function(){return[]}}},data:function(){return{marginWidth:0,leftWindowStyle:"",rightWindowStyle:"",topWindowStyle:"",topWindowMediaQuery:!1,leftWindowMediaQuery:!1,rightWindowMediaQuery:!1,topWindowHeight:"0px",apiShowTopWindow:!1,apiShowLeftWindow:!1,apiShowRightWindow:!1,navigationBarTitleText:"",maxWidthMeidaQuery:!1}},computed:{bindWindow:function(){return{matchTopWindow:this.topWindowMediaQuery,showTopWindow:this.showTopWindow||this.apiShowTopWindow,matchLeftWindow:this.leftWindowMediaQuery,showLeftWindow:this.showLeftWindow||this.apiShowLeftWindow,matchRightWindow:this.rightWindowMediaQuery,showRightWindow:this.showRightWindow||this.apiShowRightWindow}},showLayout:function(){return this.showTopWindow||this.showLeftWindow||this.showRightWindow},showTopWindow:function(){return this.resetApiShowWindow(),!1!==this.$route.meta.topWindow&&this.topWindowMediaQuery},showLeftWindow:function(){return this.resetApiShowWindow(),!1!==this.$route.meta.leftWindow&&this.leftWindowMediaQuery},showRightWindow:function(){return this.resetApiShowWindow(),!1!==this.$route.meta.rightWindow&&this.rightWindowMediaQuery}},watch:{$route:function(){this.checkMaxWidth()},showLayout:function(){this.checkLayout()},showTopWindow:function(e,t){e?this.$nextTick(this.onTopWindowInit):l("--top-window-height","0px")},showLeftWindow:function(e,t){e?this.$nextTick(this.onLeftWindowInit):l("--window-left","0px")},showRightWindow:function(e,t){e?this.$nextTick(this.onRightWindowInit):l("--window-right","0px")},marginWidth:function(e){l("--window-margin",e+"px")}},beforeCreate:function(){l("--top-window-height","0px"),l("--window-left","0px"),l("--window-right","0px"),l("--window-margin","0px")},created:function(){var t=this;this.topWindow=r.default.component("VUniTopWindow"),this.leftWindow=r.default.component("VUniLeftWindow"),this.rightWindow=r.default.component("VUniRightWindow"),(this.topWindow||this.leftWindow||this.rightWindow)&&uni.canIUse("css.var")&&window.matchMedia&&(c.forEach((function(e){return t.initWindowMinWidth(e)})),this.responsive=function(e){var t=window.screen,n=[window.outerWidth,window.outerHeight,t.width,t.height,u.clientWidth,u.clientHeight];return Math.max.apply(null,n)>e}(this.minWidth),this.responsive&&(this.topWindow&&this.topWindow.options.style&&(this.topWindowStyle=this.topWindow.options.style),this.leftWindow&&this.leftWindow.options.style&&(this.leftWindowStyle=this.leftWindow.options.style),this.rightWindow&&this.rightWindow.options.style&&(this.rightWindowStyle=this.rightWindow.options.style),c.forEach((function(e){return t.initMediaQuery(e)})),e.on("onNavigationBarChange",(function(e){t.navigationBarTitleText=e.titleText})))),this.initMaxWidth()},mounted:function(){this.checkLayout(),this.checkMaxWidth()},methods:{resetApiShowWindow:function(){this.apiShowLeftWindow=!1,this.apiShowRightWindow=!1},showWindow:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this[e+"Window"])return e+"Window not found";var n=(0,a.capitalize)(e);if(!this["show"+n+"Window"]){var o="apiShow"+n+"Window";this[o]!==t&&(this[o]=t,"top"===e&&(t?this.$nextTick(this.onTopWindowInit):l("--top-window-height","0px")))}},getWindowStyle:function(e){if(!this[e+"Window"])return e+"Window not found";var t=Object.assign({},this[e+"WindowStyle"]);return t},setWindowStyle:function(e,t){if(!this[e+"Window"])return e+"Window not found";t&&(this[e+"WindowStyle"]=t,this.$nextTick(this["on"+(0,a.capitalize)(e)+"WindowInit"]))},initMaxWidth:function(){var e=this;window.addEventListener("resize",(function(){e.checkMaxWidth()}))},checkLayout:function(){this.$emit("layout",this.showLayout)},checkMaxWidth:function(){var e=this,t=document.body.clientWidth,n=parseInt(this.$route.meta.maxWidth),o=!1;o=t>n,this.$emit("maxWidth",o),this.$containerElem||(this.$containerElem=document.querySelector("uni-app")),this.$containerElem&&(o&&n?(this.marginWidth=(t-n)/2,this.$nextTick((function(){e.onLeftWindowInit(),e.onRightWindowInit(),e.$containerElem.setAttribute("style","max-width:"+n+"px;margin:0 auto;")}))):(this.marginWidth=0,this.$nextTick((function(){e.onLeftWindowInit(),e.onRightWindowInit(),e.$containerElem.removeAttribute("style")}))))},initWindowMinWidth:function(e){var t=e+"Window";if(this[t]){var n=e+"WindowMinWidth";this[n]=s.RESPONSIVE_MIN_WIDTH;var o=__uniConfig[t];o&&o.matchMedia&&(0,a.hasOwn)(o.matchMedia,"minWidth")&&(this[n]=o.matchMedia.minWidth),("undefined"===typeof this.minWidth||this.minWidth>this[n])&&(this.minWidth=this[n])}},initMediaQuery:function(e){var t=this;if(this[e+"Window"]){var n=e+"WindowMediaQuery",o=window.matchMedia("(min-width: "+this[e+"WindowMinWidth"]+"px)");o.addListener((function(o){t[n]=o.matches,t.$nextTick((function(){t["on"+(0,a.capitalize)(e)+"WindowInit"]()}))})),this[n]=o.matches}},onTopWindowInit:function(){if(this.responsive&&this.topWindow){var e="0px";e=this.topWindowStyle&&this.topWindowStyle.height?this.$refs.topWindow.offsetHeight+"px":this.$refs.top.$el.offsetHeight+"px",this.topWindowHeight=e,l("--top-window-height",e)}},onLeftWindowInit:function(){this.responsive&&this.leftWindow?this.leftWindowStyle&&this.leftWindowStyle.width?l("--window-left",this.$refs.leftWindow.offsetWidth+this.marginWidth+"px"):l("--window-left",this.$refs.left.$el.offsetWidth+this.marginWidth+"px"):l("--window-left",this.marginWidth+"px")},onRightWindowInit:function(){this.responsive&&this.rightWindow?this.rightWindowStyle&&this.rightWindowStyle.width?l("--window-right",this.$refs.rightWindow.offsetWidth+this.marginWidth+"px"):l("--window-right",this.$refs.right.$el.offsetWidth+this.marginWidth+"px"):l("--window-right",this.marginWidth+"px")}}};t.default=d}).call(this,n("ef66"))},"6d27":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={scrollList:{indicatorWidth:50,indicatorBarWidth:20,indicator:!0,indicatorColor:"#f2f2f2",indicatorActiveColor:"#3c9cff",indicatorStyle:""}}},"6d74":function(e,t,n){"use strict";(function(e){var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("5ef2"),n("6a54"),n("bf0f"),n("2797"),n("dc8a"),n("c223");var i=n("c9ac"),r=n("41f8"),a=o(n("2468")),s=n("7c74");function c(){e.publishHandler("onPageReady",{},this.$page.id)}var u={install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.routes;(0,r.initEvents)();var n=function(e,t){for(var n=e.target;n&&n!==t;n=n.parentNode)if(n.tagName&&0===n.tagName.indexOf("UNI-"))break;return n};e.prototype.$handleEvent=function(e){if(e instanceof Event){var t=n(e,this.$el);e=r.processEvent.call(this,e.type,e,{},t||e.target,e.currentTarget)}return e},e.prototype.$getComponentDescriptor=function(e,t){return(0,s.createComponentDescriptor)(e||this,t)},Object.defineProperty(e.prototype,"$ownerInstance",{get:function(){return this.$getComponentDescriptor(this)}}),e.prototype.$handleWxsEvent=function(e){if(e instanceof Event){var t=e.currentTarget,o=t&&(t.__vue__||t),i=t&&o.$getComponentDescriptor&&o.$getComponentDescriptor(o,!1),a=e;e=r.processEvent.call(this,a.type,a,{},n(a,this.$el)||a.target,a.currentTarget),e.instance=i,e.preventDefault=function(){return a.preventDefault()},e.stopPropagation=function(){return a.stopPropagation()}}return e},e.mixin({beforeCreate:function(){var e=this,t=this.$options,n=t.wxs;n&&Object.keys(n).forEach((function(t){e[t]=n[t]})),t.behaviors&&t.behaviors.length&&(0,a.default)(t,this),(0,i.isPage)(this)&&(t.mounted=t.mounted?[].concat(c,t.mounted):[c])}})}};t.default=u}).call(this,n("b8be"))},"6d9a":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("uni-page",{attrs:{"data-page":e.$route.meta.pagePath}},["none"!==e.navigationBar.type?n("page-head",e._b({},"page-head",e.navigationBar,!1)):e._e(),e.enablePullDownRefresh?n("page-refresh",{ref:"refresh",attrs:{color:e.refreshOptions.color,offset:e.refreshOptions.offset}}):e._e(),e.enablePullDownRefresh?n("page-body",{nativeOn:{touchstart:function(t){return e._touchstart(t)},touchmove:function(t){return e._touchmove(t)},touchend:function(t){return e._touchend(t)},touchcancel:function(t){return e._touchend(t)}}},[e._t("page")],2):n("page-body",[e._t("page")],2)],1)},i=[]},"6de6":function(e,t,n){"use strict";n.r(t);var o=n("f1f43"),i=n("f95b");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a=n("828b"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},"6e4a":function(e,t,n){"use strict";var o=n("508d"),i=n("3a4b"),r=n("3c5d"),a=n("7aa6"),s=n("c86b"),c=n("fdca"),u=n("0699"),l=n("7478"),d=n("27cc"),f=r&&r.prototype,p=!!r&&a((function(){f["finally"].call({then:function(){}},(function(){}))}));if(o({target:"Promise",proto:!0,real:!0,forced:p},{finally:function(e){var t=u(this,s("Promise")),n=c(e);return this.then(n?function(n){return l(t,e()).then((function(){return n}))}:e,n?function(n){return l(t,e()).then((function(){throw n}))}:e)}}),!i&&c(r)){var h=s("Promise").prototype["finally"];f["finally"]!==h&&d(f,"finally",h,{unsafe:!0})}},"6e8c":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("33e9"),i=n("c3bd"),r=n("4bad"),a=n("f6c7"),s=n("1261"),c=n("3725"),u=n("44d2"),l=n("ece8"),d=n("1f5e"),f=n("c34d"),p=n("e58a"),h=n("ed7b"),g=n("422c"),_=n("09a1"),v=n("1269"),m=n("c99c"),y=n("2fbb"),M=n("4e43"),I=n("cd48"),C=n("83ed"),b=n("e102"),T=n("73e0"),S=n("75bd"),E=n("bf70"),k=n("1980"),D=n("b7d1"),A=n("05f2"),L=n("bc06"),O=n("2c75"),R=n("0976"),w={$emit:o.$emit,$off:o.$off,$on:o.$on,canIUse:i.canIUse,chooseFile:r.chooseFile,chooseImage:a.chooseImage,chooseVideo:s.chooseVideo,closeSocket:c.closeSocket,connectSocket:c.connectSocket,createInnerAudioContext:u.createInnerAudioContext,createIntersectionObserver:l.createIntersectionObserver,createMediaQueryObserver:d.createMediaQueryObserver,createSelectorQuery:f.createSelectorQuery,createVideoContext:p.createVideoContext,downloadFile:h.downloadFile,getDeviceInfo:g.getDeviceInfo,getImageInfo:_.getImageInfo,getLocale:v.getLocale,getStorageSync:m.getStorageSync,getSystemInfo:g.getSystemInfo,getSystemInfoSync:g.getSystemInfoSync,getWindowInfo:y.getWindowInfo,hideKeyboard:M.hideKeyboard,hideLoading:I.hideLoading,makePhoneCall:C.makePhoneCall,navigateBack:b.navigateBack,navigateTo:b.navigateTo,onSocketClose:c.onSocketClose,onSocketError:c.onSocketError,onSocketMessage:c.onSocketMessage,onSocketOpen:c.onSocketOpen,pageScrollTo:T.pageScrollTo,previewImage:S.previewImage,reLaunch:b.reLaunch,redirectTo:b.redirectTo,removeStorageSync:m.removeStorageSync,request:E.request,sendSocketMessage:c.sendSocketMessage,setClipboardData:k.setClipboardData,setNavigationBarTitle:D.setNavigationBarTitle,setStorageSync:m.setStorageSync,setTabBarItem:A.setTabBarItem,showModal:I.showModal,showToast:I.showToast,stopPullDownRefresh:L.stopPullDownRefresh,switchTab:b.switchTab,uploadFile:O.uploadFile,upx2px:R.upx2px};t.default=w},"6f19":function(e,t,n){var o=n("6c13");e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(o)},"6f35":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this.$createElement,t=this._self._c||e;return t("uni-page-wrapper",[t("uni-page-body",[this._t("default")],2)],1)},i=[]},7003:function(e,t,n){var o,i,r,a=n("bdbb").default;(function(s,c,u){"object"===a(t)?e.exports=t=c(n("5e74"),n("7f5d"),n("4f3e"),n("734e"),n("f794")):(i=[n("5e74"),n("7f5d"),n("4f3e"),n("734e"),n("f794")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))})(0,(function(e){return function(){var t=e,n=t.lib,o=n.StreamCipher,i=t.algo,r=[],a=[],s=[],c=i.Rabbit=o.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var o=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(n=0;n<4;n++)u.call(this);for(n=0;n<8;n++)i[n]^=o[n+4&7];if(t){var r=t.words,a=r[0],s=r[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=c>>>16|4294901760&l,f=l<<16|65535&c;i[0]^=c,i[1]^=d,i[2]^=l,i[3]^=f,i[4]^=c,i[5]^=d,i[6]^=l,i[7]^=f;for(n=0;n<4;n++)u.call(this)}},_doProcessBlock:function(e,t){var n=this._X;u.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var o=0;o<4;o++)r[o]=16711935&(r[o]<<8|r[o]>>>24)|4278255360&(r[o]<<24|r[o]>>>8),e[t+o]^=r[o]},blockSize:4,ivSize:2});function u(){for(var e=this._X,t=this._C,n=0;n<8;n++)a[n]=t[n];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0;for(n=0;n<8;n++){var o=e[n]+t[n],i=65535&o,r=o>>>16,c=((i*i>>>17)+i*r>>>15)+r*r,u=((4294901760&o)*o|0)+((65535&o)*o|0);s[n]=c^u}e[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,e[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,e[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,e[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,e[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,e[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,e[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,e[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}t.Rabbit=o._createHelper(c)}(),e.Rabbit}))},"703c":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this.$createElement,t=this._self._c||e;return t("uni-page-refresh",[t("div",{staticClass:"uni-page-refresh",style:{"margin-top":this.offset+"px"}},[t("div",{staticClass:"uni-page-refresh-inner"},[t("svg",{staticClass:"uni-page-refresh__icon",attrs:{fill:this.color,width:"24",height:"24",viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}}),t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}})]),t("svg",{staticClass:"uni-page-refresh__spinner",attrs:{width:"24",height:"24",viewBox:"25 25 50 50"}},[t("circle",{staticClass:"uni-page-refresh__path",attrs:{stroke:this.color,cx:"50",cy:"50",r:"20",fill:"none","stroke-width":"4","stroke-miterlimit":"10"}})])])])])},i=[]},7054:function(e,t,n){"use strict";var o=n("e7e3"),i=n("df92"),r=TypeError;e.exports=function(e){if(o(this),"string"===e||"default"===e)e="string";else if("number"!==e)throw new r("Incorrect hint");return i(this,e)}},"70a5":function(e,t,n){var o=n("6c13"),i=n("8394");e.exports=/ipad|iphone|ipod/i.test(o)&&void 0!==i.Pebble},"70dd":function(e,t,n){var o,i,r,a=n("bdbb").default;n("c223"),function(s,c,u){"object"===a(t)?e.exports=t=c(n("5e74"),n("f794")):(i=[n("5e74"),n("f794")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))}(0,(function(e){return e.pad.Iso97971={pad:function(t,n){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,n)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.pad.Iso97971}))},"71b7":function(e,t,n){"use strict";(function(e){n("6a54");var o=n("3639").default;Object.defineProperty(t,"__esModule",{value:!0}),t.createAppMixin=function(t,n,o){return{created:function(){(0,r.default)(t,this,n),o.meta.name||e.emit("onPageNotFound",{path:o.path,query:o.query,isEntryPage:!0})},beforeMount:function(){this.$el=document.getElementById("app")},mounted:function(){l({path:this.$route.meta&&this.$route.meta.pagePath,query:this.$route.query}),(0,i.callAppHook)(this,"onLaunch",u),(0,i.callAppHook)(this,"onShow",c)}}},Object.defineProperty(t,"getApp",{enumerable:!0,get:function(){return r.getApp}}),Object.defineProperty(t,"getCurrentPages",{enumerable:!0,get:function(){return r.getCurrentPages}}),t.getEnterOptions=function(){return c},t.getLaunchOptions=function(){return u},t.initLaunchOptions=l;var i=n("e0f3"),r=o(n("2327")),a=Object.assign;function s(){return{path:"",query:{},scene:1001,referrerInfo:{appId:"",extraData:{}}}}var c=s(),u=s();function l(e){var t=e.path,n=e.query,o=e.referrerInfo;return a(u,{path:t,query:n||{},referrerInfo:o||{}}),a(c,u),u}}).call(this,n("ef66"))},"71e9":function(e,t,n){"use strict";var o=n("8f26"),i=Function.prototype.call;e.exports=o?i.bind(i):function(){return i.apply(i,arguments)}},"720d":function(e,t,n){var o=n("d456"),i=n("fdca"),r=n("85e5"),a=n("29d5"),s=a("toStringTag"),c=Object,u="Arguments"==r(function(){return arguments}());e.exports=o?r:function(e){var t,n,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=c(e),s))?n:u?r(t):"Object"==(o=r(t))&&i(t.callee)?"Arguments":o}},7257:function(e,t,n){"use strict";var o=n("db06");e.exports=function(e){try{if(o)return Function('return require("'+e+'")')()}catch(t){}}},"734e":function(e,t,n){var o,i,r,a=n("bdbb").default;n("c223"),function(s,c,u){"object"===a(t)?e.exports=t=c(n("5e74"),n("4393"),n("3fdf")):(i=[n("5e74"),n("4393"),n("3fdf")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))}(0,(function(e){return function(){var t=e,n=t.lib,o=n.Base,i=n.WordArray,r=t.algo,a=r.MD5,s=r.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){var n,o=this.cfg,r=o.hasher.create(),a=i.create(),s=a.words,c=o.keySize,u=o.iterations;while(s.length<c){n&&r.update(n),n=r.update(e).finalize(t),r.reset();for(var l=1;l<u;l++)n=r.finalize(n),r.reset();a.concat(n)}return a.sigBytes=4*c,a}});t.EvpKDF=function(e,t,n){return s.create(n).compute(e,t)}}(),e.EvpKDF}))},"73d4":function(e,t,n){var o,i,r,a=n("bdbb").default;n("f7a5"),function(s,c,u){"object"===a(t)?e.exports=t=c(n("5e74"),n("f794")):(i=[n("5e74"),n("f794")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))}(0,(function(e){return e.mode.OFB=function(){var t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,o=n.blockSize,i=this._iv,r=this._keystream;i&&(r=this._keystream=i.slice(0),this._iv=void 0),n.encryptBlock(r,0);for(var a=0;a<o;a++)e[t+a]^=r[a]}});return t.Decryptor=n,t}(),e.mode.OFB}))},"73dc":function(e,t,n){"use strict";function o(e){return window.CSS&&CSS.supports&&(CSS.supports(e)||CSS.supports.apply(CSS,e.split(":")))}n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={"css.var":o("--a:0"),"css.env":o("top:env(a)"),"css.constant":o("top:constant(a)")};t.default=i},"73e0":function(e,t,n){"use strict";(function(e){n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.pageScrollTo=function(t){var n=getCurrentPages();n.length&&e.publishHandler("pageScrollTo",t,n[n.length-1].$page.id);return{}}}).call(this,n("ef66"))},"73e1":function(e,t,n){"use strict";var o=n("29d8");e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(o)},7478:function(e,t,n){var o=n("d191"),i=n("1ae3"),r=n("f439");e.exports=function(e,t){if(o(e),i(t)&&t.constructor===e)return t;var n=r.f(e),a=n.resolve;return a(t),n.promise}},"74ad":function(e){e.exports=JSON.parse('{"uni.app.quit":"再按一次退出應用","uni.async.error":"連接服務器超時，點擊屏幕重試","uni.showActionSheet.cancel":"取消","uni.showToast.unpaired":"請注意 showToast 與 hideToast 必須配對使用","uni.showLoading.unpaired":"請注意 showLoading 與 hideLoading 必須配對使用","uni.showModal.cancel":"取消","uni.showModal.confirm":"確定","uni.chooseImage.cancel":"取消","uni.chooseImage.sourceType.album":"從相冊選擇","uni.chooseImage.sourceType.camera":"拍攝","uni.chooseVideo.cancel":"取消","uni.chooseVideo.sourceType.album":"從相冊選擇","uni.chooseVideo.sourceType.camera":"拍攝","uni.chooseFile.notUserActivation":"文件選擇器對話框只能在由用戶激活時顯示","uni.previewImage.cancel":"取消","uni.previewImage.button.save":"保存圖像","uni.previewImage.save.success":"保存圖像到相冊成功","uni.previewImage.save.fail":"保存圖像到相冊失敗","uni.setClipboardData.success":"內容已復制","uni.scanCode.title":"掃碼","uni.scanCode.album":"相冊","uni.scanCode.fail":"識別失敗","uni.scanCode.flash.on":"輕觸照亮","uni.scanCode.flash.off":"輕觸關閉","uni.startSoterAuthentication.authContent":"指紋識別中...","uni.startSoterAuthentication.waitingContent":"無法識別","uni.picker.done":"完成","uni.picker.cancel":"取消","uni.video.danmu":"彈幕","uni.video.volume":"音量","uni.button.feedback.title":"問題反饋","uni.button.feedback.send":"發送","uni.chooseLocation.search":"搜索地點","uni.chooseLocation.cancel":"取消"}')},"750e":function(e,t,n){"use strict";(function(e){n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.requestComponentInfo=function(t,n){var o,i=t.reqId,r=t.reqs;if(n._isVue)o=n;else{var a=getCurrentPages(),u=a.find((function(e){return e.$page.id===n}));if(!u)throw new Error("Not Found：Page[".concat(n,"]"));o=u.$vm}var l=[];r.forEach((function(e){var t=e.component,n=e.selector,i=e.single,r=e.fields;0===t?l.push(function(e){var t={};e.id&&(t.id="");e.dataset&&(t.dataset={});e.rect&&(t.left=0,t.right=0,t.top=0,t.bottom=0);e.size&&(t.width=document.documentElement.clientWidth,t.height=document.documentElement.clientHeight);if(e.scrollOffset){var n=document.documentElement,o=document.body;t.scrollLeft=n.scrollLeft||o.scrollLeft||0,t.scrollTop=n.scrollTop||o.scrollTop||0,t.scrollHeight=n.scrollHeight||o.scrollHeight||0,t.scrollWidth=n.scrollWidth||o.scrollWidth||0}return t}(r)):l.push(function(e,t,n,o,i){var r=(0,s.elementMatchesPolyfill)((0,s.findElm)(t,e));if(!r||r&&8===r.nodeType)return o?null:[];if(o){var a=r.matches(n)?r:r.querySelector(n);return a?c(a,i):null}var u=[],l=r.querySelectorAll(n);return l&&l.length&&(u=[].map.call(l,(function(e){return c(e,i)}))),r.matches(n)&&u.unshift(c(r,i)),u}(o,t,n,i,r))})),e.publishHandler("onRequestComponentInfo",{reqId:i,res:l})},n("bf0f"),n("2797"),n("fd3c"),n("3efd"),n("aa77"),n("7a76"),n("c9b5"),n("aa9c");var i=n("c9ac"),r=n("1ffa"),a=o(n("141c")),s=n("b30e");function c(e,t){var n={},o=(0,a.default)(),s=o.top;if(t.id&&(n.id=e.id),t.dataset&&(n.dataset=(0,i.getTargetDataset)(e)),t.rect||t.size){var c=e.getBoundingClientRect();t.rect&&(n.left=c.left,n.right=c.right,n.top=c.top-s,n.bottom=c.bottom-s),t.size&&(n.width=c.width,n.height=c.height)}if(Array.isArray(t.properties)){var u=e.__vue__&&e.__vue__.$props;u&&t.properties.forEach((function(e){"string"===typeof e&&(e=(0,r.camelize)(e),null!=u[e]&&(n[e]=u[e]))}))}if(t.scrollOffset&&("UNI-SCROLL-VIEW"===e.tagName&&e.__vue__&&e.__vue__.getScrollPosition?Object.assign(n,e.__vue__.getScrollPosition()):(n.scrollLeft=0,n.scrollTop=0,n.scrollHeight=0,n.scrollWidth=0)),Array.isArray(t.computedStyle)){var l=getComputedStyle(e);t.computedStyle.forEach((function(e){n[e]=l[e]}))}return t.context&&e.__vue__&&e.__vue__._getContextInfo&&(n.context=e.__vue__._getContextInfo()),n}}).call(this,n("b8be"))},"751d":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("659d")),r={name:"View",mixins:[i.default],listeners:{"label-click":"clickHandler"}};t.default=r},"75bd":function(e,t,n){"use strict";(function(e){n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.closePreviewImage=function(e,t){i("onClosePreviewImage",(function(){r(t,{errMsg:"closePreviewImage:ok"})}))},t.previewImage=function(e,t){i("onShowPreviewImage",e,(function(e){r(t,{errMsg:"previewImage:ok"})}))};var o=e,i=o.emit,r=o.invokeCallbackHandler}).call(this,n("ef66"))},"75d4":function(e,t,n){"use strict";(function(e){n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.EditorContext=void 0,n("bf0f");var i=o(n("80b1")),r=o(n("efe5")),a=n("1ffa");function s(t,n,o,i){e.publishHandler(n+"-editor-"+t,{componentId:t,type:o,data:i},n)}e.subscribe("onEditorMethodCallback",(function(e){var t=e.callbackId,n=e.data;a.callback.invoke(t,n)}));var c=function(){function e(t,n){(0,i.default)(this,e),this.id=t,this.pageId=n}return(0,r.default)(e,[{key:"format",value:function(e,t){s(this.id,this.pageId,"format",{options:{name:e,value:t}})}}]),e}();t.EditorContext=c,["insertDivider","insertImage","insertText","setContents","getContents","clear","removeFormat","undo","redo","blur","getSelectionText","scrollIntoView"].forEach((function(e){c.prototype[e]=a.callback.warp((function(t,n){s(this.id,this.pageId,e,{options:t,callbackId:n})}))}))}).call(this,n("ef66"))},"75f9":function(e,t,n){"use strict";(function(e){n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.MapContext=void 0,t.createMapContext=function(e,t){if(t)return new u(e,t);return new u(e,(0,a.getCurrentPageVm)("createMapContext"))},n("bf0f");var i=o(n("80b1")),r=o(n("efe5")),a=n("a745"),s=n("1ffa");function c(e,t,n,o){(0,a.invokeMethod)("operateMapPlayer",e,t,n,o)}e.subscribe("onMapMethodCallback",(function(e){var t=e.callbackId,n=e.data;s.callback.invoke(t,n)}));var u=function(){function e(t,n){(0,i.default)(this,e),this.id=t,this.pageVm=n}return(0,r.default)(e,[{key:"on",value:function(e,t){c(this.id,this.pageVm,"on",{name:e,callback:t})}}]),e}();t.MapContext=u,u.prototype.$getAppMap=function(){0},["getCenterLocation","moveToLocation","getScale","getRegion","includePoints","translateMarker","addCustomLayer","removeCustomLayer","addGroundOverlay","removeGroundOverlay","updateGroundOverlay","initMarkerCluster","addMarkers","removeMarkers","moveAlong","setLocMarkerIcon","openMapApp"].forEach((function(e){u.prototype[e]=s.callback.warp((function(t,n){t.callbackId=n,c(this.id,this.pageVm,e,t)}))}))}).call(this,n("ef66"))},"762a":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={methods:{beforeTransition:function(){},afterTransition:function(){}}}},7658:function(e,t,n){"use strict";var o=n("8bdb"),i=n("85c1"),r=n("bb80"),a=n("8466"),s=n("81a9"),c=n("d0b1"),u=n("50757"),l=n("b720"),d=n("474f"),f=n("1eb8"),p=n("1c06"),h=n("af9e"),g=n("29ba"),_=n("181d"),v=n("dcda");e.exports=function(e,t,n){var m=-1!==e.indexOf("Map"),y=-1!==e.indexOf("Weak"),M=m?"set":"add",I=i[e],C=I&&I.prototype,b=I,T={},S=function(e){var t=r(C[e]);s(C,e,"add"===e?function(e){return t(this,0===e?0:e),this}:"delete"===e?function(e){return!(y&&!p(e))&&t(this,0===e?0:e)}:"get"===e?function(e){return y&&!p(e)?void 0:t(this,0===e?0:e)}:"has"===e?function(e){return!(y&&!p(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})},E=a(e,!d(I)||!(y||C.forEach&&!h((function(){(new I).entries().next()}))));if(E)b=n.getConstructor(t,e,m,M),c.enable();else if(a(e,!0)){var k=new b,D=k[M](y?{}:-0,1)!==k,A=h((function(){k.has(1)})),L=g((function(e){new I(e)})),O=!y&&h((function(){var e=new I,t=5;while(t--)e[M](t,t);return!e.has(-0)}));L||(b=t((function(e,t){l(e,C);var n=v(new I,e,b);return f(t)||u(t,n[M],{that:n,AS_ENTRIES:m}),n})),b.prototype=C,C.constructor=b),(A||O)&&(S("delete"),S("has"),m&&S("get")),(O||D)&&S(M),y&&C.clear&&delete C.clear}return T[e]=b,o({global:!0,constructor:!0,forced:b!==I},T),_(b,e),y||n.setStrong(b,e,m),b}},"774f":function(e,t,n){"use strict";n.r(t);var o=n("538f"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},"77a6":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeTabBarStyles=r,t.normallizeStyles=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"light",a=n[i],s={};if(!a)return t;return Object.keys(t).forEach((function(c){var u=t[c];s[c]=function(){if((0,o.isPlainObject)(u))return e(u,n,i);if(Array.isArray(u))return u.map((function(t){return(0,o.isPlainObject)(t)?e(t,n,i):t}));if((0,o.isStr)(u)&&u.startsWith("@")){var t=u.replace("@",""),s=a[t]||u;switch(c){case"borderStyle":s=r(s);break}return s}return u}()})),s},n("bf0f"),n("2797"),n("dc8a"),n("fd3c"),n("9db6"),n("5c47"),n("a1c1");var o=n("2fd0"),i={black:"rgba(0,0,0,0.4)",white:"rgba(255,255,255,0.4)"};function r(e){return e&&e in i?i[e]:e}},"77aa":function(e,t,n){"use strict";n.r(t);var o=n("e1f4");for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var r=n("828b"),a=Object(r["a"])(o["default"],void 0,void 0,!1,null,null,null,!1,void 0,void 0);t["default"]=a.exports},"77b2":function(e,t,n){var o=n("d10a");e.exports=o({}.isPrototypeOf)},"77cd":function(e,t,n){var o=n("d10a"),i=n("b510"),r=o({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return r(i(e),t)}},"77e0":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={image:{src:"",mode:"aspectFill",width:"300",height:"225",shape:"square",radius:0,lazyLoad:!0,showMenuByLongpress:!0,loadingIcon:"photo",errorIcon:"error-circle",showLoading:!0,showError:!0,fade:!0,webp:!1,duration:500,bgColor:"#f3f4f6"}}},7808:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={statusBar:{bgColor:"transparent"}}},"78ab":function(e,t,n){"use strict";n("6a54"),n("2797");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.deepMerge=function e(){var t={};function n(n,o){"object"===(0,i.default)(t[o])&&"object"===(0,i.default)(n)?t[o]=e(t[o],n):"object"===(0,i.default)(n)?t[o]=e({},n):t[o]=n}for(var o=0,r=arguments.length;o<r;o++)s(arguments[o],n);return t},t.forEach=s,t.isArray=a,t.isBoolean=function(e){return"boolean"===typeof e},t.isDate=function(e){return"[object Date]"===r.call(e)},t.isObject=function(e){return null!==e&&"object"===(0,i.default)(e)},t.isPlainObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},t.isURLSearchParams=function(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams},t.isUndefined=function(e){return"undefined"===typeof e};var i=o(n("fcf3"));n("bf0f"),n("18f7"),n("de6c"),n("2425");var r=Object.prototype.toString;function a(e){return"[object Array]"===r.call(e)}function s(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==(0,i.default)(e)&&(e=[e]),a(e))for(var n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}},7934:function(e,t,n){"use strict";var o=n("569b"),i=n("8e02");e.exports=o?{}.toString:function(){return"[object "+i(this)+"]"}},"795c":function(e,t,n){"use strict";var o=n("8bdb"),i=n("db04").start,r=n("73e1");o({target:"String",proto:!0,forced:r},{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},7992:function(e,t,n){"use strict";var o=n("474f"),i=n("52df"),r=TypeError;e.exports=function(e){if(o(e))return e;throw new r(i(e)+" is not a function")}},7996:function(e,t,n){"use strict";var o=n("8bdb"),i=n("85c1"),r=n("181d");o({global:!0},{Reflect:{}}),r(i.Reflect,"Reflect",!0)},"799d":function(e,t,n){"use strict";e.exports={}},"7a76":function(e,t,n){"use strict";var o=n("8bdb"),i=n("85c1"),r=n("9f9e"),a=n("175f"),s=i["WebAssembly"],c=7!==new Error("e",{cause:7}).cause,u=function(e,t){var n={};n[e]=a(e,t,c),o({global:!0,constructor:!0,arity:1,forced:c},n)},l=function(e,t){if(s&&s[e]){var n={};n[e]=a("WebAssembly."+e,t,c),o({target:"WebAssembly",stat:!0,constructor:!0,arity:1,forced:c},n)}};u("Error",(function(e){return function(t){return r(e,this,arguments)}})),u("EvalError",(function(e){return function(t){return r(e,this,arguments)}})),u("RangeError",(function(e){return function(t){return r(e,this,arguments)}})),u("ReferenceError",(function(e){return function(t){return r(e,this,arguments)}})),u("SyntaxError",(function(e){return function(t){return r(e,this,arguments)}})),u("TypeError",(function(e){return function(t){return r(e,this,arguments)}})),u("URIError",(function(e){return function(t){return r(e,this,arguments)}})),l("CompileError",(function(e){return function(t){return r(e,this,arguments)}})),l("LinkError",(function(e){return function(t){return r(e,this,arguments)}})),l("RuntimeError",(function(e){return function(t){return r(e,this,arguments)}}))},"7aa6":function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},"7ac5":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={picker:{show:!1,showToolbar:!0,title:"",columns:function(){return[]},loading:!1,itemHeight:44,cancelText:"取消",confirmText:"确定",cancelColor:"#909193",confirmColor:"#3c9cff",visibleItemCount:5,keyName:"text",closeOnClickOverlay:!1,defaultIndex:function(){return[]},immediateChange:!1}}},"7b05":function(e,t,n){var o,i,r,a=n("c7dd"),s=n("8394"),c=n("1ae3"),u=n("d1a8"),l=n("77cd"),d=n("49a5"),f=n("3872"),p=n("bd8a"),h=s.TypeError,g=s.WeakMap;if(a||d.state){var _=d.state||(d.state=new g);_.get=_.get,_.has=_.has,_.set=_.set,o=function(e,t){if(_.has(e))throw h("Object already initialized");return t.facade=e,_.set(e,t),t},i=function(e){return _.get(e)||{}},r=function(e){return _.has(e)}}else{var v=f("state");p[v]=!0,o=function(e,t){if(l(e,v))throw h("Object already initialized");return t.facade=e,u(e,v,t),t},i=function(e){return l(e,v)?e[v]:{}},r=function(e){return l(e,v)}}e.exports={set:o,get:i,has:r,enforce:function(e){return r(e)?i(e):o(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=i(t)).type!==e)throw h("Incompatible receiver, "+e+" required");return n}}}},"7b0e":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={swiper:{list:function(){return[]},indicator:!1,indicatorActiveColor:"#FFFFFF",indicatorInactiveColor:"rgba(255, 255, 255, 0.35)",indicatorStyle:"",indicatorMode:"line",autoplay:!0,current:0,currentItemId:"",interval:3e3,duration:300,circular:!1,previousMargin:0,nextMargin:0,acceleration:!1,displayMultipleItems:1,easingFunction:"default",keyName:"url",imgMode:"aspectFill",height:130,bgColor:"#f3f4f6",radius:4,loading:!1,showTitle:!1}}},"7b5e":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={row:{gutter:0,justify:"start",align:"center"}}},"7b61":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.mergeTitleNView=function(e,t){(0,r.isPlainObject)(t)&&((0,r.hasOwn)(t,"backgroundColor")&&(e.backgroundColor=t.backgroundColor),(0,r.hasOwn)(t,"buttons")&&(e.buttons=t.buttons),(0,r.hasOwn)(t,"titleColor")&&(e.textColor=t.titleColor),(0,r.hasOwn)(t,"titleText")&&(e.titleText=t.titleText),(0,r.hasOwn)(t,"titleSize")&&(e.titleSize=t.titleSize),(0,r.hasOwn)(t,"type")&&(e.type=t.type),(0,r.hasOwn)(t,"searchInput")&&"object"===(0,i.default)(t.searchInput)&&(e.searchInput=Object.assign({autoFocus:!1,align:"center",color:"#000000",backgroundColor:"rgba(255,255,255,0.5)",borderRadius:"0px",placeholder:"",placeholderColor:"#CCCCCC",disabled:!1},t.searchInput)));return e},t.wrapperMPEvent=function(e){return e.mp=Object.assign({"@warning":"mp is deprecated"},e),e._processed=!0,e};var i=o(n("fcf3")),r=n("1ffa")},"7b97":function(e,t,n){"use strict";var o=n("bb80"),i=n("7ddb"),r=n("6a2b"),a=o(r),s=i.aTypedArray,c=i.exportTypedArrayMethod;c("copyWithin",(function(e,t){return a(s(this),e,t,arguments.length>2?arguments[2]:void 0)}))},"7ba9":function(e,t,n){"use strict";n.r(t);var o=n("3ccd"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},"7c26":function(e,t,n){var o=n("dbc3"),i=n("d7b8"),r=n("d191"),a=n("e158"),s=n("1e4f"),c=n("1e5d"),u=n("77b2"),l=n("bef2"),d=n("1b8e"),f=n("e39d"),p=TypeError,h=function(e,t){this.stopped=e,this.result=t},g=h.prototype;e.exports=function(e,t,n){var _,v,m,y,M,I,C,b=n&&n.that,T=!(!n||!n.AS_ENTRIES),S=!(!n||!n.IS_RECORD),E=!(!n||!n.IS_ITERATOR),k=!(!n||!n.INTERRUPTED),D=o(t,b),A=function(e){return _&&f(_,"normal",e),new h(!0,e)},L=function(e){return T?(r(e),k?D(e[0],e[1],A):D(e[0],e[1])):k?D(e,A):D(e)};if(S)_=e.iterator;else if(E)_=e;else{if(v=d(e),!v)throw p(a(e)+" is not iterable");if(s(v)){for(m=0,y=c(e);y>m;m++)if(M=L(e[m]),M&&u(g,M))return M;return new h(!1)}_=l(e,v)}I=S?e.next:_.next;while(!(C=i(I,_)).done){try{M=L(C.value)}catch(O){f(_,"throw",O)}if("object"==typeof M&&M&&u(g,M))return M}return new h(!1)}},"7c74":function(e,t,n){"use strict";(function(e,o){var i=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentDescriptor=void 0,t.createComponentDescriptor=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&e&&e.$options.name&&0===e.$options.name.indexOf("VUni")&&(e=e.$parent);if(e)return"__wxsComponentDescriptor"in e||(e.__wxsComponentDescriptor=new f(e)),e.__wxsComponentDescriptor},t.parseStyleText=d;var r=i(n("80b1")),a=i(n("efe5"));n("bf0f"),n("2797"),n("5c47"),n("a1c1"),n("aa9c"),n("dfcf"),n("0c26"),n("6a54"),n("bd06"),n("dd2b"),n("d4b5"),n("5ef2");var s=n("1ffa"),c=/^\s+|\s+$/g,u=/\s+/;function l(e,t,n){var o=[],i=function(e){return i=n?function(e){return!t.contains(e)}:function(e){return t.contains(e)},i(e)};return e.forEach((function(e){e=e.replace(c,""),i(e)&&o.push(e)})),o}function d(e){var t={},n=/:(.+)/;return e.split(/;(?![^(]*\))/g).forEach((function(e){if(e){var o=e.split(n);o.length>1&&(t[o[0].trim()]=o[1].trim())}})),t}var f=function(){function t(e){(0,r.default)(this,t),this.$vm=e,Object.defineProperty(this,"$el",{get:function(){return e.$el}})}return(0,a.default)(t,[{key:"selectComponent",value:function(e){if(this.$el&&e){var t=this.$el.querySelector(e),n=t.__vue__||t;return n.$getComponentDescriptor&&n.$getComponentDescriptor(n,!1)}}},{key:"selectAllComponents",value:function(e){if(!this.$el||!e)return[];for(var t=[],n=this.$el.querySelectorAll(e),o=0;o<n.length;o++){var i=n[o],r=i.__vue__||i;r.$getComponentDescriptor&&t.push(r.$getComponentDescriptor(r,!1))}return t}},{key:"setStyle",value:function(e){return this.$el&&e?("string"===typeof e&&(e=d(e)),(0,s.isPlainObject)(e)&&(this.$el.__wxsStyle=e,this.$vm.$forceUpdate()),this):this}},{key:"addClass",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!this.$el||!t.length)return this;var o=l(t,this.$el.classList,!0);if(o.length){var i=this.$el.__wxsAddClass||"";this.$el.__wxsAddClass=i+(i?" ":"")+o.join(" "),this.$vm.$forceUpdate()}return this}},{key:"removeClass",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!this.$el||!t.length)return this;var o=this.$el.classList,i=this.$el.__wxsAddClass?this.$el.__wxsAddClass.split(u):[],r=l(t,o,!1);if(r.length){var a=[];r.forEach((function(e){var t=i.findIndex((function(t){return t===e}));-1!==t&&i.splice(t,1),a.push(e)})),this.$el.__wxsRemoveClass=a,this.$el.__wxsAddClass=i.join(" "),this.$vm.$forceUpdate()}return this}},{key:"hasClass",value:function(e){return this.$el&&this.$el.classList.contains(e)}},{key:"getComputedStyle",value:function(){return this.$el?window.getComputedStyle(this.$el):{}}},{key:"getDataset",value:function(){return this.$el&&this.$el.dataset}},{key:"callMethod",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t in this.$vm?this.$vm[t](JSON.parse(JSON.stringify(n))):this.$vm._$id&&e.publishHandler("onWxsInvokeCallMethod",{cid:this.$vm._$id,method:t,args:n})}},{key:"requestAnimationFrame",value:function(e){return o.requestAnimationFrame(e),this}},{key:"getState",value:function(){return this.$el&&(this.$el.__wxsState||(this.$el.__wxsState={}))}},{key:"triggerEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.$vm.$emit(e,t),this}},{key:"setTimeout",value:function(e,t){return window.setTimeout(e,t)}},{key:"clearTimeout",value:function(e){return window.clearTimeout(e)}},{key:"getBoundingClientRect",value:function(){return this.$el.getBoundingClientRect()}}]),t}();t.ComponentDescriptor=f}).call(this,n("b8be"),n("0ee4"))},"7d2f":function(e,t,n){"use strict";var o=n("ab4a"),i=n("b0a8"),r=n("ada5"),a=n("e4ca"),s=n("235c").get,c=RegExp.prototype,u=TypeError;o&&i&&a(c,"dotAll",{configurable:!0,get:function(){if(this!==c){if("RegExp"===r(this))return!!s(this).dotAll;throw new u("Incompatible receiver, RegExp required")}}})},"7d3c":function(e,t,n){"use strict";t.f=Object.getOwnPropertySymbols},"7d80":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={keyboard:{mode:"number",dotDisabled:!1,tooltip:!0,showTips:!0,tips:"",showCancel:!0,showConfirm:!0,random:!1,safeAreaInsetBottom:!0,closeOnClickOverlay:!0,show:!1,overlay:!0,zIndex:10075,cancelText:"取消",confirmText:"确定",autoChange:!1}}},"7daa":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={backtop:{mode:"circle",icon:"arrow-upward",text:"",duration:100,scrollTop:0,top:400,bottom:100,right:20,zIndex:9,iconStyle:function(){return{color:"#909399",fontSize:"19px"}}}}},"7dd7":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={radioGroup:{value:"",disabled:!1,shape:"circle",activeColor:"#2979ff",inactiveColor:"#c8c9cc",name:"",size:18,placement:"row",label:"",labelColor:"#303133",labelSize:14,labelDisabled:!1,iconColor:"#ffffff",iconSize:12,borderBottom:!1,iconPlacement:"left"}}},"7ddb":function(e,t,n){"use strict";var o,i,r,a=n("c89b"),s=n("ab4a"),c=n("85c1"),u=n("474f"),l=n("1c06"),d=n("338c"),f=n("8e02"),p=n("52df"),h=n("6aca"),g=n("81a9"),_=n("e4ca"),v=n("1297"),m=n("c337"),y=n("8c4f"),M=n("8c08"),I=n("d7b4"),C=n("235c"),b=C.enforce,T=C.get,S=c.Int8Array,E=S&&S.prototype,k=c.Uint8ClampedArray,D=k&&k.prototype,A=S&&m(S),L=E&&m(E),O=Object.prototype,R=c.TypeError,w=M("toStringTag"),N=I("TYPED_ARRAY_TAG"),P=a&&!!y&&"Opera"!==f(c.opera),G=!1,U={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},x={BigInt64Array:8,BigUint64Array:8},F=function(e){var t=m(e);if(l(t)){var n=T(t);return n&&d(n,"TypedArrayConstructor")?n["TypedArrayConstructor"]:F(t)}},q=function(e){if(!l(e))return!1;var t=f(e);return d(U,t)||d(x,t)};for(o in U)i=c[o],r=i&&i.prototype,r?b(r)["TypedArrayConstructor"]=i:P=!1;for(o in x)i=c[o],r=i&&i.prototype,r&&(b(r)["TypedArrayConstructor"]=i);if((!P||!u(A)||A===Function.prototype)&&(A=function(){throw new R("Incorrect invocation")},P))for(o in U)c[o]&&y(c[o],A);if((!P||!L||L===O)&&(L=A.prototype,P))for(o in U)c[o]&&y(c[o].prototype,L);if(P&&m(D)!==L&&y(D,L),s&&!d(L,w))for(o in G=!0,_(L,w,{configurable:!0,get:function(){return l(this)?this[N]:void 0}}),U)c[o]&&h(c[o],N,o);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:P,TYPED_ARRAY_TAG:G&&N,aTypedArray:function(e){if(q(e))return e;throw new R("Target is not a typed array")},aTypedArrayConstructor:function(e){if(u(e)&&(!y||v(A,e)))return e;throw new R(p(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n,o){if(s){if(n)for(var i in U){var r=c[i];if(r&&d(r.prototype,e))try{delete r.prototype[e]}catch(a){try{r.prototype[e]=t}catch(u){}}}L[e]&&!n||g(L,e,n?t:P&&E[e]||t,o)}},exportTypedArrayStaticMethod:function(e,t,n){var o,i;if(s){if(y){if(n)for(o in U)if(i=c[o],i&&d(i,e))try{delete i[e]}catch(r){}if(A[e]&&!n)return;try{return g(A,e,n?t:P&&A[e]||t)}catch(r){}}for(o in U)i=c[o],!i||i[e]&&!n||g(i,e,t)}},getTypedArrayConstructor:F,isView:function(e){if(!l(e))return!1;var t=f(e);return"DataView"===t||d(U,t)||d(x,t)},isTypedArray:q,TypedArray:A,TypedArrayPrototype:L}},"7df8":function(e,t,n){"use strict";var o=Math.round;e.exports=function(e){var t=o(e);return t<0?0:t>255?255:255&t}},"7e41":function(e,t,n){"use strict";var o=n("bb80"),i=n("af9e"),r=n("ada5"),a=Object,s=o("".split);e.exports=i((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"===r(e)?s(e,""):a(e)}:a},"7e63":function(e,t,n){"use strict";n.r(t);var o=n("2388"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},"7e87":function(e,t,n){"use strict";var o=n("bb80"),i=Error,r=o("".replace),a=function(e){return String(new i("zxcasd").stack)}(),s=/\n\s*at [^:]*:[^\n]*/,c=s.test(a);e.exports=function(e,t){if(c&&"string"==typeof e&&!i.prepareStackTrace)while(t--)e=r(e,s,"");return e}},"7e91":function(e,t,n){"use strict";var o=n("71e9"),i=n("e7e3"),r=n("60bc");e.exports=function(e,t,n){var a,s;i(e);try{if(a=r(e,"return"),!a){if("throw"===t)throw n;return n}a=o(a,e)}catch(c){s=!0,a=c}if("throw"===t)throw n;if(s)throw a;return i(a),n}},"7eb8":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={formItem:{label:"",prop:"",borderBottom:"",labelPosition:"",labelWidth:"",rightIcon:"",leftIcon:"",required:!1,leftIconStyle:""}}},"7ece":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={indexAnchor:{text:"",color:"#606266",size:14,bgColor:"#dedede",height:32}}},"7edc":function(e,t,n){"use strict";n("5c47");var o=n("71e9"),i=n("81a9"),r=n("9ad8"),a=n("af9e"),s=n("8c08"),c=n("6aca"),u=s("species"),l=RegExp.prototype;e.exports=function(e,t,n,d){var f=s(e),p=!a((function(){var t={};return t[f]=function(){return 7},7!==""[e](t)})),h=p&&!a((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[u]=function(){return n},n.flags="",n[f]=/./[f]),n.exec=function(){return t=!0,null},n[f](""),!t}));if(!p||!h||n){var g=/./[f],_=t(f,""[e],(function(e,t,n,i,a){var s=t.exec;return s===r||s===l.exec?p&&!a?{done:!0,value:o(g,t,n,i)}:{done:!0,value:o(e,n,t,i)}:{done:!1}}));i(String.prototype,e,_[0]),i(l,f,_[1])}d&&c(l[f],"sham",!0)}},"7edd":function(e,t,n){"use strict";var o=n("85c1"),i=n("af9e"),r=n("bb80"),a=n("7ddb"),s=n("6bfa"),c=n("8c08"),u=c("iterator"),l=o.Uint8Array,d=r(s.values),f=r(s.keys),p=r(s.entries),h=a.aTypedArray,g=a.exportTypedArrayMethod,_=l&&l.prototype,v=!i((function(){_[u].call([1])})),m=!!_&&_.values&&_[u]===_.values&&"values"===_.values.name,y=function(){return d(h(this))};g("entries",(function(){return p(h(this))}),v),g("keys",(function(){return f(h(this))}),v),g("values",y,v||!m,{name:"values"}),g(u,y,v||!m,{name:"values"})},"7ee5":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("fcf3"));function r(e){return("undefined"===typeof navigator||(0,i.default)(navigator))&&"Google Inc."===navigator.vendor&&e>10&&(e=2*Math.round(e/2)),e}var a={name:"Image",props:{src:{type:String,default:""},mode:{type:String,default:"scaleToFill"},lazyLoad:{type:[Boolean,String],default:!1},draggable:{type:Boolean,default:!1}},data:function(){return{originalWidth:0,originalHeight:0,originalStyle:{width:"",height:""},contentPath:""}},computed:{ratio:function(){return this.originalWidth&&this.originalHeight?this.originalWidth/this.originalHeight:0},style:function(){var e="auto",t="";switch(this.mode){case"aspectFit":e="contain",t="center center";break;case"aspectFill":e="cover",t="center center";break;case"widthFix":case"heightFix":e="100% 100%";break;case"top":t="center top";break;case"bottom":t="center bottom";break;case"center":t="center center";break;case"left":t="left center";break;case"right":t="right center";break;case"top left":t="left top";break;case"top right":t="right top";break;case"bottom left":t="left bottom";break;case"bottom right":t="right bottom";break;default:e="100% 100%",t="0% 0%";break}return{"background-image":this.contentPath?'url("'.concat(this.contentPath,'")'):"none","background-position":t,"background-size":e,"background-repeat":"no-repeat"}}},watch:{src:function(e,t){this._loadImage()},mode:function(e,t){"widthFix"!==t&&"heightFix"!==t||this._resetSize(),"widthFix"!==e&&"heightFix"!==e||this._fixSize()},contentPath:function(e){!e&&this.__img&&(this.__img.remove(),delete this.__img)}},mounted:function(){this.originalStyle.width=this.$el.style.width||"",this.originalStyle.height=this.$el.style.height||"",this._loadImage()},beforeDestroy:function(){this._clearImage()},methods:{_fixSize:function(){if(this.ratio){var e=this.$el;if("widthFix"===this.mode){var t=e.offsetWidth;t&&(e.style.height=r(t/this.ratio)+"px")}else if("heightFix"===this.mode){var n=e.offsetHeight;n&&(e.style.width=r(n*this.ratio)+"px")}}window.dispatchEvent(new CustomEvent("updateview"))},_resetSize:function(){this.$el.style.width=this.originalStyle.width,this.$el.style.height=this.originalStyle.height},_resetData:function(){this.originalWidth=0,this.originalHeight=0,this.contentPath=""},_loadImage:function(){var e=this,t=this.$getRealPath(this.src);if(t){var n=this._img=this._img||new Image;n.onload=function(o){e._img=null;var i=e.originalWidth=n.width,r=e.originalHeight=n.height;e._fixSize(),e.contentPath=t,n.draggable=e.draggable,e.__img&&e.__img.remove(),e.__img=n,e.$el.appendChild(n),e.$trigger("load",o,{width:i,height:r})},n.onerror=function(t){e._img=null,e._resetData(),e.$trigger("error",t,{errMsg:"GET ".concat(e.src," 404 (Not Found)")})},n.src=t}else this._clearImage(),this._resetData()},_clearImage:function(){var e=this._img;e&&(e.onload=null,e.onerror=null,this._img=null)}}};t.default=a},"7f28":function(e,t,n){"use strict";var o=TypeError;e.exports=function(e,t){if(e<t)throw new o("Not enough arguments");return e}},"7f48":function(e,t,n){"use strict";var o=n("8bdb"),i=n("af9e"),r=n("8449").f,a=i((function(){return!Object.getOwnPropertyNames(1)}));o({target:"Object",stat:!0,forced:a},{getOwnPropertyNames:r})},"7f5d":function(e,t,n){var o,i,r,a=n("bdbb").default;n("aa9c"),n("5ef2"),function(s,c){"object"===a(t)?e.exports=t=c(n("5e74")):(i=[n("5e74")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))}(0,(function(e){return function(){var t=e,n=t.lib,o=n.WordArray,i=t.enc;i.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,o=this._map;e.clamp();for(var i=[],r=0;r<n;r+=3)for(var a=t[r>>>2]>>>24-r%4*8&255,s=t[r+1>>>2]>>>24-(r+1)%4*8&255,c=t[r+2>>>2]>>>24-(r+2)%4*8&255,u=a<<16|s<<8|c,l=0;l<4&&r+.75*l<n;l++)i.push(o.charAt(u>>>6*(3-l)&63));var d=o.charAt(64);if(d)while(i.length%4)i.push(d);return i.join("")},parse:function(e){var t=e.length,n=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var r=0;r<n.length;r++)i[n.charCodeAt(r)]=r}var a=n.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}return function(e,t,n){for(var i=[],r=0,a=0;a<t;a++)if(a%4){var s=n[e.charCodeAt(a-1)]<<a%4*2,c=n[e.charCodeAt(a)]>>>6-a%4*2,u=s|c;i[r>>>2]|=u<<24-r%4*8,r++}return o.create(i,r)}(e,t,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64}))},"7f5f":function(e,t,n){"use strict";var o=n("e7e3"),i=n("7e91");e.exports=function(e,t,n,r){try{return r?t(o(n)[0],n[1]):t(n)}catch(a){i(e,"throw",a)}}},"80a2":function(e,t,n){var o,i,r,a=n("bdbb").default;n("aa9c"),n("f7a5"),function(s,c){"object"===a(t)?e.exports=t=c(n("5e74")):(i=[n("5e74")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))}(0,(function(e){return function(t){var n=e,o=n.lib,i=o.Base,r=o.WordArray,a=n.x64={};a.Word=i.extend({init:function(e,t){this.high=e,this.low=t}}),a.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],o=0;o<t;o++){var i=e[o];n.push(i.high),n.push(i.low)}return r.create(n,this.sigBytes)},clone:function(){for(var e=i.clone.call(this),t=e.words=this.words.slice(0),n=t.length,o=0;o<n;o++)t[o]=t[o].clone();return e}})}(),e}))},"80b1":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n("7a76"),n("c9b5")},"80bb":function(e,t,n){"use strict";var o=n("00c2"),i=n("62f7"),r=i.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return o(e,r)}},"80e3":function(e,t,n){"use strict";var o=n("8bdb"),i=n("85c1"),r=n("efa5"),a=n("437f"),s=r["ArrayBuffer"],c=i["ArrayBuffer"];o({global:!0,constructor:!0,forced:c!==s},{ArrayBuffer:s}),a("ArrayBuffer")},"81a7":function(e,t,n){"use strict";var o=n("8c08"),i=n("799d"),r=o("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[r]===e)}},"81a9":function(e,t,n){"use strict";var o=n("474f"),i=n("d6b1"),r=n("d63a"),a=n("c9b7");e.exports=function(e,t,n,s){s||(s={});var c=s.enumerable,u=void 0!==s.name?s.name:t;if(o(n)&&r(n,u,s),s.global)c?e[t]=n:a(t,n);else{try{s.unsafe?e[t]&&(c=!0):delete e[t]}catch(l){}c?e[t]=n:i.f(e,t,{value:n,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return e}},"81c4":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.canIUse=void 0;var o=[{name:"schema",type:String,required:!0}];t.canIUse=o},"81f8":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={readMore:{showHeight:400,toggle:!1,closeText:"展开阅读全文",openText:"收起",color:"#2979ff",fontSize:14,textIndent:"2em",name:""}}},"825c":function(e,t,n){"use strict";var o=n("6a50");o("Float64",(function(e){return function(t,n,o){return e(this,t,n,o)}}))},"828b":function(e,t,n){"use strict";function o(e,t,n,o,i,r,a,s,c,u){var l,d="function"===typeof e?e.options:e;if(c){d.components||(d.components={});var f=Object.prototype.hasOwnProperty;for(var p in c)f.call(c,p)&&!f.call(d.components,p)&&(d.components[p]=c[p])}if(u&&("function"===typeof u.beforeCreate&&(u.beforeCreate=[u.beforeCreate]),(u.beforeCreate||(u.beforeCreate=[])).unshift((function(){this[u.__module]=this})),(d.mixins||(d.mixins=[])).push(u)),t&&(d.render=t,d.staticRenderFns=n,d._compiled=!0),o&&(d.functional=!0),r&&(d._scopeId="data-v-"+r),a?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},d._ssrRegister=l):i&&(l=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),l)if(d.functional){d._injectStyles=l;var h=d.render;d.render=function(e,t){return l.call(t),h(e,t)}}else{var g=d.beforeCreate;d.beforeCreate=g?[].concat(g,l):[l]}return{exports:e,options:d}}n.d(t,"a",(function(){return o}))},"82cf":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("12e8"),i=n("81c4"),r=n("dd40"),a=n("5306"),s=n("8d31"),c=n("cb0e"),u=n("2b9e"),l=n("fd2f"),d=n("e8f1"),f=n("8ced"),p=n("5075"),h=n("1565"),g=n("d622"),_=n("fa7a"),v=n("b382"),m=n("65c8"),y=n("938a"),M=n("400b"),I=n("860e"),C=n("c91c"),b=n("841a"),T={$emit:o.$emit,$off:o.$off,$on:o.$on,canIUse:i.canIUse,chooseFile:r.chooseFile,chooseImage:a.chooseImage,chooseVideo:s.chooseVideo,closeSocket:c.closeSocket,connectSocket:c.connectSocket,createVideoContext:u.createVideoContext,downloadFile:l.downloadFile,getImageInfo:d.getImageInfo,getStorageSync:f.getStorageSync,makePhoneCall:p.makePhoneCall,navigateBack:h.navigateBack,navigateTo:h.navigateTo,pageScrollTo:g.pageScrollTo,previewImage:_.previewImage,reLaunch:h.reLaunch,redirectTo:h.redirectTo,removeStorageSync:f.removeStorageSync,request:v.request,sendSocketMessage:c.sendSocketMessage,setClipboardData:m.setClipboardData,setNavigationBarTitle:y.setNavigationBarTitle,setStorageSync:f.setStorageSync,setTabBarItem:M.setTabBarItem,showModal:I.showModal,showToast:I.showToast,switchTab:h.switchTab,uploadFile:C.uploadFile,upx2px:b.upx2px};t.default=T},"82eb":function(e,t,n){var o,i,r,a=n("bdbb").default;(function(s,c,u){"object"===a(t)?e.exports=t=c(n("5e74"),n("80a2")):(i=[n("5e74"),n("80a2")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))})(0,(function(e){return function(){var t=e,n=t.lib,o=n.Hasher,i=t.x64,r=i.Word,a=i.WordArray,s=t.algo;function c(){return r.create.apply(r,arguments)}var u=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],l=[];(function(){for(var e=0;e<80;e++)l[e]=c()})();var d=s.SHA512=o.extend({_doReset:function(){this._hash=new a.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],i=n[1],r=n[2],a=n[3],s=n[4],c=n[5],d=n[6],f=n[7],p=o.high,h=o.low,g=i.high,_=i.low,v=r.high,m=r.low,y=a.high,M=a.low,I=s.high,C=s.low,b=c.high,T=c.low,S=d.high,E=d.low,k=f.high,D=f.low,A=p,L=h,O=g,R=_,w=v,N=m,P=y,G=M,U=I,x=C,F=b,q=T,B=S,V=E,H=k,j=D,K=0;K<80;K++){var W,Y,z=l[K];if(K<16)Y=z.high=0|e[t+2*K],W=z.low=0|e[t+2*K+1];else{var $=l[K-15],X=$.high,J=$.low,Q=(X>>>1|J<<31)^(X>>>8|J<<24)^X>>>7,Z=(J>>>1|X<<31)^(J>>>8|X<<24)^(J>>>7|X<<25),ee=l[K-2],te=ee.high,ne=ee.low,oe=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,ie=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),re=l[K-7],ae=re.high,se=re.low,ce=l[K-16],ue=ce.high,le=ce.low;W=Z+se,Y=Q+ae+(W>>>0<Z>>>0?1:0),W+=ie,Y=Y+oe+(W>>>0<ie>>>0?1:0),W+=le,Y=Y+ue+(W>>>0<le>>>0?1:0),z.high=Y,z.low=W}var de=U&F^~U&B,fe=x&q^~x&V,pe=A&O^A&w^O&w,he=L&R^L&N^R&N,ge=(A>>>28|L<<4)^(A<<30|L>>>2)^(A<<25|L>>>7),_e=(L>>>28|A<<4)^(L<<30|A>>>2)^(L<<25|A>>>7),ve=(U>>>14|x<<18)^(U>>>18|x<<14)^(U<<23|x>>>9),me=(x>>>14|U<<18)^(x>>>18|U<<14)^(x<<23|U>>>9),ye=u[K],Me=ye.high,Ie=ye.low,Ce=j+me,be=H+ve+(Ce>>>0<j>>>0?1:0),Te=(Ce=Ce+fe,be=be+de+(Ce>>>0<fe>>>0?1:0),Ce=Ce+Ie,be=be+Me+(Ce>>>0<Ie>>>0?1:0),Ce=Ce+W,be=be+Y+(Ce>>>0<W>>>0?1:0),_e+he),Se=ge+pe+(Te>>>0<_e>>>0?1:0);H=B,j=V,B=F,V=q,F=U,q=x,x=G+Ce|0,U=P+be+(x>>>0<G>>>0?1:0)|0,P=w,G=N,w=O,N=R,O=A,R=L,L=Ce+Te|0,A=be+Se+(L>>>0<Ce>>>0?1:0)|0}h=o.low=h+L,o.high=p+A+(h>>>0<L>>>0?1:0),_=i.low=_+R,i.high=g+O+(_>>>0<R>>>0?1:0),m=r.low=m+N,r.high=v+w+(m>>>0<N>>>0?1:0),M=a.low=M+G,a.high=y+P+(M>>>0<G>>>0?1:0),C=s.low=C+x,s.high=I+U+(C>>>0<x>>>0?1:0),T=c.low=T+q,c.high=b+F+(T>>>0<q>>>0?1:0),E=d.low=E+V,d.high=S+B+(E>>>0<V>>>0?1:0),D=f.low=D+j,f.high=k+H+(D>>>0<j>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;t[o>>>5]|=128<<24-o%32,t[30+(o+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(o+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process();var i=this._hash.toX32();return i},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});t.SHA512=o._createHelper(d),t.HmacSHA512=o._createHmacHelper(d)}(),e.SHA512}))},8328:function(e,t,n){"use strict";var o=n("508d"),i=n("d7b8"),r=n("f0b5"),a=n("f439"),s=n("a5c6"),c=n("7c26"),u=n("59f8");o({target:"Promise",stat:!0,forced:u},{race:function(e){var t=this,n=a.f(t),o=n.reject,u=s((function(){var a=r(t.resolve);c(e,(function(e){i(a,t,e).then(n.resolve,o)}))}));return u.error&&o(u.value),n.promise}})},8345:function(e,t,n){"use strict";var o=n("508d"),i=n("3a4b"),r=n("83b3").CONSTRUCTOR,a=n("3c5d"),s=n("c86b"),c=n("fdca"),u=n("27cc"),l=a&&a.prototype;if(o({target:"Promise",proto:!0,forced:r,real:!0},{catch:function(e){return this.then(void 0,e)}}),!i&&c(a)){var d=s("Promise").prototype["catch"];l["catch"]!==d&&u(l,"catch",d,{unsafe:!0})}},8394:function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,n("0ee4"))},"839a":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("e062"),n("64aa");var o={calendar:{title:"日期选择",showTitle:!0,showSubtitle:!0,mode:"single",startText:"开始",endText:"结束",customList:function(){return[]},color:"#3c9cff",minDate:0,maxDate:0,defaultDate:null,maxCount:Number.MAX_SAFE_INTEGER,rowHeight:56,formatter:null,showLunar:!1,showMark:!0,confirmText:"确定",confirmDisabledText:"确定",show:!1,closeOnClickOverlay:!1,readonly:!1,showConfirm:!0,maxRange:Number.MAX_SAFE_INTEGER,rangePrompt:"",showRangePrompt:!0,allowSameDay:!1,round:0,monthNum:3}};t.default=o},"83b3":function(e,t,n){var o=n("8394"),i=n("3c5d"),r=n("fdca"),a=n("1535"),s=n("97cf"),c=n("29d5"),u=n("a3f3"),l=n("9b8fb"),d=n("3a4b"),f=n("df7b"),p=i&&i.prototype,h=c("species"),g=!1,_=r(o.PromiseRejectionEvent),v=a("Promise",(function(){var e=s(i),t=e!==String(i);if(!t&&66===f)return!0;if(d&&(!p["catch"]||!p["finally"]))return!0;if(!f||f<51||!/native code/.test(e)){var n=new i((function(e){e(1)})),o=function(e){e((function(){}),(function(){}))},r=n.constructor={};if(r[h]=o,g=n.then((function(){}))instanceof o,!g)return!0}return!t&&(u||l)&&!_}));e.exports={CONSTRUCTOR:v,REJECTION_EVENT:_,SUBCLASSING:g}},"83d5":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={swipeActionItem:{show:!1,name:"",disabled:!1,threshold:20,autoClose:!0,options:[],duration:300}}},"83ed":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.makePhoneCall=function(e){var t=e.phoneNumber;return window.location.href="tel:".concat(t),{errMsg:"makePhoneCall:ok"}}},"83fa":function(e,t,n){"use strict";var o=n("bb80");e.exports=o(1..valueOf)},"841a":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.upx2px=void 0,n("64aa");var o=[{name:"upx",type:[Number,String],required:!0}];t.upx2px=o},8449:function(e,t,n){"use strict";var o=n("ada5"),i=n("f660"),r=n("80bb").f,a=n("37ad"),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"Window"===o(e)?function(e){try{return r(e)}catch(t){return a(s)}}(e):r(i(e))}},"844d":function(e,t,n){"use strict";var o=n("f259");o("iterator")},8466:function(e,t,n){"use strict";var o=n("af9e"),i=n("474f"),r=/#|\.prototype\./,a=function(e,t){var n=c[s(e)];return n===l||n!==u&&(i(t)?o(t):!!t)},s=a.normalize=function(e){return String(e).replace(r,".").toLowerCase()},c=a.data={},u=a.NATIVE="N",l=a.POLYFILL="P";e.exports=a},8486:function(e,t,n){var o,i,r,a=n("bdbb").default;(function(s,c,u){"object"===a(t)?e.exports=t=c(n("5e74"),n("80a2"),n("a233"),n("ff1d"),n("7f5d"),n("65a1"),n("4f3e"),n("4393"),n("c209"),n("a72f"),n("82eb"),n("e275"),n("527f"),n("9ce6"),n("3fdf"),n("2d93"),n("734e"),n("f794"),n("2772"),n("1854"),n("0f31"),n("73d4"),n("667b"),n("a321"),n("65f2"),n("70dd"),n("f79e"),n("c563"),n("5909"),n("e509"),n("345a"),n("85e2"),n("7003"),n("15ea"),n("4a90")):(i=[n("5e74"),n("80a2"),n("a233"),n("ff1d"),n("7f5d"),n("65a1"),n("4f3e"),n("4393"),n("c209"),n("a72f"),n("82eb"),n("e275"),n("527f"),n("9ce6"),n("3fdf"),n("2d93"),n("734e"),n("f794"),n("2772"),n("1854"),n("0f31"),n("73d4"),n("667b"),n("a321"),n("65f2"),n("70dd"),n("f79e"),n("c563"),n("5909"),n("e509"),n("345a"),n("85e2"),n("7003"),n("15ea"),n("4a90")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))})(0,(function(e){return e}))},"849d":function(e,t,n){var o,i=n("d191"),r=n("5628"),a=n("da1d"),s=n("bd8a"),c=n("3671"),u=n("3b78"),l=n("3872"),d=l("IE_PROTO"),f=function(){},p=function(e){return"<script>"+e+"<\/script>"},h=function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t},g=function(){try{o=new ActiveXObject("htmlfile")}catch(t){}g="undefined"!=typeof document?document.domain&&o?h(o):function(){var e,t=u("iframe");return t.style.display="none",c.appendChild(t),t.src=String("javascript:"),e=t.contentWindow.document,e.open(),e.write(p("document.F=Object")),e.close(),e.F}():h(o);var e=a.length;while(e--)delete g["prototype"][a[e]];return g()};s[d]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(f["prototype"]=i(e),n=new f,f["prototype"]=null,n[d]=e):n=g(),void 0===t?n:r.f(n,t)}},"84a1":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("64aa");var o={name:"PageRefresh",props:{color:{type:String,default:"#2BD009"},offset:{type:Number,default:0}}};t.default=o},"84d6":function(e,t,n){"use strict";var o=n("1099"),i=n("e34c"),r=n("1fc1");e.exports=function(e){var t=o(this),n=r(t),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,u=void 0===c?n:i(c,n);while(u>s)t[s++]=e;return t}},8557:function(e,t,n){"use strict";var o=n("7ddb"),i=n("4d16").some,r=o.aTypedArray,a=o.exportTypedArrayMethod;a("some",(function(e){return i(r(this),e,arguments.length>1?arguments[1]:void 0)}))},8566:function(e,t,n){"use strict";n.r(t);var o=n("2bef"),i=n("ee19");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a=n("828b"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},8598:function(e,t,n){"use strict";var o=n("bb80"),i=n("7992"),r=n("1c06"),a=n("338c"),s=n("37ad"),c=n("8f26"),u=Function,l=o([].concat),d=o([].join),f={},p=function(e,t,n){if(!a(f,t)){for(var o=[],i=0;i<t;i++)o[i]="a["+i+"]";f[t]=u("C,a","return new C("+d(o,",")+")")}return f[t](e,n)};e.exports=c?u.bind:function(e){var t=i(this),n=t.prototype,o=s(arguments,1),a=function(){var n=l(o,s(arguments));return this instanceof a?p(t,n.length,n):t.apply(e,n)};return r(n)&&(a.prototype=n),a}},"85a4":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={swipeAction:{autoClose:!0}}},"85c1":function(e,t,n){"use strict";(function(t){var n=function(e){return e&&e.Math===Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||n("object"==typeof this&&this)||function(){return this}()||Function("return this")()}).call(this,n("0ee4"))},"85e2":function(e,t,n){var o,i,r,a=n("bdbb").default;n("bf0f"),function(s,c,u){"object"===a(t)?e.exports=t=c(n("5e74"),n("7f5d"),n("4f3e"),n("734e"),n("f794")):(i=[n("5e74"),n("7f5d"),n("4f3e"),n("734e"),n("f794")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))}(0,(function(e){return function(){var t=e,n=t.lib,o=n.StreamCipher,i=t.algo,r=i.RC4=o.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,o=this._S=[],i=0;i<256;i++)o[i]=i;i=0;for(var r=0;i<256;i++){var a=i%n,s=t[a>>>2]>>>24-a%4*8&255;r=(r+o[i]+s)%256;var c=o[i];o[i]=o[r],o[r]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=a.call(this)},keySize:8,ivSize:0});function a(){for(var e=this._S,t=this._i,n=this._j,o=0,i=0;i<4;i++){t=(t+1)%256,n=(n+e[t])%256;var r=e[t];e[t]=e[n],e[n]=r,o|=e[(e[t]+e[n])%256]<<24-8*i}return this._i=t,this._j=n,o}t.RC4=o._createHelper(r);var s=i.RC4Drop=r.extend({cfg:r.cfg.extend({drop:192}),_doReset:function(){r._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)a.call(this)}});t.RC4Drop=o._createHelper(s)}(),e.RC4}))},"85e5":function(e,t,n){var o=n("d10a"),i=o({}.toString),r=o("".slice);e.exports=function(e){return r(i(e),8,-1)}},"85f7":function(e,t,n){"use strict";var o=n("ab4a"),i=n("d6b1"),r=n("0b5a");e.exports=function(e,t,n){o?i.f(e,t,r(0,n)):e[t]=n}},"860e":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.showToast=t.showModal=t.showLoading=t.showActionSheet=void 0,n("5ef2"),n("64aa");var i=n("1909"),r=o(n("ccb8")),a={title:{type:String,default:""},content:{type:String,default:""},showCancel:{type:Boolean,default:!0},cancelText:{type:String,default:function(){return(0,i.t)("uni.showModal.cancel")}},cancelColor:{type:String,default:"#000"},confirmText:{type:String,default:function(){return(0,i.t)("uni.showModal.confirm")}},confirmColor:{type:String,default:"#007aff"},visible:{type:Boolean,default:!0}};t.showModal=a;var s={title:{type:String,default:""},icon:{default:"success",validator:function(e,t){-1===["success","loading","error","none"].indexOf(e)&&(t.icon="success")}},image:{type:String,default:"",validator:function(e,t){e&&(t.image=(0,r.default)(e))}},duration:{type:Number,default:1500},mask:{type:Boolean,default:!1},visible:{type:Boolean,default:!0}};t.showToast=s;var c={title:{type:String,default:""},icon:{type:String,default:"loading"},duration:{type:Number,default:1e8},mask:{type:Boolean,default:!1},visible:{type:Boolean,default:!0}};t.showLoading=c;var u={itemList:{type:Array,required:!0,validator:function(e,t){if(!e.length)return"parameter.itemList should have at least 1 item"}},itemColor:{type:String,default:"#000"},visible:{type:Boolean,default:!0},popover:{type:Object}};t.showActionSheet=u},"862c":function(e,t,n){"use strict";var o=n("1eb8"),i=TypeError;e.exports=function(e){if(o(e))throw new i("Can't call method on "+e);return e}},"868d":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){Object.keys(i.default).forEach((function(t){e(t,i.default[t])})),e("pageScrollTo",r.pageScrollTo),e("loadFontFace",a.loadFontFace),(0,s.default)(e)},n("bf0f"),n("2797"),n("dc8a");var i=o(n("d969")),r=n("6545"),a=n("225c"),s=o(n("05c5"))},"86ca":function(e,t,n){"use strict";var o=n("e78b"),i=Math.abs;e.exports=function(e,t,n,r){var a=+e,s=i(a),c=o(a);if(s<r)return c*function(e){return e+4503599627370496-4503599627370496}(s/r/t)*r*t;var u=(1+t/2220446049250313e-31)*s,l=u-(u-s);return l>n||l!==l?c*(1/0):c*l}},"871d":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={tabs:{duration:300,list:function(){return[]},lineColor:"#3c9cff",activeStyle:function(){return{color:"#303133"}},inactiveStyle:function(){return{color:"#606266"}},lineWidth:20,lineHeight:3,lineBgSize:"cover",itemStyle:function(){return{height:"44px"}},scrollable:!0,current:0,keyName:"name"}}},"872c":function(e,t,n){"use strict";(function(e,o){n("6a54");var i=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("c223");var r=n("1ffa"),a=n("60bf"),s=i(n("ebcd")),c=i(n("bce5")),u=n("1696");var l={name:"App",components:s.default,mixins:c.default,props:{keepAliveInclude:{type:Array,default:function(){return[]}}},data:function(){return{transitionName:"fade",hideTabBar:!1,sysComponents:this.$sysComponents,showLayout:!1,showMaxWidth:!1,tabBarMediaQuery:!1}},computed:{key:function(){return this.$route.meta.name+"-"+this.$route.params.__id__+"-"+(__uniConfig.reLaunch||1)},tabBarOptions:function(){return u.tabBar},hasTabBar:function(){return u.tabBar.list&&u.tabBar.list.length},showTabBar:function(){return!this.hideTabBar&&(this.$route.meta.isTabBar||this.tabBarMediaQuery)}},watch:{$route:function(t,n){e.emit("onHidePopup")},hideTabBar:function(e,t){if(uni.canIUse("css.var")){var n=e?0:a.TABBAR_HEIGHT,i=uni.canIUse("css.env")?"env":uni.canIUse("css.constant")?"constant":"",r=n&&i?"calc(".concat(n,"px + ").concat(i,"(safe-area-inset-bottom))"):"".concat(n,"px");document.documentElement.style.setProperty("--window-bottom",r),o.debug("uni.".concat(r?"showTabBar":"hideTabBar","：--window-bottom=").concat(r))}window.dispatchEvent(new CustomEvent("resize"))}},created:function(){uni.canIUse("css.var")&&document.documentElement.style.setProperty("--status-bar-height","0px"),this.initMediaQuery()},mounted:function(){window.addEventListener("message",(function(t){(0,r.isPlainObject)(t.data)&&"WEB_INVOKE_APPSERVICE"===t.data.type&&e.emit("onWebInvokeAppService",t.data.data,t.data.pageId)})),document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState?e.emit("onAppEnterForeground",{}):e.emit("onAppEnterBackground")})),function(){var t=null;try{t=window.matchMedia("(prefers-color-scheme: dark)")}catch(o){}if(t){var n=function(t){e.emit("api."+a.ON_THEME_CHANGE,{theme:t.matches?"dark":"light"})};t.addEventListener?t.addEventListener("change",n):t.addListener(n)}}()},methods:{onLayout:function(e){this.showLayout=e},onMaxWidth:function(e){this.showMaxWidth=e},initMediaQuery:function(){var e=this;if(window.matchMedia&&u.tabBar.matchMedia&&(0,r.hasOwn)(u.tabBar.matchMedia,"minWidth")){var t=window.matchMedia("(min-width: "+u.tabBar.matchMedia.minWidth+"px)");t.addListener((function(t){e.tabBarMediaQuery=t.matches})),this.tabBarMediaQuery=t.matches}}}};t.default=l}).call(this,n("ef66"),n("ba7c")["default"])},8733:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={radio:{name:"",shape:"",disabled:"",labelDisabled:"",activeColor:"",inactiveColor:"",iconSize:"",labelSize:"",label:"",labelColor:"",size:"",iconColor:"",placement:""}}},8761:function(e,t,n){"use strict";n.r(t);var o=n("8d54"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},8811:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={swiperIndicator:{length:0,current:0,indicatorActiveColor:"",indicatorInactiveColor:"",indicatorMode:"line"}}},"884b":function(e,t,n){"use strict";var o=n("338c"),i=n("81a9"),r=n("7054"),a=n("8c08"),s=a("toPrimitive"),c=Date.prototype;o(c,s)||i(c,s,r)},8854:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.plusReady=function(e){if("function"!==typeof e)return;if(window.plus)return e();document.addEventListener("plusready",e)}},"88c8":function(e,t,n){"use strict";n.r(t);var o=n("5359"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},8935:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={transition:{show:!1,mode:"fade",duration:"300",timingFunction:"ease-out"}}},8944:function(e,t,n){"use strict";n("6a54");var o=n("3639").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!t)return e;var n;if(i.isURLSearchParams(t))n=t.toString();else{var o=[];i.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(i.isArray(e)?t="".concat(t,"[]"):e=[e],i.forEach(e,(function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),o.push("".concat(r(t),"=").concat(r(e)))})))})),n=o.join("&")}if(n){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e},n("5c47"),n("a1c1"),n("c9b5"),n("bf0f"),n("ab80"),n("d4b5"),n("aa9c"),n("c223"),n("5ef2"),n("f7a5");var i=o(n("78ab"));function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}},8945:function(e,t,n){"use strict";var o=n("ab4a"),i=n("338c"),r=Function.prototype,a=o&&Object.getOwnPropertyDescriptor,s=i(r,"name"),c=s&&"something"===function(){}.name,u=s&&(!o||o&&a(r,"name").configurable);e.exports={EXISTS:s,PROPER:c,CONFIGURABLE:u}},"8a29":function(e,t,n){var o=n("77cd"),i=n("fdca"),r=n("b510"),a=n("3872"),s=n("66ee"),c=a("IE_PROTO"),u=Object,l=u.prototype;e.exports=s?u.getPrototypeOf:function(e){var t=r(e);if(o(t,c))return t[c];var n=t.constructor;return i(n)&&t instanceof n?n.prototype:t instanceof u?l:null}},"8a52":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e&&!(0,i.default)(t))return(0,r.default)(e,t);return t};var i=o(n("2e5e")),r=o(n("f856"))},"8a8d":function(e,t,n){"use strict";var o=n("8bdb"),i=n("8c4f");o({target:"Object",stat:!0},{setPrototypeOf:i})},"8ac9":function(e,t,n){"use strict";(function(e){n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,Object.defineProperty(t,"getApp",{enumerable:!0,get:function(){return s.getApp}}),Object.defineProperty(t,"getCurrentPages",{enumerable:!0,get:function(){return s.getCurrentPages}});var i=o(n("e623")),r=o(n("bdc2")),a=n("4c53"),s=n("71b7");(0,i.default)(e.on,{getApp:s.getApp,getCurrentPages:s.getCurrentPages}),(0,r.default)(e.subscribe,{getApp:s.getApp,getCurrentPages:s.getCurrentPages});var c=a.uni;t.default=c}).call(this,n("ef66"))},"8acb":function(e,t,n){"use strict";(function(e){n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.divide=h,t.enableBoundaryChecking=_,t.minus=p,t.plus=f,t.round=g,t.times=d;var i=o(n("9591"));n("e838"),n("64aa"),n("5c47"),n("dfcf"),n("c9b5"),n("bf0f"),n("ab80"),n("5ef2"),n("a1c1"),n("e062"),n("4259"),n("f7a5"),n("2797");var r=!0;function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return+parseFloat(Number(e).toPrecision(t))}function s(e){var t=e.toString().split(/[eE]/),n=(t[0].split(".")[1]||"").length-+(t[1]||0);return n>0?n:0}function c(e){if(-1===e.toString().indexOf("e"))return Number(e.toString().replace(".",""));var t=s(e);return t>0?a(Number(e)*Math.pow(10,t)):Number(e)}function u(t){r&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)&&e.warn("".concat(t," 超出了精度限制，结果可能不正确"))}function l(e,t){var n=(0,i.default)(e),o=n[0],r=n[1],a=n.slice(2),s=t(o,r);return a.forEach((function(e){s=t(s,e)})),s}function d(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>2)return l(t,d);var o=t[0],i=t[1],r=c(o),a=c(i),f=s(o)+s(i),p=r*a;return u(p),p/Math.pow(10,f)}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>2)return l(t,f);var o=t[0],i=t[1],r=Math.pow(10,Math.max(s(o),s(i)));return(d(o,r)+d(i,r))/r}function p(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>2)return l(t,p);var o=t[0],i=t[1],r=Math.pow(10,Math.max(s(o),s(i)));return(d(o,r)-d(i,r))/r}function h(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>2)return l(t,h);var o=t[0],i=t[1],r=c(o),f=c(i);return u(r),u(f),d(r/f,a(Math.pow(10,s(i)-s(o))))}function g(e,t){var n=Math.pow(10,t),o=h(Math.round(Math.abs(d(e,n))),n);return e<0&&0!==o&&(o=d(o,-1)),o}function _(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];r=e}var v={times:d,plus:f,minus:p,divide:h,round:g,enableBoundaryChecking:_};t.default=v}).call(this,n("ba7c")["default"])},"8ae2":function(e,t,n){"use strict";var o=n("bb80"),i=n("af9e"),r=n("474f"),a=n("8e02"),s=n("6aa6"),c=n("ca99"),u=function(){},l=s("Reflect","construct"),d=/^\s*(?:class|function)\b/,f=o(d.exec),p=!d.test(u),h=function(e){if(!r(e))return!1;try{return l(u,[],e),!0}catch(t){return!1}},g=function(e){if(!r(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!f(d,c(e))}catch(t){return!0}};g.sham=!0,e.exports=!l||i((function(){var e;return h(h.call)||!h(Object)||!h((function(){e=!0}))||e}))?g:h},"8b20":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("64aa"),n("5c47"),n("0506"),n("a1c1"),n("e838");var o={name:"CoverView",props:{scrollTop:{type:[String,Number],default:0}},watch:{scrollTop:function(e){this.setScrollTop(e)}},mounted:function(){this.setScrollTop(this.scrollTop)},methods:{setScrollTop:function(e){var t=this.$refs.content;"scroll"===getComputedStyle(t).overflowY&&(t.scrollTop=this._upx2pxNum(e))},_upx2pxNum:function(e){return/\d+[ur]px$/i.test(e)&&e.replace(/\d+[ur]px$/i,(function(e){return uni.upx2px(parseFloat(e))})),parseFloat(e)||0}}};t.default=o},"8b27":function(e,t,n){"use strict";var o=n("8945").PROPER,i=n("af9e"),r=n("f072");e.exports=function(e){return i((function(){return!!r[e]()||"​᠎"!=="​᠎"[e]()||o&&r[e].name!==e}))}},"8b3b":function(e,t,n){"use strict";var o=n("9b55");e.exports=function(e,t){return o[e]||(o[e]=t||{})}},"8bb0":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("bf0f"),n("c223");var i=o(n("8dac")),r=o(n("da58")),a=n("b38f"),s=n("31e3"),c=n("1d16");var u={name:"PickerViewColumn",mixins:[i.default,r.default],data:function(){return{scope:"picker-view-column-".concat(Date.now()),inited:!1,indicatorStyle:"",indicatorClass:"",indicatorHeight:34,maskStyle:"",maskClass:"",current:this.$parent.getItemValue(this),length:0}},computed:{height:function(){return this.$parent.height},maskSize:function(){return(this.height-this.indicatorHeight)/2}},watch:{indicatorHeight:function(e){this._setItemHeight(e),this.inited&&this.update()},current:function(e){this.$parent.setItemValue(this,e)},length:function(e){this.inited&&this.update(e)}},created:function(){var e=this.$parent;this.indicatorStyle=e.indicatorStyle,this.indicatorClass=e.indicatorClass,this.maskStyle=e.maskStyle,this.maskClass=e.maskClass,this.deltaY=0},mounted:function(){var e=this;this.touchtrack(this.$refs.main,"_handleTrack",!0),this.setCurrent(this.current),this.$nextTick((function(){e.init(),e.update()})),function(e){var t=0,n=0;e.addEventListener("touchstart",(function(e){var o=e.changedTouches[0];t=o.clientX,n=o.clientY})),e.addEventListener("touchend",(function(e){var o=e.changedTouches[0];if(Math.abs(o.clientX-t)<20&&Math.abs(o.clientY-n)<20){var i=new CustomEvent("click",{bubbles:!0,cancelable:!0,target:e.target,currentTarget:e.currentTarget});["screenX","screenY","clientX","clientY","pageX","pageY"].forEach((function(e){i[e]=o[e]})),e.target.dispatchEvent(i)}}))}(this.$el),(0,c.initScrollBounce)();var t=this;while(t){var n=t.$options._scopeId;n&&this.$refs.indicator.setAttribute(n,""),t=t.$parent}},methods:{_setItemHeight:function(e){var t=document.createElement("style");t.innerText=".uni-picker-view-content.".concat(this.scope,">*{height: ").concat(e,"px;overflow: hidden;}"),document.head.appendChild(t)},_handleTrack:function(e){if(this._scroller)switch(e.detail.state){case"start":this._handleTouchStart(e),(0,c.disableScrollBounce)({disable:!0});break;case"move":this._handleTouchMove(e),e.stopPropagation();break;case"end":case"cancel":this._handleTouchEnd(e),(0,c.disableScrollBounce)({disable:!1})}},_handleTap:function(e){var t=e.clientY;if(!this._scroller.isScrolling()){var n=this.$el.getBoundingClientRect(),o=t-n.top-this.height/2,i=this.indicatorHeight/2;if(!(Math.abs(o)<=i)){var r=Math.ceil((Math.abs(o)-i)/this.indicatorHeight),a=o<0?-r:r,s=Math.min(this.current+a,this.length-1);this.current=s=Math.max(s,0),this._scroller.scrollTo(s*this.indicatorHeight)}}},_handleWheel:function(e){var t=this.deltaY+e.deltaY;if(Math.abs(t)>10){this.deltaY=0;var n=Math.min(this.current+(t<0?-1:1),this.length-1);this.current=n=Math.max(n,0),this._scroller.scrollTo(n*this.indicatorHeight)}else this.deltaY=t;e.preventDefault()},setCurrent:function(e){e!==this.current&&(this.current=e,this.inited&&this.update())},init:function(){var e=this;this.initScroller(this.$refs.content,{enableY:!0,enableX:!1,enableSnap:!0,itemSize:this.indicatorHeight,friction:new a.Friction(1e-4),spring:new s.Spring(2,90,20),onSnap:function(t){isNaN(t)||t===e.current||(e.current=t)}}),this.inited=!0},update:function(){var e=this;this.$nextTick((function(){var t=Math.min(e.current,e.length-1);t=Math.max(t,0),e._scroller.update(t*e.indicatorHeight,void 0,e.indicatorHeight)}))},_resize:function(e){var t=e.height;this.indicatorHeight=t}},render:function(e){return this.length=this.$slots.default&&this.$slots.default.length||0,e("uni-picker-view-column",{on:{on:this.$listeners}},[e("div",{ref:"main",staticClass:"uni-picker-view-group",on:{wheel:this._handleWheel,click:this._handleTap}},[e("div",{ref:"mask",staticClass:"uni-picker-view-mask",class:this.maskClass,style:"background-size: 100% ".concat(this.maskSize,"px;").concat(this.maskStyle)}),e("div",{ref:"indicator",staticClass:"uni-picker-view-indicator",class:this.indicatorClass,style:this.indicatorStyle},[e("v-uni-resize-sensor",{attrs:{initial:!0},on:{resize:this._resize}})]),e("div",{ref:"content",staticClass:"uni-picker-view-content",class:this.scope,style:"padding: ".concat(this.maskSize,"px 0;")},[this.$slots.default])])])}};t.default=u},"8bdb":function(e,t,n){"use strict";var o=n("85c1"),i=n("1ded").f,r=n("6aca"),a=n("81a9"),s=n("c9b7"),c=n("3d8a"),u=n("8466");e.exports=function(e,t){var n,l,d,f,p,h,g=e.target,_=e.global,v=e.stat;if(l=_?o:v?o[g]||s(g,{}):o[g]&&o[g].prototype,l)for(d in t){if(p=t[d],e.dontCallGetSet?(h=i(l,d),f=h&&h.value):f=l[d],n=u(_?d:g+(v?".":"#")+d,e.forced),!n&&void 0!==f){if(typeof p==typeof f)continue;c(p,f)}(e.sham||f&&f.sham)&&r(p,"sham",!0),a(l,d,p,e)}}},"8c08":function(e,t,n){"use strict";var o=n("85c1"),i=n("8b3b"),r=n("338c"),a=n("d7b4"),s=n("af71"),c=n("4f04"),u=o.Symbol,l=i("wks"),d=c?u["for"]||u:u&&u.withoutSetter||a;e.exports=function(e){return r(l,e)||(l[e]=s&&r(u,e)?u[e]:d("Symbol."+e)),l[e]}},"8c18":function(e,t,n){"use strict";var o=n("7ddb"),i=n("9a51").right,r=o.aTypedArray,a=o.exportTypedArrayMethod;a("reduceRight",(function(e){var t=arguments.length;return i(r(this),e,t,t>1?arguments[1]:void 0)}))},"8c4f":function(e,t,n){"use strict";var o=n("960c"),i=n("1c06"),r=n("862c"),a=n("a048");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=o(Object.prototype,"__proto__","set"),e(n,[]),t=n instanceof Array}catch(s){}return function(n,o){return r(n),a(o),i(n)?(t?e(n,o):n.__proto__=o,n):n}}():void 0)},"8cb1":function(e,t,n){"use strict";var o=n("6aca"),i=n("7e87"),r=n("417a"),a=Error.captureStackTrace;e.exports=function(e,t,n,s){r&&(a?a(e,t):o(e,"stack",i(n,s)))}},"8cca":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("uni-cover-image",e._g({attrs:{src:e.src}},e.$listeners),[n("div",{staticClass:"uni-cover-image"},[e.src?n("img",{attrs:{src:e.$getRealPath(e.src)},on:{load:e._load,error:e._error}}):e._e()])])},i=[]},"8ced":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.setStorageSync=t.setStorage=t.removeStorageSync=t.removeStorage=t.getStorageSync=t.getStorage=void 0;var o={key:{type:String,required:!0}};t.getStorage=o;var i=[{name:"key",type:String,required:!0}];t.getStorageSync=i;var r={key:{type:String,required:!0},data:{required:!0}};t.setStorage=r;var a=[{name:"key",type:String,required:!0},{name:"data",required:!0}];t.setStorageSync=a;var s=o;t.removeStorage=s;var c=i;t.removeStorageSync=c},"8d0b":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}},"8d24":function(e,t,n){"use strict";var o=n("29d8");e.exports=/MSIE|Trident/.test(o)},"8d31":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.chooseVideo=void 0,n("8f71"),n("bf0f"),n("4626"),n("64aa");var o=["album","camera"],i={sourceType:{type:Array,required:!1,default:o,validator:function(e,t){e=e.filter((function(e){return o.includes(e)})),t.sourceType=e.length?e:o}},compressed:{type:Boolean,default:!0},maxDuration:{type:Number,default:60},camera:{type:String,default:"back"},extension:{type:Array,default:["*"],validator:function(e,t){if(0===e.length)return"param extension should not be empty."}}};t.chooseVideo=i},"8d3f":function(e,t,n){"use strict";function o(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;if(e=String(e).toLowerCase(),e&&n.test(e)){if(4===e.length){for(var o="#",i=1;i<4;i+=1)o+=e.slice(i,i+1).concat(e.slice(i,i+1));e=o}for(var r=[],a=1;a<7;a+=2)r.push(parseInt("0x".concat(e.slice(a,a+2))));return t?"rgb(".concat(r[0],",").concat(r[1],",").concat(r[2],")"):r}if(/^(rgb|RGB)/.test(e)){var s=e.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(",");return s.map((function(e){return Number(e)}))}return e}function i(e){var t=e;if(/^(rgb|RGB)/.test(t)){for(var n=t.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),o="#",i=0;i<n.length;i++){var r=Number(n[i]).toString(16);r=1==String(r).length?"".concat(0,r):r,"0"===r&&(r+=r),o+=r}return 7!==o.length&&(o=t),o}if(!/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t))return t;var a=t.replace(/#/,"").split("");if(6===a.length)return t;if(3===a.length){for(var s="#",c=0;c<a.length;c+=1)s+=a[c]+a[c];return s}}n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("c223"),n("aa9c"),n("5c47"),n("0506"),n("f7a5"),n("e966"),n("a1c1"),n("fd3c"),n("64aa"),n("c9b5"),n("bf0f"),n("ab80");var r={colorGradient:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rgb(0, 0, 0)",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rgb(255, 255, 255)",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=o(e,!1),a=r[0],s=r[1],c=r[2],u=o(t,!1),l=u[0],d=u[1],f=u[2],p=(l-a)/n,h=(d-s)/n,g=(f-c)/n,_=[],v=0;v<n;v++){var m=i("rgb(".concat(Math.round(p*v+a),",").concat(Math.round(h*v+s),",").concat(Math.round(g*v+c),")"));0===v&&(m=i(e)),v===n-1&&(m=i(t)),_.push(m)}return _},hexToRgb:o,rgbToHex:i,colorToRgba:function(e,t){e=i(e);var n=String(e).toLowerCase();if(n&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(n)){if(4===n.length){for(var o="#",r=1;r<4;r+=1)o+=n.slice(r,r+1).concat(n.slice(r,r+1));n=o}for(var a=[],s=1;s<7;s+=2)a.push(parseInt("0x".concat(n.slice(s,s+2))));return"rgba(".concat(a.join(","),",").concat(t,")")}return n}};t.default=r},"8d54":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("bf0f"),n("2797");var o={name:"SwiperItem",props:{itemId:{type:String,default:""}},mounted:function(){var e=this.$el;e.style.position="absolute",e.style.width="100%",e.style.height="100%";var t=this.$vnode._callbacks;t&&t.forEach((function(e){e()}))}};t.default=o},"8d64":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={cellGroup:{title:"",border:!0,customStyle:{}}}},"8dac":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t,n,o){e.addEventListener(t,(function(e){"function"===typeof n&&!1===n(e)&&(e.preventDefault(),e.stopPropagation())}),{capture:o,passive:!1})},i={beforeDestroy:function(){document.removeEventListener("mousemove",this.__mouseMoveEventListener),document.removeEventListener("mouseup",this.__mouseUpEventListener)},methods:{touchtrack:function(e,t,n){var i,r,a,s=this,c=this,u=0,l=0,d=0,f=0,p=function(e,n,o,i){if(!1===c[t]({target:e.target,currentTarget:e.currentTarget,preventDefault:e.preventDefault.bind(e),stopPropagation:e.stopPropagation.bind(e),touches:e.touches,changedTouches:e.changedTouches,detail:{state:n,x:o,y:i,dx:o-u,dy:i-l,ddx:o-d,ddy:i-f,timeStamp:e.timeStamp}}))return!1},h=null;o(e,"touchstart",(function(e){if(r=!0,1===e.touches.length&&!h)return h=e,u=d=e.touches[0].pageX,l=f=e.touches[0].pageY,p(e,"start",u,l)})),o(e,"mousedown",(function(e){if(a=!0,!r&&!h)return h=e,u=d=e.pageX,l=f=e.pageY,p(e,"start",u,l)})),o(e,"touchmove",(function(e){if(1===e.touches.length&&h){var t=p(e,"move",e.touches[0].pageX,e.touches[0].pageY);return d=e.touches[0].pageX,f=e.touches[0].pageY,t}}));var g=this.__clickEventListener=function(e){e.preventDefault(),e.stopPropagation()},_=this.__mouseMoveEventListener=function(e){if(!r&&a&&h){!i&&(Math.abs(d-u)>2||Math.abs(f-l)>2)&&(document.addEventListener("click",g,!0),i=!0);var t=p(e,"move",e.pageX,e.pageY);return d=e.pageX,f=e.pageY,t}};document.addEventListener("mousemove",_),o(e,"touchend",(function(e){if(0===e.touches.length&&h)return r=!1,h=null,p(e,"end",e.changedTouches[0].pageX,e.changedTouches[0].pageY)}));var v=this.__mouseUpEventListener=function(e){if(a=!1,!r&&h)return i&&setTimeout((function(){document.removeEventListener("click",s.__clickEventListener,!0),i=!1}),0),h=null,p(e,"end",e.pageX,e.pageY)};document.addEventListener("mouseup",v),o(e,"touchcancel",(function(e){if(h){r=!1;var t=h;return h=null,p(e,n?"cancel":"end",t.touches[0].pageX,t.touches[0].pageY)}}))}}};t.default=i},"8de3":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("092b")),r=i.default.color,a={icon:{name:"",color:r["u-content-color"],size:"16px",bold:!1,index:"",hoverClass:"",customPrefix:"uicon",label:"",labelPos:"right",labelSize:"15px",labelColor:r["u-content-color"],space:"3px",imgMode:"",width:"",height:"",top:0,stop:!1}};t.default=a},"8e02":function(e,t,n){"use strict";var o=n("569b"),i=n("474f"),r=n("ada5"),a=n("8c08"),s=a("toStringTag"),c=Object,u="Arguments"===r(function(){return arguments}());e.exports=o?r:function(e){var t,n,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=c(e),s))?n:u?r(t):"Object"===(o=r(t))&&i(t.callee)?"Arguments":o}},"8e7f":function(e,t,n){"use strict";n.r(t);var o=n("5259"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},"8f26":function(e,t,n){"use strict";var o=n("af9e");e.exports=!o((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},"8f6d":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={list:{showScrollbar:!1,lowerThreshold:50,upperThreshold:0,scrollTop:0,offsetAccuracy:10,enableFlex:!1,pagingEnabled:!1,scrollable:!0,scrollIntoView:"",scrollWithAnimation:!1,enableBackToTop:!1,height:0,width:0,preLoadScreen:1}}},"8f71":function(e,t,n){"use strict";var o=n("8bdb"),i=n("4d16").filter,r=n("a554"),a=r("filter");o({target:"Array",proto:!0,forced:!a},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"8f7d":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.hoverClass&&"none"!==e.hoverClass?n("uni-view",e._g({class:[e.hovering?e.hoverClass:""],on:{touchstart:e._hoverTouchStart,touchend:e._hoverTouchEnd,touchcancel:e._hoverTouchCancel,mousedown:e._hoverMousedown,mouseup:e._hoverMouseup}},e.$listeners),[e._t("default")],2):n("uni-view",e._g({},e.$listeners),[e._t("default")],2)},i=[]},"8fa1":function(e,t,n){var o=n("d10a"),i=0,r=Math.random(),a=o(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++i+r,36)}},"8ff5":function(e,t,n){"use strict";var o=n("7ddb"),i=n("4d16").filter,r=n("4379"),a=o.aTypedArray,s=o.exportTypedArrayMethod;s("filter",(function(e){var t=i(a(this),e,arguments.length>1?arguments[1]:void 0);return r(this,t)}))},"903a":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("5de6")),r=o(n("fcf3"));n("64aa"),n("5c47"),n("0506"),n("e966"),n("bf0f"),n("a1c1"),n("c223"),n("18f7"),n("d0af"),n("de6c"),n("23f4"),n("7d2f"),n("9c4e"),n("ab80"),n("c1a3"),n("08eb"),n("f3f7"),n("fd3c"),n("926e"),n("0829"),n("f7a5"),n("4100"),n("795c"),n("7a76"),n("c9b5"),n("0c26"),n("4626"),n("5ac7"),n("5ef2"),n("aa9c"),n("2797");var a=o(n("a019")),s=n("8acb");function c(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new WeakMap;if(null===e||"object"!==(0,r.default)(e))return e;if(n.has(e))return n.get(e);if(e instanceof Date)t=new Date(e.getTime());else if(e instanceof RegExp)t=new RegExp(e);else if(e instanceof Map)t=new Map(Array.from(e,(function(e){var t=(0,i.default)(e,2),o=t[0],r=t[1];return[o,c(r,n)]})));else if(e instanceof Set)t=new Set(Array.from(e,(function(e){return c(e,n)})));else if(Array.isArray(e))t=e.map((function(e){return c(e,n)}));else if("[object Object]"===Object.prototype.toString.call(e)){t=Object.create(Object.getPrototypeOf(e)),n.set(e,t);for(var o=0,a=Object.entries(e);o<a.length;o++){var s=(0,i.default)(a[o],2),u=s[0],l=s[1];t[u]=c(l,n)}}else t=Object.assign({},e);return n.set(e,t),t}function u(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-mm-dd";e=t?/^\d{10}$/.test(null===t||void 0===t?void 0:t.toString().trim())?new Date(1e3*t):"string"===typeof t&&/^\d+$/.test(t.trim())?new Date(Number(t)):"string"===typeof t&&t.includes("-")&&!t.includes("T")?new Date(t.replace(/-/g,"/")):new Date(t):new Date;var o={y:e.getFullYear().toString(),m:(e.getMonth()+1).toString().padStart(2,"0"),d:e.getDate().toString().padStart(2,"0"),h:e.getHours().toString().padStart(2,"0"),M:e.getMinutes().toString().padStart(2,"0"),s:e.getSeconds().toString().padStart(2,"0")};for(var r in o){var a=new RegExp("".concat(r,"+")).exec(n)||[],s=(0,i.default)(a,1),c=s[0];if(c){var u="y"===r&&2===c.length?2:0;n=n.replace(c,o[r].slice(u))}}return n}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"both";return e=String(e),"both"==t?e.replace(/^\s+|\s+$/g,""):"left"==t?e.replace(/^\s*/,""):"right"==t?e.replace(/(\s*$)/g,""):"all"==t?e.replace(/\s+/g,""):e}String.prototype.padStart||(String.prototype.padStart=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";if("[object String]"!==Object.prototype.toString.call(t))throw new TypeError("fillString must be String");var n=this;if(n.length>=e)return String(n);var o=e-n.length,i=Math.ceil(o/t.length);while(i>>=1)t+=t,1===i&&(t+=t);return t.slice(0,o)+n});var d={range:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.max(e,Math.min(t,Number(n)))},getPx:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a.default.number(e)?t?"".concat(e,"px"):Number(e):/(rpx|upx)$/.test(e)?t?"".concat(uni.upx2px(parseInt(e)),"px"):Number(uni.upx2px(parseInt(e))):t?"".concat(parseInt(e),"px"):parseInt(e)},sleep:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return new Promise((function(t){setTimeout((function(){t()}),e)}))},os:function(){return uni.getSystemInfoSync().platform.toLowerCase()},sys:function(){return uni.getSystemInfoSync()},random:function(e,t){if(e>=0&&t>0&&t>=e){var n=t-e+1;return Math.floor(Math.random()*n+e)}return 0},guid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[];if(n=n||o.length,e)for(var r=0;r<e;r++)i[r]=o[0|Math.random()*n];else{var a;i[8]=i[13]=i[18]=i[23]="-",i[14]="4";for(var s=0;s<36;s++)i[s]||(a=0|16*Math.random(),i[s]=o[19==s?3&a|8:a])}return t?(i.shift(),"u".concat(i.join(""))):i.join("")},$parent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=this.$parent;while(t){if(!t.$options||t.$options.name===e)return t;t=t.$parent}return!1},addStyle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"object";if(a.default.empty(e)||"object"===(0,r.default)(e)&&"object"===t||"string"===t&&"string"===typeof e)return e;if("object"===t){e=l(e);for(var n=e.split(";"),o={},i=0;i<n.length;i++)if(n[i]){var s=n[i].split(":");o[l(s[0])]=l(s[1])}return o}var c="";for(var u in e){var d=u.replace(/([A-Z])/g,"-$1").toLowerCase();c+="".concat(d,":").concat(e[u],";")}return l(c)},addUnit:function(){var e,t,n,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null!==(e=null===(t=uni)||void 0===t||null===(n=t.$u)||void 0===n||null===(o=n.config)||void 0===o?void 0:o.unit)&&void 0!==e?e:"px";return i=String(i),a.default.number(i)?"".concat(i).concat(r):i},deepClone:c,deepMerge:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t=c(t),"object"!==(0,r.default)(t)||null===t||"object"!==(0,r.default)(n)||null===n)return t;var o=Array.isArray(t)?t.slice():Object.assign({},t);for(var i in n)if(n.hasOwnProperty(i)){var a=n[i],s=o[i];a instanceof Date?o[i]=new Date(a):a instanceof RegExp?o[i]=new RegExp(a):a instanceof Map?o[i]=new Map(a):a instanceof Set?o[i]=new Set(a):"object"===(0,r.default)(a)&&null!==a?o[i]=e(s,a):o[i]=a}return o},error:function(e){0},randomArray:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.sort((function(){return Math.random()-.5}))},timeFormat:u,timeFrom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-mm-dd";null==e&&(e=Number(new Date)),e=parseInt(e),10==e.toString().length&&(e*=1e3);var n=(new Date).getTime()-e;n=parseInt(n/1e3);var o="";switch(!0){case n<300:o="刚刚";break;case n>=300&&n<3600:o="".concat(parseInt(n/60),"分钟前");break;case n>=3600&&n<86400:o="".concat(parseInt(n/3600),"小时前");break;case n>=86400&&n<2592e3:o="".concat(parseInt(n/86400),"天前");break;default:o=!1===t?n>=2592e3&&n<31536e3?"".concat(parseInt(n/2592e3),"个月前"):"".concat(parseInt(n/31536e3),"年前"):u(e,t)}return o},trim:l,queryParams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"brackets",o=t?"?":"",i=[];-1==["indices","brackets","repeat","comma"].indexOf(n)&&(n="brackets");var r=function(t){var o=e[t];if(["",void 0,null].indexOf(o)>=0)return"continue";if(o.constructor===Array)switch(n){case"indices":for(var r=0;r<o.length;r++)i.push("".concat(t,"[").concat(r,"]=").concat(o[r]));break;case"brackets":o.forEach((function(e){i.push("".concat(t,"[]=").concat(e))}));break;case"repeat":o.forEach((function(e){i.push("".concat(t,"=").concat(e))}));break;case"comma":var a="";o.forEach((function(e){a+=(a?",":"")+e})),i.push("".concat(t,"=").concat(a));break;default:o.forEach((function(e){i.push("".concat(t,"[]=").concat(e))}))}else i.push("".concat(t,"=").concat(o))};for(var a in e)r(a);return i.length?o+i.join("&"):""},toast:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;uni.showToast({title:String(e),icon:"none",duration:t})},type2icon:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"success",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];-1==["primary","info","error","warning","success"].indexOf(e)&&(e="success");var n="";switch(e){case"primary":n="info-circle";break;case"info":n="info-circle";break;case"error":n="close-circle";break;case"warning":n="error-circle";break;case"success":n="checkmark-circle";break;default:n="checkmark-circle"}return t&&(n+="-fill"),n},priceFormat:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:",";e="".concat(e).replace(/[^0-9+-Ee.]/g,"");var i=isFinite(+e)?+e:0,r=isFinite(+t)?Math.abs(t):0,a="undefined"===typeof o?",":o,c="undefined"===typeof n?".":n,u="";u=(r?(0,s.round)(i,r)+"":"".concat(Math.round(i))).split(".");var l=/(-?\d+)(\d{3})/;while(l.test(u[0]))u[0]=u[0].replace(l,"$1".concat(a,"$2"));return(u[1]||"").length<r&&(u[1]=u[1]||"",u[1]+=new Array(r-u[1].length+1).join("0")),u.join(c)},getDuration:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=parseInt(e);return t?/s$/.test(e)?e:"".concat(e,e>30?"ms":"s"):/ms$/.test(e)?n:/s$/.test(e)?n>30?n:1e3*n:n},padZero:function(e){return"00".concat(e).slice(-2)},formValidate:function(e,t){var n=uni.$u.$parent.call(e,"u-form-item"),o=uni.$u.$parent.call(e,"u-form");n&&o&&o.validateField(n.prop,(function(){}),t)},getProperty:function(e,t){if(e){if("string"!==typeof t||""===t)return"";if(-1!==t.indexOf(".")){for(var n=t.split("."),o=e[n[0]]||{},i=1;i<n.length;i++)o&&(o=o[n[i]]);return o}return e[t]}},setProperty:function(e,t,n){if(e){if("string"!==typeof t||""===t);else if(-1!==t.indexOf(".")){var o=t.split(".");(function e(t,n,o){if(1!==n.length)while(n.length>1){var i=n[0];t[i]&&"object"===(0,r.default)(t[i])||(t[i]={});n.shift();e(t[i],n,o)}else t[n[0]]=o})(e,o,n)}else e[t]=n}},page:function(){var e,t,n=getCurrentPages();return"/".concat(null!==(e=null===(t=n[n.length-1])||void 0===t?void 0:t.route)&&void 0!==e?e:"")},pages:function(){var e=getCurrentPages();return e},getHistoryPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=getCurrentPages(),n=t.length;return t[n-1+e]},setConfig:function(e){var t=e.props,n=void 0===t?{}:t,o=e.config,i=void 0===o?{}:o,r=e.color,a=void 0===r?{}:r,s=e.zIndex,c=void 0===s?{}:s,u=uni.$u.deepMerge;uni.$u.config=u(uni.$u.config,i),uni.$u.props=u(uni.$u.props,n),uni.$u.color=u(uni.$u.color,a),uni.$u.zIndex=u(uni.$u.zIndex,c)}};t.default=d},"906a":function(e,t,n){"use strict";n.r(t);var o=n("4809"),i=n("a23b");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a=n("828b"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},9105:function(e,t,n){var o=n("56c8"),i=n("da1d");e.exports=Object.keys||function(e){return o(e,i)}},"911a":function(e,t,n){"use strict";e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}},"926e":function(e,t,n){"use strict";var o=n("8bdb"),i=n("af9e"),r=n("1099"),a=n("c337"),s=n("1d57"),c=i((function(){a(1)}));o({target:"Object",stat:!0,forced:c,sham:!s},{getPrototypeOf:function(e){return a(r(e))}})},9291:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=document.getElementById(t);o&&n&&(o.parentNode.removeChild(o),o=null);o||(o=document.createElement("style"),o.type="text/css",t&&(o.id=t),document.getElementsByTagName("head")[0].appendChild(o));o.appendChild(document.createTextNode(e))}},"92b3":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},9320:function(e,t,n){"use strict";var o=n("4c77").IteratorPrototype,i=n("849d"),r=n("92b3"),a=n("ebe8"),s=n("d459"),c=function(){return this};e.exports=function(e,t,n,u){var l=t+" Iterator";return e.prototype=i(o,{next:r(+!u,n)}),a(e,l,!1,!0),s[l]=c,e}},9327:function(e,t,n){"use strict";var o=n("8bdb"),i=n("9f69"),r=n("1ded").f,a=n("c435"),s=n("9e70"),c=n("b6a1"),u=n("862c"),l=n("0931"),d=n("a734"),f=i("".slice),p=Math.min,h=l("endsWith"),g=!d&&!h&&!!function(){var e=r(String.prototype,"endsWith");return e&&!e.writable}();o({target:"String",proto:!0,forced:!g&&!h},{endsWith:function(e){var t=s(u(this));c(e);var n=arguments.length>1?arguments[1]:void 0,o=t.length,i=void 0===n?o:p(a(n),o),r=s(e);return f(t,i-r.length,i)===r}})},9360:function(e,t,n){var o=n("1faa"),i=n("77cd"),r=Function.prototype,a=o&&Object.getOwnPropertyDescriptor,s=i(r,"name"),c=s&&"something"===function(){}.name,u=s&&(!o||o&&a(r,"name").configurable);e.exports={EXISTS:s,PROPER:c,CONFIGURABLE:u}},9370:function(e,t,n){"use strict";var o=n("8bdb"),i=n("af9e"),r=n("1099"),a=n("c215"),s=i((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}));o({target:"Date",proto:!0,arity:1,forced:s},{toJSON:function(e){var t=r(this),n=a(t,"number");return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},"938a":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.setNavigationBarTitle=t.setNavigationBarColor=void 0,n("5ef2");var o=["#ffffff","#000000"],i={frontColor:{type:String,required:!0,validator:function(e,t){if(-1===o.indexOf(e))return'invalid frontColor "'.concat(e,'"')}},backgroundColor:{type:String,required:!0},animation:{type:Object,default:function(){return{duration:0,timingFunc:"linear"}},validator:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;t.animation={duration:e.duration||0,timingFunc:e.timingFunc||"linear"}}}};t.setNavigationBarColor=i;var r={title:{type:String,required:!0}};t.setNavigationBarTitle=r},"93c2":function(e,t,n){var o=n("c86b"),i=n("fdca"),r=n("77b2"),a=n("344f"),s=Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=o("Symbol");return i(t)&&r(t.prototype,s(e))}},9480:function(e,t,n){"use strict";var o=n("6a50");o("Uint8",(function(e){return function(t,n,o){return e(this,t,n,o)}}),!0)},9591:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e)||(0,i.default)(e)||(0,r.default)(e)||(0,a.default)()};var o=s(n("6242")),i=s(n("d14d")),r=s(n("5d6b")),a=s(n("b7b1"));function s(e){return e&&e.__esModule?e:{default:e}}},"960c":function(e,t,n){"use strict";var o=n("bb80"),i=n("7992");e.exports=function(e,t,n){try{return o(i(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(r){}}},"967d":function(e,t,n){"use strict";function o(e,t){for(var n=[],o={},i=0;i<t.length;i++){var r=t[i],a=r[0],s=r[1],c=r[2],u=r[3],l={id:e+":"+i,css:s,media:c,sourceMap:u};o[a]?o[a].parts.push(l):n.push(o[a]={id:a,parts:[l]})}return n}n.r(t),n.d(t,"default",(function(){return p}));var i="undefined"!==typeof document;if("undefined"!==typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var r={},a=i&&(document.head||document.getElementsByTagName("head")[0]),s=null,c=0,u=!1,l=function(){},d=null,f="undefined"!==typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function p(e,t,n,i){u=n,d=i||{};var a=o(e,t);return h(a),function(t){for(var n=[],i=0;i<a.length;i++){var s=a[i],c=r[s.id];c.refs--,n.push(c)}t?(a=o(e,t),h(a)):a=[];for(i=0;i<n.length;i++){c=n[i];if(0===c.refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete r[c.id]}}}}function h(e){for(var t=0;t<e.length;t++){var n=e[t],o=r[n.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](n.parts[i]);for(;i<n.parts.length;i++)o.parts.push(_(n.parts[i]));o.parts.length>n.parts.length&&(o.parts.length=n.parts.length)}else{var a=[];for(i=0;i<n.parts.length;i++)a.push(_(n.parts[i]));r[n.id]={id:n.id,refs:1,parts:a}}}}function g(){var e=document.createElement("style");return e.type="text/css",a.appendChild(e),e}function _(e){var t,n,o=document.querySelector('style[data-vue-ssr-id~="'+e.id+'"]');if(o){if(u)return l;o.parentNode.removeChild(o)}if(f){var i=c++;o=s||(s=g()),t=m.bind(null,o,i,!1),n=m.bind(null,o,i,!0)}else o=g(),t=y.bind(null,o),n=function(){o.parentNode.removeChild(o)};return t(e),function(o){if(o){if(o.css===e.css&&o.media===e.media&&o.sourceMap===e.sourceMap)return;t(e=o)}else n()}}var v=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function m(e,t,n,o){var i=n?"":A(o.css);if(e.styleSheet)e.styleSheet.cssText=v(t,i);else{var r=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}function y(e,t){var n=A(t.css),o=t.media,i=t.sourceMap;if(o&&e.setAttribute("media",o),d.ssrId&&e.setAttribute("data-vue-ssr-id",t.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{while(e.firstChild)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var M=/%\?([+-]?\d+(\.\d+)?)\?%/g,I=/\.\?%PAGE\?%/g,C=/\?%PAGE\?%\[data-v-[a-z0-9]{8}\]/g,b=/uni-page-body\[data-v-[a-z0-9]{8}\]/g,T=/var\(--status-bar-height\)/gi,S=/var\(--window-top\)/gi,E=/var\(--window-bottom\)/gi,k=/var\(--window-left\)/gi,D=/var\(--window-right\)/gi;function A(e){var t=function(){var e="function"===typeof getApp&&getApp();return e&&e.$route&&e.$route.meta&&e.$route.meta.name||""}();if("undefined"!==typeof uni&&!uni.canIUse("css.var")){var n=function(){var e="function"===typeof getApp&&getApp();if(e&&e.$route&&e.$route.meta&&e.$route.meta.name)return{top:e.$route.meta.windowTop,bottom:e.$route.meta.isTabBar?50:0};return{top:0,bottom:0}}();e=e.replace(T,"0px").replace(S,n.top+"px").replace(E,n.bottom+"px").replace(k,"0px").replace(D,"0px")}return e.replace(C,t).replace(I,"").replace(b,"body."+t+" uni-page-body").replace(/\{[\s\S]+?\}|@media.+?\{/g,(function(e){return"undefined"===typeof uni?e:e.replace(M,(function(e,t){return uni.upx2px(t)+"px"}))}))}},"969a":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("c47d"),i={name:"Audio",mixins:[o.subscriber],props:{id:{type:String,default:""},src:{type:String,default:""},loop:{type:[Boolean,String],default:!1},controls:{type:[Boolean,String],default:!1},poster:{type:String,default:""},name:{type:String,default:""},author:{type:String,default:""}},data:function(){return{playing:!1,currentTime:this.getTime(0)}},watch:{src:function(e){this.$refs.audio&&(this.$refs.audio.src=this.$getRealPath(e))}},mounted:function(){var e=this,t=this.$refs.audio;t.addEventListener("error",(function(t){e.playing=!1,e.$trigger("error",t,{})})),t.addEventListener("play",(function(t){e.playing=!0,e.$trigger("play",t,{})})),t.addEventListener("pause",(function(t){e.playing=!1,e.$trigger("pause",t,{})})),t.addEventListener("ended",(function(t){e.playing=!1,e.$trigger("ended",t,{})})),t.addEventListener("timeupdate",(function(n){var o=t.currentTime;e.currentTime=e.getTime(o);var i=t.duration;e.$trigger("timeupdate",n,{currentTime:o,duration:i})})),t.src=this.$getRealPath(this.src)},methods:{_handleSubscribe:function(e){var t=e.type,n=e.data,o=void 0===n?{}:n,i=this.$refs.audio;switch(t){case"setSrc":i.src=this.$getRealPath(o.src),this.$emit("update:src",o.src);break;case"play":i.play();break;case"pause":i.pause();break;case"seek":i.currentTime=o.position;break}},trigger:function(){this.playing?this.$refs.audio.pause():this.$refs.audio.play()},getTime:function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),o=Math.floor(e%3600%60);t=(t<10?"0":"")+t,n=(n<10?"0":"")+n,o=(o<10?"0":"")+o;var i=n+":"+o;return"00"!==t&&(i=t+":"+i),i}}};t.default=i},"96c2":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={slider:{value:0,blockSize:18,min:0,max:100,step:1,activeColor:"#2979ff",inactiveColor:"#c0c4cc",blockColor:"#ffffff",showValue:!1,disabled:!1,blockStyle:function(){}}}},"979b":function(e,t,n){"use strict";n.r(t);var o=n("6640"),i=n("33b6");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a=n("828b"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},"97cf":function(e,t,n){var o=n("d10a"),i=n("fdca"),r=n("49a5"),a=o(Function.toString);i(r.inspectSource)||(r.inspectSource=function(e){return a(e)}),e.exports=r.inspectSource},"97ed":function(e,t,n){"use strict";e.exports=function(e,t){return{value:e,done:t}}},9839:function(e,t,n){"use strict";var o=n("85c1"),i=n("af9e"),r=n("29ba"),a=n("7ddb").NATIVE_ARRAY_BUFFER_VIEWS,s=o.ArrayBuffer,c=o.Int8Array;e.exports=!a||!i((function(){c(1)}))||!i((function(){new c(-1)}))||!r((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||i((function(){return 1!==new c(new s(2),1,void 0).length}))},9863:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={steps:{direction:"row",current:0,activeColor:"#3c9cff",inactiveColor:"#969799",activeIcon:"",inactiveIcon:"",dot:!1}}},9917:function(e,t,n){"use strict";var o=n("8c08");t.f=o},9979:function(e,t,n){"use strict";var o=n("8bdb"),i=n("03a0").codeAt;o({target:"String",proto:!0},{codePointAt:function(e){return i(this,e)}})},"9a2c":function(e,t,n){"use strict";var o=n("8bdb"),i=n("af9e"),r=n("f660"),a=n("1ded").f,s=n("ab4a"),c=!s||i((function(){a(1)}));o({target:"Object",stat:!0,forced:c,sham:!s},{getOwnPropertyDescriptor:function(e,t){return a(r(e),t)}})},"9a51":function(e,t,n){"use strict";var o=n("7992"),i=n("1099"),r=n("7e41"),a=n("1fc1"),s=TypeError,c="Reduce of empty array with no initial value",u=function(e){return function(t,n,u,l){var d=i(t),f=r(d),p=a(d);if(o(n),0===p&&u<2)throw new s(c);var h=e?p-1:0,g=e?-1:1;if(u<2)while(1){if(h in f){l=f[h],h+=g;break}if(h+=g,e?h<0:p<=h)throw new s(c)}for(;e?h>=0:p>h;h+=g)h in f&&(l=n(l,f[h],h,d));return l}};e.exports={left:u(!1),right:u(!0)}},"9ad8":function(e,t,n){"use strict";var o=n("71e9"),i=n("bb80"),r=n("9e70"),a=n("471d"),s=n("edb7"),c=n("8b3b"),u=n("e37c"),l=n("235c").get,d=n("b0a8"),f=n("cca9"),p=c("native-string-replace",String.prototype.replace),h=RegExp.prototype.exec,g=h,_=i("".charAt),v=i("".indexOf),m=i("".replace),y=i("".slice),M=function(){var e=/a/,t=/b*/g;return o(h,e,"a"),o(h,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),I=s.BROKEN_CARET,C=void 0!==/()??/.exec("")[1],b=M||C||I||d||f;b&&(g=function(e){var t,n,i,s,c,d,f,b=this,T=l(b),S=r(e),E=T.raw;if(E)return E.lastIndex=b.lastIndex,t=o(g,E,S),b.lastIndex=E.lastIndex,t;var k=T.groups,D=I&&b.sticky,A=o(a,b),L=b.source,O=0,R=S;if(D&&(A=m(A,"y",""),-1===v(A,"g")&&(A+="g"),R=y(S,b.lastIndex),b.lastIndex>0&&(!b.multiline||b.multiline&&"\n"!==_(S,b.lastIndex-1))&&(L="(?: "+L+")",R=" "+R,O++),n=new RegExp("^(?:"+L+")",A)),C&&(n=new RegExp("^"+L+"$(?!\\s)",A)),M&&(i=b.lastIndex),s=o(h,D?n:b,R),D?s?(s.input=y(s.input,O),s[0]=y(s[0],O),s.index=b.lastIndex,b.lastIndex+=s[0].length):b.lastIndex=0:M&&s&&(b.lastIndex=b.global?s.index+s[0].length:i),C&&s&&s.length>1&&o(p,s[0],n,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(s[c]=void 0)})),s&&k)for(s.groups=d=u(null),c=0;c<k.length;c++)f=k[c],d[f[0]]=s[f[1]];return s}),e.exports=g},"9b1b":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},n("dc8a"),n("01a2"),n("8f71"),n("bf0f"),n("9a2c"),n("aa9c"),n("2797"),n("a644"),n("a03a"),n("6a54");var o=function(e){return e&&e.__esModule?e:{default:e}}(n("39d8"));function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}},"9b55":function(e,t,n){"use strict";var o=n("a734"),i=n("85c1"),r=n("c9b7"),a=e.exports=i["__core-js_shared__"]||r("__core-js_shared__",{});(a.versions||(a.versions=[])).push({version:"3.36.1",mode:o?"pure":"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.36.1/LICENSE",source:"https://github.com/zloirock/core-js"})},"9b8e":function(e,t,n){"use strict";n.r(t),function(e,n){
/*!
 * Vue.js v2.6.11
 * (c) 2014-2022 Evan You
 * Released under the MIT License.
 */
var o=Object.freeze({});function i(e){return void 0===e||null===e}function r(e){return void 0!==e&&null!==e}function a(e){return!0===e}function s(e){return"string"===typeof e||"number"===typeof e||"symbol"===typeof e||"boolean"===typeof e}function c(e){return null!==e&&"object"===typeof e}var u=Object.prototype.toString;function l(e){return"[object Object]"===u.call(e)}function d(e){return"[object RegExp]"===u.call(e)}function f(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function p(e){return r(e)&&"function"===typeof e.then&&"function"===typeof e.catch}function h(e){return null==e?"":Array.isArray(e)||l(e)&&e.toString===u?JSON.stringify(e,null,2):String(e)}function g(e){var t=parseFloat(e);return isNaN(t)?e:t}function _(e,t){for(var n=Object.create(null),o=e.split(","),i=0;i<o.length;i++)n[o[i]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}_("slot,component",!0);var v=_("key,ref,slot,slot-scope,is");function m(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}var y=Object.prototype.hasOwnProperty;function M(e,t){return y.call(e,t)}function I(e){var t=Object.create(null);return function(n){var o=t[n];return o||(t[n]=e(n))}}var C=/-(\w)/g,b=I((function(e){return e.replace(C,(function(e,t){return t?t.toUpperCase():""}))})),T=I((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),S=/\B([A-Z])/g,E=I((function(e){return e.replace(S,"-$1").toLowerCase()}));var k=Function.prototype.bind?function(e,t){return e.bind(t)}:function(e,t){function n(n){var o=arguments.length;return o?o>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n};function D(e,t){t=t||0;var n=e.length-t,o=new Array(n);while(n--)o[n]=e[n+t];return o}function A(e,t){for(var n in t)e[n]=t[n];return e}function L(e){for(var t={},n=0;n<e.length;n++)e[n]&&A(t,e[n]);return t}function O(e,t,n){}var R=function(e,t,n){return!1},w=function(e){return e};function N(e,t){if(e===t)return!0;var n=c(e),o=c(t);if(!n||!o)return!n&&!o&&String(e)===String(t);try{var i=Array.isArray(e),r=Array.isArray(t);if(i&&r)return e.length===t.length&&e.every((function(e,n){return N(e,t[n])}));if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(i||r)return!1;var a=Object.keys(e),s=Object.keys(t);return a.length===s.length&&a.every((function(n){return N(e[n],t[n])}))}catch(u){return!1}}function P(e,t){for(var n=0;n<e.length;n++)if(N(e[n],t))return n;return-1}function G(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}var U=["component","directive","filter"],x=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],F={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:R,isReservedAttr:R,isUnknownElement:R,getTagNamespace:O,parsePlatformTagName:w,mustUseProp:R,async:!0,_lifecycleHooks:x},q=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function B(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function V(e,t,n,o){Object.defineProperty(e,t,{value:n,enumerable:!!o,writable:!0,configurable:!0})}var H=new RegExp("[^"+q.source+".$_\\d]");var j,K="__proto__"in{},W="undefined"!==typeof window,Y="undefined"!==typeof WXEnvironment&&!!WXEnvironment.platform,z=Y&&WXEnvironment.platform.toLowerCase(),$=W&&window.navigator.userAgent.toLowerCase(),X=$&&/msie|trident/.test($),J=$&&$.indexOf("msie 9.0")>0,Q=$&&$.indexOf("edge/")>0,Z=($&&$.indexOf("android"),$&&/iphone|ipad|ipod|ios/.test($)||"ios"===z),ee=($&&/chrome\/\d+/.test($),$&&/phantomjs/.test($),$&&$.match(/firefox\/(\d+)/)),te={}.watch,ne=!1;if(W)try{var oe={};Object.defineProperty(oe,"passive",{get:function(){ne=!0}}),window.addEventListener("test-passive",null,oe)}catch(Ki){}var ie=function(){return void 0===j&&(j=!W&&!Y&&"undefined"!==typeof e&&(e["process"]&&"server"===e["process"].env.VUE_ENV)),j},re=W&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ae(e){return"function"===typeof e&&/native code/.test(e.toString())}var se,ce="undefined"!==typeof Symbol&&ae(Symbol)&&"undefined"!==typeof Reflect&&ae(Reflect.ownKeys);se="undefined"!==typeof Set&&ae(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var ue=O,le=0,de=function(){this.id=le++,this.subs=[]};function fe(e){de.SharedObject.targetStack.push(e),de.SharedObject.target=e,de.target=e}function pe(){de.SharedObject.targetStack.pop(),de.SharedObject.target=de.SharedObject.targetStack[de.SharedObject.targetStack.length-1],de.target=de.SharedObject.target}de.prototype.addSub=function(e){this.subs.push(e)},de.prototype.removeSub=function(e){m(this.subs,e)},de.prototype.depend=function(){de.SharedObject.target&&de.SharedObject.target.addDep(this)},de.prototype.notify=function(){var e=this.subs.slice();for(var t=0,n=e.length;t<n;t++)e[t].update()},de.SharedObject={},de.SharedObject.target=null,de.SharedObject.targetStack=[];var he=function(e,t,n,o,i,r,a,s){this.tag=e,this.data=t,this.children=n,this.text=o,this.elm=i,this.ns=void 0,this.context=r,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},ge={child:{configurable:!0}};ge.child.get=function(){return this.componentInstance},Object.defineProperties(he.prototype,ge);var _e=function(e){void 0===e&&(e="");var t=new he;return t.text=e,t.isComment=!0,t};function ve(e){return new he(void 0,void 0,void 0,String(e))}function me(e){var t=new he(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var ye=Array.prototype,Me=Object.create(ye);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(e){var t=ye[e];V(Me,e,(function(){var n=[],o=arguments.length;while(o--)n[o]=arguments[o];var i,r=t.apply(this,n),a=this.__ob__;switch(e){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2);break}return i&&a.observeArray(i),a.dep.notify(),r}))}));var Ie=Object.getOwnPropertyNames(Me),Ce=!0;function be(e){Ce=e}var Te=function(e){this.value=e,this.dep=new de,this.vmCount=0,V(e,"__ob__",this),Array.isArray(e)?(K?function(e,t){e.__proto__=t}(e,Me):function(e,t,n){for(var o=0,i=n.length;o<i;o++){var r=n[o];V(e,r,t[r])}}(e,Me,Ie),this.observeArray(e)):this.walk(e)};function Se(e,t){var n;if(c(e)&&!(e instanceof he))return M(e,"__ob__")&&e.__ob__ instanceof Te?n=e.__ob__:Ce&&!ie()&&(Array.isArray(e)||l(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new Te(e)),t&&n&&n.vmCount++,n}function Ee(e,t,n,o,i){var r=new de,a=Object.getOwnPropertyDescriptor(e,t);if(!a||!1!==a.configurable){var s=a&&a.get,c=a&&a.set;s&&!c||2!==arguments.length||(n=e[t]);var u=!i&&Se(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=s?s.call(e):n;return de.SharedObject.target&&(r.depend(),u&&(u.dep.depend(),Array.isArray(t)&&Ae(t))),t},set:function(t){var o=s?s.call(e):n;t===o||t!==t&&o!==o||s&&!c||(c?c.call(e,t):n=t,u=!i&&Se(t),r.notify())}})}}function ke(e,t,n){if(Array.isArray(e)&&f(t))return e.length=Math.max(e.length,t),e.splice(t,1,n),n;if(t in e&&!(t in Object.prototype))return e[t]=n,n;var o=e.__ob__;return e._isVue||o&&o.vmCount?n:o?(Ee(o.value,t,n),o.dep.notify(),n):(e[t]=n,n)}function De(e,t){if(Array.isArray(e)&&f(t))e.splice(t,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount||M(e,t)&&(delete e[t],n&&n.dep.notify())}}function Ae(e){for(var t=void 0,n=0,o=e.length;n<o;n++)t=e[n],t&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&Ae(t)}Te.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)Ee(e,t[n])},Te.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)Se(e[t])};var Le=F.optionMergeStrategies;function Oe(e,t){if(!t)return e;for(var n,o,i,r=ce?Reflect.ownKeys(t):Object.keys(t),a=0;a<r.length;a++)n=r[a],"__ob__"!==n&&(o=e[n],i=t[n],M(e,n)?o!==i&&l(o)&&l(i)&&Oe(o,i):ke(e,n,i));return e}function Re(e,t,n){return n?function(){var o="function"===typeof t?t.call(n,n):t,i="function"===typeof e?e.call(n,n):e;return o?Oe(o,i):i}:t?e?function(){return Oe("function"===typeof t?t.call(this,this):t,"function"===typeof e?e.call(this,this):e)}:t:e}function we(e,t){var n=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return n?function(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(n):n}function Ne(e,t,n,o){var i=Object.create(e||null);return t?A(i,t):i}Le.data=function(e,t,n){return n?Re(e,t,n):t&&"function"!==typeof t?e:Re(e,t)},x.forEach((function(e){Le[e]=we})),U.forEach((function(e){Le[e+"s"]=Ne})),Le.watch=function(e,t,n,o){if(e===te&&(e=void 0),t===te&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var i={};for(var r in A(i,e),t){var a=i[r],s=t[r];a&&!Array.isArray(a)&&(a=[a]),i[r]=a?a.concat(s):Array.isArray(s)?s:[s]}return i},Le.props=Le.methods=Le.inject=Le.computed=function(e,t,n,o){if(!e)return t;var i=Object.create(null);return A(i,e),t&&A(i,t),i},Le.provide=Re;var Pe=function(e,t){return void 0===t?e:t};function Ge(e,t,n){if("function"===typeof t&&(t=t.options),function(e,t){var n=e.props;if(n){var o,i,r,a={};if(Array.isArray(n)){o=n.length;while(o--)i=n[o],"string"===typeof i&&(r=b(i),a[r]={type:null})}else if(l(n))for(var s in n)i=n[s],r=b(s),a[r]=l(i)?i:{type:i};else 0;e.props=a}}(t),function(e,t){var n=e.inject;if(n){var o=e.inject={};if(Array.isArray(n))for(var i=0;i<n.length;i++)o[n[i]]={from:n[i]};else if(l(n))for(var r in n){var a=n[r];o[r]=l(a)?A({from:r},a):{from:a}}else 0}}(t),function(e){var t=e.directives;if(t)for(var n in t){var o=t[n];"function"===typeof o&&(t[n]={bind:o,update:o})}}(t),!t._base&&(t.extends&&(e=Ge(e,t.extends,n)),t.mixins))for(var o=0,i=t.mixins.length;o<i;o++)e=Ge(e,t.mixins[o],n);var r,a={};for(r in e)s(r);for(r in t)M(e,r)||s(r);function s(o){var i=Le[o]||Pe;a[o]=i(e[o],t[o],n,o)}return a}function Ue(e,t,n,o){if("string"===typeof n){var i=e[t];if(M(i,n))return i[n];var r=b(n);if(M(i,r))return i[r];var a=T(r);if(M(i,a))return i[a];var s=i[n]||i[r]||i[a];return s}}function xe(e,t,n,o){var i=t[e],r=!M(n,e),a=n[e],s=Be(Boolean,i.type);if(s>-1)if(r&&!M(i,"default"))a=!1;else if(""===a||a===E(e)){var c=Be(String,i.type);(c<0||s<c)&&(a=!0)}if(void 0===a){a=function(e,t,n){if(!M(t,"default"))return;var o=t.default;0;if(e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n])return e._props[n];return"function"===typeof o&&"Function"!==Fe(t.type)?o.call(e):o}(o,i,e);var u=Ce;be(!0),Se(a),be(u)}return a}function Fe(e){var t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:""}function qe(e,t){return Fe(e)===Fe(t)}function Be(e,t){if(!Array.isArray(t))return qe(t,e)?0:-1;for(var n=0,o=t.length;n<o;n++)if(qe(t[n],e))return n;return-1}function Ve(e,t,n){fe();try{if(t){var o=t;while(o=o.$parent){var i=o.$options.errorCaptured;if(i)for(var r=0;r<i.length;r++)try{var a=!1===i[r].call(o,e,t,n);if(a)return}catch(Ki){je(Ki,o,"errorCaptured hook")}}}je(e,t,n)}finally{pe()}}function He(e,t,n,o,i){var r;try{r=n?e.apply(t,n):e.call(t),r&&!r._isVue&&p(r)&&!r._handled&&(r.catch((function(e){return Ve(e,o,i+" (Promise/async)")})),r._handled=!0)}catch(Ki){Ve(Ki,o,i)}return r}function je(e,t,n){if(F.errorHandler)try{return F.errorHandler.call(null,e,t,n)}catch(Ki){Ki!==e&&Ke(Ki,null,"config.errorHandler")}Ke(e,t,n)}function Ke(e,t,o){if(!W&&!Y||"undefined"===typeof n)throw e;n.error(e)}var We,Ye=!1,ze=[],$e=!1;function Xe(){$e=!1;var e=ze.slice(0);ze.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!==typeof Promise&&ae(Promise)){var Je=Promise.resolve();We=function(){Je.then(Xe),Z&&setTimeout(O)},Ye=!0}else if(X||"undefined"===typeof MutationObserver||!ae(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())We="undefined"!==typeof setImmediate&&ae(setImmediate)?function(){setImmediate(Xe)}:function(){setTimeout(Xe,0)};else{var Qe=1,Ze=new MutationObserver(Xe),et=document.createTextNode(String(Qe));Ze.observe(et,{characterData:!0}),We=function(){Qe=(Qe+1)%2,et.data=String(Qe)},Ye=!0}function tt(e,t){var n;if(ze.push((function(){if(e)try{e.call(t)}catch(Ki){Ve(Ki,t,"nextTick")}else n&&n(t)})),$e||($e=!0,We()),!e&&"undefined"!==typeof Promise)return new Promise((function(e){n=e}))}var nt=new se;function ot(e){(function e(t,n){var o,i,r=Array.isArray(t);if(!r&&!c(t)||Object.isFrozen(t)||t instanceof he)return;if(t.__ob__){var a=t.__ob__.dep.id;if(n.has(a))return;n.add(a)}if(r){o=t.length;while(o--)e(t[o],n)}else{i=Object.keys(t),o=i.length;while(o--)e(t[i[o]],n)}})(e,nt),nt.clear()}var it=I((function(e){var t="&"===e.charAt(0);e=t?e.slice(1):e;var n="~"===e.charAt(0);e=n?e.slice(1):e;var o="!"===e.charAt(0);return e=o?e.slice(1):e,{name:e,once:n,capture:o,passive:t}}));function rt(e,t){function n(){var e=arguments,o=n.fns;if(!Array.isArray(o))return He(o,null,arguments,t,"v-on handler");for(var i=o.slice(),r=0;r<i.length;r++)He(i[r],null,e,t,"v-on handler")}return n.fns=e,n}function at(e,t,n,o,r,s){var c,u,l,d;for(c in e)u=e[c],l=t[c],d=it(c),i(u)||(i(l)?(i(u.fns)&&(u=e[c]=rt(u,s)),a(d.once)&&(u=e[c]=r(d.name,u,d.capture)),n(d.name,u,d.capture,d.passive,d.params)):u!==l&&(l.fns=u,e[c]=l));for(c in t)i(e[c])&&(d=it(c),o(d.name,t[c],d.capture))}function st(e,t,n){var o;e instanceof he&&(e=e.data.hook||(e.data.hook={}));var s=e[t];function c(){n.apply(this,arguments),m(o.fns,c)}i(s)?o=rt([c]):r(s.fns)&&a(s.merged)?(o=s,o.fns.push(c)):o=rt([s,c]),o.merged=!0,e[t]=o}function ct(e,t,n,o){var a=t.options.mpOptions&&t.options.mpOptions.properties;if(i(a))return n;var s=t.options.mpOptions.externalClasses||[],c=e.attrs,u=e.props;if(r(c)||r(u))for(var l in a){var d=E(l),f=ut(n,u,l,d,!0)||ut(n,c,l,d,!1);f&&n[l]&&-1!==s.indexOf(d)&&o[b(n[l])]&&(n[l]=o[b(n[l])])}return n}function ut(e,t,n,o,i){if(r(t)){if(M(t,n))return e[n]=t[n],i||delete t[n],!0;if(M(t,o))return e[n]=t[o],i||delete t[o],!0}return!1}function lt(e){return s(e)?[ve(e)]:Array.isArray(e)?function e(t,n){var o,c,u,l,d=[];for(o=0;o<t.length;o++)c=t[o],i(c)||"boolean"===typeof c||(u=d.length-1,l=d[u],Array.isArray(c)?c.length>0&&(c=e(c,(n||"")+"_"+o),dt(c[0])&&dt(l)&&(d[u]=ve(l.text+c[0].text),c.shift()),d.push.apply(d,c)):s(c)?dt(l)?d[u]=ve(l.text+c):""!==c&&d.push(ve(c)):dt(c)&&dt(l)?d[u]=ve(l.text+c.text):(a(t._isVList)&&r(c.tag)&&i(c.key)&&r(n)&&(c.key="__vlist"+n+"_"+o+"__"),d.push(c)));return d}(e):void 0}function dt(e){return r(e)&&r(e.text)&&function(e){return!1===e}(e.isComment)}function ft(e,t){if(e){for(var n=Object.create(null),o=ce?Reflect.ownKeys(e):Object.keys(e),i=0;i<o.length;i++){var r=o[i];if("__ob__"!==r){var a=e[r].from,s=t;while(s){if(s._provided&&M(s._provided,a)){n[r]=s._provided[a];break}s=s.$parent}if(!s)if("default"in e[r]){var c=e[r].default;n[r]="function"===typeof c?c.call(t):c}else 0}}return n}}function pt(e,t){if(!e||!e.length)return{};for(var n={},o=0,i=e.length;o<i;o++){var r=e[o],a=r.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,r.context!==t&&r.fnContext!==t||!a||null==a.slot)r.asyncMeta&&r.asyncMeta.data&&"page"===r.asyncMeta.data.slot?(n["page"]||(n["page"]=[])).push(r):(n.default||(n.default=[])).push(r);else{var s=a.slot,c=n[s]||(n[s]=[]);"template"===r.tag?c.push.apply(c,r.children||[]):c.push(r)}}for(var u in n)n[u].every(ht)&&delete n[u];return n}function ht(e){return e.isComment&&!e.asyncFactory||" "===e.text}function gt(e,t,n){var i,r=Object.keys(t).length>0,a=e?!!e.$stable:!r,s=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(a&&n&&n!==o&&s===n.$key&&!r&&!n.$hasNormal)return n;for(var c in i={},e)e[c]&&"$"!==c[0]&&(i[c]=_t(t,c,e[c]))}else i={};for(var u in t)u in i||(i[u]=vt(t,u));return e&&Object.isExtensible(e)&&(e._normalized=i),V(i,"$stable",a),V(i,"$key",s),V(i,"$hasNormal",r),i}function _t(e,t,n){var o=function(){var e=arguments.length?n.apply(null,arguments):n({});return e=e&&"object"===typeof e&&!Array.isArray(e)?[e]:lt(e),e&&(0===e.length||1===e.length&&e[0].isComment)?void 0:e};return n.proxy&&Object.defineProperty(e,t,{get:o,enumerable:!0,configurable:!0}),o}function vt(e,t){return function(){return e[t]}}function mt(e,t){var n,o,i,a,s;if(Array.isArray(e)||"string"===typeof e)for(n=new Array(e.length),o=0,i=e.length;o<i;o++)n[o]=t(e[o],o,o,o);else if("number"===typeof e)for(n=new Array(e),o=0;o<e;o++)n[o]=t(o+1,o,o,o);else if(c(e))if(ce&&e[Symbol.iterator]){n=[];var u=e[Symbol.iterator](),l=u.next();while(!l.done)n.push(t(l.value,n.length,o,o++)),l=u.next()}else for(a=Object.keys(e),n=new Array(a.length),o=0,i=a.length;o<i;o++)s=a[o],n[o]=t(e[s],s,o,o);return r(n)||(n=[]),n._isVList=!0,n}function yt(e,t,n,o){var i,r=this.$scopedSlots[e];r?(n=n||{},o&&(n=A(A({},o),n)),i=r(n,this,n._i)||t):i=this.$slots[e]||t;var a=n&&n.slot;return a?this.$createElement("template",{slot:a},i):i}function Mt(e){return Ue(this.$options,"filters",e)||w}function It(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function Ct(e,t,n,o,i){var r=F.keyCodes[t]||n;return i&&o&&!F.keyCodes[t]?It(i,o):r?It(r,e):o?E(o)!==t:void 0}function bt(e,t,n,o,i){if(n)if(c(n)){var r;Array.isArray(n)&&(n=L(n));var a=function(a){if("class"===a||"style"===a||v(a))r=e;else{var s=e.attrs&&e.attrs.type;r=o||F.mustUseProp(t,s,a)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var c=b(a),u=E(a);if(!(c in r)&&!(u in r)&&(r[a]=n[a],i)){var l=e.on||(e.on={});l["update:"+a]=function(e){n[a]=e}}};for(var s in n)a(s)}else;return e}function Tt(e,t){var n=this._staticTrees||(this._staticTrees=[]),o=n[e];return o&&!t||(o=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),Et(o,"__static__"+e,!1)),o}function St(e,t,n){return Et(e,"__once__"+t+(n?"_"+n:""),!0),e}function Et(e,t,n){if(Array.isArray(e))for(var o=0;o<e.length;o++)e[o]&&"string"!==typeof e[o]&&kt(e[o],t+"_"+o,n);else kt(e,t,n)}function kt(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function Dt(e,t){if(t)if(l(t)){var n=e.on=e.on?A({},e.on):{};for(var o in t){var i=n[o],r=t[o];n[o]=i?[].concat(i,r):r}}else;return e}function At(e,t,n,o){t=t||{$stable:!n};for(var i=0;i<e.length;i++){var r=e[i];Array.isArray(r)?At(r,t,n):r&&(r.proxy&&(r.fn.proxy=!0),t[r.key]=r.fn)}return o&&(t.$key=o),t}function Lt(e,t){for(var n=0;n<t.length;n+=2){var o=t[n];"string"===typeof o&&o&&(e[t[n]]=t[n+1])}return e}function Ot(e,t){return"string"===typeof e?t+e:e}function Rt(e){e._o=St,e._n=g,e._s=h,e._l=mt,e._t=yt,e._q=N,e._i=P,e._m=Tt,e._f=Mt,e._k=Ct,e._b=bt,e._v=ve,e._e=_e,e._u=At,e._g=Dt,e._d=Lt,e._p=Ot}function wt(e,t,n,i,r){var s,c=this,u=r.options;M(i,"_uid")?(s=Object.create(i),s._original=i):(s=i,i=i._original);var l=a(u._compiled),d=!l;this.data=e,this.props=t,this.children=n,this.parent=i,this.listeners=e.on||o,this.injections=ft(u.inject,i),this.slots=function(){return c.$slots||gt(e.scopedSlots,c.$slots=pt(n,i)),c.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return gt(e.scopedSlots,this.slots())}}),l&&(this.$options=u,this.$slots=this.slots(),this.$scopedSlots=gt(e.scopedSlots,this.$slots)),u._scopeId?this._c=function(e,t,n,o){var r=qt(s,e,t,n,o,d);return r&&!Array.isArray(r)&&(r.fnScopeId=u._scopeId,r.fnContext=i),r}:this._c=function(e,t,n,o){return qt(s,e,t,n,o,d)}}function Nt(e,t,n,o,i){var r=me(e);return r.fnContext=n,r.fnOptions=o,t.slot&&((r.data||(r.data={})).slot=t.slot),r}function Pt(e,t){for(var n in t)e[b(n)]=t[n]}Rt(wt.prototype);var Gt={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var n=e;Gt.prepatch(n,n)}else{var o=e.componentInstance=function(e,t){var n={_isComponent:!0,_parentVnode:e,parent:t},o=e.data.inlineTemplate;r(o)&&(n.render=o.render,n.staticRenderFns=o.staticRenderFns);return new e.componentOptions.Ctor(n)}(e,Xt);o.$mount(t?e.elm:void 0,t)}},prepatch:function(e,t){var n=t.componentOptions,i=t.componentInstance=e.componentInstance;(function(e,t,n,i,r){0;var a=i.data.scopedSlots,s=e.$scopedSlots,c=!!(a&&!a.$stable||s!==o&&!s.$stable||a&&e.$scopedSlots.$key!==a.$key),u=!!(r||e.$options._renderChildren||c);e.$options._parentVnode=i,e.$vnode=i,e._vnode&&(e._vnode.parent=i);if(e.$options._renderChildren=r,e.$attrs=i.data.attrs||o,e.$listeners=n||o,t&&e.$options.props){be(!1);for(var l=e._props,d=e.$options._propKeys||[],f=0;f<d.length;f++){var p=d[f],h=e.$options.props;l[p]=xe(p,h,t,e)}be(!0),e.$options.propsData=t}e._$updateProperties&&e._$updateProperties(e),n=n||o;var g=e.$options._parentListeners;e.$options._parentListeners=n,$t(e,n,g),u&&(e.$slots=pt(r,i.context),e.$forceUpdate());0})(i,n.propsData,n.listeners,t,n.children)},insert:function(e){var t=e.context,n=e.componentInstance;n._isMounted||(en(n,"onServiceCreated"),en(n,"onServiceAttached"),n._isMounted=!0,en(n,"mounted")),e.data.keepAlive&&(t._isMounted?function(e){e._inactive=!1,nn.push(e)}(n):Zt(n,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?function e(t,n){if(n&&(t._directInactive=!0,Qt(t)))return;if(!t._inactive){t._inactive=!0;for(var o=0;o<t.$children.length;o++)e(t.$children[o]);en(t,"deactivated")}}(t,!0):t.$destroy())}},Ut=Object.keys(Gt);function xt(e,t,n,s,u){if(!i(e)){var l=n.$options._base;if(c(e)&&(e=l.extend(e)),"function"===typeof e){var d;if(i(e.cid)&&(d=e,e=function(e,t){if(a(e.error)&&r(e.errorComp))return e.errorComp;if(r(e.resolved))return e.resolved;var n=Vt;n&&r(e.owners)&&-1===e.owners.indexOf(n)&&e.owners.push(n);if(a(e.loading)&&r(e.loadingComp))return e.loadingComp;if(n&&!r(e.owners)){var o=e.owners=[n],s=!0,u=null,l=null;n.$on("hook:destroyed",(function(){return m(o,n)}));var d=function(e){for(var t=0,n=o.length;t<n;t++)o[t].$forceUpdate();e&&(o.length=0,null!==u&&(clearTimeout(u),u=null),null!==l&&(clearTimeout(l),l=null))},f=G((function(n){e.resolved=Ht(n,t),s?o.length=0:d(!0)})),h=G((function(t){r(e.errorComp)&&(e.error=!0,d(!0))})),g=e(f,h);return c(g)&&(p(g)?i(e.resolved)&&g.then(f,h):p(g.component)&&(g.component.then(f,h),r(g.error)&&(e.errorComp=Ht(g.error,t)),r(g.loading)&&(e.loadingComp=Ht(g.loading,t),0===g.delay?e.loading=!0:u=setTimeout((function(){u=null,i(e.resolved)&&i(e.error)&&(e.loading=!0,d(!1))}),g.delay||200)),r(g.timeout)&&(l=setTimeout((function(){l=null,i(e.resolved)&&h(null)}),g.timeout)))),s=!1,e.loading?e.loadingComp:e.resolved}}(d,l),void 0===e))return function(e,t,n,o,i){var r=_e();return r.asyncFactory=e,r.asyncMeta={data:t,context:n,children:o,tag:i},r}(d,t,n,s,u);t=t||{},bn(e),r(t.model)&&function(e,t){var n=e.model&&e.model.prop||"value",o=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[n]=t.model.value;var i=t.on||(t.on={}),a=i[o],s=t.model.callback;r(a)?(Array.isArray(a)?-1===a.indexOf(s):a!==s)&&(i[o]=[s].concat(a)):i[o]=s}(e.options,t);var f=function(e,t,n,o){var a=t.options.props;if(i(a))return ct(e,t,{},o);var s={},c=e.attrs,u=e.props;if(r(c)||r(u))for(var l in a){var d=E(l);ut(s,u,l,d,!0)||ut(s,c,l,d,!1)}return ct(e,t,s,o)}(t,e,0,n);if(a(e.options.functional))return function(e,t,n,i,a){var s=e.options,c={},u=s.props;if(r(u))for(var l in u)c[l]=xe(l,u,t||o);else r(n.attrs)&&Pt(c,n.attrs),r(n.props)&&Pt(c,n.props);var d=new wt(n,c,a,i,e),f=s.render.call(null,d._c,d);if(f instanceof he)return Nt(f,n,d.parent,s,d);if(Array.isArray(f)){for(var p=lt(f)||[],h=new Array(p.length),g=0;g<p.length;g++)h[g]=Nt(p[g],n,d.parent,s,d);return h}}(e,f,t,n,s);var h=t.on;if(t.on=t.nativeOn,a(e.options.abstract)){var g=t.slot;t={},g&&(t.slot=g)}(function(e){for(var t=e.hook||(e.hook={}),n=0;n<Ut.length;n++){var o=Ut[n],i=t[o],r=Gt[o];i===r||i&&i._merged||(t[o]=i?Ft(r,i):r)}})(t);var _=e.options.name||u,v=new he("vue-component-"+e.cid+(_?"-"+_:""),t,void 0,void 0,void 0,n,{Ctor:e,propsData:f,listeners:h,tag:u,children:s},d);return v}}}function Ft(e,t){var n=function(n,o){e(n,o),t(n,o)};return n._merged=!0,n}function qt(e,t,n,o,u,l){return(Array.isArray(n)||s(n))&&(u=o,o=n,n=void 0),a(l)&&(u=2),function(e,t,n,o,s){if(r(n)&&r(n.__ob__))return _e();r(n)&&r(n.is)&&(t=n.is);if(!t)return _e();0;Array.isArray(o)&&"function"===typeof o[0]&&(n=n||{},n.scopedSlots={default:o[0]},o.length=0);2===s?o=lt(o):1===s&&(o=function(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}(o));var u,l;if("string"===typeof t){var d;l=e.$vnode&&e.$vnode.ns||F.getTagNamespace(t),u=F.isReservedTag(t)?new he(F.parsePlatformTagName(t),n,o,void 0,void 0,e):n&&n.pre||!r(d=Ue(e.$options,"components",t))?new he(t,n,o,void 0,void 0,e):xt(d,n,e,o,t)}else u=xt(t,n,e,o);return Array.isArray(u)?u:r(u)?(r(l)&&function e(t,n,o){t.ns=n,"foreignObject"===t.tag&&(n=void 0,o=!0);if(r(t.children))for(var s=0,c=t.children.length;s<c;s++){var u=t.children[s];r(u.tag)&&(i(u.ns)||a(o)&&"svg"!==u.tag)&&e(u,n,o)}}(u,l),r(n)&&function(e){c(e.style)&&ot(e.style);c(e.class)&&ot(e.class)}(n),u):_e()}(e,t,n,o,u)}var Bt,Vt=null;function Ht(e,t){return(e.__esModule||ce&&"Module"===e[Symbol.toStringTag])&&(e=e.default),c(e)?t.extend(e):e}function jt(e){return e.isComment&&e.asyncFactory}function Kt(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if(r(n)&&(r(n.componentOptions)||jt(n)))return n}}function Wt(e,t){Bt.$on(e,t)}function Yt(e,t){Bt.$off(e,t)}function zt(e,t){var n=Bt;return function o(){var i=t.apply(null,arguments);null!==i&&n.$off(e,o)}}function $t(e,t,n){Bt=e,at(t,n||{},Wt,Yt,zt,e),Bt=void 0}var Xt=null;function Jt(e){var t=Xt;return Xt=e,function(){Xt=t}}function Qt(e){while(e&&(e=e.$parent))if(e._inactive)return!0;return!1}function Zt(e,t){if(t){if(e._directInactive=!1,Qt(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)Zt(e.$children[n]);en(e,"activated")}}function en(e,t){fe();var n=e.$options[t],o=t+" hook";if(n)for(var i=0,r=n.length;i<r;i++)He(n[i],e,null,e,o);e._hasHookEvent&&e.$emit("hook:"+t),pe()}var tn=[],nn=[],on={},rn=!1,an=!1,sn=0;var cn=0,un=Date.now;if(W&&!X){var ln=window.performance;ln&&"function"===typeof ln.now&&un()>document.createEvent("Event").timeStamp&&(un=function(){return ln.now()})}function dn(){var e,t;for(cn=un(),an=!0,tn.sort((function(e,t){return e.id-t.id})),sn=0;sn<tn.length;sn++)e=tn[sn],e.before&&e.before(),t=e.id,on[t]=null,e.run();var n=nn.slice(),o=tn.slice();(function(){sn=tn.length=nn.length=0,on={},rn=an=!1})(),function(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,Zt(e[t],!0)}(n),function(e){var t=e.length;while(t--){var n=e[t],o=n.vm;o._watcher===n&&o._isMounted&&!o._isDestroyed&&en(o,"updated")}}(o),re&&F.devtools&&re.emit("flush")}var fn=0,pn=function(e,t,n,o,i){this.vm=e,i&&(e._watcher=this),e._watchers.push(this),o?(this.deep=!!o.deep,this.user=!!o.user,this.lazy=!!o.lazy,this.sync=!!o.sync,this.before=o.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++fn,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new se,this.newDepIds=new se,this.expression="","function"===typeof t?this.getter=t:(this.getter=function(e){if(!H.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}(t),this.getter||(this.getter=O)),this.value=this.lazy?void 0:this.get()};pn.prototype.get=function(){var e;fe(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(Ki){if(!this.user)throw Ki;Ve(Ki,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&ot(e),pe(),this.cleanupDeps()}return e},pn.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},pn.prototype.cleanupDeps=function(){var e=this.deps.length;while(e--){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},pn.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(e){var t=e.id;if(null==on[t]){if(on[t]=!0,an){var n=tn.length-1;while(n>sn&&tn[n].id>e.id)n--;tn.splice(n+1,0,e)}else tn.push(e);rn||(rn=!0,tt(dn))}}(this)},pn.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||c(e)||this.deep){var t=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,t)}catch(Ki){Ve(Ki,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,e,t)}}},pn.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},pn.prototype.depend=function(){var e=this.deps.length;while(e--)this.deps[e].depend()},pn.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||m(this.vm._watchers,this);var e=this.deps.length;while(e--)this.deps[e].removeSub(this);this.active=!1}};var hn={enumerable:!0,configurable:!0,get:O,set:O};function gn(e,t,n){hn.get=function(){return this[t][n]},hn.set=function(e){this[t][n]=e},Object.defineProperty(e,n,hn)}function _n(e){e._watchers=[];var t=e.$options;t.props&&function(e,t){var n=e.$options.propsData||{},o=e._props={},i=e.$options._propKeys=[],r=!e.$parent;r||be(!1);var a=function(r){i.push(r);var a=xe(r,t,n,e);Ee(o,r,a),r in e||gn(e,"_props",r)};for(var s in t)a(s);be(!0)}(e,t.props),t.methods&&function(e,t){e.$options.props;for(var n in t)e[n]="function"!==typeof t[n]?O:k(t[n],e)}(e,t.methods),t.data?function(e){var t=e.$options.data;t=e._data="function"===typeof t?function(e,t){fe();try{return e.call(t,t)}catch(Ki){return Ve(Ki,t,"data()"),{}}finally{pe()}}(t,e):t||{},l(t)||(t={});var n=Object.keys(t),o=e.$options.props,i=(e.$options.methods,n.length);while(i--){var r=n[i];0,o&&M(o,r)||B(r)||gn(e,"_data",r)}Se(t,!0)}(e):Se(e._data={},!0),t.computed&&function(e,t){var n=e._computedWatchers=Object.create(null),o=ie();for(var i in t){var r=t[i],a="function"===typeof r?r:r.get;0,o||(n[i]=new pn(e,a||O,O,vn)),i in e||mn(e,i,r)}}(e,t.computed),t.watch&&t.watch!==te&&function(e,t){for(var n in t){var o=t[n];if(Array.isArray(o))for(var i=0;i<o.length;i++)In(e,n,o[i]);else In(e,n,o)}}(e,t.watch)}var vn={lazy:!0};function mn(e,t,n){var o=!ie();"function"===typeof n?(hn.get=o?yn(t):Mn(n),hn.set=O):(hn.get=n.get?o&&!1!==n.cache?yn(t):Mn(n.get):O,hn.set=n.set||O),Object.defineProperty(e,t,hn)}function yn(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),de.SharedObject.target&&t.depend(),t.value}}function Mn(e){return function(){return e.call(this,this)}}function In(e,t,n,o){return l(n)&&(o=n,n=n.handler),"string"===typeof n&&(n=e[n]),e.$watch(t,n,o)}var Cn=0;function bn(e){var t=e.options;if(e.super){var n=bn(e.super),o=e.superOptions;if(n!==o){e.superOptions=n;var i=function(e){var t,n=e.options,o=e.sealedOptions;for(var i in n)n[i]!==o[i]&&(t||(t={}),t[i]=n[i]);return t}(e);i&&A(e.extendOptions,i),t=e.options=Ge(n,e.extendOptions),t.name&&(t.components[t.name]=e)}}return t}function Tn(e){this._init(e)}function Sn(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,o=n.cid,i=e._Ctor||(e._Ctor={});if(i[o])return i[o];var r=e.name||n.options.name;var a=function(e){this._init(e)};return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.cid=t++,a.options=Ge(n.options,e),a["super"]=n,a.options.props&&function(e){var t=e.options.props;for(var n in t)gn(e.prototype,"_props",n)}(a),a.options.computed&&function(e){var t=e.options.computed;for(var n in t)mn(e.prototype,n,t[n])}(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,U.forEach((function(e){a[e]=n[e]})),r&&(a.options.components[r]=a),a.superOptions=n.options,a.extendOptions=e,a.sealedOptions=A({},a.options),i[o]=a,a}}function En(e){return e&&(e.Ctor.options.name||e.tag)}function kn(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"===typeof e?e.split(",").indexOf(t)>-1:!!d(e)&&e.test(t)}function Dn(e,t){var n=e.cache,o=e.keys,i=e._vnode;for(var r in n){var a=n[r];if(a){var s=En(a.componentOptions);s&&!t(s)&&An(n,r,o,i)}}}function An(e,t,n,o){var i=e[t];!i||o&&i.tag===o.tag||i.componentInstance.$destroy(),e[t]=null,m(n,t)}(function(e){e.prototype._init=function(e){var t=this;t._uid=Cn++,t._isVue=!0,e&&e._isComponent?function(e,t){var n=e.$options=Object.create(e.constructor.options),o=t._parentVnode;n.parent=t.parent,n._parentVnode=o;var i=o.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}(t,e):t.$options=Ge(bn(t.constructor),e||{},t),t._renderProxy=t,t._self=t,function(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}(t),function(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&$t(e,t)}(t),function(e){e._vnode=null,e._staticTrees=null;var t=e.$options,n=e.$vnode=t._parentVnode,i=n&&n.context;e.$slots=pt(t._renderChildren,i),e.$scopedSlots=o,e._c=function(t,n,o,i){return qt(e,t,n,o,i,!1)},e.$createElement=function(t,n,o,i){return qt(e,t,n,o,i,!0)};var r=n&&n.data;Ee(e,"$attrs",r&&r.attrs||o,null,!0),Ee(e,"$listeners",t._parentListeners||o,null,!0)}(t),en(t,"beforeCreate"),!t._$fallback&&function(e){var t=ft(e.$options.inject,e);t&&(be(!1),Object.keys(t).forEach((function(n){Ee(e,n,t[n])})),be(!0))}(t),_n(t),!t._$fallback&&function(e){var t=e.$options.provide;t&&(e._provided="function"===typeof t?t.call(e):t)}(t),!t._$fallback&&en(t,"created"),t.$options.el&&t.$mount(t.$options.el)}})(Tn),function(e){var t={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=ke,e.prototype.$delete=De,e.prototype.$watch=function(e,t,n){if(l(t))return In(this,e,t,n);n=n||{},n.user=!0;var o=new pn(this,e,t,n);if(n.immediate)try{t.call(this,o.value)}catch(i){Ve(i,this,'callback for immediate watcher "'+o.expression+'"')}return function(){o.teardown()}}}(Tn),function(e){var t=/^hook:/;e.prototype.$on=function(e,n){var o=this;if(Array.isArray(e))for(var i=0,r=e.length;i<r;i++)o.$on(e[i],n);else(o._events[e]||(o._events[e]=[])).push(n),t.test(e)&&(o._hasHookEvent=!0);return o},e.prototype.$once=function(e,t){var n=this;function o(){n.$off(e,o),t.apply(n,arguments)}return o.fn=t,n.$on(e,o),n},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(e)){for(var o=0,i=e.length;o<i;o++)n.$off(e[o],t);return n}var r,a=n._events[e];if(!a)return n;if(!t)return n._events[e]=null,n;var s=a.length;while(s--)if(r=a[s],r===t||r.fn===t){a.splice(s,1);break}return n},e.prototype.$emit=function(e){var t=this,n=t._events[e];if(n){n=n.length>1?D(n):n;for(var o=D(arguments,1),i='event handler for "'+e+'"',r=0,a=n.length;r<a;r++)He(n[r],t,o,t,i)}return t}}(Tn),function(e){e.prototype._update=function(e,t){var n=this,o=n.$el,i=n._vnode,r=Jt(n);n._vnode=e,n.$el=i?n.__patch__(i,e):n.__patch__(n.$el,e,t,!1),r(),o&&(o.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},e.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){en(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||m(t.$children,e),e._watcher&&e._watcher.teardown();var n=e._watchers.length;while(n--)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),en(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}(Tn),function(e){Rt(e.prototype),e.prototype.$nextTick=function(e){return tt(e,this)},e.prototype._render=function(){var e,t=this,n=t.$options,o=n.render,i=n._parentVnode;i&&(t.$scopedSlots=gt(i.data.scopedSlots,t.$slots,t.$scopedSlots)),t.$vnode=i;try{Vt=t,e=o.call(t._renderProxy,t.$createElement)}catch(Ki){Ve(Ki,t,"render"),e=t._vnode}finally{Vt=null}return Array.isArray(e)&&1===e.length&&(e=e[0]),e instanceof he||(e=_e()),e.parent=i,e}}(Tn);var Ln=[String,RegExp,Array],On={name:"keep-alive",abstract:!0,props:{include:Ln,exclude:Ln,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)An(this.cache,e,this.keys)},mounted:function(){var e=this;this.$watch("include",(function(t){Dn(e,(function(e){return kn(t,e)}))})),this.$watch("exclude",(function(t){Dn(e,(function(e){return!kn(t,e)}))}))},render:function(){var e=this.$slots.default,t=Kt(e),n=t&&t.componentOptions;if(n){var o=En(n),i=this.include,r=this.exclude;if(i&&(!o||!kn(i,o))||r&&o&&kn(r,o))return t;var a=this.cache,s=this.keys,c=null==t.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):t.key;a[c]?(t.componentInstance=a[c].componentInstance,m(s,c),s.push(c)):(a[c]=t,s.push(c),this.max&&s.length>parseInt(this.max)&&An(a,s[0],s,this._vnode)),t.data.keepAlive=!0}return t||e&&e[0]}},Rn={KeepAlive:On};(function(e){var t={get:function(){return F}};Object.defineProperty(e,"config",t),e.util={warn:ue,extend:A,mergeOptions:Ge,defineReactive:Ee},e.set=ke,e.delete=De,e.nextTick=tt,e.observable=function(e){return Se(e),e},e.options=Object.create(null),U.forEach((function(t){e.options[t+"s"]=Object.create(null)})),e.options._base=e,A(e.options.components,Rn),function(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=D(arguments,1);return n.unshift(this),"function"===typeof e.install?e.install.apply(e,n):"function"===typeof e&&e.apply(null,n),t.push(e),this}}(e),function(e){e.mixin=function(e){return this.options=Ge(this.options,e),this}}(e),Sn(e),function(e){U.forEach((function(t){e[t]=function(e,n){return n?("component"===t&&l(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&"function"===typeof n&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}}))}(e)})(Tn),Object.defineProperty(Tn.prototype,"$isServer",{get:ie}),Object.defineProperty(Tn.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Tn,"FunctionalRenderContext",{value:wt}),Tn.version="2.6.11";var wn=_("style,class"),Nn=_("input,textarea,option,select,progress"),Pn=_("contenteditable,draggable,spellcheck"),Gn=_("events,caret,typing,plaintext-only"),Un=_("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),xn="http://www.w3.org/1999/xlink",Fn=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},qn=function(e){return Fn(e)?e.slice(6,e.length):""},Bn=function(e){return null==e||!1===e};function Vn(e){var t=e.data,n=e,o=e;while(r(o.componentInstance))o=o.componentInstance._vnode,o&&o.data&&(t=Hn(o.data,t));while(r(n=n.parent))n&&n.data&&(t=Hn(t,n.data));return function(e,t){if(r(e)||r(t))return jn(e,Kn(t));return""}(t.staticClass,t.class)}function Hn(e,t){return{staticClass:jn(e.staticClass,t.staticClass),class:r(e.class)?[e.class,t.class]:t.class}}function jn(e,t){return e?t?e+" "+t:e:t||""}function Kn(e){return Array.isArray(e)?function(e){for(var t,n="",o=0,i=e.length;o<i;o++)r(t=Kn(e[o]))&&""!==t&&(n&&(n+=" "),n+=t);return n}(e):c(e)?function(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}(e):"string"===typeof e?e:""}var Wn={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Yn=_("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),zn=_("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),$n=function(e){return Yn(e)||zn(e)};var Xn=Object.create(null);var Jn=_("text,number,password,search,email,tel,url");var Qn=Object.freeze({createElement:function(e,t){var n=document.createElement(e);return"select"!==e||t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n},createElementNS:function(e,t){return document.createElementNS(Wn[e],t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,n){e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){e.appendChild(t)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},setStyleScope:function(e,t){e.setAttribute(t,"")}}),Zn={create:function(e,t){eo(t)},update:function(e,t){e.data.ref!==t.data.ref&&(eo(e,!0),eo(t))},destroy:function(e){eo(e,!0)}};function eo(e,t){var n=e.data.ref;if(r(n)){var o=e.context,i=e.componentInstance||e.elm,a=o.$refs;t?Array.isArray(a[n])?m(a[n],i):a[n]===i&&(a[n]=void 0):e.data.refInFor?Array.isArray(a[n])?a[n].indexOf(i)<0&&a[n].push(i):a[n]=[i]:a[n]=i}}var to=new he("",{},[]),no=["create","activate","update","remove","destroy"];function oo(e,t){return e.key===t.key&&(e.tag===t.tag&&e.isComment===t.isComment&&r(e.data)===r(t.data)&&function(e,t){if("input"!==e.tag)return!0;var n,o=r(n=e.data)&&r(n=n.attrs)&&n.type,i=r(n=t.data)&&r(n=n.attrs)&&n.type;return o===i||Jn(o)&&Jn(i)}(e,t)||a(e.isAsyncPlaceholder)&&e.asyncFactory===t.asyncFactory&&i(t.asyncFactory.error))}function io(e,t,n){var o,i,a={};for(o=t;o<=n;++o)i=e[o].key,r(i)&&(a[i]=o);return a}var ro={create:ao,update:ao,destroy:function(e){ao(e,to)}};function ao(e,t){(e.data.directives||t.data.directives)&&function(e,t){var n,o,i,r=e===to,a=t===to,s=co(e.data.directives,e.context),c=co(t.data.directives,t.context),u=[],l=[];for(n in c)o=s[n],i=c[n],o?(i.oldValue=o.value,i.oldArg=o.arg,lo(i,"update",t,e),i.def&&i.def.componentUpdated&&l.push(i)):(lo(i,"bind",t,e),i.def&&i.def.inserted&&u.push(i));if(u.length){var d=function(){for(var n=0;n<u.length;n++)lo(u[n],"inserted",t,e)};r?st(t,"insert",d):d()}l.length&&st(t,"postpatch",(function(){for(var n=0;n<l.length;n++)lo(l[n],"componentUpdated",t,e)}));if(!r)for(n in s)c[n]||lo(s[n],"unbind",e,e,a)}(e,t)}var so=Object.create(null);function co(e,t){var n,o,i=Object.create(null);if(!e)return i;for(n=0;n<e.length;n++)o=e[n],o.modifiers||(o.modifiers=so),i[uo(o)]=o,o.def=Ue(t.$options,"directives",o.name);return i}function uo(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function lo(e,t,n,o,i){var r=e.def&&e.def[t];if(r)try{r(n.elm,e,n,o,i)}catch(Ki){Ve(Ki,n.context,"directive "+e.name+" "+t+" hook")}}var fo=[Zn,ro];function po(e,t){if(!i(e.data.wxsProps)||!i(t.data.wxsProps)){var n=e.$wxsWatches,o=Object.keys(t.data.wxsProps);if(n||o.length){n||(n={});var r=function(e,t){var n={};return Object.keys(e).forEach((function(o){t[o]&&(n[e[o]]=t[o],delete t[o])})),n}(t.data.wxsProps,t.data.attrs),a=t.context;t.$wxsWatches={},Object.keys(r).forEach((function(e){var o=e;t.context.wxsProps&&(o="wxsProps."+e),t.$wxsWatches[e]=n[e]||t.context.$watch(o,(function(n,o){var i=t.elm.__vue__||t.elm;r[e](n,o,a.$getComponentDescriptor(a,!0),i.$getComponentDescriptor&&i.$getComponentDescriptor(i,!1))}),{immediate:!0,deep:!0})})),Object.keys(n).forEach((function(e){t.$wxsWatches[e]||(n[e](),delete n[e])}))}}}var ho={create:po,update:po};function go(e,t){var n=t.componentOptions;if((!r(n)||!1!==n.Ctor.options.inheritAttrs)&&(!i(e.data.attrs)||!i(t.data.attrs))){var o,a,s,c=t.elm,u=e.data.attrs||{},l=t.data.attrs||{};for(o in r(l.__ob__)&&(l=t.data.attrs=A({},l)),l)a=l[o],s=u[o],s!==a&&_o(c,o,a);for(o in(X||Q)&&l.value!==u.value&&_o(c,"value",l.value),u)i(l[o])&&(Fn(o)?c.removeAttributeNS(xn,qn(o)):Pn(o)||c.removeAttribute(o))}}function _o(e,t,n){e.tagName.indexOf("-")>-1?vo(e,t,n):Un(t)?Bn(n)?e.removeAttribute(t):(n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,n)):Pn(t)?e.setAttribute(t,function(e,t){return Bn(t)||"false"===t?"false":"contenteditable"===e&&Gn(t)?t:"true"}(t,n)):Fn(t)?Bn(n)?e.removeAttributeNS(xn,qn(t)):e.setAttributeNS(xn,t,n):vo(e,t,n)}function vo(e,t,n){if(Bn(n))e.removeAttribute(t);else{if(X&&!J&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==n&&!e.__ieph){var o=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",o)};e.addEventListener("input",o),e.__ieph=!0}e.setAttribute(t,n)}}var mo={create:go,update:go};function yo(e,t){var n=t.elm,o=t.data,a=e.data;if(!(i(o.staticClass)&&i(o.class)&&(i(a)||i(a.staticClass)&&i(a.class))&&i(n.__wxsAddClass)&&i(n.__wxsRemoveClass))){var s=Vn(t),c=n._transitionClasses;if(r(c)&&(s=jn(s,Kn(c))),Array.isArray(n.__wxsRemoveClass)&&n.__wxsRemoveClass.length){var u=s.split(/\s+/);n.__wxsRemoveClass.forEach((function(e){var t=u.findIndex((function(t){return t===e}));-1!==t&&u.splice(t,1)})),s=u.join(" "),n.__wxsRemoveClass.length=0}if(n.__wxsAddClass){var l=s.split(/\s+/).concat(n.__wxsAddClass.split(/\s+/)),d=Object.create(null);l.forEach((function(e){e&&(d[e]=1)})),s=Object.keys(d).join(" ")}var f=t.context,p=f.$options.mpOptions&&f.$options.mpOptions.externalClasses;Array.isArray(p)&&p.forEach((function(e){var t=f[b(e)];t&&(s=s.replace(e,t))})),s!==n._prevClass&&(n.setAttribute("class",s),n._prevClass=s)}}var Mo,Io={create:yo,update:yo};function Co(e,t,n){var o=Mo;return function i(){var r=t.apply(null,arguments);null!==r&&So(e,i,n,o)}}var bo=Ye&&!(ee&&Number(ee[1])<=53);function To(e,t,n,o){if(bo){var i=cn,r=t;t=r._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=i||e.timeStamp<=0||e.target.ownerDocument!==document)return r.apply(this,arguments)}}Mo.addEventListener(e,t,ne?{capture:n,passive:o}:n)}function So(e,t,n,o){(o||Mo).removeEventListener(e,t._wrapper||t,n)}function Eo(e,t){if(!i(e.data.on)||!i(t.data.on)){var n=t.data.on||{},o=e.data.on||{};Mo=t.elm,function(e){if(r(e["__r"])){var t=X?"change":"input";e[t]=[].concat(e["__r"],e[t]||[]),delete e["__r"]}r(e["__c"])&&(e.change=[].concat(e["__c"],e.change||[]),delete e["__c"])}(n),at(n,o,To,So,Co,t.context),Mo=void 0}}var ko,Do={create:Eo,update:Eo};function Ao(e,t){if(!i(e.data.domProps)||!i(t.data.domProps)){var n,o,a=t.elm,s=e.data.domProps||{},c=t.data.domProps||{};for(n in r(c.__ob__)&&(c=t.data.domProps=A({},c)),s)n in c||(a[n]="");for(n in c){if(o=c[n],"textContent"===n||"innerHTML"===n){if(t.children&&(t.children.length=0),o===s[n])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===n&&"PROGRESS"!==a.tagName){a._value=o;var u=i(o)?"":String(o);Lo(a,u)&&(a.value=u)}else if("innerHTML"===n&&zn(a.tagName)&&i(a.innerHTML)){ko=ko||document.createElement("div"),ko.innerHTML="<svg>"+o+"</svg>";var l=ko.firstChild;while(a.firstChild)a.removeChild(a.firstChild);while(l.firstChild)a.appendChild(l.firstChild)}else if(o!==s[n])try{a[n]=o}catch(Ki){}}}}function Lo(e,t){return!e.composing&&("OPTION"===e.tagName||function(e,t){var n=!0;try{n=document.activeElement!==e}catch(Ki){}return n&&e.value!==t}(e,t)||function(e,t){var n=e.value,o=e._vModifiers;if(r(o)){if(o.number)return g(n)!==g(t);if(o.trim)return n.trim()!==t.trim()}return n!==t}(e,t))}var Oo={create:Ao,update:Ao},Ro=I((function(e){var t={},n=/:(.+)/;return e.split(/;(?![^(]*\))/g).forEach((function(e){if(e){var o=e.split(n);o.length>1&&(t[o[0].trim()]=o[1].trim())}})),t}));function wo(e){var t=No(e.style);return e.staticStyle?A(e.staticStyle,t):t}function No(e){return Array.isArray(e)?L(e):"string"===typeof e?Ro(e):e}var Po,Go=/^--/,Uo=/\s*!important$/,xo=/\b([+-]?\d+(\.\d+)?)[r|u]px\b/g,Fo=function(e){return"string"===typeof e?e.replace(xo,(function(e,t){return uni.upx2px(t)+"px"})):e},qo=/url\(\s*['"](.+?\.(jpg|gif|png))['"]\s*\)/,Bo=/url\(\s*([a-zA-Z0-9\.\-\_\/]+?\.(jpg|gif|png))\s*\)/,Vo=function(e,t,n,o){if(o&&o._$getRealPath&&n&&(n=function(e,t){if("string"===typeof e&&-1!==e.indexOf("url(")){var n=e.match(qo)||e.match(Bo);n&&3===n.length&&(e=e.replace(n[1],t._$getRealPath(n[1])))}return e}(n,o)),Go.test(t))e.style.setProperty(t,n);else if(Uo.test(n))e.style.setProperty(E(t),n.replace(Uo,""),"important");else{var i=jo(t);if(Array.isArray(n))for(var r=0,a=n.length;r<a;r++)e.style[i]=Fo(n[r]);else e.style[i]=Fo(n)}},Ho=["Webkit","Moz","ms"],jo=I((function(e){if(Po=Po||document.createElement("div").style,e=b(e),"filter"!==e&&e in Po)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<Ho.length;n++){var o=Ho[n]+t;if(o in Po)return o}}));function Ko(e,t){var n=t.data,o=e.data,a=t.elm;if(!(i(n.staticStyle)&&i(n.style)&&i(o.staticStyle)&&i(o.style)&&i(a.__wxsStyle))){var s,c,u=o.staticStyle,l=o.normalizedStyle||o.style||{},d=u||l,f=No(t.data.style)||{};t.data.normalizedStyle=r(f.__ob__)?A({},f):f;var p=function(e,t){var n,o={};if(t){var i=e;while(i.componentInstance)i=i.componentInstance._vnode,i&&i.data&&(n=wo(i.data))&&A(o,n)}(n=wo(e.data))&&A(o,n);var r=e;while(r=r.parent)r.data&&(n=wo(r.data))&&A(o,n);return o}(t,!0);for(c in a.__wxsStyle&&(Object.assign(t.data.normalizedStyle,a.__wxsStyle),Object.assign(p,a.__wxsStyle)),d)i(p[c])&&Vo(a,c,"");for(c in p)s=p[c],s!==d[c]&&Vo(a,c,null==s?"":s,t.context)}}var Wo={create:Ko,update:Ko},Yo=/\s+/;function zo(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(Yo).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var n=" "+(e.getAttribute("class")||"")+" ";n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function $o(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(Yo).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{var n=" "+(e.getAttribute("class")||"")+" ",o=" "+t+" ";while(n.indexOf(o)>=0)n=n.replace(o," ");n=n.trim(),n?e.setAttribute("class",n):e.removeAttribute("class")}}function Xo(e){if(e){if("object"===typeof e){var t={};return!1!==e.css&&A(t,Jo(e.name||"v")),A(t,e),t}return"string"===typeof e?Jo(e):void 0}}var Jo=I((function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}})),Qo=W&&!J,Zo="transition",ei="transitionend",ti="animation",ni="animationend";Qo&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Zo="WebkitTransition",ei="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(ti="WebkitAnimation",ni="webkitAnimationEnd"));var oi=W?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function ii(e){oi((function(){oi(e)}))}function ri(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),zo(e,t))}function ai(e,t){e._transitionClasses&&m(e._transitionClasses,t),$o(e,t)}function si(e,t,n){var o=ui(e,t),i=o.type,r=o.timeout,a=o.propCount;if(!i)return n();var s="transition"===i?ei:ni,c=0,u=function(){e.removeEventListener(s,l),n()},l=function(t){t.target===e&&++c>=a&&u()};setTimeout((function(){c<a&&u()}),r+1),e.addEventListener(s,l)}var ci=/\b(transform|all)(,|$)/;function ui(e,t){var n,o=window.getComputedStyle(e),i=(o[Zo+"Delay"]||"").split(", "),r=(o[Zo+"Duration"]||"").split(", "),a=li(i,r),s=(o[ti+"Delay"]||"").split(", "),c=(o[ti+"Duration"]||"").split(", "),u=li(s,c),l=0,d=0;"transition"===t?a>0&&(n="transition",l=a,d=r.length):"animation"===t?u>0&&(n="animation",l=u,d=c.length):(l=Math.max(a,u),n=l>0?a>u?"transition":"animation":null,d=n?"transition"===n?r.length:c.length:0);var f="transition"===n&&ci.test(o[Zo+"Property"]);return{type:n,timeout:l,propCount:d,hasTransform:f}}function li(e,t){while(e.length<t.length)e=e.concat(e);return Math.max.apply(null,t.map((function(t,n){return di(t)+di(e[n])})))}function di(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function fi(e,t){var n=e.elm;r(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var o=Xo(e.data.transition);if(!i(o)&&!r(n._enterCb)&&1===n.nodeType){var a=o.css,s=o.type,u=o.enterClass,l=o.enterToClass,d=o.enterActiveClass,f=o.appearClass,p=o.appearToClass,h=o.appearActiveClass,_=o.beforeEnter,v=o.enter,m=o.afterEnter,y=o.enterCancelled,M=o.beforeAppear,I=o.appear,C=o.afterAppear,b=o.appearCancelled,T=o.duration,S=Xt,E=Xt.$vnode;while(E&&E.parent)S=E.context,E=E.parent;var k=!S._isMounted||!e.isRootInsert;if(!k||I||""===I){var D=k&&f?f:u,A=k&&h?h:d,L=k&&p?p:l,O=k&&M||_,R=k&&"function"===typeof I?I:v,w=k&&C||m,N=k&&b||y,P=g(c(T)?T.enter:T);0;var U=!1!==a&&!J,x=gi(R),F=n._enterCb=G((function(){U&&(ai(n,L),ai(n,A)),F.cancelled?(U&&ai(n,D),N&&N(n)):w&&w(n),n._enterCb=null}));e.data.show||st(e,"insert",(function(){var t=n.parentNode,o=t&&t._pending&&t._pending[e.key];o&&o.tag===e.tag&&o.elm._leaveCb&&o.elm._leaveCb(),R&&R(n,F)})),O&&O(n),U&&(ri(n,D),ri(n,A),ii((function(){ai(n,D),F.cancelled||(ri(n,L),x||(hi(P)?setTimeout(F,P):si(n,s,F)))}))),e.data.show&&(t&&t(),R&&R(n,F)),U||x||F()}}}function pi(e,t){var n=e.elm;r(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var o=Xo(e.data.transition);if(i(o)||1!==n.nodeType)return t();if(!r(n._leaveCb)){var a=o.css,s=o.type,u=o.leaveClass,l=o.leaveToClass,d=o.leaveActiveClass,f=o.beforeLeave,p=o.leave,h=o.afterLeave,_=o.leaveCancelled,v=o.delayLeave,m=o.duration,y=!1!==a&&!J,M=gi(p),I=g(c(m)?m.leave:m);0;var C=n._leaveCb=G((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[e.key]=null),y&&(ai(n,l),ai(n,d)),C.cancelled?(y&&ai(n,u),_&&_(n)):(t(),h&&h(n)),n._leaveCb=null}));v?v(b):b()}function b(){C.cancelled||(!e.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[e.key]=e),f&&f(n),y&&(ri(n,u),ri(n,d),ii((function(){ai(n,u),C.cancelled||(ri(n,l),M||(hi(I)?setTimeout(C,I):si(n,s,C)))}))),p&&p(n,C),y||M||C())}}function hi(e){return"number"===typeof e&&!isNaN(e)}function gi(e){if(i(e))return!1;var t=e.fns;return r(t)?gi(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function _i(e,t){!0!==t.data.show&&fi(t)}var vi=W?{create:_i,activate:_i,remove:function(e,t){!0!==e.data.show?pi(e,t):t()}}:{},mi=[ho,mo,Io,Do,Oo,Wo,vi],yi=mi.concat(fo),Mi=function(e){var t,n,o={},c=e.modules,u=e.nodeOps;for(t=0;t<no.length;++t)for(o[no[t]]=[],n=0;n<c.length;++n)r(c[n][no[t]])&&o[no[t]].push(c[n][no[t]]);function l(e){var t=u.parentNode(e);r(t)&&u.removeChild(t,e)}function d(e,t,n,i,s,c,l){if(r(e.elm)&&r(c)&&(e=c[l]=me(e)),e.isRootInsert=!s,!function(e,t,n,i){var s=e.data;if(r(s)){var c=r(e.componentInstance)&&s.keepAlive;if(r(s=s.hook)&&r(s=s.init)&&s(e,!1),r(e.componentInstance))return f(e,t),p(n,e.elm,i),a(c)&&function(e,t,n,i){var a,s=e;while(s.componentInstance)if(s=s.componentInstance._vnode,r(a=s.data)&&r(a=a.transition)){for(a=0;a<o.activate.length;++a)o.activate[a](to,s);t.push(s);break}p(n,e.elm,i)}(e,t,n,i),!0}}(e,t,n,i)){var d=e.data,g=e.children,_=e.tag;r(_)?(e.elm=e.ns?u.createElementNS(e.ns,_):u.createElement(_,e),m(e),h(e,g,t),r(d)&&v(e,t),p(n,e.elm,i)):a(e.isComment)?(e.elm=u.createComment(e.text),p(n,e.elm,i)):(e.elm=u.createTextNode(e.text),p(n,e.elm,i))}}function f(e,t){r(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,g(e)?(v(e,t),m(e)):(eo(e),t.push(e))}function p(e,t,n){r(e)&&(r(n)?u.parentNode(n)===e&&u.insertBefore(e,t,n):u.appendChild(e,t))}function h(e,t,n){if(Array.isArray(t)){0;for(var o=0;o<t.length;++o)d(t[o],n,e.elm,null,!0,t,o)}else s(e.text)&&u.appendChild(e.elm,u.createTextNode(String(e.text)))}function g(e){while(e.componentInstance)e=e.componentInstance._vnode;return r(e.tag)}function v(e,n){for(var i=0;i<o.create.length;++i)o.create[i](to,e);t=e.data.hook,r(t)&&(r(t.create)&&t.create(to,e),r(t.insert)&&n.push(e))}function m(e){var t;if(r(t=e.fnScopeId))u.setStyleScope(e.elm,t);else{var n=e;while(n)r(t=n.context)&&r(t=t.$options._scopeId)&&u.setStyleScope(e.elm,t),n=n.parent}r(t=Xt)&&t!==e.context&&t!==e.fnContext&&r(t=t.$options._scopeId)&&!Xt._vnode.elm.__uniDataset&&u.setStyleScope(e.elm,t)}function y(e,t,n,o,i,r){for(;o<=i;++o)d(n[o],r,e,t,!1,n,o)}function M(e){var t,n,i=e.data;if(r(i))for(r(t=i.hook)&&r(t=t.destroy)&&t(e),t=0;t<o.destroy.length;++t)o.destroy[t](e);if(r(t=e.children))for(n=0;n<e.children.length;++n)M(e.children[n])}function I(e,t,n){for(;t<=n;++t){var o=e[t];r(o)&&(r(o.tag)?(C(o),M(o)):l(o.elm))}}function C(e,t){if(r(t)||r(e.data)){var n,i=o.remove.length+1;for(r(t)?t.listeners+=i:t=function(e,t){function n(){0===--n.listeners&&l(e)}return n.listeners=t,n}(e.elm,i),r(n=e.componentInstance)&&r(n=n._vnode)&&r(n.data)&&C(n,t),n=0;n<o.remove.length;++n)o.remove[n](e,t);r(n=e.data.hook)&&r(n=n.remove)?n(e,t):t()}else l(e.elm)}function b(e,t,n,o){for(var i=n;i<o;i++){var a=t[i];if(r(a)&&oo(e,a))return i}}function T(e,t,n,s,c,l){if(e!==t){r(t.elm)&&r(s)&&(t=s[c]=me(t));var f=t.elm=e.elm;if(a(e.isAsyncPlaceholder))r(t.asyncFactory.resolved)?k(e.elm,t,n):t.isAsyncPlaceholder=!0;else if(a(t.isStatic)&&a(e.isStatic)&&t.key===e.key&&(a(t.isCloned)||a(t.isOnce)))t.componentInstance=e.componentInstance;else{var p,h=t.data;r(h)&&r(p=h.hook)&&r(p=p.prepatch)&&p(e,t);var _=e.children,v=t.children;if(r(h)&&g(t)){for(p=0;p<o.update.length;++p)o.update[p](e,t);r(p=h.hook)&&r(p=p.update)&&p(e,t)}i(t.text)?r(_)&&r(v)?_!==v&&function(e,t,n,o,a){var s,c,l,f,p=0,h=0,g=t.length-1,_=t[0],v=t[g],m=n.length-1,M=n[0],C=n[m],S=!a;while(p<=g&&h<=m)i(_)?_=t[++p]:i(v)?v=t[--g]:oo(_,M)?(T(_,M,o,n,h),_=t[++p],M=n[++h]):oo(v,C)?(T(v,C,o,n,m),v=t[--g],C=n[--m]):oo(_,C)?(T(_,C,o,n,m),S&&u.insertBefore(e,_.elm,u.nextSibling(v.elm)),_=t[++p],C=n[--m]):oo(v,M)?(T(v,M,o,n,h),S&&u.insertBefore(e,v.elm,_.elm),v=t[--g],M=n[++h]):(i(s)&&(s=io(t,p,g)),c=r(M.key)?s[M.key]:b(M,t,p,g),i(c)?d(M,o,e,_.elm,!1,n,h):(l=t[c],oo(l,M)?(T(l,M,o,n,h),t[c]=void 0,S&&u.insertBefore(e,l.elm,_.elm)):d(M,o,e,_.elm,!1,n,h)),M=n[++h]);p>g?(f=i(n[m+1])?null:n[m+1].elm,y(e,f,n,h,m,o)):h>m&&I(t,p,g)}(f,_,v,n,l):r(v)?(r(e.text)&&u.setTextContent(f,""),y(f,null,v,0,v.length-1,n)):r(_)?I(_,0,_.length-1):r(e.text)&&u.setTextContent(f,""):e.text!==t.text&&u.setTextContent(f,t.text),r(h)&&r(p=h.hook)&&r(p=p.postpatch)&&p(e,t)}}}function S(e,t,n){if(a(n)&&r(e.parent))e.parent.data.pendingInsert=t;else for(var o=0;o<t.length;++o)t[o].data.hook.insert(t[o])}var E=_("attrs,class,staticClass,staticStyle,key");function k(e,t,n,o){var i,s=t.tag,c=t.data,u=t.children;if(o=o||c&&c.pre,t.elm=e,a(t.isComment)&&r(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(r(c)&&(r(i=c.hook)&&r(i=i.init)&&i(t,!0),r(i=t.componentInstance)))return f(t,n),!0;if(r(s)){if(r(u))if(e.hasChildNodes())if(r(i=c)&&r(i=i.domProps)&&r(i=i.innerHTML)){if(i!==e.innerHTML)return!1}else{for(var l=!0,d=e.firstChild,p=0;p<u.length;p++){if(!d||!k(d,u[p],n,o)){l=!1;break}d=d.nextSibling}if(!l||d)return!1}else h(t,u,n);if(r(c)){var g=!1;for(var _ in c)if(!E(_)){g=!0,v(t,n);break}!g&&c["class"]&&ot(c["class"])}}else e.data!==t.text&&(e.data=t.text);return!0}return function(e,t,n,s){if(!i(t)){var c=!1,l=[];if(i(e))c=!0,d(t,l);else{var f=r(e.nodeType);if(!f&&oo(e,t))T(e,t,l,null,null,s);else{if(f){if(1===e.nodeType&&e.hasAttribute("data-server-rendered")&&(e.removeAttribute("data-server-rendered"),n=!0),a(n)&&k(e,t,l))return S(t,l,!0),e;e=function(e){return new he(u.tagName(e).toLowerCase(),{},[],void 0,e)}(e)}var p=e.elm,h=u.parentNode(p);if(d(t,l,p._leaveCb?null:h,u.nextSibling(p)),r(t.parent)){var _=t.parent,v=g(t);while(_){for(var m=0;m<o.destroy.length;++m)o.destroy[m](_);if(_.elm=t.elm,v){for(var y=0;y<o.create.length;++y)o.create[y](to,_);var C=_.data.hook.insert;if(C.merged)for(var b=1;b<C.fns.length;b++)C.fns[b]()}else eo(_);_=_.parent}}r(h)?I([e],0,0):r(e.tag)&&M(e)}}return S(t,l,c),t.elm}r(e)&&M(e)}}({nodeOps:Qn,modules:yi});J&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&Di(e,"input")}));var Ii={inserted:function(e,t,n,o){"select"===n.tag?(o.elm&&!o.elm._vOptions?st(n,"postpatch",(function(){Ii.componentUpdated(e,t,n)})):Ci(e,t,n.context),e._vOptions=[].map.call(e.options,Si)):("textarea"===n.tag||Jn(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",Ei),e.addEventListener("compositionend",ki),e.addEventListener("change",ki),J&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if("select"===n.tag){Ci(e,t,n.context);var o=e._vOptions,i=e._vOptions=[].map.call(e.options,Si);if(i.some((function(e,t){return!N(e,o[t])}))){var r=e.multiple?t.value.some((function(e){return Ti(e,i)})):t.value!==t.oldValue&&Ti(t.value,i);r&&Di(e,"change")}}}};function Ci(e,t,n){bi(e,t,n),(X||Q)&&setTimeout((function(){bi(e,t,n)}),0)}function bi(e,t,n){var o=t.value,i=e.multiple;if(!i||Array.isArray(o)){for(var r,a,s=0,c=e.options.length;s<c;s++)if(a=e.options[s],i)r=P(o,Si(a))>-1,a.selected!==r&&(a.selected=r);else if(N(Si(a),o))return void(e.selectedIndex!==s&&(e.selectedIndex=s));i||(e.selectedIndex=-1)}}function Ti(e,t){return t.every((function(t){return!N(t,e)}))}function Si(e){return"_value"in e?e._value:e.value}function Ei(e){e.target.composing=!0}function ki(e){e.target.composing&&(e.target.composing=!1,Di(e.target,"input"))}function Di(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function Ai(e){return!e.componentInstance||e.data&&e.data.transition?e:Ai(e.componentInstance._vnode)}var Li={bind:function(e,t,n){var o=t.value;n=Ai(n);var i=n.data&&n.data.transition,r=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;o&&i?(n.data.show=!0,fi(n,(function(){e.style.display=r}))):e.style.display=o?r:"none"},update:function(e,t,n){var o=t.value,i=t.oldValue;if(!o!==!i){n=Ai(n);var r=n.data&&n.data.transition;r?(n.data.show=!0,o?fi(n,(function(){e.style.display=e.__vOriginalDisplay})):pi(n,(function(){e.style.display="none"}))):e.style.display=o?e.__vOriginalDisplay:"none"}},unbind:function(e,t,n,o,i){i||(e.style.display=e.__vOriginalDisplay)}},Oi={model:Ii,show:Li},Ri={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function wi(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?wi(Kt(t.children)):e}function Ni(e){var t={},n=e.$options;for(var o in n.propsData)t[o]=e[o];var i=n._parentListeners;for(var r in i)t[b(r)]=i[r];return t}function Pi(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}var Gi=function(e){return e.tag||jt(e)},Ui=function(e){return"show"===e.name},xi={name:"transition",props:Ri,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(Gi),n.length)){0;var o=this.mode;0;var i=n[0];if(function(e){while(e=e.parent)if(e.data.transition)return!0}(this.$vnode))return i;var r=wi(i);if(!r)return i;if(this._leaving)return Pi(e,i);var a="__transition-"+this._uid+"-";r.key=null==r.key?r.isComment?a+"comment":a+r.tag:s(r.key)?0===String(r.key).indexOf(a)?r.key:a+r.key:r.key;var c=(r.data||(r.data={})).transition=Ni(this),u=this._vnode,l=wi(u);if(r.data.directives&&r.data.directives.some(Ui)&&(r.data.show=!0),l&&l.data&&!function(e,t){return t.key===e.key&&t.tag===e.tag}(r,l)&&!jt(l)&&(!l.componentInstance||!l.componentInstance._vnode.isComment)){var d=l.data.transition=A({},c);if("out-in"===o)return this._leaving=!0,st(d,"afterLeave",(function(){t._leaving=!1,t.$forceUpdate()})),Pi(e,i);if("in-out"===o){if(jt(r))return u;var f,p=function(){f()};st(c,"afterEnter",p),st(c,"enterCancelled",p),st(d,"delayLeave",(function(e){f=e}))}}return i}}},Fi=A({tag:String,moveClass:String},Ri);delete Fi.mode;var qi={props:Fi,beforeMount:function(){var e=this,t=this._update;this._update=function(n,o){var i=Jt(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,i(),t.call(e,n,o)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),o=this.prevChildren=this.children,i=this.$slots.default||[],r=this.children=[],a=Ni(this),s=0;s<i.length;s++){var c=i[s];if(c.tag)if(null!=c.key&&0!==String(c.key).indexOf("__vlist"))r.push(c),n[c.key]=c,(c.data||(c.data={})).transition=a;else;}if(o){for(var u=[],l=[],d=0;d<o.length;d++){var f=o[d];f.data.transition=a,f.data.pos=f.elm.getBoundingClientRect(),n[f.key]?u.push(f):l.push(f)}this.kept=e(t,null,u),this.removed=l}return e(t,null,r)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(Bi),e.forEach(Vi),e.forEach(Hi),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var n=e.elm,o=n.style;ri(n,t),o.transform=o.WebkitTransform=o.transitionDuration="",n.addEventListener(ei,n._moveCb=function e(o){o&&o.target!==n||o&&!/transform$/.test(o.propertyName)||(n.removeEventListener(ei,e),n._moveCb=null,ai(n,t))})}})))},methods:{hasMove:function(e,t){if(!Qo)return!1;if(this._hasMove)return this._hasMove;var n=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){$o(n,e)})),zo(n,t),n.style.display="none",this.$el.appendChild(n);var o=ui(n);return this.$el.removeChild(n),this._hasMove=o.hasTransform}}};function Bi(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function Vi(e){e.data.newPos=e.elm.getBoundingClientRect()}function Hi(e){var t=e.data.pos,n=e.data.newPos,o=t.left-n.left,i=t.top-n.top;if(o||i){e.data.moved=!0;var r=e.elm.style;r.transform=r.WebkitTransform="translate("+o+"px,"+i+"px)",r.transitionDuration="0s"}}var ji={Transition:xi,TransitionGroup:qi};Tn.config.mustUseProp=function(e,t,n){return"value"===n&&Nn(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},Tn.config.isReservedTag=$n,Tn.config.isReservedAttr=wn,Tn.config.getTagNamespace=function(e){return zn(e)?"svg":"math"===e?"math":void 0},Tn.config.isUnknownElement=function(e){if(!W)return!0;if($n(e))return!1;if(e=e.toLowerCase(),null!=Xn[e])return Xn[e];var t=document.createElement(e);return e.indexOf("-")>-1?Xn[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:Xn[e]=/HTMLUnknownElement/.test(t.toString())},A(Tn.options.directives,Oi),A(Tn.options.components,ji),Tn.prototype.__patch__=W?Mi:O,Tn.prototype.__call_hook=function(e,t){var n=this;fe();var o,i=n.$options[e],r=e+" hook";if(i)for(var a=0,s=i.length;a<s;a++)o=He(i[a],n,t?[t]:null,n,r);return n._hasHookEvent&&n.$emit("hook:"+e,t),pe(),o},Tn.prototype.$mount=function(e,t){return e=e&&W?function(e){if("string"===typeof e){var t=document.querySelector(e);return t||document.createElement("div")}return e}(e):void 0,function(e,t,n){var o;return e.$el=t,e.$options.render||(e.$options.render=_e),en(e,"beforeMount"),o=function(){e._update(e._render(),n)},new pn(e,o,O,{before:function(){e._isMounted&&!e._isDestroyed&&en(e,"beforeUpdate")}},!0),n=!1,null==e.$vnode&&(en(e,"onServiceCreated"),en(e,"onServiceAttached"),e._isMounted=!0,en(e,"mounted")),e}(this,e,t)},W&&setTimeout((function(){F.devtools&&re&&re.emit("init",Tn)}),0),t["default"]=Tn}.call(this,n("0ee4"),n("ba7c")["default"])},"9b8f":function(e,t,n){var o=n("77b2"),i=TypeError;e.exports=function(e,t){if(o(t,e))return e;throw i("Incorrect invocation")}},"9b8fb":function(e,t){e.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},"9c27":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={image:{jpg:"jpeg",jpe:"jpeg",pbm:"x-portable-bitmap",pgm:"x-portable-graymap",pnm:"x-portable-anymap",ppm:"x-portable-pixmap",psd:"vnd.adobe.photoshop",pic:"x-pict",rgb:"x-rgb",svg:"svg+xml",svgz:"svg+xml",tif:"tiff",xif:"vnd.xiff",wbmp:"vnd.wap.wbmp",wdp:"vnd.ms-photo",xbm:"x-xbitmap",ico:"x-icon"},video:{"3g2":"3gpp2","3gp":"3gpp",avi:"x-msvideo",f4v:"x-f4v",flv:"x-flv",jpgm:"jpm",jpgv:"jpeg",m1v:"mpeg",m2v:"mpeg",mpe:"mpeg",mpg:"mpeg",mpg4:"mpeg",m4v:"x-m4v",mkv:"x-matroska",mov:"quicktime",qt:"quicktime",movie:"x-sgi-movie",mp4v:"mp4",ogv:"ogg",smv:"x-smv",wm:"x-ms-wm",wmv:"x-ms-wmv",wmx:"x-ms-wmx",wvx:"x-ms-wvx"}}},"9c40":function(e,t,n){"use strict";n.r(t);var o=n("1d13"),i=n("babd");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a=n("828b"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},"9c4e":function(e,t,n){"use strict";var o=n("ab4a"),i=n("edb7").MISSED_STICKY,r=n("ada5"),a=n("e4ca"),s=n("235c").get,c=RegExp.prototype,u=TypeError;o&&i&&a(c,"sticky",{configurable:!0,get:function(){if(this!==c){if("RegExp"===r(this))return!!s(this).sticky;throw new u("Incompatible receiver, RegExp required")}}})},"9ce6":function(e,t,n){var o,i,r,a=n("bdbb").default;(function(s,c){"object"===a(t)?e.exports=t=c(n("5e74")):(i=[n("5e74")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))})(0,(function(e){
/** @preserve
  (c) 2012 by Cédric Mesnil. All rights reserved.
  	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
  	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
      - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
  	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  */
return function(t){var n=e,o=n.lib,i=o.WordArray,r=o.Hasher,a=n.algo,s=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=i.create([0,1518500249,1859775393,2400959708,2840853838]),f=i.create([1352829926,1548603684,1836072691,2053994217,0]),p=a.RIPEMD160=r.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var o=t+n,i=e[o];e[o]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var r,a,p,M,I,C,b,T,S,E,k,D=this._hash.words,A=d.words,L=f.words,O=s.words,R=c.words,w=u.words,N=l.words;C=r=D[0],b=a=D[1],T=p=D[2],S=M=D[3],E=I=D[4];for(n=0;n<80;n+=1)k=r+e[t+O[n]]|0,k+=n<16?h(a,p,M)+A[0]:n<32?g(a,p,M)+A[1]:n<48?_(a,p,M)+A[2]:n<64?v(a,p,M)+A[3]:m(a,p,M)+A[4],k|=0,k=y(k,w[n]),k=k+I|0,r=I,I=M,M=y(p,10),p=a,a=k,k=C+e[t+R[n]]|0,k+=n<16?m(b,T,S)+L[0]:n<32?v(b,T,S)+L[1]:n<48?_(b,T,S)+L[2]:n<64?g(b,T,S)+L[3]:h(b,T,S)+L[4],k|=0,k=y(k,N[n]),k=k+E|0,C=E,E=S,S=y(T,10),T=b,b=k;k=D[1]+p+S|0,D[1]=D[2]+M+E|0,D[2]=D[3]+I+C|0,D[3]=D[4]+r+b|0,D[4]=D[0]+a+T|0,D[0]=k},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;t[o>>>5]|=128<<24-o%32,t[14+(o+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var i=this._hash,r=i.words,a=0;a<5;a++){var s=r[a];r[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return i},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});function h(e,t,n){return e^t^n}function g(e,t,n){return e&t|~e&n}function _(e,t,n){return(e|~t)^n}function v(e,t,n){return e&n|t&~n}function m(e,t,n){return e^(t|~n)}function y(e,t){return e<<t|e>>>32-t}n.RIPEMD160=r._createHelper(p),n.HmacRIPEMD160=r._createHmacHelper(p)}(Math),e.RIPEMD160}))},"9db6":function(e,t,n){"use strict";var o=n("8bdb"),i=n("9f69"),r=n("1ded").f,a=n("c435"),s=n("9e70"),c=n("b6a1"),u=n("862c"),l=n("0931"),d=n("a734"),f=i("".slice),p=Math.min,h=l("startsWith"),g=!d&&!h&&!!function(){var e=r(String.prototype,"startsWith");return e&&!e.writable}();o({target:"String",proto:!0,forced:!g&&!h},{startsWith:function(e){var t=s(u(this));c(e);var n=a(p(arguments.length>1?arguments[1]:void 0,t.length)),o=s(e);return f(t,n,n+o.length)===o}})},"9e15":function(e,t,n){"use strict";var o=n("f259"),i=n("effb");o("toPrimitive"),i()},"9e57":function(e,t,n){"use strict";var o=n("f5bd").default;n("bf0f"),n("2797"),n("dc8a");var i=o(n("9b8e")),r=o(n("5b55")),a=o(n("ff87")),s=o(n("63b7")),c=o(n("ae88")),u=o(n("6228")),l=o(n("1efa"));i.default.component(r.default.name,r.default),i.default.component(a.default.name,a.default),i.default.component(s.default.name,s.default),i.default.component(c.default.name,c.default),i.default.component(u.default.name,u.default),Object.keys(l.default).forEach((function(e){var t=l.default[e];i.default.component(t.name,t)}))},"9e70":function(e,t,n){"use strict";var o=n("8e02"),i=String;e.exports=function(e){if("Symbol"===o(e))throw new TypeError("Cannot convert a Symbol value to a string");return i(e)}},"9ea3":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={button:{hairline:!1,type:"info",size:"normal",shape:"square",plain:!1,disabled:!1,loading:!1,loadingText:"",loadingMode:"spinner",loadingSize:15,openType:"",formType:"",appParameter:"",hoverStopPropagation:!0,lang:"en",sessionFrom:"",sendMessageTitle:"",sendMessagePath:"",sendMessageImg:"",showMessageCard:!1,dataName:"",throttleTime:0,hoverStartTime:0,hoverStayTime:200,text:"",icon:"",iconColor:"",color:""}}},"9f2f":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("241b")),r={navbar:{safeAreaInsetTop:!0,placeholder:!1,fixed:!0,border:!1,leftIcon:"arrow-left",leftText:"",rightText:"",rightIcon:"",title:"",bgColor:"#ffffff",titleWidth:"400rpx",height:"44px",leftIconSize:20,leftIconColor:i.default.mainColor,autoBack:!1,titleStyle:""}};t.default=r},"9f52":function(e){e.exports=JSON.parse('{"uni.app.quit":"Pulse otra vez para salir","uni.async.error":"Se agotó el tiempo de conexión, haga clic en la pantalla para volver a intentarlo.","uni.showActionSheet.cancel":"Cancelar","uni.showToast.unpaired":"Tenga en cuenta que showToast debe estar emparejado con hideToast","uni.showLoading.unpaired":"Tenga en cuenta que showLoading debe estar emparejado con hideLoading","uni.showModal.cancel":"Cancelar","uni.showModal.confirm":"OK","uni.chooseImage.cancel":"Cancelar","uni.chooseImage.sourceType.album":"Álbum","uni.chooseImage.sourceType.camera":"Cámara","uni.chooseVideo.cancel":"Cancelar","uni.chooseVideo.sourceType.album":"Álbum","uni.chooseVideo.sourceType.camera":"Cámara","uni.chooseFile.notUserActivation":"El cuadro de diálogo del selector de archivos solo se puede mostrar con la activación del usuario","uni.previewImage.cancel":"Cancelar","uni.previewImage.button.save":"Guardar imagen","uni.previewImage.save.success":"Guardado exitosamente","uni.previewImage.save.fail":"Error al guardar","uni.setClipboardData.success":"Contenido copiado","uni.scanCode.title":"Código de escaneo","uni.scanCode.album":"Álbum","uni.scanCode.fail":"Échec de la reconnaissance","uni.scanCode.flash.on":"Toque para encender la luz","uni.scanCode.flash.off":"Toque para apagar la luz","uni.startSoterAuthentication.authContent":"Reconocimiento de huellas dactilares","uni.startSoterAuthentication.waitingContent":"Irreconocible","uni.picker.done":"OK","uni.picker.cancel":"Cancelar","uni.video.danmu":"Danmu","uni.video.volume":"Volumen","uni.button.feedback.title":"realimentación","uni.button.feedback.send":"enviar","uni.chooseLocation.search":"Encontrar","uni.chooseLocation.cancel":"Cancelar"}')},"9f69":function(e,t,n){"use strict";var o=n("ada5"),i=n("bb80");e.exports=function(e){if("Function"===o(e))return i(e)}},"9f9e":function(e,t,n){"use strict";var o=n("8f26"),i=Function.prototype,r=i.apply,a=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(o?a.bind(r):function(){return a.apply(r,arguments)})},a019:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("fcf3"));function r(e){return/^[\+-]?(\d+\.?\d*|\.\d+|\d\.\d+e\+\d+)$/.test(e)}function a(e){switch((0,i.default)(e)){case"undefined":return!0;case"string":if(0==e.replace(/(^[ \t\n\r]*)|([ \t\n\r]*$)/g,"").length)return!0;break;case"boolean":if(!e)return!0;break;case"number":if(0===e||isNaN(e))return!0;break;case"object":if(null===e||0===e.length)return!0;for(var t in e)return!1;return!0}return!1}function s(e){return"[object Object]"===Object.prototype.toString.call(e)}function c(e){return"function"===typeof e}n("5c47"),n("0506"),n("c9b5"),n("bf0f"),n("ab80"),n("5ef2"),n("a1c1"),n("23f4"),n("7d2f"),n("9c4e");var u={email:function(e){return/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/.test(e)},mobile:function(e){return/^1([3589]\d|4[5-9]|6[1-2,4-7]|7[0-8])\d{8}$/.test(e)},url:function(e){return/^((https|http|ftp|rtsp|mms):\/\/)(([0-9a-zA-Z_!~*'().&=+$%-]+: )?[0-9a-zA-Z_!~*'().&=+$%-]+@)?(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-zA-Z_!~*'()-]+.)*([0-9a-zA-Z][0-9a-zA-Z-]{0,61})?[0-9a-zA-Z].[a-zA-Z]{2,6})(:[0-9]{1,4})?((\/?)|(\/[0-9a-zA-Z_!~*'().;?:@&=+$,%#-]+)+\/?)$/.test(e)},date:function(e){return!!e&&(r(e)&&(e=+e),!/Invalid|NaN/.test(new Date(e).toString()))},dateISO:function(e){return/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:r,digits:function(e){return/^\d+$/.test(e)},idCard:function(e){return/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(e)},carNo:function(e){return 7===e.length?/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}[A-HJ-NP-Z0-9]{4}[A-HJ-NP-Z0-9挂学警港澳]{1}$/.test(e):8===e.length&&/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}(([0-9]{5}[DF]$)|([DF][A-HJ-NP-Z0-9][0-9]{4}$))/.test(e)},amount:function(e){return/^[1-9]\d*(,\d{3})*(\.\d{1,2})?$|^0\.\d{1,2}$/.test(e)},chinese:function(e){return/^[\u4e00-\u9fa5]+$/gi.test(e)},letter:function(e){return/^[a-zA-Z]*$/.test(e)},enOrNum:function(e){return/^[0-9a-zA-Z]*$/g.test(e)},contains:function(e,t){return e.indexOf(t)>=0},range:function(e,t){return e>=t[0]&&e<=t[1]},rangeLength:function(e,t){return e.length>=t[0]&&e.length<=t[1]},empty:a,isEmpty:a,jsonString:function(e){if("string"===typeof e)try{var t=JSON.parse(e);return!("object"!==(0,i.default)(t)||!t)}catch(n){return!1}return!1},landline:function(e){return/^\d{3,4}-\d{7,8}(-\d{3,4})?$/.test(e)},object:s,array:function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},code:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return new RegExp("^\\d{".concat(t,"}$")).test(e)},func:c,promise:function(e){return s(e)&&c(e.then)&&c(e.catch)},video:function(e){return/\.(mp4|mpg|mpeg|dat|asf|avi|rm|rmvb|mov|wmv|flv|mkv|m3u8)/i.test(e)},image:function(e){var t=e.split("?")[0];return/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i.test(t)},regExp:function(e){return e&&"[object RegExp]"===Object.prototype.toString.call(e)},string:function(e){return"string"===typeof e}};t.default=u},a030:function(e,t,n){var o=n("8394"),i=Object.defineProperty;e.exports=function(e,t){try{i(o,e,{value:t,configurable:!0,writable:!0})}catch(n){o[e]=t}return t}},a03a:function(e,t,n){"use strict";var o=n("8bdb"),i=n("ab4a"),r=n("a3fb").f;o({target:"Object",stat:!0,forced:Object.defineProperties!==r,sham:!i},{defineProperties:r})},a048:function(e,t,n){"use strict";var o=n("bda5"),i=String,r=TypeError;e.exports=function(e){if(o(e))return e;throw new r("Can't set "+i(e)+" as a prototype")}},a1b9:function(e,t,n){"use strict";n.r(t);var o=n("751d"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},a1c1:function(e,t,n){"use strict";var o=n("9f9e"),i=n("71e9"),r=n("bb80"),a=n("7edc"),s=n("af9e"),c=n("e7e3"),u=n("474f"),l=n("1eb8"),d=n("497b"),f=n("c435"),p=n("9e70"),h=n("862c"),g=n("03dc"),_=n("60bc"),v=n("1001"),m=n("07da"),y=n("8c08"),M=y("replace"),I=Math.max,C=Math.min,b=r([].concat),T=r([].push),S=r("".indexOf),E=r("".slice),k=function(e){return void 0===e?e:String(e)},D=function(){return"$0"==="a".replace(/./,"$0")}(),A=function(){return!!/./[M]&&""===/./[M]("a","$0")}(),L=!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));a("replace",(function(e,t,n){var r=A?"$":"$0";return[function(e,n){var o=h(this),r=l(e)?void 0:_(e,M);return r?i(r,e,o,n):i(t,p(o),e,n)},function(e,i){var a=c(this),s=p(e);if("string"==typeof i&&-1===S(i,r)&&-1===S(i,"$<")){var l=n(t,a,s,i);if(l.done)return l.value}var h=u(i);h||(i=p(i));var _,y=a.global;y&&(_=a.unicode,a.lastIndex=0);var M,D=[];while(1){if(M=m(a,s),null===M)break;if(T(D,M),!y)break;var A=p(M[0]);""===A&&(a.lastIndex=g(s,f(a.lastIndex),_))}for(var L="",O=0,R=0;R<D.length;R++){M=D[R];for(var w,N=p(M[0]),P=I(C(d(M.index),s.length),0),G=[],U=1;U<M.length;U++)T(G,k(M[U]));var x=M.groups;if(h){var F=b([N],G,P,s);void 0!==x&&T(F,x),w=p(o(i,void 0,F))}else w=v(N,s,P,G,x,i);P>=O&&(L+=E(s,O,P)+w,O=P+N.length)}return L+E(s,O)}]}),!L||!D||A)},a1d4:function(e,t,n){"use strict";var o=n("85c1");e.exports=o},a20b:function(e,t,n){"use strict";var o=n("85c1"),i=n("474f"),r=o.WeakMap;e.exports=i(r)&&/native code/.test(String(r))},a233:function(e,t,n){var o,i,r,a=n("bdbb").default;n("80e3"),n("4db2"),n("bf0f"),n("c976"),n("4d8f"),n("7b97"),n("668a"),n("c5b7"),n("8ff5"),n("2378"),n("641a"),n("64e0"),n("cce3"),n("efba"),n("d009"),n("bd7d"),n("7edd"),n("d798"),n("f547"),n("5e54"),n("b60a"),n("8c18"),n("12973"),n("f991"),n("198e"),n("8557"),n("63b1"),n("1954"),n("1cf1"),n("0b46"),n("9480"),n("2d48"),n("247d"),n("c02e"),n("295e"),n("4f9b"),n("825c"),function(s,c){"object"===a(t)?e.exports=t=c(n("5e74")):(i=[n("5e74")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))}(0,(function(e){return function(){if("function"==typeof ArrayBuffer){var t=e,n=t.lib,o=n.WordArray,i=o.init,r=o.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!==typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,n=[],o=0;o<t;o++)n[o>>>2]|=e[o]<<24-o%4*8;i.call(this,n,t)}else i.apply(this,arguments)};r.prototype=o}}(),e.lib.WordArray}))},a23b:function(e,t,n){"use strict";n.r(t);var o=n("34cf"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},a25c:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={stepsItem:{title:"",desc:"",iconSize:17,error:!1}}},a2df:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={overlay:{show:!1,zIndex:10070,duration:300,opacity:.5}}},a301:function(e,t,n){"use strict";(function(e){n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getTheme",{enumerable:!0,get:function(){return i.getTheme}}),t.offThemeChange=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};e.off("api."+r.ON_THEME_CHANGE,t)},t.onThemeChange=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};__uniConfig.darkmode&&e.on("api."+r.ON_THEME_CHANGE,t)},t.parseTheme=function(e){var t={};if(__uniConfig.darkmode){var n=(0,i.getTheme)();t=(0,o.normallizeStyles)(e,__uniConfig.themeConfig,n)}return __uniConfig.darkmode?t:e};var o=n("1ffa"),i=n("a3f7"),r=n("60bf")}).call(this,n("ef66"))},a312:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={name:"CoverImage",props:{src:{type:String,default:""}},methods:{_load:function(e){this.$trigger("load",e)},_error:function(e){this.$trigger("error",e)}}};t.default=o},a321:function(e,t,n){var o,i,r,a=n("bdbb").default;(function(s,c,u){"object"===a(t)?e.exports=t=c(n("5e74"),n("f794")):(i=[n("5e74"),n("f794")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))})(0,(function(e){return e.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,o=4*t,i=o-n%o,r=n+i-1;e.clamp(),e.words[r>>>2]|=i<<24-r%4*8,e.sigBytes+=i},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923}))},a34f:function(e,t,n){var o=n("d7b8"),i=n("1ae3"),r=n("93c2"),a=n("218d"),s=n("e352"),c=n("29d5"),u=TypeError,l=c("toPrimitive");e.exports=function(e,t){if(!i(e)||r(e))return e;var n,c=a(e,l);if(c){if(void 0===t&&(t="default"),n=o(c,e,t),!i(n)||r(n))return n;throw u("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},a38a:function(e,t,n){"use strict";(function(e){n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("bf0f"),n("2797"),n("3efd"),n("aa9c");var i=o(n("9b1b")),r=o(n("80b1")),a=o(n("efe5")),s=o(n("59d2")),c=o(n("aa8f")),u=o(n("d72c")),l=o(n("3e2d")),d=n("78ab"),f=o(n("130e")),p=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,t),(0,d.isPlainObject)(n)||(n={},e.warn("设置全局参数必须接收一个Object")),this.config=(0,f.default)((0,i.default)((0,i.default)({},l.default),n)),this.interceptors={request:new c.default,response:new c.default}}return(0,a.default)(t,[{key:"setConfig",value:function(e){this.config=e(this.config)}},{key:"middleware",value:function(e){e=(0,u.default)(this.config,e);var t=[s.default,void 0],n=Promise.resolve(e);this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));while(t.length)n=n.then(t.shift(),t.shift());return n}},{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.middleware(e)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.middleware((0,i.default)({url:e,method:"GET"},t))}},{key:"post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.middleware((0,i.default)({url:e,data:t,method:"POST"},n))}},{key:"put",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.middleware((0,i.default)({url:e,data:t,method:"PUT"},n))}},{key:"delete",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.middleware((0,i.default)({url:e,data:t,method:"DELETE"},n))}},{key:"connect",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.middleware((0,i.default)({url:e,data:t,method:"CONNECT"},n))}},{key:"head",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.middleware((0,i.default)({url:e,data:t,method:"HEAD"},n))}},{key:"options",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.middleware((0,i.default)({url:e,data:t,method:"OPTIONS"},n))}},{key:"trace",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.middleware((0,i.default)({url:e,data:t,method:"TRACE"},n))}},{key:"upload",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.url=e,t.method="UPLOAD",this.middleware(t)}},{key:"download",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.url=e,t.method="DOWNLOAD",this.middleware(t)}}]),t}();t.default=p}).call(this,n("ba7c")["default"])},a3f3:function(e,t,n){var o=n("9b8fb"),i=n("e8b8");e.exports=!o&&!i&&"object"==typeof window&&"object"==typeof document},a3f7:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.getBrowserInfo=function(){var e,t,n,o=navigator.language,f="phone";if(s){e="iOS";var p=r.match(/OS\s([\w_]+)\slike/);p&&(t=p[1].replace(/_/g,"."));var h=r.match(/\(([a-zA-Z]+);/);h&&(n=h[1])}else if(a){e="Android";var g=r.match(/Android[\s/]([\w\.]+)[;\s]/);g&&(t=g[1]);for(var _=r.match(/\((.+?)\)/),v=_?_[1].split(";"):r.split(" "),m=[/\bAndroid\b/i,/\bLinux\b/i,/\bU\b/i,/^\s?[a-z][a-z]$/i,/^\s?[a-z][a-z]-[a-z][a-z]$/i,/\bwv\b/i,/\/[\d\.,]+$/,/^\s?[\d\.,]+$/,/\bBrowser\b/i,/\bMobile\b/i],y=0;y<v.length;y++){var M=v[y];if(M.indexOf("Build")>0){n=M.split("Build")[0].trim();break}for(var I=void 0,C=0;C<m.length;C++)if(m[C].test(M)){I=!0;break}if(!I){n=M.trim();break}}}else if(d)n="iPad",e="iOS",t="function"===typeof window.BigInt?"14.0":"13.0",f="pad";else if(c||u||l){n="PC",e="PC",f="pc";var b=r.match(/\((.+?)\)/)[1];if(c){switch(e="Windows",t="",c[1]){case"5.1":t="XP";break;case"6.0":t="Vista";break;case"6.1":t="7";break;case"6.2":t="8";break;case"6.3":t="8.1";break;case"10.0":t="10";break}var T=b.match(/[Win|WOW]([\d]+)/);T&&(t+=" x".concat(T[1]))}else u?(e="macOS",t=b.match(/Mac OS X (.+)/)||"",t&&(t=t[1].replace(/_/g,"."),-1!==t.indexOf(";")&&(t=t.split(";")[0]))):l&&(e="Linux",t=b.match(/Linux (.*)/)||"",t&&(t=t[1],-1!==t.indexOf(";")&&(t=t.split(";")[0])))}else e="Other",t="0",f="unknown";var S="".concat(e," ").concat(t),E=e.toLocaleLowerCase(),k="",D=String(function(){var e=navigator.userAgent,t=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1,n=e.indexOf("Edge")>-1&&!t,o=e.indexOf("Trident")>-1&&e.indexOf("rv:11.0")>-1;if(t){var i=new RegExp("MSIE (\\d+\\.\\d+);");i.test(e);var r=parseFloat(RegExp.$1);return r>6?r:6}return n?-1:o?11:-1}());if("-1"!==D)k="IE";else for(var A=["Version","Firefox","Chrome","Edge{0,1}"],L=["Safari","Firefox","Chrome","Edge"],O=0;O<A.length;O++){var R=A[O],w=new RegExp("(".concat(R,")/(\\S*)\\b"));w.test(r)&&(k=L[O],D=r.match(w)[2])}var N,P="undefined"===typeof window.screen.orientation?window.orientation:window.screen.orientation.angle;return N=90===Math.abs(P)?"landscape":"portrait",{deviceBrand:void 0,brand:void 0,deviceModel:n,deviceOrientation:N,model:n,system:S,platform:E,browserName:k.toLocaleLowerCase(),browserVersion:D,language:o,deviceType:f,ua:r,osname:e,osversion:t,theme:i()}},t.getTheme=i,n("5ef2"),n("23f4"),n("7d2f"),n("5c47"),n("9c4e"),n("ab80"),n("0506"),n("e838"),n("2c10"),n("a1c1"),n("0c26"),n("c223");var o=n("1ffa");function i(){if(!0!==__uniConfig.darkmode)return(0,o.isStr)(__uniConfig.darkmode)?__uniConfig.darkmode:"light";try{return window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"}catch(e){return"light"}}var r=navigator.userAgent,a=/android/i.test(r),s=/iphone|ipad|ipod/i.test(r),c=r.match(/Windows NT ([\d|\d.\d]*)/i),u=/Macintosh|Mac/i.test(r),l=/Linux|X11/i.test(r),d=u&&navigator.maxTouchPoints>0},a3fb:function(e,t,n){"use strict";var o=n("ab4a"),i=n("fec3"),r=n("d6b1"),a=n("e7e3"),s=n("f660"),c=n("ff4f");t.f=o&&!i?Object.defineProperties:function(e,t){a(e);var n,o=s(t),i=c(t),u=i.length,l=0;while(u>l)r.f(e,n=i[l++],o[n]);return e}},a554:function(e,t,n){"use strict";var o=n("af9e"),i=n("8c08"),r=n("0173"),a=i("species");e.exports=function(e){return r>=51||!o((function(){var t=[],n=t.constructor={};return n[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},a578:function(e,t,n){"use strict";var o=n("8bdb"),i=n("f298");o({target:"String",proto:!0},{repeat:i})},a5c6:function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},a644:function(e,t,n){"use strict";var o=n("8bdb"),i=n("ab4a"),r=n("6ac9"),a=n("f660"),s=n("1ded"),c=n("85f7");o({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){var t,n,o=a(e),i=s.f,u=r(o),l={},d=0;while(u.length>d)n=i(o,t=u[d++]),void 0!==n&&c(l,t,n);return l}})},a6a3:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,f,p,h=[],g=e;h.last=function(){return this[this.length-1]};while(e){if(f=!0,h.last()&&d[h.last()])e=e.replace(new RegExp("([\\s\\S]*?)</"+h.last()+"[^>]*>"),(function(e,n){return n=n.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),t.chars&&t.chars(n),""})),m("",h.last());else if(0==e.indexOf("\x3c!--")?(n=e.indexOf("--\x3e"),n>=0&&(t.comment&&t.comment(e.substring(4,n)),e=e.substring(n+3),f=!1)):0==e.indexOf("</")?(p=e.match(i),p&&(e=e.substring(p[0].length),p[0].replace(i,m),f=!1)):0==e.indexOf("<")&&(p=e.match(o),p&&(e=e.substring(p[0].length),p[0].replace(o,v),f=!1)),f){n=e.indexOf("<");var _=n<0?e:e.substring(0,n);e=n<0?"":e.substring(n),t.chars&&t.chars(_)}if(e==g)throw"Parse Error: "+e;g=e}function v(e,n,o,i){if(n=n.toLowerCase(),s[n])while(h.last()&&c[h.last()])m("",h.last());if(u[n]&&h.last()==n&&m("",n),i=a[n]||!!i,i||h.push(n),t.start){var d=[];o.replace(r,(function(e,t){var n=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:l[t]?t:"";d.push({name:t,value:n,escaped:n.replace(/(^|[^\\])"/g,'$1\\"')})})),t.start&&t.start(n,d,i)}}function m(e,n){if(n){for(o=h.length-1;o>=0;o--)if(h[o]==n)break}else var o=0;if(o>=0){for(var i=h.length-1;i>=o;i--)t.end&&t.end(h[i]);h.length=o}}m()},n("5ef2"),n("5c47"),n("2c10"),n("a1c1"),n("23f4"),n("7d2f"),n("9c4e"),n("ab80"),n("aa9c");var o=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,i=/^<\/([-A-Za-z0-9_]+)[^>]*>/,r=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,a=f("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),s=f("a,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),c=f("abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),u=f("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),l=f("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),d=f("script,style");function f(e){for(var t={},n=e.split(","),o=0;o<n.length;o++)t[n[o]]=!0;return t}},a700:function(e,t,n){"use strict";var o=n("29d8"),i=o.match(/AppleWebKit\/(\d+)\./);e.exports=!!i&&+i[1]},a71b:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.name,o=e.arg;"postMessage"===n||uni[n](o)}},a72f:function(e,t,n){var o,i,r,a=n("bdbb").default;(function(s,c,u){"object"===a(t)?e.exports=t=c(n("5e74"),n("c209")):(i=[n("5e74"),n("c209")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))})(0,(function(e){return function(){var t=e,n=t.lib,o=n.WordArray,i=t.algo,r=i.SHA256,a=i.SHA224=r.extend({_doReset:function(){this._hash=new o.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=4,e}});t.SHA224=r._createHelper(a),t.HmacSHA224=r._createHmacHelper(a)}(),e.SHA224}))},a734:function(e,t,n){"use strict";e.exports=!1},a745:function(e,t,n){"use strict";(function(e){n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentPageId=function(){var e=getCurrentPages(),t=e[e.length-1];return t&&t.$page.id},t.getCurrentPageVm=function(t){var n=getCurrentPages(),o=n.length;o||e.emit("onError","".concat(t,":fail"));var i=n[o-1];return i.$vm},t.invokeMethod=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return i.default[e].apply(null,n)},t.onMethod=function(t,n){return e.on("api."+t,n)};var i=o(n("1b07"))}).call(this,n("ef66"))},a74c:function(e,t,n){"use strict";var o=n("81a9");e.exports=function(e,t,n){for(var i in t)o(e,i,t[i],n);return e}},a770:function(e,t){(function(){"use strict";if("object"===typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var e=window.document,t=[];o.prototype.THROTTLE_TIMEOUT=100,o.prototype.POLL_INTERVAL=null,o.prototype.USE_MUTATION_OBSERVER=!0,o.prototype.observe=function(e){var t=this._observationTargets.some((function(t){return t.element==e}));if(!t){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},o.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!=e})),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},o.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},o.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},o.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter((function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]}))},o.prototype._parseRootMargin=function(e){var t=e||"0px",n=t.split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}}));return n[1]=n[1]||n[0],n[2]=n[2]||n[0],n[3]=n[3]||n[1],n},o.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(r(window,"resize",this._checkForIntersections,!0),r(e,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in window&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},o.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,a(window,"resize",this._checkForIntersections,!0),a(e,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},o.prototype._checkForIntersections=function(){var e=this._rootIsInDom(),t=e?this._getRootRect():u();this._observationTargets.forEach((function(o){var r=o.element,a=c(r),s=this._rootContainsTarget(r),u=o.entry,l=e&&s&&this._computeTargetAndRootIntersection(r,t),d=o.entry=new n({time:i(),target:r,boundingClientRect:a,rootBounds:t,intersectionRect:l});u?e&&s?this._hasCrossedThreshold(u,d)&&this._queuedEntries.push(d):u&&u.isIntersecting&&this._queuedEntries.push(d):this._queuedEntries.push(d)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},o.prototype._computeTargetAndRootIntersection=function(t,n){if("none"!=window.getComputedStyle(t).display){var o=c(t),i=o,r=d(t),a=!1;while(!a){var u=null,l=1==r.nodeType?window.getComputedStyle(r):{};if("none"==l.display)return;if(r==this.root||r==e?(a=!0,u=n):r!=e.body&&r!=e.documentElement&&"visible"!=l.overflow&&(u=c(r)),u&&(i=s(u,i),!i))break;r=d(r)}return i}},o.prototype._getRootRect=function(){var t;if(this.root)t=c(this.root);else{var n=e.documentElement,o=e.body;t={top:0,left:0,right:n.clientWidth||o.clientWidth,width:n.clientWidth||o.clientWidth,bottom:n.clientHeight||o.clientHeight,height:n.clientHeight||o.clientHeight}}return this._expandRectByRootMargin(t)},o.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100})),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},o.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,o=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==o)for(var i=0;i<this.thresholds.length;i++){var r=this.thresholds[i];if(r==n||r==o||r<n!==r<o)return!0}},o.prototype._rootIsInDom=function(){return!this.root||l(e,this.root)},o.prototype._rootContainsTarget=function(t){return l(this.root||e,t)},o.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},o.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},window.IntersectionObserver=o,window.IntersectionObserverEntry=n}function n(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||u(),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,o=this.intersectionRect,i=o.width*o.height;this.intersectionRatio=n?Number((i/n).toFixed(4)):this.isIntersecting?1:0}function o(e,t){var n=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=function(e,t){var n=null;return function(){n||(n=setTimeout((function(){e(),n=null}),t))}}(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" ")}function i(){return window.performance&&performance.now&&performance.now()}function r(e,t,n,o){"function"==typeof e.addEventListener?e.addEventListener(t,n,o||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function a(e,t,n,o){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,o||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function s(e,t){var n=Math.max(e.top,t.top),o=Math.min(e.bottom,t.bottom),i=Math.max(e.left,t.left),r=Math.min(e.right,t.right),a=r-i,s=o-n;return a>=0&&s>=0&&{top:n,bottom:o,left:i,right:r,width:a,height:s}}function c(e){var t;try{t=e.getBoundingClientRect()}catch(n){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):u()}function u(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function l(e,t){var n=t;while(n){if(n==e)return!0;n=d(n)}return!1}function d(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t&&t.assignedSlot?t.assignedSlot.parentNode:t}})()},a791:function(e,t,n){var o=n("1faa"),i=n("7aa6"),r=n("3b78");e.exports=!o&&!i((function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}))},a7c2:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("64aa"),n("5c47"),n("0506"),n("e838"),n("aa9c"),n("c9b5"),n("bf0f"),n("ab80");var i=o(n("8dac")),r=n("afe7"),a=n("1d16"),s=!1;function c(e){s||(s=!0,requestAnimationFrame((function(){e(),s=!1})))}function u(e,t){return+((1e3*e-1e3*t)/1e3).toFixed(1)}function l(e,t,n){var o={id:0,cancelled:!1};return function t(n,o,i,r){if(!n||!n.cancelled){i(o);var a=e.done();a||n.cancelled||(n.id=requestAnimationFrame(t.bind(null,n,o,i,r))),a&&r&&r(o)}}(o,e,t,n),{cancel:function(e){e&&e.id&&cancelAnimationFrame(e.id),e&&(e.cancelled=!0)}.bind(null,o),model:e}}var d={name:"MovableView",mixins:[i.default],props:{direction:{type:String,default:"none"},inertia:{type:[Boolean,String],default:!1},outOfBounds:{type:[Boolean,String],default:!1},x:{type:[Number,String],default:0},y:{type:[Number,String],default:0},damping:{type:[Number,String],default:20},friction:{type:[Number,String],default:2},disabled:{type:[Boolean,String],default:!1},scale:{type:[Boolean,String],default:!1},scaleMin:{type:[Number,String],default:.5},scaleMax:{type:[Number,String],default:10},scaleValue:{type:[Number,String],default:1},animation:{type:[Boolean,String],default:!0}},data:function(){return{xSync:this._getPx(this.x),ySync:this._getPx(this.y),scaleValueSync:Number(this.scaleValue)||1,width:0,height:0,minX:0,minY:0,maxX:0,maxY:0}},computed:{dampingNumber:function(){var e=Number(this.damping);return isNaN(e)?20:e},frictionNumber:function(){var e=Number(this.friction);return isNaN(e)||e<=0?2:e},scaleMinNumber:function(){var e=Number(this.scaleMin);return isNaN(e)?.5:e},scaleMaxNumber:function(){var e=Number(this.scaleMax);return isNaN(e)?10:e},xMove:function(){return"all"===this.direction||"horizontal"===this.direction},yMove:function(){return"all"===this.direction||"vertical"===this.direction}},watch:{x:function(e){this.xSync=this._getPx(e)},xSync:function(e){this._setX(e)},y:function(e){this.ySync=this._getPx(e)},ySync:function(e){this._setY(e)},disabled:function(){this.__handleTouchStart()},scaleValue:function(e){this.scaleValueSync=Number(e)||0},scaleValueSync:function(e){this._setScaleValue(e)},scaleMinNumber:function(){this._setScaleMinOrMax()},scaleMaxNumber:function(){this._setScaleMinOrMax()}},created:function(){this._offset={x:0,y:0},this._scaleOffset={x:0,y:0},this._translateX=0,this._translateY=0,this._scale=1,this._oldScale=1,this._STD=new r.STD(1,9*Math.pow(this.dampingNumber,2)/40,this.dampingNumber),this._friction=new r.Friction(1,this.frictionNumber),this._declineX=new r.Decline,this._declineY=new r.Decline,this.__touchInfo={historyX:[0,0],historyY:[0,0],historyT:[0,0]}},mounted:function(){this.touchtrack(this.$el,"_onTrack"),this.setParent(),this._friction.reconfigure(1,this.frictionNumber),this._STD.reconfigure(1,9*Math.pow(this.dampingNumber,2)/40,this.dampingNumber),this.$el.style.transformOrigin="center",(0,a.initScrollBounce)()},methods:{_getPx:function(e){return/\d+[ur]px$/i.test(e)?uni.upx2px(parseFloat(e)):Number(e)||0},_setX:function(e){if(this.xMove){if(e+this._scaleOffset.x===this._translateX)return this._translateX;this._SFA&&this._SFA.cancel(),this._animationTo(e+this._scaleOffset.x,this.ySync+this._scaleOffset.y,this._scale)}return e},_setY:function(e){if(this.yMove){if(e+this._scaleOffset.y===this._translateY)return this._translateY;this._SFA&&this._SFA.cancel(),this._animationTo(this.xSync+this._scaleOffset.x,e+this._scaleOffset.y,this._scale)}return e},_setScaleMinOrMax:function(){if(!this.scale)return!1;this._updateScale(this._scale,!0),this._updateOldScale(this._scale)},_setScaleValue:function(e){return!!this.scale&&(e=this._adjustScale(e),this._updateScale(e,!0),this._updateOldScale(e),e)},__handleTouchStart:function(){this._isScaling||this.disabled||((0,a.disableScrollBounce)({disable:!0}),this._FA&&this._FA.cancel(),this._SFA&&this._SFA.cancel(),this.__touchInfo.historyX=[0,0],this.__touchInfo.historyY=[0,0],this.__touchInfo.historyT=[0,0],this.xMove&&(this.__baseX=this._translateX),this.yMove&&(this.__baseY=this._translateY),this.$el.style.willChange="transform",this._checkCanMove=null,this._firstMoveDirection=null,this._isTouching=!0)},__handleTouchMove:function(e){var t=this;if(!this._isScaling&&!this.disabled&&this._isTouching){var n=this._translateX,o=this._translateY;if(null===this._firstMoveDirection&&(this._firstMoveDirection=Math.abs(e.detail.dx/e.detail.dy)>1?"htouchmove":"vtouchmove"),this.xMove&&(n=e.detail.dx+this.__baseX,this.__touchInfo.historyX.shift(),this.__touchInfo.historyX.push(n),this.yMove||null!==this._checkCanMove||(this._checkCanMove=Math.abs(e.detail.dx/e.detail.dy)<1)),this.yMove&&(o=e.detail.dy+this.__baseY,this.__touchInfo.historyY.shift(),this.__touchInfo.historyY.push(o),this.xMove||null!==this._checkCanMove||(this._checkCanMove=Math.abs(e.detail.dy/e.detail.dx)<1)),this.__touchInfo.historyT.shift(),this.__touchInfo.historyT.push(e.detail.timeStamp),!this._checkCanMove){e.preventDefault();var i="touch";n<this.minX?this.outOfBounds?(i="touch-out-of-bounds",n=this.minX-this._declineX.x(this.minX-n)):n=this.minX:n>this.maxX&&(this.outOfBounds?(i="touch-out-of-bounds",n=this.maxX+this._declineX.x(n-this.maxX)):n=this.maxX),o<this.minY?this.outOfBounds?(i="touch-out-of-bounds",o=this.minY-this._declineY.x(this.minY-o)):o=this.minY:o>this.maxY&&(this.outOfBounds?(i="touch-out-of-bounds",o=this.maxY+this._declineY.x(o-this.maxY)):o=this.maxY),c((function(){t._setTransform(n,o,t._scale,i)}))}}},__handleTouchEnd:function(){var e=this;if(!this._isScaling&&!this.disabled&&this._isTouching&&((0,a.disableScrollBounce)({disable:!1}),this.$el.style.willChange="auto",this._isTouching=!1,!this._checkCanMove&&!this._revise("out-of-bounds")&&this.inertia)){var t=1e3*(this.__touchInfo.historyX[1]-this.__touchInfo.historyX[0])/(this.__touchInfo.historyT[1]-this.__touchInfo.historyT[0]),n=1e3*(this.__touchInfo.historyY[1]-this.__touchInfo.historyY[0])/(this.__touchInfo.historyT[1]-this.__touchInfo.historyT[0]);this._friction.setV(t,n),this._friction.setS(this._translateX,this._translateY);var o=this._friction.delta().x,i=this._friction.delta().y,r=o+this._translateX,s=i+this._translateY;r<this.minX?(r=this.minX,s=this._translateY+(this.minX-this._translateX)*i/o):r>this.maxX&&(r=this.maxX,s=this._translateY+(this.maxX-this._translateX)*i/o),s<this.minY?(s=this.minY,r=this._translateX+(this.minY-this._translateY)*o/i):s>this.maxY&&(s=this.maxY,r=this._translateX+(this.maxY-this._translateY)*o/i),this._friction.setEnd(r,s),this._FA=l(this._friction,(function(){var t=e._friction.s(),n=t.x,o=t.y;e._setTransform(n,o,e._scale,"friction")}),(function(){e._FA.cancel()}))}},_onTrack:function(e){switch(e.detail.state){case"start":this.__handleTouchStart();break;case"move":this.__handleTouchMove(e);break;case"end":this.__handleTouchEnd()}},_getLimitXY:function(e,t){var n=!1;return e>this.maxX?(e=this.maxX,n=!0):e<this.minX&&(e=this.minX,n=!0),t>this.maxY?(t=this.maxY,n=!0):t<this.minY&&(t=this.minY,n=!0),{x:e,y:t,outOfBounds:n}},setParent:function(){if(this.$parent._isMounted){this._FA&&this._FA.cancel(),this._SFA&&this._SFA.cancel();var e=this.scale?this.scaleValueSync:1;this._updateOffset(),this._updateWH(e),this._updateBoundary(),this._translateX=this.xSync+this._scaleOffset.x,this._translateY=this.ySync+this._scaleOffset.y;var t=this._getLimitXY(this._translateX,this._translateY),n=t.x,o=t.y;this._setTransform(n,o,e,"",!0),this._updateOldScale(e)}},_updateOffset:function(){this._offset.x=function e(t,n){if(t===n)return 0;var o=t.offsetLeft;return t.offsetParent?o+=e(t.offsetParent,n):0}(this.$el,this.$parent.$el),this._offset.y=function e(t,n){if(t===n)return 0;var o=t.offsetTop;return t.offsetParent?o+=e(t.offsetParent,n):0}(this.$el,this.$parent.$el)},_updateWH:function(e){e=e||this._scale,e=this._adjustScale(e);var t=this.$el.getBoundingClientRect();this.height=t.height/this._scale,this.width=t.width/this._scale;var n=this.height*e,o=this.width*e;this._scaleOffset.x=(o-this.width)/2,this._scaleOffset.y=(n-this.height)/2},_updateBoundary:function(){var e=0-this._offset.x+this._scaleOffset.x,t=this.$parent.width-this.width-this._offset.x-this._scaleOffset.x;this.minX=Math.min(e,t),this.maxX=Math.max(e,t);var n=0-this._offset.y+this._scaleOffset.y,o=this.$parent.height-this.height-this._offset.y-this._scaleOffset.y;this.minY=Math.min(n,o),this.maxY=Math.max(n,o)},_beginScale:function(){this._isScaling=!0},_endScale:function(){this._isScaling=!1,this._updateOldScale(this._scale)},_setScale:function(e){this.scale&&(e=this._oldScale*e,this._beginScale(),this._updateScale(e))},_updateScale:function(e,t){var n=this;if(this.scale){e=this._adjustScale(e),this._updateWH(e),this._updateBoundary();var o=this._getLimitXY(this._translateX,this._translateY),i=o.x,r=o.y;t?this._animationTo(i,r,e,"",!0,!0):c((function(){n._setTransform(i,r,e,"",!0,!0)}))}},_updateOldScale:function(e){this._oldScale=e},_adjustScale:function(e){return e=Math.max(.5,this.scaleMinNumber,e),e=Math.min(10,this.scaleMaxNumber,e),e},_animationTo:function(e,t,n,o,i,r){var a=this;this._FA&&this._FA.cancel(),this._SFA&&this._SFA.cancel(),this.xMove||(e=this._translateX),this.yMove||(t=this._translateY),this.scale||(n=this._scale);var s=this._getLimitXY(e,t);e=s.x,t=s.y,this.animation?(this._STD._springX._solution=null,this._STD._springY._solution=null,this._STD._springScale._solution=null,this._STD._springX._endPosition=this._translateX,this._STD._springY._endPosition=this._translateY,this._STD._springScale._endPosition=this._scale,this._STD.setEnd(e,t,n,1),this._SFA=l(this._STD,(function(){var e=a._STD.x(),t=e.x,n=e.y,s=e.scale;a._setTransform(t,n,s,o,i,r)}),(function(){a._SFA.cancel()}))):this._setTransform(e,t,n,o,i,r)},_revise:function(e){var t=this._getLimitXY(this._translateX,this._translateY),n=t.x,o=t.y,i=t.outOfBounds;return i&&this._animationTo(n,o,this._scale,e),i},_setTransform:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;null!==e&&"NaN"!==e.toString()&&"number"===typeof e||(e=this._translateX||0),null!==t&&"NaN"!==t.toString()&&"number"===typeof t||(t=this._translateY||0),e=Number(e.toFixed(1)),t=Number(t.toFixed(1)),n=Number(n.toFixed(1)),this._translateX===e&&this._translateY===t||i||this.$trigger("change",{},{x:u(e,this._scaleOffset.x),y:u(t,this._scaleOffset.y),source:o}),this.scale||(n=this._scale),n=this._adjustScale(n),n=+n.toFixed(3),r&&n!==this._scale&&this.$trigger("scale",{},{x:e,y:t,scale:n});var a="translateX("+e+"px) translateY("+t+"px) translateZ(0px) scale("+n+")";this.$el.style.transform=a,this.$el.style.webkitTransform=a,this._translateX=e,this._translateY=t,this._scale=n}}};t.default=d},a830:function(e,t,n){"use strict";var o=n("52df"),i=TypeError;e.exports=function(e,t){if(!delete e[t])throw new i("Cannot delete property "+o(t)+" of "+o(e))}},a8b2:function(e,t,n){n("3840"),n("1959"),n("8345"),n("8328"),n("61a3"),n("2779")},a9ee:function(e,t,n){"use strict";var o=n("85c1"),i=n("af9e"),r=n("bb80"),a=n("9e70"),s=n("ee98").trim,c=n("f072"),u=r("".charAt),l=o.parseFloat,d=o.Symbol,f=d&&d.iterator,p=1/l(c+"-0")!==-1/0||f&&!i((function(){l(Object(f))}));e.exports=p?function(e){var t=s(a(e)),n=l(t);return 0===n&&"-"===u(t,0)?-0:n}:l},aa31:function(e,t){e.exports=["uni-app","uni-layout","uni-content","uni-main","uni-top-window","uni-left-window","uni-right-window","uni-tabbar","uni-page","uni-page-head","uni-page-wrapper","uni-page-body","uni-page-refresh","uni-actionsheet","uni-modal","uni-toast","uni-resize-sensor","uni-shadow-root","uni-ad","uni-audio","uni-button","uni-camera","uni-canvas","uni-checkbox","uni-checkbox-group","uni-cover-image","uni-cover-view","uni-editor","uni-form","uni-functional-page-navigator","uni-icon","uni-image","uni-input","uni-label","uni-live-player","uni-live-pusher","uni-map","uni-movable-area","uni-movable-view","uni-navigator","uni-official-account","uni-open-data","uni-picker","uni-picker-view","uni-picker-view-column","uni-progress","uni-radio","uni-radio-group","uni-rich-text","uni-scroll-view","uni-slider","uni-swiper","uni-swiper-item","uni-switch","uni-text","uni-textarea","uni-video","uni-view","uni-web-view"]},aa77:function(e,t,n){"use strict";var o=n("8bdb"),i=n("4d16").find,r=n("1cb5"),a=!0;"find"in[]&&Array(1)["find"]((function(){a=!1})),o({target:"Array",proto:!0,forced:a},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r("find")},aa8f:function(e,t,n){"use strict";function o(){this.handlers=[]}n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("aa9c"),n("bf0f"),n("2797"),o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){this.handlers.forEach((function(t){null!==t&&e(t)}))};var i=o;t.default=i},aa9c:function(e,t,n){"use strict";var o=n("8bdb"),i=n("1099"),r=n("1fc1"),a=n("b2b1"),s=n("41c7"),c=n("af9e"),u=c((function(){return 4294967297!==[].push.call({length:4294967296},1)})),l=u||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}}();o({target:"Array",proto:!0,arity:1,forced:l},{push:function(e){var t=i(this),n=r(t),o=arguments.length;s(n+o);for(var c=0;c<o;c++)t[n]=arguments[c],n++;return a(t,n),n}})},ab4a:function(e,t,n){"use strict";var o=n("af9e");e.exports=!o((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},ab4b:function(e,t,n){"use strict";n.r(t);var o=n("c0fc"),i=n("8761");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a=n("828b"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},ab80:function(e,t,n){"use strict";var o=n("8945").PROPER,i=n("81a9"),r=n("e7e3"),a=n("9e70"),s=n("af9e"),c=n("52ac"),u=RegExp.prototype,l=u["toString"],d=s((function(){return"/a/b"!==l.call({source:"a",flags:"b"})})),f=o&&"toString"!==l.name;(d||f)&&i(u,"toString",(function(){var e=r(this),t=a(e.source),n=a(c(e));return"/"+t+"/"+n}),{unsafe:!0})},abe4:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={circleProgress:{percentage:30}}},ac37:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={lineProgress:{activeColor:"#19be6b",inactiveColor:"#ececec",percentage:0,showText:!0,height:12}}},ac38:function(e,t,n){"use strict";var o=n("1fc1");e.exports=function(e,t,n){var i=0,r=arguments.length>2?n:o(t),a=new e(r);while(r>i)a[i]=t[i++];return a}},ac5f:function(e,t,n){"use strict";var o=n("ada5");e.exports=Array.isArray||function(e){return"Array"===o(e)}},ac99:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.Scroll=r,n("aa9c");var o=n("b38f"),i=n("31e3");function r(e,t,n){this._extent=e,this._friction=t||new o.Friction(.01),this._spring=n||new i.Spring(1,90,20),this._startTime=0,this._springing=!1,this._springOffset=0}r.prototype.snap=function(e,t){this._springOffset=0,this._springing=!0,this._spring.snap(e),this._spring.setEnd(t)},r.prototype.set=function(e,t){this._friction.set(e,t),e>0&&t>=0?(this._springOffset=0,this._springing=!0,this._spring.snap(e),this._spring.setEnd(0)):e<-this._extent&&t<=0?(this._springOffset=0,this._springing=!0,this._spring.snap(e),this._spring.setEnd(-this._extent)):this._springing=!1,this._startTime=(new Date).getTime()},r.prototype.x=function(e){if(!this._startTime)return 0;if(e||(e=((new Date).getTime()-this._startTime)/1e3),this._springing)return this._spring.x()+this._springOffset;var t=this._friction.x(e),n=this.dx(e);return(t>0&&n>=0||t<-this._extent&&n<=0)&&(this._springing=!0,this._spring.setEnd(0,n),t<-this._extent?this._springOffset=-this._extent:this._springOffset=0,t=this._spring.x()+this._springOffset),t},r.prototype.dx=function(e){var t;return t=this._lastTime===e?this._lastDx:this._springing?this._spring.dx(e):this._friction.dx(e),this._lastTime=e,this._lastDx=t,t},r.prototype.done=function(){return this._springing?this._spring.done():this._friction.done()},r.prototype.setVelocityByEnd=function(e){this._friction.setVelocityByEnd(e)},r.prototype.configuration=function(){var e=this._friction.configuration();return e.push.apply(e,this._spring.configuration()),e}},ada5:function(e,t,n){"use strict";var o=n("bb80"),i=o({}.toString),r=o("".slice);e.exports=function(e){return r(i(e),8,-1)}},ae5c:function(e,t,n){"use strict";var o=n("9f69"),i=n("7992"),r=n("8f26"),a=o(o.bind);e.exports=function(e,t){return i(e),void 0===t?e:r?a(e,t):function(){return e.apply(t,arguments)}}},ae88:function(e,t,n){"use strict";n.r(t);var o=n("fe24"),i=n("7ba9");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a=n("828b"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},af6a:function(e,t,n){"use strict";var o=n("85c1"),i=n("ab4a"),r=Object.getOwnPropertyDescriptor;e.exports=function(e){if(!i)return o[e];var t=r(o,e);return t&&t.value}},af71:function(e,t,n){"use strict";var o=n("0173"),i=n("af9e"),r=n("85c1"),a=r.String;e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol("symbol detection");return!a(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&o&&o<41}))},af8f:function(e,t,n){"use strict";var o=n("71e9"),i=n("7edc"),r=n("e7e3"),a=n("1eb8"),s=n("862c"),c=n("911a"),u=n("9e70"),l=n("60bc"),d=n("07da");i("search",(function(e,t,n){return[function(t){var n=s(this),i=a(t)?void 0:l(t,e);return i?o(i,t,n):new RegExp(t)[e](u(n))},function(e){var o=r(this),i=u(e),a=n(t,o,i);if(a.done)return a.value;var s=o.lastIndex;c(s,0)||(o.lastIndex=0);var l=d(o,i);return c(o.lastIndex,s)||(o.lastIndex=s),null===l?-1:l.index}]}))},af9e:function(e,t,n){"use strict";e.exports=function(e){try{return!!e()}catch(t){return!0}}},afe7:function(e,t,n){"use strict";function o(e,t,n){return e>t-n&&e<t+n}function i(e,t){return o(e,0,t)}function r(){}function a(e,t){this._m=e,this._f=1e3*t,this._startTime=0,this._v=0}function s(e,t,n){this._m=e,this._k=t,this._c=n,this._solution=null,this._endPosition=0,this._startTime=0}function c(e,t,n){this._springX=new s(e,t,n),this._springY=new s(e,t,n),this._springScale=new s(e,t,n),this._startTime=0}n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.Decline=r,t.Friction=a,t.STD=c,t.Spring=s,r.prototype.x=function(e){return Math.sqrt(e)},a.prototype.setV=function(e,t){var n=Math.pow(Math.pow(e,2)+Math.pow(t,2),.5);this._x_v=e,this._y_v=t,this._x_a=-this._f*this._x_v/n,this._y_a=-this._f*this._y_v/n,this._t=Math.abs(e/this._x_a)||Math.abs(t/this._y_a),this._lastDt=null,this._startTime=(new Date).getTime()},a.prototype.setS=function(e,t){this._x_s=e,this._y_s=t},a.prototype.s=function(e){void 0===e&&(e=((new Date).getTime()-this._startTime)/1e3),e>this._t&&(e=this._t,this._lastDt=e);var t=this._x_v*e+.5*this._x_a*Math.pow(e,2)+this._x_s,n=this._y_v*e+.5*this._y_a*Math.pow(e,2)+this._y_s;return(this._x_a>0&&t<this._endPositionX||this._x_a<0&&t>this._endPositionX)&&(t=this._endPositionX),(this._y_a>0&&n<this._endPositionY||this._y_a<0&&n>this._endPositionY)&&(n=this._endPositionY),{x:t,y:n}},a.prototype.ds=function(e){return void 0===e&&(e=((new Date).getTime()-this._startTime)/1e3),e>this._t&&(e=this._t),{dx:this._x_v+this._x_a*e,dy:this._y_v+this._y_a*e}},a.prototype.delta=function(){return{x:-1.5*Math.pow(this._x_v,2)/this._x_a||0,y:-1.5*Math.pow(this._y_v,2)/this._y_a||0}},a.prototype.dt=function(){return-this._x_v/this._x_a},a.prototype.done=function(){var e=o(this.s().x,this._endPositionX)||o(this.s().y,this._endPositionY)||this._lastDt===this._t;return this._lastDt=null,e},a.prototype.setEnd=function(e,t){this._endPositionX=e,this._endPositionY=t},a.prototype.reconfigure=function(e,t){this._m=e,this._f=1e3*t},s.prototype._solve=function(e,t){var n=this._c,o=this._m,i=this._k,r=n*n-4*o*i;if(0===r){var a=-n/(2*o),s=e,c=t/(a*e);return{x:function(e){return(s+c*e)*Math.pow(Math.E,a*e)},dx:function(e){var t=Math.pow(Math.E,a*e);return a*(s+c*e)*t+c*t}}}if(r>0){var u=(-n-Math.sqrt(r))/(2*o),l=(-n+Math.sqrt(r))/(2*o),d=(t-u*e)/(l-u),f=e-d;return{x:function(e){var t,n;return e===this._t&&(t=this._powER1T,n=this._powER2T),this._t=e,t||(t=this._powER1T=Math.pow(Math.E,u*e)),n||(n=this._powER2T=Math.pow(Math.E,l*e)),f*t+d*n},dx:function(e){var t,n;return e===this._t&&(t=this._powER1T,n=this._powER2T),this._t=e,t||(t=this._powER1T=Math.pow(Math.E,u*e)),n||(n=this._powER2T=Math.pow(Math.E,l*e)),f*u*t+d*l*n}}}var p=Math.sqrt(4*o*i-n*n)/(2*o),h=-n/2*o,g=e,_=(t-h*e)/p;return{x:function(e){return Math.pow(Math.E,h*e)*(g*Math.cos(p*e)+_*Math.sin(p*e))},dx:function(e){var t=Math.pow(Math.E,h*e),n=Math.cos(p*e),o=Math.sin(p*e);return t*(_*p*n-g*p*o)+h*t*(_*o+g*n)}}},s.prototype.x=function(e){return void 0===e&&(e=((new Date).getTime()-this._startTime)/1e3),this._solution?this._endPosition+this._solution.x(e):0},s.prototype.dx=function(e){return void 0===e&&(e=((new Date).getTime()-this._startTime)/1e3),this._solution?this._solution.dx(e):0},s.prototype.setEnd=function(e,t,n){if(n||(n=(new Date).getTime()),e!==this._endPosition||!i(t,.1)){t=t||0;var o=this._endPosition;this._solution&&(i(t,.1)&&(t=this._solution.dx((n-this._startTime)/1e3)),o=this._solution.x((n-this._startTime)/1e3),i(t,.1)&&(t=0),i(o,.1)&&(o=0),o+=this._endPosition),this._solution&&i(o-e,.1)&&i(t,.1)||(this._endPosition=e,this._solution=this._solve(o-this._endPosition,t),this._startTime=n)}},s.prototype.snap=function(e){this._startTime=(new Date).getTime(),this._endPosition=e,this._solution={x:function(){return 0},dx:function(){return 0}}},s.prototype.done=function(e){return e||(e=(new Date).getTime()),o(this.x(),this._endPosition,.1)&&i(this.dx(),.1)},s.prototype.reconfigure=function(e,t,n){this._m=e,this._k=t,this._c=n,this.done()||(this._solution=this._solve(this.x()-this._endPosition,this.dx()),this._startTime=(new Date).getTime())},s.prototype.springConstant=function(){return this._k},s.prototype.damping=function(){return this._c},s.prototype.configuration=function(){return[{label:"Spring Constant",read:this.springConstant.bind(this),write:function(e,t){e.reconfigure(1,t,e.damping())}.bind(this,this),min:100,max:1e3},{label:"Damping",read:this.damping.bind(this),write:function(e,t){e.reconfigure(1,e.springConstant(),t)}.bind(this,this),min:1,max:500}]},c.prototype.setEnd=function(e,t,n,o){var i=(new Date).getTime();this._springX.setEnd(e,o,i),this._springY.setEnd(t,o,i),this._springScale.setEnd(n,o,i),this._startTime=i},c.prototype.x=function(){var e=((new Date).getTime()-this._startTime)/1e3;return{x:this._springX.x(e),y:this._springY.x(e),scale:this._springScale.x(e)}},c.prototype.done=function(){var e=(new Date).getTime();return this._springX.done(e)&&this._springY.done(e)&&this._springScale.done(e)},c.prototype.reconfigure=function(e,t,n){this._springX.reconfigure(e,t,n),this._springY.reconfigure(e,t,n),this._springScale.reconfigure(e,t,n)}},afe8:function(e,t,n){"use strict";n.r(t);var o=n("6afb"),i=n("0ae2");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a=n("828b"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},b0a8:function(e,t,n){"use strict";var o=n("af9e"),i=n("85c1"),r=i.RegExp;e.exports=o((function(){var e=r(".","s");return!(e.dotAll&&e.test("\n")&&"s"===e.flags)}))},b0c5:function(e,t,n){"use strict";n.r(t);var o=n("14f48"),i=n("4819");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a=n("828b"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},b0e4:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},b130:function(e,t,n){var o=n("d10a");e.exports=o([].slice)},b185:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.supportsPassive=void 0,n("6a54");var o=!1;t.supportsPassive=o;try{var i={};Object.defineProperty(i,"passive",{get:function(){t.supportsPassive=o=!0}}),window.addEventListener("test-passive",null,i)}catch(r){}},b223:function(e,t,n){"use strict";var o=n("8b3b"),i=n("d7b4"),r=o("keys");e.exports=function(e){return r[e]||(r[e]=i(e))}},b2a9:function(e,t,n){"use strict";n.r(t);var o=n("093e"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},b2b1:function(e,t,n){"use strict";var o=n("ab4a"),i=n("ac5f"),r=TypeError,a=Object.getOwnPropertyDescriptor,s=o&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=s?function(e,t){if(i(e)&&!a(e,"length").writable)throw new r("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},b30e:function(e,t,n){"use strict";(function(e){n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.elementMatchesPolyfill=function(e){e.matches||(e.matches=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||function(e){var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;while(--n>=0&&t.item(n)!==this);return n>-1});return e},t.findElm=function(t,n){if(!n)return e.error("page is not ready");if(!t)return n.$el;0;return t.$el},n("7a76"),n("c9b5"),n("c223")}).call(this,n("ba7c")["default"])},b32e:function(e,t,n){"use strict";var o=n("ae5c"),i=n("71e9"),r=n("5ee2"),a=n("1099"),s=n("1fc1"),c=n("d67c"),u=n("5112"),l=n("81a7"),d=n("68fd"),f=n("7ddb").aTypedArrayConstructor,p=n("50d5");e.exports=function(e){var t,n,h,g,_,v,m,y,M=r(this),I=a(e),C=arguments.length,b=C>1?arguments[1]:void 0,T=void 0!==b,S=u(I);if(S&&!l(S)){m=c(I,S),y=m.next,I=[];while(!(v=i(y,m)).done)I.push(v.value)}for(T&&C>2&&(b=o(b,arguments[2])),n=s(I),h=new(f(M))(n),g=d(h),t=0;n>t;t++)_=T?b(I[t],t):I[t],h[t]=g?p(_):+_;return h}},b377:function(e,t,n){var o=n("d10a"),i=n("7aa6"),r=n("85e5"),a=Object,s=o("".split);e.exports=i((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"==r(e)?s(e,""):a(e)}:a},b382:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.request=t.configMTLS=void 0,n("8f71"),n("bf0f"),n("2797"),n("d4b5"),n("fd3c"),n("dc8a"),n("c223"),n("5ef2"),n("22b6"),n("80e3"),n("4db2"),n("aa77"),n("64aa");var o=n("1ffa"),i={OPTIONS:"OPTIONS",GET:"GET",HEAD:"HEAD",POST:"POST",PUT:"PUT",DELETE:"DELETE",TRACE:"TRACE",CONNECT:"CONNECT",PATCH:"PATCH"},r={JSON:"json"},a={TEXT:"text",ARRAYBUFFER:"arraybuffer"},s=encodeURIComponent;var c={method:{type:String,validator:function(e,t){e=(e||"").toUpperCase(),t.method=Object.values(i).indexOf(e)<0?i.GET:e}},data:{type:[Object,String,Array,ArrayBuffer],validator:function(e,t){t.data=e||""}},url:{type:String,required:!0,validator:function(e,t){t.method===i.GET&&(0,o.isPlainObject)(t.data)&&Object.keys(t.data).length&&(t.url=function(e,t){var n=e.split("#"),i=n[1]||"";n=n[0].split("?");var r=n[1]||"";e=n[0];var a=r.split("&").filter((function(e){return e}));for(var c in r={},a.forEach((function(e){e=e.split("="),r[e[0]]=e[1]})),t)if((0,o.hasOwn)(t,c)){var u=t[c];"undefined"===typeof u||null===u?u="":(0,o.isPlainObject)(u)&&(u=JSON.stringify(u)),r[s(c)]=s(u)}return r=Object.keys(r).map((function(e){return"".concat(e,"=").concat(r[e])})).join("&"),e+(r?"?"+r:"")+(i?"#"+i:"")}(e,t.data))}},header:{type:Object,validator:function(e,t){var n=t.header=e||{};t.method!==i.GET&&(Object.keys(n).find((function(e){return"content-type"===e.toLowerCase()}))||(n["Content-Type"]="application/json"))}},dataType:{type:String,validator:function(e,t){t.dataType=(e||r.JSON).toLowerCase()}},responseType:{type:String,validator:function(e,t){e=(e||"").toLowerCase(),t.responseType=Object.values(a).indexOf(e)<0?a.TEXT:e}},withCredentials:{type:Boolean},timeout:{type:Number}};t.request=c;var u={certificates:{type:Array,required:!0,validator:function(e){if(e.some((function(e){return"String"!==(0,o.toRawType)(e.host)})))return"参数配置错误，请确认后重试"}}};t.configMTLS=u},b38f:function(e,t,n){"use strict";function o(e){this._drag=e,this._dragLog=Math.log(e),this._x=0,this._v=0,this._startTime=0}n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.Friction=o,o.prototype.set=function(e,t){this._x=e,this._v=t,this._startTime=(new Date).getTime()},o.prototype.setVelocityByEnd=function(e){this._v=(e-this._x)*this._dragLog/(Math.pow(this._drag,100)-1)},o.prototype.x=function(e){var t;return void 0===e&&(e=((new Date).getTime()-this._startTime)/1e3),t=e===this._dt&&this._powDragDt?this._powDragDt:this._powDragDt=Math.pow(this._drag,e),this._dt=e,this._x+this._v*t/this._dragLog-this._v/this._dragLog},o.prototype.dx=function(e){var t;return void 0===e&&(e=((new Date).getTime()-this._startTime)/1e3),t=e===this._dt&&this._powDragDt?this._powDragDt:this._powDragDt=Math.pow(this._drag,e),this._dt=e,this._v*t},o.prototype.done=function(){return Math.abs(this.dx())<3},o.prototype.reconfigure=function(e){var t=this.x(),n=this.dx();this._drag=e,this._dragLog=Math.log(e),this.set(t,n)},o.prototype.configuration=function(){var e=this;return[{label:"Friction",read:function(){return e._drag},write:function(t){e.reconfigure(t)},min:.001,max:.1,step:.001}]}},b3e2:function(e,t,n){"use strict";var o,i=n("c2388"),r=n("85c1"),a=n("bb80"),s=n("a74c"),c=n("d0b1"),u=n("7658"),l=n("d871c"),d=n("1c06"),f=n("235c").enforce,p=n("af9e"),h=n("a20b"),g=Object,_=Array.isArray,v=g.isExtensible,m=g.isFrozen,y=g.isSealed,M=g.freeze,I=g.seal,C=!r.ActiveXObject&&"ActiveXObject"in r,b=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},T=u("WeakMap",b,l),S=T.prototype,E=a(S.set);if(h)if(C){o=l.getConstructor(b,"WeakMap",!0),c.enable();var k=a(S["delete"]),D=a(S.has),A=a(S.get);s(S,{delete:function(e){if(d(e)&&!v(e)){var t=f(this);return t.frozen||(t.frozen=new o),k(this,e)||t.frozen["delete"](e)}return k(this,e)},has:function(e){if(d(e)&&!v(e)){var t=f(this);return t.frozen||(t.frozen=new o),D(this,e)||t.frozen.has(e)}return D(this,e)},get:function(e){if(d(e)&&!v(e)){var t=f(this);return t.frozen||(t.frozen=new o),D(this,e)?A(this,e):t.frozen.get(e)}return A(this,e)},set:function(e,t){if(d(e)&&!v(e)){var n=f(this);n.frozen||(n.frozen=new o),D(this,e)?E(this,e,t):n.frozen.set(e,t)}else E(this,e,t);return this}})}else(function(){return i&&p((function(){var e=M([]);return E(new T,e,1),!m(e)}))})()&&s(S,{set:function(e,t){var n;return _(e)&&(m(e)?n=M:y(e)&&(n=I)),E(this,e,t),n&&n(e),this}})},b4b8:function(e,t,n){var o=n("a34f"),i=n("93c2");e.exports=function(e){var t=o(e,"string");return i(t)?t:t+""}},b510:function(e,t,n){var o=n("6ac4"),i=Object;e.exports=function(e){return i(o(e))}},b60a:function(e,t,n){"use strict";var o=n("7ddb"),i=n("9a51").left,r=o.aTypedArray,a=o.exportTypedArrayMethod;a("reduce",(function(e){var t=arguments.length;return i(r(this),e,t,t>1?arguments[1]:void 0)}))},b63c:function(e,t,n){"use strict";n.r(t);var o=n("fa2b"),i=n("c1db");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a=n("828b"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},b643:function(e,t,n){"use strict";var o=n("37ad"),i=Math.floor,r=function(e,t){var n=e.length;if(n<8){var a,s,c=1;while(c<n){s=c,a=e[c];while(s&&t(e[s-1],a)>0)e[s]=e[--s];s!==c++&&(e[s]=a)}}else{var u=i(n/2),l=r(o(e,0,u),t),d=r(o(e,u),t),f=l.length,p=d.length,h=0,g=0;while(h<f||g<p)e[h+g]=h<f&&g<p?t(l[h],d[g])<=0?l[h++]:d[g++]:h<f?l[h++]:d[g++]}return e};e.exports=r},b666:function(e,t,n){"use strict";var o=n("ab4a"),i=n("af9e"),r=n("e7e3"),a=n("e7da"),s=Error.prototype.toString,c=i((function(){if(o){var e=Object.create(Object.defineProperty({},"name",{get:function(){return this===e}}));if("true"!==s.call(e))return!0}return"2: 1"!==s.call({message:1,name:2})||"Error"!==s.call({})}));e.exports=c?function(){var e=r(this),t=a(e.name,"Error"),n=a(e.message);return t?n?t+": "+n:t:n}:s},b6a1:function(e,t,n){"use strict";var o=n("e629"),i=TypeError;e.exports=function(e){if(o(e))throw new i("The method doesn't accept regular expressions");return e}},b720:function(e,t,n){"use strict";var o=n("1297"),i=TypeError;e.exports=function(e,t){if(o(t,e))return e;throw new i("Incorrect invocation")}},b777:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,n){if(n){if(0===n.indexOf("/"))return n}else{if(n=t,0===n.indexOf("/"))return n;var o=getCurrentPages();t=o.length?o[o.length-1].$page.route:""}if(0===n.indexOf("./"))return e(t,n.substr(2));for(var i=n.split("/"),r=i.length,a=0;a<r&&".."===i[a];a++);i.splice(0,a),n=i.join("/");var s=t.length>0?t.split("/"):[];return s.splice(s.length-a-1,a+1),"/"+s.concat(i).join("/")},n("5ef2"),n("dd2b"),n("c223")},b7b1:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},n("7a76"),n("c9b5")},b7c7:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e)||(0,i.default)(e)||(0,r.default)(e)||(0,a.default)()};var o=s(n("4733")),i=s(n("d14d")),r=s(n("5d6b")),a=s(n("30f7"));function s(e){return e&&e.__esModule?e:{default:e}}},b7d1:function(e,t,n){"use strict";(function(e){n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.hideNavigationBarLoading=function(e){return i("hideNavigationBarLoading",e)},t.setNavigationBarColor=function(e){return i("setNavigationBarColor",e)},t.setNavigationBarTitle=function(e){return i("setNavigationBarTitle",e)},t.showNavigationBarLoading=function(e){return i("showNavigationBarLoading",e)};var o=n("14ac");function i(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(0,o.getPageHolder)(n.__page__);if(i)switch(t){case"setNavigationBarColor":var r=n.frontColor,a=n.backgroundColor,s=n.animation,c=s.duration,u=s.timingFunc;r&&(i.navigationBar.textColor="#000000"===r?"black":"white"),a&&(i.navigationBar.backgroundColor=a),e.emit("onNavigationBarChange",{textColor:"#000000"===r?"#000":"#fff",backgroundColor:i.navigationBar.backgroundColor}),i.navigationBar.duration=c+"ms",i.navigationBar.timingFunc=u;break;case"showNavigationBarLoading":i.navigationBar.loading=!0;break;case"hideNavigationBarLoading":i.navigationBar.loading=!1;break;case"setNavigationBarTitle":var l=n.title;i.navigationBar.titleText=l,(0,o.isCurrentPage)(i)&&(document.title=l),e.emit("onNavigationBarChange",{titleText:l});break}return{}}}).call(this,n("ef66"))},b7e5:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.Scroller=i;var o=n("ac99");function i(e,t){t=t||{},this._element=e,this._options=t,this._enableSnap=t.enableSnap||!1,this._itemSize=t.itemSize||0,this._enableX=t.enableX||!1,this._enableY=t.enableY||!1,this._shouldDispatchScrollEvent=!!t.onScroll,this._enableX?(this._extent=(t.scrollWidth||this._element.offsetWidth)-this._element.parentElement.offsetWidth,this._scrollWidth=t.scrollWidth):(this._extent=(t.scrollHeight||this._element.offsetHeight)-this._element.parentElement.offsetHeight,this._scrollHeight=t.scrollHeight),this._position=0,this._scroll=new o.Scroll(this._extent,t.friction,t.spring),this._onTransitionEnd=this.onTransitionEnd.bind(this),this.updatePosition()}i.prototype.onTouchStart=function(){this._startPosition=this._position,this._lastChangePos=this._startPosition,this._startPosition>0?this._startPosition/=.5:this._startPosition<-this._extent&&(this._startPosition=(this._startPosition+this._extent)/.5-this._extent),this._animation&&(this._animation.cancel(),this._scrolling=!1),this.updatePosition()},i.prototype.onTouchMove=function(e,t){var n=this._startPosition;this._enableX?n+=e:this._enableY&&(n+=t),n>0?n*=.5:n<-this._extent&&(n=.5*(n+this._extent)-this._extent),this._position=n,this.updatePosition(),this.dispatchScroll()},i.prototype.onTouchEnd=function(e,t,n){var o=this;if(this._enableSnap&&this._position>-this._extent&&this._position<0){if(this._enableY&&(Math.abs(t)<this._itemSize&&Math.abs(n.y)<300||Math.abs(n.y)<150))return void this.snap();if(this._enableX&&(Math.abs(e)<this._itemSize&&Math.abs(n.x)<300||Math.abs(n.x)<150))return void this.snap()}if(this._enableX?this._scroll.set(this._position,n.x):this._enableY&&this._scroll.set(this._position,n.y),this._enableSnap){var i=this._scroll._friction.x(100),r=i%this._itemSize,a=Math.abs(r)>this._itemSize/2?i-(this._itemSize-Math.abs(r)):i-r;a<=0&&a>=-this._extent&&this._scroll.setVelocityByEnd(a)}this._lastTime=Date.now(),this._lastDelay=0,this._scrolling=!0,this._lastChangePos=this._position,this._lastIdx=Math.floor(Math.abs(this._position/this._itemSize)),this._animation=function(e,t,n){var o={id:0,cancelled:!1};return function e(t,n,o,i){if(!t||!t.cancelled){o(n);var r=n.done();r||t.cancelled||(t.id=requestAnimationFrame(e.bind(null,t,n,o,i))),r&&i&&i(n)}}(o,e,t,n),{cancel:function(e){e&&e.id&&cancelAnimationFrame(e.id),e&&(e.cancelled=!0)}.bind(null,o),model:e}}(this._scroll,(function(){var e=Date.now(),t=(e-o._scroll._startTime)/1e3,n=o._scroll.x(t);o._position=n,o.updatePosition();var i=o._scroll.dx(t);o._shouldDispatchScrollEvent&&e-o._lastTime>o._lastDelay&&(o.dispatchScroll(),o._lastDelay=Math.abs(2e3/i),o._lastTime=e)}),(function(){o._enableSnap&&(a<=0&&a>=-o._extent&&(o._position=a,o.updatePosition()),"function"===typeof o._options.onSnap&&o._options.onSnap(Math.floor(Math.abs(o._position)/o._itemSize))),o._shouldDispatchScrollEvent&&o.dispatchScroll(),o._scrolling=!1}))},i.prototype.onTransitionEnd=function(){this._element.style.transition="",this._element.style.webkitTransition="",this._element.removeEventListener("transitionend",this._onTransitionEnd),this._element.removeEventListener("webkitTransitionEnd",this._onTransitionEnd),this._snapping&&(this._snapping=!1),this.dispatchScroll()},i.prototype.snap=function(){var e=this._itemSize,t=this._position%e,n=Math.abs(t)>this._itemSize/2?this._position-(e-Math.abs(t)):this._position-t;this._position!==n&&(this._snapping=!0,this.scrollTo(-n),"function"===typeof this._options.onSnap&&this._options.onSnap(Math.floor(Math.abs(this._position)/this._itemSize)))},i.prototype.scrollTo=function(e,t){this._animation&&(this._animation.cancel(),this._scrolling=!1),"number"===typeof e&&(this._position=-e),this._position<-this._extent?this._position=-this._extent:this._position>0&&(this._position=0),this._element.style.transition="transform "+(t||.2)+"s ease-out",this._element.style.webkitTransition="-webkit-transform "+(t||.2)+"s ease-out",this.updatePosition(),this._element.addEventListener("transitionend",this._onTransitionEnd),this._element.addEventListener("webkitTransitionEnd",this._onTransitionEnd)},i.prototype.dispatchScroll=function(){if("function"===typeof this._options.onScroll&&Math.round(this._lastPos)!==Math.round(this._position)){this._lastPos=this._position;var e={target:{scrollLeft:this._enableX?-this._position:0,scrollTop:this._enableY?-this._position:0,scrollHeight:this._scrollHeight||this._element.offsetHeight,scrollWidth:this._scrollWidth||this._element.offsetWidth,offsetHeight:this._element.parentElement.offsetHeight,offsetWidth:this._element.parentElement.offsetWidth}};this._options.onScroll(e)}},i.prototype.update=function(e,t,n){var o=0,i=this._position;this._enableX?(o=this._element.childNodes.length?(t||this._element.offsetWidth)-this._element.parentElement.offsetWidth:0,this._scrollWidth=t):(o=this._element.childNodes.length?(t||this._element.offsetHeight)-this._element.parentElement.offsetHeight:0,this._scrollHeight=t),"number"===typeof e&&(this._position=-e),this._position<-o?this._position=-o:this._position>0&&(this._position=0),this._itemSize=n||this._itemSize,this.updatePosition(),i!==this._position&&(this.dispatchScroll(),"function"===typeof this._options.onSnap&&this._options.onSnap(Math.floor(Math.abs(this._position)/this._itemSize))),this._extent=o,this._scroll._extent=o},i.prototype.updatePosition=function(){var e="";this._enableX?e="translateX("+this._position+"px) translateZ(0)":this._enableY&&(e="translateY("+this._position+"px) translateZ(0)"),this._element.style.webkitTransform=e,this._element.style.transform=e},i.prototype.isScrolling=function(){return this._scrolling||this._snapping}},b853:function(e,t,n){"use strict";n.r(t);var o=n("df17"),i=n("549a");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a=n("828b"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},b86d:function(e,t){e.exports=function(e,t){return{value:e,done:t}}},b8b9:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={popup:{show:!1,overlay:!0,mode:"bottom",duration:300,closeable:!1,overlayStyle:function(){},closeOnClickOverlay:!0,zIndex:10075,safeAreaInsetBottom:!0,safeAreaInsetTop:!1,closeIconPos:"top-right",round:0,zoom:!0,bgColor:"",overlayOpacity:.5}}},b8be:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.once=t.on=t.off=t.emit=void 0,Object.defineProperty(t,"publishHandler",{enumerable:!0,get:function(){return a.publishHandler}}),t.subscribe=f,t.subscribeHandler=function(e,t,n){0;d("service."+e,t,n)},t.unsubscribe=function(e,t){return u("service."+e,t)},n("c223"),n("d4b5");var i=o(n("9b8e")),r=o(n("868d")),a=n("eb6d"),s=new i.default,c=s.$on.bind(s);t.on=c;var u=s.$off.bind(s);t.off=u;var l=s.$once.bind(s);t.once=l;var d=s.$emit.bind(s);function f(e,t){return c("service."+e,t)}t.emit=d,(0,r.default)(f)},b9f8:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={text:{type:"",show:!0,text:"",prefixIcon:"",suffixIcon:"",mode:"",href:"",format:"",call:!1,openType:"",bold:!1,block:!1,lines:"",color:"#303133",size:15,iconStyle:function(){return{fontSize:"15px"}},decoration:"none",margin:0,lineHeight:"",align:"left",wordWrap:"normal"}}},ba37:function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,n,o,i){var r,a,s=8*i-o-1,c=(1<<s)-1,u=c>>1,l=-7,d=n?i-1:0,f=n?-1:1,p=e[t+d];for(d+=f,r=p&(1<<-l)-1,p>>=-l,l+=s;l>0;r=256*r+e[t+d],d+=f,l-=8);for(a=r&(1<<-l)-1,r>>=-l,l+=o;l>0;a=256*a+e[t+d],d+=f,l-=8);if(0===r)r=1-u;else{if(r===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,o),r-=u}return(p?-1:1)*a*Math.pow(2,r-o)},t.write=function(e,t,n,o,i,r){var a,s,c,u=8*r-i-1,l=(1<<u)-1,d=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=o?0:r-1,h=o?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),t+=a+d>=1?f/c:f*Math.pow(2,1-d),t*c>=2&&(a++,c/=2),a+d>=l?(s=0,a=l):a+d>=1?(s=(t*c-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+p]=255&a,p+=h,a/=256,u-=8);e[n+p-h]|=128*g}},ba7c:function(e,t,n){"use strict";(function(e){n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("3efd");var o=Array.prototype.unshift;function i(e){return o.call(e,"[system]"),e}function r(t){return function(){var n=!0;"debug"!==t||__uniConfig.debug||(n=!1),n&&e.console[t].apply(e.console,i(arguments))}}var a={log:r("log"),info:r("info"),warn:r("warn"),debug:r("debug"),error:r("error")};t.default=a}).call(this,n("0ee4"))},babd:function(e,t,n){"use strict";n.r(t);var o=n("8b20"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},bac6:function(e,t,n){"use strict";n.r(t);var o=n("bcbf"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},bae6:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("c223");var i=o(n("9291")),r=n("1696"),a={name:"PageBody",mounted:function(){var e=r.tabBar.height||"50px",t=".uni-app--showtabbar uni-page-wrapper {\n                    display: block;\n                    height: calc(100% - ".concat(e,");\n                    height: calc(100% - ").concat(e," - constant(safe-area-inset-bottom));\n                    height: calc(100% - ").concat(e," - env(safe-area-inset-bottom));\n                  }");t+="\n",t+='.uni-app--showtabbar uni-page-wrapper::after {\n                  content: "";\n                  display: block;\n                  width: 100%;\n                  height: '.concat(e,";\n                  height: calc(").concat(e," + constant(safe-area-inset-bottom));\n                  height: calc(").concat(e," + env(safe-area-inset-bottom));\n                }"),t+="\n",t+='.uni-app--showtabbar uni-page-head[uni-page-head-type="default"] ~ uni-page-wrapper {\n                  height: calc(100% - 44px - '.concat(e,");\n                  height: calc(100% - 44px - constant(safe-area-inset-top) - ").concat(e," - constant(safe-area-inset-bottom));\n                  height: calc(100% - 44px - env(safe-area-inset-top) - ").concat(e," - env(safe-area-inset-bottom));\n                }"),(0,i.default)(t)}};t.default=a},bb5d:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={numberKeyboard:{mode:"number",dotDisabled:!1,random:!1}}},bb80:function(e,t,n){"use strict";var o=n("8f26"),i=Function.prototype,r=i.call,a=o&&i.bind.bind(r,r);e.exports=o?a:function(e){return function(){return r.apply(e,arguments)}}},bc06:function(e,t,n){"use strict";(function(e){var o;n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.setPullDownRefreshPageId=function(e){o=e},t.startPullDownRefresh=function(){o&&e.emit(o+".stopPullDownRefresh",{},o);var t=getCurrentPages();t.length&&(o=t[t.length-1].$page.id,e.emit(o+".startPullDownRefresh",{},o));return{}},t.stopPullDownRefresh=function(){if(o)e.emit(o+".stopPullDownRefresh",{},o),o=null;else{var t=getCurrentPages();t.length&&(o=t[t.length-1].$page.id,e.emit(o+".stopPullDownRefresh",{},o))}return{}}}).call(this,n("ef66"))},bcbf:function(e,t,n){"use strict";(function(e){n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("5ef2"),n("4626"),n("bf0f"),n("2797"),n("bd06"),n("8f71"),n("5c47"),n("0506"),n("dd2b");var i=o(n("ccb8")),r=n("1ffa"),a=n("42db"),s=n("225c");var c={name:"TabBar",props:{position:{default:"bottom",validator:function(e){return-1!==["bottom","top"].indexOf(e)}},color:{type:String,default:"#999"},selectedColor:{type:String,default:"#007aff"},backgroundColor:{type:String,default:""},borderStyle:{type:String,default:"black"},iconfontSrc:{type:String,default:""},list:{type:Array,default:function(){return[]}},matchMedia:{type:Object,default:function(){return{}}},blurEffect:{type:String,default:"none"},fontSize:{type:String,default:"10px"},iconWidth:{type:String,default:"24px"},spacing:{type:String,default:"3px"},height:{type:String,default:"50px"},midButton:{type:Object,default:null}},data:function(){return{selectedIndex:0,visibleList:[],internalMidButton:{}}},computed:{tabbarBackgroundColor:function(){if(this.backgroundColor)return this.backgroundColor;if(function(e){return window.CSS&&CSS.supports&&(CSS.supports(e)||CSS.supports.apply(CSS,e.split(":")))}("backdrop-filter:blur(10px)")&&"none"!==this.blurEffect){if("dark"===this.blurEffect)return"rgb(0, 0, 0, 0.8)";if(["light","extralight"].includes(this.blurEffect))return"rgb(250, 250, 250, 0.8)"}return"#f7f7fa"},borderColor:function(){return"white"===this.borderStyle?"rgba(255, 255, 255, 0.33)":"black"===this.borderStyle?"rgba(0, 0, 0, 0.33)":this.borderStyle}},watch:{$route:{immediate:!0,handler:function(){this.visibleList.length||this._initVisibleList(),this.setSelectedIndex()}},list:{deep:!0,handler:function(){this._initVisibleList(),this.setSelectedIndex()}},midButton:function(e){this._initVisibleList()}},created:function(){var e=this;this.list.forEach((function(t){void 0===t.visible&&e.$set(t,"visible",!0)})),this.iconfontSrc&&(0,s.loadFontFace)({options:{family:"UniTabbarIconFont",source:'url("'.concat(this.iconfontSrc,'")')}})},beforeCreate:function(){this.__path__=this.$route.path},methods:{getIconPath:function(e,t){return this.selectedIndex===t&&e.selectedIconPath||e.iconPath||""},setSelectedIndex:function(){var e=this;if(this.$route.meta.isTabBar){this.__path__=this.$route.path;var t=this.visibleList.findIndex((function(t){return e.$route.meta.pagePath===t.pagePath}));this.selectedIndex=t}},_initVisibleList:function(){this.visibleList=this._initMidButton(this.list.filter((function(e){return!1!==e.visible})))},_getRealPath:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=/^([a-z-]+:)?\/\//i,n=/^data:.*,.*/;return t.test(e)||n.test(e)||0===e.indexOf("/")||(e="/"+e),(0,i.default)(e)},_switchTab:function(t,n){var o=t.text,i=t.pagePath,r=t.isMidButton,s=void 0!==r&&r;if(s)(0,a.publish)("onTabBarMidButtonTap");else{this.selectedIndex=n;var c="/"+i;c===__uniRoutes[0].alias&&(c="/");var u={index:n,text:o,pagePath:i};this.$route.path!==c?(this.__path__=this.$route.path,uni.switchTab({from:"tabBar",url:c,detail:u})):e.emit("onTabItemTap",u)}},_initMidButton:function(e){var t=e.length;return t%2===0&&(0,r.isPlainObject)(this.midButton)&&(this.internalMidButton=Object.assign({width:"50px",height:"50px",iconWidth:"24px"},this.internalMidButton,this.midButton),e.splice(~~(t/2),0,Object.assign({},this.internalMidButton,{isMidButton:!0}))),e},_uniTabbarBdStyle:function(e){return Object.assign({},{width:e.width,height:e.height,backgroundImage:e.backgroundImage?"url('"+this._getRealPath(e.backgroundImage)+"')":""})}}};t.default=c}).call(this,n("ef66"))},bcdb:function(e,t,n){"use strict";n.r(t),function(e){function n(e){return Object.prototype.toString.call(e).indexOf("Error")>-1}function o(e,t){for(var n in t)e[n]=t[n];return e}var i={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(e,t){var n=t.props,i=t.children,r=t.parent,a=t.data;a.routerView=!0;var s=r.$createElement,c=n.name,u=r.$route,l=r._routerViewCache||(r._routerViewCache={}),d=0,f=!1;while(r&&r._routerRoot!==r)r.$vnode&&r.$vnode.data.routerView&&d++,r._inactive&&(f=!0),r=r.$parent;if(a.routerViewDepth=d,f)return s(l[c],a,i);var p=u.matched[d];if(!p)return l[c]=null,s();var h=l[c]=p.components[c];a.registerRouteInstance=function(e,t){var n=p.instances[c];(t&&n!==e||!t&&n===e)&&(p.instances[c]=t)},(a.hook||(a.hook={})).prepatch=function(e,t){p.instances[c]=t.componentInstance};var g=a.props=function(e,t){switch(typeof t){case"undefined":return;case"object":return t;case"function":return t(e);case"boolean":return t?e.params:void 0;default:0}}(u,p.props&&p.props[c]);if(g){g=a.props=o({},g);var _=a.attrs=a.attrs||{};for(var v in g)h.props&&v in h.props||(_[v]=g[v],delete g[v])}return s(h,a,i)}};var r=/[!'()*]/g,a=function(e){return"%"+e.charCodeAt(0).toString(16)},s=/%2C/g,c=function(e){return encodeURIComponent(e).replace(r,a).replace(s,",")},u=decodeURIComponent;function l(e,t,n){void 0===t&&(t={});var o,i=n||d;try{o=i(e||"")}catch(a){o={}}for(var r in t)o[r]=t[r];return o}function d(e){var t={};return e=e.trim().replace(/^(\?|#|&)/,""),e?(e.split("&").forEach((function(e){var n=e.replace(/\+/g," ").split("="),o=u(n.shift()),i=n.length>0?u(n.join("=")):null;void 0===t[o]?t[o]=i:Array.isArray(t[o])?t[o].push(i):t[o]=[t[o],i]})),t):t}function f(e){var t=e?Object.keys(e).map((function(t){var n=e[t];if(void 0===n)return"";if(null===n)return c(t);if(Array.isArray(n)){var o=[];return n.forEach((function(e){void 0!==e&&(null===e?o.push(c(t)):o.push(c(t)+"="+c(e)))})),o.join("&")}return c(t)+"="+c(n)})).filter((function(e){return e.length>0})).join("&"):null;return t?"?"+t:""}var p=/\/?$/;function h(e,t,n,o){var i=o&&o.options.stringifyQuery,r=t.query||{};try{r=g(r)}catch(s){}var a={name:t.name||e&&e.name,meta:e&&e.meta||{},path:t.path||"/",hash:t.hash||"",type:t.type,query:r,params:t.params||{},fullPath:m(t,i),matched:e?v(e):[]};return n&&(a.redirectedFrom=m(n,i)),Object.freeze(a)}function g(e){if(Array.isArray(e))return e.map(g);if(e&&"object"===typeof e){var t={};for(var n in e)t[n]=g(e[n]);return t}return e}var _=h(null,{path:"/"});function v(e){var t=[];while(e)t.unshift(e),e=e.parent;return t}function m(e,t){var n=e.path,o=e.query;void 0===o&&(o={});var i=e.hash;void 0===i&&(i="");var r=t||f;return(n||"/")+r(o)+i}function y(e,t){if(void 0===e&&(e={}),void 0===t&&(t={}),!e||!t)return e===t;var n=Object.keys(e),o=Object.keys(t);return n.length===o.length&&n.every((function(n){var o=e[n],i=t[n];return"object"===typeof o&&"object"===typeof i?y(o,i):String(o)===String(i)}))}var M,I=[String,Object],C=[String,Array],b={name:"RouterLink",props:{to:{type:I,required:!0},tag:{type:String,default:"a"},exact:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,event:{type:C,default:"click"}},render:function(e){var t=this,n=this.$router,i=this.$route,r=n.resolve(this.to,i,this.append),a=r.location,s=r.route,c=r.href,u={},l=n.options.linkActiveClass,d=n.options.linkExactActiveClass,f=null==l?"router-link-active":l,g=null==d?"router-link-exact-active":d,v=null==this.activeClass?f:this.activeClass,m=null==this.exactActiveClass?g:this.exactActiveClass,M=a.path?h(null,a,null,n):s;u[m]=function(e,t){return t===_?e===t:!!t&&(e.path&&t.path?e.path.replace(p,"")===t.path.replace(p,"")&&e.hash===t.hash&&y(e.query,t.query):!(!e.name||!t.name)&&(e.name===t.name&&e.hash===t.hash&&y(e.query,t.query)&&y(e.params,t.params)))}(i,M),u[v]=this.exact?u[m]:function(e,t){return 0===e.path.replace(p,"/").indexOf(t.path.replace(p,"/"))&&(!t.hash||e.hash===t.hash)&&function(e,t){for(var n in t)if(!(n in e))return!1;return!0}(e.query,t.query)}(i,M);var I=function(e){T(e)&&(t.replace?n.replace(a):n.push(a))},C={click:T};Array.isArray(this.event)?this.event.forEach((function(e){C[e]=I})):C[this.event]=I;var b={class:u};if("a"===this.tag)b.on=C,b.attrs={href:c};else{var S=function e(t){var n;if(t)for(var o=0;o<t.length;o++){if(n=t[o],"a"===n.tag)return n;if(n.children&&(n=e(n.children)))return n}}(this.$slots.default);if(S){S.isStatic=!1;var E=S.data=o({},S.data);E.on=C;var k=S.data.attrs=o({},S.data.attrs);k.href=c}else b.on=C}return e(this.tag,b,this.$slots.default)}};function T(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&(void 0===e.button||0===e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){var t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}var S="undefined"!==typeof window;function E(e,t,n){var o=e.charAt(0);if("/"===o)return e;if("?"===o||"#"===o)return t+e;var i=t.split("/");n&&i[i.length-1]||i.pop();for(var r=e.replace(/^\//,"").split("/"),a=0;a<r.length;a++){var s=r[a];".."===s?i.pop():"."!==s&&i.push(s)}return""!==i[0]&&i.unshift(""),i.join("/")}function k(e){return e.replace(/\/\//g,"/")}var D=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},A=j,L=P,O=function(e,t){return x(P(e,t))},R=x,w=H,N=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function P(e,t){var n,o=[],i=0,r=0,a="",s=t&&t.delimiter||"/";while(null!=(n=N.exec(e))){var c=n[0],u=n[1],l=n.index;if(a+=e.slice(r,l),r=l+c.length,u)a+=u[1];else{var d=e[r],f=n[2],p=n[3],h=n[4],g=n[5],_=n[6],v=n[7];a&&(o.push(a),a="");var m=null!=f&&null!=d&&d!==f,y="+"===_||"*"===_,M="?"===_||"*"===_,I=n[2]||s,C=h||g;o.push({name:p||i++,prefix:f||"",delimiter:I,optional:M,repeat:y,partial:m,asterisk:!!v,pattern:C?q(C):v?".*":"[^"+F(I)+"]+?"})}}return r<e.length&&(a+=e.substr(r)),a&&o.push(a),o}function G(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function U(e){return encodeURI(e).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function x(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"===typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,o){for(var i="",r=n||{},a=o||{},s=a.pretty?G:encodeURIComponent,c=0;c<e.length;c++){var u=e[c];if("string"!==typeof u){var l,d=r[u.name];if(null==d){if(u.optional){u.partial&&(i+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(D(d)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var f=0;f<d.length;f++){if(l=s(d[f]),!t[c].test(l))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(l)+"`");i+=(0===f?u.prefix:u.delimiter)+l}}else{if(l=u.asterisk?U(d):s(d),!t[c].test(l))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+l+'"');i+=u.prefix+l}}else i+=u}return i}}function F(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function q(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function B(e,t){return e.keys=t,e}function V(e){return e.sensitive?"":"i"}function H(e,t,n){D(t)||(n=t||n,t=[]),n=n||{};for(var o=n.strict,i=!1!==n.end,r="",a=0;a<e.length;a++){var s=e[a];if("string"===typeof s)r+=F(s);else{var c=F(s.prefix),u="(?:"+s.pattern+")";t.push(s),s.repeat&&(u+="(?:"+c+u+")*"),u=s.optional?s.partial?c+"("+u+")?":"(?:"+c+"("+u+"))?":c+"("+u+")",r+=u}}var l=F(n.delimiter||"/"),d=r.slice(-l.length)===l;return o||(r=(d?r.slice(0,-l.length):r)+"(?:"+l+"(?=$))?"),r+=i?"$":o&&d?"":"(?="+l+"|$)",B(new RegExp("^"+r,V(n)),t)}function j(e,t,n){return D(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var o=0;o<n.length;o++)t.push({name:o,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return B(e,t)}(e,t):D(e)?function(e,t,n){for(var o=[],i=0;i<e.length;i++)o.push(j(e[i],t,n).source);var r=new RegExp("(?:"+o.join("|")+")",V(n));return B(r,t)}(e,t,n):function(e,t,n){return H(P(e,n),t,n)}(e,t,n)}A.parse=L,A.compile=O,A.tokensToFunction=R,A.tokensToRegExp=w;var K=Object.create(null);function W(e,t,n){try{var o=K[e]||(K[e]=A.compile(e));return o(t||{},{pretty:!0})}catch(i){return""}}function Y(e,t,n,o){var i=t||[],r=n||Object.create(null),a=o||Object.create(null);e.forEach((function(e){(function e(t,n,o,i,r,a){var s=i.path,c=i.name;0;var u=i.pathToRegexpOptions||{},l=function(e,t,n){n||(e=e.replace(/\/$/,""));if("/"===e[0])return e;if(null==t)return e;return k(t.path+"/"+e)}(s,r,u.strict);"boolean"===typeof i.caseSensitive&&(u.sensitive=i.caseSensitive);var d={path:l,regex:z(l,u),components:i.components||{default:i.component},instances:{},name:c,parent:r,matchAs:a,redirect:i.redirect,beforeEnter:i.beforeEnter,meta:i.meta||{},props:null==i.props?{}:i.components?i.props:{default:i.props}};i.children&&i.children.forEach((function(i){var r=a?k(a+"/"+i.path):void 0;e(t,n,o,i,d,r)}));if(void 0!==i.alias){var f=Array.isArray(i.alias)?i.alias:[i.alias];f.forEach((function(a){var s={path:a,children:i.children};e(t,n,o,s,r,d.path||"/")}))}n[d.path]||(t.push(d.path),n[d.path]=d);c&&(o[c]||(o[c]=d))})(i,r,a,e)}));for(var s=0,c=i.length;s<c;s++)"*"===i[s]&&(i.push(i.splice(s,1)[0]),c--,s--);return{pathList:i,pathMap:r,nameMap:a}}function z(e,t){var n=A(e,[],t);return n}function $(e,t,n,i){var r="string"===typeof e?{path:e}:e;if(r.name||r._normalized)return r;if(!r.path&&r.params&&t){r=o({},r),r._normalized=!0;var a=o(o({},t.params),r.params);if(t.name)r.name=t.name,r.params=a;else if(t.matched.length){var s=t.matched[t.matched.length-1].path;r.path=W(s,a,t.path)}else 0;return r}var c=function(e){var t="",n="",o=e.indexOf("#");o>=0&&(t=e.slice(o),e=e.slice(0,o));var i=e.indexOf("?");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{path:e,query:n,hash:t}}(r.path||""),u=t&&t.path||"/",d=c.path?E(c.path,u,n||r.append):u,f=l(c.query,r.query,i&&i.options.parseQuery),p=r.hash||c.hash;return p&&"#"!==p.charAt(0)&&(p="#"+p),{_normalized:!0,type:r.type,params:r.params||{},path:d,query:f,hash:p}}function X(e,t){var n=Y(e),i=n.pathList,r=n.pathMap,a=n.nameMap;function s(e,n,o){var s=$(e,n,!1,t),c=s.name;if(c){var l=a[c];if(!l)return u(null,s);var d=l.regex.keys.filter((function(e){return!e.optional})).map((function(e){return e.name}));if("object"!==typeof s.params&&(s.params={}),n&&"object"===typeof n.params)for(var f in n.params)!(f in s.params)&&d.indexOf(f)>-1&&(s.params[f]=n.params[f]);if(l)return s.path=W(l.path,s.params),u(l,s,o)}else if(s.path){s.params=s.params||{};for(var p=0;p<i.length;p++){var h=i[p],g=r[h];if(J(g.regex,s.path,s.params))return u(g,s,o)}}return u(null,s)}function c(e,n){var o=e.redirect,i="function"===typeof o?o(h(e,n,null,t)):o;if("string"===typeof i&&(i={path:i}),!i||"object"!==typeof i)return u(null,n);var r=i,c=r.name,l=r.path,d=n.query,f=n.hash,p=n.params;if(d=r.hasOwnProperty("query")?r.query:d,f=r.hasOwnProperty("hash")?r.hash:f,p=r.hasOwnProperty("params")?r.params:p,c){a[c];return s({_normalized:!0,name:c,query:d,hash:f,params:p},void 0,n)}if(l){var g=function(e,t){return E(e,t.parent?t.parent.path:"/",!0)}(l,e),_=W(g,p);return s({_normalized:!0,path:_,query:d,hash:f},void 0,n)}return u(null,n)}function u(e,n,i){return e&&e.redirect?c(e,i||n):e&&e.matchAs?function(e,t,n){var o=W(n,t.params),i=s({_normalized:!0,path:o});if(i){var r=i.matched,a=r[r.length-1];return t.params=i.params,u(a,t)}return u(null,t)}(0,n,e.matchAs):(n.params=n.params||{},e&&e.meta&&e.meta.id?n.params.__id__=e.meta.id:n.params.__id__||(n.params.__id__=t.id),e&&e.meta&&e.meta.name&&(e.meta.id?e.components.default.name=e.meta.name+"-"+n.params.__id__:(e=o({},e),e.components={default:{name:e.meta.name+"-"+n.params.__id__,render:e.components["default"].render}})),h(e,n,i,t))}return{match:s,addRoutes:function(e){Y(e,i,r,a)}}}function J(e,t,n){var o=t.match(e);if(!o)return!1;if(!n)return!0;for(var i=1,r=o.length;i<r;++i){var a=e.keys[i-1],s="string"===typeof o[i]?decodeURIComponent(o[i]):o[i];a&&(n[a.name||"pathMatch"]=s)}return!0}var Q=Object.create(null);function Z(e){window.history.replaceState({key:le(),id:e.currentRoute&&e.currentRoute.params.__id__||e.id},"",window.location.href.replace(window.location.origin,"")),window.addEventListener("popstate",(function(e){te(),e.state&&e.state.key&&function(e){ce=e}(e.state.key)}))}function ee(e,t,n,o){if(e.app){var i=e.options.scrollBehavior;i&&e.app.$nextTick((function(){var r=function(){var e=le();if(e)return Q[e]}(),a=i.call(e,t,n,o?r:null);a&&("function"===typeof a.then?a.then((function(e){re(e,r)})).catch((function(e){0})):re(a,r))}))}}function te(){var e=le();e&&(Q[e]={x:window.pageXOffset,y:window.pageYOffset})}function ne(e){return ie(e.x)||ie(e.y)}function oe(e){return{x:ie(e.x)?e.x:window.pageXOffset,y:ie(e.y)?e.y:window.pageYOffset}}function ie(e){return"number"===typeof e}function re(e,t){var n="object"===typeof e;if(n&&"string"===typeof e.selector){var o=document.querySelector(e.selector);if(o){var i=e.offset&&"object"===typeof e.offset?e.offset:{};i=function(e){return{x:ie(e.x)?e.x:0,y:ie(e.y)?e.y:0}}(i),t=function(e,t){var n=document.documentElement,o=n.getBoundingClientRect(),i=e.getBoundingClientRect();return{x:i.left-o.left-t.x,y:i.top-o.top-t.y}}(o,i)}else ne(e)&&(t=oe(e))}else n&&ne(e)&&(t=oe(e));t&&window.scrollTo(t.x,t.y)}var ae=S&&function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}(),se=S&&window.performance&&window.performance.now?window.performance:Date,ce=ue();function ue(){return se.now().toFixed(3)}function le(){return ce}function de(e,t,n){te();var o=window.history;try{n?o.replaceState({id:t,key:ce},"",e):(ce=ue(),o.pushState({id:t,key:ce},"",e))}catch(i){window.location[n?"replace":"assign"](e)}}function fe(e,t){de(e,t,!0)}function pe(e,t,n){var o=function(i){i>=e.length?n():e[i]?t(e[i],(function(){o(i+1)})):o(i+1)};o(0)}function he(e){return function(t,o,i){var r=!1,a=0,s=null;ge(e,(function(e,t,o,c){if("function"===typeof e&&void 0===e.cid){r=!0,a++;var u,l=me((function(t){(function(e){return e.__esModule||ve&&"Module"===e[Symbol.toStringTag]})(t)&&(t=t.default),e.resolved="function"===typeof t?t:M.extend(t),o.components[c]=t,a--,a<=0&&i()})),d=me((function(e){var t="Failed to resolve async component "+c+": "+e;s||(s=n(e)?e:new Error(t),i(s))}));try{u=e(l,d)}catch(p){d(p)}if(u)if("function"===typeof u.then)u.then(l,d);else{var f=u.component;f&&"function"===typeof f.then&&f.then(l,d)}}})),r||i()}}function ge(e,t){return _e(e.map((function(e){return Object.keys(e.components).map((function(n){return t(e.components[n],e.instances[n],e,n)}))})))}function _e(e){return Array.prototype.concat.apply([],e)}var ve="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag;function me(e){var t=!1;return function(){var n=[],o=arguments.length;while(o--)n[o]=arguments[o];if(!t)return t=!0,e.apply(this,n)}}var ye=function(e,t){this.router=e,this.base=function(e){if(!e)if(S){var t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^https?:\/\/[^\/]+/,"")}else e="/";"/"!==e.charAt(0)&&(e="/"+e);return e.replace(/\/$/,"")}(t),this.current=_,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[]};function Me(e,t,n,o){var i=ge(e,(function(e,o,i,r){var a=function(e,t){"function"!==typeof e&&(e=M.extend(e));return e.options[t]}(e,t);if(a)return Array.isArray(a)?a.map((function(e){return n(e,o,i,r)})):n(a,o,i,r)}));return _e(o?i.reverse():i)}function Ie(e,t){if(t)return function(){return e.apply(t,arguments)}}ye.prototype.listen=function(e){this.cb=e},ye.prototype.onReady=function(e,t){this.ready?e():(this.readyCbs.push(e),t&&this.readyErrorCbs.push(t))},ye.prototype.onError=function(e){this.errorCbs.push(e)},ye.prototype.transitionTo=function(e,t,n){var o=this,i=this.router.match(e,this.current);this.confirmTransition(i,(function(){o.updateRoute(i),t&&t(i),o.ensureURL(),o.ready||(o.ready=!0,o.readyCbs.forEach((function(e){e(i)})))}),(function(e){n&&n(e),e&&!o.ready&&(o.ready=!0,o.readyErrorCbs.forEach((function(t){t(e)})))}))},ye.prototype.confirmTransition=function(t,o,i){var r=this,a=this.current,s=function(t){n(t)&&(r.errorCbs.length?r.errorCbs.forEach((function(e){e(t)})):(function(e,t){0}(),e.error(t))),i&&i(t)},c=function(e,t){var n,o=Math.max(e.length,t.length);for(n=0;n<o;n++)if(e[n]!==t[n])break;return{updated:t.slice(0,n),activated:t.slice(n),deactivated:e.slice(n)}}(this.current.matched,t.matched),u=c.updated,l=c.deactivated,d=c.activated,f=[].concat(function(e){return Me(e,"beforeRouteLeave",Ie,!0)}(l),this.router.beforeHooks,function(e){return Me(e,"beforeRouteUpdate",Ie)}(u),d.map((function(e){return e.beforeEnter})),he(d));this.pending=t;var p=function(e,o){if(r.pending!==t)return s();try{e(t,a,(function(e){!1===e||n(e)?(r.ensureURL(!0),s(e)):"string"===typeof e||"object"===typeof e&&("string"===typeof e.path||"string"===typeof e.name)?(s(),"object"===typeof e&&e.replace?r.replace(e):r.push(e)):o(e)}))}catch(i){s(i)}};pe(f,p,(function(){var e=[],n=function(e,t,n){return Me(e,"beforeRouteEnter",(function(e,o,i,r){return function(e,t,n,o,i){return function(r,a,s){return e(r,a,(function(e){s(e),"function"===typeof e&&o.push((function(){(function e(t,n,o,i){n[o]&&!n[o]._isBeingDestroyed?t(n[o]):i()&&setTimeout((function(){e(t,n,o,i)}),16)})(e,t.instances,n,i)}))}))}}(e,i,r,t,n)}))}(d,e,(function(){return r.current===t})),i=n.concat(r.router.resolveHooks);pe(i,p,(function(){if(r.pending!==t)return s();r.pending=null,o(t),r.router.app&&r.router.app.$nextTick((function(){e.forEach((function(e){e()}))}))}))}))},ye.prototype.updateRoute=function(e){var t=this.current;this.current=e,this.cb&&this.cb(e),this.router.afterHooks.forEach((function(n){n&&n(e,t)}))};var Ce=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setupListeners=function(){var e=this,t=this.router,n=t.options.scrollBehavior,o=ae&&n;o&&Z(t);var i=be(this.base);window.addEventListener("popstate",(function(n){var r=e.current,a=be(e.base);if(e.current!==_||a!==i){var s=n.state&&n.state.id;if(!s)return window.location.reload();e.transitionTo({path:a,params:{__id__:s}},(function(e){o&&ee(t,e,r,!0)}))}}))},t.prototype.go=function(e){window.history.go(e)},t.prototype.push=function(e,t,n){var o=this;if("object"===typeof e){e.params=e.params||{};var i=e.params.__id__;switch(e.type){case"navigateTo":i||this.router.id++;break;case"redirectTo":case"reLaunch":this.router.id++;break;case"switchTab":break}i||(e.params.__id__=this.router.id)}var r=this.current;this.transitionTo(e,(function(n){de(k(o.base+n.fullPath),e.params.__id__),ee(o.router,n,r,!1),t&&t(n)}),n)},t.prototype.replace=function(e,t,n){var o=this;if("object"===typeof e){switch(e.type){case"navigateTo":case"redirectTo":case"reLaunch":this.router.id++;break;case"switchTab":break}e.params=e.params||{},e.params.__id__=this.router.id}var i=this.current;this.transitionTo(e,(function(n){fe(k(o.base+n.fullPath),e.params.__id__),ee(o.router,n,i,!1),t&&t(n)}),n)},t.prototype.ensureURL=function(e){if(be(this.base)!==this.current.fullPath){var t=k(this.base+this.current.fullPath),n=this.current.params.__id__;e?de(t,n):fe(t,n)}},t.prototype.getCurrentLocation=function(){return{path:be(this.base),params:{__id__:++this.router.id}}},t}(ye);function be(e){var t=decodeURI(window.location.pathname);return e&&0===t.indexOf(e)&&(t=t.slice(e.length)),(t||"/")+f(l(window.location.search))+window.location.hash}var Te=function(e){function t(t,n,o){e.call(this,t,n),o&&function(e){var t=be(e);if(!/^\/#/.test(t))return window.location.replace(k(e+"/#"+t)),!0}(this.base)||Se()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setupListeners=function(){var e=this,t=this.router,n=t.options.scrollBehavior,o=ae&&n;o&&Z(t),window.addEventListener(ae?"popstate":"hashchange",(function(t){var n=e.current;if(Se()){var i=t.state&&t.state.id;if(!i)return window.location.reload();e.transitionTo({path:Ee(),params:{__id__:i}},(function(t){o&&ee(e.router,t,n,!0),ae||Ae(t.fullPath,t.params.__id__)}))}}))},t.prototype.push=function(e,t,n){var o=this;if("object"===typeof e){e.params=e.params||{};var i=e.params.__id__;switch(e.type){case"navigateTo":i||this.router.id++;break;case"redirectTo":case"reLaunch":this.router.id++;break;case"switchTab":break}i||(e.params.__id__=this.router.id)}var r=this.current,a=this.router.id;this.transitionTo(e,(function(e){De(e.fullPath,a),ee(o.router,e,r,!1),t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var o=this;if("object"===typeof e){switch(e.type){case"navigateTo":case"redirectTo":case"reLaunch":this.router.id++;break;case"switchTab":break}e.params=e.params||{},e.params.__id__=this.router.id}var i=this.current,r=this.router.id;this.transitionTo(e,(function(e){Ae(e.fullPath,r),ee(o.router,e,i,!1),t&&t(e)}),n)},t.prototype.go=function(e){window.history.go(e)},t.prototype.ensureURL=function(e){var t=this.current.fullPath;Ee()!==t&&(e?De(t,this.current.params.__id__):Ae(t,this.current.params.__id__))},t.prototype.getCurrentLocation=function(){return{path:Ee(),params:{__id__:++this.router.id}}},t}(ye);function Se(){var e=Ee();return"/"===e.charAt(0)||(Ae("/"+e),!1)}function Ee(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":decodeURI(e.slice(t+1))}function ke(e){var t=window.location.href,n=t.indexOf("#"),o=n>=0?t.slice(0,n):t;return o+"#"+e}function De(e,t){ae?de(ke(e),t):window.location.hash=e}function Ae(e,t){ae?fe(ke(e),t):window.location.replace(ke(e))}var Le=function(e){function t(t,n){e.call(this,t,n),this.stack=[],this.index=-1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.push=function(e,t,n){var o=this;this.transitionTo(e,(function(e){o.stack=o.stack.slice(0,o.index+1).concat(e),o.index++,t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var o=this;this.transitionTo(e,(function(e){o.stack=o.stack.slice(0,o.index).concat(e),t&&t(e)}),n)},t.prototype.go=function(e){var t=this,n=this.index+e;if(!(n<0||n>=this.stack.length)){var o=this.stack[n];this.confirmTransition(o,(function(){t.index=n,t.updateRoute(o)}))}},t.prototype.getCurrentLocation=function(){var e=this.stack[this.stack.length-1];return e?e.fullPath:"/"},t.prototype.ensureURL=function(){},t}(ye),Oe=function(e){void 0===e&&(e={}),this.app=null,this.apps=[],this.options=e,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=X(e.routes||[],this),this.id=e.id||1,this.minId=e.id||1;var t=e.mode||"hash";switch(this.fallback="history"===t&&!ae&&!1!==e.fallback,this.fallback&&(t="hash"),S||(t="abstract"),this.mode=t,t){case"history":this.history=new Ce(this,e.base);break;case"hash":this.history=new Te(this,e.base,this.fallback);break;case"abstract":this.history=new Le(this,e.base);break;default:0}},Re={currentRoute:{configurable:!0}};function we(e,t){return e.push(t),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}Oe.prototype.match=function(e,t,n){return this.matcher.match(e,t,n)},Re.currentRoute.get=function(){return this.history&&this.history.current},Oe.prototype.init=function(e){var t=this;if(this.apps.push(e),!this.app){this.app=e;var n=this.history;if(n instanceof Ce){var o=function(){n.setupListeners()};n.transitionTo(n.getCurrentLocation(),o,o)}else if(n instanceof Te){var i=function(){n.setupListeners()};n.transitionTo(n.getCurrentLocation(),i,i)}n.listen((function(e){t.apps.forEach((function(t){t._route=e}))}))}},Oe.prototype.beforeEach=function(e){return we(this.beforeHooks,e)},Oe.prototype.beforeResolve=function(e){return we(this.resolveHooks,e)},Oe.prototype.afterEach=function(e){return we(this.afterHooks,e)},Oe.prototype.onReady=function(e,t){this.history.onReady(e,t)},Oe.prototype.onError=function(e){this.history.onError(e)},Oe.prototype.push=function(e,t,n){this.history.push(e,t,n)},Oe.prototype.replace=function(e,t,n){this.history.replace(e,t,n)},Oe.prototype.go=function(e){this.history.go(e)},Oe.prototype.back=function(){this.go(-1)},Oe.prototype.forward=function(){this.go(1)},Oe.prototype.getMatchedComponents=function(e){var t=e?e.matched?e:this.resolve(e).route:this.currentRoute;return t?[].concat.apply([],t.matched.map((function(e){return Object.keys(e.components).map((function(t){return e.components[t]}))}))):[]},Oe.prototype.resolve=function(e,t,n){var o=$(e,t||this.history.current,n,this),i=this.match(o,t),r=i.redirectedFrom||i.fullPath,a=this.history.base,s=function(e,t,n){var o="hash"===n?"#"+t:t;return e?k(e+"/"+o):o}(a,r,this.mode);return{location:o,route:i,href:s,normalizedTo:o,resolved:i}},Oe.prototype.addRoutes=function(e){this.matcher.addRoutes(e),this.history.current!==_&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(Oe.prototype,Re),Oe.install=function e(t){if(!e.installed||M!==t){e.installed=!0,M=t;var n=function(e){return void 0!==e},o=function(e,t){var o=e.$options._parentVnode;n(o)&&n(o=o.data)&&n(o=o.registerRouteInstance)&&o(e,t)};t.mixin({beforeCreate:function(){n(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),t.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,o(this,this)},destroyed:function(){o(this)}}),Object.defineProperty(t.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(t.prototype,"$route",{get:function(){return this._routerRoot._route}}),t.component("RouterView",i),t.component("RouterLink",b);var r=t.config.optionMergeStrategies;r.beforeRouteEnter=r.beforeRouteLeave=r.beforeRouteUpdate=r.created}},Oe.version="3.0.1",t["default"]=Oe}.call(this,n("ba7c")["default"])},bce5:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("eeb2")),r=o(n("643c")),a=o(n("18cd")),s=[i.default,r.default,a.default];t.default=s},bd06:function(e,t,n){"use strict";var o=n("8bdb"),i=n("4d16").findIndex,r=n("1cb5"),a=!0;"findIndex"in[]&&Array(1)["findIndex"]((function(){a=!1})),o({target:"Array",proto:!0,forced:a},{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r("findIndex")},bd7d:function(e,t,n){"use strict";var o=n("7ddb"),i=n("036b").indexOf,r=o.aTypedArray,a=o.exportTypedArrayMethod;a("indexOf",(function(e){return i(r(this),e,arguments.length>1?arguments[1]:void 0)}))},bd8a:function(e,t){e.exports={}},bda5:function(e,t,n){"use strict";var o=n("1c06");e.exports=function(e){return o(e)||null===e}},bdbb:function(e,t,n){function o(t){return e.exports=o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports["default"]=e.exports,o(t)}n("01a2"),n("e39c"),n("bf0f"),n("844d"),n("18f7"),n("de6c"),e.exports=o,e.exports.__esModule=!0,e.exports["default"]=e.exports},bdc2:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){t.getApp;var n=t.getCurrentPages;function o(e){return function(t,o){o=parseInt(o);var i=n(),a=i.find((function(e){return e.$page.id===o}));a&&(0,r.callPageHook)(a,e,t)}}var a=(0,i.default)("requestComponentInfo");var s=(0,i.default)("requestComponentObserver");var c=(0,i.default)("requestMediaQueryObserver");e("onPageReady",o("onReady"));e("onPageScroll",o("onPageScroll")),e("onReachBottom",o("onReachBottom")),e("onRequestComponentInfo",(function(e){var t=e.reqId,n=e.res,o=a.pop(t);o&&o(n)})),e("onRequestComponentObserver",(function(e){var t=e.reqId,n=e.reqEnd,o=e.res,i=s.get(t);if(i){if(n)return void s.pop(t);i(o)}})),e("onRequestMediaQueryObserver",(function(e){var t=e.reqId,n=e.reqEnd,o=e.res,i=c.get(t);if(i){if(n)return void c.pop(t);i(o)}}))},n("e966"),n("aa77"),n("bf0f");var i=o(n("cd07")),r=n("e0f3")},bdec:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={section:{title:"",subTitle:"更多",right:!0,fontSize:15,bold:!0,color:"#303133",subColor:"#909399",showLine:!0,lineColor:"",arrow:!0}}},bed2:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={modal:{show:!1,title:"",content:"",confirmText:"确认",cancelText:"取消",showConfirmButton:!0,showCancelButton:!1,confirmColor:"#2979ff",cancelColor:"#606266",buttonReverse:!1,zoom:!0,asyncClose:!1,closeOnClickOverlay:!1,negativeTop:0,width:"650rpx",confirmButtonShape:"",duration:400}}},bef2:function(e,t,n){var o=n("d7b8"),i=n("f0b5"),r=n("d191"),a=n("e158"),s=n("1b8e"),c=TypeError;e.exports=function(e,t){var n=arguments.length<2?s(e):t;if(i(n))return r(o(n,e));throw c(a(e)+" is not iterable")}},bf0f:function(e,t,n){"use strict";var o=n("569b"),i=n("81a9"),r=n("7934");o||i(Object.prototype,"toString",r,{unsafe:!0})},bf1b:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("bf0f"),n("2797"),n("dc8a"),n("aa9c"),n("8f71"),n("dd2b"),n("c223");var i=o(n("80b1")),r=o(n("efe5")),a=function(){function e(t,n){var o=this;(0,i.default)(this,e),this.id=t,this.listener={},this.emitCache={},n&&Object.keys(n).forEach((function(e){o.on(e,n[e])}))}return(0,r.default)(e,[{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var i=this.listener[e];if(!i)return(this.emitCache[e]||(this.emitCache[e]=[])).push(n);i.forEach((function(e){e.fn.apply(e.fn,n)})),this.listener[e]=i.filter((function(e){return"once"!==e.type}))}},{key:"on",value:function(e,t){this._addListener(e,"on",t),this._clearCache(e)}},{key:"once",value:function(e,t){this._addListener(e,"once",t),this._clearCache(e)}},{key:"off",value:function(e,t){var n=this.listener[e];if(n)if(t)for(var o=0;o<n.length;)n[o].fn===t&&(n.splice(o,1),o--),o++;else delete this.listener[e]}},{key:"_clearCache",value:function(e){var t=this.emitCache[e];if(t)for(;t.length>0;)this.emit.apply(this,[e].concat(t.shift()))}},{key:"_addListener",value:function(e,t,n){(this.listener[e]||(this.listener[e]=[])).push({fn:n,type:t})}}]),e}();t.default=a},bf4d:function(e,t,n){n("c223");var o=[].concat(["base64ToArrayBuffer","arrayBufferToBase64","addInterceptor","removeInterceptor","interceptors"],["request","uploadFile","downloadFile","connectSocket","onSocketOpen","onSocketError","sendSocketMessage","onSocketMessage","closeSocket","onSocketClose","getUpdateManager","configMTLS"],["navigateTo","redirectTo","reLaunch","switchTab","navigateBack"],["setStorage","setStorageSync","getStorage","getStorageSync","getStorageInfo","getStorageInfoSync","removeStorage","removeStorageSync","clearStorage","clearStorageSync"],["getLocation","chooseLocation","openLocation","createMapContext","onLocationChange","onLocationChangeError","startLocationUpdate","stopLocationUpdate","offLocationChange","offLocationChangeError"],["chooseImage","chooseFile","previewImage","closePreviewImage","getImageInfo","getVideoInfo","saveImageToPhotosAlbum","compressImage","compressVideo","getRecorderManager","getBackgroundAudioManager","createAudioContext","createInnerAudioContext","chooseVideo","saveVideoToPhotosAlbum","createVideoContext","createCameraContext","createLivePlayerContext","createLivePusherContext"],["getSystemInfo","getSystemInfoSync","getWindowInfo","getDeviceInfo","getAppBaseInfo","canIUse","onMemoryWarning","getNetworkType","onNetworkStatusChange","offNetworkStatusChange","onAccelerometerChange","offAccelerometerChange","startAccelerometer","stopAccelerometer","onCompassChange","offCompassChange","startCompass","stopCompass","onGyroscopeChange","startGyroscope","stopGyroscope","makePhoneCall","scanCode","setClipboardData","getClipboardData","setScreenBrightness","getScreenBrightness","setKeepScreenOn","onUserCaptureScreen","vibrateLong","vibrateShort","addPhoneContact","openBluetoothAdapter","startBluetoothDevicesDiscovery","onBluetoothDeviceFound","stopBluetoothDevicesDiscovery","onBluetoothAdapterStateChange","getConnectedBluetoothDevices","getBluetoothDevices","getBluetoothAdapterState","closeBluetoothAdapter","writeBLECharacteristicValue","readBLECharacteristicValue","onBLEConnectionStateChange","onBLECharacteristicValueChange","notifyBLECharacteristicValueChange","getBLEDeviceServices","getBLEDeviceCharacteristics","createBLEConnection","closeBLEConnection","setBLEMTU","getBLEDeviceRSSI","onBeaconServiceChange","onBeaconUpdate","getBeacons","startBeaconDiscovery","stopBeaconDiscovery","checkIsSupportSoterAuthentication","checkIsSoterEnrolledInDevice","startSoterAuthentication","onThemeChange","offThemeChange","onUIStyleChange","getSystemSetting","getAppAuthorizeSetting","openAppAuthorizeSetting"],["hideKeyboard","onKeyboardHeightChange","offKeyboardHeightChange","getSelectedTextRange"],["showToast","hideToast","showLoading","hideLoading","showModal","showActionSheet","setNavigationBarTitle","setNavigationBarColor","showNavigationBarLoading","hideNavigationBarLoading","setTabBarItem","setTabBarStyle","hideTabBar","showTabBar","setTabBarBadge","removeTabBarBadge","showTabBarRedDot","hideTabBarRedDot","onTabBarMidButtonTap","setBackgroundColor","setBackgroundTextStyle","createAnimation","pageScrollTo","onWindowResize","offWindowResize","loadFontFace","startPullDownRefresh","stopPullDownRefresh","createSelectorQuery","createIntersectionObserver","createMediaQueryObserver","getMenuButtonBoundingClientRect","showTopWindow","showLeftWindow","showRightWindow","hideTopWindow","hideLeftWindow","hideRightWindow","getTopWindowStyle","getLeftWindowStyle","getRightWindowStyle","setTopWindowStyle","setLeftWindowStyle","setRightWindowStyle","getLocale","setLocale","onLocaleChange"],["$emit","$on","$once","$off"],["saveFile","getSavedFileList","getSavedFileInfo","removeSavedFile","getFileInfo","openDocument","getFileSystemManager"],["createOffscreenCanvas","createCanvasContext","canvasToTempFilePath","canvasPutImageData","canvasGetImageData"],["getProvider","login","checkSession","getUserInfo","getUserProfile","preLogin","closeAuthView","getCheckBoxState","getUniverifyManager","share","shareWithSystem","showShareMenu","hideShareMenu","requestPayment","subscribePush","unsubscribePush","onPush","offPush","requireNativePlugin","upx2px","restoreGlobal","requireGlobal","getSubNVueById","getCurrentSubNVue","setPageMeta","onHostEventReceive","onNativeEventReceive","sendNativeEvent","preloadPage","unPreloadPage","loadSubPackage","sendHostEvent","navigateToMiniProgram","getLaunchOptionsSync","getEnterOptionsSync","initUTSProxyClass","initUTSProxyFunction","initUTSIndexClassName","initUTSClassName","initUTSPackageName","requireUTSPlugin","registerUTSPlugin","registerUTSInterface"],["createRewardedVideoAd","createFullScreenVideoAd","createInterstitialAd","createInteractiveAd"],["invokePushCallback","getPushClientId","onPushMessage","offPushMessage","createPushMessage","getChannelManager"]);e.exports=o},bf70:function(e,t,n){"use strict";(function(e){n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.request=function(t,n){var o,i=t.url,r=t.data,a=t.header,l=t.method,d=t.dataType,f=t.responseType,p=t.withCredentials,h=t.timeout,g=void 0===h?__uniConfig.networkTimeout&&__uniConfig.networkTimeout.request||6e4:h,_=e,v=_.invokeCallbackHandler,m=null;for(var y in a)if((0,s.hasOwn)(a,y)&&"content-type"===y.toLowerCase()){o=a[y],o=0===o.indexOf("application/json")?"json":0===o.indexOf("application/x-www-form-urlencoded")?"urlencoded":"string";break}if("GET"!==l)if("string"===typeof r||r instanceof ArrayBuffer)m=r;else if("json"===o)try{m=JSON.stringify(r)}catch(E){m=r.toString()}else if("urlencoded"===o){var M=[];for(var I in r)(0,s.hasOwn)(r,I)&&M.push(encodeURIComponent(I)+"="+encodeURIComponent(r[I]));m=M.join("&")}else m=r.toString();var C=new XMLHttpRequest,b=new c(C);for(var T in C.open(l,i),a)(0,s.hasOwn)(a,T)&&C.setRequestHeader(T,a[T]);var S=setTimeout((function(){C.onload=C.onabort=C.onerror=null,b.abort(),v(n,{errMsg:"request:fail timeout"})}),g);return C.responseType=f,C.onload=function(){clearTimeout(S);var e=C.status,t="text"===f?C.responseText:C.response;if("text"===f&&"json"===d)try{t=JSON.parse(t)}catch(E){}v(n,{data:t,statusCode:e,header:u(C.getAllResponseHeaders()),errMsg:"request:ok"})},C.onabort=function(){clearTimeout(S),v(n,{errMsg:"request:fail abort"})},C.onerror=function(){clearTimeout(S),v(n,{errMsg:"request:fail"})},C.withCredentials=p,C.send(m),b},n("bf0f"),n("2797"),n("5c47"),n("2c10"),n("5ef2"),n("80e3"),n("4db2"),n("d4b5"),n("c9b5"),n("ab80"),n("aa9c");var i=o(n("80b1")),r=o(n("efe5")),a=o(n("39d8")),s=n("1ffa"),c=function(){function e(t){(0,i.default)(this,e),(0,a.default)(this,"_xhr",void 0),this._xhr=t}return(0,r.default)(e,[{key:"abort",value:function(){this._xhr&&(this._xhr.abort(),delete this._xhr)}}]),e}();function u(e){var t={},n=e.split("\n");return n.forEach((function(e){var n=e.match(/(\S+\s*):\s*(.*)/);if(n&&3===n.length){var o=n[1],i=n[2];t[o]=i}})),t}}).call(this,n("ef66"))},c02e:function(e,t,n){"use strict";var o=n("6a50");o("Int32",(function(e){return function(t,n,o){return e(this,t,n,o)}}))},c06e:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("b853")),r=o(n("e033")),a=o(n("b63c")),s={Toast:i.default,PreviewImage:r.default,Modal:a.default};t.default=s},c077:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={datetimePicker:{show:!1,showToolbar:!0,value:"",title:"",mode:"datetime",maxDate:new Date((new Date).getFullYear()+10,0,1).getTime(),minDate:new Date((new Date).getFullYear()-10,0,1).getTime(),minHour:0,maxHour:23,minMinute:0,maxMinute:59,filter:null,formatter:null,loading:!1,itemHeight:44,cancelText:"取消",confirmText:"确认",cancelColor:"#909193",confirmColor:"#3c9cff",visibleItemCount:5,closeOnClickOverlay:!1,defaultIndex:function(){return[]}}};t.default=o},c0d6:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={carKeyboard:{random:!1}}},c0fc:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this.$createElement,t=this._self._c||e;return t("uni-swiper-item",this._g({},this.$listeners),[this._t("default")],2)},i=[]},c182:function(e,t,n){"use strict";(function(e){n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.$router.beforeEach((function(n,o,i){d.call(e,n,o,i,t)})),e.$router.afterEach((function(t,n){f.call(e,t,n)}))},t.getTabBarScrollPosition=function(e){return s[e]},n("5ef2"),n("aa9c"),n("fd3c"),n("dd2b"),n("e966"),n("d4b5"),n("aa77"),n("bf0f"),n("2797"),n("dc69");var o=n("e0f3");function i(e){-1===this.keepAliveInclude.indexOf(e)&&this.keepAliveInclude.push(e)}var r=[];function a(e){if("number"===typeof e)r=this.keepAliveInclude.splice(-(e-1)).map((function(e){return parseInt(e.split("-").pop())}));else{var t=this.keepAliveInclude.indexOf(e);-1!==t&&this.keepAliveInclude.splice(t,1)}}var s=Object.create(null);function c(e,t,n){t&&n&&t.meta.isTabBar&&n.meta.isTabBar&&function(e){s[e]={x:window.pageXOffset,y:window.pageYOffset}}(n.params.__id__);for(var i=getCurrentPages(),r=i.length-1;r>=0;r--){var c=i[r],u=c.$page.meta;u.isTabBar||(a.call(this,u.name+"-"+c.$page.id),(0,o.callPageHook)(c,"onUnload"))}}function u(e){__uniConfig.reLaunch=(__uniConfig.reLaunch||1)+1;for(var t=getCurrentPages(!0),n=t.length-1;n>=0;n--)(0,o.callPageHook)(t[n],"onUnload"),t[n].$destroy();this.keepAliveInclude=[],s=Object.create(null)}var l=[];function d(e,t,n,o){l=getCurrentPages(!0);var r=t.params.__id__,s=e.params.__id__,d=e.meta.name+"-"+s;if(s===r&&"reLaunch"!==e.type)e.fullPath!==t.fullPath?(i.call(this,d),n()):n(!1);else if(e.meta.id&&e.meta.id!==s)n({path:e.path,replace:!0});else{var f=t.meta.name+"-"+r;switch(e.type){case"navigateTo":break;case"redirectTo":a.call(this,f),t.meta&&t.meta.isQuit&&(e.meta.isQuit=!0,e.meta.isEntry=!!t.meta.isEntry);break;case"switchTab":c.call(this,o,e,t);break;case"reLaunch":u.call(this,d),e.meta.isQuit=!0;break;default:r&&r>s&&(a.call(this,f),this.$router._$delta>1&&a.call(this,this.$router._$delta));break}if("reLaunch"!==e.type&&"redirectTo"!==e.type&&t.meta.id&&i.call(this,f),i.call(this,d),e.meta&&e.meta.name){document.body.className="uni-body "+e.meta.name;var p="nvue-dir-"+__uniConfig.nvue["flex-direction"];e.meta.isNVue?(document.body.setAttribute("nvue",""),document.body.setAttribute(p,"")):(document.body.removeAttribute("nvue"),document.body.removeAttribute(p))}n()}}function f(t,n){var i,a=n.params.__id__,s=t.params.__id__;function c(e){if(e){(0,o.callPageHook)(e,"onUnload");var t=l.indexOf(e);t>=0&&l.splice(t,1)}}switch(i=n.meta.isSet?l.find((function(e){return e.$page.meta.pagePath===n.meta.pagePath})):l.find((function(e){return e.$page.id===a})),t.type){case"navigateTo":i&&(0,o.callPageHook)(i,"onHide");break;case"redirectTo":c(i);break;case"switchTab":n.meta.isTabBar&&i&&(0,o.callPageHook)(i,"onHide");break;case"reLaunch":break;default:a&&a>s&&(c(i),this.$router._$delta>1&&r.reverse().forEach((function(e){var t=l.find((function(t){return t.$page.id===e}));c(t)})));break}if(delete this.$router._$delta,r.length=0,"reLaunch"!==t.type){var u,d=getCurrentPages(!0);u=t.meta.isSet?d.find((function(e){return e.$page.meta.pagePath===t.meta.pagePath})):d.find((function(e){return e.$page.id===s})),u&&(setTimeout((function(){e.emit("onNavigationBarChange",u.$parent.$parent.navigationBar),(0,o.callPageHook)(u,"onShow")}),0),document.title=u.$parent.$parent.navigationBar.titleText)}}}).call(this,n("ef66"))},c199:function(e,t,n){var o=n("77cd"),i=n("6314"),r=n("d953"),a=n("415b");e.exports=function(e,t,n){for(var s=i(t),c=a.f,u=r.f,l=0;l<s.length;l++){var d=s[l];o(e,d)||n&&o(n,d)||c(e,d,u(t,d))}}},c1a3:function(e,t,n){"use strict";n("15ab")},c1db:function(e,t,n){"use strict";n.r(t);var o=n("f568"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},c209:function(e,t,n){var o,i,r,a=n("bdbb").default;n("f7a5"),function(s,c){"object"===a(t)?e.exports=t=c(n("5e74")):(i=[n("5e74")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))}(0,(function(e){return function(t){var n=e,o=n.lib,i=o.WordArray,r=o.Hasher,a=n.algo,s=[],c=[];(function(){function e(e){for(var n=t.sqrt(e),o=2;o<=n;o++)if(!(e%o))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}var o=2,i=0;while(i<64)e(o)&&(i<8&&(s[i]=n(t.pow(o,.5))),c[i]=n(t.pow(o,1/3)),i++),o++})();var u=[],l=a.SHA256=r.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],i=n[1],r=n[2],a=n[3],s=n[4],l=n[5],d=n[6],f=n[7],p=0;p<64;p++){if(p<16)u[p]=0|e[t+p];else{var h=u[p-15],g=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,_=u[p-2],v=(_<<15|_>>>17)^(_<<13|_>>>19)^_>>>10;u[p]=g+u[p-7]+v+u[p-16]}var m=s&l^~s&d,y=o&i^o&r^i&r,M=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),I=(s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25),C=f+I+m+c[p]+u[p],b=M+y;f=d,d=l,l=s,s=a+C|0,a=r,r=i,i=o,o=C+b|0}n[0]=n[0]+o|0,n[1]=n[1]+i|0,n[2]=n[2]+r|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+l|0,n[6]=n[6]+d|0,n[7]=n[7]+f|0},_doFinalize:function(){var e=this._data,n=e.words,o=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=t.floor(o/4294967296),n[15+(i+64>>>9<<4)]=o,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=r._createHelper(l),n.HmacSHA256=r._createHmacHelper(l)}(Math),e.SHA256}))},c215:function(e,t,n){"use strict";var o=n("71e9"),i=n("1c06"),r=n("ddd3"),a=n("60bc"),s=n("df92"),c=n("8c08"),u=TypeError,l=c("toPrimitive");e.exports=function(e,t){if(!i(e)||r(e))return e;var n,c=a(e,l);if(c){if(void 0===t&&(t="default"),n=o(c,e,t),!i(n)||r(n))return n;throw new u("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},c223:function(e,t,n){"use strict";var o=n("8bdb"),i=n("af9e"),r=n("ac5f"),a=n("1c06"),s=n("1099"),c=n("1fc1"),u=n("41c7"),l=n("85f7"),d=n("3242"),f=n("a554"),p=n("8c08"),h=n("0173"),g=p("isConcatSpreadable"),_=h>=51||!i((function(){var e=[];return e[g]=!1,e.concat()[0]!==e})),v=function(e){if(!a(e))return!1;var t=e[g];return void 0!==t?!!t:r(e)},m=!_||!f("concat");o({target:"Array",proto:!0,arity:1,forced:m},{concat:function(e){var t,n,o,i,r,a=s(this),f=d(a,0),p=0;for(t=-1,o=arguments.length;t<o;t++)if(r=-1===t?a:arguments[t],v(r))for(i=c(r),u(p+i),n=0;n<i;n++,p++)n in r&&l(f,p,r[n]);else u(p+1),l(f,p++,r);return f.length=p,f}})},c238:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.decodedQuery=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return Object.keys(e).forEach((function(n){try{t[n]=s(e[n])}catch(o){t[n]=e[n]}})),t},t.parseQuery=function(e){var t={};if(e=e.trim().replace(/^(\?|#|&)/,""),!e)return t;return e.split("&").forEach((function(e){var n=e.replace(/\+/g," ").split("="),o=s(n.shift()),i=n.length>0?s(n.join("=")):null;void 0===t[o]?t[o]=i:Array.isArray(t[o])?t[o].push(i):t[o]=[t[o],i]})),t},t.stringifyQuery=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,n=e?Object.keys(e).map((function(n){var o=e[n];if(void 0===o)return"";if(null===o)return t(n);if(Array.isArray(o)){var i=[];return o.forEach((function(e){void 0!==e&&(null===e?i.push(t(n)):i.push(t(n)+"="+t(e)))})),i.join("&")}return t(n)+"="+t(o)})).filter((function(e){return e.length>0})).join("&"):null;return n?"?".concat(n):""},n("c9b5"),n("bf0f"),n("ab80"),n("5c47"),n("a1c1"),n("0c26"),n("2797"),n("aa9c"),n("8f71"),n("fd3c"),n("dc8a");var o=/[!'()*]/g,i=function(e){return"%"+e.charCodeAt(0).toString(16)},r=/%2C/g,a=function(e){return encodeURIComponent(e).replace(o,i).replace(r,",")},s=decodeURIComponent},c2388:function(e,t,n){"use strict";var o=n("af9e");e.exports=!o((function(){return Object.isExtensible(Object.preventExtensions({}))}))},c240:function(e,t,n){"use strict";var o=n("181d");o(Math,"Math",!0)},c241:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("uni-page-head",{attrs:{"uni-page-head-type":e.type}},[n("div",{staticClass:"uni-page-head",class:e.headClass,style:{transitionDuration:e.duration,transitionTimingFunction:e.timingFunc,backgroundColor:e.bgColor,color:e.textColor}},[n("div",{staticClass:"uni-page-head-hd"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.backButton,expression:"backButton"}],staticClass:"uni-page-head-btn",on:{click:e._back}},[n("i",{staticClass:"uni-btn-icon",style:{color:e.color,fontSize:"27px"}},[e._v("")])]),n("div",{staticClass:"uni-page-head-ft"},[e._l(e.btns,(function(t,o){return["left"===t.float?n("div",{key:o,staticClass:"uni-page-head-btn",class:{"uni-page-head-btn-red-dot":t.redDot||t.badgeText,"uni-page-head-btn-select":t.select},style:{backgroundColor:"transparent"===e.type?t.background:"transparent",width:t.width},attrs:{"badge-text":t.badgeText}},[n("i",{staticClass:"uni-btn-icon",style:e._formatBtnStyle(t),domProps:{innerHTML:e._s(e._formatBtnFontText(t))},on:{click:function(t){return e._onBtnClick(o)}}})]):e._e()]}))],2)]),e.searchInput?e._e():n("div",{staticClass:"uni-page-head-bd"},[n("div",{staticClass:"uni-page-head__title",style:{fontSize:e.titleSize,opacity:"transparent"===e.type?0:1}},[e.loading?n("i",{staticClass:"uni-loading"}):e._e(),""!==e.titleImage?n("img",{staticClass:"uni-page-head__title_image",attrs:{src:e.titleImage}}):[e._v("\n          "+e._s(e.titleText)+"\n        ")]],2)]),e.searchInput?n("div",{staticClass:"uni-page-head-search",style:{"border-radius":e.searchInput.borderRadius,"background-color":e.searchInput.backgroundColor}},[n("div",{staticClass:"uni-page-head-search-placeholder",class:["uni-page-head-search-placeholder-"+(e.focus||e.showPlaceholder?"left":e.searchInput.align)],style:{color:e.searchInput.placeholderColor},domProps:{textContent:e._s(e.showPlaceholder||e.composing?"":e.searchInput.placeholder)}}),n("v-uni-input",{ref:"input",staticClass:"uni-page-head-search-input",style:{color:e.searchInput.color},attrs:{focus:e.searchInput.autoFocus,disabled:e.searchInput.disabled,"placeholder-style":"color:"+e.searchInput.placeholderColor,"confirm-type":"search"},on:{focus:e._focus,blur:e._blur,"update:value":e._input},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),e.text?n("i",{staticClass:"uni-icon-clear",on:{click:e._clearInput}}):e._e()],1):e._e(),n("div",{staticClass:"uni-page-head-ft"},[e._l(e.btns,(function(t,o){return["left"!==t.float?n("div",{key:o,staticClass:"uni-page-head-btn",class:{"uni-page-head-btn-red-dot":t.redDot||t.badgeText,"uni-page-head-btn-select":t.select},style:{backgroundColor:"transparent"===e.type?t.background:"transparent",width:t.width},attrs:{"badge-text":t.badgeText}},[n("i",{staticClass:"uni-btn-icon",style:e._formatBtnStyle(t),domProps:{innerHTML:e._s(e._formatBtnFontText(t))},on:{click:function(t){return e._onBtnClick(o)}}})]):e._e()]}))],2)]),"transparent"!==e.type&&"float"!==e.type?n("div",{staticClass:"uni-placeholder",class:{"uni-placeholder-titlePenetrate":e.titlePenetrate}}):e._e()])},i=[]},c24b:function(e,t,n){"use strict";var o=n("8bdb"),i=n("c2388"),r=n("af9e"),a=n("1c06"),s=n("d0b1").onFreeze,c=Object.freeze,u=r((function(){c(1)}));o({target:"Object",stat:!0,forced:u,sham:!i},{freeze:function(e){return c&&a(e)?c(s(e)):e}})},c29a:function(e,t,n){"use strict";(function(e){n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("bf0f"),n("2797"),n("dc8a"),n("5ef2"),n("c223");var o=n("1ffa"),i={props:{id:{type:String,default:""}},created:function(){var e=this;this._addListeners(this.id),this.$watch("id",(function(t,n){e._removeListeners(n,!0),e._addListeners(t,!0)}))},beforeDestroy:function(){this._removeListeners(this.id)},methods:{_addListeners:function(t,n){var i=this;if(!n||t){var r=this.$options.listeners;(0,o.isPlainObject)(r)&&Object.keys(r).forEach((function(o){n?0!==o.indexOf("@")&&0!==o.indexOf("uni-")&&e.on("uni-".concat(o,"-").concat(i.$page.id,"-").concat(t),i[r[o]]):0===o.indexOf("@")?i.$on("uni-".concat(o.substr(1)),i[r[o]]):0===o.indexOf("uni-")?e.on(o,i[r[o]]):t&&e.on("uni-".concat(o,"-").concat(i.$page.id,"-").concat(t),i[r[o]])}))}},_removeListeners:function(t,n){var i=this;if(!n||t){var r=this.$options.listeners;(0,o.isPlainObject)(r)&&Object.keys(r).forEach((function(o){n?0!==o.indexOf("@")&&0!==o.indexOf("uni-")&&e.off("uni-".concat(o,"-").concat(i.$page.id,"-").concat(t),i[r[o]]):0===o.indexOf("@")?i.$off("uni-".concat(o.substr(1)),i[r[o]]):0===o.indexOf("uni-")?e.off(o,i[r[o]]):t&&e.off("uni-".concat(o,"-").concat(i.$page.id,"-").concat(t),i[r[o]])}))}}}};t.default=i}).call(this,n("b8be"))},c2d7:function(e,t){var n="object"==typeof document&&document.all,o="undefined"==typeof n&&void 0!==n;e.exports={all:n,IS_HTMLDDA:o}},c337:function(e,t,n){"use strict";var o=n("338c"),i=n("474f"),r=n("1099"),a=n("b223"),s=n("1d57"),c=a("IE_PROTO"),u=Object,l=u.prototype;e.exports=s?u.getPrototypeOf:function(e){var t=r(e);if(o(t,c))return t[c];var n=t.constructor;return i(n)&&t instanceof n?n.prototype:t instanceof u?l:null}},c346:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={actionSheet:{show:!1,title:"",description:"",actions:function(){return[]},index:"",cancelText:"",closeOnClickAction:!0,safeAreaInsetBottom:!0,openType:"",closeOnClickOverlay:!0,round:0}}},c34d:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.createSelectorQuery=function(e){if(e)return new g(e);return new g((0,s.getCurrentPageVm)("createSelectorQuery"))},n("bf0f"),n("2797"),n("aa9c");var i=o(n("80b1")),r=o(n("efe5")),a=n("1ffa"),s=n("a745"),c=n("4e86"),u=n("75f9"),l=n("e58a"),d=n("75d4"),f={canvas:c.CanvasContext,map:u.MapContext,video:l.VideoContext,editor:d.EditorContext};function p(e){if(e&&e.context){var t=e.context,n=t.id,o=t.name,i=t.page,r=f[o];e.context=r&&new r(n,i)}}var h=function(){function e(t,n,o,r){(0,i.default)(this,e),this._selectorQuery=t,this._component=n,this._selector=o,this._single=r}return(0,r.default)(e,[{key:"boundingClientRect",value:function(e){return this._selectorQuery._push(this._selector,this._component,this._single,{id:!0,dataset:!0,rect:!0,size:!0},e),this._selectorQuery}},{key:"fields",value:function(e,t){return this._selectorQuery._push(this._selector,this._component,this._single,e,t),this._selectorQuery}},{key:"scrollOffset",value:function(e){return this._selectorQuery._push(this._selector,this._component,this._single,{id:!0,dataset:!0,scrollOffset:!0},e),this._selectorQuery}},{key:"context",value:function(e){return this._selectorQuery._push(this._selector,this._component,this._single,{context:!0},e),this._selectorQuery}}]),e}(),g=function(){function e(t){(0,i.default)(this,e),this._page=t,this._queue=[],this._queueCb=[],this._nodesRef=null}return(0,r.default)(e,[{key:"exec",value:function(e){var t=this;return(0,s.invokeMethod)("requestComponentInfo",this._page,this._queue,(function(n){var o=t._queueCb;n.forEach((function(e,n){Array.isArray(e)?e.forEach(p):p(e);var i=o[n];(0,a.isFn)(i)&&i.call(t,e)})),(0,a.isFn)(e)&&e.call(t,n)})),this._nodesRef}},{key:"in",value:function(e){return this._component=e._$id||e,this}},{key:"select",value:function(e){return this._nodesRef=new h(this,this._component,e,!0)}},{key:"selectAll",value:function(e){return this._nodesRef=new h(this,this._component,e,!1)}},{key:"selectViewport",value:function(){return this._nodesRef=new h(this,0,"",!0)}},{key:"_push",value:function(e,t,n,o,i){this._queue.push({component:t,selector:e,single:n,fields:o}),this._queueCb.push(i)}}]),e}()},c3bd:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.canIUse=function(e){if((0,i.hasOwn)(r.default,e))return r.default[e];if((0,i.hasOwn)(a.default,e))return!0;return!1};var i=n("1ffa"),r=o(n("73dc")),a=o(n("6e8c"))},c435:function(e,t,n){"use strict";var o=n("497b"),i=Math.min;e.exports=function(e){var t=o(e);return t>0?i(t,9007199254740991):0}},c47d:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"emitter",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"field",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"hover",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"interact",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"keyboard",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"listeners",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"subscriber",{enumerable:!0,get:function(){return s.default}});var i=o(n("f709")),r=o(n("c29a")),a=o(n("659d")),s=o(n("503c")),c=o(n("1f18")),u=o(n("6541")),l=o(n("5eef"))},c4b8:function(e,t,n){"use strict";n.r(t);var o=n("6f35"),i=n("6175");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a=n("828b"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},c563:function(e,t,n){var o,i,r,a=n("bdbb").default;(function(s,c,u){"object"===a(t)?e.exports=t=c(n("5e74"),n("f794")):(i=[n("5e74"),n("f794")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))})(0,(function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding}))},c5b7:function(e,t,n){"use strict";var o=n("7ddb"),i=n("84d6"),r=n("50d5"),a=n("8e02"),s=n("71e9"),c=n("bb80"),u=n("af9e"),l=o.aTypedArray,d=o.exportTypedArrayMethod,f=c("".slice),p=u((function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),1!==e}));d("fill",(function(e){var t=arguments.length;l(this);var n="Big"===f(a(this),0,3)?r(e):+e;return s(i,this,n,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}),p)},c62a:function(e,t,n){var o=n("3a4b"),i=n("49a5");(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.26.1",mode:o?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.26.1/LICENSE",source:"https://github.com/zloirock/core-js"})},c646:function(e,t){e.exports=function(e){return null===e||void 0===e}},c680:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("uni-image",e._g({},e.$listeners),[n("div",{ref:"content",style:e.style}),"widthFix"===e.mode||"heightFix"===e.mode?n("v-uni-resize-sensor",{ref:"sensor",on:{resize:function(t){return e._fixSize()}}}):e._e()],1)},i=[]},c753:function(e,t,n){"use strict";var o=n("8bdb"),i=n("7ddb"),r=i.NATIVE_ARRAY_BUFFER_VIEWS;o({target:"ArrayBuffer",stat:!0,forced:!r},{isView:i.isView})},c7dd:function(e,t,n){var o=n("8394"),i=n("fdca"),r=o.WeakMap;e.exports=i(r)&&/native code/.test(String(r))},c820:function(e,t,n){var o=n("6c13");e.exports=/web0s(?!.*chrome)/i.test(o)},c86b:function(e,t,n){var o=n("8394"),i=n("fdca"),r=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?r(o[e]):o[e]&&o[e][t]}},c86c:function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"===typeof btoa){var i=function(e){var t=btoa(unescape(encodeURIComponent(JSON.stringify(e)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(t);return"/*# ".concat(n," */")}(o),r=o.sources.map((function(e){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(e," */")}));return[n].concat(r).concat([i]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,o){"string"===typeof e&&(e=[[null,e,""]]);var i={};if(o)for(var r=0;r<this.length;r++){var a=this[r][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);o&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},c89b:function(e,t,n){"use strict";e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},c91c:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.uploadFile=void 0;var i=o(n("ccb8")),r={url:{type:String,required:!0},files:{type:Array},filePath:{type:String,validator:function(e,t){e&&(t.filePath=(0,i.default)(e))}},name:{type:String},header:{type:Object,validator:function(e,t){t.header=e||{}}},formData:{type:Object,validator:function(e,t){t.formData=e||{}}}};t.uploadFile=r},c976:function(e,t,n){"use strict";var o=n("6a50");o("Uint8",(function(e){return function(t,n,o){return e(this,t,n,o)}}))},c99c:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.clearStorage=u,t.clearStorageSync=function(){u()},t.getStorage=s,t.getStorageInfo=l,t.getStorageInfoSync=function(){var e=l();return delete e.errMsg,e},t.getStorageSync=function(e){var t=s({key:e});return t.data},t.removeStorage=c,t.removeStorageSync=function(e){c({key:e})},t.setStorage=a,t.setStorageSync=function(e,t){a({key:e,data:t})};var i=o(n("fcf3"));n("5ef2"),n("dc8a"),n("5c47"),n("0506"),n("d4b5"),n("aa9c"),n("64aa");function r(e){try{var t="string"===typeof e?JSON.parse(e):e,n=t.type;if(["object","string","number","boolean","undefined"].indexOf(n)>=0){var o=Object.keys(t);if(2===o.length&&"data"in t){if((0,i.default)(t.data)===n)return t.data;if("object"===n&&/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}\.\d{3}Z$/.test(t.data))return new Date(t.data)}else if(1===o.length)return""}}catch(r){}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.key,n=e.data,o=(0,i.default)(n),r="string"===o?n:JSON.stringify({type:o,data:n});try{localStorage.setItem(t,r)}catch(a){return{errMsg:"setStorage:fail ".concat(a)}}return{errMsg:"setStorage:ok"}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.key,n=localStorage&&localStorage.getItem(t);if("string"!==typeof n)return{data:"",errMsg:"getStorage:fail"};var o=n;try{var i=JSON.parse(n),a=r(i);void 0!==a&&(o=a)}catch(s){}return{data:o,errMsg:"getStorage:ok"}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.key;return localStorage&&localStorage.removeItem(t),{errMsg:"removeStorage:ok"}}function u(){return localStorage&&localStorage.clear(),{errMsg:"clearStorage:ok"}}function l(){for(var e=localStorage&&localStorage.length||0,t=[],n=0,o=0;o<e;o++){var i=localStorage.key(o),r=localStorage.getItem(i);n+=i.length+r.length,"uni-storage-keys"!==i&&t.push(i)}return{keys:t,currentSize:Math.ceil(2*n/1024),limitSize:Number.MAX_VALUE,errMsg:"getStorageInfo:ok"}}},c9ac:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.findExistsPageIndex=function(e){var t=getCurrentPages(),n=t.length;while(n--){var o=t[n];if(o.$page&&o.$page.fullPath===e)return n}return-1},t.getTargetDataset=function(e){var t={},n=e.__vue__;function i(e,n){var i=e.$attrs;for(var r in i)if(r.startsWith("data-")){var a=(0,o.camelize)(r.substr(5).toLowerCase()),s=i[r];t[a]=n?s:t[a]||s}}if(n){var a=n;while(a&&a.$el===e)i(a),a=a.$children[0];var s=n.$parent;while(s&&s.$el===e)i(s,!0),s=s.$parent}else t=Object.assign({},e.dataset,e.__uniDataset);return r(t)},t.hasLifecycleHook=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Array.isArray(e[t])&&e[t].length},t.isPage=function(e){if(e.$parent&&"PageBody"===e.$parent.$options.name)return-1===i.indexOf(e.$options.name);return!1},t.normalizeDataset=r,t.upx2px=function(e){if(e+="",-1!==e.indexOf("upx"))return uni.upx2px(parseInt(e)||0);return parseInt(e)||0},n("5ef2"),n("d4b5"),n("dc8a"),n("9db6"),n("e966");var o=n("1ffa"),i=["SystemAsyncLoading","SystemAsyncError"];function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=JSON.parse(JSON.stringify(e)),n=Object.keys(t),o=n.length;if(o)for(var i=0;i<o;i++){var r=n[i],a=r.length;"v"!==r.substr(0,1)||9!==a&&10!==a||delete t[r]}return t}},c9b5:function(e,t,n){"use strict";var o=n("81a9"),i=n("b666"),r=Error.prototype;r.toString!==i&&o(r,"toString",i)},c9b7:function(e,t,n){"use strict";var o=n("85c1"),i=Object.defineProperty;e.exports=function(e,t){try{i(o,e,{value:t,configurable:!0,writable:!0})}catch(n){o[e]=t}return t}},ca99:function(e,t,n){"use strict";var o=n("bb80"),i=n("474f"),r=n("9b55"),a=o(Function.toString);i(r.inspectSource)||(r.inspectSource=function(e){return a(e)}),e.exports=r.inspectSource},cb07:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=null;var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null!==o&&clearTimeout(o),n){var i=!o;o=setTimeout((function(){o=null}),t),i&&"function"===typeof e&&e()}else o=setTimeout((function(){"function"===typeof e&&e()}),t)};t.default=i},cb0e:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.sendSocketMessage=t.connectSocket=t.closeSocket=void 0,n("5ef2"),n("22b6"),n("8f71"),n("bf0f"),n("80e3"),n("4db2"),n("64aa");var o={OPTIONS:"OPTIONS",GET:"GET",HEAD:"HEAD",POST:"POST",PUT:"PUT",DELETE:"DELETE",TRACE:"TRACE",CONNECT:"CONNECT"},i={url:{type:String,required:!0},header:{type:Object,validator:function(e,t){t.header=e||{}}},method:{type:String,validator:function(e,t){e=(e||"").toUpperCase(),t.method=Object.values(o).indexOf(e)<0?o.GET:e}},protocols:{type:[Array,String],validator:function(e,t){"string"===typeof e&&(e=[e]),t.protocols=(e||[]).filter((function(e){return"string"===typeof e}))}}};t.connectSocket=i;var r={data:{type:[String,ArrayBuffer]}};t.sendSocketMessage=r;var a={code:{type:Number},reason:{type:String}};t.closeSocket=a},cb37:function(e,t,n){"use strict";n.r(t);var o=n("0bd5"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},cb4b:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.lifecycleMixin=function(e){var t=e.extend;e.extend=function(e){e=e||{};var n=e.methods;n&&Object.keys(n).forEach((function(t){-1!==r.indexOf(t)&&(e[t]=n[t],delete n[t])}));var o=e.setup;if(o){var i="";try{i=o.toString()}catch(a){}["onPageScroll","onReachBottom"].forEach((function(t){i.indexOf("uniApp.".concat(t))&&!e[t]&&(e[t]=[function(){}])}))}return t.call(this,e)};var n=e.config.optionMergeStrategies,o=n.created;r.forEach((function(e){n[e]=o})),n.mpOptions=function(e,t){if(!e)return t;var n=Object.create(null);return s(n,e),t&&s(n,t),n}},n("aa9c"),n("bf0f"),n("2797"),n("dc8a"),n("5ef2"),n("c9b5"),n("ab80");var i=o(n("b7c7")),r=["onLaunch","onShow","onHide","onUniNViewMessage","onPageNotFound","onThemeChange","onError","onUnhandledRejection","onInit","onLoad","onReady","onUnload","onPullDownRefresh","onReachBottom","onTabItemTap","onAddToFavorites","onShareTimeline","onShareAppMessage","onResize","onPageScroll","onNavigationBarButtonTap","onBackPress","onNavigationBarSearchInputChanged","onNavigationBarSearchInputConfirmed","onNavigationBarSearchInputClicked","onNavigationBarSearchInputFocusChanged","onPageShow","onPageHide","onPageResize","onServiceCreated","onServiceAttached"],a=["data","properties","options","relations"];function s(e,t){a.forEach((function(n){(function(e,t,n){t[n]&&Object.assign(e[n]||(e[n]={}),t[n])})(e,t,n)})),t.externalClasses&&function(e,t){e.push.apply(e,(0,i.default)(t))}(e.externalClasses||(e.externalClasses=[]),t.externalClasses),t.path&&(e.path=t.path)}},cc36:function(e,t,n){"use strict";var o=n("497b"),i=n("c435"),r=RangeError;e.exports=function(e){if(void 0===e)return 0;var t=o(e),n=i(t);if(t!==n)throw new r("Wrong length or index");return n}},cc82:function(e,t,n){"use strict";(function(e){n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("aa9c"),n("bf0f"),n("c223"),n("5c47"),n("2c10"),n("e966");var o=n("1ffa"),i={mounted:function(){var t=this;if("transparent"===this.type){for(var n=this.$el.querySelector(".uni-page-head-transparent").style,o=this.$el.querySelector(".uni-page-head__title"),i=this.$el.querySelectorAll(".uni-btn-icon"),r=[],a=this.textColor,s=0;s<i.length;s++)r.push(i[s].style);for(var c=this.$el.querySelectorAll(".uni-page-head-btn"),u=[],l=[],d=0;d<c.length;d++){var f=c[d];u.push(getComputedStyle(f).backgroundColor),l.push(f.style)}this._A=0,e.on("onPageScroll",(function(e){var i=e.scrollTop,s=Math.min(i/t.offset,1);1===s&&1===t._A||(s>.5&&t._A<=.5?r.forEach((function(e){e.color=a})):s<=.5&&t._A>.5&&r.forEach((function(e){e.color="#fff"})),t._A=s,o&&(o.style.opacity=s),n.backgroundColor="rgba(".concat(t._R,",").concat(t._G,",").concat(t._B,",").concat(s,")"),l.forEach((function(e,t){var n=u[t],o=n.match(/[\d+\.]+/g);o[3]=(1-s)*(4===o.length?o[3]:1),e.backgroundColor="rgba(".concat(o,")")})))}))}else if("float"===this.type){for(var p=this.$el.querySelectorAll(".uni-btn-icon"),h=[],g=0;g<p.length;g++)h.push(p[g].style);for(var _=this.$el.querySelectorAll(".uni-page-head-btn"),v=[],m=[],y=0;y<_.length;y++){var M=_[y];v.push(getComputedStyle(M).backgroundColor),m.push(M.style)}}},computed:{color:function(){return"transparent"===this.type?"#fff":this.textColor},offset:function(){return parseInt(this.coverage)},bgColor:function(){if("transparent"===this.type){var e=(0,o.hexToRgba)(this.backgroundColor),t=e.r,n=e.g,i=e.b;return this._R=t,this._G=n,this._B=i,"rgba(".concat(t,",").concat(n,",").concat(i,",0)")}return this.backgroundColor}}};t.default=i}).call(this,n("b8be"))},cca9:function(e,t,n){"use strict";var o=n("af9e"),i=n("85c1"),r=i.RegExp;e.exports=o((function(){var e=r("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},ccb8:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){"./"===__uniConfig.router.base&&(e=e.replace(/^\.\/static\//,"/static/"));if(0===e.indexOf("/")){if(0!==e.indexOf("//"))return s(e.substr(1));e="https:"+e}if(r.test(e)||a.test(e)||0===e.indexOf("blob:"))return e;var t=getCurrentPages();if(t.length)return s((0,i.default)(t[t.length-1].$page.route,e).substr(1));return e},n("5ef2"),n("5c47"),n("a1c1"),n("0506");var i=o(n("b777")),r=/^([a-z-]+:)?\/\//i,a=/^data:.*,.*/;function s(e){var t=__uniConfig.router.base;return t?"/"!==t&&0===("/"+e).indexOf(t)?"/"+e:t+e:e}},cce3:function(e,t,n){"use strict";var o=n("7ddb"),i=n("6158").findLastIndex,r=o.aTypedArray,a=o.exportTypedArrayMethod;a("findLastIndex",(function(e){return i(r(this),e,arguments.length>1?arguments[1]:void 0)}))},cd07:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=o[e];t||(t={id:1,callbacks:Object.create(null)},o[e]=t);return{get:function(e){return t.callbacks[e]},pop:function(e){var n=t.callbacks[e];return n&&delete t.callbacks[e],n},push:function(e){var n=t.id++;return t.callbacks[n]=e,n}}};var o={}},cd23:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={parse:{copyLink:!0,errorImg:"",lazyLoad:!1,loadingImg:"",pauseVideo:!0,previewImg:!0,setTitle:!0,showImgMenu:!0}}},cd48:function(e,t,n){"use strict";(function(e){n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.hideLoading=function(){return i("onHideLoading"),{}},t.hideToast=function(){return i("onHideToast"),{}},t.showActionSheet=function(e,t){i("onShowActionSheet",e,(function(e){r(t,-1===e?{errMsg:"showActionSheet:fail cancel"}:{tapIndex:e})}))},t.showLoading=function(e){return i("onShowLoading",e),{}},t.showModal=function(e,t){i("onShowModal",e,(function(e){r(t,e)}))},t.showToast=function(e){return i("onShowToast",e),{}};var o=e,i=o.emit,r=o.invokeCallbackHandler}).call(this,n("ef66"))},cdbd:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(o=o||i["__DC_STAT_UUID"],!o){o=Date.now()+""+Math.floor(1e7*Math.random());try{i["__DC_STAT_UUID"]=o}catch(e){}}return o};var o,i=navigator.cookieEnabled&&(window.localStorage||window.sessionStorage)||{}},cdf4:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={empty:{icon:"",text:"",textColor:"#c0c4cc",textSize:14,iconColor:"#c0c4cc",iconSize:90,mode:"data",width:160,height:160,show:!0,marginTop:0}}},ce9f:function(e){e.exports=JSON.parse('{"uni.app.quit":"Press back button again to exit","uni.async.error":"The connection timed out, click the screen to try again.","uni.showActionSheet.cancel":"Cancel","uni.showToast.unpaired":"Please note showToast must be paired with hideToast","uni.showLoading.unpaired":"Please note showLoading must be paired with hideLoading","uni.showModal.cancel":"Cancel","uni.showModal.confirm":"OK","uni.chooseImage.cancel":"Cancel","uni.chooseImage.sourceType.album":"Album","uni.chooseImage.sourceType.camera":"Camera","uni.chooseVideo.cancel":"Cancel","uni.chooseVideo.sourceType.album":"Album","uni.chooseVideo.sourceType.camera":"Camera","uni.chooseFile.notUserActivation":"File chooser dialog can only be shown with a user activation","uni.previewImage.cancel":"Cancel","uni.previewImage.button.save":"Save Image","uni.previewImage.save.success":"Saved successfully","uni.previewImage.save.fail":"Save failed","uni.setClipboardData.success":"Content copied","uni.scanCode.title":"Scan code","uni.scanCode.album":"Album","uni.scanCode.fail":"Recognition failure","uni.scanCode.flash.on":"Tap to turn light on","uni.scanCode.flash.off":"Tap to turn light off","uni.startSoterAuthentication.authContent":"Fingerprint recognition","uni.startSoterAuthentication.waitingContent":"Unrecognizable","uni.picker.done":"Done","uni.picker.cancel":"Cancel","uni.video.danmu":"Danmu","uni.video.volume":"Volume","uni.button.feedback.title":"feedback","uni.button.feedback.send":"send","uni.chooseLocation.search":"Find Place","uni.chooseLocation.cancel":"Cancel"}')},cfe8:function(e,t,n){"use strict";(function(e,o){n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.destroyComponentObserver=function(t){var n=t.reqId,o=c[n];o&&(o.disconnect(),delete c[n],e.publishHandler("onRequestComponentObserver",{reqId:n,reqEnd:!0}))},t.requestComponentObserver=function(t,n){var u,l=t.reqId,d=t.component,f=t.options;if(n._isVue)u=n;else{var p=getCurrentPages(),h=p.find((function(e){return e.$page.id===n}));if(!h)throw new Error("Not Found：Page[".concat(n,"]"));u=h.$vm}var g=(0,r.findElm)(d,u),_=f.relativeToSelector?g.querySelector(f.relativeToSelector):null,v=c[l]=new IntersectionObserver((function(t,n){t.forEach((function(t){e.publishHandler("onRequestComponentObserver",{reqId:l,res:{intersectionRatio:s(t),intersectionRect:a(t.intersectionRect),boundingClientRect:a(t.boundingClientRect),relativeRect:a(t.rootBounds),time:Date.now(),dataset:(0,i.getTargetDataset)(t.target),id:t.target.id}})}))}),{root:_,rootMargin:f.rootMargin,threshold:f.thresholds});if(f.observeAll)v.USE_MUTATION_OBSERVER=!0,Array.prototype.map.call(g.querySelectorAll(f.selector),(function(e){e?v.observe(e):o.warn("Node ".concat(f.selector," is not found. Intersection observer will not trigger."))}));else{v.USE_MUTATION_OBSERVER=!1;var m=g.querySelector(f.selector);if(!m)return void o.warn("Node ".concat(f.selector," is not found. Intersection observer will not trigger."));v.observe(m)}},n("aa77"),n("bf0f"),n("7a76"),n("c9b5"),n("2797"),n("fd3c"),n("a770");var i=n("c9ac"),r=n("b30e");function a(e){return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function s(e){var t=e.intersectionRatio,n=e.boundingClientRect,o=n.height,i=n.width,r=e.intersectionRect,a=r.height,s=r.width;return 0!==t?t:a===o?s/i:a/o}var c={}}).call(this,n("b8be"),n("ba7c")["default"])},d009:function(e,t,n){"use strict";var o=n("7ddb"),i=n("036b").includes,r=o.aTypedArray,a=o.exportTypedArrayMethod;a("includes",(function(e){return i(r(this),e,arguments.length>1?arguments[1]:void 0)}))},d043:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={loadmore:{status:"loadmore",bgColor:"transparent",icon:!0,fontSize:14,iconSize:17,color:"#606266",loadingIcon:"spinner",loadmoreText:"加载更多",loadingText:"正在加载...",nomoreText:"没有更多了",isDot:!1,iconColor:"#b7b7b7",marginTop:10,marginBottom:10,height:"auto",line:!1,lineColor:"#E6E8EB",dashed:!1}}},d04f:function(e,t,n){(function(e){var o,i,r,a=n("bdbb").default;n("4626"),n("01a2"),n("e39c"),n("bf0f"),n("844d"),n("18f7"),n("de6c"),n("7a76"),n("c9b5"),n("6a54"),n("8a8d"),n("7996"),n("6a88"),n("926e"),n("2797"),n("fd3c"),n("ab80"),n("aa9c"),n("f7a5"),function(n,s){"object"==a(t)&&"object"==a(e)?e.exports=s():(i=[],o=s,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))}(0,(function(){return t={686:function(e,t,n){"use strict";n.d(t,{default:function(){return v}});t=n(279);var o=n.n(t),i=(t=n(370),n.n(t)),r=(t=n(817),n.n(t));function s(e){try{return document.execCommand(e)}catch(e){return}}var c=function(e){return e=r()(e),s("cut"),e};function u(e,t){var n,o;n=e,o="rtl"===document.documentElement.getAttribute("dir"),(e=document.createElement("textarea")).style.fontSize="12pt",e.style.border="0",e.style.padding="0",e.style.margin="0",e.style.position="absolute",e.style[o?"right":"left"]="-9999px",o=window.pageYOffset||document.documentElement.scrollTop,e.style.top="".concat(o,"px"),e.setAttribute("readonly",""),e.value=n,e=e;return t.container.appendChild(e),t=r()(e),s("copy"),e.remove(),t}var l=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{container:document.body},n="";return"string"==typeof e?n=u(e,t):e instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(null==e?void 0:e.type)?n=u(e.value,t):(n=r()(e),s("copy")),n};function d(e){return(d="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(e){return a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":a(e)})(e)}function f(e){return(f="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(e){return a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":a(e)})(e)}function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){if(e="data-clipboard-".concat(e),t.hasAttribute(e))return t.getAttribute(e)}var v=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,o());var e,t,n,r=function(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,o=g(t);return e=n?(e=g(this).constructor,Reflect.construct(o,arguments,e)):o.apply(this,arguments),o=this,!(e=e)||"object"!==f(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(o):e}}(a);function a(e,t){var n;return function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),(n=r.call(this)).resolveOptions(t),n.listenClick(e),n}return e=a,n=[{key:"copy",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{container:document.body};return l(e,t)}},{key:"cut",value:function(e){return c(e)}},{key:"isSupported",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t=(e="string"==typeof e?[e]:e,!!document.queryCommandSupported);return e.forEach((function(e){t=t&&!!document.queryCommandSupported(e)})),t}}],(t=[{key:"resolveOptions",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===f(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=i()(e,"click",(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget,n=this.action(t)||"copy";e=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.action,n=void 0===t?"copy":t,o=e.container;t=e.target,e=e.text;if("copy"!==n&&"cut"!==n)throw new Error('Invalid "action" value, use either "copy" or "cut"');if(void 0!==t){if(!t||"object"!==d(t)||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===n&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===n&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}return e?l(e,{container:o}):t?"cut"===n?c(t):l(t,{container:o}):void 0}({action:n,container:this.container,target:this.target(t),text:this.text(t)});this.emit(e?"success":"error",{action:n,text:e,trigger:t,clearSelection:function(){t&&t.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(e){return _("action",e)}},{key:"defaultTarget",value:function(e){if(e=_("target",e),e)return document.querySelector(e)}},{key:"defaultText",value:function(e){return _("text",e)}},{key:"destroy",value:function(){this.listener.destroy()}}])&&p(e.prototype,t),n&&p(e,n),a}()},828:function(e){var t;"undefined"==typeof Element||Element.prototype.matches||((t=Element.prototype).matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector),e.exports=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},438:function(e,t,n){var o=n(828);function i(e,t,n,i,r){var a=function(e,t,n,i){return function(n){n.delegateTarget=o(n.target,t),n.delegateTarget&&i.call(e,n)}}.apply(this,arguments);return e.addEventListener(n,a,r),{destroy:function(){e.removeEventListener(n,a,r)}}}e.exports=function(e,t,n,o,r){return"function"==typeof e.addEventListener?i.apply(null,arguments):"function"==typeof n?i.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return i(e,t,n,o,r)})))}},879:function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},370:function(e,t,n){var o=n(879),i=n(438);e.exports=function(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!o.string(t))throw new TypeError("Second argument must be a String");if(!o.fn(n))throw new TypeError("Third argument must be a Function");if(o.node(e))return u=t,l=n,(c=e).addEventListener(u,l),{destroy:function(){c.removeEventListener(u,l)}};if(o.nodeList(e))return r=e,a=t,s=n,Array.prototype.forEach.call(r,(function(e){e.addEventListener(a,s)})),{destroy:function(){Array.prototype.forEach.call(r,(function(e){e.removeEventListener(a,s)}))}};if(o.string(e))return e=e,t=t,n=n,i(document.body,e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList");var r,a,s,c,u,l}},817:function(e){e.exports=function(e){var t,n="SELECT"===e.nodeName?(e.focus(),e.value):"INPUT"===e.nodeName||"TEXTAREA"===e.nodeName?((t=e.hasAttribute("readonly"))||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),t||e.removeAttribute("readonly"),e.value):(e.hasAttribute("contenteditable")&&e.focus(),n=window.getSelection(),(t=document.createRange()).selectNodeContents(e),n.removeAllRanges(),n.addRange(t),n.toString());return n}},279:function(e){function t(){}t.prototype={on:function(e,t,n){var o=this.e||(this.e={});return(o[e]||(o[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var o=this;function i(){o.off(e,i),t.apply(n,arguments)}return i._=t,this.on(e,i,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),o=0,i=n.length;o<i;o++)n[o].fn.apply(n[o].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),o=n[e],i=[];if(o&&t)for(var r=0,a=o.length;r<a;r++)o[r].fn!==t&&o[r].fn._!==t&&i.push(o[r]);return i.length?n[e]=i:delete n[e],this}},e.exports=t,e.exports.TinyEmitter=t}},n={},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,{a:n}),n},e.d=function(t,n){for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e(686).default;function e(o){if(n[o])return n[o].exports;var i=n[o]={exports:{}};return t[o](i,i.exports,e),i.exports}var t,n}))}).call(this,n("dc84")(e))},d0af:function(e,t,n){"use strict";n("b3e2")},d0b1:function(e,t,n){"use strict";var o=n("8bdb"),i=n("bb80"),r=n("11bf"),a=n("1c06"),s=n("338c"),c=n("d6b1").f,u=n("80bb"),l=n("8449"),d=n("1ea2"),f=n("d7b4"),p=n("c2388"),h=!1,g=f("meta"),_=0,v=function(e){c(e,g,{value:{objectID:"O"+_++,weakData:{}}})},m=e.exports={enable:function(){m.enable=function(){},h=!0;var e=u.f,t=i([].splice),n={};n[g]=1,e(n).length&&(u.f=function(n){for(var o=e(n),i=0,r=o.length;i<r;i++)if(o[i]===g){t(o,i,1);break}return o},o({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},fastKey:function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,g)){if(!d(e))return"F";if(!t)return"E";v(e)}return e[g].objectID},getWeakData:function(e,t){if(!s(e,g)){if(!d(e))return!0;if(!t)return!1;v(e)}return e[g].weakData},onFreeze:function(e){return p&&h&&d(e)&&!s(e,g)&&v(e),e}};r[g]=!0},d10a:function(e,t,n){var o=n("1ad7"),i=Function.prototype,r=i.call,a=o&&i.bind.bind(r,r);e.exports=o?a:function(e){return function(){return r.apply(e,arguments)}}},d122:function(e,t,n){"use strict";n.r(t);var o=n("7ee5"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},d14d:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},n("01a2"),n("e39c"),n("bf0f"),n("844d"),n("18f7"),n("de6c"),n("08eb")},d191:function(e,t,n){var o=n("1ae3"),i=String,r=TypeError;e.exports=function(e){if(o(e))return e;throw r(i(e)+" is not an object")}},d1a8:function(e,t,n){var o=n("1faa"),i=n("415b"),r=n("92b3");e.exports=o?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},d2fd:function(e,t,n){"use strict";(function(e){n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.invoke=function(){var t;return(t=e).invokeCallbackHandler.apply(t,arguments)},t.pack=function(e){return e},t.remove=function(t){return e.removeCallbackHandler(t)},t.unpack=function(e){return e}}).call(this,n("ef66"))},d386:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("uni-video",e._g({attrs:{id:e.id}},e.$listeners),[n("div",{ref:"container",staticClass:"uni-video-container",on:{touchstart:e.touchstart,touchend:e.touchend,touchmove:e.touchmove,fullscreenchange:function(t){return t.stopPropagation(),e.onFullscreenChange(t)},webkitfullscreenchange:function(t){return t.stopPropagation(),e.onFullscreenChange(t,!0)}}},[n("video",e._b({ref:"video",staticClass:"uni-video-video",style:{objectFit:e.objectFit},attrs:{loop:e.loop,src:e.srcSync,poster:e.poster,autoplay:e.autoplay,"webkit-playsinline":!0,playsinline:!0},domProps:{muted:e.muted},on:{click:e.triggerControls,durationchange:e.onDurationChange,loadedmetadata:e.onLoadedMetadata,progress:e.onProgress,waiting:e.onWaiting,error:e.onVideoError,play:e.onPlay,pause:e.onPause,ended:e.onEnded,timeupdate:e.onTimeUpdate,webkitbeginfullscreen:function(t){return e.emitFullscreenChange(!0)},x5videoenterfullscreen:function(t){return e.emitFullscreenChange(!0)},webkitendfullscreen:function(t){return e.emitFullscreenChange(!1)},x5videoexitfullscreen:function(t){return e.emitFullscreenChange(!1)}}},"video",e.$attrs,!1)),n("div",{directives:[{name:"show",rawName:"v-show",value:e.controlsShow,expression:"controlsShow"}],staticClass:"uni-video-bar uni-video-bar-full",on:{click:function(e){e.stopPropagation()}}},[n("div",{staticClass:"uni-video-controls"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showPlayBtn,expression:"showPlayBtn"}],staticClass:"uni-video-control-button",class:{"uni-video-control-button-play":!e.playing,"uni-video-control-button-pause":e.playing},on:{click:function(t){return t.stopPropagation(),e.trigger(t)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showProgress,expression:"showProgress"}],staticClass:"uni-video-current-time"},[e._v("\n          "+e._s(e._f("time")(e.currentTime))+"\n        ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showProgress,expression:"showProgress"}],ref:"progress",staticClass:"uni-video-progress-container",on:{click:function(t){return t.stopPropagation(),e.clickProgress(t)}}},[n("div",{staticClass:"uni-video-progress"},[n("div",{staticClass:"uni-video-progress-buffered",style:{width:e.buffered+"%"}}),n("div",{ref:"ball",staticClass:"uni-video-ball",style:{left:e.progress+"%"}},[n("div",{staticClass:"uni-video-inner"})])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showProgress,expression:"showProgress"}],staticClass:"uni-video-duration"},[e._v("\n          "+e._s(e._f("time")(e.duration||e.durationTime))+"\n        ")])]),e.danmuBtn?n("div",{staticClass:"uni-video-danmu-button",class:{"uni-video-danmu-button-active":e.enableDanmuSync},on:{click:function(t){return t.stopPropagation(),e.triggerDanmu(t)}}},[e._v("\n        "+e._s(e.$$t("uni.video.danmu"))+"\n      ")]):e._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showFullscreenBtn,expression:"showFullscreenBtn"}],staticClass:"uni-video-fullscreen",class:{"uni-video-type-fullscreen":e.fullscreen},on:{click:function(t){return t.stopPropagation(),e.triggerFullscreen(!e.fullscreen)}}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.start&&e.enableDanmuSync,expression:"start&&enableDanmuSync"}],ref:"danmu",staticClass:"uni-video-danmu",staticStyle:{"z-index":"0"}}),e.centerPlayBtnShow?n("div",{staticClass:"uni-video-cover",on:{click:function(e){e.stopPropagation()}}},[n("div",{staticClass:"uni-video-cover-play-button",on:{click:function(t){return t.stopPropagation(),e.play(t)}}}),n("p",{staticClass:"uni-video-cover-duration"},[e._v("\n        "+e._s(e._f("time")(e.duration||e.durationTime))+"\n      ")])]):e._e(),n("div",{staticClass:"uni-video-toast",class:{"uni-video-toast-volume":"volume"===e.gestureType}},[n("div",{staticClass:"uni-video-toast-title"},[e._v("\n        "+e._s(e.$$t("uni.video.volume"))+"\n      ")]),n("svg",{staticClass:"uni-video-toast-icon",attrs:{width:"200px",height:"200px",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M475.400704 201.19552l0 621.674496q0 14.856192-10.856448 25.71264t-25.71264 10.856448-25.71264-10.856448l-190.273536-190.273536-149.704704 0q-14.856192 0-25.71264-10.856448t-10.856448-25.71264l0-219.414528q0-14.856192 10.856448-25.71264t25.71264-10.856448l149.704704 0 190.273536-190.273536q10.856448-10.856448 25.71264-10.856448t25.71264 10.856448 10.856448 25.71264zm219.414528 310.837248q0 43.425792-24.28416 80.851968t-64.2816 53.425152q-5.71392 2.85696-14.2848 2.85696-14.856192 0-25.71264-10.570752t-10.856448-25.998336q0-11.999232 6.856704-20.284416t16.570368-14.2848 19.427328-13.142016 16.570368-20.284416 6.856704-32.569344-6.856704-32.569344-16.570368-20.284416-19.427328-13.142016-16.570368-14.2848-6.856704-20.284416q0-15.427584 10.856448-25.998336t25.71264-10.570752q8.57088 0 14.2848 2.85696 39.99744 15.427584 64.2816 53.139456t24.28416 81.137664zm146.276352 0q0 87.422976-48.56832 161.41824t-128.5632 107.707392q-7.428096 2.85696-14.2848 2.85696-15.427584 0-26.284032-10.856448t-10.856448-25.71264q0-22.284288 22.284288-33.712128 31.997952-16.570368 43.425792-25.141248 42.283008-30.855168 65.995776-77.423616t23.712768-99.136512-23.712768-99.136512-65.995776-77.423616q-11.42784-8.57088-43.425792-25.141248-22.284288-11.42784-22.284288-33.712128 0-14.856192 10.856448-25.71264t25.71264-10.856448q7.428096 0 14.856192 2.85696 79.99488 33.712128 128.5632 107.707392t48.56832 161.41824zm146.276352 0q0 131.42016-72.566784 241.41312t-193.130496 161.989632q-7.428096 2.85696-14.856192 2.85696-14.856192 0-25.71264-10.856448t-10.856448-25.71264q0-20.570112 22.284288-33.712128 3.999744-2.285568 12.85632-5.999616t12.85632-5.999616q26.284032-14.2848 46.854144-29.140992 70.281216-51.996672 109.707264-129.705984t39.426048-165.132288-39.426048-165.132288-109.707264-129.705984q-20.570112-14.856192-46.854144-29.140992-3.999744-2.285568-12.85632-5.999616t-12.85632-5.999616q-22.284288-13.142016-22.284288-33.712128 0-14.856192 10.856448-25.71264t25.71264-10.856448q7.428096 0 14.856192 2.85696 120.563712 51.996672 193.130496 161.989632t72.566784 241.41312z"}})]),n("div",{staticClass:"uni-video-toast-value"},[n("div",{staticClass:"uni-video-toast-value-content",style:{width:100*e.volumeNew+"%"}},[n("div",{staticClass:"uni-video-toast-volume-grids"},e._l(10,(function(e,t){return n("div",{key:t,staticClass:"uni-video-toast-volume-grids-item"})})),0)])])]),n("div",{staticClass:"uni-video-toast",class:{"uni-video-toast-progress":"progress"==e.gestureType}},[n("div",{staticClass:"uni-video-toast-title"},[e._v("\n        "+e._s(e._f("time")(e.currentTimeNew))+" / "+e._s(e._f("time")(e.durationTime))+"\n      ")])]),n("div",{staticClass:"uni-video-slots"},[e._t("default")],2)])])},i=[]},d3b4:function(e,t,n){"use strict";(function(e,o){n("6a54");var i=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.LOCALE_ZH_HANT=t.LOCALE_ZH_HANS=t.LOCALE_FR=t.LOCALE_ES=t.LOCALE_EN=t.I18n=t.Formatter=void 0,t.compileI18nJsonStr=function(e,t){var n=t.locale,o=t.locales,i=t.delimiters;if(!S(e,i))return e;b||(b=new d);var r=[];Object.keys(o).forEach((function(e){e!==n&&r.push({locale:e,values:o[e]})})),r.unshift({locale:n,values:o[n]});try{return JSON.stringify(k(JSON.parse(e),r,i),null,2)}catch(a){}return e},t.hasI18nJson=function e(t,n){b||(b=new d);return D(t,(function(t,o){var i=t[o];return T(i)?!!S(i,n)||void 0:e(i,n)}))},t.initVueI18n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;if("string"!==typeof e){var i=[t,e];e=i[0],t=i[1]}"string"!==typeof e&&(e=C());"string"!==typeof n&&(n="undefined"!==typeof __uniConfig&&__uniConfig.fallbackLocale||"en");var r=new M({locale:e,fallbackLocale:n,messages:t,watcher:o}),a=function(e,t){if("function"!==typeof getApp)a=function(e,t){return r.t(e,t)};else{var n=!1;a=function(e,t){var o=getApp().$vm;return o&&(o.$locale,n||(n=!0,I(o,r))),r.t(e,t)}}return a(e,t)};return{i18n:r,f:function(e,t,n){return r.f(e,t,n)},t:function(e,t){return a(e,t)},add:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return r.add(e,t,n)},watch:function(e){return r.watchLocale(e)},getLocale:function(){return r.getLocale()},setLocale:function(e){return r.setLocale(e)}}},t.isI18nStr=S,t.isString=void 0,t.normalizeLocale=y,t.parseI18nJson=function e(t,n,o){b||(b=new d);return D(t,(function(t,i){var r=t[i];T(r)?S(r,o)&&(t[i]=E(r,n,o)):e(r,n,o)})),t},t.resolveLocale=function(e){return function(t){return t?(t=y(t)||t,function(e){var t=[],n=e.split("-");while(n.length)t.push(n.join("-")),n.pop();return t}(t).find((function(t){return e.indexOf(t)>-1}))):t}},n("aa9c"),n("5c47"),n("0506"),n("e966"),n("c223"),n("aa77"),n("bf0f"),n("5ef2"),n("a1c1"),n("0c26"),n("dc8a"),n("2797"),n("dd2b"),n("3efd"),n("d4b5"),n("de6c");var r=i(n("5de6")),a=i(n("80b1")),s=i(n("efe5")),c=i(n("fcf3")),u=function(e){return null!==e&&"object"===(0,c.default)(e)},l=["{","}"],d=function(){function e(){(0,a.default)(this,e),this._caches=Object.create(null)}return(0,s.default)(e,[{key:"interpolate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l;if(!t)return[e];var o=this._caches[e];return o||(o=h(e,n),this._caches[e]=o),g(o,t)}}]),e}();t.Formatter=d;var f=/^(?:\d)+/,p=/^(?:\w)+/;function h(e,t){var n=(0,r.default)(t,2),o=n[0],i=n[1],a=[],s=0,c="";while(s<e.length){var u=e[s++];if(u===o){c&&a.push({type:"text",value:c}),c="";var l="";u=e[s++];while(void 0!==u&&u!==i)l+=u,u=e[s++];var d=u===i,h=f.test(l)?"list":d&&p.test(l)?"named":"unknown";a.push({value:l,type:h})}else c+=u}return c&&a.push({type:"text",value:c}),a}function g(e,t){var n=[],o=0,i=Array.isArray(t)?"list":u(t)?"named":"unknown";if("unknown"===i)return n;while(o<e.length){var r=e[o];switch(r.type){case"text":n.push(r.value);break;case"list":n.push(t[parseInt(r.value,10)]);break;case"named":"named"===i&&n.push(t[r.value]);break;case"unknown":0;break}o++}return n}t.LOCALE_ZH_HANS="zh-Hans";t.LOCALE_ZH_HANT="zh-Hant";t.LOCALE_EN="en";t.LOCALE_FR="fr";t.LOCALE_ES="es";var _=Object.prototype.hasOwnProperty,v=function(e,t){return _.call(e,t)},m=new d;function y(e,t){if(e){if(e=e.trim().replace(/_/g,"-"),t&&t[e])return e;if(e=e.toLowerCase(),"chinese"===e)return"zh-Hans";if(0===e.indexOf("zh"))return e.indexOf("-hans")>-1?"zh-Hans":e.indexOf("-hant")>-1||function(e,t){return!!t.find((function(t){return-1!==e.indexOf(t)}))}(e,["-tw","-hk","-mo","-cht"])?"zh-Hant":"zh-Hans";var n=["en","fr","es"];t&&Object.keys(t).length>0&&(n=Object.keys(t));var o=function(e,t){return t.find((function(t){return 0===e.indexOf(t)}))}(e,n);return o||void 0}}var M=function(){function t(e){var n=e.locale,o=e.fallbackLocale,i=e.messages,r=e.watcher,s=e.formater;(0,a.default)(this,t),this.locale="en",this.fallbackLocale="en",this.message={},this.messages={},this.watchers=[],o&&(this.fallbackLocale=o),this.formater=s||m,this.messages=i||{},this.setLocale(n||"en"),r&&this.watchLocale(r)}return(0,s.default)(t,[{key:"setLocale",value:function(e){var t=this,n=this.locale;this.locale=y(e,this.messages)||this.fallbackLocale,this.messages[this.locale]||(this.messages[this.locale]={}),this.message=this.messages[this.locale],n!==this.locale&&this.watchers.forEach((function(e){e(t.locale,n)}))}},{key:"getLocale",value:function(){return this.locale}},{key:"watchLocale",value:function(e){var t=this,n=this.watchers.push(e)-1;return function(){t.watchers.splice(n,1)}}},{key:"add",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this.messages[e];o?n?Object.assign(o,t):Object.keys(t).forEach((function(e){v(o,e)||(o[e]=t[e])})):this.messages[e]=t}},{key:"f",value:function(e,t,n){return this.formater.interpolate(e,t,n).join("")}},{key:"t",value:function(t,n,o){var i=this.message;return"string"===typeof n?(n=y(n,this.messages),n&&(i=this.messages[n])):o=n,v(i,t)?this.formater.interpolate(i[t],o).join(""):(e.warn("Cannot translate the value of keypath ".concat(t,". Use the value of keypath as default.")),t)}}]),t}();function I(e,t){e.$watchLocale?e.$watchLocale((function(e){t.setLocale(e)})):e.$watch((function(){return e.$locale}),(function(e){t.setLocale(e)}))}function C(){return"undefined"!==typeof uni&&uni.getLocale?uni.getLocale():"undefined"!==typeof o&&o.getLocale?o.getLocale():"en"}t.I18n=M;var b,T=function(e){return"string"===typeof e};function S(e,t){return e.indexOf(t[0])>-1}function E(e,t,n){return b.interpolate(e,t,n).join("")}function k(e,t,n){return D(e,(function(e,o){(function(e,t,n,o){var i=e[t];if(T(i)){if(S(i,o)&&(e[t]=E(i,n[0].values,o),n.length>1)){var r=e[t+"Locales"]={};n.forEach((function(e){r[e.locale]=E(i,e.values,o)}))}}else k(i,n,o)})(e,o,t,n)})),e}function D(e,t){if(Array.isArray(e)){for(var n=0;n<e.length;n++)if(t(e,n))return!0}else if(u(e))for(var o in e)if(t(e,o))return!0;return!1}t.isString=T}).call(this,n("ba7c")["default"],n("0ee4"))},d3f3:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={textarea:{value:"",placeholder:"",placeholderClass:"textarea-placeholder",placeholderStyle:"color: #c0c4cc",height:70,confirmType:"done",disabled:!1,count:!1,focus:!1,autoHeight:!1,fixed:!1,cursorSpacing:0,cursor:"",showConfirmBar:!0,selectionStart:-1,selectionEnd:-1,adjustPosition:!0,disableDefaultPadding:!1,holdKeyboard:!1,maxlength:140,border:"surround",formatter:null}}},d406:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("uni-rich-text",e._g({},e.$listeners),[n("div",{ref:"content"},[n("v-uni-resize-sensor",{ref:"sensor",on:{resize:function(t){return e._updateView()}}})],1)])},i=[]},d456:function(e,t,n){var o=n("29d5"),i=o("toStringTag"),r={};r[i]="z",e.exports="[object z]"===String(r)},d459:function(e,t){e.exports={}},d47e:function(e,t,n){var o=n("29d5"),i=o("iterator"),r=!1;try{var a=0,s={next:function(){return{done:!!a++}},return:function(){r=!0}};s[i]=function(){return this},Array.from(s,(function(){throw 2}))}catch(c){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var o={};o[i]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(c){}return n}},d4b5:function(e,t,n){"use strict";var o=n("8bdb"),i=n("6aa6"),r=n("9f9e"),a=n("71e9"),s=n("bb80"),c=n("af9e"),u=n("474f"),l=n("ddd3"),d=n("37ad"),f=n("5d56"),p=n("af71"),h=String,g=i("JSON","stringify"),_=s(/./.exec),v=s("".charAt),m=s("".charCodeAt),y=s("".replace),M=s(1..toString),I=/[\uD800-\uDFFF]/g,C=/^[\uD800-\uDBFF]$/,b=/^[\uDC00-\uDFFF]$/,T=!p||c((function(){var e=i("Symbol")("stringify detection");return"[null]"!==g([e])||"{}"!==g({a:e})||"{}"!==g(Object(e))})),S=c((function(){return'"\\udf06\\ud834"'!==g("\udf06\ud834")||'"\\udead"'!==g("\udead")})),E=function(e,t){var n=d(arguments),o=f(t);if(u(o)||void 0!==e&&!l(e))return n[1]=function(e,t){if(u(o)&&(t=a(o,this,h(e),t)),!l(t))return t},r(g,null,n)},k=function(e,t,n){var o=v(n,t-1),i=v(n,t+1);return _(C,e)&&!_(b,i)||_(b,e)&&!_(C,o)?"\\u"+M(m(e,0),16):e};g&&o({target:"JSON",stat:!0,arity:3,forced:T||S},{stringify:function(e,t,n){var o=d(arguments),i=r(T?E:g,null,o);return S&&"string"==typeof i?y(i,I,k):i}})},d4fc:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("9b1b")),r=o(n("092b")),a=o(n("c346")),s=o(n("1d161")),c=o(n("2276")),u=o(n("118e")),l=o(n("3ed7")),d=o(n("7daa")),f=o(n("39b6")),p=o(n("9ea3")),h=o(n("839a")),g=o(n("c0d6")),_=o(n("6833")),v=o(n("8d64")),m=o(n("4e2d")),y=o(n("14e3")),M=o(n("abe4")),I=o(n("5b1a")),C=o(n("f8cf")),b=o(n("2a12")),T=o(n("ec96")),S=o(n("422b")),E=o(n("5c0d")),k=o(n("0a02")),D=o(n("5358")),A=o(n("c077")),L=o(n("0745")),O=o(n("cdf4")),R=o(n("0e69")),w=o(n("7eb8")),N=o(n("05e4")),P=o(n("69fa")),G=o(n("f7a9")),U=o(n("8de3")),x=o(n("77e0")),F=o(n("7ece")),q=o(n("2baf")),B=o(n("4b1f")),V=o(n("7d80")),H=o(n("5890")),j=o(n("ac37")),K=o(n("e30f")),W=o(n("8f6d")),Y=o(n("6556")),z=o(n("3fce")),$=o(n("1665")),X=o(n("d043")),J=o(n("bed2")),Q=o(n("9f2f")),Z=o(n("1221")),ee=o(n("f5c7")),te=o(n("d792")),ne=o(n("00ba")),oe=o(n("bb5d")),ie=o(n("a2df")),re=o(n("cd23")),ae=o(n("7ac5")),se=o(n("b8b9")),ce=o(n("8733")),ue=o(n("7dd7")),le=o(n("472be")),de=o(n("81f8")),fe=o(n("7b5e")),pe=o(n("0030")),he=o(n("6d27")),ge=o(n("17b5")),_e=o(n("bdec")),ve=o(n("656c")),me=o(n("96c2")),ye=o(n("7808")),Me=o(n("9863")),Ie=o(n("a25c")),Ce=o(n("47d6")),be=o(n("679f")),Te=o(n("85a4")),Se=o(n("83d5")),Ee=o(n("7b0e")),ke=o(n("8811")),De=o(n("fd3a")),Ae=o(n("341e")),Le=o(n("2022")),Oe=o(n("871d")),Re=o(n("1692")),we=o(n("b9f8")),Ne=o(n("d3f3")),Pe=o(n("5d09")),Ge=o(n("d917")),Ue=o(n("1d25")),xe=o(n("8935")),Fe=o(n("fbe6")),qe=(r.default.color,(0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)({},a.default),s.default),c.default),u.default),l.default),d.default),f.default),p.default),h.default),g.default),_.default),v.default),m.default),y.default),M.default),I.default),C.default),b.default),T.default),S.default),E.default),k.default),D.default),A.default),L.default),O.default),R.default),w.default),N.default),P.default),G.default),U.default),x.default),F.default),q.default),B.default),V.default),H.default),j.default),K.default),W.default),Y.default),z.default),$.default),X.default),J.default),Q.default),Z.default),ee.default),te.default),ne.default),oe.default),ie.default),re.default),ae.default),se.default),ce.default),ue.default),le.default),de.default),fe.default),pe.default),he.default),ge.default),_e.default),ve.default),me.default),ye.default),Me.default),Ie.default),Ce.default),be.default),Te.default),Se.default),Ee.default),ke.default),De.default),Ae.default),Le.default),Oe.default),Re.default),we.default),Ne.default),Pe.default),Ge.default),Ue.default),xe.default),Fe.default));t.default=qe},d5c6:function(e,t,n){"use strict";var o=n("8bdb"),i=n("7257"),r=n("6aa6"),a=n("af9e"),s=n("e37c"),c=n("0b5a"),u=n("d6b1").f,l=n("81a9"),d=n("e4ca"),f=n("338c"),p=n("b720"),h=n("e7e3"),g=n("b666"),_=n("e7da"),v=n("e6a2"),m=n("7e87"),y=n("235c"),M=n("ab4a"),I=n("a734"),C=r("Error"),b=r("DOMException")||function(){try{var e=r("MessageChannel")||i("worker_threads").MessageChannel;(new e).port1.postMessage(new WeakMap)}catch(t){if("DATA_CLONE_ERR"===t.name&&25===t.code)return t.constructor}}(),T=b&&b.prototype,S=C.prototype,E=y.set,k=y.getterFor("DOMException"),D="stack"in new C("DOMException"),A=function(e){return f(v,e)&&v[e].m?v[e].c:0},L=function(){p(this,O);var e=arguments.length,t=_(e<1?void 0:arguments[0]),n=_(e<2?void 0:arguments[1],"Error"),o=A(n);if(E(this,{type:"DOMException",name:n,message:t,code:o}),M||(this.name=n,this.message=t,this.code=o),D){var i=new C(t);i.name="DOMException",u(this,"stack",c(1,m(i.stack,1)))}},O=L.prototype=s(S),R=function(e){return{enumerable:!0,configurable:!0,get:e}},w=function(e){return R((function(){return k(this)[e]}))};M&&(d(O,"code",w("code")),d(O,"message",w("message")),d(O,"name",w("name"))),u(O,"constructor",c(1,L));var N=a((function(){return!(new b instanceof C)})),P=N||a((function(){return S.toString!==g||"2: 1"!==String(new b(1,2))})),G=N||a((function(){return 25!==new b(1,"DataCloneError").code})),U=N||25!==b["DATA_CLONE_ERR"]||25!==T["DATA_CLONE_ERR"],x=I?P||G||U:N;o({global:!0,constructor:!0,forced:x},{DOMException:x?L:b});var F=r("DOMException"),q=F.prototype;for(var B in P&&(I||b===F)&&l(q,"toString",g),G&&M&&b===F&&d(q,"code",R((function(){return A(h(this).name)}))),v)if(f(v,B)){var V=v[B],H=V.s,j=c(6,V.c);f(F,H)||u(F,H,j),f(q,H)||u(q,H,j)}},d5ca:function(e,t,n){var o=n("4825"),i=n("e158"),r=TypeError;e.exports=function(e){if(o(e))return e;throw r(i(e)+" is not a constructor")}},d622:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.pageScrollTo=void 0,n("64aa");var o={scrollTop:{type:Number},duration:{type:Number,default:300,validator:function(e,t){t.duration=Math.max(0,e)}}};t.pageScrollTo=o},d63a:function(e,t,n){"use strict";var o=n("bb80"),i=n("af9e"),r=n("474f"),a=n("338c"),s=n("ab4a"),c=n("8945").CONFIGURABLE,u=n("ca99"),l=n("235c"),d=l.enforce,f=l.get,p=String,h=Object.defineProperty,g=o("".slice),_=o("".replace),v=o([].join),m=s&&!i((function(){return 8!==h((function(){}),"length",{value:8}).length})),y=String(String).split("String"),M=e.exports=function(e,t,n){"Symbol("===g(p(t),0,7)&&(t="["+_(p(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!a(e,"name")||c&&e.name!==t)&&(s?h(e,"name",{value:t,configurable:!0}):e.name=t),m&&n&&a(n,"arity")&&e.length!==n.arity&&h(e,"length",{value:n.arity});try{n&&a(n,"constructor")&&n.constructor?s&&h(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(i){}var o=d(e);return a(o,"source")||(o.source=v(y,"string"==typeof t?t:"")),e};Function.prototype.toString=M((function(){return r(this)&&f(this).source||u(this)}),"toString")},d67c:function(e,t,n){"use strict";var o=n("71e9"),i=n("7992"),r=n("e7e3"),a=n("52df"),s=n("5112"),c=TypeError;e.exports=function(e,t){var n=arguments.length<2?s(e):t;if(i(n))return r(o(n,e));throw new c(a(e)+" is not iterable")}},d6b1:function(e,t,n){"use strict";var o=n("ab4a"),i=n("2ba7"),r=n("fec3"),a=n("e7e3"),s=n("f9ed"),c=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor;t.f=o?r?function(e,t,n){if(a(e),t=s(t),a(n),"function"===typeof e&&"prototype"===t&&"value"in n&&"writable"in n&&!n["writable"]){var o=l(e,t);o&&o["writable"]&&(e[t]=n.value,n={configurable:"configurable"in n?n["configurable"]:o["configurable"],enumerable:"enumerable"in n?n["enumerable"]:o["enumerable"],writable:!1})}return u(e,t,n)}:u:function(e,t,n){if(a(e),t=s(t),a(n),i)try{return u(e,t,n)}catch(o){}if("get"in n||"set"in n)throw new c("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},d6b2:function(e,t,n){"use strict";(function(e,t,o){var i=n("f5bd").default;n("bf0f"),n("6a54");var r=i(n("80b1")),a=i(n("efe5")),s=i(n("9b8e")),c=i(n("2dfe")),u=function(){function i(){(0,r.default)(this,i),this._init()}return(0,a.default)(i,[{key:"_init",value:function(){t.UniViewJSBridge={subscribe:e.subscribe,publishHandler:e.publishHandler,subscribeHandler:e.subscribeHandler},t.UniServiceJSBridge={subscribe:o.subscribe,publishHandler:o.publishHandler,subscribeHandler:o.subscribeHandler};var i=n("8ac9"),r=i.default,a=i.getApp,u=i.getCurrentPages;["chooseImage"].forEach((function(e){Object.defineProperty(r,e,{writable:!1,configurable:!1})})),t.uni=r,t.wx=t.uni,t.getApp=a,t.getCurrentPages=u,s.default.use(n("5e58").default,{routes:__uniRoutes}),s.default.use(n("6d74").default,{routes:__uniRoutes}),(0,c.default)(s.default),n("9e57"),n("6559")}}]),i}();t.UniApp=u,t.__uniConfig&&new u}).call(this,n("b8be"),n("0ee4"),n("ef66"))},d72c:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("9b1b"));n("bf0f"),n("2797");var r=n("78ab"),a=function(e,t,n){var o={};return e.forEach((function(e){(0,r.isUndefined)(n[e])?(0,r.isUndefined)(t[e])||(o[e]=t[e]):o[e]=n[e]})),o};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.method||e.method||"GET",o={baseURL:e.baseURL||"",method:n,url:t.url||"",params:t.params||{},custom:(0,i.default)((0,i.default)({},e.custom||{}),t.custom||{}),header:(0,r.deepMerge)(e.header||{},t.header||{})},s=["getTask","validateStatus"];if(o=(0,i.default)((0,i.default)({},o),a(s,e,t)),"DOWNLOAD"===n)(0,r.isUndefined)(t.timeout)?(0,r.isUndefined)(e.timeout)||(o.timeout=e.timeout):o.timeout=t.timeout;else if("UPLOAD"===n){delete o.header["content-type"],delete o.header["Content-Type"];var c=["files","file","filePath","name","timeout","formData"];c.forEach((function(e){(0,r.isUndefined)(t[e])||(o[e]=t[e])})),(0,r.isUndefined)(o.timeout)&&!(0,r.isUndefined)(e.timeout)&&(o.timeout=e.timeout)}else{var u=["data","timeout","dataType","responseType","withCredentials"];o=(0,i.default)((0,i.default)({},o),a(u,e,t))}return o}},d792:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={notify:{top:0,type:"primary",color:"#ffffff",bgColor:"",message:"",duration:3e3,fontSize:15,safeAreaInsetTop:!1}}},d798:function(e,t,n){"use strict";var o=n("7ddb"),i=n("bb80"),r=o.aTypedArray,a=o.exportTypedArrayMethod,s=i([].join);a("join",(function(e){return s(r(this),e)}))},d7b4:function(e,t,n){"use strict";var o=n("bb80"),i=0,r=Math.random(),a=o(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++i+r,36)}},d7b8:function(e,t,n){var o=n("1ad7"),i=Function.prototype.call;e.exports=o?i.bind(i):function(){return i.apply(i,arguments)}},d871:function(e,t,n){"use strict";var o={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!o.call({1:2},1);t.f=r?function(e){var t=i(this,e);return!!t&&t.enumerable}:o},d871c:function(e,t,n){"use strict";var o=n("bb80"),i=n("a74c"),r=n("d0b1").getWeakData,a=n("b720"),s=n("e7e3"),c=n("1eb8"),u=n("1c06"),l=n("50757"),d=n("4d16"),f=n("338c"),p=n("235c"),h=p.set,g=p.getterFor,_=d.find,v=d.findIndex,m=o([].splice),y=0,M=function(e){return e.frozen||(e.frozen=new I)},I=function(){this.entries=[]},C=function(e,t){return _(e.entries,(function(e){return e[0]===t}))};I.prototype={get:function(e){var t=C(this,e);if(t)return t[1]},has:function(e){return!!C(this,e)},set:function(e,t){var n=C(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=v(this.entries,(function(t){return t[0]===e}));return~t&&m(this.entries,t,1),!!~t}},e.exports={getConstructor:function(e,t,n,o){var d=e((function(e,i){a(e,p),h(e,{type:t,id:y++,frozen:void 0}),c(i)||l(i,e[o],{that:e,AS_ENTRIES:n})})),p=d.prototype,_=g(t),v=function(e,t,n){var o=_(e),i=r(s(t),!0);return!0===i?M(o).set(t,n):i[o.id]=n,e};return i(p,{delete:function(e){var t=_(this);if(!u(e))return!1;var n=r(e);return!0===n?M(t)["delete"](e):n&&f(n,t.id)&&delete n[t.id]},has:function(e){var t=_(this);if(!u(e))return!1;var n=r(e);return!0===n?M(t).has(e):n&&f(n,t.id)}}),i(p,n?{get:function(e){var t=_(this);if(u(e)){var n=r(e);return!0===n?M(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return v(this,e,t)}}:{add:function(e){return v(this,e,!0)}}),d}}},d8ca:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.startAnimation=a;var i=o(n("b7c7"));function r(e){return/^-?\d+[ur]px$/i.test(e)?e.replace(/(^-?\d+)[ur]px$/i,(function(e,t){return"".concat(uni.upx2px(parseFloat(t)),"px")})):/^-?[\d\.]+$/.test(e)?"".concat(e,"px"):e||""}function a(e){var t=e.animation;if(t&&t.actions&&t.actions.length){var n=0,o=t.actions,a=t.actions.length;setTimeout((function(){s()}),0)}function s(){var t=o[n],c=t.option.transition,u=function(e){var t=["matrix","matrix3d","scale","scale3d","rotate3d","skew","translate","translate3d"],n=["scaleX","scaleY","scaleZ","rotate","rotateX","rotateY","rotateZ","skewX","skewY","translateX","translateY","translateZ"],o=["opacity","background-color"],a=["width","height","left","right","top","bottom"],s=e.animates,c=e.option,u=c.transition,l={},d=[];return s.forEach((function(e){var s=e.type,c=(0,i.default)(e.args);if(t.concat(n).includes(s))s.startsWith("rotate")||s.startsWith("skew")?c=c.map((function(e){return parseFloat(e)+"deg"})):s.startsWith("translate")&&(c=c.map(r)),n.indexOf(s)>=0&&(c.length=1),d.push("".concat(s,"(").concat(c.join(","),")"));else if(o.concat(a).includes(c[0])){s=c[0];var u=c[1];l[s]=a.includes(s)?r(u):u}})),l.transform=l.webkitTransform=d.join(" "),l.transition=l.webkitTransition=Object.keys(l).map((function(e){return"".concat(function(e){return e.replace(/[A-Z]/g,(function(e){return"-".concat(e.toLowerCase())})).replace("webkit","-webkit")}(e)," ").concat(u.duration,"ms ").concat(u.timingFunction," ").concat(u.delay,"ms")})).join(","),l.transformOrigin=l.webkitTransformOrigin=c.transformOrigin,l}(t);Object.keys(u).forEach((function(t){e.$el.style[t]=u[t]})),n+=1,n<a&&setTimeout(s,c.duration+c.delay)}}n("5c47"),n("0506"),n("a1c1"),n("e838"),n("bf0f"),n("2797"),n("4626"),n("5ac7"),n("c223"),n("9db6"),n("fd3c"),n("5ef2"),n("aa9c"),n("dc8a");var s={props:["animation"],watch:{animation:function(){a(this)}},mounted:function(){a(this)}};t.default=s},d917:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={toolbar:{show:!0,cancelText:"取消",confirmText:"确认",cancelColor:"#909193",confirmColor:"#3c9cff",title:""}}},d953:function(e,t,n){var o=n("1faa"),i=n("d7b8"),r=n("d871"),a=n("92b3"),s=n("d95b"),c=n("b4b8"),u=n("77cd"),l=n("a791"),d=Object.getOwnPropertyDescriptor;t.f=o?d:function(e,t){if(e=s(e),t=c(t),l)try{return d(e,t)}catch(n){}if(u(e,t))return a(!i(r.f,e,t),e[t])}},d95b:function(e,t,n){var o=n("b377"),i=n("6ac4");e.exports=function(e){return o(i(e))}},d969:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("cfe8"),i=n("60d7"),r=n("750e"),a={requestComponentObserver:o.requestComponentObserver,destroyComponentObserver:o.destroyComponentObserver,requestMediaQueryObserver:i.requestMediaQueryObserver,destroyMediaQueryObserver:i.destroyMediaQueryObserver,requestComponentInfo:r.requestComponentInfo};t.default=a},d970:function(e,t,n){var o=n("66b1"),i=Math.max,r=Math.min;e.exports=function(e,t){var n=o(e);return n<0?i(n+t,0):r(n,t)}},d9a7:function(e,t,n){var o=n("df7b"),i=n("7aa6");e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&o&&o<41}))},d9af:function(e,t,n){var o=n("29d5"),i=n("849d"),r=n("415b").f,a=o("unscopables"),s=Array.prototype;void 0==s[a]&&r(s,a,{configurable:!0,value:i(null)}),e.exports=function(e){s[a][e]=!0}},d9eb:function(e,t,n){"use strict";n.r(t);var o=n("1072"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},da1d:function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},da58:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("aa9c");var o=n("b7e5"),i={methods:{initScroller:function(e,t){this._touchInfo={trackingID:-1,maxDy:0,maxDx:0},this._scroller=new o.Scroller(e,t),this.__handleTouchStart=this._handleTouchStart.bind(this),this.__handleTouchMove=this._handleTouchMove.bind(this),this.__handleTouchEnd=this._handleTouchEnd.bind(this),this._initedScroller=!0},_findDelta:function(e){var t=this._touchInfo;return"move"===e.detail.state||"end"===e.detail.state?{x:e.detail.dx,y:e.detail.dy}:{x:e.screenX-t.x,y:e.screenY-t.y}},_handleTouchStart:function(e){var t=this._touchInfo,n=this._scroller;n&&("start"===e.detail.state?(t.trackingID="touch",t.x=e.detail.x,t.y=e.detail.y):(t.trackingID="mouse",t.x=e.screenX,t.y=e.screenY),t.maxDx=0,t.maxDy=0,t.historyX=[0],t.historyY=[0],t.historyTime=[e.detail.timeStamp],t.listener=n,n.onTouchStart&&n.onTouchStart(),e.preventDefault())},_handleTouchMove:function(e){var t=this._touchInfo;if(-1!==t.trackingID){e.preventDefault();var n=this._findDelta(e);if(n){for(t.maxDy=Math.max(t.maxDy,Math.abs(n.y)),t.maxDx=Math.max(t.maxDx,Math.abs(n.x)),t.historyX.push(n.x),t.historyY.push(n.y),t.historyTime.push(e.detail.timeStamp);t.historyTime.length>10;)t.historyTime.shift(),t.historyX.shift(),t.historyY.shift();t.listener&&t.listener.onTouchMove&&t.listener.onTouchMove(n.x,n.y,e.detail.timeStamp)}}},_handleTouchEnd:function(e){var t=this._touchInfo;if(-1!==t.trackingID){e.preventDefault();var n=this._findDelta(e);if(n){var o=t.listener;t.trackingID=-1,t.listener=null;var i=t.historyTime.length,r={x:0,y:0};if(i>2)for(var a=t.historyTime.length-1,s=t.historyTime[a],c=t.historyX[a],u=t.historyY[a];a>0;){a--;var l=t.historyTime[a],d=s-l;if(d>30&&d<50){r.x=(c-t.historyX[a])/(d/1e3),r.y=(u-t.historyY[a])/(d/1e3);break}}t.historyTime=[],t.historyX=[],t.historyY=[],o&&o.onTouchEnd&&o.onTouchEnd(n.x,n.y,r)}}}}};t.default=i},dacf:function(e,t,n){"use strict";var o=Array,i=Math.abs,r=Math.pow,a=Math.floor,s=Math.log,c=Math.LN2;e.exports={pack:function(e,t,n){var u,l,d,f=o(n),p=8*n-t-1,h=(1<<p)-1,g=h>>1,_=23===t?r(2,-24)-r(2,-77):0,v=e<0||0===e&&1/e<0?1:0,m=0;e=i(e),e!==e||e===1/0?(l=e!==e?1:0,u=h):(u=a(s(e)/c),d=r(2,-u),e*d<1&&(u--,d*=2),e+=u+g>=1?_/d:_*r(2,1-g),e*d>=2&&(u++,d/=2),u+g>=h?(l=0,u=h):u+g>=1?(l=(e*d-1)*r(2,t),u+=g):(l=e*r(2,g-1)*r(2,t),u=0));while(t>=8)f[m++]=255&l,l/=256,t-=8;u=u<<t|l,p+=t;while(p>0)f[m++]=255&u,u/=256,p-=8;return f[--m]|=128*v,f},unpack:function(e,t){var n,o=e.length,i=8*o-t-1,a=(1<<i)-1,s=a>>1,c=i-7,u=o-1,l=e[u--],d=127&l;l>>=7;while(c>0)d=256*d+e[u--],c-=8;n=d&(1<<-c)-1,d>>=-c,c+=t;while(c>0)n=256*n+e[u--],c-=8;if(0===d)d=1-s;else{if(d===a)return n?NaN:l?-1/0:1/0;n+=r(2,t),d-=s}return(l?-1:1)*n*r(2,d-t)}}},db04:function(e,t,n){"use strict";var o=n("bb80"),i=n("c435"),r=n("9e70"),a=n("f298"),s=n("862c"),c=o(a),u=o("".slice),l=Math.ceil,d=function(e){return function(t,n,o){var a,d,f=r(s(t)),p=i(n),h=f.length,g=void 0===o?" ":r(o);return p<=h||""===g?f:(a=p-h,d=c(g,l(a/g.length)),d.length>a&&(d=u(d,0,a)),e?f+d:d+f)}};e.exports={start:d(!1),end:d(!0)}},db06:function(e,t,n){"use strict";var o=n("85c1"),i=n("ada5");e.exports="process"===i(o.process)},dbc3:function(e,t,n){var o=n("177f"),i=n("f0b5"),r=n("1ad7"),a=o(o.bind);e.exports=function(e,t){return i(e),void 0===t?e:r?a(e,t):function(){return e.apply(t,arguments)}}},dc69:function(e,t,n){"use strict";var o=n("8bdb"),i=n("bb80"),r=n("ac5f"),a=i([].reverse),s=[1,2];o({target:"Array",proto:!0,forced:String(s)===String(s.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),a(this)}})},dc84:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},dc89:function(e,t,n){"use strict";n("6ad1")},dc8a:function(e,t,n){"use strict";var o=n("8bdb"),i=n("1099"),r=n("ff4f"),a=n("af9e"),s=a((function(){r(1)}));o({target:"Object",stat:!0,forced:s},{keys:function(e){return r(i(e))}})},dcda:function(e,t,n){"use strict";var o=n("474f"),i=n("1c06"),r=n("8c4f");e.exports=function(e,t,n){var a,s;return r&&o(a=t.constructor)&&a!==n&&i(s=a.prototype)&&s!==n.prototype&&r(e,s),e}},dd2b:function(e,t,n){"use strict";var o=n("8bdb"),i=n("1099"),r=n("e34c"),a=n("497b"),s=n("1fc1"),c=n("b2b1"),u=n("41c7"),l=n("3242"),d=n("85f7"),f=n("a830"),p=n("a554"),h=p("splice"),g=Math.max,_=Math.min;o({target:"Array",proto:!0,forced:!h},{splice:function(e,t){var n,o,p,h,v,m,y=i(this),M=s(y),I=r(e,M),C=arguments.length;for(0===C?n=o=0:1===C?(n=0,o=M-I):(n=C-2,o=_(g(a(t),0),M-I)),u(M+n-o),p=l(y,o),h=0;h<o;h++)v=I+h,v in y&&d(p,h,y[v]);if(p.length=o,n<o){for(h=I;h<M-o;h++)v=h+o,m=h+n,v in y?y[m]=y[v]:f(y,m);for(h=M;h>M-o+n;h--)f(y,h-1)}else if(n>o)for(h=M-o;h>I;h--)v=h+o-1,m=h+n-1,v in y?y[m]=y[v]:f(y,m);for(h=0;h<n;h++)y[h+I]=arguments[h+2];return c(y,M-o+n),p}})},dd40:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.chooseFile=void 0,n("64aa"),n("8f71"),n("bf0f"),n("4626");var o=["all","image","video"],i=["album","camera"],r={count:{type:Number,required:!1,default:100,validator:function(e,t){e<=0&&(t.count=100)}},sourceType:{type:Array,required:!1,default:i,validator:function(e,t){e=e.filter((function(e){return i.includes(e)})),t.sourceType=e.length?e:i}},type:{type:String,required:!1,default:"all",validator:function(e,t){o.includes(e)||(t.type=o[0]),t.type="all"===t.type?t.type="*":t.type}},extension:{type:Array,default:[""],validator:function(e,t){if(0===e.length)return"param extension should not be empty."}}};t.chooseFile=r},dd88:function(e,t,n){"use strict";n.r(t);var o=n("2a3b"),i=n("deb8");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a=n("828b"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},ddd3:function(e,t,n){"use strict";var o=n("6aa6"),i=n("474f"),r=n("1297"),a=n("4f04"),s=Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=o("Symbol");return i(t)&&r(t.prototype,s(e))}},de6c:function(e,t,n){"use strict";var o=n("85c1"),i=n("3de7"),r=n("fb6b"),a=n("6bfa"),s=n("6aca"),c=n("181d"),u=n("8c08"),l=u("iterator"),d=a.values,f=function(e,t){if(e){if(e[l]!==d)try{s(e,l,d)}catch(o){e[l]=d}if(c(e,t,!0),i[t])for(var n in a)if(e[n]!==a[n])try{s(e,n,a[n])}catch(o){e[n]=a[n]}}};for(var p in i)f(o[p]&&o[p].prototype,p);f(r,"DOMTokenList")},deb8:function(e,t,n){"use strict";n.r(t);var o=n("5cc2"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},df17:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"uni-fade"}},[e.visible?n("uni-toast",{attrs:{"data-duration":e.duration}},[e.mask?n("div",{staticClass:"uni-mask",staticStyle:{background:"transparent"},on:{touchmove:function(e){e.preventDefault()}}}):e._e(),e.image||e.iconClass?n("div",{staticClass:"uni-toast"},[e.image?n("img",{staticClass:"uni-toast__icon",attrs:{src:e.image}}):n("i",{staticClass:"uni-icon_toast",class:e.iconClass}),n("p",{staticClass:"uni-toast__content"},[e._v("\n        "+e._s(e.title)+"\n      ")])]):n("div",{staticClass:"uni-sample-toast"},[n("p",{staticClass:"uni-simple-toast__text"},[e._v("\n        "+e._s(e.title)+"\n      ")])])]):e._e()],1)},i=[]},df7b:function(e,t,n){var o,i,r=n("8394"),a=n("6c13"),s=r.process,c=r.Deno,u=s&&s.versions||c&&c.version,l=u&&u.v8;l&&(o=l.split("."),i=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!i&&a&&(o=a.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=a.match(/Chrome\/(\d+)/),o&&(i=+o[1]))),e.exports=i},df92:function(e,t,n){"use strict";var o=n("71e9"),i=n("474f"),r=n("1c06"),a=TypeError;e.exports=function(e,t){var n,s;if("string"===t&&i(n=e.toString)&&!r(s=o(n,e)))return s;if(i(n=e.valueOf)&&!r(s=o(n,e)))return s;if("string"!==t&&i(n=e.toString)&&!r(s=o(n,e)))return s;throw new a("Can't convert object to primitive value")}},dfcf:function(e,t,n){"use strict";var o=n("71e9"),i=n("bb80"),r=n("7edc"),a=n("e7e3"),s=n("1eb8"),c=n("862c"),u=n("5dfa"),l=n("03dc"),d=n("c435"),f=n("9e70"),p=n("60bc"),h=n("07da"),g=n("edb7"),_=n("af9e"),v=g.UNSUPPORTED_Y,m=Math.min,y=i([].push),M=i("".slice),I=!_((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),C="c"==="abbc".split(/(b)*/)[1]||4!=="test".split(/(?:)/,-1).length||2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length;r("split",(function(e,t,n){var i="0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:o(t,this,e,n)}:t;return[function(t,n){var r=c(this),a=s(t)?void 0:p(t,e);return a?o(a,t,r,n):o(i,f(r),t,n)},function(e,o){var r=a(this),s=f(e);if(!C){var c=n(i,r,s,o,i!==t);if(c.done)return c.value}var p=u(r,RegExp),g=r.unicode,_=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(v?"g":"y"),I=new p(v?"^(?:"+r.source+")":r,_),b=void 0===o?4294967295:o>>>0;if(0===b)return[];if(0===s.length)return null===h(I,s)?[s]:[];var T=0,S=0,E=[];while(S<s.length){I.lastIndex=v?0:S;var k,D=h(I,v?M(s,S):s);if(null===D||(k=m(d(I.lastIndex+(v?S:0)),s.length))===T)S=l(s,S,g);else{if(y(E,M(s,T,S)),E.length===b)return E;for(var A=1;A<=D.length-1;A++)if(y(E,D[A]),E.length===b)return E;S=T=k}}return y(E,M(s,T)),E}]}),C||!I,v)},e033:function(e,t,n){"use strict";n.r(t);var o=n("1638"),i=n("88c8");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a=n("828b"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},e062:function(e,t,n){"use strict";var o=n("8bdb");o({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})},e069:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.getApiCallbacks=function(e){var t={};for(var n in e){var r=e[n];(0,o.isFn)(r)&&(t[n]=(0,i.tryCatch)(r),delete e[n])}return t};var o=n("1ffa"),i=n("637e")},e0f3:function(e,t,n){"use strict";(function(e,o){n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.callAppHook=function(t,n,o){"onError"!==n&&e.debug("App：".concat(n," have been invoked")+(o?" ".concat(JSON.stringify(o)):""));return t=t.$vm||t,t.__call_hook&&t.__call_hook(n,o)},t.callPageHook=function(t,n,i){"onLoad"===n&&(t.$mp.query=i,o.publishHandler("onPageLoad",t,t.$page.id)),"onShow"===n&&(t.$route.meta.isTabBar&&t.$route.params.detail&&setTimeout((function(){o.emit("onTabItemTap",t.$route.params.detail)}),0),o.publishHandler("onPageShow",t,t.$page.id));"onPageScroll"!==n&&e.debug("".concat(t.$page.route,"[").concat(t.$page.id,"]：").concat(n," have been invoked"));return function(e,t,n){return e=e.$vm||e,e.__call_hook&&e.__call_hook(t,n)}(t,n,i)},n("d4b5"),n("c223")}).call(this,n("ba7c")["default"],n("ef66"))},e102:function(e,t,n){"use strict";(function(e){n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.navigateBack=function(e){return s("navigateBack",e)},t.navigateTo=function(e){return s("navigateTo",e)},t.preloadPage=function(e,t){var n=e.url,o=n.split("?")[0].replace(/\//g,"-");__uniConfig.__webpack_chunk_load__(o.substr(1)).then((function(){a(t,{url:n,errMsg:"preloadPage:ok"})})).catch((function(e){a(t,{url:n,errMsg:"preloadPage:fail "+e})}))},t.reLaunch=function(e){return s("reLaunch",e)},t.redirectTo=function(e){return s("redirectTo",e)},t.switchTab=function(e){return s("switchTab",e)},n("5c47"),n("a1c1"),n("aa9c");var o=n("c9ac"),i=n("3939"),r=e,a=r.invokeCallbackHandler;function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.url,r=t.delta,a=t.events,c=t.exists,u=t.animationType,l=t.animationDuration,d=t.from,f=void 0===d?"navigateBack":d,p=t.detail,h=getApp().$router;switch(delete h.$eventChannel,e){case"redirectTo":if("back"===c){var g=(0,o.findExistsPageIndex)(n);if(-1!==g){var _=getCurrentPages().length-1-g;if(_>0)return s("navigateBack",{delta:_})}}h.replace({type:e,path:n});break;case"navigateTo":return h.$eventChannel=(0,i.initEventChannel)(a),h.push({type:e,path:n,animationType:u,animationDuration:l}),{errMsg:e+":ok",eventChannel:h.$eventChannel};case"navigateBack":var v=!0,m=getCurrentPages();if(m.length){var y=m[m.length-1];(0,o.hasLifecycleHook)(y.$options,"onBackPress")&&!0===y.__call_hook("onBackPress",{from:f})&&(v=!1)}v&&(r>1&&(h._$delta=r),h.go(-r,{animationType:u,animationDuration:l}));break;case"reLaunch":h.replace({type:e,path:n});break;case"switchTab":h.replace({type:e,path:n,params:{detail:p}});break}return{errMsg:e+":ok"}}}).call(this,n("ef66"))},e157:function(e,t,n){"use strict";var o=n("d6b1").f;e.exports=function(e,t,n){n in e||o(e,n,{configurable:!0,get:function(){return t[n]},set:function(e){t[n]=e}})}},e158:function(e,t){var n=String;e.exports=function(e){try{return n(e)}catch(t){return"Object"}}},e1f4:function(e,t,n){"use strict";n.r(t);var o=n("5f00"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},e22a:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("9b1b"));n("5c47"),n("8f71"),n("bf0f");var r=o(n("e643")),a=o(n("1c85")),s=o(n("3a9a")),c=o(n("6451")),u=o(n("8d3f")),l=o(n("a019")),d=o(n("cb07")),f=o(n("2f31")),p=o(n("903a")),h=o(n("092b")),g=o(n("d4fc")),_=o(n("30c9")),v=o(n("241b")),m=o(n("144a")),y=(0,i.default)((0,i.default)({route:c.default,date:p.default.timeFormat,colorGradient:u.default.colorGradient,hexToRgb:u.default.hexToRgb,rgbToHex:u.default.rgbToHex,colorToRgba:u.default.colorToRgba,test:l.default,type:["primary","success","error","warning","info"],http:new s.default,config:h.default,zIndex:_.default,debounce:d.default,throttle:f.default,mixin:r.default,mpMixin:a.default,props:g.default},p.default),{},{color:v.default,platform:m.default});uni.$u=y;var M={install:function(e){e.filter("timeFormat",(function(e,t){return uni.$u.timeFormat(e,t)})),e.filter("date",(function(e,t){return uni.$u.timeFormat(e,t)})),e.filter("timeFrom",(function(e,t){return uni.$u.timeFrom(e,t)})),e.prototype.$u=y,e.mixin(r.default)}};t.default=M},e24a:function(e,t,n){"use strict";n.r(t);var o=n("21b8"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},e275:function(e,t,n){var o,i,r,a=n("bdbb").default;(function(s,c,u){"object"===a(t)?e.exports=t=c(n("5e74"),n("80a2"),n("82eb")):(i=[n("5e74"),n("80a2"),n("82eb")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))})(0,(function(e){return function(){var t=e,n=t.x64,o=n.Word,i=n.WordArray,r=t.algo,a=r.SHA512,s=r.SHA384=a.extend({_doReset:function(){this._hash=new i.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=16,e}});t.SHA384=a._createHelper(s),t.HmacSHA384=a._createHmacHelper(s)}(),e.SHA384}))},e30f:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("092b")),r=i.default.color,a={link:{color:r["u-primary"],fontSize:15,underLine:!1,href:"",mpTips:"链接已复制，请在浏览器打开",lineColor:"",text:""}};t.default=a},e34c:function(e,t,n){"use strict";var o=n("497b"),i=Math.max,r=Math.min;e.exports=function(e,t){var n=o(e);return n<0?i(n+t,0):r(n,t)}},e352:function(e,t,n){var o=n("d7b8"),i=n("fdca"),r=n("1ae3"),a=TypeError;e.exports=function(e,t){var n,s;if("string"===t&&i(n=e.toString)&&!r(s=o(n,e)))return s;if(i(n=e.valueOf)&&!r(s=o(n,e)))return s;if("string"!==t&&i(n=e.toString)&&!r(s=o(n,e)))return s;throw a("Can't convert object to primitive value")}},e37c:function(e,t,n){"use strict";var o,i=n("e7e3"),r=n("a3fb"),a=n("62f7"),s=n("11bf"),c=n("3794"),u=n("3f57"),l=n("b223"),d=l("IE_PROTO"),f=function(){},p=function(e){return"<script>"+e+"<\/script>"},h=function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t},g=function(){try{o=new ActiveXObject("htmlfile")}catch(t){}g="undefined"!=typeof document?document.domain&&o?h(o):function(){var e,t=u("iframe");return t.style.display="none",c.appendChild(t),t.src=String("javascript:"),e=t.contentWindow.document,e.open(),e.write(p("document.F=Object")),e.close(),e.F}():h(o);var e=a.length;while(e--)delete g["prototype"][a[e]];return g()};s[d]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(f["prototype"]=i(e),n=new f,f["prototype"]=null,n[d]=e):n=g(),void 0===t?n:r.f(n,t)}},e39c:function(e,t,n){"use strict";var o=n("8bdb"),i=n("ab4a"),r=n("85c1"),a=n("bb80"),s=n("338c"),c=n("474f"),u=n("1297"),l=n("9e70"),d=n("e4ca"),f=n("3d8a"),p=r.Symbol,h=p&&p.prototype;if(i&&c(p)&&(!("description"in h)||void 0!==p().description)){var g={},_=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),t=u(h,this)?new p(e):void 0===e?p():p(e);return""===e&&(g[t]=!0),t};f(_,p),_.prototype=h,h.constructor=_;var v="Symbol(description detection)"===String(p("description detection")),m=a(h.valueOf),y=a(h.toString),M=/^Symbol\((.*)\)[^)]+$/,I=a("".replace),C=a("".slice);d(h,"description",{configurable:!0,get:function(){var e=m(this);if(s(g,e))return"";var t=y(e),n=v?C(t,7,-1):I(t,M,"$1");return""===n?void 0:n}}),o({global:!0,constructor:!0,forced:!0},{Symbol:_})}},e39d:function(e,t,n){var o=n("d7b8"),i=n("d191"),r=n("218d");e.exports=function(e,t,n){var a,s;i(e);try{if(a=r(e,"return"),!a){if("throw"===t)throw n;return n}a=o(a,e)}catch(c){s=!0,a=c}if("throw"===t)throw n;if(s)throw a;return i(a),n}},e3c8:function(e,t,n){"use strict";n.r(t);var o=n("c241"),i=n("774f");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a=n("828b"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},e3e4:function(e,t,n){"use strict";(function(e){n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.operateVideoPlayer=function(t,n,o,i){var r=n.$page.id;e.publishHandler(r+"-video-"+t,{videoId:t,type:o,data:i},r)}}).call(this,n("ef66"))},e4a8:function(e,t,n){"use strict";n.r(t);var o=n("8cca"),i=n("f2b8");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a=n("828b"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},e4a9:function(e,t,n){"use strict";var o=n("1faa"),i=n("d10a"),r=n("d7b8"),a=n("7aa6"),s=n("9105"),c=n("ed01"),u=n("d871"),l=n("b510"),d=n("b377"),f=Object.assign,p=Object.defineProperty,h=i([].concat);e.exports=!f||a((function(){if(o&&1!==f({b:1},f(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=f({},e)[n]||"abcdefghijklmnopqrst"!=s(f({},t)).join("")}))?function(e,t){var n=l(e),i=arguments.length,a=1,f=c.f,p=u.f;while(i>a){var g,_=d(arguments[a++]),v=f?h(s(_),f(_)):s(_),m=v.length,y=0;while(m>y)g=v[y++],o&&!r(p,_,g)||(n[g]=_[g])}return n}:f},e4ca:function(e,t,n){"use strict";var o=n("d63a"),i=n("d6b1");e.exports=function(e,t,n){return n.get&&o(n.get,t,{getter:!0}),n.set&&o(n.set,t,{setter:!0}),i.f(e,t,n)}},e509:function(e,t,n){var o,i,r,a=n("bdbb").default;(function(s,c,u){"object"===a(t)?e.exports=t=c(n("5e74"),n("7f5d"),n("4f3e"),n("734e"),n("f794")):(i=[n("5e74"),n("7f5d"),n("4f3e"),n("734e"),n("f794")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))})(0,(function(e){return function(){var t=e,n=t.lib,o=n.BlockCipher,i=t.algo,r=[],a=[],s=[],c=[],u=[],l=[],d=[],f=[],p=[],h=[];(function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,o=0;for(t=0;t<256;t++){var i=o^o<<1^o<<2^o<<3^o<<4;i=i>>>8^255&i^99,r[n]=i,a[i]=n;var g=e[n],_=e[g],v=e[_],m=257*e[i]^16843008*i;s[n]=m<<24|m>>>8,c[n]=m<<16|m>>>16,u[n]=m<<8|m>>>24,l[n]=m;m=16843009*v^65537*_^257*g^16843008*n;d[i]=m<<24|m>>>8,f[i]=m<<16|m>>>16,p[i]=m<<8|m>>>24,h[i]=m,n?(n=g^e[e[e[v^g]]],o^=e[e[o]]):n=o=1}})();var g=[0,1,2,4,8,16,32,64,128,27,54],_=i.AES=o.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,o=this._nRounds=n+6,i=4*(o+1),a=this._keySchedule=[],s=0;s<i;s++)s<n?a[s]=t[s]:(l=a[s-1],s%n?n>6&&s%n==4&&(l=r[l>>>24]<<24|r[l>>>16&255]<<16|r[l>>>8&255]<<8|r[255&l]):(l=l<<8|l>>>24,l=r[l>>>24]<<24|r[l>>>16&255]<<16|r[l>>>8&255]<<8|r[255&l],l^=g[s/n|0]<<24),a[s]=a[s-n]^l);for(var c=this._invKeySchedule=[],u=0;u<i;u++){s=i-u;if(u%4)var l=a[s];else l=a[s-4];c[u]=u<4||s<=4?l:d[r[l>>>24]]^f[r[l>>>16&255]]^p[r[l>>>8&255]]^h[r[255&l]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,c,u,l,r)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,d,f,p,h,a);n=e[t+1];e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,o,i,r,a,s){for(var c=this._nRounds,u=e[t]^n[0],l=e[t+1]^n[1],d=e[t+2]^n[2],f=e[t+3]^n[3],p=4,h=1;h<c;h++){var g=o[u>>>24]^i[l>>>16&255]^r[d>>>8&255]^a[255&f]^n[p++],_=o[l>>>24]^i[d>>>16&255]^r[f>>>8&255]^a[255&u]^n[p++],v=o[d>>>24]^i[f>>>16&255]^r[u>>>8&255]^a[255&l]^n[p++],m=o[f>>>24]^i[u>>>16&255]^r[l>>>8&255]^a[255&d]^n[p++];u=g,l=_,d=v,f=m}g=(s[u>>>24]<<24|s[l>>>16&255]<<16|s[d>>>8&255]<<8|s[255&f])^n[p++],_=(s[l>>>24]<<24|s[d>>>16&255]<<16|s[f>>>8&255]<<8|s[255&u])^n[p++],v=(s[d>>>24]<<24|s[f>>>16&255]<<16|s[u>>>8&255]<<8|s[255&l])^n[p++],m=(s[f>>>24]<<24|s[u>>>16&255]<<16|s[l>>>8&255]<<8|s[255&d])^n[p++];e[t]=g,e[t+1]=_,e[t+2]=v,e[t+3]=m},keySize:8});t.AES=o._createHelper(_)}(),e.AES}))},e58a:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.VideoContext=void 0,t.createVideoContext=function(e,t){if(t)return new u(e,t);return new u(e,(0,a.getCurrentPageVm)("createVideoContext"))},n("5ef2");var i=o(n("80b1")),r=o(n("efe5")),a=n("a745"),s=[.5,.8,1,1.25,1.5,2];function c(e,t,n,o){(0,a.invokeMethod)("operateVideoPlayer",e,t,n,o)}var u=function(){function e(t,n){(0,i.default)(this,e),this.id=t,this.pageVm=n}return(0,r.default)(e,[{key:"play",value:function(){c(this.id,this.pageVm,"play")}},{key:"pause",value:function(){c(this.id,this.pageVm,"pause")}},{key:"stop",value:function(){c(this.id,this.pageVm,"stop")}},{key:"seek",value:function(e){c(this.id,this.pageVm,"seek",{position:e})}},{key:"sendDanmu",value:function(e){c(this.id,this.pageVm,"sendDanmu",e)}},{key:"playbackRate",value:function(e){~s.indexOf(e)||(e=1),c(this.id,this.pageVm,"playbackRate",{rate:e})}},{key:"requestFullScreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c(this.id,this.pageVm,"requestFullScreen",e)}},{key:"exitFullScreen",value:function(){c(this.id,this.pageVm,"exitFullScreen")}},{key:"showStatusBar",value:function(){c(this.id,this.pageVm,"showStatusBar")}},{key:"hideStatusBar",value:function(){c(this.id,this.pageVm,"hideStatusBar")}}]),e}();t.VideoContext=u},e5d4:function(e,t,n){"use strict";var o=n("8bdb"),i=n("6aa6"),r=n("338c"),a=n("9e70"),s=n("8b3b"),c=n("5b2c"),u=s("string-to-symbol-registry"),l=s("symbol-to-string-registry");o({target:"Symbol",stat:!0,forced:!c},{for:function(e){var t=a(e);if(r(u,t))return u[t];var n=i("Symbol")(t);return u[t]=n,l[n]=t,n}})},e623:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=t.getApp,o=t.getCurrentPages;function s(e,t){var n=o();n.length&&(0,i.callPageHook)(n[n.length-1],e,t)}function c(e){return function(t){s(e,t)}}e("onError",(function(e){(0,i.callAppHook)(n(),"onError",e)})),e("onPageNotFound",(function(e){(0,i.callAppHook)(n(),"onPageNotFound",e)})),!1;e("onAppEnterBackground",(function(){(0,i.callAppHook)(n(),"onHide"),s("onHide")})),e("onAppEnterForeground",(function(e){(0,i.callAppHook)(n(),"onShow",e);var t=o();0!==t.length&&s("onShow")})),e("onResize",(function(e,t){var n=o().find((function(e){return e.$page.id===t}));n&&(0,i.callPageHook)(n,"onResize",e)})),e("onPullDownRefresh",(function(e,t){var n=o().find((function(e){return e.$page.id===t}));n&&((0,r.setPullDownRefreshPageId)(t),(0,i.callPageHook)(n,"onPullDownRefresh"))})),e("onTabItemTap",c("onTabItemTap")),e("onNavigationBarButtonTap",c("onNavigationBarButtonTap")),e("onNavigationBarSearchInputChanged",c("onNavigationBarSearchInputChanged")),e("onNavigationBarSearchInputConfirmed",c("onNavigationBarSearchInputConfirmed")),e("onNavigationBarSearchInputClicked",c("onNavigationBarSearchInputClicked")),e("onNavigationBarSearchInputFocusChanged",c("onNavigationBarSearchInputFocusChanged")),e("onWebInvokeAppService",a.default)},n("aa77"),n("bf0f");var i=n("e0f3"),r=n("bc06"),a=o(n("a71b"))},e629:function(e,t,n){"use strict";var o=n("1c06"),i=n("ada5"),r=n("8c08"),a=r("match");e.exports=function(e){var t;return o(e)&&(void 0!==(t=e[a])?!!t:"RegExp"===i(e))}},e643:function(e,t,n){n("fd3c"),n("dc8a"),n("bf0f"),n("5c47"),n("5ef2"),n("aa9c"),n("0506"),n("dd2b"),e.exports={props:{customStyle:{type:[Object,String],default:function(){return{}}},customClass:{type:String,default:""},url:{type:String,default:""},linkType:{type:String,default:"navigateTo"}},data:function(){return{}},onLoad:function(){this.$u.getRect=this.$uGetRect},created:function(){this.$u.getRect=this.$uGetRect},computed:{$u:function(){return uni.$u.deepMerge(uni.$u,{props:void 0,http:void 0,mixin:void 0})},bem:function(){return function(e,t,n){var o=this,i="u-".concat(e,"--"),r={};return t&&t.map((function(e){r[i+o[e]]=!0})),n&&n.map((function(e){o[e]?r[i+e]=o[e]:delete r[i+e]})),Object.keys(r)}}},methods:{openPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"url",t=this[e];t&&uni[this.linkType]({url:t})},$uGetRect:function(e,t){var n=this;return new Promise((function(o){uni.createSelectorQuery().in(n)[t?"selectAll":"select"](e).boundingClientRect((function(e){t&&Array.isArray(e)&&e.length&&o(e),!t&&e&&o(e)})).exec()}))},getParentData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.parent||(this.parent={}),this.parent=uni.$u.$parent.call(this,t),this.parent.children&&-1===this.parent.children.indexOf(this)&&this.parent.children.push(this),this.parent&&this.parentData&&Object.keys(this.parentData).map((function(t){e.parentData[t]=e.parent[t]}))},preventEvent:function(e){e&&"function"===typeof e.stopPropagation&&e.stopPropagation()},noop:function(e){this.preventEvent(e)}},onReachBottom:function(){uni.$emit("uOnReachBottom")},beforeDestroy:function(){var e=this;if(this.parent&&uni.$u.test.array(this.parent.children)){var t=this.parent.children;t.map((function(n,o){n===e&&t.splice(o,1)}))}}}},e6a2:function(e,t,n){"use strict";e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},e78b:function(e,t,n){"use strict";e.exports=Math.sign||function(e){var t=+e;return 0===t||t!==t?t:t<0?-1:1}},e7d8:function(e,t,n){"use strict";n("6bfa");var o=n("8bdb"),i=n("85c1"),r=n("af6a"),a=n("71e9"),s=n("bb80"),c=n("ab4a"),u=n("266a"),l=n("81a9"),d=n("e4ca"),f=n("a74c"),p=n("181d"),h=n("4afb"),g=n("235c"),_=n("b720"),v=n("474f"),m=n("338c"),y=n("ae5c"),M=n("8e02"),I=n("e7e3"),C=n("1c06"),b=n("9e70"),T=n("e37c"),S=n("0b5a"),E=n("d67c"),k=n("5112"),D=n("97ed"),A=n("7f28"),L=n("8c08"),O=n("b643"),R=L("iterator"),w=g.set,N=g.getterFor("URLSearchParams"),P=g.getterFor("URLSearchParamsIterator"),G=r("fetch"),U=r("Request"),x=r("Headers"),F=U&&U.prototype,q=x&&x.prototype,B=i.RegExp,V=i.TypeError,H=i.decodeURIComponent,j=i.encodeURIComponent,K=s("".charAt),W=s([].join),Y=s([].push),z=s("".replace),$=s([].shift),X=s([].splice),J=s("".split),Q=s("".slice),Z=/\+/g,ee=Array(4),te=function(e){return ee[e-1]||(ee[e-1]=B("((?:%[\\da-f]{2}){"+e+"})","gi"))},ne=function(e){try{return H(e)}catch(t){return e}},oe=function(e){var t=z(e,Z," "),n=4;try{return H(t)}catch(o){while(n)t=z(t,te(n--),ne);return t}},ie=/[!'()~]|%20/g,re={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ae=function(e){return re[e]},se=function(e){return z(j(e),ie,ae)},ce=h((function(e,t){w(this,{type:"URLSearchParamsIterator",target:N(e).entries,index:0,kind:t})}),"URLSearchParams",(function(){var e=P(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=void 0,D(void 0,!0);var o=t[n];switch(e.kind){case"keys":return D(o.key,!1);case"values":return D(o.value,!1)}return D([o.key,o.value],!1)}),!0),ue=function(e){this.entries=[],this.url=null,void 0!==e&&(C(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===K(e,0)?Q(e,1):e:b(e)))};ue.prototype={type:"URLSearchParams",bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,o,i,r,s,c,u=this.entries,l=k(e);if(l){t=E(e,l),n=t.next;while(!(o=a(n,t)).done){if(i=E(I(o.value)),r=i.next,(s=a(r,i)).done||(c=a(r,i)).done||!a(r,i).done)throw new V("Expected sequence with length 2");Y(u,{key:b(s.value),value:b(c.value)})}}else for(var d in e)m(e,d)&&Y(u,{key:d,value:b(e[d])})},parseQuery:function(e){if(e){var t,n,o=this.entries,i=J(e,"&"),r=0;while(r<i.length)t=i[r++],t.length&&(n=J(t,"="),Y(o,{key:oe($(n)),value:oe(W(n,"="))}))}},serialize:function(){var e,t=this.entries,n=[],o=0;while(o<t.length)e=t[o++],Y(n,se(e.key)+"="+se(e.value));return W(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var le=function(){_(this,de);var e=arguments.length>0?arguments[0]:void 0,t=w(this,new ue(e));c||(this.size=t.entries.length)},de=le.prototype;if(f(de,{append:function(e,t){var n=N(this);A(arguments.length,2),Y(n.entries,{key:b(e),value:b(t)}),c||this.length++,n.updateURL()},delete:function(e){var t=N(this),n=A(arguments.length,1),o=t.entries,i=b(e),r=n<2?void 0:arguments[1],a=void 0===r?r:b(r),s=0;while(s<o.length){var u=o[s];if(u.key!==i||void 0!==a&&u.value!==a)s++;else if(X(o,s,1),void 0!==a)break}c||(this.size=o.length),t.updateURL()},get:function(e){var t=N(this).entries;A(arguments.length,1);for(var n=b(e),o=0;o<t.length;o++)if(t[o].key===n)return t[o].value;return null},getAll:function(e){var t=N(this).entries;A(arguments.length,1);for(var n=b(e),o=[],i=0;i<t.length;i++)t[i].key===n&&Y(o,t[i].value);return o},has:function(e){var t=N(this).entries,n=A(arguments.length,1),o=b(e),i=n<2?void 0:arguments[1],r=void 0===i?i:b(i),a=0;while(a<t.length){var s=t[a++];if(s.key===o&&(void 0===r||s.value===r))return!0}return!1},set:function(e,t){var n=N(this);A(arguments.length,1);for(var o,i=n.entries,r=!1,a=b(e),s=b(t),u=0;u<i.length;u++)o=i[u],o.key===a&&(r?X(i,u--,1):(r=!0,o.value=s));r||Y(i,{key:a,value:s}),c||(this.size=i.length),n.updateURL()},sort:function(){var e=N(this);O(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){var t,n=N(this).entries,o=y(e,arguments.length>1?arguments[1]:void 0),i=0;while(i<n.length)t=n[i++],o(t.value,t.key,this)},keys:function(){return new ce(this,"keys")},values:function(){return new ce(this,"values")},entries:function(){return new ce(this,"entries")}},{enumerable:!0}),l(de,R,de.entries,{name:"entries"}),l(de,"toString",(function(){return N(this).serialize()}),{enumerable:!0}),c&&d(de,"size",{get:function(){return N(this).entries.length},configurable:!0,enumerable:!0}),p(le,"URLSearchParams"),o({global:!0,constructor:!0,forced:!u},{URLSearchParams:le}),!u&&v(x)){var fe=s(q.has),pe=s(q.set),he=function(e){if(C(e)){var t,n=e.body;if("URLSearchParams"===M(n))return t=e.headers?new x(e.headers):new x,fe(t,"content-type")||pe(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),T(e,{body:S(0,b(n)),headers:S(0,t)})}return e};if(v(G)&&o({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return G(e,arguments.length>1?he(arguments[1]):{})}}),v(U)){var ge=function(e){return _(this,F),new U(e,arguments.length>1?he(arguments[1]):{})};F.constructor=ge,ge.prototype=F,o({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:ge})}}e.exports={URLSearchParams:le,getState:N}},e7da:function(e,t,n){"use strict";var o=n("9e70");e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:o(e)}},e7e3:function(e,t,n){"use strict";var o=n("1c06"),i=String,r=TypeError;e.exports=function(e){if(o(e))return e;throw new r(i(e)+" is not an object")}},e838:function(e,t,n){"use strict";var o=n("8bdb"),i=n("a9ee");o({global:!0,forced:parseFloat!==i},{parseFloat:i})},e8b8:function(e,t,n){var o=n("85e5"),i=n("8394");e.exports="process"==o(i.process)},e8f1:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.getImageInfo=void 0;var i=o(n("ccb8")),r={src:{type:String,required:!0,validator:function(e,t){t.src=(0,i.default)(e)}}};t.getImageInfo=r},e944:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("ccb8")),r=n("41f8"),a={methods:{$getRealPath:function(e){return e?(0,i.default)(e):e},$trigger:function(e,t,n){this.$emit(e,r.processEvent.call(this,e,t,n,this.$el,this.$el))}}};t.default=a},e966:function(e,t,n){"use strict";var o=n("8bdb"),i=n("2c57");o({global:!0,forced:parseInt!==i},{parseInt:i})},ea07:function(e,t,n){"use strict";var o=n("ab4a"),i=n("af9e"),r=n("bb80"),a=n("c337"),s=n("ff4f"),c=n("f660"),u=n("346b").f,l=r(u),d=r([].push),f=o&&i((function(){var e=Object.create(null);return e[2]=2,!l(e,2)})),p=function(e){return function(t){var n,i=c(t),r=s(i),u=f&&null===a(i),p=r.length,h=0,g=[];while(p>h)n=r[h++],o&&!(u?n in i:l(i,n))||d(g,e?[n,i[n]]:i[n]);return g}};e.exports={entries:p(!0),values:p(!1)}},eb6d:function(e,t,n){"use strict";(function(e){n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.publishHandler=function(t,n,o){e.UniServiceJSBridge.subscribeHandler(t,n,o)}}).call(this,n("0ee4"))},eb9a:function(e,t,n){"use strict";var o=n("ab4a"),i=n("bb80"),r=n("71e9"),a=n("af9e"),s=n("ff4f"),c=n("7d3c"),u=n("346b"),l=n("1099"),d=n("7e41"),f=Object.assign,p=Object.defineProperty,h=i([].concat);e.exports=!f||a((function(){if(o&&1!==f({b:1},f(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol("assign detection");return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!==f({},e)[n]||"abcdefghijklmnopqrst"!==s(f({},t)).join("")}))?function(e,t){var n=l(e),i=arguments.length,a=1,f=c.f,p=u.f;while(i>a){var g,_=d(arguments[a++]),v=f?h(s(_),f(_)):s(_),m=v.length,y=0;while(m>y)g=v[y++],o&&!r(p,_,g)||(n[g]=_[g])}return n}:f},ebcd:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("9b1b")),r=o(n("4380")),a=o(n("1cbc")),s=o(n("c06e")),c=(0,i.default)({TabBar:r.default,Layout:a.default},s.default);t.default=c},ebe8:function(e,t,n){var o=n("415b").f,i=n("77cd"),r=n("29d5"),a=r("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!i(e,a)&&o(e,a,{configurable:!0,value:t})}},ec96:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={collapse:{value:null,accordion:!1,border:!0}}},ece8:function(e,t,n){"use strict";(function(e){n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.createIntersectionObserver=function(e,t){e._isVue||(t=e,e=null);if(e)return new d(e,t);return new d((0,c.getCurrentPageVm)("createIntersectionObserver"),t)},n("fd3c"),n("64aa"),n("aa9c");var i=o(n("80b1")),r=o(n("efe5")),a=o(n("cd07")),s=n("ed8a"),c=n("a745"),u=(0,a.default)("requestComponentObserver"),l={thresholds:[0],initialRatio:0,observeAll:!1},d=function(){function t(e,n){(0,i.default)(this,t),this.pageId=e.$page&&e.$page.id,this.component=e._$id||e,this.options=Object.assign({},l,n)}return(0,r.default)(t,[{key:"_makeRootMargin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options.rootMargin=["top","right","bottom","left"].map((function(t){return"".concat(Number(e[t])||0,"px")})).join(" ")}},{key:"relativeTo",value:function(e,t){return this.options.relativeToSelector=e,this._makeRootMargin(t),this}},{key:"relativeToViewport",value:function(e){return this.options.relativeToSelector=null,this._makeRootMargin(e),this}},{key:"observe",value:function(t,n){"function"===typeof n&&(this.options.selector=t,this.reqId=u.push(n),e.publishHandler("requestComponentObserver",{reqId:this.reqId,component:this.component,options:this.options},(0,s.checkInWindows)(this.component)?this.component:this.pageId))}},{key:"disconnect",value:function(){e.publishHandler("destroyComponentObserver",{reqId:this.reqId},(0,s.checkInWindows)(this.component)?this.component:this.pageId)}}]),t}()}).call(this,n("ef66"))},ed01:function(e,t){t.f=Object.getOwnPropertySymbols},ed7b:function(e,t,n){"use strict";(function(e){n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.downloadFile=function(t,n){var o,i=t.url,r=t.header,a=t.timeout,u=void 0===a?__uniConfig.networkTimeout&&__uniConfig.networkTimeout.request||6e4:a,l=e,d=l.invokeCallbackHandler,f=new XMLHttpRequest,p=new c(f);return f.open("GET",i,!0),Object.keys(r).forEach((function(e){f.setRequestHeader(e,r[e])})),f.responseType="blob",f.onload=function(){clearTimeout(o);var e,t=f.status,r=this.response,a=f.getResponseHeader("content-disposition");if(a){var c=a.match(/filename="?(\S+)"?\b/);c&&(e=c[1])}r.name=e||(0,s.getFileName)(i),d(n,{errMsg:"downloadFile:ok",statusCode:t,tempFilePath:(0,s.fileToUrl)(r)})},f.onabort=function(){clearTimeout(o),d(n,{errMsg:"downloadFile:fail abort"})},f.onerror=function(){clearTimeout(o),d(n,{errMsg:"downloadFile:fail"})},f.onprogress=function(e){p._callbacks.forEach((function(t){var n=e.loaded,o=e.total,i=Math.round(n/o*100);t({progress:i,totalBytesWritten:n,totalBytesExpectedToWrite:o})}))},f.send(),o=setTimeout((function(){f.onprogress=f.onload=f.onabort=f.onerror=null,p.abort(),d(n,{errMsg:"downloadFile:fail timeout"})}),u),p},n("aa9c"),n("5ef2"),n("dd2b"),n("bf0f"),n("2797"),n("dc8a"),n("5c47"),n("2c10");var i=o(n("80b1")),r=o(n("efe5")),a=o(n("39d8")),s=n("2c6f"),c=function(){function e(t){(0,i.default)(this,e),(0,a.default)(this,"_xhr",void 0),(0,a.default)(this,"_callbacks",[]),this._xhr=t}return(0,r.default)(e,[{key:"onProgressUpdate",value:function(e){"function"===typeof e&&this._callbacks.push(e)}},{key:"offProgressUpdate",value:function(e){var t=this._callbacks.indexOf(e);t>=0&&this._callbacks.splice(t,1)}},{key:"abort",value:function(){this._xhr&&(this._xhr.abort(),delete this._xhr)}}]),e}()}).call(this,n("ef66"))},ed8a:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.checkInWindows=function(e){0;while(e){if(-1!==o.indexOf(e.$options.name))return!0;e=e.$parent}},n("5ef2");var o=["VUniLeftWindow","VUniTopWindow","VUniRightWindow"]},edb7:function(e,t,n){"use strict";var o=n("af9e"),i=n("85c1"),r=i.RegExp,a=o((function(){var e=r("a","y");return e.lastIndex=2,null!==e.exec("abcd")})),s=a||o((function(){return!r("a","y").sticky})),c=a||o((function(){var e=r("^r","gy");return e.lastIndex=2,null!==e.exec("str")}));e.exports={BROKEN_CARET:c,MISSED_STICKY:s,UNSUPPORTED_Y:a}},ee19:function(e,t,n){"use strict";n.r(t);var o=n("969a"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},ee98:function(e,t,n){"use strict";var o=n("bb80"),i=n("862c"),r=n("9e70"),a=n("f072"),s=o("".replace),c=RegExp("^["+a+"]+"),u=RegExp("(^|[^"+a+"])["+a+"]+$"),l=function(e){return function(t){var n=r(i(t));return 1&e&&(n=s(n,c,"")),2&e&&(n=s(n,u,"$1")),n}};e.exports={start:l(1),end:l(2),trim:l(3)}},eeb2:function(e,t,n){"use strict";(function(e,o){n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("1909"),r={data:function(){return{showToast:{visible:!1}}},created:function(){var t=this,n="",r=function(e){return function(o){n=e,setTimeout((function(){t.showToast=o}),10)}};e.on("onShowToast",r("onShowToast")),e.on("onShowLoading",r("onShowLoading"));var a=function(e){return function(){if(n){var r="";if("onHideToast"===e&&"onShowToast"!==n?r=(0,i.t)("uni.showToast.unpaired"):"onHideLoading"===e&&"onShowLoading"!==n&&(r=(0,i.t)("uni.showLoading.unpaired")),r)return o.warn(r);n="",setTimeout((function(){t.showToast.visible=!1}),10)}}};e.on("onHidePopup",a("onHidePopup")),e.on("onHideToast",a("onHideToast")),e.on("onHideLoading",a("onHideLoading"))}};t.default=r}).call(this,n("ef66"),n("ba7c")["default"])},eec9:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.hexToRgba=function(e){if(!e)return{r:0,g:0,b:0,a:0};var t=e.slice(1),n=t.length;if(![3,4,6,8].includes(n))return{r:0,g:0,b:0,a:0};3!==n&&4!==n||(t=t.replace(/(\w{1})/g,"$1$1"));var o=t.match(/(\w{2})/g),r=(0,i.default)(o,4),a=r[0],s=r[1],c=r[2],u=r[3],l=parseInt(a,16),d=parseInt(s,16),f=parseInt(c,16);if(!u)return{r:l,g:d,b:f,a:1};return{r:l,g:d,b:f,a:("0x100".concat(u)-65536)/255}};var i=o(n("5de6"));n("f7a5"),n("4626"),n("5c47"),n("a1c1"),n("2c10"),n("e966")},ef66:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.emit=void 0,Object.defineProperty(t,"invokeCallbackHandler",{enumerable:!0,get:function(){return r.invokeCallbackHandler}}),t.once=t.on=t.off=void 0,Object.defineProperty(t,"publishHandler",{enumerable:!0,get:function(){return a.publishHandler}}),Object.defineProperty(t,"removeCallbackHandler",{enumerable:!0,get:function(){return r.removeCallbackHandler}}),t.subscribe=function(e,t){return c("view."+e,t)},t.subscribeHandler=function(e,t,n){0;return d("view."+e,t,n)},t.unsubscribe=function(e,t){return u("view."+e,t)},n("c223"),n("d4b5");var i=o(n("9b8e")),r=n("591c"),a=n("42db"),s=new i.default,c=s.$on.bind(s);t.on=c;var u=s.$off.bind(s);t.off=u;var l=s.$once.bind(s);t.once=l;var d=s.$emit.bind(s);t.emit=d},efa5:function(e,t,n){"use strict";var o=n("85c1"),i=n("bb80"),r=n("ab4a"),a=n("c89b"),s=n("8945"),c=n("6aca"),u=n("e4ca"),l=n("a74c"),d=n("af9e"),f=n("b720"),p=n("497b"),h=n("c435"),g=n("cc36"),_=n("0e40"),v=n("dacf"),m=n("c337"),y=n("8c4f"),M=n("84d6"),I=n("37ad"),C=n("dcda"),b=n("3d8a"),T=n("181d"),S=n("235c"),E=s.PROPER,k=s.CONFIGURABLE,D=S.getterFor("ArrayBuffer"),A=S.getterFor("DataView"),L=S.set,O=o["ArrayBuffer"],R=O,w=R&&R["prototype"],N=o["DataView"],P=N&&N["prototype"],G=Object.prototype,U=o.Array,x=o.RangeError,F=i(M),q=i([].reverse),B=v.pack,V=v.unpack,H=function(e){return[255&e]},j=function(e){return[255&e,e>>8&255]},K=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},W=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},Y=function(e){return B(_(e),23,4)},z=function(e){return B(e,52,8)},$=function(e,t,n){u(e["prototype"],t,{configurable:!0,get:function(){return n(this)[t]}})},X=function(e,t,n,o){var i=A(e),r=g(n),a=!!o;if(r+t>i.byteLength)throw new x("Wrong index");var s=i.bytes,c=r+i.byteOffset,u=I(s,c,c+t);return a?u:q(u)},J=function(e,t,n,o,i,r){var a=A(e),s=g(n),c=o(+i),u=!!r;if(s+t>a.byteLength)throw new x("Wrong index");for(var l=a.bytes,d=s+a.byteOffset,f=0;f<t;f++)l[d+f]=c[u?f:t-f-1]};if(a){var Q=E&&"ArrayBuffer"!==O.name;d((function(){O(1)}))&&d((function(){new O(-1)}))&&!d((function(){return new O,new O(1.5),new O(NaN),1!==O.length||Q&&!k}))?Q&&k&&c(O,"name","ArrayBuffer"):(R=function(e){return f(this,w),C(new O(g(e)),this,R)},R["prototype"]=w,w.constructor=R,b(R,O)),y&&m(P)!==G&&y(P,G);var Z=new N(new R(2)),ee=i(P.setInt8);Z.setInt8(0,2147483648),Z.setInt8(1,2147483649),!Z.getInt8(0)&&Z.getInt8(1)||l(P,{setInt8:function(e,t){ee(this,e,t<<24>>24)},setUint8:function(e,t){ee(this,e,t<<24>>24)}},{unsafe:!0})}else R=function(e){f(this,w);var t=g(e);L(this,{type:"ArrayBuffer",bytes:F(U(t),0),byteLength:t}),r||(this.byteLength=t,this.detached=!1)},w=R["prototype"],N=function(e,t,n){f(this,P),f(e,w);var o=D(e),i=o.byteLength,a=p(t);if(a<0||a>i)throw new x("Wrong offset");if(n=void 0===n?i-a:h(n),a+n>i)throw new x("Wrong length");L(this,{type:"DataView",buffer:e,byteLength:n,byteOffset:a,bytes:o.bytes}),r||(this.buffer=e,this.byteLength=n,this.byteOffset=a)},P=N["prototype"],r&&($(R,"byteLength",D),$(N,"buffer",A),$(N,"byteLength",A),$(N,"byteOffset",A)),l(P,{getInt8:function(e){return X(this,1,e)[0]<<24>>24},getUint8:function(e){return X(this,1,e)[0]},getInt16:function(e){var t=X(this,2,e,arguments.length>1&&arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=X(this,2,e,arguments.length>1&&arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return W(X(this,4,e,arguments.length>1&&arguments[1]))},getUint32:function(e){return W(X(this,4,e,arguments.length>1&&arguments[1]))>>>0},getFloat32:function(e){return V(X(this,4,e,arguments.length>1&&arguments[1]),23)},getFloat64:function(e){return V(X(this,8,e,arguments.length>1&&arguments[1]),52)},setInt8:function(e,t){J(this,1,e,H,t)},setUint8:function(e,t){J(this,1,e,H,t)},setInt16:function(e,t){J(this,2,e,j,t,arguments.length>2&&arguments[2])},setUint16:function(e,t){J(this,2,e,j,t,arguments.length>2&&arguments[2])},setInt32:function(e,t){J(this,4,e,K,t,arguments.length>2&&arguments[2])},setUint32:function(e,t){J(this,4,e,K,t,arguments.length>2&&arguments[2])},setFloat32:function(e,t){J(this,4,e,Y,t,arguments.length>2&&arguments[2])},setFloat64:function(e,t){J(this,8,e,z,t,arguments.length>2&&arguments[2])}});T(R,"ArrayBuffer"),T(N,"DataView"),e.exports={ArrayBuffer:R,DataView:N}},efba:function(e,t,n){"use strict";var o=n("7ddb"),i=n("4d16").forEach,r=o.aTypedArray,a=o.exportTypedArrayMethod;a("forEach",(function(e){i(r(this),e,arguments.length>1?arguments[1]:void 0)}))},efe5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){t&&i(e.prototype,t);n&&i(e,n);return Object.defineProperty(e,"prototype",{writable:!1}),e},n("6a54");var o=function(e){return e&&e.__esModule?e:{default:e}}(n("18e4"));function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(0,o.default)(i.key),i)}}},eff8:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.addInterceptor=function(e,t){"string"===typeof e&&(0,a.isPlainObject)(t)?l(u[e]||(u[e]={}),t):(0,a.isPlainObject)(e)&&l(c,e)},t.invokeApi=function(e,t,n){for(var o=arguments.length,i=new Array(o>3?o-3:0),r=3;r<o;r++)i[r-3]=arguments[r];var a=_(e);if(a&&Object.keys(a).length){if(Array.isArray(a.invoke)){var s=h(a.invoke,n);return s.then((function(n){return t.apply(void 0,[g(_(e),n)].concat(i))}))}return t.apply(void 0,[g(a,n)].concat(i))}return t.apply(void 0,[n].concat(i))},t.promiseInterceptor=void 0,t.removeInterceptor=function(e,t){"string"===typeof e?(0,a.isPlainObject)(t)?d(u[e],t):delete u[e]:(0,a.isPlainObject)(e)&&d(c,e)},t.wrapperReturnValue=function(e,t){var n=[];Array.isArray(c.returnValue)&&n.push.apply(n,(0,i.default)(c.returnValue));var o=u[e];o&&Array.isArray(o.returnValue)&&n.push.apply(n,(0,i.default)(o.returnValue));return n.forEach((function(e){t=e(t)||t})),t};var i=o(n("b7c7")),r=o(n("fcf3"));n("c223"),n("5ef2"),n("aa9c"),n("dd2b"),n("bf0f"),n("2797"),n("dc8a"),n("f7a5");var a=n("1ffa"),s=["invoke","success","fail","complete","returnValue"],c={},u={};function l(e,t){Object.keys(t).forEach((function(n){-1!==s.indexOf(n)&&(0,a.isFn)(t[n])&&(e[n]=function(e,t){var n=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return n?function(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(n):n}(e[n],t[n]))}))}function d(e,t){e&&t&&Object.keys(t).forEach((function(n){-1!==s.indexOf(n)&&(0,a.isFn)(t[n])&&function(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}(e[n],t[n])}))}function f(e,t){return function(n){return e(n,t)||n}}function p(e){return!!e&&("object"===(0,r.default)(e)||"function"===typeof e)&&"function"===typeof e.then}function h(e,t,n){for(var o=!1,i=0;i<e.length;i++){var r=e[i];if(o)o=Promise.resolve(f(r,n));else{var a=r(t,n);if(p(a)&&(o=Promise.resolve(a)),!1===a)return{then:function(){}}}}return o||{then:function(e){return e(t)}}}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return["success","fail","complete"].forEach((function(n){if(Array.isArray(e[n])){var o=t[n];t[n]=function(i){h(e[n],i,t).then((function(e){return(0,a.isFn)(o)&&o(e)||e}))}}})),t}function _(e){var t=Object.create(null);Object.keys(c).forEach((function(e){"returnValue"!==e&&(t[e]=c[e].slice())}));var n=u[e];return n&&Object.keys(n).forEach((function(e){"returnValue"!==e&&(t[e]=(t[e]||[]).concat(n[e]))})),t}var v={returnValue:function(e){return p(e)?new Promise((function(t,n){e.then((function(e){e[0]?n(e[0]):t(e[1])}))})):e}};t.promiseInterceptor=v},effb:function(e,t,n){"use strict";var o=n("71e9"),i=n("6aa6"),r=n("8c08"),a=n("81a9");e.exports=function(){var e=i("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,s=r("toPrimitive");t&&!t[s]&&a(t,s,(function(e){return o(n,this)}),{arity:1})}},f072:function(e,t,n){"use strict";e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},f074:function(e,t,n){"use strict";var o=n("6aa6"),i=n("181d");i(o("DOMException"),"DOMException")},f086:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=1e5,i={name:"ResizeSensor",props:{initial:{type:[Boolean,String],default:!1}},data:function(){return{size:{width:-1,height:-1}}},watch:{size:{deep:!0,handler:function(e){this.$emit("resize",Object.assign({},e))}}},mounted:function(){!0===this.initial&&this.$nextTick(this.update),this.$el.offsetParent!==this.$el.parentNode&&(this.$el.parentNode.style.position="relative"),"AnimationEvent"in window||this.reset()},activated:function(){this.reset()},methods:{reset:function(){var e=this.$el.firstChild;e.scrollLeft=o,e.scrollTop=o;var t=this.$el.lastChild;t.scrollLeft=o,t.scrollTop=o},update:function(){this.size.width=this.$el.offsetWidth,this.size.height=this.$el.offsetHeight,this.reset()}}};t.default=i},f0b5:function(e,t,n){var o=n("fdca"),i=n("e158"),r=TypeError;e.exports=function(e){if(o(e))return e;throw r(i(e)+" is not a function")}},f153:function(e,t,n){"use strict";n.r(t);var o=n("d406"),i=n("4e22");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a=n("828b"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},f1f43:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this.$createElement,t=this._self._c||e;return t("uni-movable-view",this._g({},this.$listeners),[t("v-uni-resize-sensor",{on:{resize:this.setParent}}),this._t("default")],2)},i=[]},f221:function(e,t,n){"use strict";var o=n("1c06"),i=Math.floor;e.exports=Number.isInteger||function(e){return!o(e)&&isFinite(e)&&i(e)===e}},f259:function(e,t,n){"use strict";var o=n("a1d4"),i=n("338c"),r=n("9917"),a=n("d6b1").f;e.exports=function(e){var t=o.Symbol||(o.Symbol={});i(t,e)||a(t,e,{value:r.f(e)})}},f298:function(e,t,n){"use strict";var o=n("497b"),i=n("9e70"),r=n("862c"),a=RangeError;e.exports=function(e){var t=i(r(this)),n="",s=o(e);if(s<0||s===1/0)throw new a("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(t+=t))1&s&&(n+=t);return n}},f2b8:function(e,t,n){"use strict";n.r(t);var o=n("a312"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},f2cf:function(e,t,n){"use strict";(function(e){n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("5ef2"),n("64aa");var i=o(n("762a")),r={name:"Toast",mixins:[i.default],props:{title:{type:String,default:""},icon:{default:"success",validator:function(e){return-1!==["success","loading","error","none"].indexOf(e)}},image:{type:String,default:""},duration:{type:Number,default:1500},mask:{type:Boolean,default:!1},visible:{type:Boolean,default:!1}},computed:{iconClass:function(){return"success"===this.icon?"uni-icon-success-no-circle":"loading"===this.icon?"uni-loading":"error"===this.icon?"uni-icon-error":""}},beforeUpdate:function(){this.visible&&(this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout((function(){e.emit("onHideToast")}),this.duration))}};t.default=r}).call(this,n("ef66"))},f2f5:function(e,t,n){(function(o,i){var r,a,s=n("bdbb").default;n("dc8a"),n("01a2"),n("8f71"),n("bf0f"),n("9a2c"),n("aa9c"),n("2797"),n("a644"),n("a03a"),n("6a54"),n("e39c"),n("844d"),n("18f7"),n("de6c"),n("7a76"),n("c9b5"),n("5ef2"),n("926e"),n("c223"),n("fd3c"),n("5c47"),n("a1c1"),n("d4b5"),n("0c26"),n("2c10"),function(o,i){"object"==s(t)&&"undefined"!=typeof e?e.exports=i():(r=i,a="function"===typeof r?r.call(t,n,t,e):r,void 0===a||(e.exports=a))}(0,(function(){function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function t(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach((function(e){u(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function n(e){return(n="function"==typeof Symbol&&"symbol"==s(Symbol.iterator)?function(e){return s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":s(e)})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l="undefined"!=typeof o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},d="undefined"!=typeof wx&&"function"==typeof wx.getSystemInfoSync&&Boolean(wx.getSystemInfoSync().fontSizeSetting),f="undefined"!=typeof qq&&"function"==typeof qq.getSystemInfoSync&&Boolean(qq.getSystemInfoSync().fontSizeSetting),p="undefined"!=typeof tt&&"function"==typeof tt.getSystemInfoSync&&Boolean(tt.getSystemInfoSync().fontSizeSetting),h="undefined"!=typeof swan&&"function"==typeof swan.getSystemInfoSync&&Boolean(swan.getSystemInfoSync().fontSizeSetting),g="undefined"!=typeof my&&"function"==typeof my.getSystemInfoSync&&Boolean(my.getSystemInfoSync().fontSizeSetting),_="undefined"!=typeof uni&&"undefined"==typeof window&&"function"==typeof uni.requireNativePlugin,v=_&&"ios"===uni.getDeviceInfo().platform.toLocaleLowerCase(),m=(_&&uni.getDeviceInfo().platform.toLocaleLowerCase(),d||f||p||h||g||_),y=void 0!==l&&void 0!==l.nativeModuleProxy,M=f?qq:p?tt:h?swan:g?my:d?wx:_?uni:{},I=function(e){if("object"!==n(e)||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var o=t;null!==Object.getPrototypeOf(o);)o=Object.getPrototypeOf(o);return t===o};function C(e){if(null==e)return!0;if("boolean"==typeof e)return!1;if("number"==typeof e)return 0===e;if("string"==typeof e)return 0===e.length;if("function"==typeof e)return 0===e.length;if(Array.isArray(e))return 0===e.length;if(e instanceof Error)return""===e.message;if(I(e)){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}return!1}var b=function(){function e(){r(this,e),this._n="WebRequest"}return c(e,[{key:"request",value:function(e,n){var o=this,r="".concat(this._n,".request"),a=e.downloadUrl||"",s=(e.method||"PUT").toUpperCase(),c=e.url;if(i.log("%c tim-upload-plugin %c","background:#0abf5b; padding:1px; border-radius:3px; color: #fff","background:transparent","".concat(r," URL:").concat(c)),e.qs){var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"=";return C(e)?"":I(e)?Object.keys(e).map((function(o){var i=encodeURIComponent(o)+n;return Array.isArray(e[o])?e[o].map((function(e){return i+encodeURIComponent(e)})).join(t):i+encodeURIComponent(e[o])})).filter(Boolean).join(t):void 0}(e.qs);u&&(c+="".concat(-1===c.indexOf("?")?"?":"&").concat(u))}var l=new XMLHttpRequest;l.open(s,c,!0),l.responseType=e.dataType||"text";var d=e.headers||{};if(e.uploadByIP&&(d=t(t({},d),{},{host:e.uploadIP})),!C(d))for(var f in d)d.hasOwnProperty(f)&&"content-length"!==f.toLowerCase()&&"user-agent"!==f.toLowerCase()&&"origin"!==f.toLowerCase()&&"host"!==f.toLowerCase()&&l.setRequestHeader(f,d[f]);return l.onload=function(){if(200===l.status)n(null,o._xhrRes(l,o._xhrBody(l,a,e.uploadByIP&&e.uploadIP),d));else{if(e.uploadIP&&-1===e.url.indexOf(e.uploadIP))return e.url=function(e,t){return e.replace(/^http(s)?:\/\/(.*?)\//,"https://".concat(t,"/"))}(e.url,e.uploadIP),e.uploadByIP=!0,o.request(e,n);var t={code:l.status,message:JSON.stringify(l.responseText)};n(t,o._xhrRes(l,o._xhrBody(l,a,e.uploadByIP&&e.uploadIP),d))}},l.onerror=function(t){var i=o._xhrBody(l,a,e.uploadByIP&&e.uploadIP),r={code:l.status,message:JSON.stringify(l.responseText)};i||l.statusText||0!==l.status||(t.message="CORS blocked or network error"),n(r,o._xhrRes(l,i)),r=null},e.onProgress&&l.upload&&(l.upload.onprogress=function(t){var n=t.total,o=t.loaded,i=Math.floor(100*o/n);e.onProgress({total:n,loaded:o,percent:(i>=100?100:i)/100})}),l.send(e.resources),l}},{key:"_xhrRes",value:function(e,t){var n={};return e.getAllResponseHeaders().trim().split("\n").forEach((function(e){if(e){var t=e.indexOf(":"),o=e.substr(0,t).trim().toLowerCase(),i=e.substr(t+1).trim();n[o]=i}})),{statusCode:e.status,statusMessage:e.statusText,headers:n,data:t}}},{key:"_xhrBody",value:function(e,t,n){return 200===e.status&&t?{location:t,uploadIP:n}:{response:e.responseText,uploadIP:n}}}]),e}(),T=["unknown","image","video","audio","log"],S=["name"],E=function(){function e(){r(this,e)}return c(e,[{key:"request",value:function(e,n){var o=this,i=e.resources,r=void 0===i?"":i,a=e.headers,s=void 0===a?{}:a,c=e.url,u=e.downloadUrl,l=void 0===u?"":u,d=c,f=null,p=l.match(/^(https?:\/\/[^/]+\/)([^/]*\/?)(.*)$/),h=decodeURIComponent(p[3]),_=h.indexOf("?")>-1?h.split("?")[0]:h,m={key:e.fileKey?e.fileKey:_,success_action_status:200,"Content-Type":""},y={};if(v){var I=c.split("?sign=");if(I.length>1){var C=I[1];d="".concat(I[0],"?sign=").concat(encodeURIComponent("".concat(C))),y.sign=decodeURIComponent(C),y.signature=decodeURIComponent(C)}}var b={url:d,header:s,name:"file",filePath:r,formData:t(t({},m),y),timeout:e.timeout||3e5};if(g){var E=b;E.name,b=t(t({},function(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(E,S)),{},{fileName:"file",fileType:T[e.fileType]})}return(f=M.uploadFile(t(t({},b),{},{success:function(e){o._handleResponse({response:e,downloadUrl:l,callback:n})},fail:function(e){o._handleResponse({response:e,downloadUrl:l,callback:n})}}))).onProgressUpdate&&f.onProgressUpdate((function(t){e.onProgress&&e.onProgress({total:t.totalBytesExpectedToSend,loaded:t.totalBytesSent,percent:Math.floor(t.progress)/100})})),f}},{key:"_handleResponse",value:function(e){var n=e.downloadUrl,o=e.response,i=e.callback,r=o.header,a={};if(r)for(var s in r)r.hasOwnProperty(s)&&(a[s.toLowerCase()]=r[s]);var c=+o.statusCode;200===c?i(null,{statusCode:c,headers:a,data:t(t({},o.data),{},{location:n})}):i({code:c,message:JSON.stringify(o.data)},{statusCode:c,headers:a,data:void 0})}}]),e}(),k=function(){function e(){r(this,e)}return c(e,[{key:"request",value:function(e,t){var n=this,o=e.resources,i=void 0===o?"":o,r=e.fileKey,a=void 0===r?"":r,s=e.url,c=e.downloadUrl,u=void 0===c?"":c,l=new FormData;l.append("key",a),l.append("success_action_status",200),l.append("file",{uri:i,type:"application/octet-stream",name:"uploaded_file"}),fetch(s,{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:l}).then((function(e){n._handleResponse({response:e,downloadUrl:u,callback:t})})).catch((function(e){n._handleResponse({response:e,downloadUrl:u,callback:t})}))}},{key:"_handleResponse",value:function(e){var t=e.downloadUrl,n=e.response,o=e.callback,i=n.headers,r=n.status,a=i&&i.map||{};200===r?o(null,{statusCode:200,headers:a,data:{location:t}}):o({code:r,message:JSON.stringify(n)},{statusCode:r,headers:a,data:void 0})}}]),e}();return function(){function e(){r(this,e),this.retry=1,this.tryCount=0,this.systemClockOffset=0,this.httpRequest=m?new E:y?new k:new b,i.log("TIMUploadPlugin.VERSION: ".concat("1.4.0"))}return c(e,[{key:"uploadFile",value:function(e,t){var n=this;return this.httpRequest.request(e,(function(o,i){o&&n.tryCount<n.retry&&n.allowRetry(o)?(n.tryCount++,n.uploadFile(e,t)):(n.tryCount=0,t(o,i))}))}},{key:"allowRetry",value:function(e){var t=!1,n=!1;if(e){var o=e.headers&&(e.headers.date||e.headers.Date)||e.error&&e.error.ServerTime;try{var i=e.error&&e.error.Code,r=e.error&&e.error.Message;("RequestTimeTooSkewed"===i||"AccessDenied"===i&&"Request has expired"===r)&&(n=!0)}catch(l){}if(n&&o){var a=Date.now(),s=Date.parse(o);Math.abs(a+this.systemClockOffset-s)>=3e4&&(this.systemClockOffset=s-a,t=!0)}else 5===Math.floor(e.statusCode/100)&&(t=!0)}return t}}],[{key:"getVersion",value:function(){return"1.4.0"}}]),e}()}))}).call(this,n("0ee4"),n("ba7c")["default"])},f3f2:function(e,t,n){"use strict";var o=n("4d16").forEach,i=n("2b04"),r=i("forEach");e.exports=r?[].forEach:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}},f3f7:function(e,t,n){"use strict";n("53f7")},f439:function(e,t,n){"use strict";var o=n("f0b5"),i=TypeError,r=function(e){var t,n;this.promise=new e((function(e,o){if(void 0!==t||void 0!==n)throw i("Bad Promise constructor");t=e,n=o})),this.resolve=o(t),this.reject=o(n)};e.exports.f=function(e){return new r(e)}},f4c6:function(e){e.exports=JSON.parse('{"uni.app.quit":"Appuyez à nouveau pour quitter l\'application","uni.async.error":"La connexion a expiré, cliquez sur l\'écran pour réessayer.","uni.showActionSheet.cancel":"Annuler","uni.showToast.unpaired":"Veuillez noter que showToast doit être associé à hideToast","uni.showLoading.unpaired":"Veuillez noter que showLoading doit être associé à hideLoading","uni.showModal.cancel":"Annuler","uni.showModal.confirm":"OK","uni.chooseImage.cancel":"Annuler","uni.chooseImage.sourceType.album":"Album","uni.chooseImage.sourceType.camera":"Caméra","uni.chooseVideo.cancel":"Annuler","uni.chooseVideo.sourceType.album":"Album","uni.chooseVideo.sourceType.camera":"Caméra","uni.chooseFile.notUserActivation":"La boîte de dialogue du sélecteur de fichier ne peut être affichée qu\'avec une activation par l\'utilisateur","uni.previewImage.cancel":"Annuler","uni.previewImage.button.save":"Guardar imagen","uni.previewImage.save.success":"Enregistré avec succès","uni.previewImage.save.fail":"Échec de la sauvegarde","uni.setClipboardData.success":"Contenu copié","uni.scanCode.title":"Code d’analyse","uni.scanCode.album":"Album","uni.scanCode.fail":"Fallo de reconocimiento","uni.scanCode.flash.on":"Appuyez pour activer l\'éclairage","uni.scanCode.flash.off":"Appuyez pour désactiver l\'éclairage","uni.startSoterAuthentication.authContent":"Reconnaissance de l\'empreinte digitale","uni.startSoterAuthentication.waitingContent":"Méconnaissable","uni.picker.done":"OK","uni.picker.cancel":"Annuler","uni.video.danmu":"Danmu","uni.video.volume":"Le Volume","uni.button.feedback.title":"retour d\'information","uni.button.feedback.send":"envoyer","uni.chooseLocation.search":"Trouve","uni.chooseLocation.cancel":"Annuler"}')},f547:function(e,t,n){"use strict";var o=n("7ddb"),i=n("9f9e"),r=n("5145"),a=o.aTypedArray,s=o.exportTypedArrayMethod;s("lastIndexOf",(function(e){var t=arguments.length;return i(r,a(this),t>1?[e,arguments[1]]:[e])}))},f555:function(e,t,n){"use strict";var o=n("85c1"),i=n("ab4a"),r=n("e4ca"),a=n("471d"),s=n("af9e"),c=o.RegExp,u=c.prototype,l=i&&s((function(){var e=!0;try{c(".","d")}catch(l){e=!1}var t={},n="",o=e?"dgimsy":"gimsy",i=function(e,o){Object.defineProperty(t,e,{get:function(){return n+=o,!0}})},r={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var a in e&&(r.hasIndices="d"),r)i(a,r[a]);var s=Object.getOwnPropertyDescriptor(u,"flags").get.call(t);return s!==o||n!==o}));l&&r(u,"flags",{configurable:!0,get:a})},f568:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("39d8")),r=o(n("762a")),a=o(n("2c35")),s=n("a301"),c={light:{cancelColor:"#000000"},dark:{cancelColor:"rgb(170, 170, 170)"}};function u(e){this.cancelColor_=c[e].cancelColor}var l={name:"Modal",components:{keypress:a.default},mixins:[r.default],props:{title:{type:String,default:""},content:{type:String,default:""},showCancel:{type:Boolean,default:!0},cancelText:{type:String,default:"Cancel"},cancelColor:{type:String,default:"#000000"},confirmText:{type:String,default:"OK"},confirmColor:{type:String,default:"#007aff"},visible:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},placeholderText:{type:String,default:""}},data:function(){return{cancelColor_:"#000"}},watch:{visible:function(e){e?(this.cancelColor_=this.$parent.showModal.cancelColor,"#000"===this.$parent.showModal.cancelColor&&("dark"===(0,s.getTheme)()&&this._onThemeChange({theme:"dark"}),(0,s.onThemeChange)(this._onThemeChange))):(0,s.offThemeChange)(this._onThemeChange)}},methods:{_onThemeChange:function(e){var t=e.theme;u.call(this,t)},_close:function(e){var t=(0,i.default)({},e,!0);this.editable&&"confirm"===e&&(t.content=this.$refs.editContent.value),this.$emit("close",t)}}};t.default=l},f5a2:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.count,n=e.sourceType,o=e.type,a=e.extension,s=document.createElement("input");s.type="file",(0,i.updateElementStyle)(s,{position:"absolute",visibility:"hidden","z-index":-999,width:0,height:0,top:0,left:0}),s.accept=a.map((function(e){if("*"!==o){var t=e.replace(".","");return"".concat(o,"/").concat(r.default[o][t]||t)}return function(){var e=window.navigator.userAgent.toLowerCase();return!(!e.match(/MicroMessenger/i)||"micromessenger"!==e.match(/MicroMessenger/i)[0])}()?".":0===e.indexOf(".")?e:".".concat(e)})).join(","),t>1&&(s.multiple="multiple");1===n.length&&"camera"===n[0]&&(s.capture="camera");return s},n("5c47"),n("2c10"),n("fd3c"),n("a1c1"),n("c223"),n("5ef2");var i=n("1ffa"),r=o(n("9c27")),a=n("c47d");a.interact.addInteractListener()},f5bd:function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports["default"]=e.exports},f5c7:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={noticeBar:{text:function(){return[]},direction:"row",step:!1,icon:"volume",mode:"",color:"#f9ae3d",bgColor:"#fdf6ec",speed:80,fontSize:14,duration:2e3,disableTouch:!0,url:"",linkType:"navigateTo"}}},f621:function(e,t,n){"use strict";var o,i,r=["top","left","right","bottom"],a={};function s(){return i="CSS"in window&&"function"==typeof CSS.supports?CSS.supports("top: env(safe-area-inset-top)")?"env":CSS.supports("top: constant(safe-area-inset-top)")?"constant":"":"",i}function c(){if(i="string"===typeof i?i:s(),i){var e=[],t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t={passive:!0}}});window.addEventListener("test",null,n)}catch(h){}var c=document.createElement("div");u(c,{position:"absolute",left:"0",top:"0",width:"0",height:"0",zIndex:"-1",overflow:"hidden",visibility:"hidden"}),r.forEach((function(e){p(c,e)})),document.body.appendChild(c),f(),o=!0}else r.forEach((function(e){a[e]=0}));function u(e,t){var n=e.style;Object.keys(t).forEach((function(e){var o=t[e];n[e]=o}))}function f(t){t?e.push(t):e.forEach((function(e){e()}))}function p(e,n){var o=document.createElement("div"),r=document.createElement("div"),s=document.createElement("div"),c=document.createElement("div"),p={position:"absolute",width:"100px",height:"200px",boxSizing:"border-box",overflow:"hidden",paddingBottom:i+"(safe-area-inset-"+n+")"};u(o,p),u(r,p),u(s,{transition:"0s",animation:"none",width:"400px",height:"400px"}),u(c,{transition:"0s",animation:"none",width:"250%",height:"250%"}),o.appendChild(s),r.appendChild(c),e.appendChild(o),e.appendChild(r),f((function(){o.scrollTop=r.scrollTop=1e4;var e=o.scrollTop,i=r.scrollTop;function s(){this.scrollTop!==(this===o?e:i)&&(o.scrollTop=r.scrollTop=1e4,e=o.scrollTop,i=r.scrollTop,function(e){l.length||setTimeout((function(){var e={};l.forEach((function(t){e[t]=a[t]})),l.length=0,d.forEach((function(t){t(e)}))}),0);l.push(e)}(n))}o.addEventListener("scroll",s,t),r.addEventListener("scroll",s,t)}));var h=getComputedStyle(o);Object.defineProperty(a,n,{configurable:!0,get:function(){return parseFloat(h.paddingBottom)}})}}function u(e){return o||c(),a[e]}var l=[];var d=[];var f={get support(){return 0!=("string"===typeof i?i:s()).length},get top(){return u("top")},get left(){return u("left")},get right(){return u("right")},get bottom(){return u("bottom")},onChange:function(e){s()&&(o||c(),"function"===typeof e&&d.push(e))},offChange:function(e){var t=d.indexOf(e);t>=0&&d.splice(t,1)}};e.exports=f},f660:function(e,t,n){"use strict";var o=n("7e41"),i=n("862c");e.exports=function(e){return o(i(e))}},f6c7:function(e,t,n){"use strict";(function(e,o){var i=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.chooseImage=function(e,t){var n=e.count,i=e.sourceType,u=e.extension;d&&(document.body.removeChild(d),d=null);d=(0,s.default)({count:n,sourceType:i,extension:u,type:"image"}),document.body.appendChild(d),d.addEventListener("change",(function(e){for(var o=[],i=e.target.files.length,a=function(t){var i=e.target.files[t],a=void 0;Object.defineProperty(i,"path",{get:function(){return a=a||(0,r.fileToUrl)(i),a}}),t<n&&o.push(i)},s=0;s<i;s++)a(s);var c={errMsg:"chooseImage:ok",get tempFilePaths(){return o.map((function(e){var t=e.path;return t}))},tempFiles:o};l(t,c)})),d.click(),c.interact.getStatus()||o.warn("".concat((0,a.t)("uni.chooseFile.notUserActivation")))},n("fd3c"),n("6a54"),n("aa9c");var r=n("2c6f"),a=n("1909"),s=i(n("f5a2")),c=n("c47d"),u=e,l=u.invokeCallbackHandler,d=null}).call(this,n("ef66"),n("ba7c")["default"])},f709:function(e,t,n){"use strict";function o(e,t){for(var n=this.$children,i=n.length,r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s];for(var c=0;c<i;c++){var u=n[c],l=u.$options.name&&u.$options.name.substr(4);if(~e.indexOf(l))return u.$emit.apply(u,[t].concat(a)),!1;if(!1===o.apply(u,[e,t].concat([a])))return!1}}n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("5ef2"),n("c223");var i={methods:{$dispatch:function(e,t){"string"===typeof e&&(e=[e]);var n=this.$parent||this.$root,o=n.$options.name&&n.$options.name.substr(4);while(n&&(!o||!~e.indexOf(o)))n=n.$parent,n&&(o=n.$options.name&&n.$options.name.substr(4));if(n){for(var i=arguments.length,r=new Array(i>2?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a];n.$emit.apply(n,[t].concat(r))}},$broadcast:function(e,t){"string"===typeof e&&(e=[e]);for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];o.apply(this,[e,t].concat(i))}}};t.default=i},f794:function(e,t,n){var o,i,r,a=n("bdbb").default;n("f7a5"),n("aa9c"),n("c223"),n("c9b5"),n("bf0f"),n("ab80"),n("dd2b"),function(s,c,u){"object"===a(t)?e.exports=t=c(n("5e74"),n("734e")):(i=[n("5e74"),n("734e")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))}(0,(function(e){e.lib.Cipher||function(t){var n=e,o=n.lib,i=o.Base,r=o.WordArray,a=o.BufferedBlockAlgorithm,s=n.enc,c=(s.Utf8,s.Base64),u=n.algo,l=u.EvpKDF,d=o.Cipher=a.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?b:M}return function(t){return{encrypt:function(n,o,i){return e(o).encrypt(t,n,o,i)},decrypt:function(n,o,i){return e(o).decrypt(t,n,o,i)}}}}()}),f=(o.StreamCipher=d.extend({_doFinalize:function(){var e=this._process(!0);return e},blockSize:1}),n.mode={}),p=o.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),h=f.CBC=function(){var e=p.extend();function t(e,t,n){var o,i=this._iv;i?(o=i,this._iv=void 0):o=this._prevBlock;for(var r=0;r<n;r++)e[t+r]^=o[r]}return e.Encryptor=e.extend({processBlock:function(e,n){var o=this._cipher,i=o.blockSize;t.call(this,e,n,i),o.encryptBlock(e,n),this._prevBlock=e.slice(n,n+i)}}),e.Decryptor=e.extend({processBlock:function(e,n){var o=this._cipher,i=o.blockSize,r=e.slice(n,n+i);o.decryptBlock(e,n),t.call(this,e,n,i),this._prevBlock=r}}),e}(),g=n.pad={},_=g.Pkcs7={pad:function(e,t){for(var n=4*t,o=n-e.sigBytes%n,i=o<<24|o<<16|o<<8|o,a=[],s=0;s<o;s+=4)a.push(i);var c=r.create(a,o);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},v=(o.BlockCipher=d.extend({cfg:d.cfg.extend({mode:h,padding:_}),reset:function(){var e;d.reset.call(this);var t=this.cfg,n=t.iv,o=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=o.createEncryptor:(e=o.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(o,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),o.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),m=n.format={},y=m.OpenSSL={stringify:function(e){var t,n=e.ciphertext,o=e.salt;return t=o?r.create([1398893684,1701076831]).concat(o).concat(n):n,t.toString(c)},parse:function(e){var t,n=c.parse(e),o=n.words;return 1398893684==o[0]&&1701076831==o[1]&&(t=r.create(o.slice(2,4)),o.splice(0,4),n.sigBytes-=16),v.create({ciphertext:n,salt:t})}},M=o.SerializableCipher=i.extend({cfg:i.extend({format:y}),encrypt:function(e,t,n,o){o=this.cfg.extend(o);var i=e.createEncryptor(n,o),r=i.finalize(t),a=i.cfg;return v.create({ciphertext:r,key:n,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:o.format})},decrypt:function(e,t,n,o){o=this.cfg.extend(o),t=this._parse(t,o.format);var i=e.createDecryptor(n,o).finalize(t.ciphertext);return i},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),I=n.kdf={},C=I.OpenSSL={execute:function(e,t,n,o,i){if(o||(o=r.random(8)),i)a=l.create({keySize:t+n,hasher:i}).compute(e,o);else var a=l.create({keySize:t+n}).compute(e,o);var s=r.create(a.words.slice(t),4*n);return a.sigBytes=4*t,v.create({key:a,iv:s,salt:o})}},b=o.PasswordBasedCipher=M.extend({cfg:M.cfg.extend({kdf:C}),encrypt:function(e,t,n,o){o=this.cfg.extend(o);var i=o.kdf.execute(n,e.keySize,e.ivSize,o.salt,o.hasher);o.iv=i.iv;var r=M.encrypt.call(this,e,t,i.key,o);return r.mixIn(i),r},decrypt:function(e,t,n,o){o=this.cfg.extend(o),t=this._parse(t,o.format);var i=o.kdf.execute(n,e.keySize,e.ivSize,t.salt,o.hasher);o.iv=i.iv;var r=M.decrypt.call(this,e,t,i.key,o);return r}})}()}))},f79e:function(e,t,n){var o,i,r,a=n("bdbb").default;(function(s,c,u){"object"===a(t)?e.exports=t=c(n("5e74"),n("f794")):(i=[n("5e74"),n("f794")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))})(0,(function(e){return e.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){var t=e.words,n=e.sigBytes-1;for(n=e.sigBytes-1;n>=0;n--)if(t[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}}},e.pad.ZeroPadding}))},f7a5:function(e,t,n){"use strict";var o=n("8bdb"),i=n("ac5f"),r=n("8ae2"),a=n("1c06"),s=n("e34c"),c=n("1fc1"),u=n("f660"),l=n("85f7"),d=n("8c08"),f=n("a554"),p=n("37ad"),h=f("slice"),g=d("species"),_=Array,v=Math.max;o({target:"Array",proto:!0,forced:!h},{slice:function(e,t){var n,o,d,f=u(this),h=c(f),m=s(e,h),y=s(void 0===t?h:t,h);if(i(f)&&(n=f.constructor,r(n)&&(n===_||i(n.prototype))?n=void 0:a(n)&&(n=n[g],null===n&&(n=void 0)),n===_||void 0===n))return p(f,m,y);for(o=new(void 0===n?_:n)(v(y-m,0)),d=0;m<y;m++,d++)m in f&&l(o,d,f[m]);return o.length=d,o}})},f7a9:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={gridItem:{name:null,bgColor:"transparent"}}},f82c:function(e,t,n){"use strict";var o=n("c86b"),i=n("415b"),r=n("29d5"),a=n("1faa"),s=r("species");e.exports=function(e){var t=o(e),n=i.f;a&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},f856:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return t?"".concat(e.replace(/\/+$/,""),"/").concat(t.replace(/^\/+/,"")):e},n("c223"),n("5c47"),n("a1c1")},f8cf:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={codeInput:{adjustPosition:!0,maxlength:6,dot:!1,mode:"box",hairline:!1,space:10,value:"",focus:!1,bold:!1,color:"#606266",fontSize:18,size:35,disabledKeyboard:!1,borderColor:"#c9cacc",disabledDot:!0}}},f95b:function(e,t,n){"use strict";n.r(t);var o=n("a7c2"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},f991:function(e,t,n){"use strict";var o=n("85c1"),i=n("71e9"),r=n("7ddb"),a=n("1fc1"),s=n("1c16"),c=n("1099"),u=n("af9e"),l=o.RangeError,d=o.Int8Array,f=d&&d.prototype,p=f&&f.set,h=r.aTypedArray,g=r.exportTypedArrayMethod,_=!u((function(){var e=new Uint8ClampedArray(2);return i(p,e,{length:1,0:3},1),3!==e[1]})),v=_&&r.NATIVE_ARRAY_BUFFER_VIEWS&&u((function(){var e=new d(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));g("set",(function(e){h(this);var t=s(arguments.length>1?arguments[1]:void 0,1),n=c(e);if(_)return i(p,this,n,t);var o=this.length,r=a(n),u=0;if(r+t>o)throw new l("Wrong length");while(u<r)this[t+u]=n[u++]}),!_||v)},f9ed:function(e,t,n){"use strict";var o=n("c215"),i=n("ddd3");e.exports=function(e){var t=o(e,"string");return i(t)?t:t+""}},fa2b:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"uni-fade"}},[n("uni-modal",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],on:{touchmove:function(e){e.preventDefault()}}},[n("div",{staticClass:"uni-mask"}),n("div",{staticClass:"uni-modal"},[e.title?n("div",{staticClass:"uni-modal__hd"},[n("strong",{staticClass:"uni-modal__title",domProps:{textContent:e._s(e.title)}})]):e._e(),e.editable?n("textarea",{ref:"editContent",staticClass:"uni-modal__textarea",attrs:{rows:"1",placeholder:e.placeholderText},domProps:{value:e.content}}):n("div",{staticClass:"uni-modal__bd",domProps:{textContent:e._s(e.content)},on:{touchmove:function(e){e.stopPropagation()}}}),n("div",{staticClass:"uni-modal__ft"},[e.showCancel?n("div",{staticClass:"uni-modal__btn uni-modal__btn_default",style:{color:e.cancelColor_},on:{click:function(t){return e._close("cancel")}}},[e._v("\n          "+e._s(e.cancelText)+"\n        ")]):e._e(),n("div",{staticClass:"uni-modal__btn uni-modal__btn_primary",style:{color:e.confirmColor},on:{click:function(t){return e._close("confirm")}}},[e._v("\n          "+e._s(e.confirmText)+"\n        ")])])]),n("keypress",{attrs:{disable:!e.visible},on:{esc:function(t){return e._close("cancel")},enter:function(t){!e.editable&&e._close("confirm")}}})],1)],1)},i=[]},fa7a:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.previewImage=void 0,n("fd3c"),n("64aa");var i=o(n("ccb8")),r={urls:{type:Array,required:!0,validator:function(e,t){var n;if(t.urls=e.map((function(e){if("string"===typeof e)return(0,i.default)(e);n=!0})),n)return"url is not string"}},current:{type:[String,Number],validator:function(e,t){"number"===typeof e?t.current=e>0&&e<t.urls.length?e:0:"string"===typeof e&&e&&(t.current=(0,i.default)(e))},default:0}};t.previewImage=r},fab0:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("object"!==(0,o.default)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==(0,o.default)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},n("9e15"),n("884b"),n("01a2"),n("e39c"),n("bf0f"),n("7a76"),n("c9b5"),n("64aa");var o=function(e){return e&&e.__esModule?e:{default:e}}(n("fcf3"))},fac1:function(e,t,n){var o,i,r,a,s,c,u,l,d=n("8394"),f=n("dbc3"),p=n("d953").f,h=n("fd1d").set,g=n("6f19"),_=n("70a5"),v=n("c820"),m=n("e8b8"),y=d.MutationObserver||d.WebKitMutationObserver,M=d.document,I=d.process,C=d.Promise,b=p(d,"queueMicrotask"),T=b&&b.value;T||(o=function(){var e,t;m&&(e=I.domain)&&e.exit();while(i){t=i.fn,i=i.next;try{t()}catch(n){throw i?a():r=void 0,n}}r=void 0,e&&e.enter()},g||m||v||!y||!M?!_&&C&&C.resolve?(u=C.resolve(void 0),u.constructor=C,l=f(u.then,u),a=function(){l(o)}):m?a=function(){I.nextTick(o)}:(h=f(h,d),a=function(){h(o)}):(s=!0,c=M.createTextNode(""),new y(o).observe(c,{characterData:!0}),a=function(){c.data=s=!s})),e.exports=T||function(e){var t={fn:e,next:void 0};r&&(r.next=t),i||(i=t,a()),r=t}},fb6b:function(e,t,n){"use strict";var o=n("3f57"),i=o("span").classList,r=i&&i.constructor&&i.constructor.prototype;e.exports=r===Object.prototype?void 0:r},fbe6:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("64aa");var o={upload:{accept:"image",capture:function(){return["album","camera"]},compressed:!0,camera:"back",maxDuration:60,uploadIcon:"camera-fill",uploadIconColor:"#D3D4D6",useBeforeRead:!1,previewFullImage:!0,maxCount:52,disabled:!1,imageMode:"aspectFill",name:"",sizeType:function(){return["original","compressed"]},multiple:!1,deletable:!0,maxSize:Number.MAX_VALUE,fileList:function(){return[]},uploadText:"",width:80,height:80,previewImage:!0}};t.default=o},fc40:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.responsive?n("uni-layout",{class:{"uni-app--showlayout":e.showLayout,"uni-app--showtopwindow":e.showTopWindow,"uni-app--showleftwindow":e.showLeftWindow,"uni-app--showrightwindow":e.showRightWindow}},[e.topWindow?n("uni-top-window",{directives:[{name:"show",rawName:"v-show",value:e.showTopWindow||e.apiShowTopWindow,expression:"showTopWindow || apiShowTopWindow"}]},[n("div",{ref:"topWindow",staticClass:"uni-top-window",style:e.topWindowStyle},[n("v-uni-top-window",e._b({ref:"top",attrs:{"navigation-bar-title-text":e.navigationBarTitleText},on:{"hook:mounted":e.onTopWindowInit}},"v-uni-top-window",e.bindWindow,!1))],1),n("div",{staticClass:"uni-top-window--placeholder",style:{height:e.topWindowHeight}})]):e._e(),n("uni-content",[n("uni-main",[n("keep-alive",{attrs:{include:e.keepAliveInclude}},[n("router-view",{key:e.routerKey})],1)],1),e.leftWindow?n("uni-left-window",{directives:[{name:"show",rawName:"v-show",value:e.showLeftWindow||e.apiShowLeftWindow,expression:"showLeftWindow || apiShowLeftWindow"}],ref:"leftWindow",style:e.leftWindowStyle,attrs:{"data-show":e.apiShowLeftWindow}},[e.apiShowLeftWindow?n("div",{staticClass:"uni-mask",on:{click:function(t){e.apiShowLeftWindow=!1}}}):e._e(),n("div",{staticClass:"uni-left-window"},[n("v-uni-left-window",e._b({ref:"left",on:{"hook:mounted":e.onLeftWindowInit}},"v-uni-left-window",e.bindWindow,!1))],1)]):e._e(),e.rightWindow?n("uni-right-window",{directives:[{name:"show",rawName:"v-show",value:e.showRightWindow||e.apiShowRightWindow,expression:"showRightWindow || apiShowRightWindow"}],ref:"rightWindow",style:e.rightWindowStyle,attrs:{"data-show":e.apiShowRightWindow}},[e.apiShowRightWindow?n("div",{staticClass:"uni-mask",on:{click:function(t){e.apiShowRightWindow=!1}}}):e._e(),n("div",{staticClass:"uni-right-window"},[n("v-uni-right-window",e._b({ref:"right",on:{"hook:mounted":e.onRightWindowInit}},"v-uni-right-window",e.bindWindow,!1))],1)]):e._e()],1)],1):n("keep-alive",{attrs:{include:e.keepAliveInclude}},[n("router-view",{key:e.routerKey})],1)},i=[]},fcf3:function(e,t,n){"use strict";function o(e){return t.default=o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=o,n("01a2"),n("e39c"),n("bf0f"),n("844d"),n("18f7"),n("de6c")},fd1d:function(e,t,n){var o,i,r,a,s=n("8394"),c=n("330d"),u=n("dbc3"),l=n("fdca"),d=n("77cd"),f=n("7aa6"),p=n("3671"),h=n("b130"),g=n("3b78"),_=n("fe7d"),v=n("6f19"),m=n("e8b8"),y=s.setImmediate,M=s.clearImmediate,I=s.process,C=s.Dispatch,b=s.Function,T=s.MessageChannel,S=s.String,E=0,k={};try{o=s.location}catch(R){}var D=function(e){if(d(k,e)){var t=k[e];delete k[e],t()}},A=function(e){return function(){D(e)}},L=function(e){D(e.data)},O=function(e){s.postMessage(S(e),o.protocol+"//"+o.host)};y&&M||(y=function(e){_(arguments.length,1);var t=l(e)?e:b(e),n=h(arguments,1);return k[++E]=function(){c(t,void 0,n)},i(E),E},M=function(e){delete k[e]},m?i=function(e){I.nextTick(A(e))}:C&&C.now?i=function(e){C.now(A(e))}:T&&!v?(r=new T,a=r.port2,r.port1.onmessage=L,i=u(a.postMessage,a)):s.addEventListener&&l(s.postMessage)&&!s.importScripts&&o&&"file:"!==o.protocol&&!f(O)?(i=O,s.addEventListener("message",L,!1)):i="onreadystatechange"in g("script")?function(e){p.appendChild(g("script"))["onreadystatechange"]=function(){p.removeChild(this),D(e)}}:function(e){setTimeout(A(e),0)}),e.exports={set:y,clear:M}},fd2f:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.downloadFile=void 0;var o={url:{type:String,required:!0},header:{type:Object,validator:function(e,t){t.header=e||{}}}};t.downloadFile=o},fd3a:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={switch:{loading:!1,disabled:!1,size:25,activeColor:"#2979ff",inactiveColor:"#ffffff",value:!1,activeValue:!0,inactiveValue:!1,asyncChange:!1,space:0}}},fd3c:function(e,t,n){"use strict";var o=n("8bdb"),i=n("4d16").map,r=n("a554"),a=r("map");o({target:"Array",proto:!0,forced:!a},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},fdca:function(e,t,n){var o=n("c2d7"),i=o.all;e.exports=o.IS_HTMLDDA?function(e){return"function"==typeof e||e===i}:function(e){return"function"==typeof e}},fe24:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this.$createElement;this._self._c;return this._m(0)},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"uni-async-loading"},[t("i",{staticClass:"uni-loading"})])}]},fe64:function(e,t,n){"use strict";n.r(t);var o=n("3e46");for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var r=n("828b"),a=Object(r["a"])(o["default"],void 0,void 0,!1,null,null,null,!1,void 0,void 0);t["default"]=a.exports},fe7d:function(e,t){var n=TypeError;e.exports=function(e,t){if(e<t)throw n("Not enough arguments");return e}},febb:function(e){e.exports=JSON.parse('{"uni.app.quit":"再按一次退出应用","uni.async.error":"连接服务器超时，点击屏幕重试","uni.showActionSheet.cancel":"取消","uni.showToast.unpaired":"请注意 showToast 与 hideToast 必须配对使用","uni.showLoading.unpaired":"请注意 showLoading 与 hideLoading 必须配对使用","uni.showModal.cancel":"取消","uni.showModal.confirm":"确定","uni.chooseImage.cancel":"取消","uni.chooseImage.sourceType.album":"从相册选择","uni.chooseImage.sourceType.camera":"拍摄","uni.chooseVideo.cancel":"取消","uni.chooseVideo.sourceType.album":"从相册选择","uni.chooseVideo.sourceType.camera":"拍摄","uni.chooseFile.notUserActivation":"文件选择器对话框只能在由用户激活时显示","uni.previewImage.cancel":"取消","uni.previewImage.button.save":"保存图像","uni.previewImage.save.success":"保存图像到相册成功","uni.previewImage.save.fail":"保存图像到相册失败","uni.setClipboardData.success":"内容已复制","uni.scanCode.title":"扫码","uni.scanCode.album":"相册","uni.scanCode.fail":"识别失败","uni.scanCode.flash.on":"轻触照亮","uni.scanCode.flash.off":"轻触关闭","uni.startSoterAuthentication.authContent":"指纹识别中...","uni.startSoterAuthentication.waitingContent":"无法识别","uni.picker.done":"完成","uni.picker.cancel":"取消","uni.video.danmu":"弹幕","uni.video.volume":"音量","uni.button.feedback.title":"问题反馈","uni.button.feedback.send":"发送","uni.chooseLocation.search":"搜索地点","uni.chooseLocation.cancel":"取消"}')},fec3:function(e,t,n){"use strict";var o=n("ab4a"),i=n("af9e");e.exports=o&&i((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},fed6:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this.$createElement,t=this._self._c||e;return t("uni-web-view",this._g({ref:"webviewContainer",class:{"uni-webview--fullscreen":this.fullscreen}},this.$listeners),[t("v-uni-resize-sensor",{ref:"sensor",on:{resize:this._resize}})],1)},i=[]},ff07:function(e,t,n){"use strict";n.r(t);var o=n("33f8");for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var r=n("828b"),a=Object(r["a"])(o["default"],void 0,void 0,!1,null,null,null,!1,void 0,void 0);t["default"]=a.exports},ff1d:function(e,t,n){var o,i,r,a=n("bdbb").default;n("aa9c"),function(s,c){"object"===a(t)?e.exports=t=c(n("5e74")):(i=[n("5e74")],o=c,r="function"===typeof o?o.apply(t,i):o,void 0===r||(e.exports=r))}(0,(function(e){return function(){var t=e,n=t.lib,o=n.WordArray,i=t.enc;i.Utf16=i.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],i=0;i<n;i+=2){var r=t[i>>>2]>>>16-i%4*8&65535;o.push(String.fromCharCode(r))}return o.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>1]|=e.charCodeAt(i)<<16-i%2*16;return o.create(n,2*t)}};function r(e){return e<<8&4278255360|e>>>8&16711935}i.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],i=0;i<n;i+=2){var a=r(t[i>>>2]>>>16-i%4*8&65535);o.push(String.fromCharCode(a))}return o.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>1]|=r(e.charCodeAt(i)<<16-i%2*16);return o.create(n,2*t)}}}(),e.enc.Utf16}))},ff4f:function(e,t,n){"use strict";var o=n("00c2"),i=n("62f7");e.exports=Object.keys||function(e){return o(e,i)}},ff87:function(e,t,n){"use strict";n.r(t);var o=n("6d9a"),i=n("5099");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a=n("828b"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports}}]);